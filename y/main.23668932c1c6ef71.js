"use strict";(self.webpackChunksalaJuegos=self.webpackChunksalaJuegos||[]).push([[179],{7128:(an,ht,j)=>{j.d(ht,{nm:()=>oe});var C=j(4215),de=(j(4650),j(3692),j(5867),j(5861)),Le=j(9681),qe=j(4859),be=j(2090),tt=j(1877);const ie=new Map,fe={activated:!1,tokenObservers:[]},Ce={initialized:!1,enabled:!1};function st(We){return ie.get(We)||fe}function ot(We,ke){ie.set(We,ke)}function nt(){return Ce}class gt{constructor(ke,rt,Nt,Zt,un){if(this.operation=ke,this.retryPolicy=rt,this.getWaitDuration=Nt,this.lowerBound=Zt,this.upperBound=un,this.pending=null,this.nextErrorWaitInterval=Zt,Zt>un)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ke){var rt=this;return(0,de.Z)(function*(){rt.stop();try{rt.pending=new be.BH,yield function Be(We){return new Promise(ke=>{setTimeout(ke,We)})}(rt.getNextRun(ke)),rt.pending.resolve(),yield rt.pending.promise,rt.pending=new be.BH,yield rt.operation(),rt.pending.resolve(),yield rt.pending.promise,rt.process(!0).catch(()=>{})}catch(Nt){rt.retryPolicy(Nt)?rt.process(!1).catch(()=>{}):rt.stop()}})()}getNextRun(ke){if(ke)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const rt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),rt}}}const ee=new be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ze(We){if(!st(We).activated)throw ee.create("use-before-activation",{appName:We.name})}function Ke(We,ke){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,de.Z)(function*({url:We,body:ke},rt){var Nt,Zt;const un={"Content-Type":"application/json"},Mn=rt.getImmediate({optional:!0});if(Mn){const ki=yield Mn.getHeartbeatsHeader();ki&&(un["X-Firebase-Client"]=ki)}const Fn={method:"POST",body:JSON.stringify(ke),headers:un};let $n,$r;try{$n=yield fetch(We,Fn)}catch(ki){throw ee.create("fetch-network-error",{originalErrorMessage:null===(Nt=ki)||void 0===Nt?void 0:Nt.message})}if(200!==$n.status)throw ee.create("fetch-status-error",{httpStatus:$n.status});try{$r=yield $n.json()}catch(ki){throw ee.create("fetch-parse-error",{originalErrorMessage:null===(Zt=ki)||void 0===Zt?void 0:Zt.message})}const ys=$r.ttl.match(/^([\d.]+)(s)$/);if(!ys||!ys[2]||isNaN(Number(ys[1])))throw ee.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${$r.ttl}`});const Di=1e3*Number(ys[1]),Hi=Date.now();return{token:$r.token,expireTimeMillis:Hi+Di,issuedAtTimeMillis:Hi}})).apply(this,arguments)}function Bt(We,ke){const{projectId:rt,appId:Nt,apiKey:Zt}=We.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${rt}/apps/${Nt}:exchangeDebugToken?key=${Zt}`,body:{debug_token:ke}}}const Et="firebase-app-check-store";let zn=null;function Nn(){return zn||(zn=new Promise((We,ke)=>{var rt;try{const Nt=indexedDB.open("firebase-app-check-database",1);Nt.onsuccess=Zt=>{We(Zt.target.result)},Nt.onerror=Zt=>{var un;ke(ee.create("storage-open",{originalErrorMessage:null===(un=Zt.target.error)||void 0===un?void 0:un.message}))},Nt.onupgradeneeded=Zt=>{0===Zt.oldVersion&&Zt.target.result.createObjectStore(Et,{keyPath:"compositeKey"})}}catch(Nt){ke(ee.create("storage-open",{originalErrorMessage:null===(rt=Nt)||void 0===rt?void 0:rt.message}))}}),zn)}function Cr(){return(Cr=(0,de.Z)(function*(We,ke){const Nt=(yield Nn()).transaction(Et,"readwrite"),un=Nt.objectStore(Et).put({compositeKey:We,value:ke});return new Promise((Mn,Fn)=>{un.onsuccess=$n=>{Mn()},Nt.onerror=$n=>{var $r;Fn(ee.create("storage-set",{originalErrorMessage:null===($r=$n.target.error)||void 0===$r?void 0:$r.message}))}})})).apply(this,arguments)}const dn=new tt.Yd("@firebase/app-check");function mr(We,ke){return(0,be.hl)()?function jn(We,ke){return function dr(We,ke){return Cr.apply(this,arguments)}(function Mr(We){return`${We.options.appId}-${We.name}`}(We),ke)}(We,ke).catch(rt=>{dn.warn(`Failed to write token to IndexedDB. Error: ${rt}`)}):Promise.resolve()}function Yn(){return nt().enabled}function er(){return fr.apply(this,arguments)}function fr(){return(fr=(0,de.Z)(function*(){const We=nt();if(We.enabled&&We.token)return We.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const vr={error:"UNKNOWN_ERROR"};function dt(We){return be.US.encodeString(JSON.stringify(We),!1)}function Ie(We){return _e.apply(this,arguments)}function _e(){return(_e=(0,de.Z)(function*(We,ke=!1){const rt=We.app;ze(rt);const Nt=st(rt);let un,Zt=Nt.token;if(!Zt){const $n=yield Nt.cachedTokenPromise;$n&&zt($n)&&(Zt=$n)}if(!ke&&Zt&&zt(Zt))return{token:Zt.token};let Fn,Mn=!1;if(Yn()){Nt.exchangeTokenPromise||(Nt.exchangeTokenPromise=Ke(Bt(rt,yield er()),We.heartbeatServiceProvider).then($r=>(Nt.exchangeTokenPromise=void 0,$r)),Mn=!0);const $n=yield Nt.exchangeTokenPromise;return yield mr(rt,$n),ot(rt,Object.assign(Object.assign({},Nt),{token:$n})),{token:$n.token}}try{Nt.exchangeTokenPromise||(Nt.exchangeTokenPromise=Nt.provider.getToken().then($n=>(Nt.exchangeTokenPromise=void 0,$n)),Mn=!0),Zt=yield Nt.exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?dn.warn($n.message):dn.error($n),un=$n}return Zt?(Fn={token:Zt.token},ot(rt,Object.assign(Object.assign({},Nt),{token:Zt})),yield mr(rt,Zt)):Fn=Jn(un),Mn&&Qn(rt,Fn),Fn})).apply(this,arguments)}function ct(We,ke){const rt=st(We),Nt=rt.tokenObservers.filter(Zt=>Zt.next!==ke);0===Nt.length&&rt.tokenRefresher&&rt.tokenRefresher.isRunning()&&rt.tokenRefresher.stop(),ot(We,Object.assign(Object.assign({},rt),{tokenObservers:Nt}))}function rn(We){const{app:ke}=We,rt=st(ke);let Nt=rt.tokenRefresher;Nt||(Nt=function Dn(We){const{app:ke}=We;return new gt((0,de.Z)(function*(){let Nt;if(Nt=st(ke).token?yield Ie(We,!0):yield Ie(We),Nt.error)throw Nt.error}),()=>!0,()=>{const rt=st(ke);if(rt.token){let Nt=rt.token.issuedAtTimeMillis+.5*(rt.token.expireTimeMillis-rt.token.issuedAtTimeMillis)+3e5;return Nt=Math.min(Nt,rt.token.expireTimeMillis-3e5),Math.max(0,Nt-Date.now())}return 0},3e4,96e4)}(We),ot(ke,Object.assign(Object.assign({},rt),{tokenRefresher:Nt}))),!Nt.isRunning()&&rt.isTokenAutoRefreshEnabled&&Nt.start()}function Qn(We,ke){const rt=st(We).tokenObservers;for(const Nt of rt)try{"EXTERNAL"===Nt.type&&null!=ke.error?Nt.error(ke.error):Nt.next(ke)}catch{}}function zt(We){return We.expireTimeMillis-Date.now()>0}function Jn(We){return{token:dt(vr),error:We}}class vn{constructor(ke,rt){this.app=ke,this.heartbeatServiceProvider=rt}_delete(){const{tokenObservers:ke}=st(this.app);for(const rt of ke)ct(this.app,rt.next);return Promise.resolve()}}const ne="app-check-internal";!function W(){(0,Le._registerComponent)(new qe.wA("app-check",We=>function br(We,ke){return new vn(We,ke)}(We.getProvider("app").getImmediate(),We.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((We,ke,rt)=>{We.getProvider(ne).initialize()})),(0,Le._registerComponent)(new qe.wA(ne,We=>function wn(We){return{getToken:ke=>Ie(We,ke),addTokenListener:ke=>function mt(We,ke,rt,Nt){const{app:Zt}=We,un=st(Zt),Mn={next:rt,error:Nt,type:ke};if(ot(Zt,Object.assign(Object.assign({},un),{tokenObservers:[...un.tokenObservers,Mn]})),un.token&&zt(un.token)){const Fn=un.token;Promise.resolve().then(()=>{rt({token:Fn.token}),rn(We)}).catch(()=>{})}un.cachedTokenPromise.then(()=>rn(We))}(We,"INTERNAL",ke),removeTokenListener:ke=>ct(We.app,ke)}}(We.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)("@firebase/app-check","0.5.12")}();class oe{constructor(){return(0,C.vb)("app-check")}}typeof window<"u"&&window},3692:(an,ht,j)=>{j.d(ht,{Ot:()=>P,ZF:()=>at,hX:()=>st,z6:()=>de});var C=j(5867),h=j(4650),Z=j(4215);class P{constructor(gt){return gt}}class de{constructor(){return(0,C.C6)()}}const be=new h.OlP("angularfire2._apps"),tt={provide:P,useFactory:function qe(xe){return xe&&1===xe.length?xe[0]:new P((0,C.Mq)())},deps:[[new h.FiY,be]]},ie={provide:de,deps:[[new h.FiY,be]]};function fe(xe){return(gt,Be)=>{const ut=gt.runOutsideAngular(()=>xe(Be));return new P(ut)}}let Ce=(()=>{class xe{constructor(Be){(0,C.KN)("angularfire",Z.q4.full,"core"),(0,C.KN)("angularfire",Z.q4.full,"app"),(0,C.KN)("angular",h.q4F.full,Be.toString())}}return xe.\u0275fac=function(Be){return new(Be||xe)(h.LFG(h.Lbi))},xe.\u0275mod=h.oAB({type:xe}),xe.\u0275inj=h.cJS({providers:[tt,ie]}),xe})();function st(xe,...gt){return{ngModule:Ce,providers:[{provide:be,useFactory:fe(xe),multi:!0,deps:[h.R0b,h.zs3,Z.HU,...gt]}]}}const at=(0,Z.u3)(C.ZF,!0)},3999:(an,ht,j)=>{j.d(ht,{gx:()=>Ot,dh:()=>at,fD:()=>se,Xb:()=>Bt,v0:()=>nn,AR:()=>ee,e5:()=>ct});var C=j(4215),h=j(4650),Z=j(3692),P=j(5867),de=j(7128),Le=j(7143),fe=(j(2090),j(9681),j(1877),j(4859),j(9751));function Ce(Dt){return new fe.y(function(Yt){return{unsubscribe:(0,Le.v)(Dt,Yt.next.bind(Yt),Yt.error.bind(Yt),Yt.complete.bind(Yt))}})}class Ot{constructor(Yt){return Yt}}class at{constructor(){return(0,C.vb)("auth")}}const Ht=new h.OlP("angularfire2.auth-instances");function xe(Dt){return(Yt,Bn)=>{const Zn=Yt.runOutsideAngular(()=>Dt(Bn));return new Ot(Zn)}}const gt={provide:at,deps:[[new h.FiY,Ht]]},Be={provide:Ot,useFactory:function qt(Dt,Yt){const Bn=(0,C.JM)("auth",Dt,Yt);return Bn&&new Ot(Bn)},deps:[[new h.FiY,Ht],Z.Ot]};let ut=(()=>{class Dt{constructor(){(0,P.KN)("angularfire",C.q4.full,"auth")}}return Dt.\u0275fac=function(Bn){return new(Bn||Dt)},Dt.\u0275mod=h.oAB({type:Dt}),Dt.\u0275inj=h.cJS({providers:[Be,gt]}),Dt})();function ee(Dt,...Yt){return{ngModule:ut,providers:[{provide:Ht,useFactory:xe(Dt),multi:!0,deps:[h.R0b,h.zs3,C.HU,Z.z6,[new h.FiY,de.nm],...Yt]}]}}const se=(0,C.u3)(Ce,!0),Bt=(0,C.u3)(Le.a5,!0),nn=(0,C.u3)(Le.n,!0),ct=(0,C.u3)(Le.a6,!0)},5626:(an,ht,j)=>{j.d(ht,{ST:()=>ft});var C=j(4650),h=j(4986),Z=j(9751),P=j(8996),de=j(9646),Le=j(4215),qe=j(8675),be=j(4482),tt=j(5403);function ie(){return(0,be.e)((ne,W)=>{let te,Ee=!1;ne.subscribe((0,tt.x)(W,oe=>{const Ze=te;te=oe,Ee&&W.next([Ze,oe]),Ee=!0}))})}var fe=j(4004),Ce=j(5026),st=j(4671);function nt(ne,W){return ne===W}var Ot=j(9300),at=j(2011),it=j(6895),qt=(j(5881),j(3942)),xe=j(5525),gt=j(2090),Be=j(4859);function se(ne,W){if(void 0===W)return{merge:!1};if(void 0!==W.mergeFields&&void 0!==W.merge)throw new xe.WA("invalid-argument",`Invalid options passed to function ${ne}(): You cannot specify both "merge" and "mergeFields".`);return W}function ze(){if(typeof Uint8Array>"u")throw new xe.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Pe(){if(!(0,xe.Me)())throw new xe.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ue{constructor(W){this._delegate=W}static fromBase64String(W){return Pe(),new Ue(xe.Jj.fromBase64String(W))}static fromUint8Array(W){return ze(),new Ue(xe.Jj.fromUint8Array(W))}toBase64(){return Pe(),this._delegate.toBase64()}toUint8Array(){return ze(),this._delegate.toUint8Array()}isEqual(W){return this._delegate.isEqual(W._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ke(ne){return function Ye(ne,W){if("object"!=typeof ne||null===ne)return!1;const te=ne;for(const Ee of W)if(Ee in te&&"function"==typeof te[Ee])return!0;return!1}(ne,["next","error","complete"])}class Mt{enableIndexedDbPersistence(W,te){return(0,xe.ST)(W._delegate,{forceOwnership:te})}enableMultiTabIndexedDbPersistence(W){return(0,xe.fH)(W._delegate)}clearIndexedDbPersistence(W){return(0,xe.Fc)(W._delegate)}}class kt{constructor(W,te,Ee){this._delegate=te,this._persistenceProvider=Ee,this.INTERNAL={delete:()=>this.terminate()},W instanceof xe.l7||(this._appCompat=W)}get _databaseId(){return this._delegate._databaseId}settings(W){const te=this._delegate._getSettings();!W.merge&&te.host!==W.host&&(0,xe.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),W.merge&&delete(W=Object.assign(Object.assign({},te),W)).merge,this._delegate._setSettings(W)}useEmulator(W,te,Ee={}){(0,xe.at)(this._delegate,W,te,Ee)}enableNetwork(){return(0,xe.Ix)(this._delegate)}disableNetwork(){return(0,xe.TF)(this._delegate)}enablePersistence(W){let te=!1,Ee=!1;return W&&(te=!!W.synchronizeTabs,Ee=!!W.experimentalForceOwningTab,(0,xe.Wi)("synchronizeTabs",te,"experimentalForceOwningTab",Ee)),te?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Ee)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,xe.Mx)(this._delegate)}onSnapshotsInSync(W){return(0,xe.sc)(this._delegate,W)}get app(){if(!this._appCompat)throw new xe.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(W){try{return new lr(this,(0,xe.hJ)(this._delegate,W))}catch(te){throw Nn(te,"collection()","Firestore.collection()")}}doc(W){try{return new zn(this,(0,xe.JU)(this._delegate,W))}catch(te){throw Nn(te,"doc()","Firestore.doc()")}}collectionGroup(W){try{return new dr(this,(0,xe.B$)(this._delegate,W))}catch(te){throw Nn(te,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(W){return(0,xe.i3)(this._delegate,te=>W(new xn(this,te)))}batch(){return(0,xe.qY)(this._delegate),new Et(new xe.PU(this._delegate,W=>(0,xe.GL)(this._delegate,W)))}loadBundle(W){return(0,xe.Pb)(this._delegate,W)}namedQuery(W){return(0,xe.L$)(this._delegate,W).then(te=>te?new dr(this,te):null)}}class Bt extends xe.u7{constructor(W){super(),this.firestore=W}convertBytes(W){return new Ue(new xe.Jj(W))}convertReference(W){const te=this.convertDocumentKey(W,this.firestore._databaseId);return zn.forKey(te,this.firestore,null)}}class xn{constructor(W,te){this._firestore=W,this._delegate=te,this._userDataWriter=new Bt(W)}get(W){const te=Mr(W);return this._delegate.get(te).then(Ee=>new mn(this._firestore,new xe.xU(this._firestore._delegate,this._userDataWriter,Ee._key,Ee._document,Ee.metadata,te.converter)))}set(W,te,Ee){const oe=Mr(W);return Ee?(se("Transaction.set",Ee),this._delegate.set(oe,te,Ee)):this._delegate.set(oe,te),this}update(W,te,Ee,...oe){const Ze=Mr(W);return 2===arguments.length?this._delegate.update(Ze,te):this._delegate.update(Ze,te,Ee,...oe),this}delete(W){const te=Mr(W);return this._delegate.delete(te),this}}class Et{constructor(W){this._delegate=W}set(W,te,Ee){const oe=Mr(W);return Ee?(se("WriteBatch.set",Ee),this._delegate.set(oe,te,Ee)):this._delegate.set(oe,te),this}update(W,te,Ee,...oe){const Ze=Mr(W);return 2===arguments.length?this._delegate.update(Ze,te):this._delegate.update(Ze,te,Ee,...oe),this}delete(W){const te=Mr(W);return this._delegate.delete(te),this}commit(){return this._delegate.commit()}}class nn{constructor(W,te,Ee){this._firestore=W,this._userDataWriter=te,this._delegate=Ee}fromFirestore(W,te){const Ee=new xe.$q(this._firestore._delegate,this._userDataWriter,W._key,W._document,W.metadata,null);return this._delegate.fromFirestore(new ir(this._firestore,Ee),te??{})}toFirestore(W,te){return te?this._delegate.toFirestore(W,te):this._delegate.toFirestore(W)}static getInstance(W,te){const Ee=nn.INSTANCES;let oe=Ee.get(W);oe||(oe=new WeakMap,Ee.set(W,oe));let Ze=oe.get(te);return Ze||(Ze=new nn(W,new Bt(W),te),oe.set(te,Ze)),Ze}}nn.INSTANCES=new WeakMap;class zn{constructor(W,te){this.firestore=W,this._delegate=te,this._userDataWriter=new Bt(W)}static forPath(W,te,Ee){if(W.length%2!=0)throw new xe.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${W.canonicalString()} has ${W.length}`);return new zn(te,new xe.my(te._delegate,Ee,new xe.Ky(W)))}static forKey(W,te,Ee){return new zn(te,new xe.my(te._delegate,Ee,W))}get id(){return this._delegate.id}get parent(){return new lr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(W){try{return new lr(this.firestore,(0,xe.hJ)(this._delegate,W))}catch(te){throw Nn(te,"collection()","DocumentReference.collection()")}}isEqual(W){return(W=(0,gt.m9)(W))instanceof xe.my&&(0,xe.Eo)(this._delegate,W)}set(W,te){te=se("DocumentReference.set",te);try{return te?(0,xe.pl)(this._delegate,W,te):(0,xe.pl)(this._delegate,W)}catch(Ee){throw Nn(Ee,"setDoc()","DocumentReference.set()")}}update(W,te,...Ee){try{return 1===arguments.length?(0,xe.r7)(this._delegate,W):(0,xe.r7)(this._delegate,W,te,...Ee)}catch(oe){throw Nn(oe,"updateDoc()","DocumentReference.update()")}}delete(){return(0,xe.oe)(this._delegate)}onSnapshot(...W){const te=Kn(W),Ee=jn(W,oe=>new mn(this.firestore,new xe.xU(this.firestore._delegate,this._userDataWriter,oe._key,oe._document,oe.metadata,this._delegate.converter)));return(0,xe.cf)(this._delegate,te,Ee)}get(W){let te;return te="cache"===W?.source?(0,xe.kl)(this._delegate):"server"===W?.source?(0,xe.Xk)(this._delegate):(0,xe.QT)(this._delegate),te.then(Ee=>new mn(this.firestore,new xe.xU(this.firestore._delegate,this._userDataWriter,Ee._key,Ee._document,Ee.metadata,this._delegate.converter)))}withConverter(W){return new zn(this.firestore,this._delegate.withConverter(W?nn.getInstance(this.firestore,W):null))}}function Nn(ne,W,te){return ne.message=ne.message.replace(W,te),ne}function Kn(ne){for(const W of ne)if("object"==typeof W&&!Ke(W))return W;return{}}function jn(ne,W){var te,Ee;let oe;return oe=Ke(ne[0])?ne[0]:Ke(ne[1])?ne[1]:"function"==typeof ne[0]?{next:ne[0],error:ne[1],complete:ne[2]}:{next:ne[1],error:ne[2],complete:ne[3]},{next:Ze=>{oe.next&&oe.next(W(Ze))},error:null===(te=oe.error)||void 0===te?void 0:te.bind(oe),complete:null===(Ee=oe.complete)||void 0===Ee?void 0:Ee.bind(oe)}}class mn{constructor(W,te){this._firestore=W,this._delegate=te}get ref(){return new zn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(W){return this._delegate.data(W)}get(W,te){return this._delegate.get(W,te)}isEqual(W){return(0,xe.qK)(this._delegate,W._delegate)}}class ir extends mn{data(W){const te=this._delegate.data(W);return(0,xe.K9)(void 0!==te,"Document in a QueryDocumentSnapshot should exist"),te}}class dr{constructor(W,te){this.firestore=W,this._delegate=te,this._userDataWriter=new Bt(W)}where(W,te,Ee){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.ar)(W,te,Ee)))}catch(oe){throw Nn(oe,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(W,te){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Xo)(W,te)))}catch(Ee){throw Nn(Ee,/(orderBy|where)\(\)/,"Query.$1()")}}limit(W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.b9)(W)))}catch(te){throw Nn(te,"limit()","Query.limit()")}}limitToLast(W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.vh)(W)))}catch(te){throw Nn(te,"limitToLast()","Query.limitToLast()")}}startAt(...W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.e0)(...W)))}catch(te){throw Nn(te,"startAt()","Query.startAt()")}}startAfter(...W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.TQ)(...W)))}catch(te){throw Nn(te,"startAfter()","Query.startAfter()")}}endBefore(...W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Lx)(...W)))}catch(te){throw Nn(te,"endBefore()","Query.endBefore()")}}endAt(...W){try{return new dr(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Wu)(...W)))}catch(te){throw Nn(te,"endAt()","Query.endAt()")}}isEqual(W){return(0,xe.iE)(this._delegate,W._delegate)}get(W){let te;return te="cache"===W?.source?(0,xe.UQ)(this._delegate):"server"===W?.source?(0,xe.zN)(this._delegate):(0,xe.PL)(this._delegate),te.then(Ee=>new ur(this.firestore,new xe.W(this.firestore._delegate,this._userDataWriter,this._delegate,Ee._snapshot)))}onSnapshot(...W){const te=Kn(W),Ee=jn(W,oe=>new ur(this.firestore,new xe.W(this.firestore._delegate,this._userDataWriter,this._delegate,oe._snapshot)));return(0,xe.cf)(this._delegate,te,Ee)}withConverter(W){return new dr(this.firestore,this._delegate.withConverter(W?nn.getInstance(this.firestore,W):null))}}class Cr{constructor(W,te){this._firestore=W,this._delegate=te}get type(){return this._delegate.type}get doc(){return new ir(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ur{constructor(W,te){this._firestore=W,this._delegate=te}get query(){return new dr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(W=>new ir(this._firestore,W))}docChanges(W){return this._delegate.docChanges(W).map(te=>new Cr(this._firestore,te))}forEach(W,te){this._delegate.forEach(Ee=>{W.call(te,new ir(this._firestore,Ee))})}isEqual(W){return(0,xe.qK)(this._delegate,W._delegate)}}class lr extends dr{constructor(W,te){super(W,te),this.firestore=W,this._delegate=te}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const W=this._delegate.parent;return W?new zn(this.firestore,W):null}doc(W){try{return new zn(this.firestore,void 0===W?(0,xe.JU)(this._delegate):(0,xe.JU)(this._delegate,W))}catch(te){throw Nn(te,"doc()","CollectionReference.doc()")}}add(W){return(0,xe.ET)(this._delegate,W).then(te=>new zn(this.firestore,te))}isEqual(W){return(0,xe.Eo)(this._delegate,W._delegate)}withConverter(W){return new lr(this.firestore,this._delegate.withConverter(W?nn.getInstance(this.firestore,W):null))}}function Mr(ne){return(0,xe.Cf)(ne,xe.my)}class dn{constructor(...W){this._delegate=new xe.Lz(...W)}static documentId(){return new dn(xe.Xb.keyField().canonicalString())}isEqual(W){return(W=(0,gt.m9)(W))instanceof xe.Lz&&this._delegate._internalPath.isEqual(W._internalPath)}}class Xn{constructor(W){this._delegate=W}static serverTimestamp(){const W=(0,xe.Bt)();return W._methodName="FieldValue.serverTimestamp",new Xn(W)}static delete(){const W=(0,xe.AK)();return W._methodName="FieldValue.delete",new Xn(W)}static arrayUnion(...W){const te=(0,xe.vr)(...W);return te._methodName="FieldValue.arrayUnion",new Xn(te)}static arrayRemove(...W){const te=(0,xe.Ab)(...W);return te._methodName="FieldValue.arrayRemove",new Xn(te)}static increment(W){const te=(0,xe.nP)(W);return te._methodName="FieldValue.increment",new Xn(te)}isEqual(W){return this._delegate.isEqual(W._delegate)}}const Lr={Firestore:kt,GeoPoint:xe.F8,Timestamp:xe.EK,Blob:Ue,Transaction:xn,WriteBatch:Et,DocumentReference:zn,DocumentSnapshot:mn,Query:dr,QueryDocumentSnapshot:ir,QuerySnapshot:ur,CollectionReference:lr,FieldPath:dn,FieldValue:Xn,setLogLevel:function gn(ne){(0,xe.Ub)(ne)},CACHE_SIZE_UNLIMITED:xe.IX};!function en(ne){(function mr(ne,W){ne.INTERNAL.registerComponent(new Be.wA("firestore-compat",te=>{const Ee=te.getProvider("app-compat").getImmediate(),oe=te.getProvider("firestore").getImmediate();return W(Ee,oe)},"PUBLIC").setServiceProps(Object.assign({},Lr)))})(ne,(W,te)=>new kt(W,te,new Mt)),ne.registerVersion("@firebase/firestore-compat","0.1.25")}(qt.Z);var hr=j(7579),Yn=j(6451),er=j(5363),fr=j(3900),ri=j(6063);class vr extends hr.x{constructor(W=1/0,te=1/0,Ee=ri.l){super(),this._bufferSize=W,this._windowTime=te,this._timestampProvider=Ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=te===1/0,this._bufferSize=Math.max(1,W),this._windowTime=Math.max(1,te)}next(W){const{isStopped:te,_buffer:Ee,_infiniteTimeWindow:oe,_timestampProvider:Ze,_windowTime:pt}=this;te||(Ee.push(W),!oe&&Ee.push(Ze.now()+pt)),this._trimBuffer(),super.next(W)}_subscribe(W){this._throwIfClosed(),this._trimBuffer();const te=this._innerSubscribe(W),{_infiniteTimeWindow:Ee,_buffer:oe}=this,Ze=oe.slice();for(let pt=0;pt<Ze.length&&!W.closed;pt+=Ee?1:2)W.next(Ze[pt]);return this._checkFinalizedStatuses(W),te}_trimBuffer(){const{_bufferSize:W,_timestampProvider:te,_buffer:Ee,_infiniteTimeWindow:oe}=this,Ze=(oe?1:2)*W;if(W<1/0&&Ze<Ee.length&&Ee.splice(0,Ee.length-Ze),!oe){const pt=te.now();let Kt=0;for(let In=1;In<Ee.length&&Ee[In]<=pt;In+=2)Kt=In;Kt&&Ee.splice(0,Kt+1)}}}var dt=j(3099);function Ie(ne,W,te){let Ee,oe=!1;return ne&&"object"==typeof ne?({bufferSize:Ee=1/0,windowTime:W=1/0,refCount:oe=!1,scheduler:te}=ne):Ee=ne??1/0,(0,dt.B)({connector:()=>new vr(Ee,W,te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:oe})}var _e=j(590),mt=j(576);function ct(ne,W){return(0,mt.m)(W)?(0,fr.w)(()=>ne,W):(0,fr.w)(()=>ne)}var rn=j(9468),Dn=j(7128);j(127);const Jn=new C.OlP("angularfire2.auth.use-emulator"),vn=new C.OlP("angularfire2.auth.settings"),br=new C.OlP("angularfire2.auth.tenant-id"),wn=new C.OlP("angularfire2.auth.langugage-code"),Te=new C.OlP("angularfire2.auth.use-device-language"),le=new C.OlP("angularfire.auth.persistence"),we=(ne,W,te,Ee,oe,Ze,pt,Kt)=>(0,at.cc)(`${ne.name}.auth`,"AngularFireAuth",ne.name,()=>{const In=W.runOutsideAngular(()=>ne.auth());if(te&&In.useEmulator(...te),Ee&&(In.tenantId=Ee),In.languageCode=oe,Ze&&In.useDeviceLanguage(),pt)for(const[kn,pn]of Object.entries(pt))In.settings[kn]=pn;return Kt&&In.setPersistence(Kt),In},[te,Ee,oe,Ze,pt,Kt]);let Oe=(()=>{class ne{constructor(te,Ee,oe,Ze,pt,Kt,In,kn,pn,pr,qr,Jr){const tr=new hr.x,Ci=(0,de.of)(void 0).pipe((0,er.Q)(pt.outsideAngular),(0,fr.w)(()=>Ze.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,5881)))),(0,fe.U)(()=>(0,at.on)(te,Ze,Ee)),(0,fe.U)(Kr=>we(Kr,Ze,Kt,kn,pn,pr,In,qr)),Ie({bufferSize:1,refCount:!1}));if((0,it.PM)(oe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,de.of)(null);else{Ci.pipe((0,_e.P)()).subscribe();const rr=Ci.pipe((0,fr.w)(We=>We.getRedirectResult().then(ke=>ke,()=>null)),Le.iC,Ie({bufferSize:1,refCount:!1})),or=Ci.pipe((0,fr.w)(We=>new Z.y(ke=>({unsubscribe:Ze.runOutsideAngular(()=>We.onAuthStateChanged(rt=>ke.next(rt),rt=>ke.error(rt),()=>ke.complete()))})))),On=Ci.pipe((0,fr.w)(We=>new Z.y(ke=>({unsubscribe:Ze.runOutsideAngular(()=>We.onIdTokenChanged(rt=>ke.next(rt),rt=>ke.error(rt),()=>ke.complete()))}))));this.authState=rr.pipe(ct(or),(0,rn.R)(pt.outsideAngular),(0,er.Q)(pt.insideAngular)),this.user=rr.pipe(ct(On),(0,rn.R)(pt.outsideAngular),(0,er.Q)(pt.insideAngular)),this.idToken=this.user.pipe((0,fr.w)(We=>We?(0,P.D)(We.getIdToken()):(0,de.of)(null))),this.idTokenResult=this.user.pipe((0,fr.w)(We=>We?(0,P.D)(We.getIdTokenResult()):(0,de.of)(null))),this.credential=(0,Yn.T)(rr,tr,this.authState.pipe((0,Ot.h)(We=>!We))).pipe((0,fe.U)(We=>We?.user?We:null),(0,rn.R)(pt.outsideAngular),(0,er.Q)(pt.insideAngular))}return(0,at.pX)(this,Ci,Ze,{spy:{apply:(Kr,rr,or)=>{(Kr.startsWith("signIn")||Kr.startsWith("createUser"))&&or.then(On=>tr.next(On))}}})}}return ne.\u0275fac=function(te){return new(te||ne)(C.LFG(at.Dh),C.LFG(at.xv,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Le.HU),C.LFG(Jn,8),C.LFG(vn,8),C.LFG(br,8),C.LFG(wn,8),C.LFG(Te,8),C.LFG(le,8),C.LFG(Dn.nm,8))},ne.\u0275prov=C.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"any"}),ne})();function Dt(ne,W){return function wt(ne,W=h.z){return new Z.y(te=>{let Ee;return null!=W?W.schedule(()=>{Ee=ne.onSnapshot({includeMetadataChanges:!0},te)}):Ee=ne.onSnapshot({includeMetadataChanges:!0},te),()=>{Ee?.()}})}(ne,W)}function Bn(ne,W){return Dt(ne,W).pipe((0,fe.U)(te=>({payload:te,type:"query"})))}function Zn(ne,W){return Bn(ne,W).pipe((0,qe.O)(void 0),ie(),(0,fe.U)(([te,Ee])=>{const oe=Ee.payload.docChanges(),Ze=oe.map(pt=>({type:pt.type,payload:pt}));return te&&JSON.stringify(te.payload.metadata)!==JSON.stringify(Ee.payload.metadata)&&Ee.payload.docs.forEach((pt,Kt)=>{const In=oe.find(pn=>pn.doc.ref.isEqual(pt.ref)),kn=te?.payload.docs.find(pn=>pn.ref.isEqual(pt.ref));In&&JSON.stringify(In.doc.metadata)===JSON.stringify(pt.metadata)||!In&&kn&&JSON.stringify(kn.metadata)===JSON.stringify(pt.metadata)||Ze.push({type:"modified",payload:{oldIndex:Kt,newIndex:Kt,type:"modified",doc:pt}})}),Ze}))}function Ir(ne,W,te){return Zn(ne,te).pipe((0,Ce.R)((Ee,oe)=>function Je(ne,W,te){return W.forEach(Ee=>{te.indexOf(Ee.type)>-1&&(ne=function Fe(ne,W){switch(W.type){case"added":if(!ne[W.newIndex]||!ne[W.newIndex].doc.ref.isEqual(W.doc.ref))return Se(ne,W.newIndex,0,W);break;case"modified":if(null==ne[W.oldIndex]||ne[W.oldIndex].doc.ref.isEqual(W.doc.ref)){if(W.oldIndex!==W.newIndex){const te=ne.slice();return te.splice(W.oldIndex,1),te.splice(W.newIndex,0,W),te}return Se(ne,W.newIndex,1,W)}break;case"removed":if(ne[W.oldIndex]&&ne[W.oldIndex].doc.ref.isEqual(W.doc.ref))return Se(ne,W.oldIndex,1)}return ne}(ne,Ee))}),ne}(Ee,oe.map(Ze=>Ze.payload),W),[]),function ot(ne,W=st.y){return ne=ne??nt,(0,be.e)((te,Ee)=>{let oe,Ze=!0;te.subscribe((0,tt.x)(Ee,pt=>{const Kt=W(pt);(Ze||!ne(oe,Kt))&&(Ze=!1,oe=Kt,Ee.next(pt))}))})}(),(0,fe.U)(Ee=>Ee.map(oe=>({type:oe.type,payload:oe}))))}function Se(ne,W,te,...Ee){const oe=ne.slice();return oe.splice(W,te,...Ee),oe}function Ct(ne){return(!ne||0===ne.length)&&(ne=["added","removed","modified"]),ne}class jt{constructor(W,te,Ee){this.ref=W,this.query=te,this.afs=Ee}stateChanges(W){let te=Zn(this.query,this.afs.schedulers.outsideAngular);return W&&W.length>0&&(te=te.pipe((0,fe.U)(Ee=>Ee.filter(oe=>W.indexOf(oe.type)>-1)))),te.pipe((0,qe.O)(void 0),ie(),(0,Ot.h)(([Ee,oe])=>oe.length>0||!Ee),(0,fe.U)(([Ee,oe])=>oe),Le.iC)}auditTrail(W){return this.stateChanges(W).pipe((0,Ce.R)((te,Ee)=>[...te,...Ee],[]))}snapshotChanges(W){const te=Ct(W);return Ir(this.query,te,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(W={}){return Bn(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(te=>te.payload.docs.map(Ee=>W.idField?Object.assign(Object.assign({},Ee.data()),{[W.idField]:Ee.id}):Ee.data())),Le.iC)}get(W){return(0,P.D)(this.query.get(W)).pipe(Le.iC)}add(W){return this.ref.add(W)}doc(W){return new fn(this.ref.doc(W),this.afs)}}class fn{constructor(W,te){this.ref=W,this.afs=te}set(W,te){return this.ref.set(W,te)}update(W){return this.ref.update(W)}delete(){return this.ref.delete()}collection(W,te){const Ee=this.ref.collection(W),{ref:oe,query:Ze}=je(Ee,te);return new jt(oe,Ze,this.afs)}snapshotChanges(){return function Yt(ne,W){return Dt(ne,W).pipe((0,qe.O)(void 0),ie(),(0,fe.U)(([te,Ee])=>Ee.exists?te?.exists?{payload:Ee,type:"modified"}:{payload:Ee,type:"added"}:{payload:Ee,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(W={}){return this.snapshotChanges().pipe((0,fe.U)(({payload:te})=>W.idField?Object.assign(Object.assign({},te.data()),{[W.idField]:te.id}):te.data()))}get(W){return(0,P.D)(this.ref.get(W)).pipe(Le.iC)}}class Cn{constructor(W,te){this.query=W,this.afs=te}stateChanges(W){return W&&0!==W.length?Zn(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(te=>te.filter(Ee=>W.indexOf(Ee.type)>-1)),(0,Ot.h)(te=>te.length>0),Le.iC):Zn(this.query,this.afs.schedulers.outsideAngular).pipe(Le.iC)}auditTrail(W){return this.stateChanges(W).pipe((0,Ce.R)((te,Ee)=>[...te,...Ee],[]))}snapshotChanges(W){const te=Ct(W);return Ir(this.query,te,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(W={}){return Bn(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(Ee=>Ee.payload.docs.map(oe=>W.idField?Object.assign({[W.idField]:oe.id},oe.data()):oe.data())),Le.iC)}get(W){return(0,P.D)(this.query.get(W)).pipe(Le.iC)}}const ve=new C.OlP("angularfire2.enableFirestorePersistence"),pe=new C.OlP("angularfire2.firestore.persistenceSettings"),ce=new C.OlP("angularfire2.firestore.settings"),et=new C.OlP("angularfire2.firestore.use-emulator");function je(ne,W=(te=>te)){return{query:W(ne),ref:ne}}let ft=(()=>{class ne{constructor(te,Ee,oe,Ze,pt,Kt,In,kn,pn,pr,qr,Jr,tr,Ci,Kr,rr,or){this.schedulers=In;const On=(0,at.on)(te,Kt,Ee),We=pn;pr&&we(On,Kt,qr,tr,Ci,Kr,Jr,rr),[this.firestore,this.persistenceEnabled$]=(0,at.cc)(`${On.name}.firestore`,"AngularFirestore",On.name,()=>{const ke=Kt.runOutsideAngular(()=>On.firestore());if(Ze&&ke.settings(Ze),We&&ke.useEmulator(...We),oe&&!(0,it.PM)(pt)){const rt=()=>{try{return(0,P.D)(ke.enablePersistence(kn||void 0).then(()=>!0,()=>!1))}catch(Nt){return typeof console<"u"&&console.warn(Nt),(0,de.of)(!1)}};return[ke,Kt.runOutsideAngular(rt)]}return[ke,(0,de.of)(!1)]},[Ze,We,oe])}collection(te,Ee){let oe;oe="string"==typeof te?this.firestore.collection(te):te;const{ref:Ze,query:pt}=je(oe,Ee),Kt=this.schedulers.ngZone.run(()=>Ze);return new jt(Kt,pt,this)}collectionGroup(te,Ee){const oe=Ee||(pt=>pt),Ze=this.firestore.collectionGroup(te);return new Cn(oe(Ze),this)}doc(te){let Ee;Ee="string"==typeof te?this.firestore.doc(te):te;const oe=this.schedulers.ngZone.run(()=>Ee);return new fn(oe,this)}createId(){return this.firestore.collection("_").doc().id}}return ne.\u0275fac=function(te){return new(te||ne)(C.LFG(at.Dh),C.LFG(at.xv,8),C.LFG(ve,8),C.LFG(ce,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Le.HU),C.LFG(pe,8),C.LFG(et,8),C.LFG(Oe,8),C.LFG(Jn,8),C.LFG(vn,8),C.LFG(br,8),C.LFG(wn,8),C.LFG(Te,8),C.LFG(le,8),C.LFG(Dn.nm,8))},ne.\u0275prov=C.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"any"}),ne})()},2011:(an,ht,j)=>{j.d(ht,{Dh:()=>be,GT:()=>Le,cc:()=>ot,hO:()=>st,on:()=>ie,pX:()=>de,xv:()=>tt});var C=j(4650),h=j(127),Z=j(4215);an=j.hmd(an);const P=["ngOnDestroy"],de=(it,Ht,qt,xe={})=>new Proxy(it,{get:(gt,Be)=>qt.runOutsideAngular(()=>{var ut;if(it[Be])return!(null===(ut=xe?.spy)||void 0===ut)&&ut.get&&xe.spy.get(Be,it[Be]),it[Be];if(P.indexOf(Be)>-1)return()=>{};const ee=Ht.toPromise().then(se=>{const ze=se&&se[Be];return"function"==typeof ze?ze.bind(se):ze&&ze.then?ze.then(Pe=>qt.run(()=>Pe)):qt.run(()=>ze)});return new Proxy(()=>{},{get:(se,ze)=>ee[ze],apply:(se,ze,Pe)=>ee.then(Ue=>{var Ke;const Ye=Ue&&Ue(...Pe);return!(null===(Ke=xe?.spy)||void 0===Ke)&&Ke.apply&&xe.spy.apply(Be,Pe,Ye),Ye})})})}),Le=(it,Ht)=>{Ht.forEach(qt=>{Object.getOwnPropertyNames(qt.prototype||qt).forEach(xe=>{Object.defineProperty(it.prototype,xe,Object.getOwnPropertyDescriptor(qt.prototype||qt,xe))})})};class qe{constructor(Ht){return Ht}}const be=new C.OlP("angularfire2.app.options"),tt=new C.OlP("angularfire2.app.name");function ie(it,Ht,qt){const gt="object"==typeof qt&&qt||{};gt.name=gt.name||"string"==typeof qt&&qt||"[DEFAULT]";const ut=h.Z.apps.filter(ee=>ee&&ee.name===gt.name)[0]||Ht.runOutsideAngular(()=>h.Z.initializeApp(it,gt));try{JSON.stringify(it)!==JSON.stringify(ut.options)&&fe("error",`${ut.name} Firebase App already initialized with different options${an.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new qe(ut)}const fe=(it,...Ht)=>{(0,C.X6Q)()&&typeof console<"u"&&console[it](...Ht)},Ce={provide:qe,useFactory:ie,deps:[be,C.R0b,[new C.FiY,tt]]};let st=(()=>{class it{constructor(qt){h.Z.registerVersion("angularfire",Z.q4.full,"core"),h.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),h.Z.registerVersion("angular",C.q4F.full,qt.toString())}static initializeApp(qt,xe){return{ngModule:it,providers:[{provide:be,useValue:qt},{provide:tt,useValue:xe}]}}}return it.\u0275fac=function(qt){return new(qt||it)(C.LFG(C.Lbi))},it.\u0275mod=C.oAB({type:it}),it.\u0275inj=C.cJS({providers:[Ce]}),it})();function ot(it,Ht,qt,xe,gt){const[,Be,ut]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===it)||[];if(Be)return function nt(it,Ht){try{return it.toString()===Ht.toString()}catch{return it===Ht}}(gt,ut)||(at("error",`${Ht} was already initialized on the ${qt} Firebase App with different settings.${Ot?" You may need to reload as Firebase is not HMR aware.":""}`),at("warn",{is:gt,was:ut})),Be;{const ee=xe();return globalThis.\u0275AngularfireInstanceCache.push([it,ee,gt]),ee}}const Ot=!!an.hot,at=(it,...Ht)=>{(0,C.X6Q)()&&typeof console<"u"&&console[it](...Ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6027:(an,ht,j)=>{j.d(ht,{gg:()=>Pe,JU:()=>fr,_1:()=>dr,ad:()=>vn,Cm:()=>nn,Bt:()=>Je,pl:()=>Se});var C=j(4215),h=j(4650),Z=j(3999),P=j(3692),de=j(5867),Le=j(7128),qe=j(5525),be=j(9751),tt=j(4004),ie={includeMetadataChanges:!1};function st(je,ft){return void 0===ft&&(ft={}),function Ce(je){return function fe(je,ft){return void 0===ft&&(ft=ie),new be.y(function(he){return{unsubscribe:(0,qe.cf)(je,ft,{next:he.next.bind(he),error:he.error.bind(he),complete:he.complete.bind(he)})}})}(je,{includeMetadataChanges:!0})}(je).pipe((0,tt.U)(function(he){return function ot(je,ft){void 0===ft&&(ft={});var he=je.data();return!je.exists()||"object"!=typeof he||null===he||ft.idField&&(he[ft.idField]=je.id),he}(he,ft)}))}class Pe{constructor(ft){return ft}}const Ue="firestore",Mt=new h.OlP("angularfire2.firestore-instances");function Bt(je){return(ft,he)=>{const ne=ft.runOutsideAngular(()=>je(he));return new Pe(ne)}}const gn={provide:class Ke{constructor(){return(0,C.vb)(Ue)}},deps:[[new h.FiY,Mt]]},xn={provide:Pe,useFactory:function kt(je,ft){const he=(0,C.JM)(Ue,je,ft);return he&&new Pe(he)},deps:[[new h.FiY,Mt],P.Ot]};let Et=(()=>{class je{constructor(){(0,de.KN)("angularfire",C.q4.full,"fst")}}return je.\u0275fac=function(he){return new(he||je)},je.\u0275mod=h.oAB({type:je}),je.\u0275inj=h.cJS({providers:[xn,gn]}),je})();function nn(je,...ft){return{ngModule:Et,providers:[{provide:Mt,useFactory:Bt(je),multi:!0,deps:[h.R0b,h.zs3,C.HU,P.z6,[new h.FiY,Z.dh],[new h.FiY,Le.nm],...ft]}]}}const dr=(0,C.u3)(st,!0),fr=(0,C.u3)(qe.JU,!0),vn=(0,C.u3)(qe.ad,!0),Je=(0,C.u3)(qe.Bt,!0),Se=(0,C.u3)(qe.pl,!0)},4215:(an,ht,j)=>{j.d(ht,{q4:()=>so,iC:()=>oo,HU:()=>ia,vb:()=>Zs,JM:()=>Os,n1:()=>Ni,u3:()=>Gr});var C=j(4650),h=j(5867),Z=j(5861),P=j(9681),de=j(2090),Le=j(4859),qe=j(1877);j(2833);const tt="@firebase/remote-config",ot=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bt{constructor(me,Ge,lt,xt){this.client=me,this.storage=Ge,this.storageCache=lt,this.logger=xt}isCachedDataFresh(me,Ge){if(!Ge)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const lt=Date.now()-Ge,xt=lt<=me;return this.logger.debug(`Config fetch cache check. Cache age millis: ${lt}. Cache max age millis (minimumFetchIntervalMillis setting): ${me}. Is cache hit: ${xt}.`),xt}fetch(me){var Ge=this;return(0,Z.Z)(function*(){const[lt,xt]=yield Promise.all([Ge.storage.getLastSuccessfulFetchTimestampMillis(),Ge.storage.getLastSuccessfulFetchResponse()]);if(xt&&Ge.isCachedDataFresh(me.cacheMaxAgeMillis,lt))return xt;me.eTag=xt&&xt.eTag;const Tt=yield Ge.client.fetch(me),ln=[Ge.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Tt.status&&ln.push(Ge.storage.setLastSuccessfulFetchResponse(Tt)),yield Promise.all(ln),Tt})()}}function gn(De=navigator){return De.languages&&De.languages[0]||De.language}class xn{constructor(me,Ge,lt,xt,Tt,ln){this.firebaseInstallations=me,this.sdkVersion=Ge,this.namespace=lt,this.projectId=xt,this.apiKey=Tt,this.appId=ln}fetch(me){var Ge=this;return(0,Z.Z)(function*(){var lt,xt,Tt;const[ln,cn]=yield Promise.all([Ge.firebaseInstallations.getId(),Ge.firebaseInstallations.getToken()]),Ln=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Ge.projectId}/namespaces/${Ge.namespace}:fetch?key=${Ge.apiKey}`,Ar={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":me.eTag||"*"},Yr={sdk_version:Ge.sdkVersion,app_instance_id:ln,app_instance_id_token:cn,app_id:Ge.appId,language_code:gn()},_i={method:"POST",headers:Ar,body:JSON.stringify(Yr)},ii=fetch(Ln,_i),Hn=new Promise((Mi,Ui)=>{me.signal.addEventListener(()=>{const ni=new Error("The operation was aborted.");ni.name="AbortError",Ui(ni)})});let hs;try{yield Promise.race([ii,Hn]),hs=yield ii}catch(Mi){let Ui="fetch-client-network";throw"AbortError"===(null===(lt=Mi)||void 0===lt?void 0:lt.name)&&(Ui="fetch-timeout"),ot.create(Ui,{originalErrorMessage:null===(xt=Mi)||void 0===xt?void 0:xt.message})}let Ks=hs.status;const No=hs.headers.get("ETag")||void 0;let yo,fi;if(200===hs.status){let Mi;try{Mi=yield hs.json()}catch(Ui){throw ot.create("fetch-client-parse",{originalErrorMessage:null===(Tt=Ui)||void 0===Tt?void 0:Tt.message})}yo=Mi.entries,fi=Mi.state}if("INSTANCE_STATE_UNSPECIFIED"===fi?Ks=500:"NO_CHANGE"===fi?Ks=304:("NO_TEMPLATE"===fi||"EMPTY_CONFIG"===fi)&&(yo={}),304!==Ks&&200!==Ks)throw ot.create("fetch-status",{httpStatus:Ks});return{status:Ks,eTag:No,config:yo}})()}}class zn{constructor(me,Ge){this.client=me,this.storage=Ge}fetch(me){var Ge=this;return(0,Z.Z)(function*(){const lt=(yield Ge.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Ge.attemptFetch(me,lt)})()}attemptFetch(me,{throttleEndTimeMillis:Ge,backoffCount:lt}){var xt=this;return(0,Z.Z)(function*(){yield function Et(De,me){return new Promise((Ge,lt)=>{const xt=Math.max(me-Date.now(),0),Tt=setTimeout(Ge,xt);De.addEventListener(()=>{clearTimeout(Tt),lt(ot.create("fetch-throttle",{throttleEndTimeMillis:me}))})})}(me.signal,Ge);try{const Tt=yield xt.client.fetch(me);return yield xt.storage.deleteThrottleMetadata(),Tt}catch(Tt){if(!function nn(De){if(!(De instanceof de.ZR&&De.customData))return!1;const me=Number(De.customData.httpStatus);return 429===me||500===me||503===me||504===me}(Tt))throw Tt;const ln={throttleEndTimeMillis:Date.now()+(0,de.$s)(lt),backoffCount:lt+1};return yield xt.storage.setThrottleMetadata(ln),xt.attemptFetch(me,ln)}})()}}class jn{constructor(me,Ge,lt,xt,Tt){this.app=me,this._client=Ge,this._storageCache=lt,this._storage=xt,this._logger=Tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mn(De,me){var Ge;const lt=De.target.error||void 0;return ot.create(me,{originalErrorMessage:lt&&(null===(Ge=lt)||void 0===Ge?void 0:Ge.message)})}const ir="app_namespace_store";class lr{constructor(me,Ge,lt,xt=function ur(){return new Promise((De,me)=>{var Ge;try{const lt=indexedDB.open("firebase_remote_config",1);lt.onerror=xt=>{me(mn(xt,"storage-open"))},lt.onsuccess=xt=>{De(xt.target.result)},lt.onupgradeneeded=xt=>{0===xt.oldVersion&&xt.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(lt){me(ot.create("storage-open",{originalErrorMessage:null===(Ge=lt)||void 0===Ge?void 0:Ge.message}))}})}()){this.appId=me,this.appName=Ge,this.namespace=lt,this.openDbPromise=xt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(me){return this.set("last_fetch_status",me)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(me){return this.set("last_successful_fetch_timestamp_millis",me)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(me){return this.set("last_successful_fetch_response",me)}getActiveConfig(){return this.get("active_config")}setActiveConfig(me){return this.set("active_config",me)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(me){return this.set("active_config_etag",me)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(me){return this.set("throttle_metadata",me)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(me){var Ge=this;return(0,Z.Z)(function*(){const lt=yield Ge.openDbPromise;return new Promise((xt,Tt)=>{var ln;const Tr=lt.transaction([ir],"readonly").objectStore(ir),Ln=Ge.createCompositeKey(me);try{const Ar=Tr.get(Ln);Ar.onerror=Yr=>{Tt(mn(Yr,"storage-get"))},Ar.onsuccess=Yr=>{const _i=Yr.target.result;xt(_i?_i.value:void 0)}}catch(Ar){Tt(ot.create("storage-get",{originalErrorMessage:null===(ln=Ar)||void 0===ln?void 0:ln.message}))}})})()}set(me,Ge){var lt=this;return(0,Z.Z)(function*(){const xt=yield lt.openDbPromise;return new Promise((Tt,ln)=>{var cn;const Ln=xt.transaction([ir],"readwrite").objectStore(ir),Ar=lt.createCompositeKey(me);try{const Yr=Ln.put({compositeKey:Ar,value:Ge});Yr.onerror=_i=>{ln(mn(_i,"storage-set"))},Yr.onsuccess=()=>{Tt()}}catch(Yr){ln(ot.create("storage-set",{originalErrorMessage:null===(cn=Yr)||void 0===cn?void 0:cn.message}))}})})()}delete(me){var Ge=this;return(0,Z.Z)(function*(){const lt=yield Ge.openDbPromise;return new Promise((xt,Tt)=>{var ln;const Tr=lt.transaction([ir],"readwrite").objectStore(ir),Ln=Ge.createCompositeKey(me);try{const Ar=Tr.delete(Ln);Ar.onerror=Yr=>{Tt(mn(Yr,"storage-delete"))},Ar.onsuccess=()=>{xt()}}catch(Ar){Tt(ot.create("storage-delete",{originalErrorMessage:null===(ln=Ar)||void 0===ln?void 0:ln.message}))}})})()}createCompositeKey(me){return[this.appId,this.appName,this.namespace,me].join()}}class Mr{constructor(me){this.storage=me}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var me=this;return(0,Z.Z)(function*(){const Ge=me.storage.getLastFetchStatus(),lt=me.storage.getLastSuccessfulFetchTimestampMillis(),xt=me.storage.getActiveConfig(),Tt=yield Ge;Tt&&(me.lastFetchStatus=Tt);const ln=yield lt;ln&&(me.lastSuccessfulFetchTimestampMillis=ln);const cn=yield xt;cn&&(me.activeConfig=cn)})()}setLastFetchStatus(me){return this.lastFetchStatus=me,this.storage.setLastFetchStatus(me)}setLastSuccessfulFetchTimestampMillis(me){return this.lastSuccessfulFetchTimestampMillis=me,this.storage.setLastSuccessfulFetchTimestampMillis(me)}setActiveConfig(me){return this.activeConfig=me,this.storage.setActiveConfig(me)}}function mr(){return en.apply(this,arguments)}function en(){return(en=(0,Z.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function dn(){(0,P._registerComponent)(new Le.wA("remote-config",function De(me,{instanceIdentifier:Ge}){const lt=me.getProvider("app").getImmediate(),xt=me.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ot.create("registration-window");if(!(0,de.hl)())throw ot.create("indexed-db-unavailable");const{projectId:Tt,apiKey:ln,appId:cn}=lt.options;if(!Tt)throw ot.create("registration-project-id");if(!ln)throw ot.create("registration-api-key");if(!cn)throw ot.create("registration-app-id");const Tr=new lr(cn,lt.name,Ge=Ge||"firebase"),Ln=new Mr(Tr),Ar=new qe.Yd(tt);Ar.logLevel=qe.in.ERROR;const Yr=new xn(xt,P.SDK_VERSION,Ge,Tt,ln,cn),_i=new zn(Yr,Tr),ii=new Bt(_i,Tr,Ln,Ar),Hn=new jn(lt,ii,Ln,Tr,Ar);return function ut(De){const me=(0,de.m9)(De);me._initializePromise||(me._initializePromise=me._storageCache.loadFromStorage().then(()=>{me._isInitializationComplete=!0}))}(Hn),Hn},"PUBLIC").setMultipleInstances(!0)),(0,P.registerVersion)(tt,"0.3.11"),(0,P.registerVersion)(tt,"0.3.11","esm2017")}();var hr=j(2375);const Yn="analytics",er="firebase_id",vr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dt="https://www.googletagmanager.com/gtag/js",Ie=new qe.Yd("@firebase/analytics");function _e(De){return Promise.all(De.map(me=>me.catch(Ge=>Ge)))}function mt(De,me){const Ge=document.createElement("script");Ge.src=`${dt}?l=${De}&id=${me}`,Ge.async=!0,document.head.appendChild(Ge)}function rn(De,me,Ge,lt,xt,Tt){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,Z.Z)(function*(De,me,Ge,lt,xt,Tt){const ln=lt[xt];try{if(ln)yield me[ln];else{const Tr=(yield _e(Ge)).find(Ln=>Ln.measurementId===xt);Tr&&(yield me[Tr.appId])}}catch(cn){Ie.error(cn)}De("config",xt,Tt)})).apply(this,arguments)}function Qn(De,me,Ge,lt,xt){return zt.apply(this,arguments)}function zt(){return(zt=(0,Z.Z)(function*(De,me,Ge,lt,xt){try{let Tt=[];if(xt&&xt.send_to){let ln=xt.send_to;Array.isArray(ln)||(ln=[ln]);const cn=yield _e(Ge);for(const Tr of ln){const Ln=cn.find(Yr=>Yr.measurementId===Tr),Ar=Ln&&me[Ln.appId];if(!Ar){Tt=[];break}Tt.push(Ar)}}0===Tt.length&&(Tt=Object.values(me)),yield Promise.all(Tt),De("event",lt,xt||{})}catch(Tt){Ie.error(Tt)}})).apply(this,arguments)}function br(){const De=window.document.getElementsByTagName("script");for(const me of Object.values(De))if(me.src&&me.src.includes(dt))return me;return null}const Te=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Re=new class Oe{constructor(me={},Ge=1e3){this.throttleMetadata=me,this.intervalMillis=Ge}getThrottleMetadata(me){return this.throttleMetadata[me]}setThrottleMetadata(me,Ge){this.throttleMetadata[me]=Ge}deleteThrottleMetadata(me){delete this.throttleMetadata[me]}};function wt(De){return new Headers({Accept:"application/json","x-goog-api-key":De})}function Dt(De){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,Z.Z)(function*(De){var me;const{appId:Ge,apiKey:lt}=De,xt={method:"GET",headers:wt(lt)},Tt=vr.replace("{app-id}",Ge),ln=yield fetch(Tt,xt);if(200!==ln.status&&304!==ln.status){let cn="";try{const Tr=yield ln.json();null!==(me=Tr.error)&&void 0!==me&&me.message&&(cn=Tr.error.message)}catch{}throw Te.create("config-fetch-failed",{httpStatus:ln.status,responseMessage:cn})}return ln.json()})).apply(this,arguments)}function Bn(De){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,Z.Z)(function*(De,me=Re,Ge){const{appId:lt,apiKey:xt,measurementId:Tt}=De.options;if(!lt)throw Te.create("no-app-id");if(!xt){if(Tt)return{measurementId:Tt,appId:lt};throw Te.create("no-api-key")}const ln=me.getThrottleMetadata(lt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},cn=new Ct;return setTimeout((0,Z.Z)(function*(){cn.abort()}),void 0!==Ge?Ge:6e4),Ir({appId:lt,apiKey:xt,measurementId:Tt},ln,cn,me)})).apply(this,arguments)}function Ir(De,me,Ge){return Je.apply(this,arguments)}function Je(){return(Je=(0,Z.Z)(function*(De,{throttleEndTimeMillis:me,backoffCount:Ge},lt,xt=Re){var Tt,ln;const{appId:cn,measurementId:Tr}=De;try{yield Se(lt,me)}catch(Ln){if(Tr)return Ie.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tr} provided in the "measurementId" field in the local Firebase config. [${null===(Tt=Ln)||void 0===Tt?void 0:Tt.message}]`),{appId:cn,measurementId:Tr};throw Ln}try{const Ln=yield Dt(De);return xt.deleteThrottleMetadata(cn),Ln}catch(Ln){const Ar=Ln;if(!Fe(Ar)){if(xt.deleteThrottleMetadata(cn),Tr)return Ie.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tr} provided in the "measurementId" field in the local Firebase config. [${Ar?.message}]`),{appId:cn,measurementId:Tr};throw Ln}const Yr=503===Number(null===(ln=Ar?.customData)||void 0===ln?void 0:ln.httpStatus)?(0,de.$s)(Ge,xt.intervalMillis,30):(0,de.$s)(Ge,xt.intervalMillis),_i={throttleEndTimeMillis:Date.now()+Yr,backoffCount:Ge+1};return xt.setThrottleMetadata(cn,_i),Ie.debug(`Calling attemptFetch again in ${Yr} millis`),Ir(De,_i,lt,xt)}})).apply(this,arguments)}function Se(De,me){return new Promise((Ge,lt)=>{const xt=Math.max(me-Date.now(),0),Tt=setTimeout(Ge,xt);De.addEventListener(()=>{clearTimeout(Tt),lt(Te.create("fetch-throttle",{throttleEndTimeMillis:me}))})})}function Fe(De){if(!(De instanceof de.ZR&&De.customData))return!1;const me=Number(De.customData.httpStatus);return 429===me||500===me||503===me||504===me}class Ct{constructor(){this.listeners=[]}addEventListener(me){this.listeners.push(me)}abort(){this.listeners.forEach(me=>me())}}let jt,W;function Cn(){return(Cn=(0,Z.Z)(function*(De,me,Ge,lt,xt){if(xt&&xt.global)De("event",Ge,lt);else{const Tt=yield me;De("event",Ge,Object.assign(Object.assign({},lt),{send_to:Tt}))}})).apply(this,arguments)}function te(De){W=De}function Ee(De){jt=De}function oe(){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Z.Z)(function*(){var De;if(!(0,de.hl)())return Ie.warn(Te.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(me){return Ie.warn(Te.create("indexeddb-unavailable",{errorInfo:null===(De=me)||void 0===De?void 0:De.toString()}).message),!1}return!0})).apply(this,arguments)}function Kt(){return(Kt=(0,Z.Z)(function*(De,me,Ge,lt,xt,Tt,ln){var cn;const Tr=Bn(De);Tr.then(ii=>{Ge[ii.measurementId]=ii.appId,De.options.measurementId&&ii.measurementId!==De.options.measurementId&&Ie.warn(`The measurement ID in the local Firebase config (${De.options.measurementId}) does not match the measurement ID fetched from the server (${ii.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ii=>Ie.error(ii)),me.push(Tr);const Ln=oe().then(ii=>{if(ii)return lt.getId()}),[Ar,Yr]=yield Promise.all([Tr,Ln]);br()||mt(Tt,Ar.measurementId),W&&(xt("consent","default",W),te(void 0)),xt("js",new Date);const _i=null!==(cn=ln?.config)&&void 0!==cn?cn:{};return _i.origin="firebase",_i.update=!0,null!=Yr&&(_i[er]=Yr),xt("config",Ar.measurementId,_i),jt&&(xt("set",jt),Ee(void 0)),Ar.measurementId})).apply(this,arguments)}class In{constructor(me){this.app=me}_delete(){return delete kn[this.app.options.appId],Promise.resolve()}}let kn={},pn=[];const pr={};let tr,Ci,qr="dataLayer",Kr=!1;function On(De,me,Ge){!function or(){const De=[];if((0,de.ru)()&&De.push("This is a browser extension environment."),(0,de.zI)()||De.push("Cookies are not available."),De.length>0){const me=De.map((lt,xt)=>`(${xt+1}) ${lt}`).join(" "),Ge=Te.create("invalid-analytics-context",{errorInfo:me});Ie.warn(Ge.message)}}();const lt=De.options.appId;if(!lt)throw Te.create("no-app-id");if(!De.options.apiKey){if(!De.options.measurementId)throw Te.create("no-api-key");Ie.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${De.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kn[lt])throw Te.create("already-exists",{id:lt});if(!Kr){!function ct(De){let me=[];Array.isArray(window[De])?me=window[De]:window[De]=me}(qr);const{wrappedGtag:Tt,gtagCore:ln}=function vn(De,me,Ge,lt,xt){let Tt=function(...ln){window[lt].push(arguments)};return window[xt]&&"function"==typeof window[xt]&&(Tt=window[xt]),window[xt]=function Jn(De,me,Ge,lt){function Tt(){return(Tt=(0,Z.Z)(function*(ln,cn,Tr){try{"event"===ln?yield Qn(De,me,Ge,cn,Tr):"config"===ln?yield rn(De,me,Ge,lt,cn,Tr):"consent"===ln?De("consent","update",Tr):De("set",cn)}catch(Ln){Ie.error(Ln)}})).apply(this,arguments)}return function xt(ln,cn,Tr){return Tt.apply(this,arguments)}}(Tt,De,me,Ge),{gtagCore:Tt,wrappedGtag:window[xt]}}(kn,pn,pr,qr,"gtag");Ci=Tt,tr=ln,Kr=!0}return kn[lt]=function pt(De,me,Ge,lt,xt,Tt,ln){return Kt.apply(this,arguments)}(De,pn,pr,me,tr,qr,Ge),new In(De)}function rt(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,Z.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Di="@firebase/analytics";!function ki(){(0,P._registerComponent)(new Le.wA(Yn,(me,{options:Ge})=>On(me.getProvider("app").getImmediate(),me.getProvider("installations-internal").getImmediate(),Ge),"PUBLIC")),(0,P._registerComponent)(new Le.wA("analytics-internal",function De(me){try{const Ge=me.getProvider(Yn).getImmediate();return{logEvent:(lt,xt,Tt)=>function $r(De,me,Ge,lt){De=(0,de.m9)(De),function fn(De,me,Ge,lt,xt){return Cn.apply(this,arguments)}(Ci,kn[De.app.options.appId],me,Ge,lt).catch(xt=>Ie.error(xt))}(Ge,lt,xt,Tt)}}catch(Ge){throw Te.create("interop-component-reg-failed",{reason:Ge})}},"PRIVATE")),(0,P.registerVersion)(Di,"0.8.0"),(0,P.registerVersion)(Di,"0.8.0","esm2017")}();var Ns=j(4408),Zi=j(7565);const na=new class Cs extends Zi.v{}(class Yi extends Ns.o{constructor(me,Ge){super(me,Ge),this.scheduler=me,this.work=Ge}schedule(me,Ge=0){return Ge>0?super.schedule(me,Ge):(this.delay=Ge,this.state=me,this.scheduler.flush(this),this)}execute(me,Ge){return Ge>0||this.closed?super.execute(me,Ge):this._execute(me,Ge)}requestAsyncId(me,Ge,lt=0){return null!=lt&&lt>0||null==lt&&this.delay>0?super.requestAsyncId(me,Ge,lt):me.flush(this)}});var $a=j(4986),Ho=j(9751),ba=j(8505),io=j(9468),ra=j(5363);const so=new C.GfV("7.4.1"),gr="__angularfire_symbol__analyticsIsSupportedValue",rs="__angularfire_symbol__analyticsIsSupported",ds="__angularfire_symbol__remoteConfigIsSupportedValue",Is="__angularfire_symbol__remoteConfigIsSupported",Xr="__angularfire_symbol__messagingIsSupportedValue",Fi="__angularfire_symbol__messagingIsSupported";globalThis[rs]||(globalThis[rs]=rt().then(De=>globalThis[gr]=De).catch(()=>globalThis[gr]=!1)),globalThis[Fi]||(globalThis[Fi]=(0,hr.Gb)().then(De=>globalThis[Xr]=De).catch(()=>globalThis[Xr]=!1)),globalThis[Is]||(globalThis[Is]=mr().then(De=>globalThis[ds]=De).catch(()=>globalThis[ds]=!1));const Ni={async:()=>globalThis[Fi],sync:()=>{const De=globalThis[Xr];if(void 0===De)throw new Error((De=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${De} in the constructor, first ensure that ${De} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${De})\`.`)("Messaging"));return De}};function Os(De,me,Ge){if(me){if(1===me.length)return me[0];const Tt=me.filter(ln=>ln.app===Ge);if(1===Tt.length)return Tt[0]}return Ge.container.getProvider(De).getImmediate({optional:!0})}const Zs=(De,me)=>{const Ge=me?[me]:(0,h.C6)(),lt=[];return Ge.forEach(xt=>{xt.container.getProvider(De).instances.forEach(ln=>{lt.includes(ln)||lt.push(ln)})}),lt};function qi(){}class _o{constructor(me,Ge=na){this.zone=me,this.delegate=Ge}now(){return this.delegate.now()}schedule(me,Ge,lt){const xt=this.zone;return this.delegate.schedule(function(ln){xt.runGuarded(()=>{me.apply(this,[ln])})},Ge,lt)}}class ks{constructor(me){this.zone=me,this.task=null}call(me,Ge){const lt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)),Ge.pipe((0,ba.b)({next:lt,complete:lt,error:lt})).subscribe(me).add(lt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class De{constructor(Ge){this.ngZone=Ge,this.outsideAngular=Ge.runOutsideAngular(()=>new _o(Zone.current)),this.insideAngular=Ge.run(()=>new _o(Zone.current,$a.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return De.\u0275fac=function(Ge){return new(Ge||De)(C.LFG(C.R0b))},De.\u0275prov=C.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"}),De})();function Si(){const De=globalThis.\u0275AngularFireScheduler;if(!De)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return De}function qs(De){return Si().ngZone.runOutsideAngular(()=>De())}function xi(De){return Si().ngZone.run(()=>De())}function oo(De){return Si(),function ei(De){return function(Ge){return(Ge=Ge.lift(new ks(De.ngZone))).pipe((0,io.R)(De.outsideAngular),(0,ra.Q)(De.insideAngular))}}(Si())(De)}const Ta=(De,me)=>function(){const lt=arguments;return me&&setTimeout(()=>{"scheduled"===me.state&&me.invoke()},10),xi(()=>De.apply(void 0,lt))},Gr=(De,me)=>function(){let Ge;const lt=arguments;for(let Tt=0;Tt<arguments.length;Tt++)"function"==typeof lt[Tt]&&(me&&(Ge||(Ge=xi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)))),lt[Tt]=Ta(lt[Tt],Ge));const xt=qs(()=>De.apply(this,lt));if(!me){if(xt instanceof Ho.y){const Tt=Si();return xt.pipe((0,io.R)(Tt.outsideAngular),(0,ra.Q)(Tt.insideAngular))}return xi(()=>xt)}return xt instanceof Ho.y?xt.pipe(oo):xt instanceof Promise?xi(()=>new Promise((Tt,ln)=>xt.then(cn=>xi(()=>Tt(cn)),cn=>xi(()=>ln(cn))))):"function"==typeof xt&&Ge?function(){return setTimeout(()=>{Ge&&"scheduled"===Ge.state&&Ge.invoke()},10),xt.apply(this,arguments)}:xi(()=>xt)}},7143:(an,ht,j)=>{j.d(ht,{$:()=>Mi,A:()=>fe,B:()=>ot,G:()=>Ze,H:()=>pn,J:()=>Cs,L:()=>Bn,M:()=>Li,N:()=>Os,P:()=>Ka,Q:()=>Zs,R:()=>Ss,T:()=>qi,U:()=>Nr,V:()=>Si,W:()=>qs,X:()=>ei,Y:()=>_i,Z:()=>Hn,_:()=>Ks,a:()=>Zo,a0:()=>Go,a1:()=>Vi,a2:()=>ao,a3:()=>hu,a4:()=>Wo,a5:()=>fu,a6:()=>Bi,a7:()=>Ls,a8:()=>oa,a9:()=>bs,aA:()=>ka,aB:()=>ya,aC:()=>Oa,aD:()=>Ya,aE:()=>Ee,aI:()=>Ga,aL:()=>ks,aa:()=>Yu,ab:()=>ua,ac:()=>Ha,af:()=>vo,ag:()=>Sa,ah:()=>F,ak:()=>Ge,al:()=>Wr,an:()=>Qt,ao:()=>bl,ap:()=>ce,aq:()=>ze,ar:()=>pe,as:()=>fn,at:()=>qt,au:()=>Lo,av:()=>Cu,aw:()=>xe,ax:()=>ee,ay:()=>Ue,az:()=>Zn,b:()=>ca,c:()=>k,d:()=>Me,e:()=>Y,f:()=>us,g:()=>gc,h:()=>Dl,i:()=>mu,j:()=>Eu,k:()=>Vu,l:()=>ku,m:()=>Ua,n:()=>nc,o:()=>be,r:()=>lo,s:()=>ws,u:()=>el,v:()=>si});var C=j(5861),h=j(2090),Z=j(9681),P=j(655),de=j(1877),Le=j(4859);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ot=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ot=new h.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new de.Yd("@firebase/auth");function Ht(x,..._){it.logLevel<=de.in.ERROR&&it.error(`Auth (${Z.SDK_VERSION}): ${x}`,..._)}function qt(x,..._){throw ut(x,..._)}function xe(x,..._){return ut(x,..._)}function gt(x,_,w){const O=Object.assign(Object.assign({},nt()),{[_]:w});return new h.LL("auth","Firebase",O).create(_,{appName:x.name})}function Be(x,_,w){if(!(_ instanceof w))throw w.name!==_.constructor.name&&qt(x,"argument-error"),gt(x,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(x,..._){if("string"!=typeof x){const w=_[0],O=[..._.slice(1)];return O[0]&&(O[0].appName=x.name),x._errorFactory.create(w,...O)}return Ot.create(x,..._)}function ee(x,_,...w){if(!x)throw ut(_,...w)}function se(x){const _="INTERNAL ASSERTION FAILED: "+x;throw Ht(_),new Error(_)}function ze(x,_){x||se(_)}const Pe=new Map;function Ue(x){ze(x instanceof Function,"Expected a class definition");let _=Pe.get(x);return _?(ze(_ instanceof x,"Instance stored in cache mismatched with class"),_):(_=new x,Pe.set(x,_),_)}function Mt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function kt(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class Et{constructor(_,w){this.shortDelay=_,this.longDelay=w,ze(w>_,"Short delay should be less than long delay!"),this.isMobile=(0,h.uI)()||(0,h.b$)()}get(){return function gn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kt()||(0,h.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nn(x,_){ze(x.emulator,"Emulator should always be set here");const{url:w}=x.emulator;return _?`${w}${_.startsWith("/")?_.slice(1):_}`:w}class zn{static initialize(_,w,O){this.fetchImpl=_,w&&(this.headersImpl=w),O&&(this.responseImpl=O)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kn=new Et(3e4,6e4);function jn(x,_){return x.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:x.tenantId}):_}function mn(x,_,w,O){return ir.apply(this,arguments)}function ir(){return(ir=(0,C.Z)(function*(x,_,w,O,K={}){return dr(x,K,(0,C.Z)(function*(){let ae={},Xe={};O&&("GET"===_?Xe=O:ae={body:JSON.stringify(O)});const Lt=(0,h.xO)(Object.assign({key:x.config.apiKey},Xe)).slice(1),yn=yield x._getAdditionalHeaders();return yn["Content-Type"]="application/json",x.languageCode&&(yn["X-Firebase-Locale"]=x.languageCode),zn.fetch()(Mr(x,x.config.apiHost,w,Lt),Object.assign({method:_,headers:yn,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function dr(x,_,w){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,C.Z)(function*(x,_,w){x._canInitEmulator=!1;const O=Object.assign(Object.assign({},Nn),_);try{const K=new dn(x),ae=yield Promise.race([w(),K.promise]);K.clearNetworkTimeout();const Xe=yield ae.json();if("needConfirmation"in Xe)throw Xn(x,"account-exists-with-different-credential",Xe);if(ae.ok&&!("errorMessage"in Xe))return Xe;{const Lt=ae.ok?Xe.errorMessage:Xe.error.message,[yn,Un]=Lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yn)throw Xn(x,"credential-already-in-use",Xe);if("EMAIL_EXISTS"===yn)throw Xn(x,"email-already-in-use",Xe);if("USER_DISABLED"===yn)throw Xn(x,"user-disabled",Xe);const wr=O[yn]||yn.toLowerCase().replace(/[_\s]+/g,"-");if(Un)throw gt(x,wr,Un);qt(x,wr)}}catch(K){if(K instanceof h.ZR)throw K;qt(x,"network-request-failed")}})).apply(this,arguments)}function ur(x,_,w,O){return lr.apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(x,_,w,O,K={}){const ae=yield mn(x,_,w,O,K);return"mfaPendingCredential"in ae&&qt(x,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function Mr(x,_,w,O){const K=`${_}${w}?${O}`;return x.config.emulator?nn(x.config,K):`${x.config.apiScheme}://${K}`}class dn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((w,O)=>{this.timer=setTimeout(()=>O(xe(this.auth,"network-request-failed")),Kn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(x,_,w){const O={appName:x.name};w.email&&(O.email=w.email),w.phoneNumber&&(O.phoneNumber=w.phoneNumber);const K=xe(x,_,O);return K.customData._tokenResponse=w,K}function mr(){return(mr=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function en(x,_){return hr.apply(this,arguments)}function hr(){return(hr=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Yn(x,_){return er.apply(this,arguments)}function er(){return(er=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function fr(x){if(x)try{const _=new Date(Number(x));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function dt(){return(dt=(0,C.Z)(function*(x,_=!1){const w=(0,h.m9)(x),O=yield w.getIdToken(_),K=_e(O);ee(K&&K.exp&&K.auth_time&&K.iat,w.auth,"internal-error");const ae="object"==typeof K.firebase?K.firebase:void 0,Xe=ae?.sign_in_provider;return{claims:K,token:O,authTime:fr(Ie(K.auth_time)),issuedAtTime:fr(Ie(K.iat)),expirationTime:fr(Ie(K.exp)),signInProvider:Xe||null,signInSecondFactor:ae?.sign_in_second_factor||null}})).apply(this,arguments)}function Ie(x){return 1e3*Number(x)}function _e(x){var _;const[w,O,K]=x.split(".");if(void 0===w||void 0===O||void 0===K)return Ht("JWT malformed, contained fewer than 3 sections"),null;try{const ae=(0,h.tV)(O);return ae?JSON.parse(ae):(Ht("Failed to decode base64 JWT payload"),null)}catch(ae){return Ht("Caught error parsing JWT payload as JSON",null===(_=ae)||void 0===_?void 0:_.toString()),null}}function ct(x,_){return rn.apply(this,arguments)}function rn(){return(rn=(0,C.Z)(function*(x,_,w=!1){if(w)return _;try{return yield _}catch(O){throw O instanceof h.ZR&&Dn(O)&&x.auth.currentUser===x&&(yield x.auth.signOut()),O}})).apply(this,arguments)}function Dn({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}class Qn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var w;if(_){const O=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),O}{this.errorBackoff=3e4;const K=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(_=!1){var w=this;if(!this.isRunning)return;const O=this.getInterval(_);this.timerId=setTimeout((0,C.Z)(function*(){yield w.iteration()}),O)}iteration(){var _=this;return(0,C.Z)(function*(){var w;try{yield _.user.getIdToken(!0)}catch(O){return void("auth/network-request-failed"===(null===(w=O)||void 0===w?void 0:w.code)&&_.schedule(!0))}_.schedule()})()}}class zt{constructor(_,w){this.createdAt=_,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(x){return vn.apply(this,arguments)}function vn(){return(vn=(0,C.Z)(function*(x){var _;const w=x.auth,O=yield x.getIdToken(),K=yield ct(x,Yn(w,{idToken:O}));ee(K?.users.length,w,"internal-error");const ae=K.users[0];x._notifyReloadListener(ae);const Xe=null!==(_=ae.providerUserInfo)&&void 0!==_&&_.length?le(ae.providerUserInfo):[],Lt=Te(x.providerData,Xe),wr=!!x.isAnonymous&&!(x.email&&ae.passwordHash||Lt?.length),Ei={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:Lt,metadata:new zt(ae.createdAt,ae.lastLoginAt),isAnonymous:wr};Object.assign(x,Ei)})).apply(this,arguments)}function wn(){return(wn=(0,C.Z)(function*(x){const _=(0,h.m9)(x);yield Jn(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Te(x,_){return[...x.filter(O=>!_.some(K=>K.providerId===O.providerId)),..._]}function le(x){return x.map(_=>{var{providerId:w}=_,O=(0,P._T)(_,["providerId"]);return{providerId:w,uid:O.rawId||"",displayName:O.displayName||null,email:O.email||null,phoneNumber:O.phoneNumber||null,photoURL:O.photoUrl||null}})}function Oe(){return(Oe=(0,C.Z)(function*(x,_){const w=yield dr(x,{},(0,C.Z)(function*(){const O=(0,h.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:K,apiKey:ae}=x.config,Xe=Mr(x,K,"/v1/token",`key=${ae}`),Lt=yield x._getAdditionalHeaders();return Lt["Content-Type"]="application/x-www-form-urlencoded",zn.fetch()(Xe,{method:"POST",headers:Lt,body:O})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class Re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ee(_.idToken,"internal-error"),ee(typeof _.idToken<"u","internal-error"),ee(typeof _.refreshToken<"u","internal-error");const w="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function mt(x){const _=_e(x);return ee(_,"internal-error"),ee(typeof _.exp<"u","internal-error"),ee(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,w)}getToken(_,w=!1){var O=this;return(0,C.Z)(function*(){return ee(!O.accessToken||O.refreshToken,_,"user-token-expired"),w||!O.accessToken||O.isExpired?O.refreshToken?(yield O.refresh(_,O.refreshToken),O.accessToken):null:O.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,w){var O=this;return(0,C.Z)(function*(){const{accessToken:K,refreshToken:ae,expiresIn:Xe}=yield function we(x,_){return Oe.apply(this,arguments)}(_,w);O.updateTokensAndExpiration(K,ae,Number(Xe))})()}updateTokensAndExpiration(_,w,O){this.refreshToken=w||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*O}static fromJSON(_,w){const{refreshToken:O,accessToken:K,expirationTime:ae}=w,Xe=new Re;return O&&(ee("string"==typeof O,"internal-error",{appName:_}),Xe.refreshToken=O),K&&(ee("string"==typeof K,"internal-error",{appName:_}),Xe.accessToken=K),ae&&(ee("number"==typeof ae,"internal-error",{appName:_}),Xe.expirationTime=ae),Xe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new Re,this.toJSON())}_performRefresh(){return se("not implemented")}}function wt(x,_){ee("string"==typeof x||typeof x>"u","internal-error",{appName:_})}class Dt{constructor(_){var{uid:w,auth:O,stsTokenManager:K}=_,ae=(0,P._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=O,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new zt(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(_){var w=this;return(0,C.Z)(function*(){const O=yield ct(w,w.stsTokenManager.getToken(w.auth,_));return ee(O,w.auth,"internal-error"),w.accessToken!==O&&(w.accessToken=O,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),O})()}getIdTokenResult(_){return function vr(x){return dt.apply(this,arguments)}(this,_)}reload(){return function br(x){return wn.apply(this,arguments)}(this)}_assign(_){this!==_&&(ee(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(w=>Object.assign({},w)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new Dt(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,w=!1){var O=this;return(0,C.Z)(function*(){let K=!1;_.idToken&&_.idToken!==O.stsTokenManager.accessToken&&(O.stsTokenManager.updateFromServerResponse(_),K=!0),w&&(yield Jn(O)),yield O.auth._persistUserIfCurrent(O),K&&O.auth._notifyListenersIfCurrent(O)})()}delete(){var _=this;return(0,C.Z)(function*(){const w=yield _.getIdToken();return yield ct(_,function Lr(x,_){return mr.apply(this,arguments)}(_.auth,{idToken:w})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,w){var O,K,ae,Xe,Lt,yn,Un,wr;const Ei=null!==(O=w.displayName)&&void 0!==O?O:void 0,Uo=null!==(K=w.email)&&void 0!==K?K:void 0,di=null!==(ae=w.phoneNumber)&&void 0!==ae?ae:void 0,jr=null!==(Xe=w.photoURL)&&void 0!==Xe?Xe:void 0,$u=null!==(Lt=w.tenantId)&&void 0!==Lt?Lt:void 0,Ea=null!==(yn=w._redirectEventId)&&void 0!==yn?yn:void 0,ps=null!==(Un=w.createdAt)&&void 0!==Un?Un:void 0,ul=null!==(wr=w.lastLoginAt)&&void 0!==wr?wr:void 0,{uid:$i,emailVerified:yc,isAnonymous:Xo,providerData:ll,stsTokenManager:Ao}=w;ee($i&&Ao,_,"internal-error");const vc=Re.fromJSON(this.name,Ao);ee("string"==typeof $i,_,"internal-error"),wt(Ei,_.name),wt(Uo,_.name),ee("boolean"==typeof yc,_,"internal-error"),ee("boolean"==typeof Xo,_,"internal-error"),wt(di,_.name),wt(jr,_.name),wt($u,_.name),wt(Ea,_.name),wt(ps,_.name),wt(ul,_.name);const gs=new Dt({uid:$i,auth:_,email:Uo,emailVerified:yc,displayName:Ei,isAnonymous:Xo,photoURL:jr,phoneNumber:di,tenantId:$u,stsTokenManager:vc,createdAt:ps,lastLoginAt:ul});return ll&&Array.isArray(ll)&&(gs.providerData=ll.map(cl=>Object.assign({},cl))),Ea&&(gs._redirectEventId=Ea),gs}static _fromIdTokenResponse(_,w,O=!1){return(0,C.Z)(function*(){const K=new Re;K.updateFromServerResponse(w);const ae=new Dt({uid:w.localId,auth:_,stsTokenManager:K,isAnonymous:O});return yield Jn(ae),ae})()}}const Bn=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(w,O){var K=this;return(0,C.Z)(function*(){K.storage[w]=O})()}_get(w){var O=this;return(0,C.Z)(function*(){const K=O.storage[w];return void 0===K?null:K})()}_remove(w){var O=this;return(0,C.Z)(function*(){delete O.storage[w]})()}_addListener(w,O){}_removeListener(w,O){}}return x.type="NONE",x})();function Zn(x,_,w){return`firebase:${x}:${_}:${w}`}class Ir{constructor(_,w,O){this.persistence=_,this.auth=w,this.userKey=O;const{config:K,name:ae}=this.auth;this.fullUserKey=Zn(this.userKey,K.apiKey,ae),this.fullPersistenceKey=Zn("persistence",K.apiKey,ae),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,C.Z)(function*(){const w=yield _.persistence._get(_.fullUserKey);return w?Dt._fromJSON(_.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var w=this;return(0,C.Z)(function*(){if(w.persistence===_)return;const O=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=_,O?w.setCurrentUser(O):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,w,O="authUser"){return(0,C.Z)(function*(){if(!w.length)return new Ir(Ue(Bn),_,O);const K=(yield Promise.all(w.map(function(){var Un=(0,C.Z)(function*(wr){if(yield wr._isAvailable())return wr});return function(wr){return Un.apply(this,arguments)}}()))).filter(Un=>Un);let ae=K[0]||Ue(Bn);const Xe=Zn(O,_.config.apiKey,_.name);let Lt=null;for(const Un of w)try{const wr=yield Un._get(Xe);if(wr){const Ei=Dt._fromJSON(_,wr);Un!==ae&&(Lt=Ei),ae=Un;break}}catch{}const yn=K.filter(Un=>Un._shouldAllowMigration);return ae._shouldAllowMigration&&yn.length?(ae=yn[0],Lt&&(yield ae._set(Xe,Lt.toJSON())),yield Promise.all(w.map(function(){var Un=(0,C.Z)(function*(wr){if(wr!==ae)try{yield wr._remove(Xe)}catch{}});return function(wr){return Un.apply(this,arguments)}}())),new Ir(ae,_,O)):new Ir(ae,_,O)})()}}function Je(x){const _=x.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(jt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(Se(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Cn(_))return"Blackberry";if(ve(_))return"Webos";if(Fe(_))return"Safari";if((_.includes("chrome/")||Ct(_))&&!_.includes("edge/"))return"Chrome";if(fn(_))return"Android";{const O=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===O?.length)return O[1]}return"Other"}function Se(x=(0,h.z$)()){return/firefox\//i.test(x)}function Fe(x=(0,h.z$)()){const _=x.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function Ct(x=(0,h.z$)()){return/crios\//i.test(x)}function jt(x=(0,h.z$)()){return/iemobile/i.test(x)}function fn(x=(0,h.z$)()){return/android/i.test(x)}function Cn(x=(0,h.z$)()){return/blackberry/i.test(x)}function ve(x=(0,h.z$)()){return/webos/i.test(x)}function pe(x=(0,h.z$)()){return/iphone|ipad|ipod/i.test(x)||/macintosh/i.test(x)&&/mobile/i.test(x)}function ce(x=(0,h.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function ft(x=(0,h.z$)()){return pe(x)||fn(x)||ve(x)||Cn(x)||/windows phone/i.test(x)||jt(x)}function ne(x,_=[]){let w;switch(x){case"Browser":w=Je((0,h.z$)());break;case"Worker":w=`${Je((0,h.z$)())}-${x}`;break;default:w=x}const O=_.length?_.join(","):"FirebaseCore-web";return`${w}/JsCore/${Z.SDK_VERSION}/${O}`}class W{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,w){const O=ae=>new Promise((Xe,Lt)=>{try{Xe(_(ae))}catch(yn){Lt(yn)}});O.onAbort=w,this.queue.push(O);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(_){var w=this;return(0,C.Z)(function*(){var O;if(w.auth.currentUser===_)return;const K=[];try{for(const ae of w.queue)yield ae(_),ae.onAbort&&K.push(ae.onAbort)}catch(ae){K.reverse();for(const Xe of K)try{Xe()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:null===(O=ae)||void 0===O?void 0:O.message})}})()}}class te{constructor(_,w,O){this.app=_,this.heartbeatServiceProvider=w,this.config=O,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oe(this),this.idTokenSubscription=new oe(this),this.beforeStateQueue=new W(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=O.sdkClientVersion}_initializeWithPersistence(_,w){var O=this;return w&&(this._popupRedirectResolver=Ue(w)),this._initializationPromise=this.queue((0,C.Z)(function*(){var K,ae;if(!O._deleted&&(O.persistenceManager=yield Ir.create(O,_),!O._deleted)){if(null!==(K=O._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield O._popupRedirectResolver._initialize(O)}catch{}yield O.initializeCurrentUser(w),O.lastNotifiedUid=(null===(ae=O.currentUser)||void 0===ae?void 0:ae.uid)||null,!O._deleted&&(O._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,C.Z)(function*(){if(_._deleted)return;const w=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||w){if(_.currentUser&&w&&_.currentUser.uid===w.uid)return _._currentUser._assign(w),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(w,!0)}})()}initializeCurrentUser(_){var w=this;return(0,C.Z)(function*(){var O;const K=yield w.assertedPersistence.getCurrentUser();let ae=K,Xe=!1;if(_&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const Lt=null===(O=w.redirectUser)||void 0===O?void 0:O._redirectEventId,yn=ae?._redirectEventId,Un=yield w.tryRedirectSignIn(_);(!Lt||Lt===yn)&&Un?.user&&(ae=Un.user,Xe=!0)}if(!ae)return w.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Xe)try{yield w.beforeStateQueue.runMiddleware(ae)}catch(Lt){ae=K,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(Lt))}return ae?w.reloadAndSetCurrentUserOrClear(ae):w.directlySetCurrentUser(null)}return ee(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===ae._redirectEventId?w.directlySetCurrentUser(ae):w.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(_){var w=this;return(0,C.Z)(function*(){let O=null;try{O=yield w._popupRedirectResolver._completeRedirectFn(w,_,!0)}catch{yield w._setRedirectUser(null)}return O})()}reloadAndSetCurrentUserOrClear(_){var w=this;return(0,C.Z)(function*(){var O;try{yield Jn(_)}catch(K){if("auth/network-request-failed"!==(null===(O=K)||void 0===O?void 0:O.code))return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function xn(){if(typeof navigator>"u")return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var _=this;return(0,C.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var w=this;return(0,C.Z)(function*(){const O=_?(0,h.m9)(_):null;return O&&ee(O.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(O&&O._clone(w))})()}_updateCurrentUser(_,w=!1){var O=this;return(0,C.Z)(function*(){if(!O._deleted)return _&&ee(O.tenantId===_.tenantId,O,"tenant-id-mismatch"),w||(yield O.beforeStateQueue.runMiddleware(_)),O.queue((0,C.Z)(function*(){yield O.directlySetCurrentUser(_),O.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,C.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var w=this;return this.queue((0,C.Z)(function*(){yield w.assertedPersistence.setPersistence(Ue(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new h.LL("auth","Firebase",_())}onAuthStateChanged(_,w,O){return this.registerStateListener(this.authStateSubscription,_,w,O)}beforeAuthStateChanged(_,w){return this.beforeStateQueue.pushCallback(_,w)}onIdTokenChanged(_,w,O){return this.registerStateListener(this.idTokenSubscription,_,w,O)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,w){var O=this;return(0,C.Z)(function*(){const K=yield O.getOrInitRedirectPersistenceManager(w);return null===_?K.removeCurrentUser():K.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var w=this;return(0,C.Z)(function*(){if(!w.redirectPersistenceManager){const O=_&&Ue(_)||w._popupRedirectResolver;ee(O,w,"argument-error"),w.redirectPersistenceManager=yield Ir.create(w,[Ue(O._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(_){var w=this;return(0,C.Z)(function*(){var O,K;return w._isInitialized&&(yield w.queue((0,C.Z)(function*(){}))),(null===(O=w._currentUser)||void 0===O?void 0:O._redirectEventId)===_?w._currentUser:(null===(K=w.redirectUser)||void 0===K?void 0:K._redirectEventId)===_?w.redirectUser:null})()}_persistUserIfCurrent(_){var w=this;return(0,C.Z)(function*(){if(_===w.currentUser)return w.queue((0,C.Z)(function*(){return w.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const O=null!==(w=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==O&&(this.lastNotifiedUid=O,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,w,O,K){if(this._deleted)return()=>{};const ae="function"==typeof w?w:w.next.bind(w),Xe=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(Xe,this,"internal-error"),Xe.then(()=>ae(this.currentUser)),"function"==typeof w?_.addObserver(w,O,K):_.addObserver(w)}directlySetCurrentUser(_){var w=this;return(0,C.Z)(function*(){w.currentUser&&w.currentUser!==_&&w._currentUser._stopProactiveRefresh(),_&&w.isProactiveRefreshEnabled&&_._startProactiveRefresh(),w.currentUser=_,_?yield w.assertedPersistence.setCurrentUser(_):yield w.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=ne(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,C.Z)(function*(){var w;const O={"X-Client-Version":_.clientVersion};_.app.options.appId&&(O["X-Firebase-gmpid"]=_.app.options.appId);const K=yield null===(w=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return K&&(O["X-Firebase-Client"]=K),O})()}}function Ee(x){return(0,h.m9)(x)}class oe{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,h.ne)(w=>this.observer=w)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ze(x,_,w){const O=Ee(x);ee(O._canInitEmulator,O,"emulator-config-failed"),ee(/^https?:\/\//.test(_),O,"invalid-emulator-scheme");const K=!!w?.disableWarnings,ae=pt(_),{host:Xe,port:Lt}=function Kt(x){const _=pt(x),w=/(\/\/)?([^?#/]+)/.exec(x.substr(_.length));if(!w)return{host:"",port:null};const O=w[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(O);if(K){const ae=K[1];return{host:ae,port:In(O.substr(ae.length+1))}}{const[ae,Xe]=O.split(":");return{host:ae,port:In(Xe)}}}(_);O.config.emulator={url:`${ae}//${Xe}${null===Lt?"":`:${Lt}`}/`},O.settings.appVerificationDisabledForTesting=!0,O.emulatorConfig=Object.freeze({host:Xe,port:Lt,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function kn(){function x(){const _=document.createElement("p"),w=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function pt(x){const _=x.indexOf(":");return _<0?"":x.substr(0,_+1)}function In(x){if(!x)return null;const _=Number(x);return isNaN(_)?null:_}class pn{constructor(_,w){this.providerId=_,this.signInMethod=w}toJSON(){return se("not implemented")}_getIdTokenResponse(_){return se("not implemented")}_linkToIdToken(_,w){return se("not implemented")}_getReauthenticationResolver(_){return se("not implemented")}}function pr(x,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:resetPassword",jn(x,_))})).apply(this,arguments)}function Jr(x,_){return tr.apply(this,arguments)}function tr(){return(tr=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Ci(x,_){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:update",jn(x,_))})).apply(this,arguments)}function or(){return(or=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithPassword",jn(x,_))})).apply(this,arguments)}function On(x,_){return We.apply(this,arguments)}function We(){return(We=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:sendOobCode",jn(x,_))})).apply(this,arguments)}function ke(x,_){return rt.apply(this,arguments)}function rt(){return(rt=(0,C.Z)(function*(x,_){return On(x,_)})).apply(this,arguments)}function Nt(x,_){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,C.Z)(function*(x,_){return On(x,_)})).apply(this,arguments)}function un(x,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,C.Z)(function*(x,_){return On(x,_)})).apply(this,arguments)}function Fn(x,_){return $n.apply(this,arguments)}function $n(){return($n=(0,C.Z)(function*(x,_){return On(x,_)})).apply(this,arguments)}function ys(){return(ys=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithEmailLink",jn(x,_))})).apply(this,arguments)}function Hi(){return(Hi=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithEmailLink",jn(x,_))})).apply(this,arguments)}class ki extends pn{constructor(_,w,O,K=null){super("password",O),this._email=_,this._password=w,this._tenantId=K}static _fromEmailAndPassword(_,w){return new ki(_,w,"password")}static _fromEmailAndCode(_,w,O=null){return new ki(_,w,"emailLink",O)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(_){var w=this;return(0,C.Z)(function*(){switch(w.signInMethod){case"password":return function rr(x,_){return or.apply(this,arguments)}(_,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function $r(x,_){return ys.apply(this,arguments)}(_,{email:w._email,oobCode:w._password});default:qt(_,"internal-error")}})()}_linkToIdToken(_,w){var O=this;return(0,C.Z)(function*(){switch(O.signInMethod){case"password":return Jr(_,{idToken:w,returnSecureToken:!0,email:O._email,password:O._password});case"emailLink":return function Di(x,_){return Hi.apply(this,arguments)}(_,{idToken:w,email:O._email,oobCode:O._password});default:qt(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Ns(x,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithIdp",jn(x,_))})).apply(this,arguments)}class Cs extends pn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const w=new Cs(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(w.idToken=_.idToken),_.accessToken&&(w.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(w.nonce=_.nonce),_.pendingToken&&(w.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(w.accessToken=_.oauthToken,w.secret=_.oauthTokenSecret):qt("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_,{providerId:O,signInMethod:K}=w,ae=(0,P._T)(w,["providerId","signInMethod"]);if(!O||!K)return null;const Xe=new Cs(O,K);return Xe.idToken=ae.idToken||void 0,Xe.accessToken=ae.accessToken||void 0,Xe.secret=ae.secret,Xe.nonce=ae.nonce,Xe.pendingToken=ae.pendingToken||null,Xe}_getIdTokenResponse(_){return Ns(_,this.buildRequest())}_linkToIdToken(_,w){const O=this.buildRequest();return O.idToken=w,Ns(_,O)}_getReauthenticationResolver(_){const w=this.buildRequest();return w.autoCreate=!1,Ns(_,w)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),_.postBody=(0,h.xO)(w)}return _}}function na(x,_){return Po.apply(this,arguments)}function Po(){return(Po=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:sendVerificationCode",jn(x,_))})).apply(this,arguments)}function Ho(){return(Ho=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithPhoneNumber",jn(x,_))})).apply(this,arguments)}function io(){return(io=(0,C.Z)(function*(x,_){const w=yield ur(x,"POST","/v1/accounts:signInWithPhoneNumber",jn(x,_));if(w.temporaryProof)throw Xn(x,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const ra={USER_NOT_FOUND:"user-not-found"};function gr(){return(gr=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithPhoneNumber",jn(x,Object.assign(Object.assign({},_),{operation:"REAUTH"})),ra)})).apply(this,arguments)}class rs extends pn{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,w){return new rs({verificationId:_,verificationCode:w})}static _fromTokenResponse(_,w){return new rs({phoneNumber:_,temporaryProof:w})}_getIdTokenResponse(_){return function $a(x,_){return Ho.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,w){return function ba(x,_){return io.apply(this,arguments)}(_,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function so(x,_){return gr.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:w,verificationId:O,verificationCode:K}=this.params;return _&&w?{temporaryProof:_,phoneNumber:w}:{sessionInfo:O,code:K}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:w,verificationCode:O,phoneNumber:K,temporaryProof:ae}=_;return O||w||K||ae?new rs({verificationId:w,verificationCode:O,phoneNumber:K,temporaryProof:ae}):null}}class Xr{constructor(_){var w,O,K,ae,Xe,Lt;const yn=(0,h.zd)((0,h.pd)(_)),Un=null!==(w=yn.apiKey)&&void 0!==w?w:null,wr=null!==(O=yn.oobCode)&&void 0!==O?O:null,Ei=function ds(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=yn.mode)&&void 0!==K?K:null);ee(Un&&wr&&Ei,"argument-error"),this.apiKey=Un,this.operation=Ei,this.code=wr,this.continueUrl=null!==(ae=yn.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Xe=yn.languageCode)&&void 0!==Xe?Xe:null,this.tenantId=null!==(Lt=yn.tenantId)&&void 0!==Lt?Lt:null}static parseLink(_){const w=function Is(x){const _=(0,h.zd)((0,h.pd)(x)).link,w=_?(0,h.zd)((0,h.pd)(_)).deep_link_id:null,O=(0,h.zd)((0,h.pd)(x)).deep_link_id;return(O?(0,h.zd)((0,h.pd)(O)).link:null)||O||w||_||x}(_);try{return new Xr(w)}catch{return null}}}let Li=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(w,O){return ki._fromEmailAndPassword(w,O)}static credentialWithLink(w,O){const K=Xr.parseLink(O);return ee(K,"argument-error"),ki._fromEmailAndCode(w,K.code,K.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class Ni{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ai extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Nr extends Ai{static credentialFromJSON(_){const w="string"==typeof _?JSON.parse(_):_;return ee("providerId"in w&&"signInMethod"in w,"argument-error"),Cs._fromParams(w)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ee(_.idToken||_.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Nr.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Nr.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:ae,nonce:Xe,providerId:Lt}=_;if(!O&&!K&&!w&&!ae||!Lt)return null;try{return new Nr(Lt)._credential({idToken:w,accessToken:O,nonce:Xe,pendingToken:ae})}catch{return null}}}let Os=(()=>{class x extends Ai{constructor(){super("facebook.com")}static credential(w){return Cs._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return x.credentialFromTaggedObject(w)}static credentialFromError(w){return x.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return x.credential(w.oauthAccessToken)}catch{return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),Zs=(()=>{class x extends Ai{constructor(){super("google.com"),this.addScope("profile")}static credential(w,O){return Cs._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:O})}static credentialFromResult(w){return x.credentialFromTaggedObject(w)}static credentialFromError(w){return x.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:O,oauthAccessToken:K}=w;if(!O&&!K)return null;try{return x.credential(O,K)}catch{return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),qi=(()=>{class x extends Ai{constructor(){super("github.com")}static credential(w){return Cs._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return x.credentialFromTaggedObject(w)}static credentialFromError(w){return x.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return x.credential(w.oauthAccessToken)}catch{return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class ks extends pn{constructor(_,w){super(_,_),this.pendingToken=w}_getIdTokenResponse(_){return Ns(_,this.buildRequest())}_linkToIdToken(_,w){const O=this.buildRequest();return O.idToken=w,Ns(_,O)}_getReauthenticationResolver(_){const w=this.buildRequest();return w.autoCreate=!1,Ns(_,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_,{providerId:O,signInMethod:K,pendingToken:ae}=w;return O&&K&&ae&&O===K?new ks(O,ae):null}static _create(_,w){return new ks(_,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Si extends Ni{constructor(_){ee(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Si.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Si.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const w=ks.fromJSON(_);return ee(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:w,providerId:O}=_;if(!w||!O)return null;try{return ks._create(O,w)}catch{return null}}}let qs=(()=>{class x extends Ai{constructor(){super("twitter.com")}static credential(w,O){return Cs._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:O})}static credentialFromResult(w){return x.credentialFromTaggedObject(w)}static credentialFromError(w){return x.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:O,oauthTokenSecret:K}=w;if(!O||!K)return null;try{return x.credential(O,K)}catch{return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function xi(x,_){return is.apply(this,arguments)}function is(){return(is=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signUp",jn(x,_))})).apply(this,arguments)}class Gi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,w,O,K=!1){return(0,C.Z)(function*(){const ae=yield Dt._fromIdTokenResponse(_,O,K),Xe=oo(O);return new Gi({user:ae,providerId:Xe,_tokenResponse:O,operationType:w})})()}static _forOperation(_,w,O){return(0,C.Z)(function*(){yield _._updateTokensIfNecessary(O,!0);const K=oo(O);return new Gi({user:_,providerId:K,_tokenResponse:O,operationType:w})})()}}function oo(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function ei(x){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,C.Z)(function*(x){var _;const w=Ee(x);if(yield w._initializationPromise,null!==(_=w.currentUser)&&void 0!==_&&_.isAnonymous)return new Gi({user:w.currentUser,providerId:null,operationType:"signIn"});const O=yield xi(w,{returnSecureToken:!0}),K=yield Gi._fromIdTokenResponse(w,"signIn",O,!0);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}class Gr extends h.ZR{constructor(_,w,O,K){var ae;super(w.code,w.message),this.operationType=O,this.user=K,Object.setPrototypeOf(this,Gr.prototype),this.customData={appName:_.name,tenantId:null!==(ae=_.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:w.customData._serverResponse,operationType:O}}static _fromErrorAndOperation(_,w,O,K){return new Gr(_,w,O,K)}}function De(x,_,w,O){return("reauthenticate"===_?w._getReauthenticationResolver(x):w._getIdTokenResponse(x)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Gr._fromErrorAndOperation(x,ae,_,O):ae})}function me(x){return new Set(x.map(({providerId:_})=>_).filter(_=>!!_))}function Ge(x,_){return lt.apply(this,arguments)}function lt(){return(lt=(0,C.Z)(function*(x,_){const w=(0,h.m9)(x);yield ln(!0,w,_);const{providerUserInfo:O}=yield en(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[_]}),K=me(O||[]);return w.providerData=w.providerData.filter(ae=>K.has(ae.providerId)),K.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function xt(x,_){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,C.Z)(function*(x,_,w=!1){const O=yield ct(x,_._linkToIdToken(x.auth,yield x.getIdToken()),w);return Gi._forOperation(x,"link",O)})).apply(this,arguments)}function ln(x,_,w){return cn.apply(this,arguments)}function cn(){return(cn=(0,C.Z)(function*(x,_,w){yield Jn(_);const K=!1===x?"provider-already-linked":"no-such-provider";ee(me(_.providerData).has(w)===x,_.auth,K)})).apply(this,arguments)}function Tr(x,_){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,C.Z)(function*(x,_,w=!1){var O;const{auth:K}=x,ae="reauthenticate";try{const Xe=yield ct(x,De(K,ae,_,x),w);ee(Xe.idToken,K,"internal-error");const Lt=_e(Xe.idToken);ee(Lt,K,"internal-error");const{sub:yn}=Lt;return ee(x.uid===yn,K,"user-mismatch"),Gi._forOperation(x,ae,Xe)}catch(Xe){throw"auth/user-not-found"===(null===(O=Xe)||void 0===O?void 0:O.code)&&qt(K,"user-mismatch"),Xe}})).apply(this,arguments)}function Ar(x,_){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,C.Z)(function*(x,_,w=!1){const O="signIn",K=yield De(x,O,_),ae=yield Gi._fromIdTokenResponse(x,O,K);return w||(yield x._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function _i(x,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,C.Z)(function*(x,_){return Ar(Ee(x),_)})).apply(this,arguments)}function Hn(x,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,C.Z)(function*(x,_){const w=(0,h.m9)(x);return yield ln(!1,w,_.providerId),xt(w,_)})).apply(this,arguments)}function Ks(x,_){return No.apply(this,arguments)}function No(){return(No=(0,C.Z)(function*(x,_){return Tr((0,h.m9)(x),_)})).apply(this,arguments)}function yo(x,_){return fi.apply(this,arguments)}function fi(){return(fi=(0,C.Z)(function*(x,_){return ur(x,"POST","/v1/accounts:signInWithCustomToken",jn(x,_))})).apply(this,arguments)}function Mi(x,_){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,C.Z)(function*(x,_){const w=Ee(x),O=yield yo(w,{token:_,returnSecureToken:!0}),K=yield Gi._fromIdTokenResponse(w,"signIn",O);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}class ni{constructor(_,w){this.factorId=_,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(_,w){return"phoneInfo"in w?Vt._fromServerResponse(_,w):qt(_,"internal-error")}}class Vt extends ni{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,w){return new Vt(w)}}function Rr(x,_,w){var O;ee((null===(O=w.url)||void 0===O?void 0:O.length)>0,x,"invalid-continue-uri"),ee(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),_.continueUrl=w.url,_.dynamicLinkDomain=w.dynamicLinkDomain,_.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ee(w.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),_.iOSBundleId=w.iOS.bundleId),w.android&&(ee(w.android.packageName.length>0,x,"missing-android-pkg-name"),_.androidInstallApp=w.android.installApp,_.androidMinimumVersionCode=w.android.minimumVersion,_.androidPackageName=w.android.packageName)}function Go(x,_,w){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x),K={requestType:"PASSWORD_RESET",email:_};w&&Rr(O,K,w),yield Nt(O,K)})).apply(this,arguments)}function Vi(x,_,w){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,C.Z)(function*(x,_,w){yield pr((0,h.m9)(x),{oobCode:_,newPassword:w})})).apply(this,arguments)}function ao(x,_){return vs.apply(this,arguments)}function vs(){return(vs=(0,C.Z)(function*(x,_){yield Ci((0,h.m9)(x),{oobCode:_})})).apply(this,arguments)}function hu(x,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,C.Z)(function*(x,_){const w=(0,h.m9)(x),O=yield pr(w,{oobCode:_}),K=O.requestType;switch(ee(K,w,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(O.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(O.mfaInfo,w,"internal-error");default:ee(O.email,w,"internal-error")}let ae=null;return O.mfaInfo&&(ae=ni._fromServerResponse(Ee(w),O.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.newEmail:O.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.email:O.newEmail)||null,multiFactorInfo:ae},operation:K}})).apply(this,arguments)}function Wo(x,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,C.Z)(function*(x,_){const{data:w}=yield hu((0,h.m9)(x),_);return w.email})).apply(this,arguments)}function fu(x,_,w){return ss.apply(this,arguments)}function ss(){return(ss=(0,C.Z)(function*(x,_,w){const O=Ee(x),K=yield xi(O,{returnSecureToken:!0,email:_,password:w}),ae=yield Gi._fromIdTokenResponse(O,"signIn",K);return yield O._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function Bi(x,_,w){return _i((0,h.m9)(x),Li.credential(_,w))}function Ls(x,_,w){return Us.apply(this,arguments)}function Us(){return(Us=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x),K={requestType:"EMAIL_SIGNIN",email:_};ee(w.handleCodeInApp,O,"argument-error"),w&&Rr(O,K,w),yield un(O,K)})).apply(this,arguments)}function oa(x,_){return"EMAIL_SIGNIN"===Xr.parseLink(_)?.operation}function bs(x,_,w){return ko.apply(this,arguments)}function ko(){return(ko=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x),K=Li.credentialWithLink(_,w||Mt());return ee(K._tenantId===(O.tenantId||null),O,"tenant-id-mismatch"),_i(O,K)})).apply(this,arguments)}function aa(x,_){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:createAuthUri",jn(x,_))})).apply(this,arguments)}function Yu(x,_){return Da.apply(this,arguments)}function Da(){return(Da=(0,C.Z)(function*(x,_){const O={identifier:_,continueUri:kt()?Mt():"http://localhost"},{signinMethods:K}=yield aa((0,h.m9)(x),O);return K||[]})).apply(this,arguments)}function ua(x,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,C.Z)(function*(x,_){const w=(0,h.m9)(x),K={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};_&&Rr(w.auth,K,_);const{email:ae}=yield ke(w.auth,K);ae!==x.email&&(yield x.reload())})).apply(this,arguments)}function Ha(x,_,w){return la.apply(this,arguments)}function la(){return(la=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:_};w&&Rr(O.auth,ae,w);const{email:Xe}=yield Fn(O.auth,ae);Xe!==x.email&&(yield x.reload())})).apply(this,arguments)}function Ds(x,_){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,C.Z)(function*(x,_){return mn(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function vo(x,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,C.Z)(function*(x,{displayName:_,photoURL:w}){if(void 0===_&&void 0===w)return;const O=(0,h.m9)(x),ae={idToken:yield O.getIdToken(),displayName:_,photoUrl:w,returnSecureToken:!0},Xe=yield ct(O,Ds(O.auth,ae));O.displayName=Xe.displayName||null,O.photoURL=Xe.photoUrl||null;const Lt=O.providerData.find(({providerId:yn})=>"password"===yn);Lt&&(Lt.displayName=O.displayName,Lt.photoURL=O.photoURL),yield O._updateTokensIfNecessary(Xe)})).apply(this,arguments)}function Sa(x,_){return z((0,h.m9)(x),_,null)}function F(x,_){return z((0,h.m9)(x),null,_)}function z(x,_,w){return U.apply(this,arguments)}function U(){return(U=(0,C.Z)(function*(x,_,w){const{auth:O}=x,ae={idToken:yield x.getIdToken(),returnSecureToken:!0};_&&(ae.email=_),w&&(ae.password=w);const Xe=yield ct(x,Jr(O,ae));yield x._updateTokensIfNecessary(Xe,!0)})).apply(this,arguments)}class Ne{constructor(_,w,O={}){this.isNewUser=_,this.providerId=w,this.profile=O}}class It extends Ne{constructor(_,w,O,K){super(_,w,O),this.username=K}}class At extends Ne{constructor(_,w){super(_,"facebook.com",w)}}class Rn extends It{constructor(_,w){super(_,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class Qr extends Ne{constructor(_,w){super(_,"google.com",w)}}class Ur extends It{constructor(_,w,O){super(_,"twitter.com",w,O)}}function Wr(x){const{user:_,_tokenResponse:w}=x;return _.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function Q(x){var _,w;if(!x)return null;const{providerId:O}=x,K=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},ae=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!O&&x?.idToken){const Xe=null===(w=null===(_=_e(x.idToken))||void 0===_?void 0:_.firebase)||void 0===w?void 0:w.sign_in_provider;if(Xe)return new Ne(ae,"anonymous"!==Xe&&"custom"!==Xe?Xe:null)}if(!O)return null;switch(O){case"facebook.com":return new At(ae,K);case"github.com":return new Rn(ae,K);case"google.com":return new Qr(ae,K);case"twitter.com":return new Ur(ae,K,x.screenName||null);case"custom":case"anonymous":return new Ne(ae,null);default:return new Ne(ae,O,K)}}(w)}function si(x,_,w,O){return(0,h.m9)(x).onAuthStateChanged(_,w,O)}class as{constructor(_,w,O){this.type=_,this.credential=w,this.auth=O}static _fromIdtoken(_,w){return new as("enroll",_,w)}static _fromMfaPendingCredential(_){return new as("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var w,O;if(_?.multiFactorSession){if(null!==(w=_.multiFactorSession)&&void 0!==w&&w.pendingCredential)return as._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(O=_.multiFactorSession)&&void 0!==O&&O.idToken)return as._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Eo{constructor(_,w,O){this.session=_,this.hints=w,this.signInResolver=O}static _fromError(_,w){const O=Ee(_),K=w.customData._serverResponse,ae=(K.mfaInfo||[]).map(Lt=>ni._fromServerResponse(O,Lt));ee(K.mfaPendingCredential,O,"internal-error");const Xe=as._fromMfaPendingCredential(K.mfaPendingCredential);return new Eo(Xe,ae,function(){var Lt=(0,C.Z)(function*(yn){const Un=yield yn._process(O,Xe);delete K.mfaInfo,delete K.mfaPendingCredential;const wr=Object.assign(Object.assign({},K),{idToken:Un.idToken,refreshToken:Un.refreshToken});switch(w.operationType){case"signIn":const Ei=yield Gi._fromIdTokenResponse(O,w.operationType,wr);return yield O._updateCurrentUser(Ei.user),Ei;case"reauthenticate":return ee(w.user,O,"internal-error"),Gi._forOperation(w.user,w.operationType,wr);default:qt(O,"internal-error")}});return function(yn){return Lt.apply(this,arguments)}}())}resolveSignIn(_){var w=this;return(0,C.Z)(function*(){return w.signInResolver(_)})()}}function Qt(x,_){var w;const O=(0,h.m9)(x),K=_;return ee(_.customData.operationType,O,"argument-error"),ee(null===(w=K.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,O,"argument-error"),Eo._fromError(O,K)}function yi(x,_){return mn(x,"POST","/v2/accounts/mfaEnrollment:start",jn(x,_))}class Sn{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(O=>ni._fromServerResponse(_.auth,O)))})}static _fromUser(_){return new Sn(_)}getSession(){var _=this;return(0,C.Z)(function*(){return as._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,w){var O=this;return(0,C.Z)(function*(){const K=_,ae=yield O.getSession(),Xe=yield ct(O.user,K._process(O.user.auth,ae,w));return yield O.user._updateTokensIfNecessary(Xe),O.user.reload()})()}unenroll(_){var w=this;return(0,C.Z)(function*(){var O;const K="string"==typeof _?_:_.uid,ae=yield w.user.getIdToken(),Xe=yield ct(w.user,function pu(x,_){return mn(x,"POST","/v2/accounts/mfaEnrollment:withdraw",jn(x,_))}(w.user.auth,{idToken:ae,mfaEnrollmentId:K}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Lt})=>Lt!==K),yield w.user._updateTokensIfNecessary(Xe);try{yield w.user.reload()}catch(Lt){if("auth/user-token-expired"!==(null===(O=Lt)||void 0===O?void 0:O.code))throw Lt}})()}}const ar=new WeakMap;function bl(x){const _=(0,h.m9)(x);return ar.has(_)||ar.set(_,Sn._fromUser(_)),ar.get(_)}const hn="__sak";class St{constructor(_,w){this.storageRetriever=_,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(hn,"1"),this.storage.removeItem(hn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,w){return this.storage.setItem(_,JSON.stringify(w)),Promise.resolve()}_get(_){const w=this.storage.getItem(_);return Promise.resolve(w?JSON.parse(w):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const ca=(()=>{class x extends St{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,O)=>this.onStorageEvent(w,O),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jt(){const x=(0,h.z$)();return Fe(x)||pe(x)}()&&function he(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ft(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const O of Object.keys(this.listeners)){const K=this.storage.getItem(O),ae=this.localCache[O];K!==ae&&w(O,ae,K)}}onStorageEvent(w,O=!1){if(!w.key)return void this.forAllChangedKeys((Lt,yn,Un)=>{this.notifyListeners(Lt,Un)});const K=w.key;if(O?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Lt=this.storage.getItem(K);if(w.newValue!==Lt)null!==w.newValue?this.storage.setItem(K,w.newValue):this.storage.removeItem(K);else if(this.localCache[K]===w.newValue&&!O)return}const ae=()=>{const Lt=this.storage.getItem(K);!O&&this.localCache[K]===Lt||this.notifyListeners(K,Lt)},Xe=this.storage.getItem(K);!function je(){return(0,h.w1)()&&10===document.documentMode}()||Xe===w.newValue||w.newValue===w.oldValue?ae():setTimeout(ae,10)}notifyListeners(w,O){this.localCache[w]=O;const K=this.listeners[w];if(K)for(const ae of Array.from(K))ae(O&&JSON.parse(O))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,O,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:O,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,O){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(O)}_removeListener(w,O){this.listeners[w]&&(this.listeners[w].delete(O),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,O){var K=()=>super._set,ae=this;return(0,C.Z)(function*(){yield K().call(ae,w,O),ae.localCache[w]=JSON.stringify(O)})()}_get(w){var O=()=>super._get,K=this;return(0,C.Z)(function*(){const ae=yield O().call(K,w);return K.localCache[w]=JSON.stringify(ae),ae})()}_remove(w){var O=()=>super._remove,K=this;return(0,C.Z)(function*(){yield O().call(K,w),delete K.localCache[w]})()}}return x.type="LOCAL",x})(),Zo=(()=>{class x extends St{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,O){}_removeListener(w,O){}}return x.type="SESSION",x})();let Vs=(()=>{class x{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const O=this.receivers.find(ae=>ae.isListeningto(w));if(O)return O;const K=new x(w);return this.receivers.push(K),K}isListeningto(w){return this.eventTarget===w}handleEvent(w){var O=this;return(0,C.Z)(function*(){const K=w,{eventId:ae,eventType:Xe,data:Lt}=K.data,yn=O.handlersMap[Xe];if(!yn?.size)return;K.ports[0].postMessage({status:"ack",eventId:ae,eventType:Xe});const Un=Array.from(yn).map(function(){var Ei=(0,C.Z)(function*(Uo){return Uo(K.origin,Lt)});return function(Uo){return Ei.apply(this,arguments)}}()),wr=yield function Qu(x){return Promise.all(x.map(function(){var _=(0,C.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(O){return{fulfilled:!1,reason:O}}});return function(w){return _.apply(this,arguments)}}()))}(Un);K.ports[0].postMessage({status:"done",eventId:ae,eventType:Xe,response:wr})})()}_subscribe(w,O){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(O)}_unsubscribe(w,O){this.handlersMap[w]&&O&&this.handlersMap[w].delete(O),(!O||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function Ga(x="",_=10){let w="";for(let O=0;O<_;O++)w+=Math.floor(10*Math.random());return x+w}class gu{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,w,O=50){var K=this;return(0,C.Z)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Xe,Lt;return new Promise((yn,Un)=>{const wr=Ga("",20);ae.port1.start();const Ei=setTimeout(()=>{Un(new Error("unsupported_event"))},O);Lt={messageChannel:ae,onMessage(Uo){const di=Uo;if(di.data.eventId===wr)switch(di.data.status){case"ack":clearTimeout(Ei),Xe=setTimeout(()=>{Un(new Error("timeout"))},3e3);break;case"done":clearTimeout(Xe),yn(di.data.response);break;default:clearTimeout(Ei),clearTimeout(Xe),Un(new Error("invalid_response"))}}},K.handlers.add(Lt),ae.port1.addEventListener("message",Lt.onMessage),K.target.postMessage({eventType:_,eventId:wr,data:w},[ae.port2])}).finally(()=>{Lt&&K.removeMessageHandler(Lt)})})()}}function Er(){return window}function Vn(){return typeof Er().WorkerGlobalScope<"u"&&"function"==typeof Er().importScripts}function qo(){return(qo=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ys="firebaseLocalStorageDb",da="firebaseLocalStorage",Ii="fbase_key";class on{constructor(_){this.request=_}toPromise(){return new Promise((_,w)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Co(x,_){return x.transaction([da],_?"readwrite":"readonly").objectStore(da)}function ha(){const x=indexedDB.open(Ys,1);return new Promise((_,w)=>{x.addEventListener("error",()=>{w(x.error)}),x.addEventListener("upgradeneeded",()=>{const O=x.result;try{O.createObjectStore(da,{keyPath:Ii})}catch(K){w(K)}}),x.addEventListener("success",(0,C.Z)(function*(){const O=x.result;O.objectStoreNames.contains(da)?_(O):(O.close(),yield function Wa(){const x=indexedDB.deleteDatabase(Ys);return new on(x).toPromise()}(),_(yield ha()))}))})}function Ma(x,_,w){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,C.Z)(function*(x,_,w){const O=Co(x,!0).put({[Ii]:_,value:w});return new on(O).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,C.Z)(function*(x,_){const w=Co(x,!1).get(_),O=yield new on(w).toPromise();return void 0===O?null:O.value})).apply(this,arguments)}function za(x,_){const w=Co(x,!0).delete(_);return new on(w).toPromise()}const mu=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,C.Z)(function*(){return w.db||(w.db=yield ha()),w.db})()}_withRetries(w){var O=this;return(0,C.Z)(function*(){let K=0;for(;;)try{const ae=yield O._openDb();return yield w(ae)}catch(ae){if(K++>3)throw ae;O.db&&(O.db.close(),O.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,C.Z)(function*(){return Vn()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,C.Z)(function*(){w.receiver=Vs._getInstance(function sr(){return Vn()?self:null}()),w.receiver._subscribe("keyChanged",function(){var O=(0,C.Z)(function*(K,ae){return{keyProcessed:(yield w._poll()).includes(ae.key)}});return function(K,ae){return O.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var O=(0,C.Z)(function*(K,ae){return["keyChanged"]});return function(K,ae){return O.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,C.Z)(function*(){var O,K;if(w.activeServiceWorker=yield function wo(){return qo.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new gu(w.activeServiceWorker);const ae=yield w.sender._send("ping",{},800);!ae||(null===(O=ae[0])||void 0===O?void 0:O.fulfilled)&&(null===(K=ae[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var O=this;return(0,C.Z)(function*(){if(O.sender&&O.activeServiceWorker&&function li(){var x;return(null===(x=navigator?.serviceWorker)||void 0===x?void 0:x.controller)||null}()===O.activeServiceWorker)try{yield O.sender._send("keyChanged",{key:w},O.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const w=yield ha();return yield Ma(w,hn,"1"),yield za(w,hn),!0}catch{}return!1})()}_withPendingWrite(w){var O=this;return(0,C.Z)(function*(){O.pendingWrites++;try{yield w()}finally{O.pendingWrites--}})()}_set(w,O){var K=this;return(0,C.Z)(function*(){return K._withPendingWrite((0,C.Z)(function*(){return yield K._withRetries(ae=>Ma(ae,w,O)),K.localCache[w]=O,K.notifyServiceWorker(w)}))})()}_get(w){var O=this;return(0,C.Z)(function*(){const K=yield O._withRetries(ae=>function fc(x,_){return fa.apply(this,arguments)}(ae,w));return O.localCache[w]=K,K})()}_remove(w){var O=this;return(0,C.Z)(function*(){return O._withPendingWrite((0,C.Z)(function*(){return yield O._withRetries(K=>za(K,w)),delete O.localCache[w],O.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,C.Z)(function*(){const O=yield w._withRetries(Xe=>{const Lt=Co(Xe,!1).getAll();return new on(Lt).toPromise()});if(!O)return[];if(0!==w.pendingWrites)return[];const K=[],ae=new Set;for(const{fbase_key:Xe,value:Lt}of O)ae.add(Xe),JSON.stringify(w.localCache[Xe])!==JSON.stringify(Lt)&&(w.notifyListeners(Xe,Lt),K.push(Xe));for(const Xe of Object.keys(w.localCache))w.localCache[Xe]&&!ae.has(Xe)&&(w.notifyListeners(Xe,null),K.push(Xe));return K})()}notifyListeners(w,O){this.localCache[w]=O;const K=this.listeners[w];if(K)for(const ae of Array.from(K))ae(O)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,O){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(O)}_removeListener(w,O){this.listeners[w]&&(this.listeners[w].delete(O),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})();function Nu(x,_){return mn(x,"POST","/v2/accounts/mfaSignIn:start",jn(x,_))}function yt(){return(yt=(0,C.Z)(function*(x){return(yield mn(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fs(x){return new Promise((_,w)=>{const O=document.createElement("script");O.setAttribute("src",x),O.onload=_,O.onerror=K=>{const ae=xe("internal-error");ae.customData=K,w(ae)},O.type="text/javascript",O.charset="UTF-8",function ga(){var x,_;return null!==(_=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==_?_:document}().appendChild(O)})}function ql(x){return`__${x}${Math.floor(1e6*Math.random())}`}const Ou=1e12;class ma{constructor(_){this.auth=_,this.counter=Ou,this._widgets=new Map}render(_,w){const O=this.counter;return this._widgets.set(O,new oi(_,this.auth.name,w||{})),this.counter++,O}reset(_){var w;const O=_||Ou;null===(w=this._widgets.get(O))||void 0===w||w.delete(),this._widgets.delete(O)}getResponse(_){var w;return(null===(w=this._widgets.get(_||Ou))||void 0===w?void 0:w.getResponse())||""}execute(_){var w=this;return(0,C.Z)(function*(){var O;return null===(O=w._widgets.get(_||Ou))||void 0===O||O.execute(),""})()}}class oi{constructor(_,w,O){this.params=O,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof _?document.getElementById(_):_;ee(K,"argument-error",{appName:w}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pc(x){const _=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let O=0;O<x;O++)_.push(w.charAt(Math.floor(Math.random()*w.length)));return _.join("")}(50);const{callback:_,"expired-callback":w}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ju=ql("rcb"),Pa=new Et(3e4,6e4);class Wc{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=Er().grecaptcha)||void 0===_||!_.render)}load(_,w=""){return ee(function qa(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(w),_,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Er().grecaptcha):new Promise((O,K)=>{const ae=Er().setTimeout(()=>{K(xe(_,"network-request-failed"))},Pa.get());Er()[Ju]=()=>{Er().clearTimeout(ae),delete Er()[Ju];const Lt=Er().grecaptcha;if(!Lt)return void K(xe(_,"internal-error"));const yn=Lt.render;Lt.render=(Un,wr)=>{const Ei=yn(Un,wr);return this.counter++,Ei},this.hostLanguage=w,O(Lt)},fs(`https://www.google.com/recaptcha/api.js??${(0,h.xO)({onload:Ju,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(ae),K(xe(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var w;return!(null===(w=Er().grecaptcha)||void 0===w||!w.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Kl{load(_){return(0,C.Z)(function*(){return new ma(_)})()}clearedOneInstance(){}}const ai="recaptcha",Xu={theme:"light",type:"image"};class Ss{constructor(_,w=Object.assign({},Xu),O){this.parameters=w,this.type=ai,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ee(O),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof _?document.getElementById(_):_;ee(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Kl:new Wc,this.validateStartingState()}verify(){var _=this;return(0,C.Z)(function*(){_.assertNotDestroyed();const w=yield _.render(),O=_.getAssertedRecaptcha();return O.getResponse(w)||new Promise(ae=>{const Xe=Lt=>{!Lt||(_.tokenChangeListeners.delete(Xe),ae(Lt))};_.tokenChangeListeners.add(Xe),_.isInvisible&&O.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return w=>{if(this.tokenChangeListeners.forEach(O=>O(w)),"function"==typeof _)_(w);else if("string"==typeof _){const O=Er()[_];"function"==typeof O&&O(w)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,C.Z)(function*(){if(yield _.init(),!_.widgetId){let w=_.container;if(!_.isInvisible){const O=document.createElement("div");w.appendChild(O),w=O}_.widgetId=_.getAssertedRecaptcha().render(w,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,C.Z)(function*(){ee(kt()&&!Vn(),_.auth,"internal-error"),yield function _r(){let x=null;return new Promise(_=>{"complete"!==document.readyState?(x=()=>_(),window.addEventListener("load",x)):_()}).catch(_=>{throw x&&window.removeEventListener("load",x),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const w=yield function Ra(x){return yt.apply(this,arguments)}(_.auth);ee(w,_.auth,"internal-error"),_.parameters.sitekey=w})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Na{constructor(_,w){this.verificationId=_,this.onConfirmation=w}confirm(_){const w=rs._fromVerification(this.verificationId,_);return this.onConfirmation(w)}}function ws(x,_,w){return Js.apply(this,arguments)}function Js(){return(Js=(0,C.Z)(function*(x,_,w){const O=Ee(x),K=yield gi(O,_,(0,h.m9)(w));return new Na(K,ae=>_i(O,ae))})).apply(this,arguments)}function ku(x,_,w){return Br.apply(this,arguments)}function Br(){return(Br=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x);yield ln(!1,O,"phone");const K=yield gi(O.auth,_,(0,h.m9)(w));return new Na(K,ae=>Hn(O,ae))})).apply(this,arguments)}function lo(x,_,w){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x),K=yield gi(O.auth,_,(0,h.m9)(w));return new Na(K,ae=>Ks(O,ae))})).apply(this,arguments)}function gi(x,_,w){return co.apply(this,arguments)}function co(){return(co=(0,C.Z)(function*(x,_,w){var O;const K=yield w.verify();try{let ae;if(ee("string"==typeof K,x,"argument-error"),ee(w.type===ai,x,"argument-error"),ae="string"==typeof _?{phoneNumber:_}:_,"session"in ae){const Xe=ae.session;if("phoneNumber"in ae)return ee("enroll"===Xe.type,x,"internal-error"),(yield yi(x,{idToken:Xe.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ee("signin"===Xe.type,x,"internal-error");const Lt=(null===(O=ae.multiFactorHint)||void 0===O?void 0:O.uid)||ae.multiFactorUid;return ee(Lt,x,"missing-multi-factor-info"),(yield Nu(x,{mfaPendingCredential:Xe.credential,mfaEnrollmentId:Lt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Xe}=yield na(x,{phoneNumber:ae.phoneNumber,recaptchaToken:K});return Xe}}finally{w._reset()}})).apply(this,arguments)}function el(x,_){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,C.Z)(function*(x,_){yield xt((0,h.m9)(x),_)})).apply(this,arguments)}let Ka=(()=>{class x{constructor(w){this.providerId=x.PROVIDER_ID,this.auth=Ee(w)}verifyPhoneNumber(w,O){return gi(this.auth,w,(0,h.m9)(O))}static credential(w,O){return rs._fromVerification(w,O)}static credentialFromResult(w){return x.credentialFromTaggedObject(w)}static credentialFromError(w){return x.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:O,temporaryProof:K}=w;return O&&K?rs._fromTokenResponse(O,K):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function _u(x,_){return _?Ue(_):(ee(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class xs extends pn{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Ns(_,this._buildIdpRequest())}_linkToIdToken(_,w){return Ns(_,this._buildIdpRequest(w))}_getReauthenticationResolver(_){return Ns(_,this._buildIdpRequest())}_buildIdpRequest(_){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(w.idToken=_),w}}function ho(x){return Ar(x.auth,new xs(x),x.bypassAuthState)}function mi(x){const{auth:_,user:w}=x;return ee(w,_,"internal-error"),Tr(w,new xs(x),x.bypassAuthState)}function yu(x){return D.apply(this,arguments)}function D(){return(D=(0,C.Z)(function*(x){const{auth:_,user:w}=x;return ee(w,_,"internal-error"),xt(w,new xs(x),x.bypassAuthState)})).apply(this,arguments)}class A{constructor(_,w,O,K,ae=!1){this.auth=_,this.resolver=O,this.user=K,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var _=this;return new Promise(function(){var w=(0,C.Z)(function*(O,K){_.pendingPromise={resolve:O,reject:K};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(ae){_.reject(ae)}});return function(O,K){return w.apply(this,arguments)}}())}onAuthEvent(_){var w=this;return(0,C.Z)(function*(){const{urlResponse:O,sessionId:K,postBody:ae,tenantId:Xe,error:Lt,type:yn}=_;if(Lt)return void w.reject(Lt);const Un={auth:w.auth,requestUri:O,sessionId:K,tenantId:Xe||void 0,postBody:ae||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(yn)(Un))}catch(wr){w.reject(wr)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return ho;case"linkViaPopup":case"linkViaRedirect":return yu;case"reauthViaPopup":case"reauthViaRedirect":return mi;default:qt(this.auth,"internal-error")}}resolve(_){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const T=new Et(2e3,1e4);function k(x,_,w){return B.apply(this,arguments)}function B(){return(B=(0,C.Z)(function*(x,_,w){const O=Ee(x);Be(x,_,Ni);const K=_u(O,w);return new tn(O,"signInViaPopup",_,K).executeNotNull()})).apply(this,arguments)}function Y(x,_,w){return ye.apply(this,arguments)}function ye(){return(ye=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x);Be(O.auth,_,Ni);const K=_u(O.auth,w);return new tn(O.auth,"reauthViaPopup",_,K,O).executeNotNull()})).apply(this,arguments)}function Me(x,_,w){return bt.apply(this,arguments)}function bt(){return(bt=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x);Be(O.auth,_,Ni);const K=_u(O.auth,w);return new tn(O.auth,"linkViaPopup",_,K,O).executeNotNull()})).apply(this,arguments)}let tn=(()=>{class x extends A{constructor(w,O,K,ae,Xe){super(w,O,ae,Xe),this.provider=K,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var w=this;return(0,C.Z)(function*(){const O=yield w.execute();return ee(O,w.auth,"internal-error"),O})()}onExecution(){var w=this;return(0,C.Z)(function*(){ze(1===w.filter.length,"Popup operations only handle one event");const O=Ga();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],O),w.authWindow.associatedEvent=O,w.resolver._originValidation(w.auth).catch(K=>{w.reject(K)}),w.resolver._isIframeWebStorageSupported(w.auth,K=>{K||w.reject(xe(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const w=()=>{var O,K;this.pollId=null!==(K=null===(O=this.authWindow)||void 0===O?void 0:O.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,T.get())};w()}}return x.currentPopupAction=null,x})();const _n=new Map;class kr extends A{constructor(_,w,O=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,O),this.eventId=null}execute(){var _=()=>super.execute,w=this;return(0,C.Z)(function*(){let O=_n.get(w.auth._key());if(!O){try{const ae=(yield function Xi(x,_){return es.apply(this,arguments)}(w.resolver,w.auth))?yield _().call(w):null;O=()=>Promise.resolve(ae)}catch(K){O=()=>Promise.reject(K)}_n.set(w.auth._key(),O)}return w.bypassAuthState||_n.set(w.auth._key(),()=>Promise.resolve(null)),O()})()}onAuthEvent(_){var w=()=>super.onAuthEvent,O=this;return(0,C.Z)(function*(){if("signInViaRedirect"===_.type)return w().call(O,_);if("unknown"!==_.type){if(_.eventId){const K=yield O.auth._redirectUserForId(_.eventId);if(K)return O.user=K,w().call(O,_);O.resolve(null)}}else O.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function es(){return(es=(0,C.Z)(function*(x,_){const w=Qa(_),O=Yo(x);if(!(yield O._isAvailable()))return!1;const K="true"===(yield O._get(w));return yield O._remove(w),K})).apply(this,arguments)}function Ms(x,_){return js.apply(this,arguments)}function js(){return(js=(0,C.Z)(function*(x,_){return Yo(x)._set(Qa(_),"true")})).apply(this,arguments)}function Ya(){_n.clear()}function Oa(x,_){_n.set(x._key(),_)}function Yo(x){return Ue(x._redirectPersistence)}function Qa(x){return Zn("pendingRedirect",x.config.apiKey,x.name)}function us(x,_,w){return function Oi(x,_,w){return ci.apply(this,arguments)}(x,_,w)}function ci(){return(ci=(0,C.Z)(function*(x,_,w){const O=Ee(x);Be(x,_,Ni);const K=_u(O,w);return yield Ms(K,O),K._openRedirect(O,_,"signInViaRedirect")})).apply(this,arguments)}function Dl(x,_,w){return function Al(x,_,w){return bo.apply(this,arguments)}(x,_,w)}function bo(){return(bo=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x);Be(O.auth,_,Ni);const K=_u(O.auth,w);yield Ms(K,O.auth);const ae=yield Sl(O);return K._openRedirect(O.auth,_,"reauthViaRedirect",ae)})).apply(this,arguments)}function gc(x,_,w){return function vu(x,_,w){return Ja.apply(this,arguments)}(x,_,w)}function Ja(){return(Ja=(0,C.Z)(function*(x,_,w){const O=(0,h.m9)(x);Be(O.auth,_,Ni);const K=_u(O.auth,w);yield ln(!1,O,_.providerId),yield Ms(K,O.auth);const ae=yield Sl(O);return K._openRedirect(O.auth,_,"linkViaRedirect",ae)})).apply(this,arguments)}function Eu(x,_){return _a.apply(this,arguments)}function _a(){return(_a=(0,C.Z)(function*(x,_){return yield Ee(x)._initializationPromise,ya(x,_,!1)})).apply(this,arguments)}function ya(x,_){return bi.apply(this,arguments)}function bi(){return(bi=(0,C.Z)(function*(x,_,w=!1){const O=Ee(x),K=_u(O,_),Xe=yield new kr(O,K,w).execute();return Xe&&!w&&(delete Xe.user._redirectEventId,yield O._persistUserIfCurrent(Xe.user),yield O._setRedirectUser(null,_)),Xe})).apply(this,arguments)}function Sl(x){return xl.apply(this,arguments)}function xl(){return(xl=(0,C.Z)(function*(x){const _=Ga(`${x.uid}:::`);return x._redirectEventId=_,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),_})).apply(this,arguments)}class ka{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let w=!1;return this.consumers.forEach(O=>{this.isEventForConsumer(_,O)&&(w=!0,this.sendToConsumer(_,O),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Ql(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lu(x);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=_,w=!0)),w}sendToConsumer(_,w){var O;if(_.error&&!Lu(_)){const K=(null===(O=_.error.code)||void 0===O?void 0:O.split("auth/")[1])||"internal-error";w.onError(xe(this.auth,K))}else w.onAuthEvent(_)}isEventForConsumer(_,w){const O=null===w.eventId||!!_.eventId&&_.eventId===w.eventId;return w.filter.includes(_.type)&&O}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yl(_))}saveEventToCache(_){this.cachedEventUids.add(Yl(_)),this.lastProcessedEventTime=Date.now()}}function Yl(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(_=>_).join("-")}function Lu({type:x,error:_}){return"unknown"===x&&"auth/no-auth-event"===_?.code}function Cu(x){return fo.apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(x,_={}){return mn(x,"GET","/v1/projects",_)})).apply(this,arguments)}const Uu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zc=/^https?/;function nl(){return(nl=(0,C.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:_}=yield Cu(x);for(const w of _)try{if(Iu(w))return}catch{}qt(x,"unauthorized-domain")})).apply(this,arguments)}function Iu(x){const _=Mt(),{protocol:w,hostname:O}=new URL(_);if(x.startsWith("chrome-extension://")){const Xe=new URL(x);return""===Xe.hostname&&""===O?"chrome-extension:"===w&&x.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===w&&Xe.hostname===O}if(!zc.test(w))return!1;if(Uu.test(x))return O===x;const K=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(O)}const rl=new Et(3e4,6e4);function $s(){const x=Er().___jsl;if(x?.H)for(const _ of Object.keys(x.H))if(x.H[_].r=x.H[_].r||[],x.H[_].L=x.H[_].L||[],x.H[_].r=[...x.H[_].L],x.CP)for(let w=0;w<x.CP.length;w++)x.CP[w]=null}let va=null;function il(x){return va=va||function Xa(x){return new Promise((_,w)=>{var O,K,ae;function Xe(){$s(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{$s(),w(xe(x,"network-request-failed"))},timeout:rl.get()})}if(null!==(K=null===(O=Er().gapi)||void 0===O?void 0:O.iframes)&&void 0!==K&&K.Iframe)_(gapi.iframes.getContext());else{if(null===(ae=Er().gapi)||void 0===ae||!ae.load){const Lt=ql("iframefcb");return Er()[Lt]=()=>{gapi.load?Xe():w(xe(x,"network-request-failed"))},fs(`https://apis.google.com/js/api.js?onload=${Lt}`).catch(yn=>w(yn))}Xe()}}).catch(_=>{throw va=null,_})}(x),va}const Ml=new Et(5e3,15e3),sl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Do=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ol(x){const _=x.config;ee(_.authDomain,x,"auth-domain-config-required");const w=_.emulator?nn(_,"emulator/auth/iframe"):`https://${x.config.authDomain}/__/auth/iframe`,O={apiKey:_.apiKey,appName:x.name,v:Z.SDK_VERSION},K=Do.get(x.config.apiHost);K&&(O.eid=K);const ae=x._getFrameworks();return ae.length&&(O.fw=ae.join(",")),`${w}?${(0,h.xO)(O).slice(1)}`}function Fa(){return Fa=(0,C.Z)(function*(x){const _=yield il(x),w=Er().gapi;return ee(w,x,"internal-error"),_.open({where:document.body,url:ol(x),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sl,dontclear:!0},O=>new Promise(function(){var K=(0,C.Z)(function*(ae,Xe){yield O.restyle({setHideOnLeave:!1});const Lt=xe(x,"network-request-failed"),yn=Er().setTimeout(()=>{Xe(Lt)},Ml.get());function Un(){Er().clearTimeout(yn),ae(O)}O.ping(Un).then(Un,()=>{Xe(Lt)})});return function(ae,Xe){return K.apply(this,arguments)}}()))}),Fa.apply(this,arguments)}const al={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xl{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lo(x,_,w,O,K,ae){ee(x.config.authDomain,x,"auth-domain-config-required"),ee(x.config.apiKey,x,"invalid-api-key");const Xe={apiKey:x.config.apiKey,appName:x.name,authType:w,redirectUrl:O,v:Z.SDK_VERSION,eventId:K};if(_ instanceof Ni){_.setDefaultLanguage(x.languageCode),Xe.providerId=_.providerId||"",(0,h.xb)(_.getCustomParameters())||(Xe.customParameters=JSON.stringify(_.getCustomParameters()));for(const[yn,Un]of Object.entries(ae||{}))Xe[yn]=Un}if(_ instanceof Ai){const yn=_.getScopes().filter(Un=>""!==Un);yn.length>0&&(Xe.scopes=yn.join(","))}x.tenantId&&(Xe.tid=x.tenantId);const Lt=Xe;for(const yn of Object.keys(Lt))void 0===Lt[yn]&&delete Lt[yn];return`${function Qo({config:x}){return x.emulator?nn(x,"emulator/auth/handler"):`https://${x.authDomain}/__/auth/handler`}(x)}?${(0,h.xO)(Lt).slice(1)}`}const Rl="webStorageSupport",Vu=class La{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zo,this._completeRedirectFn=ya,this._overrideRedirectResult=Oa}_openPopup(_,w,O,K){var ae=this;return(0,C.Z)(function*(){var Xe;ze(null===(Xe=ae.eventManagers[_._key()])||void 0===Xe?void 0:Xe.manager,"_initialize() not called before _openPopup()");const Lt=Lo(_,w,O,Mt(),K);return function eu(x,_,w,O=500,K=600){const ae=Math.max((window.screen.availHeight-K)/2,0).toString(),Xe=Math.max((window.screen.availWidth-O)/2,0).toString();let Lt="";const yn=Object.assign(Object.assign({},al),{width:O.toString(),height:K.toString(),top:ae,left:Xe}),Un=(0,h.z$)().toLowerCase();w&&(Lt=Ct(Un)?"_blank":w),Se(Un)&&(_=_||"http://localhost",yn.scrollbars="yes");const wr=Object.entries(yn).reduce((Uo,[di,jr])=>`${Uo}${di}=${jr},`,"");if(function et(x=(0,h.z$)()){var _;return pe(x)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Un)&&"_self"!==Lt)return function ec(x,_){const w=document.createElement("a");w.href=x,w.target=_;const O=document.createEvent("MouseEvent");O.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(O)}(_||"",Lt),new Xl(null);const Ei=window.open(_||"",Lt,wr);ee(Ei,x,"popup-blocked");try{Ei.focus()}catch{}return new Xl(Ei)}(_,Lt,Ga())})()}_openRedirect(_,w,O,K){var ae=this;return(0,C.Z)(function*(){return yield ae._originValidation(_),function xa(x){Er().location.href=x}(Lo(_,w,O,Mt(),K)),new Promise(()=>{})})()}_initialize(_){const w=_._key();if(this.eventManagers[w]){const{manager:K,promise:ae}=this.eventManagers[w];return K?Promise.resolve(K):(ze(ae,"If manager is not set, promise should be"),ae)}const O=this.initAndGetManager(_);return this.eventManagers[w]={promise:O},O.catch(()=>{delete this.eventManagers[w]}),O}initAndGetManager(_){var w=this;return(0,C.Z)(function*(){const O=yield function Jl(x){return Fa.apply(this,arguments)}(_),K=new ka(_);return O.register("authEvent",ae=>(ee(ae?.authEvent,_,"invalid-auth-event"),{status:K.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[_._key()]={manager:K},w.iframes[_._key()]=O,K})()}_isIframeWebStorageSupported(_,w){this.iframes[_._key()].send(Rl,{type:Rl},K=>{var ae;const Xe=null===(ae=K?.[0])||void 0===ae?void 0:ae[Rl];void 0!==Xe&&w(!!Xe),qt(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const w=_._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function tl(x){return nl.apply(this,arguments)}(_)),this.originValidationPromises[w]}get _shouldInitProactively(){return ft()||Fe()||pe()}};class ju extends class Bu{constructor(_){this.factorId=_}_process(_,w,O){switch(w.type){case"enroll":return this._finalizeEnroll(_,w.credential,O);case"signin":return this._finalizeSignIn(_,w.credential);default:return se("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new ju(_)}_finalizeEnroll(_,w,O){return function Es(x,_){return mn(x,"POST","/v2/accounts/mfaEnrollment:finalize",jn(x,_))}(_,{idToken:w,displayName:O,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,w){return function Io(x,_){return mn(x,"POST","/v2/accounts/mfaSignIn:finalize",jn(x,_))}(_,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ua=(()=>{class x{constructor(){}static assertion(w){return ju._fromCredential(w)}}return x.FACTOR_ID="phone",x})();var Jo="@firebase/auth";class qc{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var w=this;return(0,C.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const w=this.auth.onIdTokenChanged(O=>{var K;_((null===(K=O)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,w),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const w=this.internalListeners.get(_);!w||(this.internalListeners.delete(_),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nc(x=(0,Z.getApp)()){const _=(0,Z._getProvider)(x,"auth");return _.isInitialized()?_.getImmediate():function Ke(x,_){const w=(0,Z._getProvider)(x,"auth");if(w.isInitialized()){const K=w.getImmediate(),ae=w.getOptions();if((0,h.vZ)(ae,_??{}))return K;qt(K,"already-initialized")}return w.initialize({options:_})}(x,{popupRedirectResolver:Vu,persistence:[mu,ca,Zo]})}!function Pl(x){(0,Z._registerComponent)(new Le.wA("auth",(_,{options:w})=>{const O=_.getProvider("app").getImmediate(),K=_.getProvider("heartbeat"),{apiKey:ae,authDomain:Xe}=O.options;return((Lt,yn)=>{ee(ae&&!ae.includes(":"),"invalid-api-key",{appName:Lt.name}),ee(!Xe?.includes(":"),"argument-error",{appName:Lt.name});const Un={apiKey:ae,authDomain:Xe,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ne(x)},wr=new te(Lt,yn,Un);return function Ye(x,_){const w=_?.persistence||[],O=(Array.isArray(w)?w:[w]).map(Ue);_?.errorMap&&x._updateErrorMap(_.errorMap),x._initializeWithPersistence(O,_?.popupRedirectResolver)}(wr,w),wr})(O,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,w,O)=>{_.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new Le.wA("auth-internal",_=>{const w=Ee(_.getProvider("auth").getImmediate());return new qc(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(Jo,"0.20.7",function Wi(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,Z.registerVersion)(Jo,"0.20.7","esm2017")}("Browser")},5525:(an,ht,j)=>{j.d(ht,{u7:()=>Vh,Jj:()=>qu,IX:()=>T_,my:()=>_s,xU:()=>md,Lz:()=>du,WA:()=>Jt,F8:()=>Lf,$q:()=>Zd,W:()=>cc,EK:()=>li,PU:()=>rg,l7:()=>xs,Ky:()=>on,Xb:()=>Ii,Cf:()=>hi,K9:()=>bl,Me:()=>ku,yq:()=>Es,Wi:()=>w_,ET:()=>Ro,Ab:()=>H_,vr:()=>$_,Fc:()=>$p,hJ:()=>I_,B$:()=>Up,at:()=>lc,oe:()=>V_,AK:()=>Am,TF:()=>x_,JU:()=>Vp,ST:()=>um,fH:()=>jp,Ix:()=>S_,Wu:()=>mm,Lx:()=>gm,qY:()=>po,GL:()=>Kd,QT:()=>Em,kl:()=>wm,Xk:()=>Cm,PL:()=>Im,UQ:()=>Yy,zN:()=>L_,ad:()=>D_,nP:()=>Sm,b9:()=>Jp,vh:()=>hm,Pb:()=>M_,L$:()=>R_,cf:()=>Tm,sc:()=>B_,Xo:()=>dm,IO:()=>qp,iE:()=>om,Eo:()=>b_,i3:()=>Dm,Bt:()=>Yd,pl:()=>U_,Ub:()=>Eo,qK:()=>O_,TQ:()=>fm,e0:()=>eg,r7:()=>bm,Mx:()=>A_,ar:()=>Kp});var be,C=j(5861),h=j(9681),Z=j(4859),P=j(1877),de=j(2090),Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qe={},tt=tt||{},ie=Le||self;function fe(){}function Ce(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function st(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var nt="closure_uid_"+(1e9*Math.random()>>>0),Ot=0;function at(i,e,n){return i.call.apply(i.bind,arguments)}function it(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Ht(i,e,n){return(Ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:it).apply(null,arguments)}function qt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function xe(i,e){function n(){}n.prototype=e.prototype,i.X=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(o,u,p){for(var I=Array(arguments.length-2),N=2;N<arguments.length;N++)I[N-2]=arguments[N];return e.prototype[u].apply(o,I)}}function gt(){this.s=this.s,this.o=this.o}var ut={};gt.prototype.s=!1,gt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function ot(i){return Object.prototype.hasOwnProperty.call(i,nt)&&i[nt]||(i[nt]=++Ot)}(this);delete ut[i]}},gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ee=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function se(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function ze(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Ce(o)){const u=i.length||0,p=o.length||0;i.length=u+p;for(let I=0;I<p;I++)i[u+I]=o[I]}else i.push(o)}}function Pe(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ie.addEventListener("test",fe,e),ie.removeEventListener("test",fe,e)}catch{}return i}();function Ke(i){return/^[\s\xa0]*$/.test(i)}var Ye=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Mt(i,e){return i<e?-1:i>e?1:0}function kt(){var i=ie.navigator;return i&&(i=i.userAgent)?i:""}function Bt(i){return-1!=kt().indexOf(i)}function gn(i){return gn[" "](i),i}gn[" "]=fe;var ir,i,Et=Bt("Opera"),nn=Bt("Trident")||Bt("MSIE"),zn=Bt("Edge"),Nn=zn||nn,Kn=Bt("Gecko")&&!(-1!=kt().toLowerCase().indexOf("webkit")&&!Bt("Edge"))&&!(Bt("Trident")||Bt("MSIE"))&&!Bt("Edge"),jn=-1!=kt().toLowerCase().indexOf("webkit")&&!Bt("Edge");function mn(){var i=ie.document;return i?i.documentMode:void 0}e:{var dr="",Cr=(i=kt(),Kn?/rv:([^\);]+)(\)|;)/.exec(i):zn?/Edge\/([\d\.]+)/.exec(i):nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):jn?/WebKit\/(\S+)/.exec(i):Et?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Cr&&(dr=Cr?Cr[1]:""),nn){var ur=mn();if(null!=ur&&ur>parseFloat(dr)){ir=String(ur);break e}}ir=dr}var lr={};var Lr=ie.document&&nn&&(mn()||parseInt(ir,10))||void 0;function mr(i,e){if(Pe.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Kn){e:{try{gn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:en[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&mr.X.h.call(this)}}xe(mr,Pe);var en={2:"touch",3:"pen",4:"mouse"};mr.prototype.h=function(){mr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var hr="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function er(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.ha=u,this.key=++Yn,this.ba=this.ea=!1}function fr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function ri(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function vr(i){const e={};for(const n in i)e[n]=i[n];return e}const dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let p=0;p<dt.length;p++)n=dt[p],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function _e(i){this.src=i,this.g={},this.h=0}function mt(i,e){var n=e.type;if(n in i.g){var p,o=i.g[n],u=ee(o,e);(p=0<=u)&&Array.prototype.splice.call(o,u,1),p&&(fr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function ct(i,e,n,o){for(var u=0;u<i.length;++u){var p=i[u];if(!p.ba&&p.listener==e&&p.capture==!!n&&p.ha==o)return u}return-1}_e.prototype.add=function(i,e,n,o,u){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var I=ct(i,e,o,u);return-1<I?(e=i[I],n||(e.ea=!1)):((e=new er(e,this.src,p,!!o,u)).ea=n,i.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),Dn={};function Qn(i,e,n,o,u){if(o&&o.once)return vn(i,e,n,o,u);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Qn(i,e[p],n,o,u);return null}return n=Re(n),i&&i[hr]?i.N(e,n,st(o)?!!o.capture:!!o,u):zt(i,e,n,!1,o,u)}function zt(i,e,n,o,u,p){if(!e)throw Error("Invalid event type");var I=st(u)?!!u.capture:!!u,N=we(i);if(N||(i[rn]=N=new _e(i)),(n=N.add(e,n,o,I,p)).proxy)return n;if(o=function Jn(){const e=le;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Ue||(u=I),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Te(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function vn(i,e,n,o,u){if(Array.isArray(e)){for(var p=0;p<e.length;p++)vn(i,e[p],n,o,u);return null}return n=Re(n),i&&i[hr]?i.O(e,n,st(o)?!!o.capture:!!o,u):zt(i,e,n,!0,o,u)}function br(i,e,n,o,u){if(Array.isArray(e))for(var p=0;p<e.length;p++)br(i,e[p],n,o,u);else o=st(o)?!!o.capture:!!o,n=Re(n),i&&i[hr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=ct(p=i.g[e],n,o,u))&&(fr(p[n]),Array.prototype.splice.call(p,n,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=we(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ct(e,n,o,u)),(n=-1<i?e[i]:null)&&wn(n))}function wn(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[hr])mt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Te(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=we(e))?(mt(n,i),0==n.h&&(n.src=null,e[rn]=null)):fr(i)}}}function Te(i){return i in Dn?Dn[i]:Dn[i]="on"+i}function le(i,e){if(i.ba)i=!0;else{e=new mr(e,this);var n=i.listener,o=i.ha||i.src;i.ea&&wn(i),i=n.call(o,e)}return i}function we(i){return(i=i[rn])instanceof _e?i:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(i){return"function"==typeof i?i:(i[Oe]||(i[Oe]=function(e){return i.handleEvent(e)}),i[Oe])}function wt(){gt.call(this),this.i=new _e(this),this.P=this,this.I=null}function Dt(i,e){var n,o=i.I;if(o)for(n=[];o;o=o.I)n.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Pe(e,i);else if(e instanceof Pe)e.target=e.target||i;else{var u=e;Ie(e=new Pe(o,i),u)}if(u=!0,n)for(var p=n.length-1;0<=p;p--){var I=e.g=n[p];u=Yt(I,o,!0,e)&&u}if(u=Yt(I=e.g=i,o,!0,e)&&u,u=Yt(I,o,!1,e)&&u,n)for(p=0;p<n.length;p++)u=Yt(I=e.g=n[p],o,!1,e)&&u}function Yt(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,p=0;p<e.length;++p){var I=e[p];if(I&&!I.ba&&I.capture==n){var N=I.listener,$=I.ha||I.src;I.ea&&mt(i.i,I),u=!1!==N.call($,o)&&u}}return u&&!o.defaultPrevented}xe(wt,gt),wt.prototype[hr]=!0,wt.prototype.removeEventListener=function(i,e,n,o){br(this,i,e,n,o)},wt.prototype.M=function(){if(wt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)fr(n[o]);delete i.g[e],i.h--}}this.I=null},wt.prototype.N=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},wt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Bn=ie.JSON.stringify;function Zn(){var i=ve;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var jt,Je=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Se,i=>i.reset());class Se{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Fe(i){ie.setTimeout(()=>{throw i},0)}function Ct(i,e){jt||function fn(){var i=ie.Promise.resolve(void 0);jt=function(){i.then(pe)}}(),Cn||(jt(),Cn=!0),ve.add(i,e)}var Cn=!1,ve=new class Ir{constructor(){this.h=this.g=null}add(e,n){const o=Je.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}};function pe(){for(var i;i=Zn();){try{i.h.call(i.g)}catch(n){Fe(n)}var e=Je;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Cn=!1}function ce(i,e){wt.call(this),this.h=i||1,this.g=e||ie,this.j=Ht(this.kb,this),this.l=Date.now()}function et(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function je(i,e,n){if("function"==typeof i)n&&(i=Ht(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ht(i.handleEvent,i)}return 2147483647<Number(e)?-1:ie.setTimeout(i,e||0)}function ft(i){i.g=je(()=>{i.g=null,i.i&&(i.i=!1,ft(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}xe(ce,wt),(be=ce.prototype).ca=!1,be.R=null,be.kb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Dt(this,"tick"),this.ca&&(et(this),this.start()))}},be.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},be.M=function(){ce.X.M.call(this),et(this),delete this.g};class he extends gt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ft(this)}M(){super.M(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(i){gt.call(this),this.h=i,this.g={}}xe(ne,gt);var W=[];function te(i,e,n,o){Array.isArray(n)||(n&&(W[0]=n.toString()),n=W);for(var u=0;u<n.length;u++){var p=Qn(e,n[u],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Ee(i){ri(i.g,function(e,n){this.g.hasOwnProperty(n)&&wn(e)},i),i.g={}}function oe(){this.g=!0}function Kt(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kn(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var p=u[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var I=1;I<u.length;I++)u[I]=""}}}return Bn(n)}catch{return e}}(i,n)+(o?" "+o:"")})}ne.prototype.M=function(){ne.X.M.call(this),Ee(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oe.prototype.Aa=function(){this.g=!1},oe.prototype.info=function(){};var pn={},pr=null;function qr(){return pr=pr||new wt}function Jr(i){Pe.call(this,pn.Oa,i)}function tr(i){const e=qr();Dt(e,new Jr(e,i))}function Ci(i,e){Pe.call(this,pn.STAT_EVENT,i),this.stat=e}function Kr(i){const e=qr();Dt(e,new Ci(e,i))}function rr(i,e){Pe.call(this,pn.Pa,i),this.size=e}function or(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){i()},e)}pn.Oa="serverreachability",xe(Jr,Pe),pn.STAT_EVENT="statevent",xe(Ci,Pe),pn.Pa="timingevent",xe(rr,Pe);var On={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},We={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ke(){}function Nt(){}ke.prototype.h=null;var Fn,Zt={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function un(){Pe.call(this,"d")}function Mn(){Pe.call(this,"c")}function $n(){}function $r(i,e,n,o){this.l=i,this.j=e,this.m=n,this.U=o||1,this.S=new ne(this),this.O=Di,this.T=new ce(i=Nn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ys}function ys(){this.i=null,this.g="",this.h=!1}xe(un,Pe),xe(Mn,Pe),xe($n,ke),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Fn=new $n;var Di=45e3,Hi={},ki={};function Ns(i,e,n){i.K=1,i.v=Os(Fi(e)),i.s=n,i.P=!0,Yi(i,null)}function Yi(i,e){i.F=Date.now(),Po(i),i.A=Fi(i.v);var n=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Ta(n.i,"t",o),i.C=0,n=i.l.H,i.h=new ys,i.g=F(i.l,n?e:null,!i.s),0<i.N&&(i.L=new he(Ht(i.Ka,i,i.g),i.N)),te(i.S,i.g,"readystatechange",i.hb),e=i.H?vr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),tr(1),function Ze(i,e,n,o,u,p){i.info(function(){if(i.g)if(p)for(var I="",N=p.split("&"),$=0;$<N.length;$++){var q=N[$].split("=");if(1<q.length){var ue=q[0];q=q[1];var Ve=ue.split("_");I=2<=Ve.length&&"type"==Ve[1]?I+(ue+"=")+q+"&":I+(ue+"=redacted&")}}else I=null;else I=p;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+I})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Zi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Cs(i,e,n){let u,o=!0;for(;!i.I&&i.C<n.length;){if(u=na(i,n),u==ki){4==e&&(i.o=4,Kr(14),o=!1),Kt(i.j,i.m,null,"[Incomplete Response]");break}if(u==Hi){i.o=4,Kr(15),Kt(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Kt(i.j,i.m,u,null),ra(i,u)}Zi(i)&&u!=ki&&u!=Hi&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Kr(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Aa(e),e.K=!0,Kr(11))):(Kt(i.j,i.m,n,"[Invalid Chunked Response]"),io(i),ba(i))}function na(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?ki:(n=Number(e.substring(n,o)),isNaN(n)?Hi:(o+=1)+n>e.length?ki:(e=e.substr(o,n),i.C=o+n,e))}function Po(i){i.V=Date.now()+i.O,$a(i,i.O)}function $a(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=or(Ht(i.fb,i),e)}function Ho(i){i.B&&(ie.clearTimeout(i.B),i.B=null)}function ba(i){0==i.l.G||i.I||Ds(i.l,i)}function io(i){Ho(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,et(i.T),Ee(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ra(i,e){try{var n=i.l;if(0!=n.G&&(n.g==i||ln(n.h,i)))if(!i.J&&ln(n.h,i)&&3==n.G){try{var o=n.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<i.F))break e;la(n),Us(n)}ua(n),Kr(18)}}else n.Ba=u[1],0<n.Ba-n.T&&37500>u[2]&&n.L&&0==n.A&&!n.v&&(n.v=or(Ht(n.bb,n),6e3));if(1>=Tt(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else vo(n,11)}else if((i.J||n.g==i)&&la(n),!Ke(e))for(u=n.Fa.g.parse(e),e=0;e<u.length;e++){let q=u[e];if(n.T=q[0],q=q[1],2==n.G)if("c"==q[0]){n.I=q[1],n.ka=q[2];const ue=q[3];null!=ue&&(n.ma=ue,n.j.info("VER="+n.ma));const Ve=q[4];null!=Ve&&(n.Ca=Ve,n.j.info("SVER="+n.Ca));const vt=q[5];null!=vt&&"number"==typeof vt&&0<vt&&(n.J=o=1.5*vt,n.j.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ut=i.g;if(Ut){const Gt=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gt){var p=o.h;p.g||-1==Gt.indexOf("spdy")&&-1==Gt.indexOf("quic")&&-1==Gt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(cn(p,p.h),p.h=null))}if(o.D){const An=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;An&&(o.za=An,Nr(o.F,o.D,An))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-i.F,n.j.info("Handshake RTT: "+n.P+"ms"));var I=i;if((o=n).sa=Sa(o,o.H?o.ka:null,o.V),I.J){Tr(o.h,I);var N=I,$=o.J;$&&N.setTimeout($),N.B&&(Ho(N),Po(N)),o.g=I}else Da(o);0<n.i.length&&bs(n)}else"stop"!=q[0]&&"close"!=q[0]||vo(n,7);else 3==n.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?vo(n,7):Ls(n):"noop"!=q[0]&&n.l&&n.l.wa(q),n.A=0)}tr(4)}catch{}}function rs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ce(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function gr(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ce(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function so(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ce(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,p=0;p<u;p++)e.call(void 0,o[p],n&&n[p],i)}(be=$r.prototype).setTimeout=function(i){this.O=i},be.hb=function(i){i=i.target;const e=this.L;e&&3==Qi(i)?e.l():this.Ka(i)},be.Ka=function(i){try{if(i==this.g)e:{const ue=Qi(this.g);var e=this.g.Ea();const Ve=this.g.aa();if(!(3>ue)&&(3!=ue||Nn||this.g&&(this.h.h||this.g.fa()||Wo(this.g)))){this.I||4!=ue||7==e||tr(8==e||0>=Ve?3:2),Ho(this);var n=this.g.aa();this.Y=n;t:if(Zi(this)){var o=Wo(this.g);i="";var u=o.length,p=4==Qi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){io(this),ba(this);var I="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==n,function pt(i,e,n,o,u,p,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+p+" "+I})}(this.j,this.u,this.A,this.m,this.U,ue,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,$=this.g;if((N=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ke(N)){var q=N;break t}}q=null}if(!(n=q)){this.i=!1,this.o=3,Kr(12),io(this),ba(this);break e}Kt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ra(this,n)}this.P?(Cs(this,ue,I),Nn&&this.i&&3==ue&&(te(this.S,this.T,"tick",this.gb),this.T.start())):(Kt(this.j,this.m,I,null),ra(this,I)),4==ue&&io(this),this.i&&!this.I&&(4==ue?Ds(this.l,this):(this.i=!1,Po(this)))}else 400==n&&0<I.indexOf("Unknown SID")?(this.o=3,Kr(12)):(this.o=0,Kr(13)),io(this),ba(this)}}}catch{}},be.gb=function(){if(this.g){var i=Qi(this.g),e=this.g.fa();this.C<e.length&&(Ho(this),Cs(this,i,e),this.i&&4!=i&&Po(this))}},be.cancel=function(){this.I=!0,io(this)},be.fb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function In(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tr(3),Kr(17)),io(this),this.o=2,ba(this)):$a(this,this.V-i)};var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Xr){this.h=void 0!==e?e:i.h,Li(this,i.j),this.s=i.s,this.g=i.g,Ni(this,i.m),this.l=i.l,e=i.i;var n=new is;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ai(this,n),this.o=i.o}else i&&(n=String(i).match(ds))?(this.h=!!e,Li(this,n[1]||"",!0),this.s=Zs(n[2]||""),this.g=Zs(n[3]||"",!0),Ni(this,n[4]),this.l=Zs(n[5]||"",!0),Ai(this,n[6]||"",!0),this.o=Zs(n[7]||"")):(this.h=!!e,this.i=new is(null,this.h))}function Fi(i){return new Xr(i)}function Li(i,e,n){i.j=n?Zs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ni(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ai(i,e,n){e instanceof is?(i.i=e,function De(i,e){e&&!i.j&&(Gi(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(oo(this,o),Ta(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=qi(e,qs)),i.i=new is(e,i.h))}function Nr(i,e,n){i.i.set(e,n)}function Os(i){return Nr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Zs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function qi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,_o),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function _o(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Xr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(qi(e,ks,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(qi(e,ks,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(qi(n,"/"==n.charAt(0)?Si:ia,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",qi(n,xi)),i.join("")};var ks=/[#\/\?@]/g,ia=/[#\?:]/g,Si=/[#\?]/g,qs=/[#\?@]/g,xi=/#/g;function is(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Gi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Is(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var p=i[n].substring(0,o);u=i[n].substring(o+1)}else p=i[n];e(p,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function oo(i,e){Gi(i),e=Gr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ei(i,e){return Gi(i),e=Gr(i,e),i.g.has(e)}function Ta(i,e,n){oo(i,e),0<n.length&&(i.i=null,i.g.set(Gr(i,e),se(n)),i.h+=n.length)}function Gr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ge(i){this.l=i||lt,i=ie.PerformanceNavigationTiming?0<(i=ie.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ie.g&&ie.g.Ga&&ie.g.Ga()&&ie.g.Ga().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(be=is.prototype).add=function(i,e){Gi(this),this.i=null,i=Gr(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},be.forEach=function(i,e){Gi(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},be.oa=function(){Gi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let p=0;p<u.length;p++)n.push(e[o])}return n},be.W=function(i){Gi(this);let e=[];if("string"==typeof i)ei(this,i)&&(e=e.concat(this.g.get(Gr(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},be.set=function(i,e){return Gi(this),this.i=null,ei(this,i=Gr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},be.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},be.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const p=encodeURIComponent(String(o)),I=this.W(o);for(o=0;o<I.length;o++){var u=p;""!==I[o]&&(u+="="+encodeURIComponent(String(I[o]))),i.push(u)}}return this.i=i.join("&")};var lt=10;function xt(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Tt(i){return i.h?1:i.g?i.g.size:0}function ln(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function cn(i,e){i.g?i.g.add(e):i.h=e}function Tr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ln(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.D);return e}return se(i.i)}function Ar(){}function Yr(){this.g=new Ar}function _i(i,e,n){const o=n||"";try{rs(i,function(u,p){let I=u;st(u)&&(I=Bn(u)),e.push(o+p+"="+encodeURIComponent(I))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Hn(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function hs(i){this.l=i.$b||null,this.j=i.ib||!1}function Ks(i,e){wt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=No,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ge.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Ar.prototype.stringify=function(i){return ie.JSON.stringify(i,void 0)},Ar.prototype.parse=function(i){return ie.JSON.parse(i,void 0)},xe(hs,ke),hs.prototype.g=function(){return new Ks(this.l,this.j)},hs.prototype.i=function(i){return function(){return i}}({}),xe(Ks,wt);var No=0;function yo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ga.bind(i))}function fi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Mi(i)}function Mi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(be=Ks.prototype).open=function(i,e){if(this.readyState!=No)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Mi(this)},be.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ie).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fi(this)),this.readyState=No},be.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof ie.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yo(this)}else i.text().then(this.Ua.bind(this),this.ga.bind(this))},be.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?fi(this):Mi(this),3==this.readyState&&yo(this)}},be.Ua=function(i){this.g&&(this.response=this.responseText=i,fi(this))},be.Ta=function(i){this.g&&(this.response=i,fi(this))},be.ga=function(){this.g&&fi(this)},be.setRequestHeader=function(i,e){this.v.append(i,e)},be.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},be.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ui=ie.JSON.parse;function ni(i){wt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vt,this.K=this.L=!1}xe(ni,wt);var Vt="",Rr=/^https?$/i,Go=["POST","PUT"];function Vi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Fs(i),vs(i)}function Fs(i){i.D||(i.D=!0,Dt(i,"complete"),Dt(i,"error"))}function ao(i){if(i.h&&typeof tt<"u"&&(!i.C[1]||4!=Qi(i)||2!=i.aa()))if(i.v&&4==Qi(i))je(i.Ha,0,i);else if(Dt(i,"readystatechange"),4==Qi(i)){i.h=!1;try{const N=i.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===N){var u=String(i.H).match(ds)[1]||null;if(!u&&ie.self&&ie.self.location){var p=ie.self.location.protocol;u=p.substr(0,p.length-1)}o=!Rr.test(u?u.toLowerCase():"")}n=o}if(n)Dt(i,"complete"),Dt(i,"success");else{i.m=6;try{var I=2<Qi(i)?i.g.statusText:""}catch{I=""}i.j=I+" ["+i.aa()+"]",Fs(i)}}finally{vs(i)}}}function vs(i,e){if(i.g){hu(i);const n=i.g,o=i.C[0]?fe:null;i.g=null,i.C=null,e||Dt(i,"ready");try{n.onreadystatechange=o}catch{}}}function hu(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ie.clearTimeout(i.A),i.A=null)}function Qi(i){return i.g?i.g.readyState:0}function Wo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Vt:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(i){let e="";return ri(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function fu(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=sa(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Nr(i,e,n))}function ss(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Bi(i){this.Ca=0,this.i=[],this.j=new oe,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=ss("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=ss("baseRetryDelayMs",5e3,i),this.ab=ss("retryDelaySeedMs",1e4,i),this.Za=ss("forwardChannelMaxRetries",2,i),this.ta=ss("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Yb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Ge(i&&i.concurrentRequestLimit),this.Fa=new Yr,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=i&&i.Wb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ls(i){if(oa(i),3==i.G){var e=i.U++,n=Fi(i.F);Nr(n,"SID",i.I),Nr(n,"RID",e),Nr(n,"TYPE","terminate"),Ts(i,n),(e=new $r(i,i.j,e,void 0)).K=2,e.v=Os(Fi(n)),n=!1,ie.navigator&&ie.navigator.sendBeacon&&(n=ie.navigator.sendBeacon(e.v.toString(),"")),!n&&ie.Image&&((new Image).src=e.v,n=!0),n||(e.g=F(e.l,null),e.g.da(e.v)),e.F=Date.now(),Po(e)}zo(i)}function Us(i){i.g&&(Aa(i),i.g.cancel(),i.g=null)}function oa(i){Us(i),i.u&&(ie.clearTimeout(i.u),i.u=null),la(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ie.clearTimeout(i.m),i.m=null)}function bs(i){xt(i.h)||i.m||(i.m=!0,Ct(i.Ja,i),i.C=0)}function aa(i,e){var n;n=e?e.m:i.U++;const o=Fi(i.F);Nr(o,"SID",i.I),Nr(o,"RID",n),Nr(o,"AID",i.T),Ts(i,o),i.o&&i.s&&fu(o,i.o,i.s),n=new $r(i,i.j,n,i.C+1),null===i.o&&(n.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Yu(i,n,1e3),n.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),cn(i.h,n),Ns(n,o,e)}function Ts(i,e){i.ia&&ri(i.ia,function(n,o){Nr(e,o,n)}),i.l&&rs({},function(n,o){Nr(e,o,n)})}function Yu(i,e,n){n=Math.min(i.i.length,n);var o=i.l?Ht(i.l.Qa,i.l,i):null;e:{var u=i.i;let p=-1;for(;;){const I=["count="+n];-1==p?0<n?(p=u[0].h,I.push("ofs="+p)):p=0:I.push("ofs="+p);let N=!0;for(let $=0;$<n;$++){let q=u[$].h;const ue=u[$].g;if(q-=p,0>q)p=Math.max(0,u[$].h-100),N=!1;else try{_i(ue,I,"req"+q+"_")}catch{o&&o(ue)}}if(N){o=I.join("&");break e}}}return i=i.i.splice(0,n),e.D=i,o}function Da(i){i.g||i.u||(i.Z=1,Ct(i.Ia,i),i.A=0)}function ua(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=or(Ht(i.Ia,i),Fo(i,i.A)),i.A++,0))}function Aa(i){null!=i.B&&(ie.clearTimeout(i.B),i.B=null)}function Ha(i){i.g=new $r(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Fi(i.sa);Nr(e,"RID","rpc"),Nr(e,"SID",i.I),Nr(e,"CI",i.L?"0":"1"),Nr(e,"AID",i.T),Nr(e,"TYPE","xmlhttp"),Ts(i,e),i.o&&i.s&&fu(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var n=i.g;i=i.ka,n.K=1,n.v=Os(Fi(e)),n.s=null,n.P=!0,Yi(n,i)}function la(i){null!=i.v&&(ie.clearTimeout(i.v),i.v=null)}function Ds(i,e){var n=null;if(i.g==e){la(i),Aa(i),i.g=null;var o=2}else{if(!ln(i.h,e))return;n=e.D,Tr(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Dt(o=qr(),new rr(o,n,e,u)),bs(i)}else Da(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function ko(i,e){return!(Tt(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Ya?0:i.Za)||(i.m=or(Ht(i.Ja,i,e),Fo(i,i.C)),i.C++,0)))}(i,e)||2==o&&ua(i)))switch(n&&0<n.length&&(e=i.h,e.i=e.i.concat(n)),u){case 1:vo(i,5);break;case 4:vo(i,10);break;case 3:vo(i,6);break;default:vo(i,2)}}function Fo(i,e){let n=i.Wa+Math.floor(Math.random()*i.ab);return i.l||(n*=2),n*e}function vo(i,e){if(i.j.info("Error code "+e),2==e){var n=null;i.l&&(n=null);var o=Ht(i.jb,i);n||(n=new Xr("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||Li(n,"https"),Os(n)),function ii(i,e){const n=new oe;if(ie.Image){const o=new Image;o.onload=qt(Hn,n,o,"TestLoadImage: loaded",!0,e),o.onerror=qt(Hn,n,o,"TestLoadImage: error",!1,e),o.onabort=qt(Hn,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=qt(Hn,n,o,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Kr(2);i.G=0,i.l&&i.l.va(e),zo(i),oa(i)}function zo(i){if(i.G=0,i.la=[],i.l){const e=Ln(i.h);(0!=e.length||0!=i.i.length)&&(ze(i.la,e),ze(i.la,i.i),i.h.i.length=0,se(i.i),i.i.length=0),i.l.ua()}}function Sa(i,e,n){var o=n instanceof Xr?Fi(n):new Xr(n,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),Ni(o,o.m);else{var u=ie.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var p=new Xr(null,void 0);o&&Li(p,o),e&&(p.g=e),u&&Ni(p,u),n&&(p.l=n),o=p}return e=i.za,(n=i.D)&&e&&Nr(o,n,e),Nr(o,"VER",i.ma),Ts(i,o),o}function F(i,e,n){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ni(n&&i.Da&&!i.ra?new hs({ib:!0}):i.ra)).L=i.H,e}function z(){}function U(){if(nn&&!(10<=Number(Lr)))throw Error("Environmental error: no available transport.")}function Q(i,e){wt.call(this),this.g=new Bi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Xb)&&!Ke(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ke(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new At(this)}function Ne(i){un.call(this);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function It(){Mn.call(this),this.status=1}function At(i){this.g=i}(be=ni.prototype).da=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fn.g(),this.C=function rt(i){return i.h||(i.h=i.i())}(this.u?this.u:Fn),this.g.onreadystatechange=Ht(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void Vi(this,p)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())n.set(p,o.get(p))}o=Array.from(n.keys()).find(p=>"content-type"==p.toLowerCase()),u=ie.FormData&&i instanceof ie.FormData,!(0<=ee(Go,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,I]of n)this.g.setRequestHeader(p,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hu(this),0<this.B&&((this.K=function Oo(i){return nn&&function Mr(){return function xn(i){var e=lr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ye(String(ir)).split("."),n=Ye("9").split("."),o=Math.max(e.length,n.length);for(let I=0;0==i&&I<o;I++){var u=e[I]||"",p=n[I]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==u[0].length&&0==p[0].length)break;i=Mt(0==u[1].length?0:parseInt(u[1],10),0==p[1].length?0:parseInt(p[1],10))||Mt(0==u[2].length,0==p[2].length)||Mt(u[2],p[2]),u=u[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.qa,this)):this.A=je(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Vi(this,p)}},be.qa=function(){typeof tt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))},be.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Dt(this,"complete"),Dt(this,"abort"),vs(this))},be.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vs(this,!0)),ni.X.M.call(this)},be.Ha=function(){this.s||(this.F||this.v||this.l?ao(this):this.eb())},be.eb=function(){ao(this)},be.aa=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},be.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},be.Ra=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ui(e)}},be.Ea=function(){return this.m},be.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(be=Bi.prototype).ma=8,be.G=1,be.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new $r(this,this.j,i,void 0);let p=this.s;if(this.S&&(p?(p=vr(p),Ie(p,this.S)):p=this.S),null!==this.o||this.N||(u.H=p,p=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var o=this.i[n];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Yu(this,u,e),Nr(n=Fi(this.F),"RID",i),Nr(n,"CVER",22),this.D&&Nr(n,"X-HTTP-Session-Id",this.D),Ts(this,n),p&&(this.N?e="headers="+encodeURIComponent(String(sa(p)))+"&"+e:this.o&&fu(n,this.o,p)),cn(this.h,u),this.Xa&&Nr(n,"TYPE","init"),this.O?(Nr(n,"$req",e),Nr(n,"SID","null"),u.Z=!0,Ns(u,n,null)):Ns(u,n,e),this.G=2}}else 3==this.G&&(i?aa(this,i):0==this.i.length||xt(this.h)||aa(this))},be.Ia=function(){if(this.u=null,Ha(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=or(Ht(this.cb,this),i)}},be.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Kr(10),Us(this),Ha(this))},be.bb=function(){null!=this.v&&(this.v=null,Us(this),ua(this),Kr(19))},be.jb=function(i){i?(this.j.info("Successfully pinged google.com"),Kr(2)):(this.j.info("Failed to ping google.com"),Kr(1))},(be=z.prototype).xa=function(){},be.wa=function(){},be.va=function(){},be.ua=function(){},be.Qa=function(){},U.prototype.g=function(i,e){return new Q(i,e)},xe(Q,wt),Q.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,n=this.h||void 0;Kr(0),i.V=e,i.ia=n||{},i.L=i.Y,i.F=Sa(i,null,i.V),bs(i)},Q.prototype.close=function(){Ls(this.g)},Q.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Bn(i),i=n);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.$a++,i)),3==e.G&&bs(e)},Q.prototype.M=function(){this.g.l=null,delete this.j,Ls(this.g),delete this.g,Q.X.M.call(this)},xe(Ne,un),xe(It,Mn),xe(At,z),At.prototype.xa=function(){Dt(this.g,"a")},At.prototype.wa=function(i){Dt(this.g,new Ne(i))},At.prototype.va=function(i){Dt(this.g,new It(i))},At.prototype.ua=function(){Dt(this.g,"b")},U.prototype.createWebChannel=U.prototype.g,Q.prototype.send=Q.prototype.u,Q.prototype.open=Q.prototype.m,Q.prototype.close=Q.prototype.close,On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,We.COMPLETE="complete",Nt.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",wt.prototype.listen=wt.prototype.N,ni.prototype.listenOnce=ni.prototype.O,ni.prototype.getLastError=ni.prototype.Na,ni.prototype.getLastErrorCode=ni.prototype.Ea,ni.prototype.getStatus=ni.prototype.aa,ni.prototype.getResponseJson=ni.prototype.Ra,ni.prototype.getResponseText=ni.prototype.fa,ni.prototype.send=ni.prototype.da;var Rn=qe.createWebChannelTransport=function(){return new U},Qr=qe.getStatEventTarget=function(){return qr()},Ur=qe.ErrorCode=On,Wr=qe.EventType=We,Pr=qe.Event=pn,pi=qe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hr=qe.FetchXmlHttpFactory=hs,si=qe.WebChannel=Nt,uo=qe.XhrIo=ni;const Or="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let os="9.10.0";const Ri=new P.Yd("@firebase/firestore");function as(){return Ri.logLevel}function Eo(i){Ri.setLogLevel(i)}function Qt(i,...e){if(Ri.logLevel<=P.in.DEBUG){const n=e.map(pu);Ri.debug(`Firestore (${os}): ${i}`,...n)}}function yi(i,...e){if(Ri.logLevel<=P.in.ERROR){const n=e.map(pu);Ri.error(`Firestore (${os}): ${i}`,...n)}}function Es(i,...e){if(Ri.logLevel<=P.in.WARN){const n=e.map(pu);Ri.warn(`Firestore (${os}): ${i}`,...n)}}function pu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Sn(i="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+i;throw yi(e),new Error(e)}function ar(i,e){i||Sn()}function bl(i,e){i||Sn()}function hn(i,e){return i}const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends de.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Pu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zr.UNAUTHENTICATED))}shutdown(){}}class ca{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zl{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const p=q=>this.i!==u?(u=this.i,n(q)):Promise.resolve();let I=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new ji,e.enqueueRetryable(()=>p(this.currentUser))};const N=()=>{const q=I;e.enqueueRetryable((0,C.Z)(function*(){yield q.promise,yield p(o.currentUser)}))},$=q=>{Qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(q=>$(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?$(q):(Qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new ji)}},0),N()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ar("string"==typeof o.accessToken),new Pu(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ar(null===e||"string"==typeof e),new zr(e)}}class Zo{constructor(e,n,o,u){this.h=e,this.l=n,this.m=o,this.g=u,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ar(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Qu{constructor(e,n,o,u){this.h=e,this.l=n,this.m=o,this.g=u}getToken(){return Promise.resolve(new Zo(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ga{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const o=p=>{null!=p.error&&Qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const I=p.token!==this.A;return this.A=p.token,Qt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?n(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const u=p=>{Qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>u(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?u(p):Qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ar("string"==typeof n.token),this.A=n.token,new Vs(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Er(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class xa{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Er(40);for(let p=0;p<u.length;++p)o.length<20&&u[p]<n&&(o+=e.charAt(u[p]%e.length))}return o}}function Vn(i,e){return i<e?-1:i>e?1:0}function wo(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function qo(i){return i+"\0"}class li{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Jt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Jt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Jt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return li.fromMillis(Date.now())}static fromDate(e){return li.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new li(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sr(e)}static min(){return new sr(new li(0,0))}static max(){return new sr(new li(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ys{constructor(e,n,o){void 0===n?n=0:n>e.length&&Sn(),void 0===o?o=e.length-n:o>e.length-n&&Sn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Ys.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const p=e.get(u),I=n.get(u);if(p<I)return-1;if(p>I)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Vr extends Ys{construct(e,n,o){return new Vr(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Jt(St.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Vr(n)}static emptyPath(){return new Vr([])}}const da=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Ys{construct(e,n,o){return new Ii(e,n,o)}static isValidIdentifier(e){return da.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const p=()=>{if(0===o.length)throw new Jt(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let I=!1;for(;u<e.length;){const N=e[u];if("\\"===N){if(u+1===e.length)throw new Jt(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $=e[u+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new Jt(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=$,u+=2}else"`"===N?(I=!I,u++):"."!==N||I?(o+=N,u++):(p(),u++)}if(p(),I)throw new Jt(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(n)}static emptyPath(){return new Ii([])}}class on{constructor(e){this.path=e}static fromPath(e){return new on(Vr.fromString(e))}static fromName(e){return new on(Vr.fromString(e).popFirst(5))}static empty(){return new on(Vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Vr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new on(new Vr(e.slice()))}}class Co{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Wa(i){return i.fields.find(e=>2===e.kind)}function ha(i){return i.fields.filter(e=>2!==e.kind)}Co.UNKNOWN_ID=-1;class Ko{constructor(e,n){this.fieldPath=e,this.kind=n}}class fa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fa(0,Bs.min())}}function za(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=sr.fromTimestamp(1e9===o?new li(n+1,0):new li(n,o));return new Bs(u,on.empty(),e)}function pa(i){return new Bs(i.readTime,i.key,-1)}class Bs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Bs(sr.min(),on.empty(),-1)}static max(){return new Bs(sr.max(),on.empty(),-1)}}function Ji(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=on.comparator(i.documentKey,e.documentKey),0!==n?n:Vn(i.largestBatchId,e.largestBatchId))}const mu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Io(i){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,C.Z)(function*(i){if(i.code!==St.FAILED_PRECONDITION||i.message!==mu)throw i;Qt("LocalStore","Unexpectedly lost primary lease")}),Ra.apply(this,arguments)}class yt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new yt((o,u)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,u)},this.catchCallback=p=>{this.wrapFailure(n,p).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof yt?n:yt.resolve(n)}catch(n){return yt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):yt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):yt.reject(n)}static resolve(e){return new yt((n,o)=>{n(e)})}static reject(e){return new yt((n,o)=>{o(e)})}static waitFor(e){return new yt((n,o)=>{let u=0,p=0,I=!1;e.forEach(N=>{++u,N.next(()=>{++p,I&&p===u&&n()},$=>o($))}),I=!0,p===u&&n()})}static or(e){let n=yt.resolve(!1);for(const o of e)n=n.next(u=>u?yt.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,p)=>{o.push(n.call(this,u,p))}),this.waitFor(o)}static mapArray(e,n){return new yt((o,u)=>{const p=e.length,I=new Array(p);let N=0;for(let $=0;$<p;$++){const q=$;n(e[q]).next(ue=>{I[q]=ue,++N,N===p&&o(I)},ue=>u(ue))}})}static doWhile(e,n){return new yt((o,u)=>{const p=()=>{!0===e()?n().next(()=>{p()},u):o()};p()})}}class ga{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new ji,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new Za(e,n.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=pc(o.target.error);this.P.reject(new Za(e,u))}}static open(e,n,o,u){try{return new ga(n,e.transaction(u,o))}catch(p){throw new Za(n,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Ou(n)}}class fs{constructor(e,n,o){this.name=e,this.version=n,this.S=o,12.2===fs.D((0,de.z$)())&&yi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qt("SimpleDb","Removing database:",e),ma(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,de.hl)())return!1;if(fs.N())return!0;const e=(0,de.z$)(),n=fs.D(e),o=0<n&&n<10,u=fs.k(e),p=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var n=this;return(0,C.Z)(function*(){return n.db||(Qt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const p=indexedDB.open(n.name,n.version);p.onsuccess=I=>{o(I.target.result)},p.onblocked=()=>{u(new Za(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=I=>{const N=I.target.error;u("VersionError"===N.name?new Jt(St.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new Jt(St.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new Za(e,N))},p.onupgradeneeded=I=>{Qt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',I.oldVersion),n.S.$(I.target.result,p.transaction,I.oldVersion,n.version).next(()=>{Qt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var p=this;return(0,C.Z)(function*(){const I="readonly"===n;let N=0;for(;;){++N;try{p.db=yield p.F(e);const $=ga.open(p.db,e,I?"readonly":"readwrite",o),q=u($).next(ue=>($.V(),ue)).catch(ue=>($.abort(ue),yt.reject(ue))).toPromise();return q.catch(()=>{}),yield $.v,q}catch($){const q=$,ue="FirebaseError"!==q.name&&N<3;if(Qt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ue),p.close(),!ue)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ql{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ma(this.U.delete())}}class Za extends Jt{constructor(e,n){super(St.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qs(i){return"IndexedDbTransactionError"===i.name}class Ou{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Qt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ma(o)}add(e){return Qt("SimpleDb","ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(n=>(void 0===n&&(n=null),Qt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Qt("SimpleDb","DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return Qt("SimpleDb","COUNT",this.store.name),ma(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),p=[];return this.H(u,(I,N)=>{p.push(N)}).next(()=>p)}{const u=this.store.getAll(o.range);return new yt((p,I)=>{u.onerror=N=>{I(N.target.error)},u.onsuccess=N=>{p(N.target.result)}})}}J(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new yt((u,p)=>{o.onerror=I=>{p(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}Y(e,n){Qt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.X=!1;const u=this.cursor(o);return this.H(u,(p,I,N)=>N.delete())}Z(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.H(u,n)}tt(e){const n=this.cursor({});return new yt((o,u)=>{n.onerror=p=>{const I=pc(p.target.error);u(I)},n.onsuccess=p=>{const I=p.target.result;I?e(I.primaryKey,I.value).next(N=>{N?I.continue():o()}):o()}})}H(e,n){const o=[];return new yt((u,p)=>{e.onerror=I=>{p(I.target.error)},e.onsuccess=I=>{const N=I.target.result;if(!N)return void u();const $=new ql(N),q=n(N.primaryKey,N.value,$);if(q instanceof yt){const ue=q.catch(Ve=>($.done(),yt.reject(Ve)));o.push(ue)}$.isDone?u():null===$.G?N.continue():N.continue($.G)}}).next(()=>yt.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ma(i){return new yt((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=pc(o.target.error);n(u)}})}let oi=!1;function pc(i){const e=fs.D((0,de.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oi||(oi=!0,setTimeout(()=>{throw o},0)),o}}return i}class Ju{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;Qt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,C.Z)(function*(){n.task=null;try{Qt("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(o){Qs(o)?Qt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Io(o)}yield n.nt(6e4)}))}}class Pa{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,C.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.it(o,e))})()}it(e,n){const o=new Set;let u=n,p=!0;return yt.doWhile(()=>!0===p&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return Qt("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,u).next(N=>{u-=N,o.add(I)});p=!1})).next(()=>n-u)}rt(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(p=>{const I=p.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(u,p)).next(N=>(Qt("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,n,N))).next(()=>I.size)}))}ot(e,n){let o=e;return n.changes.forEach((u,p)=>{const I=pa(p);Ji(I,o)>0&&(o=I)}),new Bs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}class As{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>n.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Wc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function qa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Kl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}As.at=-1;class ai{constructor(e,n){this.comparator=e,this.root=n||Ss.EMPTY}insert(e,n){return new ai(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new ai(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=n?o(e.key,n):1,n&&u&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,n,o,u,p){this.key=e,this.value=n,this.color=o??Ss.RED,this.left=u??Ss.EMPTY,this.right=p??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,p){return new Ss(e??this.key,n??this.value,o??this.color,u??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const p=o(e,u.key);return u=p<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===p?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Ss.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Sn();const e=this.left.check();if(e!==this.right.check())throw Sn();return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1,Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Sn()}get value(){throw Sn()}get color(){throw Sn()}get left(){throw Sn()}get right(){throw Sn()}copy(i,e,n,o,u){return this}insert(i,e,n){return new Ss(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _r{constructor(e){this.comparator=e,this.data=new ai(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Na(this.data.getIterator())}getIteratorFrom(e){return new Na(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(0!==this.comparator(u,p))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _r(this.comparator);return n.data=e,n}}class Na{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ws(i){return i.hasNext()?i.getNext():void 0}class Js{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new Js([])}unionWith(e){let n=new _r(Ii.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Js(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(n,o)=>n.isEqual(o))}}function ku(){return typeof atob<"u"}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Br(n)}static fromUint8Array(e){const n=function(o){let u="";for(let p=0;p<o.length;++p)u+=String.fromCharCode(o[p]);return u}(e);return new Br(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const lo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(i){if(ar(!!i),"string"==typeof i){let e=0;const n=lo.exec(i);if(ar(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:gi(i.seconds),nanos:gi(i.nanos)}}function gi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function co(i){return"string"==typeof i?Br.fromBase64String(i):Br.fromUint8Array(i)}function el(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fu(i){const e=i.mapValue.fields.__previous_value__;return el(e)?Fu(e):e}function Ka(i){const e=Xs(i.mapValue.fields.__local_write_time__.timestampValue);return new li(e.seconds,e.nanos)}class _u{constructor(e,n,o,u,p,I,N,$){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=p,this.forceLongPolling=I,this.autoDetectLongPolling=N,this.useFetchStreams=$}}class xs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}function ho(i){return null==i}function mi(i){return 0===i&&1/i==-1/0}function yu(i){return"number"==typeof i&&Number.isInteger(i)&&!mi(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const D={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},A={nullValue:"NULL_VALUE"};function T(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?el(i)?4:js(i)?9007199254740991:10:Sn()}function k(i,e){if(i===e)return!0;const n=T(i);if(n!==T(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ka(i).isEqual(Ka(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const p=Xs(o.timestampValue),I=Xs(u.timestampValue);return p.seconds===I.seconds&&p.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,co(i.bytesValue).isEqual(co(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return gi(o.geoPointValue.latitude)===gi(u.geoPointValue.latitude)&&gi(o.geoPointValue.longitude)===gi(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return gi(o.integerValue)===gi(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const p=gi(o.doubleValue),I=gi(u.doubleValue);return p===I?mi(p)===mi(I):isNaN(p)&&isNaN(I)}return!1}(i,e);case 9:return wo(i.arrayValue.values||[],e.arrayValue.values||[],k);case 10:return function(o,u){const p=o.mapValue.fields||{},I=u.mapValue.fields||{};if(Wc(p)!==Wc(I))return!1;for(const N in p)if(p.hasOwnProperty(N)&&(void 0===I[N]||!k(p[N],I[N])))return!1;return!0}(i,e);default:return Sn()}var u}function B(i,e){return void 0!==(i.values||[]).find(n=>k(n,e))}function Y(i,e){if(i===e)return 0;const n=T(i),o=T(e);if(n!==o)return Vn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vn(i.booleanValue,e.booleanValue);case 2:return function(u,p){const I=gi(u.integerValue||u.doubleValue),N=gi(p.integerValue||p.doubleValue);return I<N?-1:I>N?1:I===N?0:isNaN(I)?isNaN(N)?0:-1:1}(i,e);case 3:return ye(i.timestampValue,e.timestampValue);case 4:return ye(Ka(i),Ka(e));case 5:return Vn(i.stringValue,e.stringValue);case 6:return function(u,p){const I=co(u),N=co(p);return I.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(u,p){const I=u.split("/"),N=p.split("/");for(let $=0;$<I.length&&$<N.length;$++){const q=Vn(I[$],N[$]);if(0!==q)return q}return Vn(I.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,p){const I=Vn(gi(u.latitude),gi(p.latitude));return 0!==I?I:Vn(gi(u.longitude),gi(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,p){const I=u.values||[],N=p.values||[];for(let $=0;$<I.length&&$<N.length;++$){const q=Y(I[$],N[$]);if(q)return q}return Vn(I.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,p){if(u===D.mapValue&&p===D.mapValue)return 0;if(u===D.mapValue)return 1;if(p===D.mapValue)return-1;const I=u.fields||{},N=Object.keys(I),$=p.fields||{},q=Object.keys($);N.sort(),q.sort();for(let ue=0;ue<N.length&&ue<q.length;++ue){const Ve=Vn(N[ue],q[ue]);if(0!==Ve)return Ve;const vt=Y(I[N[ue]],$[q[ue]]);if(0!==vt)return vt}return Vn(N.length,q.length)}(i.mapValue,e.mapValue);default:throw Sn()}}function ye(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Vn(i,e);const n=Xs(i),o=Xs(e),u=Vn(n.seconds,o.seconds);return 0!==u?u:Vn(n.nanos,o.nanos)}function Me(i){return bt(i)}function bt(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Xs(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?co(i.bytesValue).toBase64():"referenceValue"in i?on.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",p=!0;for(const I of o.values||[])p?p=!1:u+=",",u+=bt(I);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let p="{",I=!0;for(const N of u)I?I=!1:p+=",",p+=`${N}:${bt(o.fields[N])}`;return p+"}"}(i.mapValue):Sn();var e}function tn(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function cr(i){return!!i&&"integerValue"in i}function _n(i){return!!i&&"arrayValue"in i}function kr(i){return!!i&&"nullValue"in i}function Xi(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function es(i){return!!i&&"mapValue"in i}function Ms(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return qa(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ms(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ms(i.arrayValue.values[n]);return e}return Object.assign({},i)}function js(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ya(i){return"nullValue"in i?A:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?tn(xs.empty(),on.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Sn()}function Oa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?tn(xs.empty(),on.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?D:Sn()}function Yo(i,e){const n=Y(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Qa(i,e){const n=Y(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!es(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ms(n)}setAll(e){let n=Ii.emptyPath(),o={},u=[];e.forEach((I,N)=>{if(!n.isImmediateParentOf(N)){const $=this.getFieldsMap(n);this.applyChanges($,o,u),o={},u=[],n=N.popLast()}I?o[N.lastSegment()]=Ms(I):u.push(N.lastSegment())});const p=this.getFieldsMap(n);this.applyChanges(p,o,u)}delete(e){const n=this.field(e.popLast());es(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return k(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];es(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){qa(n,(u,p)=>e[u]=p);for(const u of o)delete e[u]}clone(){return new us(Ms(this.value))}}function Oi(i){const e=[];return qa(i.fields,(n,o)=>{const u=new Ii([n]);if(es(o)){const p=Oi(o.mapValue).fields;if(0===p.length)e.push(u);else for(const I of p)e.push(u.child(I))}else e.push(u)}),new Js(e)}class ci{constructor(e,n,o,u,p,I){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.data=p,this.documentState=I}static newInvalidDocument(e){return new ci(e,0,sr.min(),sr.min(),us.empty(),0)}static newFoundDocument(e,n,o){return new ci(e,1,n,sr.min(),o,0)}static newNoDocument(e,n){return new ci(e,2,n,sr.min(),us.empty(),0)}static newUnknownDocument(e,n){return new ci(e,3,n,sr.min(),us.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dl{constructor(e,n=null,o=[],u=[],p=null,I=null,N=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=p,this.startAt=I,this.endAt=N,this.ht=null}}function Al(i,e=null,n=[],o=[],u=null,p=null,I=null){return new Dl(i,e,n,o,u,p,I)}function bo(i){const e=hn(i);if(null===e.ht){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Me(u.value);var u}).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ho(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Me(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Me(o)).join(",")),e.ht=n}return e.ht}function vu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!zc(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((n=i.filters[u]).op!==(o=e.filters[u]).op||!n.field.isEqual(o.field)||!k(n.value,o.value))return!1;var n,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nl(i.startAt,e.startAt)&&nl(i.endAt,e.endAt)}function Ja(i){return on.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Eu(i,e){return i.filters.filter(n=>n instanceof bi&&n.field.isEqual(e))}function _a(i,e,n){let o=A,u=!0;for(const p of Eu(i,e)){let I=A,N=!0;switch(p.op){case"<":case"<=":I=Ya(p.value);break;case"==":case"in":case">=":I=p.value;break;case">":I=p.value,N=!1;break;case"!=":case"not-in":I=A}Yo({value:o,inclusive:u},{value:I,inclusive:N})<0&&(o=I,u=N)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];Yo({value:o,inclusive:u},{value:I,inclusive:n.inclusive})<0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}function ya(i,e,n){let o=D,u=!0;for(const p of Eu(i,e)){let I=D,N=!0;switch(p.op){case">=":case">":I=Oa(p.value),N=!1;break;case"==":case"in":case"<=":I=p.value;break;case"<":I=p.value,N=!1;break;case"!=":case"not-in":I=D}Qa({value:o,inclusive:u},{value:I,inclusive:N})>0&&(o=I,u=N)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];Qa({value:o,inclusive:u},{value:I,inclusive:n.inclusive})>0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}class bi extends class{}{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.lt(e,n,o):new Sl(e,n,o):"array-contains"===n?new Yl(e,o):"in"===n?new Lu(e,o):"not-in"===n?new Ql(e,o):"array-contains-any"===n?new Cu(e,o):new bi(e,n,o)}static lt(e,n,o){return"in"===n?new xl(e,o):new wu(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.ft(Y(n,this.value)):null!==n&&T(this.value)===T(n)&&this.ft(Y(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Sn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Sl extends bi{constructor(e,n,o){super(e,n,o),this.key=on.fromName(o.referenceValue)}matches(e){const n=on.comparator(e.key,this.key);return this.ft(n)}}class xl extends bi{constructor(e,n){super(e,"in",n),this.keys=ka(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wu extends bi{constructor(e,n){super(e,"not-in",n),this.keys=ka(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ka(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>on.fromName(o.referenceValue))}class Yl extends bi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _n(n)&&B(n.arrayValue,this.value)}}class Lu extends bi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&B(this.value.arrayValue,n)}}class Ql extends bi{constructor(e,n){super(e,"not-in",n)}matches(e){if(B(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!B(this.value.arrayValue,n)}}class Cu extends bi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_n(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>B(this.value.arrayValue,o))}}class fo{constructor(e,n){this.position=e,this.inclusive=n}}class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function zc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function tl(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const p=e[u],I=i.position[u];if(o=p.field.isKeyField()?on.comparator(on.fromName(I.referenceValue),n.key):Y(I,n.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function nl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!k(i.position[n],e.position[n]))return!1;return!0}class Iu{constructor(e,n=null,o=[],u=[],p=null,I="F",N=null,$=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=p,this.limitType=I,this.startAt=N,this.endAt=$,this._t=null,this.wt=null}}function rl(i,e,n,o,u,p,I,N){return new Iu(i,e,n,o,u,p,I,N)}function $s(i){return new Iu(i)}function Xa(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function va(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function il(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Ml(i){return null!==i.collectionGroup}function To(i){const e=hn(i);if(null===e._t){e._t=[];const n=il(e),o=va(e);if(null!==n&&null===o)n.isKeyField()||e._t.push(new Uu(n)),e._t.push(new Uu(Ii.keyField(),"asc"));else{let u=!1;for(const p of e.explicitOrderBy)e._t.push(p),p.field.isKeyField()&&(u=!0);if(!u){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Uu(Ii.keyField(),p))}}}return e._t}function eo(i){const e=hn(i);if(!e.wt)if("F"===e.limitType)e.wt=Al(e.path,e.collectionGroup,To(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const p of To(e))n.push(new Uu(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new fo(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new fo(e.startAt.position,e.startAt.inclusive):null;e.wt=Al(e.path,e.collectionGroup,n,e.filters,e.limit,o,u)}return e.wt}function sl(i,e,n){return new Iu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Do(i,e){return vu(eo(i),eo(e))&&i.limitType===e.limitType}function ol(i){return`${bo(eo(i))}|lt:${i.limitType}`}function Jl(i){return`Query(target=${function gc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(n=>{return`${(o=n).field.canonicalString()} ${o.op} ${Me(o.value)}`;var o}).join(", ")}]`),ho(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(n=>{return`${(o=n).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(n=>Me(n)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(n=>Me(n)).join(",")),`Target(${e})`}(eo(i))}; limitType=${i.limitType})`}function Fa(i,e){return e.isFoundDocument()&&function(n,o){const u=o.key.path;return null!==n.collectionGroup?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):on.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)}(i,e)&&function(n,o){for(const u of n.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(n,o){for(const u of n.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((n=i).startAt&&!function(u,p,I){const N=tl(u,p,I);return u.inclusive?N<=0:N<0}(n.startAt,To(n),o)||n.endAt&&!function(u,p,I){const N=tl(u,p,I);return u.inclusive?N>=0:N>0}(n.endAt,To(n),o)));var n,o}function al(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function to(i){return(e,n)=>{let o=!1;for(const u of To(i)){const p=bu(u,e,n);if(0!==p)return p;o=o||u.field.isKeyField()}return 0}}function bu(i,e,n){const o=i.field.isKeyField()?on.comparator(e.key,n.key):function(u,p,I){const N=p.data.field(u),$=I.data.field(u);return null!==N&&null!==$?Y(N,$):Sn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Sn()}}function Zc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mi(e)?"-0":e}}function mc(i){return{integerValue:""+i}}function Xl(i,e){return yu(e)?mc(e):Zc(i,e)}class eu{constructor(){this._=void 0}}function ec(i,e,n){return i instanceof Lo?function(o,u){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(p.fields.__previous_value__=u),{mapValue:p}}(n,e):i instanceof Qo?Rl(i,e):i instanceof La?Vu(i,e):function(o,u){const p=vi(o,u),I=ju(p)+ju(o.yt);return cr(p)&&cr(o.yt)?mc(I):Zc(o.It,I)}(i,e)}function tc(i,e,n){return i instanceof Qo?Rl(i,e):i instanceof La?Vu(i,e):n}function vi(i,e){return i instanceof Bu?cr(n=e)||(o=n)&&"doubleValue"in o?e:{integerValue:0}:null;var o,n}class Lo extends eu{}class Qo extends eu{constructor(e){super(),this.elements=e}}function Rl(i,e){const n=Ua(e);for(const o of i.elements)n.some(u=>k(u,o))||n.push(o);return{arrayValue:{values:n}}}class La extends eu{constructor(e){super(),this.elements=e}}function Vu(i,e){let n=Ua(e);for(const o of i.elements)n=n.filter(u=>!k(u,o));return{arrayValue:{values:n}}}class Bu extends eu{constructor(e,n){super(),this.It=e,this.yt=n}}function ju(i){return gi(i.integerValue||i.doubleValue)}function Ua(i){return _n(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Jo{constructor(e,n){this.field=e,this.transform=n}}class qc{constructor(e,n){this.version=e,this.transformResults=n}}class Wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class nc{}function x(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new wr(i.key,Wi.none()):new ae(i.key,i.data,Wi.none());{const n=i.data,o=us.empty();let u=new _r(Ii.comparator);for(let p of e.fields)if(!u.has(p)){let I=n.field(p);null===I&&p.length>1&&(p=p.popLast(),I=n.field(p)),null===I?o.delete(p):o.set(p,I),u=u.add(p)}return new Xe(i.key,o,new Js(u.toArray()),Wi.none())}}function _(i,e,n){i instanceof ae?function(o,u,p){const I=o.value.clone(),N=yn(o.fieldTransforms,u,p.transformResults);I.setAll(N),u.convertToFoundDocument(p.version,I).setHasCommittedMutations()}(i,e,n):i instanceof Xe?function(o,u,p){if(!Pl(o.precondition,u))return void u.convertToUnknownDocument(p.version);const I=yn(o.fieldTransforms,u,p.transformResults),N=u.data;N.setAll(Lt(o)),N.setAll(I),u.convertToFoundDocument(p.version,N).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function w(i,e,n,o){return i instanceof ae?function(u,p,I,N){if(!Pl(u.precondition,p))return I;const $=u.value.clone(),q=Un(u.fieldTransforms,N,p);return $.setAll(q),p.convertToFoundDocument(p.version,$).setHasLocalMutations(),null}(i,e,n,o):i instanceof Xe?function(u,p,I,N){if(!Pl(u.precondition,p))return I;const $=Un(u.fieldTransforms,N,p),q=p.data;return q.setAll(Lt(u)),q.setAll($),p.convertToFoundDocument(p.version,q).setHasLocalMutations(),null===I?null:I.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ue=>ue.field))}(i,e,n,o):(I=n,Pl(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):I);var p,I}function O(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),p=vi(o.transform,u||null);null!=p&&(null===n&&(n=us.empty()),n.set(o.field,p))}return n||null}function K(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===o||n&&o&&wo(n,o,(u,p)=>function _c(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(n=i.transform)instanceof Qo&&o instanceof Qo||n instanceof La&&o instanceof La?wo(n.elements,o.elements,k):n instanceof Bu&&o instanceof Bu?k(n.yt,o.yt):n instanceof Lo&&o instanceof Lo);var n,o}(u,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,o}class ae extends nc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Xe extends nc{constructor(e,n,o,u,p=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Lt(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function yn(i,e,n){const o=new Map;ar(i.length===n.length);for(let u=0;u<n.length;u++){const p=i[u],I=p.transform,N=e.data.field(p.field);o.set(p.field,tc(I,N,n[u]))}return o}function Un(i,e,n){const o=new Map;for(const u of i){const p=u.transform,I=n.data.field(u.field);o.set(u.field,ec(p,I,e))}return o}class wr extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ei extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uo{constructor(e){this.count=e}}var di,jr;function $u(i){switch(i){default:return Sn();case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0}}function Ea(i){if(void 0===i)return yi("GRPC error has no .code"),St.UNKNOWN;switch(i){case di.OK:return St.OK;case di.CANCELLED:return St.CANCELLED;case di.UNKNOWN:return St.UNKNOWN;case di.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case di.INTERNAL:return St.INTERNAL;case di.UNAVAILABLE:return St.UNAVAILABLE;case di.UNAUTHENTICATED:return St.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case di.NOT_FOUND:return St.NOT_FOUND;case di.ALREADY_EXISTS:return St.ALREADY_EXISTS;case di.PERMISSION_DENIED:return St.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case di.ABORTED:return St.ABORTED;case di.OUT_OF_RANGE:return St.OUT_OF_RANGE;case di.UNIMPLEMENTED:return St.UNIMPLEMENTED;case di.DATA_LOSS:return St.DATA_LOSS;default:return Sn()}}(jr=di||(di={}))[jr.OK=0]="OK",jr[jr.CANCELLED=1]="CANCELLED",jr[jr.UNKNOWN=2]="UNKNOWN",jr[jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jr[jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jr[jr.NOT_FOUND=5]="NOT_FOUND",jr[jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",jr[jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",jr[jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",jr[jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jr[jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jr[jr.ABORTED=10]="ABORTED",jr[jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",jr[jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",jr[jr.INTERNAL=13]="INTERNAL",jr[jr.UNAVAILABLE=14]="UNAVAILABLE",jr[jr.DATA_LOSS=15]="DATA_LOSS";class ps{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,p]of o)if(this.equalsFn(u,e))return p}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return void(u[p]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(n,o)=>{for(const[u,p]of o)e(u,p)})}isEmpty(){return Kl(this.inner)}size(){return this.innerSize}}const ul=new ai(on.comparator);function $i(){return ul}const yc=new ai(on.comparator);function Xo(...i){let e=yc;for(const n of i)e=e.insert(n.key,n);return e}function ll(i){let e=yc;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Ao(){return gs()}function vc(){return gs()}function gs(){return new ps(i=>i.toString(),(i,e)=>i.isEqual(e))}const cl=new ai(on.comparator),Va=new _r(on.comparator);function Sr(...i){let e=Va;for(const n of i)e=e.add(n);return e}const ea=new _r(Vn);function tu(){return ea}class ui{constructor(e,n,o,u,p){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,n){const o=new Map;return o.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n)),new ui(sr.min(),o,tu(),$i(),Sr())}}class Nl{constructor(e,n,o,u,p){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Nl(Br.EMPTY_BYTE_STRING,n,Sr(),Sr(),Sr())}}class nu{constructor(e,n,o,u){this.Tt=e,this.removedTargetIds=n,this.key=o,this.Et=u}}class Ec{constructor(e,n){this.targetId=e,this.At=n}}class yd{constructor(e,n,o=Br.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class vd{constructor(){this.Rt=0,this.bt=eh(),this.Pt=Br.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Sr(),n=Sr(),o=Sr();return this.bt.forEach((u,p)=>{switch(p){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Sn()}}),new Nl(this.Pt,this.vt,e,n,o)}Nt(){this.Vt=!1,this.bt=eh()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Kc{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$i(),this.qt=Xd(),this.Kt=new _r(Vn)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const o=this.zt(n);switch(e.state){case 0:this.Ht(n)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),o.Ct(e.resumeToken));break;default:Sn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((o,u)=>{this.Ht(u)&&n(u)})}Yt(e){const n=e.targetId,o=e.At.count,u=this.Xt(n);if(u){const p=u.target;if(Ja(p))if(0===o){const I=new on(p.path);this.jt(n,I,ci.newNoDocument(I,sr.min()))}else ar(1===o);else this.Zt(n)!==o&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((p,I)=>{const N=this.Xt(I);if(N){if(p.current&&Ja(N.target)){const $=new on(N.target.path);null!==this.Ut.get($)||this.ee(I,$)||this.jt(I,$,ci.newNoDocument($,e))}p.Dt&&(n.set(I,p.xt()),p.Nt())}});let o=Sr();this.qt.forEach((p,I)=>{let N=!0;I.forEachWhile($=>{const q=this.Xt($);return!q||2===q.purpose||(N=!1,!1)}),N&&(o=o.add(p))}),this.Ut.forEach((p,I)=>I.setReadTime(e));const u=new ui(e,n,this.Kt,this.Ut,o);return this.Ut=$i(),this.qt=Xd(),this.Kt=new _r(Vn),u}Qt(e,n){if(!this.Ht(e))return;const o=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,o),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,n)?u.kt(n,1):u.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),o&&(this.Ut=this.Ut.insert(n,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new vd,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new _r(Vn),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=null!==this.Xt(e);return n||Qt("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new vd),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function Xd(){return new ai(on.comparator)}function eh(){return new ai(on.comparator)}const Hh={asc:"ASCENDING",desc:"DESCENDING"},dl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ol{constructor(e,n){this.databaseId=e,this.gt=n}}function wa(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hu(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Yc(i,e){return wa(i,e.toTimestamp())}function Hs(i){return ar(!!i),sr.fromTimestamp(function(e){const n=Xs(e);return new li(n.seconds,n.nanos)}(i))}function no(i,e){return(n=i,new Vr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function wc(i){const e=Vr.fromString(i);return ar(wd(e)),e}function rc(i,e){return no(i.databaseId,e.path)}function Vo(i,e){const n=wc(e);if(n.get(1)!==i.databaseId.projectId)throw new Jt(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Jt(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new on(Ic(n))}function Cc(i,e){return no(i.databaseId,e)}function Ed(i){const e=wc(i);return 4===e.length?Vr.emptyPath():Ic(e)}function ic(i){return new Vr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ic(i){return ar(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function bc(i,e,n){return{name:rc(i,e),fields:n.value.mapValue.fields}}function sc(i,e,n){const o=Vo(i,e.name),u=Hs(e.updateTime),p=new us({mapValue:{fields:e.fields}}),I=ci.newFoundDocument(o,u,p);return n&&I.setHasCommittedMutations(),n?I.setHasCommittedMutations():I}function kl(i,e){let n;if(e instanceof ae)n={update:bc(i,e.key,e.value)};else if(e instanceof wr)n={delete:rc(i,e.key)};else if(e instanceof Xe)n={update:bc(i,e.key,e.data),updateMask:Wh(e.fieldMask)};else{if(!(e instanceof Ei))return Sn();n={verify:rc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(u,p){const I=p.transform;if(I instanceof Lo)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Qo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof La)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Bu)return{fieldPath:p.field.canonicalString(),increment:I.yt};throw Sn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Yc(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Sn()),n;var u}function So(i,e){const n=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Wi.updateTime(Hs(u.updateTime)):void 0!==u.exists?Wi.exists(u.exists):Wi.none():Wi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(p,I){let N=null;"setToServerValue"in I?(ar("REQUEST_TIME"===I.setToServerValue),N=new Lo):"appendMissingElements"in I?N=new Qo(I.appendMissingElements.values||[]):"removeAllFromArray"in I?N=new La(I.removeAllFromArray.values||[]):"increment"in I?N=new Bu(p,I.increment):Sn();const $=Ii.fromServerFormat(I.fieldPath);return new Jo($,N)}(i,u)):[];var u;if(e.update){const u=Vo(i,e.update.name),p=new us({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Js((e.updateMask.fieldPaths||[]).map(q=>Ii.fromServerFormat(q)));return new Xe(u,p,I,n,o)}return new ae(u,p,n,o)}if(e.delete){const u=Vo(i,e.delete);return new wr(u,n)}if(e.verify){const u=Vo(i,e.verify);return new Ei(u,n)}return Sn()}function fl(i,e){return{documents:[Cc(i,e.path)]}}function Tc(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Cc(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cc(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function($){if(0===$.length)return;const q=$.map(ue=>function(Ve){if("=="===Ve.op){if(Xi(Ve.value))return{unaryFilter:{field:pl(Ve.field),op:"IS_NAN"}};if(kr(Ve.value))return{unaryFilter:{field:pl(Ve.field),op:"IS_NULL"}}}else if("!="===Ve.op){if(Xi(Ve.value))return{unaryFilter:{field:pl(Ve.field),op:"IS_NOT_NAN"}};if(kr(Ve.value))return{unaryFilter:{field:pl(Ve.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(Ve.field),op:rh(Ve.op),value:Ve.value}}}(ue));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);u&&(n.structuredQuery.where=u);const p=function($){if(0!==$.length)return $.map(q=>{return{field:pl((ue=q).field),direction:nh(ue.dir)};var ue})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const I=(q=e.limit,i.gt||ho(q)?q:{value:q});var q,N,$;return null!==I&&(n.structuredQuery.limit=I),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt={before:!($=e.endAt).inclusive,values:$.position}),n}function Gu(i){let e=Ed(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){ar(1===o);const ue=n.from[0];ue.allDescendants?u=ue.collectionId:e=e.child(ue.collectionId)}let p=[];n.where&&(p=Wu(n.where));let I=[];n.orderBy&&(I=n.orderBy.map(ue=>{return new Uu(Ba((Ve=ue).field),function(vt){switch(vt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ve.direction));var Ve}));let N=null;n.limit&&(N=function(ue){let Ve;return Ve="object"==typeof ue?ue.value:ue,ho(Ve)?null:Ve}(n.limit));let $=null;var ue;n.startAt&&($=new fo((ue=n.startAt).values||[],!!ue.before));let q=null;return n.endAt&&(q=function(ue){return new fo(ue.values||[],!ue.before)}(n.endAt)),rl(e,u,I,p,N,"F",$,q)}function Wu(i){return i?void 0!==i.unaryFilter?[ih(i)]:void 0!==i.fieldFilter?[Gh(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Wu(e)).reduce((e,n)=>e.concat(n)):Sn():[]}function nh(i){return Hh[i]}function rh(i){return dl[i]}function pl(i){return{fieldPath:i.canonicalString()}}function Ba(i){return Ii.fromServerFormat(i.fieldPath)}function Gh(i){return bi.create(Ba(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Sn()}}(i.fieldFilter.op),i.fieldFilter.value)}function ih(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Ba(i.unaryFilter.field);return bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ba(i.unaryFilter.field);return bi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ba(i.unaryFilter.field);return bi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ba(i.unaryFilter.field);return bi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Sn()}}function Wh(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Gs(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ul(e)),e=Ll(i.get(n),e);return Ul(e)}function Ll(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const p=i.charAt(u);switch(p){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=p}}return n}function Ul(i){return i+"\x01\x01"}function ru(i){const e=i.length;if(ar(e>=2),2===e)return ar("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Vr.emptyPath();const n=e-2,o=[];let u="";for(let p=0;p<e;){const I=i.indexOf("\x01",p);switch((I<0||I>n)&&Sn(),i.charAt(I+1)){case"\x01":const N=i.substring(p,I);let $;0===u.length?$=N:(u+=N,$=u,u=""),o.push($);break;case"\x10":u+=i.substring(p,I),u+="\0";break;case"\x11":u+=i.substring(p,I+1);break;default:Sn()}p=I+2}return new Vr(o)}const Qc=["userId","batchId"];function Dc(i,e){return[i,Gs(e)]}function Cd(i,e,n){return[i,Gs(e),n]}const Ac={},Bo=["prefixPath","collectionGroup","readTime","documentId"],Du=["prefixPath","collectionGroup","documentId"],Sc=["collectionGroup","readTime","prefixPath","documentId"],oc=["canonicalId","targetId"],sh=["targetId","path"],zh=["path","targetId"],Zh=["collectionId","parent"],iu=["indexId","uid"],qh=["uid","sequenceNumber"],Id=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bd=["indexId","uid","orderedDocumentKey"],Td=["userId","collectionPath","documentId"],Kh=["userId","collectionPath","largestBatchId"],gl=["userId","collectionGroup","largestBatchId"],Jc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qf=[...Jc,"documentOverlays"],oh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f=oh,c=[...f,"indexConfiguration","indexState","indexEntries"];class l extends Nu{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function v(i,e){const n=hn(i);return fs.O(n.ie,e)}class S{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const p=this.mutations[u];p.key.isEqual(e.key)&&_(p,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=w(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=w(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=vc();return this.mutations.forEach(u=>{const p=e.get(u.key),I=p.overlayedDocument;let N=this.applyToLocalView(I,p.mutatedFields);N=n.has(u.key)?null:N;const $=x(I,N);null!==$&&o.set(u.key,$),I.isValidDocument()||I.convertToNoDocument(sr.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Sr())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(n,o)=>K(n,o))&&wo(this.baseMutations,e.baseMutations,(n,o)=>K(n,o))}}class V{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){ar(e.mutations.length===o.length);let u=cl;const p=e.mutations;for(let I=0;I<p.length;I++)u=u.insert(p[I].key,o[I].version);return new V(e,n,o,u)}}class H{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class re{constructor(e,n,o,u,p=sr.min(),I=sr.min(),N=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=N}withSequenceNumber(e){return new re(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new re(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new re(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ae{constructor(e){this.re=e}}function Rt(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pt(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:rc(u=i.re,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:wa(u,p.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ft(e.version)};else{if(!e.isUnknownDocument())return Sn();o.unknownDocument={path:n.path.toArray(),version:Ft(e.version)}}var u,p;return o}function Pt(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ft(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bn(i){const e=new li(i.seconds,i.nanoseconds);return sr.fromTimestamp(e)}function Gn(i,e){const n=(e.baseMutations||[]).map(p=>So(i.re,p));for(let p=0;p<e.mutations.length-1;++p){const I=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(I.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const o=e.mutations.map(p=>So(i.re,p)),u=li.fromMillis(e.localWriteTimeMs);return new S(e.batchId,u,n,o)}function Zr(i){const e=bn(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?bn(i.lastLimboFreeSnapshotVersion):sr.min();let o;var u;return void 0!==i.query.documents?(ar(1===(u=i.query).documents.length),o=eo($s(Ed(u.documents[0])))):o=eo(Gu(i.query)),new re(o,i.targetId,0,i.lastListenSequenceNumber,e,n,Br.fromBase64String(i.resumeToken))}function Ws(i,e){const n=Ft(e.snapshotVersion),o=Ft(e.lastLimboFreeSnapshotVersion);let u;u=Ja(e.target)?fl(i.re,e.target):Tc(i.re,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bo(e.target),readTime:n,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function su(i){const e=Gu({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sl(e,e.limit,"L"):e}function ml(i,e){return new H(e.largestBatchId,So(i.re,e.overlayMutation))}function Vl(i,e){const n=e.path.lastSegment();return[i,Gs(e.path.popLast()),n]}function Xc(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ft(o.readTime),documentKey:Gs(o.documentKey.path),largestBatchId:o.largestBatchId}}class hg{getBundleMetadata(e,n){return Kf(e).get(n).next(o=>{if(o)return{id:(u=o).bundleId,createTime:bn(u.createTime),version:u.version};var u})}saveBundleMetadata(e,n){return Kf(e).put({bundleId:(o=n).id,createTime:Ft(Hs(o.createTime)),version:o.version});var o}getNamedQuery(e,n){return Yf(e).get(n).next(o=>{if(o)return{name:(u=o).name,query:su(u.bundledQuery),readTime:bn(u.readTime)};var u})}saveNamedQuery(e,n){return Yf(e).put({name:(o=n).name,readTime:Ft(Hs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Kf(i){return v(i,"bundles")}function Yf(i){return v(i,"namedQueries")}class ed{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){return new ed(e,n.uid||"")}getOverlay(e,n){return Dd(e).get(Vl(this.userId,n)).next(o=>o?ml(this.It,o):null)}getOverlays(e,n){const o=Ao();return yt.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((p,I)=>{const N=new H(n,I);u.push(this.ue(e,N))}),yt.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(I=>u.add(Gs(I.getCollectionPath())));const p=[];return u.forEach(I=>{const N=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);p.push(Dd(e).Y("collectionPathOverlayIndex",N))}),yt.waitFor(p)}getOverlaysForCollection(e,n,o){const u=Ao(),p=Gs(n),I=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Dd(e).W("collectionPathOverlayIndex",I).next(N=>{for(const $ of N){const q=ml(this.It,$);u.set(q.getKey(),q)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const p=Ao();let I;const N=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dd(e).Z({index:"collectionGroupOverlayIndex",range:N},($,q,ue)=>{const Ve=ml(this.It,q);p.size()<u||Ve.largestBatchId===I?(p.set(Ve.getKey(),Ve),I=Ve.largestBatchId):ue.done()}).next(()=>p)}ue(e,n){return Dd(e).put(function(o,u,p){const[I,N,$]=Vl(u,p.mutation.key);return{userId:u,collectionPath:N,documentId:$,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:kl(o.re,p.mutation)}}(this.It,this.userId,n))}}function Dd(i){return v(i,"documentOverlays")}class xc{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(gi(e.integerValue));else if("doubleValue"in e){const o=gi(e.doubleValue);isNaN(o)?this.le(n,13):(this.le(n,15),mi(o)?n.fe(0):n.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(n,20),"string"==typeof o?n.de(o):(n.de(`${o.seconds||""}`),n.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(co(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(n,45),n.fe(o.latitude||0),n.fe(o.longitude||0)}else"mapValue"in e?js(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):Sn()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const o=e.fields||{};this.le(n,55);for(const u of Object.keys(o))this._e(u,n),this.ae(o[u],n)}pe(e,n){const o=e.values||[];this.le(n,50);for(const u of o)this.ae(u,n)}ge(e,n){this.le(n,37),on.fromName(e).path.forEach(o=>{this.le(n,60),this.Ie(o,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}function fg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Yh(i){const e=64-function(n){let o=0;for(let u=0;u<8;++u){const p=fg(255&n[u]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}xc.Te=new xc;class pg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ae(o.value),o=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Pe(o.value),o=n.next();this.ve()}Ve(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=n.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=n.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const n=this.Ce(e),o=Yh(n);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}Ne(e){const n=this.Ce(e),o=Yh(n);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(u){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,u,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ae(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;0===n?(this.Fe(0),this.Fe(255)):255===n?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class gg{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Ca{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Mc{constructor(){this.Be=new pg,this.Le=new gg(this.Be),this.Ue=new Ca(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Bl{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Bl(this.indexId,this.documentKey,this.arrayValue,o)}}function jl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=jo(i.arrayValue,e.arrayValue),0!==n?n:(n=jo(i.directionalValue,e.directionalValue),0!==n?n:on.comparator(i.documentKey,e.documentKey)))}function jo(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Ad{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const o=n;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const n=Wa(e);if(void 0!==n&&!this.ze(n))return!1;const o=ha(e);let u=0,p=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const I=o[u];if(!this.He(this.je,I)||!this.Je(this.Ge[p++],I))return!1;++u}for(;u<o.length;++u){const I=o[u];if(p>=this.Ge.length||!this.Je(this.Ge[p++],I))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class ah{constructor(){this.Ye=new uh}addToCollectionParentIndex(e,n){return this.Ye.add(n),yt.resolve()}getCollectionParents(e,n){return yt.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return yt.resolve()}deleteFieldIndex(e,n){return yt.resolve()}getDocumentsMatchingTarget(e,n){return yt.resolve(null)}getIndexType(e,n){return yt.resolve(0)}getFieldIndexes(e,n){return yt.resolve([])}getNextCollectionGroupToUpdate(e){return yt.resolve(null)}getMinOffset(e,n){return yt.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return yt.resolve(Bs.min())}updateCollectionGroup(e,n,o){return yt.resolve()}updateIndexEntries(e,n){return yt.resolve()}}class uh{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new _r(Vr.comparator),p=!u.has(o);return this.index[n]=u.add(o),p}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new _r(Vr.comparator)).toArray()}}const Rc=new Uint8Array(0);class lh{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new uh,this.Ze=new ps(o=>bo(o),(o,u)=>vu(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const p={collectionId:o,parent:Gs(u)};return Qh(e).put(p)}return yt.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[qo(n),""],!1,!0);return Qh(e).W(u).next(p=>{for(const I of p){if(I.collectionId!==n)break;o.push(ru(I.parent))}return o})}addFieldIndex(e,n){const o=Pc(e),u={indexId:(I=n).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var I;delete u.indexId;const p=o.add(u);if(n.indexState){const I=Nc(e);return p.next(N=>{I.put(Xc(N,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return p.next()}deleteFieldIndex(e,n){const o=Pc(e),u=Nc(e),p=td(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const o=td(e);let u=!0;const p=new Map;return yt.forEach(this.tn(n),I=>this.en(e,I).next(N=>{u&&(u=!!N),p.set(I,N)})).next(()=>{if(u){let I=Sr();const N=[];return yt.forEach(p,($,q)=>{var ue;Qt("IndexedDbIndexManager",`Using index ${ue=$,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(ns=>`${ns.fieldPath}:${ns.kind}`).join(",")}`} to execute ${bo(n)}`);const Ve=function(ns,go){const zi=Wa(go);if(void 0===zi)return null;for(const Ki of Eu(ns,zi.fieldPath))switch(Ki.op){case"array-contains-any":return Ki.value.arrayValue.values||[];case"array-contains":return[Ki.value]}return null}(q,$),vt=function(ns,go){const zi=new Map;for(const Ki of ha(go))for(const $o of Eu(ns,Ki.fieldPath))switch($o.op){case"==":case"in":zi.set(Ki.fieldPath.canonicalString(),$o.value);break;case"not-in":case"!=":return zi.set(Ki.fieldPath.canonicalString(),$o.value),Array.from(zi.values())}return null}(q,$),Ut=function(ns,go){const zi=[];let Ki=!0;for(const $o of ha(go)){const Qd=0===$o.kind?_a(ns,$o.fieldPath,ns.startAt):ya(ns,$o.fieldPath,ns.startAt);zi.push(Qd.value),Ki&&(Ki=Qd.inclusive)}return new fo(zi,Ki)}(q,$),Gt=function(ns,go){const zi=[];let Ki=!0;for(const $o of ha(go)){const Qd=0===$o.kind?ya(ns,$o.fieldPath,ns.endAt):_a(ns,$o.fieldPath,ns.endAt);zi.push(Qd.value),Ki&&(Ki=Qd.inclusive)}return new fo(zi,Ki)}(q,$),An=this.nn($,q,Ut),nr=this.nn($,q,Gt),Ti=this.sn($,q,vt),ts=this.rn($.indexId,Ve,An,Ut.inclusive,nr,Gt.inclusive,Ti);return yt.forEach(ts,ns=>o.J(ns,n.limit).next(go=>{go.forEach(zi=>{const Ki=on.fromSegments(zi.documentKey);I.has(Ki)||(I=I.add(Ki),N.push(Ki))})}))}).next(()=>N)}return yt.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,o,u,p,I,N){const $=(null!=n?n.length:1)*Math.max(o.length,p.length),q=$/(null!=n?n.length:1),ue=[];for(let Ve=0;Ve<$;++Ve){const vt=n?this.on(n[Ve/q]):Rc,Ut=this.un(e,vt,o[Ve%q],u),Gt=this.cn(e,vt,p[Ve%q],I),An=N.map(nr=>this.un(e,vt,nr,!0));ue.push(...this.createRange(Ut,Gt,An))}return ue}un(e,n,o,u){const p=new Bl(e,on.empty(),n,o);return u?p:p.Ke()}cn(e,n,o,u){const p=new Bl(e,on.empty(),n,o);return u?p.Ke():p}en(e,n){const o=new Ad(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(p=>{let I=null;for(const N of p)o.We(N)&&(!I||N.fields.length>I.fields.length)&&(I=N);return I})}getIndexType(e,n){let o=2;return yt.forEach(this.tn(n),u=>this.en(e,u).next(p=>{p?0!==o&&p.fields.length<function(I){let N=new _r(Ii.comparator),$=!1;for(const q of I.filters){const ue=q;ue.field.isKeyField()||("array-contains"===ue.op||"array-contains-any"===ue.op?$=!0:N=N.add(ue.field))}for(const q of I.orderBy)q.field.isKeyField()||(N=N.add(q.field));return N.size+($?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,n){const o=new Mc;for(const u of ha(e)){const p=n.data.field(u.fieldPath);if(null==p)return null;const I=o.qe(u.kind);xc.Te.ce(p,I)}return o.$e()}on(e){const n=new Mc;return xc.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const o=new Mc;return xc.Te.ce(tn(this.databaseId,n),o.qe(function(u){const p=ha(u);return 0===p.length?0:p[p.length-1].kind}(e))),o.$e()}sn(e,n,o){if(null===o)return[];let u=[];u.push(new Mc);let p=0;for(const I of ha(e)){const N=o[p++];for(const $ of u)if(this.ln(n,I.fieldPath)&&_n(N))u=this.fn(u,I,N);else{const q=$.qe(I.kind);xc.Te.ce(N,q)}}return this.dn(u)}nn(e,n,o){return this.sn(e,n,o.position)}dn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].$e();return n}fn(e,n,o){const u=[...e],p=[];for(const I of o.arrayValue.values||[])for(const N of u){const $=new Mc;$.seed(N.$e()),xc.Te.ce(I,$.qe(n.kind)),p.push($)}return p}ln(e,n){return!!e.filters.find(o=>o instanceof bi&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Pc(e),u=Nc(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(p=>{const I=[];return yt.forEach(p,N=>u.get([N.indexId,this.uid]).next($=>{I.push(function(q,ue){const Ve=ue?new fa(ue.sequenceNumber,new Bs(bn(ue.readTime),new on(ru(ue.documentKey)),ue.largestBatchId)):fa.empty(),vt=q.fields.map(([Ut,Gt])=>new Ko(Ii.fromServerFormat(Ut),Gt));return new Co(q.indexId,q.collectionGroup,vt,Ve)}(N,$))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const p=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==p?p:Vn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Pc(e),p=Nc(e);return this._n(e).next(I=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(N=>yt.forEach(N,$=>p.put(Xc($.indexId,this.user,I,o)))))}updateIndexEntries(e,n){const o=new Map;return yt.forEach(n,(u,p)=>{const I=o.get(u.collectionGroup);return(I?yt.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(N=>(o.set(u.collectionGroup,N),yt.forEach(N,$=>this.wn(e,u,$).next(q=>{const ue=this.mn(p,$);return q.isEqual(ue)?yt.resolve():this.gn(e,p,$,q,ue)}))))})}yn(e,n,o,u){return td(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,n.key),documentKey:n.key.path.toArray()})}pn(e,n,o,u){return td(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,n.key),n.key.path.toArray()])}wn(e,n,o){const u=td(e);let p=new _r(jl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,n)])},(I,N)=>{p=p.add(new Bl(o.indexId,n,N.arrayValue,N.directionalValue))}).next(()=>p)}mn(e,n){let o=new _r(jl);const u=this.an(n,e);if(null==u)return o;const p=Wa(n);if(null!=p){const I=e.data.field(p.fieldPath);if(_n(I))for(const N of I.arrayValue.values||[])o=o.add(new Bl(n.indexId,e.key,this.on(N),u))}else o=o.add(new Bl(n.indexId,e.key,Rc,u));return o}gn(e,n,o,u,p){Qt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const I=[];return function(N,$,q,ue,Ve){const vt=N.getIterator(),Ut=$.getIterator();let Gt=ws(vt),An=ws(Ut);for(;Gt||An;){let nr=!1,Ti=!1;if(Gt&&An){const ts=q(Gt,An);ts<0?Ti=!0:ts>0&&(nr=!0)}else null!=Gt?Ti=!0:nr=!0;nr?(ue(An),An=ws(Ut)):Ti?(Ve(Gt),Gt=ws(vt)):(Gt=ws(vt),An=ws(Ut))}}(u,p,jl,N=>{I.push(this.yn(e,n,o,N))},N=>{I.push(this.pn(e,n,o,N))}),yt.waitFor(I)}_n(e){let n=1;return Nc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,p)=>{p.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((I,N)=>jl(I,N)).filter((I,N,$)=>!N||0!==jl(I,$[N-1]));const u=[];u.push(e);for(const I of o){const N=jl(I,e),$=jl(I,n);if(0===N)u[0]=e.Ke();else if(N>0&&$<0)u.push(I),u.push(I.Ke());else if($>0)break}u.push(n);const p=[];for(let I=0;I<u.length;I+=2)p.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,Rc,[]],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,Rc,[]]));return p}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Jh)}getMinOffset(e,n){return yt.mapArray(this.tn(n),o=>this.en(e,o).next(u=>u||Sn())).next(Jh)}}function Qh(i){return v(i,"collectionParents")}function td(i){return v(i,"indexEntries")}function Pc(i){return v(i,"indexConfiguration")}function Nc(i){return v(i,"indexState")}function Jh(i){ar(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Ji(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Bs(e.readTime,e.documentKey,n)}const Xh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ia{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ia(e,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ef(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),p=[],I=IDBKeyRange.only(n.batchId);let N=0;const $=o.Z({range:I},(ue,Ve,vt)=>(N++,vt.delete()));p.push($.next(()=>{ar(1===N)}));const q=[];for(const ue of n.mutations){const Ve=Cd(e,ue.key.path,n.batchId);p.push(u.delete(Ve)),q.push(ue.key)}return yt.waitFor(p).next(()=>q)}function Sd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Sn();e=i.noDocument}return JSON.stringify(e).length}Ia.DEFAULT_COLLECTION_PERCENTILE=10,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ia.DEFAULT=new Ia(41943040,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ia.DISABLED=new Ia(-1,0,0);class $l{constructor(e,n,o,u){this.userId=e,this.It=n,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,n,o,u){ar(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new $l(p,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ac(e).Z({index:"userMutationsIndex",range:o},(u,p,I)=>{n=!1,I.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const p=nd(e),I=ac(e);return I.add({}).next(N=>{ar("number"==typeof N);const $=new S(N,n,o,u),q=function(vt,Ut,Gt){const An=Gt.baseMutations.map(Ti=>kl(vt.re,Ti)),nr=Gt.mutations.map(Ti=>kl(vt.re,Ti));return{userId:Ut,batchId:Gt.batchId,localWriteTimeMs:Gt.localWriteTime.toMillis(),baseMutations:An,mutations:nr}}(this.It,this.userId,$),ue=[];let Ve=new _r((vt,Ut)=>Vn(vt.canonicalString(),Ut.canonicalString()));for(const vt of u){const Ut=Cd(this.userId,vt.key.path,N);Ve=Ve.add(vt.key.path.popLast()),ue.push(I.put(q)),ue.push(p.put(Ut,Ac))}return Ve.forEach(vt=>{ue.push(this.indexManager.addToCollectionParentIndex(e,vt))}),e.addOnCommittedListener(()=>{this.In[N]=$.keys()}),yt.waitFor(ue).next(()=>$)})}lookupMutationBatch(e,n){return ac(e).get(n).next(o=>o?(ar(o.userId===this.userId),Gn(this.It,o)):null)}Tn(e,n){return this.In[n]?yt.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.In[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return ac(e).Z({index:"userMutationsIndex",range:u},(I,N,$)=>{N.userId===this.userId&&(ar(N.batchId>=o),p=Gn(this.It,N)),$.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ac(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(u,p,I)=>{o=p.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ac(e).W("userMutationsIndex",n).next(o=>o.map(u=>Gn(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Dc(this.userId,n.path),u=IDBKeyRange.lowerBound(o),p=[];return nd(e).Z({range:u},(I,N,$)=>{const[q,ue,Ve]=I,vt=ru(ue);if(q===this.userId&&n.path.isEqual(vt))return ac(e).get(Ve).next(Ut=>{if(!Ut)throw Sn();ar(Ut.userId===this.userId),p.push(Gn(this.It,Ut))});$.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new _r(Vn);const u=[];return n.forEach(p=>{const I=Dc(this.userId,p.path),N=IDBKeyRange.lowerBound(I),$=nd(e).Z({range:N},(q,ue,Ve)=>{const[vt,Ut,Gt]=q,An=ru(Ut);vt===this.userId&&p.path.isEqual(An)?o=o.add(Gt):Ve.done()});u.push($)}),yt.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,p=Dc(this.userId,o),I=IDBKeyRange.lowerBound(p);let N=new _r(Vn);return nd(e).Z({range:I},($,q,ue)=>{const[Ve,vt,Ut]=$,Gt=ru(vt);Ve===this.userId&&o.isPrefixOf(Gt)?Gt.length===u&&(N=N.add(Ut)):ue.done()}).next(()=>this.En(e,N))}En(e,n){const o=[],u=[];return n.forEach(p=>{u.push(ac(e).get(p).next(I=>{if(null===I)throw Sn();ar(I.userId===this.userId),o.push(Gn(this.It,I))}))}),yt.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return ef(e.ie,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),yt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return yt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return nd(e).Z({range:o},(p,I,N)=>{if(p[0]===this.userId){const $=ru(p[1]);u.push($)}else N.done()}).next(()=>{ar(0===u.length)})})}containsKey(e,n){return _l(e,this.userId,n)}Rn(e){return mg(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _l(i,e,n){const o=Dc(e,n.path),u=o[1],p=IDBKeyRange.lowerBound(o);let I=!1;return nd(i).Z({range:p,X:!0},(N,$,q)=>{const[ue,Ve,vt]=N;ue===e&&Ve===u&&(I=!0),q.done()}).next(()=>I)}function ac(i){return v(i,"mutations")}function nd(i){return v(i,"documentMutations")}function mg(i){return v(i,"mutationQueues")}class rd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new rd(0)}static vn(){return new rd(-1)}}class Qf{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const o=new rd(n.highestTargetId);return n.highestTargetId=o.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>sr.fromTimestamp(new li(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Sn(e,u)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(n,o),this.Sn(e,o))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>xd(e).delete(n.targetId)).next(()=>this.Vn(e)).next(o=>(ar(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,n,o){let u=0;const p=[];return xd(e).Z((I,N)=>{const $=Zr(N);$.sequenceNumber<=n&&null===o.get($.targetId)&&(u++,p.push(this.removeTargetData(e,$)))}).next(()=>yt.waitFor(p)).next(()=>u)}forEachTarget(e,n){return xd(e).Z((o,u)=>{const p=Zr(u);n(p)})}Vn(e){return Au(e).get("targetGlobalKey").next(n=>(ar(null!==n),n))}Sn(e,n){return Au(e).put("targetGlobalKey",n)}Dn(e,n){return xd(e).put(Ws(this.It,n))}Cn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=bo(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return xd(e).Z({range:u,index:"queryTargetsIndex"},(I,N,$)=>{const q=Zr(N);vu(n,q.target)&&(p=q,$.done())}).next(()=>p)}addMatchingKeys(e,n,o){const u=[],p=yl(e);return n.forEach(I=>{const N=Gs(I.path);u.push(p.put({targetId:o,path:N})),u.push(this.referenceDelegate.addReference(e,o,I))}),yt.waitFor(u)}removeMatchingKeys(e,n,o){const u=yl(e);return yt.forEach(n,p=>{const I=Gs(p.path);return yt.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,n){const o=yl(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=yl(e);let p=Sr();return u.Z({range:o,X:!0},(I,N,$)=>{const q=ru(I[1]),ue=new on(q);p=p.add(ue)}).next(()=>p)}containsKey(e,n){const o=Gs(n.path),u=IDBKeyRange.bound([o],[qo(o)],!1,!0);let p=0;return yl(e).Z({index:"documentTargetsIndex",X:!0,range:u},([I,N],$,q)=>{0!==I&&(p++,q.done())}).next(()=>p>0)}se(e,n){return xd(e).get(n).next(o=>o?Zr(o):null)}}function xd(i){return v(i,"targets")}function Au(i){return v(i,"targetGlobal")}function yl(i){return v(i,"targetDocuments")}function ch([i,e],[n,o]){const u=Vn(i,n);return 0===u?Vn(e,o):u}class _g{constructor(e){this.xn=e,this.buffer=new _r(ch),this.Nn=0}kn(){return++this.Nn}Mn(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();ch(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var n=this;Qt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,C.Z)(function*(){n.On=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Qs(o)?Qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Io(o)}yield n.Fn(3e5)}))}}class yg{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return yt.resolve(As.at);const o=new _g(n);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.$n.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector","Garbage collection skipped; disabled"),yt.resolve(Xh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xh):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let o,u,p,I,N,$,q;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ve=>(Ve>this.params.maximumSequenceNumbersToCollect?(Qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ve}`),u=this.params.maximumSequenceNumbersToCollect):u=Ve,I=Date.now(),this.nthSequenceNumber(e,u))).next(Ve=>(o=Ve,N=Date.now(),this.removeTargets(e,o,n))).next(Ve=>(p=Ve,$=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ve=>(q=Date.now(),as()<=P.in.DEBUG&&Qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ue}ms\n\tDetermined least recently used ${u} in `+(N-I)+`ms\n\tRemoved ${p} targets in `+($-N)+`ms\n\tRemoved ${Ve} documents in `+(q-$)+`ms\nTotal Duration: ${q-ue}ms`),yt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:p,documentsRemoved:Ve})))}}class Md{constructor(e,n){this.db=e,this.garbageCollector=new yg(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}qn(e){let n=0;return this.Ln(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(o,u)=>n(u))}addReference(e,n,o){return dh(e,o)}removeReference(e,n,o){return dh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return dh(e,n)}Gn(e,n){return function(o,u){let p=!1;return mg(o).tt(I=>_l(o,I,u).next(N=>(N&&(p=!0),yt.resolve(!N)))).next(()=>p)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let p=0;return this.Kn(e,(I,N)=>{if(N<=n){const $=this.Gn(e,I).next(q=>{if(!q)return p++,o.getEntry(e,I).next(()=>(o.removeEntry(I,sr.min()),yl(e).delete([0,Gs(I.path)])))});u.push($)}}).next(()=>yt.waitFor(u)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return dh(e,n)}Kn(e,n){const o=yl(e);let u,p=As.at;return o.Z({index:"documentTargetsIndex"},([I,N],{path:$,sequenceNumber:q})=>{0===I?(p!==As.at&&n(new on(ru(u)),p),p=q,u=$):p=As.at}).next(()=>{p!==As.at&&n(new on(ru(u)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dh(i,e){return yl(i).put((o=i.currentSequenceNumber,{targetId:0,path:Gs(e.path),sequenceNumber:o}));var o}class Xf{constructor(){this.changes=new ps(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?yt.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hh{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return m(e).put(o)}removeEntry(e,n,o){return m(e).delete(function(u,p){const I=u.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Pt(p),I[I.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.Qn(e,o)))}getEntry(e,n){let o=ci.newInvalidDocument(n);return m(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y(n))},(u,p)=>{o=this.jn(n,p)}).next(()=>o)}Wn(e,n){let o={size:0,document:ci.newInvalidDocument(n)};return m(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y(n))},(u,p)=>{o={document:this.jn(n,p),size:Sd(p)}}).next(()=>o)}getEntries(e,n){let o=$i();return this.zn(e,n,(u,p)=>{const I=this.jn(u,p);o=o.insert(u,I)}).next(()=>o)}Hn(e,n){let o=$i(),u=new ai(on.comparator);return this.zn(e,n,(p,I)=>{const N=this.jn(p,I);o=o.insert(p,N),u=u.insert(p,Sd(I))}).next(()=>({documents:o,Jn:u}))}zn(e,n,o){if(n.isEmpty())return yt.resolve();let u=new _r(M);n.forEach($=>u=u.add($));const p=IDBKeyRange.bound(y(u.first()),y(u.last())),I=u.getIterator();let N=I.getNext();return m(e).Z({index:"documentKeyIndex",range:p},($,q,ue)=>{const Ve=on.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;N&&M(N,Ve)<0;)o(N,null),N=I.getNext();N&&N.isEqual(Ve)&&(o(N,q),N=I.hasNext()?I.getNext():null),N?ue.j(y(N)):ue.done()}).next(()=>{for(;N;)o(N,null),N=I.hasNext()?I.getNext():null})}getAllFromCollection(e,n,o){const u=[n.popLast().toArray(),n.lastSegment(),Pt(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],p=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return m(e).W(IDBKeyRange.bound(u,p,!0)).next(I=>{let N=$i();for(const $ of I){const q=this.jn(on.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);N=N.insert(q.key,q)}return N})}getAllFromCollectionGroup(e,n,o,u){let p=$i();const I=E(n,o),N=E(n,Bs.max());return m(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,N,!0)},($,q,ue)=>{const Ve=this.jn(on.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);p=p.insert(Ve.key,Ve),p.size===u&&ue.done()}).next(()=>p)}newChangeBuffer(e){return new tf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(n=>(ar(!!n),n))}Qn(e,n){return ep(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const o=function He(i,e){let n;if(e.document)n=sc(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=on.fromSegments(e.noDocument.path),u=bn(e.noDocument.readTime);n=ci.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Sn();{const o=on.fromSegments(e.unknownDocument.path),u=bn(e.unknownDocument.version);n=ci.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(o){const u=new li(o[0],o[1]);return sr.fromTimestamp(u)}(e.readTime)),n}(this.It,n);if(!o.isNoDocument()||!o.version.isEqual(sr.min()))return o}return ci.newInvalidDocument(e)}}function Rd(i){return new hh(i)}class tf extends Xf{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new ps(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new _r((p,I)=>Vn(p.canonicalString(),I.canonicalString()));return this.changes.forEach((p,I)=>{const N=this.Xn.get(p);if(n.push(this.Yn.removeEntry(e,p,N.readTime)),I.isValidDocument()){const $=Rt(this.Yn.It,I);u=u.add(p.path.popLast()),o+=Sd($)-N.size,n.push(this.Yn.addEntry(e,p,$))}else if(o-=N.size,this.trackRemovals){const $=Rt(this.Yn.It,I.convertToNoDocument(sr.min()));n.push(this.Yn.addEntry(e,p,$))}}),u.forEach(p=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),n.push(this.Yn.updateMetadata(e,o)),yt.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(o=>(this.Xn.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:o,Jn:u})=>(u.forEach((p,I)=>{this.Xn.set(p,{size:I,readTime:o.get(p).readTime})}),o))}}function ep(i){return v(i,"remoteDocumentGlobal")}function m(i){return v(i,"remoteDocumentsV14")}function y(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function E(i,e){const n=e.documentKey.path.toArray();return[i,Pt(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function M(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let p=0;p<n.length-2&&p<o.length-2;++p)if(u=Vn(n[p],o[p]),u)return u;return u=Vn(n.length,o.length),u||(u=Vn(n[n.length-2],o[o.length-2]),u||Vn(n[n.length-1],o[o.length-1]))}class J{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class $e{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.getBaseDocument(e,n,o))).next(u=>(null!==o&&w(o.mutation,u,Js.empty(),li.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Sr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Sr()){const u=Ao();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(p=>{let I=Xo();return p.forEach((N,$)=>{I=I.insert(N,$.overlayedDocument)}),I}))}getOverlayedDocuments(e,n){const o=Ao();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Sr()))}populateOverlays(e,n,o){const u=[];return o.forEach(p=>{n.has(p)||u.push(p)}),this.documentOverlayCache.getOverlays(e,u).next(p=>{p.forEach((I,N)=>{n.set(I,N)})})}computeViews(e,n,o,u){let p=$i();const I=gs(),N=gs();return n.forEach(($,q)=>{const ue=o.get(q.key);u.has(q.key)&&(void 0===ue||ue.mutation instanceof Xe)?p=p.insert(q.key,q):void 0!==ue&&(I.set(q.key,ue.mutation.getFieldMask()),w(ue.mutation,q,ue.mutation.getFieldMask(),li.now()))}),this.recalculateAndSaveOverlays(e,p).next($=>($.forEach((q,ue)=>I.set(q,ue)),n.forEach((q,ue)=>{var Ve;return N.set(q,new J(ue,null!==(Ve=I.get(q))&&void 0!==Ve?Ve:null))}),N))}recalculateAndSaveOverlays(e,n){const o=gs();let u=new ai((I,N)=>I-N),p=Sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(I=>{for(const N of I)N.keys().forEach($=>{const q=n.get($);if(null===q)return;let ue=o.get($)||Js.empty();ue=N.applyToLocalView(q,ue),o.set($,ue);const Ve=(u.get(N.batchId)||Sr()).add($);u=u.insert(N.batchId,Ve)})}).next(()=>{const I=[],N=u.getReverseIterator();for(;N.hasNext();){const $=N.getNext(),q=$.key,ue=$.value,Ve=vc();ue.forEach(vt=>{if(!p.has(vt)){const Ut=x(n.get(vt),o.get(vt));null!==Ut&&Ve.set(vt,Ut),p=p.add(vt)}}),I.push(this.documentOverlayCache.saveOverlays(e,q,Ve))}return yt.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o){return on.isDocumentKey((u=n).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Ml(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o):this.getDocumentsMatchingCollectionQuery(e,n,o);var u}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(p=>{const I=u-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-p.size):yt.resolve(Ao());let N=-1,$=p;return I.next(q=>yt.forEach(q,(ue,Ve)=>(N<Ve.largestBatchId&&(N=Ve.largestBatchId),p.get(ue)?yt.resolve():this.getBaseDocument(e,ue,Ve).next(vt=>{$=$.insert(ue,vt)}))).next(()=>this.populateOverlays(e,q,p)).next(()=>this.computeViews(e,$,q,Sr())).next(ue=>({batchId:N,changes:ll(ue)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new on(n)).next(o=>{let u=Xo();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o){const u=n.collectionGroup;let p=Xo();return this.indexManager.getCollectionParents(e,u).next(I=>yt.forEach(I,N=>{const $=(q=n,ue=N.child(u),new Iu(ue,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ue;return this.getDocumentsMatchingCollectionQuery(e,$,o).next(q=>{q.forEach((ue,Ve)=>{p=p.insert(ue,Ve)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,n,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,n.path,o).next(p=>(u=p,this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId))).next(p=>{p.forEach((N,$)=>{const q=$.getKey();null===u.get(q)&&(u=u.insert(q,ci.newInvalidDocument(q)))});let I=Xo();return u.forEach((N,$)=>{const q=p.get(N);void 0!==q&&w(q.mutation,$,Js.empty(),li.now()),Fa(n,$)&&(I=I.insert(N,$))}),I})}getBaseDocument(e,n,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,n):yt.resolve(ci.newInvalidDocument(n))}}class $t{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return yt.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var o;return this.Zn.set(n.id,{id:(o=n).id,version:o.version,createTime:Hs(o.createTime)}),yt.resolve()}getNamedQuery(e,n){return yt.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(o=n).name,query:su(o.bundledQuery),readTime:Hs(o.readTime)}),yt.resolve();var o}}class En{constructor(){this.overlays=new ai(on.comparator),this.es=new Map}getOverlay(e,n){return yt.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Ao();return yt.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,p)=>{this.ue(e,n,p)}),yt.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),yt.resolve()}getOverlaysForCollection(e,n,o){const u=Ao(),p=n.length+1,I=new on(n.child("")),N=this.overlays.getIteratorFrom(I);for(;N.hasNext();){const $=N.getNext().value,q=$.getKey();if(!n.isPrefixOf(q.path))break;q.path.length===p&&$.largestBatchId>o&&u.set($.getKey(),$)}return yt.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let p=new ai((q,ue)=>q-ue);const I=this.overlays.getIterator();for(;I.hasNext();){const q=I.getNext().value;if(q.getKey().getCollectionGroup()===n&&q.largestBatchId>o){let ue=p.get(q.largestBatchId);null===ue&&(ue=Ao(),p=p.insert(q.largestBatchId,ue)),ue.set(q.getKey(),q)}}const N=Ao(),$=p.getIterator();for(;$.hasNext()&&($.getNext().value.forEach((q,ue)=>N.set(q,ue)),!(N.size()>=u)););return yt.resolve(N)}ue(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const I=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new H(n,o));let p=this.es.get(n);void 0===p&&(p=Sr(),this.es.set(n,p)),this.es.set(n,p.add(o.key))}}class Tn{constructor(){this.ns=new _r(Wn.ss),this.rs=new _r(Wn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const o=new Wn(e,n);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.cs(new Wn(e,n))}hs(e,n){e.forEach(o=>this.removeReference(o,n))}ls(e){const n=new on(new Vr([])),o=new Wn(n,e),u=new Wn(n,e+1),p=[];return this.rs.forEachInRange([o,u],I=>{this.cs(I),p.push(I.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new on(new Vr([])),o=new Wn(n,e),u=new Wn(n,e+1);let p=Sr();return this.rs.forEachInRange([o,u],I=>{p=p.add(I.key)}),p}containsKey(e){const n=new Wn(e,0),o=this.ns.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Wn{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return on.comparator(e.key,n.key)||Vn(e._s,n._s)}static os(e,n){return Vn(e._s,n._s)||on.comparator(e.key,n.key)}}class ti{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new _r(Wn.ss)}checkEmpty(e){return yt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const p=this.ws;this.ws++;const I=new S(p,n,o,u);this.mutationQueue.push(I);for(const N of u)this.gs=this.gs.add(new Wn(N.key,p)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return yt.resolve(I)}lookupMutationBatch(e,n){return yt.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.ps(n+1),p=u<0?0:u;return yt.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return yt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return yt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Wn(n,0),u=new Wn(n,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,u],I=>{const N=this.ys(I._s);p.push(N)}),yt.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new _r(Vn);return n.forEach(u=>{const p=new Wn(u,0),I=new Wn(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,I],N=>{o=o.add(N._s)})}),yt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let p=o;on.isDocumentKey(p)||(p=p.child(""));const I=new Wn(new on(p),0);let N=new _r(Vn);return this.gs.forEachWhile($=>{const q=$.key.path;return!!o.isPrefixOf(q)&&(q.length===u&&(N=N.add($._s)),!0)},I),yt.resolve(this.Is(N))}Is(e){const n=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){ar(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return yt.forEach(n.mutations,u=>{const p=new Wn(u.key,n.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,n){const o=new Wn(n,0),u=this.gs.firstAfterOrEqual(o);return yt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return yt.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Pi{constructor(e){this.Es=e,this.docs=new ai(on.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),p=u?u.size:0,I=this.Es(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:I}),this.size+=I-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return yt.resolve(o?o.document.mutableCopy():ci.newInvalidDocument(n))}getEntries(e,n){let o=$i();return n.forEach(u=>{const p=this.docs.get(u);o=o.insert(u,p?p.document.mutableCopy():ci.newInvalidDocument(u))}),yt.resolve(o)}getAllFromCollection(e,n,o){let u=$i();const p=new on(n.child("")),I=this.docs.getIteratorFrom(p);for(;I.hasNext();){const{key:N,value:{document:$}}=I.getNext();if(!n.isPrefixOf(N.path))break;N.path.length>n.length+1||Ji(pa($),o)<=0||(u=u.insert($.key,$.mutableCopy()))}return yt.resolve(u)}getAllFromCollectionGroup(e,n,o,u){Sn()}As(e,n){return yt.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new ls(this)}getSize(e){return yt.resolve(this.size)}}class ls extends Xf{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),yt.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class ta{constructor(e){this.persistence=e,this.Rs=new ps(n=>bo(n),vu),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Tn,this.targetCount=0,this.vs=rd.Pn()}forEachTarget(e,n){return this.Rs.forEach((o,u)=>n(u)),yt.resolve()}getLastRemoteSnapshotVersion(e){return yt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return yt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),yt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.bs&&(this.bs=n),yt.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new rd(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,yt.resolve()}updateTargetData(e,n){return this.Dn(n),yt.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,yt.resolve()}removeTargets(e,n,o){let u=0;const p=[];return this.Rs.forEach((I,N)=>{N.sequenceNumber<=n&&null===o.get(N.targetId)&&(this.Rs.delete(I),p.push(this.removeMatchingKeysForTargetId(e,N.targetId)),u++)}),yt.waitFor(p).next(()=>u)}getTargetCount(e){return yt.resolve(this.targetCount)}getTargetData(e,n){const o=this.Rs.get(n)||null;return yt.resolve(o)}addMatchingKeys(e,n,o){return this.Ps.us(n,o),yt.resolve()}removeMatchingKeys(e,n,o){this.Ps.hs(n,o);const u=this.persistence.referenceDelegate,p=[];return u&&n.forEach(I=>{p.push(u.markPotentiallyOrphaned(e,I))}),yt.waitFor(p)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),yt.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Ps.ds(n);return yt.resolve(o)}containsKey(e,n){return yt.resolve(this.Ps.containsKey(n))}}class ro{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new As(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ta(this),this.indexManager=new ah,this.remoteDocumentCache=new Pi(o=>this.referenceDelegate.xs(o)),this.It=new Ae(n),this.Ns=new $t(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new En,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Vs[e.toKey()];return o||(o=new ti(n,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,o){Qt("MemoryPersistence","Starting transaction:",e);const u=new ou(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(p=>this.referenceDelegate.Ms(u).next(()=>p)).toPromise().then(p=>(u.raiseOnCommittedEvent(),p))}Os(e,n){return yt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,n)))}}class ou extends Nu{constructor(e){super(),this.currentSequenceNumber=e}}class ms{constructor(e){this.persistence=e,this.Fs=new Tn,this.$s=null}static Bs(e){return new ms(e)}get Ls(){if(this.$s)return this.$s;throw Sn()}addReference(e,n,o){return this.Fs.addReference(o,n),this.Ls.delete(o.toString()),yt.resolve()}removeReference(e,n,o){return this.Fs.removeReference(o,n),this.Ls.add(o.toString()),yt.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),yt.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yt.forEach(this.Ls,o=>{const u=on.fromPath(o);return this.Us(e,u).next(p=>{p||n.removeEntry(u,sr.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(o=>{o?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return yt.or([()=>yt.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}class zu{constructor(e){this.It=e}$(e,n,o,u){const p=new ga("createOrUpgrade",n);var N;o<1&&u>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qc,{unique:!0}),N.createObjectStore("documentMutations"),Su(e),function(N){N.createObjectStore("remoteDocuments")}(e));let I=yt.resolve();return o<3&&u>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Su(e)),I=I.next(()=>function(N){const $=N.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sr.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",q)}(p))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(N,$){return $.store("mutations").W().next(q=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qc,{unique:!0});const ue=$.store("mutations"),Ve=q.map(vt=>ue.put(vt));return yt.waitFor(Ve)})}(e,p))),I=I.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.qs(p))),o<6&&u>=6&&(I=I.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&u>=7&&(I=I.next(()=>this.Gs(p))),o<8&&u>=8&&(I=I.next(()=>this.Qs(e,p))),o<9&&u>=9&&(I=I.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.js(p))),o<11&&u>=11&&(I=I.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(N){const $=N.createObjectStore("documentOverlays",{keyPath:Td});$.createIndex("collectionPathOverlayIndex",Kh,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",gl,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(N){const $=N.createObjectStore("remoteDocumentsV14",{keyPath:Bo});$.createIndex("documentKeyIndex",Du),$.createIndex("collectionGroupIndex",Sc)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>this.zs(e,p))),o<15&&u>=15&&(I=I.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:iu}).createIndex("sequenceNumberIndex",qh,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:Id}).createIndex("documentKeyIndex",bd,{unique:!1})}(e))),I}Ks(e){let n=0;return e.store("remoteDocuments").Z((o,u)=>{n+=Sd(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>yt.forEach(u,p=>{const I=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(N=>yt.forEach(N,$=>{ar($.userId===p.userId);const q=Gn(this.It,$);return ef(e,p.userId,q).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const p=[];return o.Z((I,N)=>{const $=new Vr(I),q=[0,Gs($)];p.push(n.get(q).next(ue=>ue?yt.resolve():n.put({targetId:0,path:Gs($),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>yt.waitFor(p))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:Zh});const o=n.store("collectionParents"),u=new uh,p=I=>{if(u.add(I)){const N=I.lastSegment(),$=I.popLast();return o.put({collectionId:N,parent:Gs($)})}};return n.store("remoteDocuments").Z({X:!0},(I,N)=>{const $=new Vr(I);return p($.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([I,N,$],q)=>{const ue=ru(N);return p(ue.popLast())}))}js(e){const n=e.store("targets");return n.Z((o,u)=>{const p=Zr(u),I=Ws(this.It,p);return n.put(I)})}Ws(e,n){const o=n.store("remoteDocuments"),u=[];return o.Z((p,I)=>{const N=n.store("remoteDocumentsV14"),$=(q=I,q.document?new on(Vr.fromString(q.document.name).popFirst(5)):q.noDocument?on.fromSegments(q.noDocument.path):q.unknownDocument?on.fromSegments(q.unknownDocument.path):Sn()).path.toArray();var q;const ue={prefixPath:$.slice(0,$.length-2),collectionGroup:$[$.length-2],documentId:$[$.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};u.push(N.put(ue))}).next(()=>yt.waitFor(u))}zs(e,n){const o=n.store("mutations"),u=Rd(this.It),p=new ro(ms.Bs,this.It.re);return o.W().next(I=>{const N=new Map;return I.forEach($=>{var q;let ue=null!==(q=N.get($.userId))&&void 0!==q?q:Sr();Gn(this.It,$).keys().forEach(Ve=>ue=ue.add(Ve)),N.set($.userId,ue)}),yt.forEach(N,($,q)=>{const ue=new zr(q),Ve=ed.oe(this.It,ue),vt=p.getIndexManager(ue),Ut=$l.oe(ue,this.It,vt,p.referenceDelegate);return new $e(u,Ut,Ve,vt).recalculateAndSaveOverlaysForDocumentKeys(new l(n,As.at),$).next()})})}}function Su(i){i.createObjectStore("targetDocuments",{keyPath:sh}).createIndex("documentTargetsIndex",zh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oc,{unique:!0}),i.createObjectStore("targetGlobal")}const cs="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zs{constructor(e,n,o,u,p,I,N,$,q,ue,Ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.Hs=p,this.window=I,this.document=N,this.Js=q,this.Ys=ue,this.Xs=Ve,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=vt=>Promise.resolve(),!zs.C())throw new Jt(St.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Md(this,u),this.ii=n+"main",this.It=new Ae($),this.ri=new fs(this.ii,this.Xs,new zu(this.It)),this.Cs=new Qf(this.referenceDelegate,this.It),this.remoteDocumentCache=Rd(this.It),this.Ns=new hg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ue&&yi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(St.FAILED_PRECONDITION,cs);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new As(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var o=(0,C.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=(0,C.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,C.Z)(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Qs(e))return Qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return xu(e).get("owner").next(n=>yt.resolve(this.mi(n)))}gi(e){return vl(e).delete(this.clientId)}yi(){var e=this;return(0,C.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=v(o,"clientMetadata");return u.W().next(p=>{const I=e.Ii(p,18e5),N=p.filter($=>-1===I.indexOf($));return yt.forEach(N,$=>u.delete($.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const o of n)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?yt.resolve(!0):xu(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new Jt(St.FAILED_PRECONDITION,cs);return!1}}return!(!this.networkEnabled||!this.inForeground)||vl(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const I=!this.inForeground&&u.inForeground,N=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||I&&N)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&Qt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,C.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new l(n,As.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(o=>this.pi(o.updateTimeMs,n)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vl(e).W().next(n=>this.Ii(n,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return $l.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ed.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,o){Qt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",p=15===(I=this.Xs)?c:14===I?f:13===I?oh:12===I?qf:11===I?Jc:void Sn();var I;let N;return this.ri.runTransaction(e,u,p,$=>(N=new l($,this.Ss?this.Ss.next():As.at),"readwrite-primary"===n?this.fi(N).next(q=>!!q||this.di(N)).next(q=>{if(!q)throw yi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Jt(St.FAILED_PRECONDITION,mu);return o(N)}).next(q=>this.wi(N).next(()=>q)):this.Vi(N).next(()=>o(N)))).then($=>(N.raiseOnCommittedEvent(),$))}Vi(e){return xu(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Jt(St.FAILED_PRECONDITION,cs)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xu(e).put("owner",n)}static C(){return fs.C()}_i(e){const n=xu(e);return n.get("owner").next(o=>this.mi(o)?(Qt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):yt.resolve())}pi(e,n){const o=Date.now();return!(e<o-n||e>o&&(yi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,de.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const o=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return Qt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){yi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xu(i){return v(i,"owner")}function vl(i){return v(i,"clientMetadata")}function Pd(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Zu{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Si=o,this.Di=u}static Ci(e,n){let o=Sr(),u=Sr();for(const p of n.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:u=u.add(p.doc.key)}return new Zu(e,n.fromCache,o,u)}}class Nd{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,o,u){return this.ki(e,n).next(p=>p||this.Mi(e,n,u,o)).next(p=>p||this.Oi(e,n))}ki(e,n){if(Xa(n))return yt.resolve(null);let o=eo(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=sl(n,null,"F"),o=eo(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const I=Sr(...p);return this.Ni.getDocuments(e,I).next(N=>this.indexManager.getMinOffset(e,o).next($=>{const q=this.Fi(n,N);return this.$i(n,q,I,$.readTime)?this.ki(e,sl(n,null,"F")):this.Bi(e,q,n,$)}))})))}Mi(e,n,o,u){return Xa(n)||u.isEqual(sr.min())?this.Oi(e,n):this.Ni.getDocuments(e,o).next(p=>{const I=this.Fi(n,p);return this.$i(n,I,o,u)?this.Oi(e,n):(as()<=P.in.DEBUG&&Qt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Jl(n)),this.Bi(e,I,n,za(u,-1)))})}Fi(e,n){let o=new _r(to(e));return n.forEach((u,p)=>{Fa(e,p)&&(o=o.add(p))}),o}$i(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const p="F"===e.limitType?n.last():n.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(u)>0)}Oi(e,n){return as()<=P.in.DEBUG&&Qt("QueryEngine","Using full collection scan to execute query:",Jl(n)),this.Ni.getDocumentsMatchingQuery(e,n,Bs.min())}Bi(e,n,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(p=>(n.forEach(I=>{p=p.insert(I.key,I)}),p))}}class vg{constructor(e,n,o,u){this.persistence=e,this.Li=n,this.It=u,this.Ui=new ai(Vn),this.qi=new ps(p=>bo(p),vu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $e(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function tp(i,e,n,o){return new vg(i,e,n,o)}function np(i,e){return fh.apply(this,arguments)}function fh(){return fh=(0,C.Z)(function*(i,e){const n=hn(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(p=>(u=p,n.Qi(e),n.mutationQueue.getAllMutationBatches(o))).next(p=>{const I=[],N=[];let $=Sr();for(const q of u){I.push(q.batchId);for(const ue of q.mutations)$=$.add(ue.key)}for(const q of p){N.push(q.batchId);for(const ue of q.mutations)$=$.add(ue.key)}return n.localDocuments.getDocuments(o,$).next(q=>({ji:q,removedBatchIds:I,addedBatchIds:N}))})})}),fh.apply(this,arguments)}function Eg(i,e){const n=hn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),p=n.Gi.newChangeBuffer({trackRemovals:!0});return function(I,N,$,q){const ue=$.batch,Ve=ue.keys();let vt=yt.resolve();return Ve.forEach(Ut=>{vt=vt.next(()=>q.getEntry(N,Ut)).next(Gt=>{const An=$.docVersions.get(Ut);ar(null!==An),Gt.version.compareTo(An)<0&&(ue.applyToRemoteDocument(Gt,$),Gt.isValidDocument()&&(Gt.setReadTime($.commitVersion),q.addEntry(Gt)))})}),vt.next(()=>I.mutationQueue.removeMutationBatch(N,ue))}(n,o,e,p).next(()=>p.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let N=Sr();for(let $=0;$<I.mutationResults.length;++$)I.mutationResults[$].transformResults.length>0&&(N=N.add(I.batch.mutations[$].key));return N}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}function ph(i){const e=hn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function nf(i,e){const n=hn(i),o=e.snapshotVersion;let u=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const I=n.Gi.newChangeBuffer({trackRemovals:!0});u=n.Ui;const N=[];e.targetChanges.forEach((ue,Ve)=>{const vt=u.get(Ve);if(!vt)return;N.push(n.Cs.removeMatchingKeys(p,ue.removedDocuments,Ve).next(()=>n.Cs.addMatchingKeys(p,ue.addedDocuments,Ve)));let Ut=vt.withSequenceNumber(p.currentSequenceNumber);var Gt,An,nr;e.targetMismatches.has(Ve)?Ut=Ut.withResumeToken(Br.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):ue.resumeToken.approximateByteSize()>0&&(Ut=Ut.withResumeToken(ue.resumeToken,o)),u=u.insert(Ve,Ut),An=Ut,nr=ue,(0===(Gt=vt).resumeToken.approximateByteSize()||An.snapshotVersion.toMicroseconds()-Gt.snapshotVersion.toMicroseconds()>=3e8||nr.addedDocuments.size+nr.modifiedDocuments.size+nr.removedDocuments.size>0)&&N.push(n.Cs.updateTargetData(p,Ut))});let $=$i(),q=Sr();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&N.push(n.persistence.referenceDelegate.updateLimboDocument(p,ue))}),N.push(rp(p,I,e.documentUpdates).next(ue=>{$=ue.Wi,q=ue.zi})),!o.isEqual(sr.min())){const ue=n.Cs.getLastRemoteSnapshotVersion(p).next(Ve=>n.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));N.push(ue)}return yt.waitFor(N).next(()=>I.apply(p)).next(()=>n.localDocuments.getLocalViewOfDocuments(p,$,q)).next(()=>$)}).then(p=>(n.Ui=u,p))}function rp(i,e,n){let o=Sr(),u=Sr();return n.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let I=$i();return n.forEach((N,$)=>{const q=p.get(N);$.isFoundDocument()!==q.isFoundDocument()&&(u=u.add(N)),$.isNoDocument()&&$.version.isEqual(sr.min())?(e.removeEntry(N,$.readTime),I=I.insert(N,$)):!q.isValidDocument()||$.version.compareTo(q.version)>0||0===$.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry($),I=I.insert(N,$)):Qt("LocalStore","Ignoring outdated watch update for ",N,". Current version:",q.version," Watch version:",$.version)}),{Wi:I,zi:u}})}function ip(i,e){const n=hn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function id(i,e){const n=hn(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Cs.getTargetData(o,e).next(p=>p?(u=p,yt.resolve(u)):n.Cs.allocateTargetId(o).next(I=>(u=new re(e,I,0,o.currentSequenceNumber),n.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(o.targetId,o),n.qi.set(e,o.targetId)),o})}function Oc(i,e,n){return sd.apply(this,arguments)}function sd(){return sd=(0,C.Z)(function*(i,e,n){const o=hn(i),u=o.Ui.get(e),p=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",p,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!Qs(I))throw I;Qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),sd.apply(this,arguments)}function rf(i,e,n){const o=hn(i);let u=sr.min(),p=Sr();return o.persistence.runTransaction("Execute query","readonly",I=>function(N,$,q){const ue=hn(N),Ve=ue.qi.get(q);return void 0!==Ve?yt.resolve(ue.Ui.get(Ve)):ue.Cs.getTargetData($,q)}(o,I,eo(e)).next(N=>{if(N)return u=N.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(I,N.targetId).next($=>{p=$})}).next(()=>o.Li.getDocumentsMatchingQuery(I,e,n?u:sr.min(),n?p:Sr())).next(N=>(Cg(o,al(e),N),{documents:N,Hi:p})))}function sp(i,e){const n=hn(i),o=hn(n.Cs),u=n.Ui.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",p=>o.se(p,e).next(I=>I?I.target:null))}function wg(i,e){const n=hn(i),o=n.Ki.get(e)||sr.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.Gi.getAllFromCollectionGroup(u,e,za(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Cg(n,e,u),u))}function Cg(i,e,n){let o=sr.min();n.forEach((u,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}function gh(){return gh=(0,C.Z)(function*(i,e,n,o){const u=hn(i);let p=Sr(),I=$i();for(const q of n){const ue=e.Ji(q.metadata.name);q.document&&(p=p.add(ue));const Ve=e.Yi(q);Ve.setReadTime(e.Xi(q.metadata.readTime)),I=I.insert(ue,Ve)}const N=u.Gi.newChangeBuffer({trackRemovals:!0}),$=yield id(u,(q=o,eo($s(Vr.fromString(`__bundle__/docs/${q}`)))));var q;return u.persistence.runTransaction("Apply bundle documents","readwrite",q=>rp(q,N,I).next(ue=>(N.apply(q),ue)).next(ue=>u.Cs.removeMatchingKeysForTargetId(q,$.targetId).next(()=>u.Cs.addMatchingKeys(q,p,$.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(q,ue.Wi,ue.zi)).next(()=>ue.Wi)))}),gh.apply(this,arguments)}function bg(i,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,C.Z)(function*(i,e,n=Sr()){const o=yield id(i,eo(su(e.bundledQuery))),u=hn(i);return u.persistence.runTransaction("Save named query","readwrite",p=>{const I=Hs(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.Ns.saveNamedQuery(p,e);const N=o.withResumeToken(Br.EMPTY_BYTE_STRING,I);return u.Ui=u.Ui.insert(N.targetId,N),u.Cs.updateTargetData(p,N).next(()=>u.Cs.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>u.Cs.addMatchingKeys(p,n,o.targetId)).next(()=>u.Ns.saveNamedQuery(p,e))})}),Tg.apply(this,arguments)}function op(i,e){return`firestore_clients_${i}_${e}`}function Dg(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function sf(i,e){return`firestore_targets_${i}_${e}`}class af{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Zi(e,n,o){const u=JSON.parse(o);let p,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(p=new Jt(u.error.code,u.error.message))),I?new af(e,n,u.state,p):(yi("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Zi(e,n){const o=JSON.parse(n);let u,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(u=new Jt(o.error.code,o.error.message))),p?new mh(e,o.state,u):(yi("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,p=tu();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=yu(o.activeTargetIds[I]),p=p.add(o.activeTargetIds[I]);return u?new au(e,p):(yi("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ap{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new ap(n.clientId,n.onlineState):(yi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uf{constructor(){this.activeTargetIds=tu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,n,o,u,p){this.window=e,this.Hs=n,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ai(Vn),this.started=!1,this.cr=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ar=op(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new uf),this.lr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,C.Z)(function*(){const n=yield e.syncEngine.vi();for(const u of n){if(u===e.sr)continue;const p=e.getItem(op(e.persistenceKey,u));if(p){const I=au.Zi(u,p);I&&(e.ur=e.ur.insert(I.clientId,I))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,o){this.Tr(e,n,o),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(sf(this.persistenceKey,e));if(o){const u=mh.Zi(e,o);u&&(n=u.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sf(this.persistenceKey,e))}updateQueryState(e,n,o){this.Rr(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Qt("SharedClientState","READ",e,n),n}setItem(e,n){Qt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Qt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void yi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,C.Z)(function*(){if(n.started){if(null!==o.key)if(n.lr.test(o.key)){if(null==o.newValue){const u=n.vr(o.key);return n.Vr(u,null)}{const u=n.Sr(o.key,o.newValue);if(u)return n.Vr(u.clientId,u)}}else if(n.dr.test(o.key)){if(null!==o.newValue){const u=n.Dr(o.key,o.newValue);if(u)return n.Cr(u)}}else if(n._r.test(o.key)){if(null!==o.newValue){const u=n.Nr(o.key,o.newValue);if(u)return n.kr(u)}}else if(o.key===n.wr){if(null!==o.newValue){const u=n.yr(o.newValue);if(u)return n.pr(u)}}else if(o.key===n.hr){const u=function(p){let I=As.at;if(null!=p)try{const N=JSON.parse(p);ar("number"==typeof N),I=N}catch(N){yi("SharedClientState","Failed to read sequence number from WebStorage",N)}return I}(o.newValue);u!==As.at&&n.sequenceNumberHandler(u)}else if(o.key===n.mr){const u=n.Mr(o.newValue);yield Promise.all(u.map(p=>n.syncEngine.Or(p)))}}else n.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,o){const u=new af(this.currentUser,e,n,o),p=Dg(this.persistenceKey,this.currentUser,e);this.setItem(p,u.tr())}Er(e){const n=Dg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,o){const u=sf(this.persistenceKey,e),p=new mh(e,n,o);this.setItem(u,p.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const o=this.vr(e);return au.Zi(o,n)}Dr(e,n){const o=this.dr.exec(e),u=Number(o[1]);return af.Zi(new zr(void 0!==o[2]?o[2]:null),u,n)}Nr(e,n){const o=this._r.exec(e),u=Number(o[1]);return mh.Zi(u,n)}yr(e){return ap.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var n=this;return(0,C.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);Qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const o=n?this.ur.insert(e,n):this.ur.remove(e),u=this.Ir(this.ur),p=this.Ir(o),I=[],N=[];return p.forEach($=>{u.has($)||I.push($)}),u.forEach($=>{p.has($)||N.push($)}),this.syncEngine.Br(I,N).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=tu();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Ag{constructor(){this.Lr=new uf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,o){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new uf,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gm{qr(e){}shutdown(){}}class Sg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Wm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class zm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,o,u,p){const I=this.ao(e,n);Qt("RestConnection","Sending: ",I,o);const N={};return this.ho(N,u,p),this.lo(e,I,N,o).then($=>(Qt("RestConnection","Received: ",$),$),$=>{throw Es("RestConnection",`${e} failed with error: `,$,"url: ",I,"request:",o),$})}fo(e,n,o,u,p,I){return this.co(e,n,o,u,p)}ho(e,n,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+os,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,p)=>e[p]=u),o&&o.headers.forEach((u,p)=>e[p]=u)}ao(e,n){return`${this.oo}/v1/${n}:${xg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,o,u){return new Promise((p,I)=>{const N=new uo;N.listenOnce(Wr.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case Ur.NO_ERROR:const q=N.getResponseJson();Qt("Connection","XHR received:",JSON.stringify(q)),p(q);break;case Ur.TIMEOUT:Qt("Connection",'RPC "'+e+'" timed out'),I(new Jt(St.DEADLINE_EXCEEDED,"Request time out"));break;case Ur.HTTP_ERROR:const ue=N.getStatus();if(Qt("Connection",'RPC "'+e+'" failed with status:',ue,"response text:",N.getResponseText()),ue>0){const Ve=N.getResponseJson().error;if(Ve&&Ve.status&&Ve.message){const vt=function(Ut){const Gt=Ut.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(Gt)>=0?Gt:St.UNKNOWN}(Ve.status);I(new Jt(vt,Ve.message))}else I(new Jt(St.UNKNOWN,"Server responded with status "+N.getStatus()))}else I(new Jt(St.UNAVAILABLE,"Connection failed."));break;default:Sn()}}finally{Qt("Connection",'RPC "'+e+'" completed.')}});const $=JSON.stringify(u);N.send(n,"POST",$,o,15)})}_o(e,n,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Rn(),I=Qr(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new Hr({})),this.ho(N.initMessageHeaders,n,o),N.encodeInitMessageHeaders=!0;const $=u.join("");Qt("Connection","Creating WebChannel: "+$,N);const q=p.createWebChannel($,N);let ue=!1,Ve=!1;const vt=new Wm({Hr:Gt=>{Ve?Qt("Connection","Not sending because WebChannel is closed:",Gt):(ue||(Qt("Connection","Opening WebChannel transport."),q.open(),ue=!0),Qt("Connection","WebChannel sending:",Gt),q.send(Gt))},Jr:()=>q.close()}),Ut=(Gt,An,nr)=>{Gt.listen(An,Ti=>{try{nr(Ti)}catch(ts){setTimeout(()=>{throw ts},0)}})};return Ut(q,si.EventType.OPEN,()=>{Ve||Qt("Connection","WebChannel transport opened.")}),Ut(q,si.EventType.CLOSE,()=>{Ve||(Ve=!0,Qt("Connection","WebChannel transport closed"),vt.io())}),Ut(q,si.EventType.ERROR,Gt=>{Ve||(Ve=!0,Es("Connection","WebChannel transport errored:",Gt),vt.io(new Jt(St.UNAVAILABLE,"The operation could not be completed")))}),Ut(q,si.EventType.MESSAGE,Gt=>{var An;if(!Ve){const nr=Gt.data[0];ar(!!nr);const Ti=nr,ts=Ti.error||(null===(An=Ti[0])||void 0===An?void 0:An.error);if(ts){Qt("Connection","WebChannel received error:",ts);const ns=ts.status;let go=function(Ki){const $o=di[Ki];if(void 0!==$o)return Ea($o)}(ns),zi=ts.message;void 0===go&&(go=St.INTERNAL,zi="Unknown error status: "+ns+" with message "+ts.message),Ve=!0,vt.io(new Jt(go,zi)),q.close()}else Qt("Connection","WebChannel received:",nr),vt.ro(nr)}}),Ut(I,Pr.STAT_EVENT,Gt=>{Gt.stat===pi.PROXY?Qt("Connection","Detected buffering proxy"):Gt.stat===pi.NOPROXY&&Qt("Connection","Detected no buffering proxy")}),setTimeout(()=>{vt.so()},0),vt}}function Mg(){return typeof window<"u"?window:null}function Fr(){return typeof document<"u"?document:null}function Od(i){return new Ol(i,!0)}class lf{constructor(e,n,o=1e3,u=1.5,p=6e4){this.Hs=e,this.timerId=n,this.wo=o,this.mo=u,this.yo=p,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,n-o);u>0&&Qt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class lp{constructor(e,n,o,u,p,I,N,$){this.Hs=e,this.Po=o,this.vo=u,this.Vo=p,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=N,this.listener=$,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new lf(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,C.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,C.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var o=this;return(0,C.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():n&&n.code===St.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):n&&n.code===St.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(n)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===n&&this.Go(o,u)},o=>{e(()=>{const u=new Jt(St.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,n){const o=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,C.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(Qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zm extends lp{constructor(e,n,o,u,p,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,I),this.It=p}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=function th(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===($=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:Sn(),u=e.targetChange.targetIds||[],p=function($,q){return $.gt?(ar(void 0===q||"string"==typeof q),Br.fromBase64String(q||"")):(ar(void 0===q||q instanceof Uint8Array),Br.fromUint8Array(q||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,N=I&&function($){const q=void 0===$.code?St.UNKNOWN:Ea($.code);return new Jt(q,$.message||"")}(I);n=new yd(o,u,p,N||null)}else if("documentChange"in e){const o=e.documentChange,u=Vo(i,o.document.name),p=Hs(o.document.updateTime),I=new us({mapValue:{fields:o.document.fields}}),N=ci.newFoundDocument(u,p,I);n=new nu(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const o=e.documentDelete,u=Vo(i,o.document),p=o.readTime?Hs(o.readTime):sr.min(),I=ci.newNoDocument(u,p);n=new nu([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=Vo(i,o.document);n=new nu([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Sn();{const o=e.filter,p=new Uo(o.count||0);n=new Ec(o.targetId,p)}}var $;return n}(this.It,e),o=function(u){if(!("targetChange"in u))return sr.min();const p=u.targetChange;return p.targetIds&&p.targetIds.length?sr.min():p.readTime?Hs(p.readTime):sr.min()}(e);return this.listener.Wo(n,o)}zo(e){const n={};n.database=ic(this.It),n.addTarget=function(u,p){let I;const N=p.target;return I=Ja(N)?{documents:fl(u,N)}:{query:Tc(u,N)},I.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?I.resumeToken=Hu(u,p.resumeToken):p.snapshotVersion.compareTo(sr.min())>0&&(I.readTime=wa(u,p.snapshotVersion.toTimestamp())),I}(this.It,e);const o=function Fl(i,e){const n=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.Bo(n)}Ho(e){const n={};n.database=ic(this.It),n.removeTarget=e,this.Bo(n)}}class qm extends lp{constructor(e,n,o,u,p,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,I),this.It=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(ar(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function Tu(i,e){return i&&i.length>0?(ar(void 0!==e),i.map(n=>function(o,u){let p=Hs(o.updateTime?o.updateTime:u);return p.isEqual(sr.min())&&(p=Hs(u)),new qc(p,o.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Hs(e.commitTime);return this.listener.Zo(o,n)}return ar(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ic(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>kl(this.It,o))};this.Bo(n)}}class Rg extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new Jt(St.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,p])=>this.Vo.co(e,n,o,u,p)).catch(u=>{throw"FirebaseError"===u.name?(u.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Jt(St.UNKNOWN,u.toString())})}fo(e,n,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,I])=>this.Vo.fo(e,n,o,p,I,u)).catch(p=>{throw"FirebaseError"===p.name?(p.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Jt(St.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class Km{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(yi(n),this.ou=!1):Qt("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Pg{constructor(e,n,o,u,p){var I=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.qr(N=>{o.enqueueAndForget((0,C.Z)(function*(){var $;od(I)&&(Qt("RemoteStore","Restarting streams for network reachability change."),yield($=(0,C.Z)(function*(q){const ue=hn(q);ue._u.add(4),yield yh(ue),ue.gu.set("Unknown"),ue._u.delete(4),yield _h(ue)}),function(q){return $.apply(this,arguments)})(I))}))}),this.gu=new Km(o,u)}}function _h(i){return cp.apply(this,arguments)}function cp(){return cp=(0,C.Z)(function*(i){if(od(i))for(const e of i.wu)yield e(!0)}),cp.apply(this,arguments)}function yh(i){return cf.apply(this,arguments)}function cf(){return cf=(0,C.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cf.apply(this,arguments)}function vh(i,e){const n=hn(i);n.du.has(e.targetId)||(n.du.set(e.targetId,e),hp(n)?Eh(n):ad(n).ko()&&dp(n,e))}function El(i,e){const n=hn(i),o=ad(n);n.du.delete(e),o.ko()&&df(n,e),0===n.du.size&&(o.ko()?o.Fo():od(n)&&n.gu.set("Unknown"))}function dp(i,e){i.yu.Ot(e.targetId),ad(i).zo(e)}function df(i,e){i.yu.Ot(e),ad(i).Ho(e)}function Eh(i){i.yu=new Kc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),ad(i).start(),i.gu.uu()}function hp(i){return od(i)&&!ad(i).No()&&i.du.size>0}function od(i){return 0===hn(i)._u.size}function Ym(i){i.yu=void 0}function Uy(i){return fp.apply(this,arguments)}function fp(){return fp=(0,C.Z)(function*(i){i.du.forEach((e,n)=>{dp(i,e)})}),fp.apply(this,arguments)}function Ng(i,e){return Og.apply(this,arguments)}function Og(){return Og=(0,C.Z)(function*(i,e){Ym(i),hp(i)?(i.gu.hu(e),Eh(i)):i.gu.set("Unknown")}),Og.apply(this,arguments)}function Qm(i,e,n){return kc.apply(this,arguments)}function kc(){return kc=(0,C.Z)(function*(i,e,n){if(i.gu.set("Online"),e instanceof yd&&2===e.state&&e.cause)try{yield(o=(0,C.Z)(function*(u,p){const I=p.cause;for(const N of p.targetIds)u.du.has(N)&&(yield u.remoteSyncer.rejectListen(N,I),u.du.delete(N),u.yu.removeTarget(N))}),function(u,p){return o.apply(this,arguments)})(i,e)}catch(o){Qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield hf(i,o)}else if(e instanceof nu?i.yu.Gt(e):e instanceof Ec?i.yu.Yt(e):i.yu.Wt(e),!n.isEqual(sr.min()))try{const o=yield ph(i.localStore);n.compareTo(o)>=0&&(yield function(u,p){const I=u.yu.te(p);return I.targetChanges.forEach((N,$)=>{if(N.resumeToken.approximateByteSize()>0){const q=u.du.get($);q&&u.du.set($,q.withResumeToken(N.resumeToken,p))}}),I.targetMismatches.forEach(N=>{const $=u.du.get(N);if(!$)return;u.du.set(N,$.withResumeToken(Br.EMPTY_BYTE_STRING,$.snapshotVersion)),df(u,N);const q=new re($.target,N,1,$.sequenceNumber);dp(u,q)}),u.remoteSyncer.applyRemoteEvent(I)}(i,n))}catch(o){Qt("RemoteStore","Failed to raise snapshot:",o),yield hf(i,o)}var o}),kc.apply(this,arguments)}function hf(i,e,n){return ff.apply(this,arguments)}function ff(){return ff=(0,C.Z)(function*(i,e,n){if(!Qs(e))throw e;i._u.add(1),yield yh(i),i.gu.set("Offline"),n||(n=()=>ph(i.localStore)),i.asyncQueue.enqueueRetryable((0,C.Z)(function*(){Qt("RemoteStore","Retrying IndexedDB access"),yield n(),i._u.delete(1),yield _h(i)}))}),ff.apply(this,arguments)}function wh(i,e){return e().catch(n=>hf(i,n,e))}function kd(i){return pf.apply(this,arguments)}function pf(){return pf=(0,C.Z)(function*(i){const e=hn(i),n=wl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Jm(e);)try{const u=yield ip(e.localStore,o);if(null===u){0===e.fu.length&&n.Fo();break}o=u.batchId,Xm(e,u)}catch(u){yield hf(e,u)}kg(e)&&Fg(e)}),pf.apply(this,arguments)}function Jm(i){return od(i)&&i.fu.length<10}function Xm(i,e){i.fu.push(e);const n=wl(i);n.ko()&&n.Yo&&n.Xo(e.mutations)}function kg(i){return od(i)&&!wl(i).No()&&i.fu.length>0}function Fg(i){wl(i).start()}function e_(i){return gf.apply(this,arguments)}function gf(){return gf=(0,C.Z)(function*(i){wl(i).eu()}),gf.apply(this,arguments)}function t_(i){return mf.apply(this,arguments)}function mf(){return mf=(0,C.Z)(function*(i){const e=wl(i);for(const n of i.fu)e.Xo(n.mutations)}),mf.apply(this,arguments)}function Lg(i,e,n){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,C.Z)(function*(i,e,n){const o=i.fu.shift(),u=V.from(o,e,n);yield wh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield kd(i)}),Ch.apply(this,arguments)}function Vy(i,e){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,C.Z)(function*(i,e){var n;e&&wl(i).Yo&&(yield(n=(0,C.Z)(function*(o,u){if($u(p=u.code)&&p!==St.ABORTED){const I=o.fu.shift();wl(o).Oo(),yield wh(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,u)),yield kd(o)}var p}),function(o,u){return n.apply(this,arguments)})(i,e)),kg(i)&&Fg(i)}),Ih.apply(this,arguments)}function Ug(i,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,C.Z)(function*(i,e){const n=hn(i);n.asyncQueue.verifyOperationInProgress(),Qt("RemoteStore","RemoteStore received new credentials");const o=od(n);n._u.add(3),yield yh(n),o&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield _h(n)}),Vg.apply(this,arguments)}function Fc(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,C.Z)(function*(i,e){const n=hn(i);e?(n._u.delete(2),yield _h(n)):e||(n._u.add(2),yield yh(n),n.gu.set("Unknown"))}),_f.apply(this,arguments)}function ad(i){return i.pu||(i.pu=function(e,n,o){const u=hn(e);return u.su(),new Zm(n,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Uy.bind(null,i),Zr:Ng.bind(null,i),Wo:Qm.bind(null,i)}),i.wu.push(function(){var e=(0,C.Z)(function*(n){n?(i.pu.Oo(),hp(i)?Eh(i):i.gu.set("Unknown")):(yield i.pu.stop(),Ym(i))});return function(n){return e.apply(this,arguments)}}())),i.pu}function wl(i){return i.Iu||(i.Iu=function(e,n,o){const u=hn(e);return u.su(),new qm(n,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:e_.bind(null,i),Zr:Vy.bind(null,i),tu:t_.bind(null,i),Zo:Lg.bind(null,i)}),i.wu.push(function(){var e=(0,C.Z)(function*(n){n?(i.Iu.Oo(),yield kd(i)):(yield i.Iu.stop(),i.fu.length>0&&(Qt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(n){return e.apply(this,arguments)}}())),i.Iu}class Mu{constructor(e,n,o,u,p){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=p,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,n,o,u,p){const I=Date.now()+o,N=new Mu(e,n,I,u,p);return N.start(o),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(i,e){if(yi("AsyncQueue",`${e}: ${i}`),Qs(i))return new Jt(St.UNAVAILABLE,`${e}: ${i}`);throw i}class Fd{constructor(e){this.comparator=e?(n,o)=>e(n,o)||on.comparator(n.key,o.key):(n,o)=>on.comparator(n.key,o.key),this.keyedMap=Xo(),this.sortedSet=new ai(this.comparator)}static emptySet(e){return new Fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(!u.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Fd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class yf{constructor(){this.Tu=new ai(on.comparator)}track(e){const n=e.doc.key,o=this.Tu.get(n);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(n):1===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Sn():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,o)=>{e.push(o)}),e}}class uu{constructor(e,n,o,u,p,I,N,$){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=p,this.fromCache=I,this.syncStateChanged=N,this.excludesMetadataChanges=$}static fromInitialDocuments(e,n,o,u){const p=[];return n.forEach(I=>{p.push({type:0,doc:I})}),new uu(e,n,Fd.emptySet(n),p,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Do(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class pp{constructor(){this.Au=void 0,this.listeners=[]}}class Bg{constructor(){this.queries=new ps(e=>ol(e),Do),this.onlineState="Unknown",this.Ru=new Set}}function bh(i,e){return jg.apply(this,arguments)}function jg(){return jg=(0,C.Z)(function*(i,e){const n=hn(i),o=e.query;let u=!1,p=n.queries.get(o);if(p||(u=!0,p=new pp),u)try{p.Au=yield n.onListen(o)}catch(I){const N=ud(I,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(N)}n.queries.set(o,p),p.listeners.push(e),e.bu(n.onlineState),p.Au&&e.Pu(p.Au)&&Th(n)}),jg.apply(this,arguments)}function vf(i,e){return $g.apply(this,arguments)}function $g(){return $g=(0,C.Z)(function*(i,e){const n=hn(i),o=e.query;let u=!1;const p=n.queries.get(o);if(p){const I=p.listeners.indexOf(e);I>=0&&(p.listeners.splice(I,1),u=0===p.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),$g.apply(this,arguments)}function Ef(i,e){const n=hn(i);let o=!1;for(const u of e){const I=n.queries.get(u.query);if(I){for(const N of I.listeners)N.Pu(u)&&(o=!0);I.Au=u}}o&&Th(n)}function wf(i,e,n){const o=hn(i),u=o.queries.get(e);if(u)for(const p of u.listeners)p.onError(n);o.queries.delete(e)}function Th(i){i.Ru.forEach(e=>{e.next()})}class Dh{constructor(e,n,o){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new uu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||!(this.options.Nu&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class gp{constructor(e,n){this.payload=e,this.byteLength=n}ku(){return"metadata"in this.payload}}class n_{constructor(e){this.It=e}Ji(e){return Vo(this.It,e)}Yi(e){return e.metadata.exists?sc(this.It,e.document,!1):ci.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Hs(e)}}class r_{constructor(e,n,o){this.Mu=e,this.localStore=n,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hg(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const o=Vr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Fu(e){const n=new Map,o=new n_(this.It);for(const u of e)if(u.metadata.queries){const p=o.Ji(u.metadata.name);for(const I of u.metadata.queries){const N=(n.get(I)||Sr()).add(p);n.set(I,N)}}return n}complete(){var e=this;return(0,C.Z)(function*(){const n=yield function Ig(i,e,n,o){return gh.apply(this,arguments)}(e.localStore,new n_(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield bg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:n}})()}}function Hg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Gg{constructor(e){this.key=e}}class Wg{constructor(e){this.key=e}}class mp{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=Sr(),this.mutatedKeys=Sr(),this.Ku=to(e),this.Gu=new Fd(this.Ku)}get Qu(){return this.Lu}ju(e,n){const o=n?n.Wu:new yf,u=n?n.Gu:this.Gu;let p=n?n.mutatedKeys:this.mutatedKeys,I=u,N=!1;const $="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,q="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ue,Ve)=>{const vt=u.get(ue),Ut=Fa(this.query,Ve)?Ve:null,Gt=!!vt&&this.mutatedKeys.has(vt.key),An=!!Ut&&(Ut.hasLocalMutations||this.mutatedKeys.has(Ut.key)&&Ut.hasCommittedMutations);let nr=!1;vt&&Ut?vt.data.isEqual(Ut.data)?Gt!==An&&(o.track({type:3,doc:Ut}),nr=!0):this.zu(vt,Ut)||(o.track({type:2,doc:Ut}),nr=!0,($&&this.Ku(Ut,$)>0||q&&this.Ku(Ut,q)<0)&&(N=!0)):!vt&&Ut?(o.track({type:0,doc:Ut}),nr=!0):vt&&!Ut&&(o.track({type:1,doc:vt}),nr=!0,($||q)&&(N=!0)),nr&&(Ut?(I=I.add(Ut),p=An?p.add(ue):p.delete(ue)):(I=I.delete(ue),p=p.delete(ue)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ue="F"===this.query.limitType?I.last():I.first();I=I.delete(ue.key),p=p.delete(ue.key),o.track({type:1,doc:ue})}return{Gu:I,Wu:o,$i:N,mutatedKeys:p}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const p=e.Wu.Eu();p.sort((q,ue)=>function(Ve,vt){const Ut=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sn()}};return Ut(Ve)-Ut(vt)}(q.type,ue.type)||this.Ku(q.doc,ue.doc)),this.Hu(o);const I=n?this.Ju():[],N=0===this.qu.size&&this.current?1:0,$=N!==this.Uu;return this.Uu=N,0!==p.length||$?{snapshot:new uu(this.query,e.Gu,u,p,e.mutatedKeys,0===N,$,!1),Yu:I}:{Yu:I}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new yf,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Sr(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const n=[];return e.forEach(o=>{this.qu.has(o)||n.push(new Wg(o))}),this.qu.forEach(o=>{e.has(o)||n.push(new Gg(o))}),n}Zu(e){this.Lu=e.Hi,this.qu=Sr();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return uu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class By{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class i_{constructor(e){this.key=e,this.ec=!1}}class jy{constructor(e,n,o,u,p,I){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=p,this.maxConcurrentLimboResolutions=I,this.nc={},this.sc=new ps(N=>ol(N),Do),this.ic=new Map,this.rc=new Set,this.oc=new ai(on.comparator),this.uc=new Map,this.cc=new Tn,this.ac={},this.hc=new Map,this.lc=rd.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function zg(i,e){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,C.Z)(function*(i,e){const n=Mf(i);let o,u;const p=n.sc.get(e);if(p)o=p.targetId,n.sharedClientState.addLocalQueryTarget(o),u=p.view.tc();else{const I=yield id(n.localStore,eo(e));n.isPrimaryClient&&vh(n.remoteStore,I);const N=n.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,u=yield _p(n,e,o,"current"===N)}return u}),Cf.apply(this,arguments)}function _p(i,e,n,o){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,C.Z)(function*(i,e,n,o){i.dc=(ue,Ve,vt)=>{return(Ut=(0,C.Z)(function*(Gt,An,nr,Ti){let ts=An.view.ju(nr);ts.$i&&(ts=yield rf(Gt.localStore,An.query,!1).then(({documents:zi})=>An.view.ju(zi,ts)));const ns=Ti&&Ti.targetChanges.get(An.targetId),go=An.view.applyChanges(ts,Gt.isPrimaryClient,ns);return bf(Gt,An.targetId,go.Yu),go.snapshot}),function(Gt,An,nr,Ti){return Ut.apply(this,arguments)})(i,ue,Ve,vt);var Ut};const u=yield rf(i.localStore,e,!0),p=new mp(e,u.Hi),I=p.ju(u.documents),N=Nl.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState),$=p.applyChanges(I,i.isPrimaryClient,N);bf(i,n,$.Yu);const q=new By(e,n,p);return i.sc.set(e,q),i.ic.has(n)?i.ic.get(n).push(e):i.ic.set(n,[e]),$.snapshot}),Ah.apply(this,arguments)}function $y(i,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,C.Z)(function*(i,e){const n=hn(i),o=n.sc.get(e),u=n.ic.get(o.targetId);if(u.length>1)return n.ic.set(o.targetId,u.filter(p=>!Do(p,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Oc(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),El(n.remoteStore,o.targetId),Ld(n,o.targetId)}).catch(Io))):(Ld(n,o.targetId),yield Oc(n.localStore,o.targetId,!0))}),Zg.apply(this,arguments)}function qg(){return qg=(0,C.Z)(function*(i,e,n){const o=Rf(i);try{const u=yield function(p,I){const N=hn(p),$=li.now(),q=I.reduce((vt,Ut)=>vt.add(Ut.key),Sr());let ue,Ve;return N.persistence.runTransaction("Locally write mutations","readwrite",vt=>{let Ut=$i(),Gt=Sr();return N.Gi.getEntries(vt,q).next(An=>{Ut=An,Ut.forEach((nr,Ti)=>{Ti.isValidDocument()||(Gt=Gt.add(nr))})}).next(()=>N.localDocuments.getOverlayedDocuments(vt,Ut)).next(An=>{ue=An;const nr=[];for(const Ti of I){const ts=O(Ti,ue.get(Ti.key).overlayedDocument);null!=ts&&nr.push(new Xe(Ti.key,ts,Oi(ts.value.mapValue),Wi.exists(!0)))}return N.mutationQueue.addMutationBatch(vt,$,nr,I)}).next(An=>{Ve=An;const nr=An.applyToLocalDocumentSet(ue,Gt);return N.documentOverlayCache.saveOverlays(vt,An.batchId,nr)})}).then(()=>({batchId:Ve.batchId,changes:ll(ue)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(p,I,N){let $=p.ac[p.currentUser.toKey()];$||($=new ai(Vn)),$=$.insert(I,N),p.ac[p.currentUser.toKey()]=$}(o,u.batchId,n),yield Gl(o,u.changes),yield kd(o.remoteStore)}catch(u){const p=ud(u,"Failed to persist write");n.reject(p)}}),qg.apply(this,arguments)}function s_(i,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,C.Z)(function*(i,e){const n=hn(i);try{const o=yield nf(n.localStore,e);e.targetChanges.forEach((u,p)=>{const I=n.uc.get(p);I&&(ar(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.ec=!0:u.modifiedDocuments.size>0?ar(I.ec):u.removedDocuments.size>0&&(ar(I.ec),I.ec=!1))}),yield Gl(n,o,e)}catch(o){yield Io(o)}}),Kg.apply(this,arguments)}function o_(i,e,n){const o=hn(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.sc.forEach((p,I)=>{const N=I.view.bu(e);N.snapshot&&u.push(N.snapshot)}),function(p,I){const N=hn(p);N.onlineState=I;let $=!1;N.queries.forEach((q,ue)=>{for(const Ve of ue.listeners)Ve.bu(I)&&($=!0)}),$&&Th(N)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Gy(i,e,n){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,C.Z)(function*(i,e,n){const o=hn(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.uc.get(e),p=u&&u.key;if(p){let I=new ai(on.comparator);I=I.insert(p,ci.newNoDocument(p,sr.min()));const N=Sr().add(p),$=new ui(sr.min(),new Map,new _r(Vn),I,N);yield s_(o,$),o.oc=o.oc.remove(p),o.uc.delete(e),Ep(o)}else yield Oc(o.localStore,e,!1).then(()=>Ld(o,e,n)).catch(Io)}),Yg.apply(this,arguments)}function Wy(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,C.Z)(function*(i,e){const n=hn(i),o=e.batch.batchId;try{const u=yield Eg(n.localStore,e);xh(n,o,null),If(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Gl(n,u)}catch(u){yield Io(u)}}),Hl.apply(this,arguments)}function yp(i,e,n){return vp.apply(this,arguments)}function vp(){return vp=(0,C.Z)(function*(i,e,n){const o=hn(i);try{const u=yield function(p,I){const N=hn(p);return N.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let q;return N.mutationQueue.lookupMutationBatch($,I).next(ue=>(ar(null!==ue),q=ue.keys(),N.mutationQueue.removeMutationBatch($,ue))).next(()=>N.mutationQueue.performConsistencyCheck($)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId($,q,I)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,q)).next(()=>N.localDocuments.getDocuments($,q))})}(o.localStore,e);xh(o,e,n),If(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Gl(o,u)}catch(u){yield Io(u)}}),vp.apply(this,arguments)}function Sh(){return Sh=(0,C.Z)(function*(i,e){const n=hn(i);od(n.remoteStore)||Qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const I=hn(p);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>I.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===o)return void e.resolve();const u=n.hc.get(o)||[];u.push(e),n.hc.set(o,u)}catch(o){const u=ud(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Sh.apply(this,arguments)}function If(i,e){(i.hc.get(e)||[]).forEach(n=>{n.resolve()}),i.hc.delete(e)}function xh(i,e,n){const o=hn(i);let u=o.ac[o.currentUser.toKey()];if(u){const p=u.get(e);p&&(n?p.reject(n):p.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Ld(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),n&&i.nc._c(o,n);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||uc(i,o)})}function uc(i,e){i.rc.delete(e.path.canonicalString());const n=i.oc.get(e);null!==n&&(El(i.remoteStore,n),i.oc=i.oc.remove(e),i.uc.delete(n),Ep(i))}function bf(i,e,n){for(const o of n)o instanceof Gg?(i.cc.addReference(o.key,e),a_(i,o)):o instanceof Wg?(Qt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||uc(i,o.key)):Sn()}function a_(i,e){const n=e.key,o=n.path.canonicalString();i.oc.get(n)||i.rc.has(o)||(Qt("SyncEngine","New document in limbo: "+n),i.rc.add(o),Ep(i))}function Ep(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const n=new on(Vr.fromString(e)),o=i.lc.next();i.uc.set(o,new i_(n)),i.oc=i.oc.insert(n,o),vh(i.remoteStore,new re(eo($s(n.path)),o,2,As.at))}}function Gl(i,e,n){return wp.apply(this,arguments)}function wp(){return wp=(0,C.Z)(function*(i,e,n){const o=hn(i),u=[],p=[],I=[];var N;o.sc.isEmpty()||(o.sc.forEach((N,$)=>{I.push(o.dc($,e,n).then(q=>{if(q){o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,q.fromCache?"not-current":"current"),u.push(q);const ue=Zu.Ci($.targetId,q);p.push(ue)}}))}),yield Promise.all(I),o.nc.Wo(u),yield(N=(0,C.Z)(function*($,q){const ue=hn($);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ve=>yt.forEach(q,vt=>yt.forEach(vt.Si,Ut=>ue.persistence.referenceDelegate.addReference(Ve,vt.targetId,Ut)).next(()=>yt.forEach(vt.Di,Ut=>ue.persistence.referenceDelegate.removeReference(Ve,vt.targetId,Ut)))))}catch(Ve){if(!Qs(Ve))throw Ve;Qt("LocalStore","Failed to update sequence numbers: "+Ve)}for(const Ve of q){const vt=Ve.targetId;if(!Ve.fromCache){const Ut=ue.Ui.get(vt),An=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);ue.Ui=ue.Ui.insert(vt,An)}}}),function($,q){return N.apply(this,arguments)})(o.localStore,p))}),wp.apply(this,arguments)}function u_(i,e){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,C.Z)(function*(i,e){const n=hn(i);if(!n.currentUser.isEqual(e)){Qt("SyncEngine","User change. New user:",e.toKey());const o=yield np(n.localStore,e);n.currentUser=e,(u=n).hc.forEach(I=>{I.forEach(N=>{N.reject(new Jt(St.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Gl(n,o.ji)}var u}),Ud.apply(this,arguments)}function Vd(i,e){const n=hn(i),o=n.uc.get(e);if(o&&o.ec)return Sr().add(o.key);{let u=Sr();const p=n.ic.get(e);if(!p)return u;for(const I of p){const N=n.sc.get(I);u=u.unionWith(N.view.Qu)}return u}}function Cp(i,e){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,C.Z)(function*(i,e){const n=hn(i),o=yield rf(n.localStore,e.query,!0),u=e.view.Zu(o);return n.isPrimaryClient&&bf(n,e.targetId,u.Yu),u}),Lc.apply(this,arguments)}function Tf(i,e){return ld.apply(this,arguments)}function ld(){return ld=(0,C.Z)(function*(i,e){const n=hn(i);return wg(n.localStore,e).then(o=>Gl(n,o))}),ld.apply(this,arguments)}function l_(i,e,n,o){return Df.apply(this,arguments)}function Df(){return Df=(0,C.Z)(function*(i,e,n,o){const u=hn(i),p=yield function(I,N){const $=hn(I),q=hn($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",ue=>q.Tn(ue,N).next(Ve=>Ve?$.localDocuments.getDocuments(ue,Ve):yt.resolve(null)))}(u.localStore,e);var N;null!==p?("pending"===n?yield kd(u.remoteStore):"acknowledged"===n||"rejected"===n?(xh(u,e,o||null),If(u,e),N=e,hn(hn(u.localStore).mutationQueue).An(N)):Sn(),yield Gl(u,p)):Qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Df.apply(this,arguments)}function Mh(){return Mh=(0,C.Z)(function*(i,e){const n=hn(i);if(Mf(n),Rf(n),!0===e&&!0!==n.fc){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Af(n,o.toArray());n.fc=!0,yield Fc(n.remoteStore,!0);for(const p of u)vh(n.remoteStore,p)}else if(!1===e&&!1!==n.fc){const o=[];let u=Promise.resolve();n.ic.forEach((p,I)=>{n.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>(Ld(n,I),Oc(n.localStore,I,!0))),El(n.remoteStore,I)}),yield u,yield Af(n,o),function(p){const I=hn(p);I.uc.forEach((N,$)=>{El(I.remoteStore,$)}),I.cc.fs(),I.uc=new Map,I.oc=new ai(on.comparator)}(n),n.fc=!1,yield Fc(n.remoteStore,!1)}}),Mh.apply(this,arguments)}function Af(i,e,n){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,C.Z)(function*(i,e,n){const o=hn(i),u=[],p=[];for(const I of e){let N;const $=o.ic.get(I);if($&&0!==$.length){N=yield id(o.localStore,eo($[0]));for(const q of $){const ue=o.sc.get(q),Ve=yield Cp(o,ue);Ve.snapshot&&p.push(Ve.snapshot)}}else{const q=yield sp(o.localStore,I);N=yield id(o.localStore,q),yield _p(o,xf(q),I,!1)}u.push(N)}return o.nc.Wo(p),u}),Sf.apply(this,arguments)}function xf(i){return rl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function c_(i){const e=hn(i);return hn(hn(e.localStore).persistence).vi()}function zy(i,e,n,o){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,C.Z)(function*(i,e,n,o){const u=hn(i);if(u.fc)return void Qt("SyncEngine","Ignoring unexpected query state notification.");const p=u.ic.get(e);if(p&&p.length>0)switch(n){case"current":case"not-current":{const I=yield wg(u.localStore,al(p[0])),N=ui.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Gl(u,I,N);break}case"rejected":yield Oc(u.localStore,e,!0),Ld(u,e,o);break;default:Sn()}}),Ip.apply(this,arguments)}function Xg(i,e,n){return bp.apply(this,arguments)}function bp(){return bp=(0,C.Z)(function*(i,e,n){const o=Mf(i);if(o.fc){for(const u of e){if(o.ic.has(u)){Qt("SyncEngine","Adding an already active target "+u);continue}const p=yield sp(o.localStore,u),I=yield id(o.localStore,p);yield _p(o,xf(p),I.targetId,!1),vh(o.remoteStore,I)}for(const u of n)o.ic.has(u)&&(yield Oc(o.localStore,u,!1).then(()=>{El(o.remoteStore,u),Ld(o,u)}).catch(Io))}}),bp.apply(this,arguments)}function Mf(i){const e=hn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gy.bind(null,e),e.nc.Wo=Ef.bind(null,e.eventManager),e.nc._c=wf.bind(null,e.eventManager),e}function Rf(i){const e=hn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yp.bind(null,e),e}class lu{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,C.Z)(function*(){n.It=Od(e.databaseInfo.databaseId),n.sharedClientState=n.mc(e),n.persistence=n.gc(e),yield n.persistence.start(),n.localStore=n.yc(e),n.gcScheduler=n.Ic(e,n.localStore),n.indexBackfillerScheduler=n.Tc(e,n.localStore)})()}Ic(e,n){return null}Tc(e,n){return null}yc(e){return tp(this.persistence,new Nd,e.initialUser,this.It)}gc(e){return new ro(ms.Bs,this.It)}mc(e){return new Ag}terminate(){var e=this;return(0,C.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tp extends lu{constructor(e,n,o){super(),this.Ec=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,C.Z)(function*(){yield n().call(o,e),yield o.Ec.initialize(o,e),yield Rf(o.Ec.syncEngine),yield kd(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return tp(this.persistence,new Nd,e.initialUser,this.It)}Ic(e,n){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Tc(e,n){const o=new Pa(n,this.persistence);return new Ju(e.asyncQueue,o)}gc(e){const n=Pd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ia.withCacheSize(this.cacheSizeBytes):Ia.DEFAULT;return new zs(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Mg(),Fr(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Ag}}class h_ extends Tp{constructor(e,n){super(e,n,!1),this.Ec=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,C.Z)(function*(){yield n().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof up&&(o.sharedClientState.syncEngine={Fr:l_.bind(null,u),$r:zy.bind(null,u),Br:Xg.bind(null,u),vi:c_.bind(null,u),Or:Tf.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var p=(0,C.Z)(function*(I){yield function Jg(i,e){return Mh.apply(this,arguments)}(o.Ec.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return p.apply(this,arguments)}}())})()}mc(e){const n=Mg();if(!up.C(n))throw new Jt(St.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Pd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class em{initialize(e,n){var o=this;return(0,C.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>o_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=u_.bind(null,o.syncEngine),yield Fc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Bg}createDatastore(e){const n=Od(e.databaseInfo.databaseId),o=new zm(e.databaseInfo);return new Rg(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return n=this.localStore,o=this.datastore,u=e.asyncQueue,p=N=>o_(this.syncEngine,N,0),I=Sg.C()?new Sg:new Gm,new Pg(n,o,u,p,I);var n,o,u,p,I}createSyncEngine(e,n){return function(o,u,p,I,N,$,q){const ue=new jy(o,u,p,I,N,$);return q&&(ue.fc=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,C.Z)(function*(n){const o=hn(n);Qt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield yh(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function tm(i,e=10240){let n=0;return{read:()=>(0,C.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,C.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Bd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class nm{constructor(e,n){this.bc=e,this.It=n,this.metadata=new ji,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,C.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,C.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,C.Z)(function*(){const n=yield e.Vc();if(null===n)return null;const o=e.Pc.decode(n),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const p=yield e.Dc(u);return new gp(JSON.parse(p),n.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,C.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const n=e.Cc();n<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Dc(e){var n=this;return(0,C.Z)(function*(){for(;n.buffer.length<e;)(yield n.xc())&&n.Sc("Reached the end of bundle when more is expected.");const o=n.Pc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,C.Z)(function*(){const n=yield e.bc.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class f_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,C.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Jt(St.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,C.Z)(function*(p,I){const N=hn(p),$=ic(N.It)+"/documents",q={documents:I.map(Ut=>rc(N.It,Ut))},ue=yield N.fo("BatchGetDocuments",$,q,I.length),Ve=new Map;ue.forEach(Ut=>{const Gt=function hl(i,e){return"found"in e?function(n,o){ar(!!o.found);const u=Vo(n,o.found.name),p=Hs(o.found.updateTime),I=new us({mapValue:{fields:o.found.fields}});return ci.newFoundDocument(u,p,I)}(i,e):"missing"in e?function(n,o){ar(!!o.missing),ar(!!o.readTime);const u=Vo(n,o.missing),p=Hs(o.readTime);return ci.newNoDocument(u,p)}(i,e):Sn()}(N.It,Ut);Ve.set(Gt.key.toString(),Gt)});const vt=[];return I.forEach(Ut=>{const Gt=Ve.get(Ut.toString());ar(!!Gt),vt.push(Gt)}),vt}),function(p,I){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new wr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,C.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const p=on.fromPath(u);e.mutations.push(new Ei(p,e.precondition(p)))}),yield(o=(0,C.Z)(function*(u,p){const I=hn(u),N=ic(I.It)+"/documents",$={writes:p.map(q=>kl(I.It,q))};yield I.co("Commit",N,$)}),function(u,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Sn();n=sr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Jt(St.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(sr.min())?Wi.exists(!1):Wi.updateTime(n):Wi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(sr.min()))throw new Jt(St.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wi.updateTime(n)}return Wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class p_{constructor(e,n,o,u,p){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=p,this.Nc=o.maxAttempts,this.xo=new lf(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,C.Z)(function*(){const n=new f_(e.datastore),o=e.Mc(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(p=>{e.Oc(p)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const n=this.updateFunction(e);return!ho(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!$u(n)}return!1}}class g_{constructor(e,n,o,u){var p=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=zr.UNAUTHENTICATED,this.clientId=xa.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,C.Z)(function*(N){Qt("FirestoreClient","Received user=",N.uid),yield p.authCredentialListener(N),p.user=N});return function(N){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(Qt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,C.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(St.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=ud(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Dp(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,C.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Qt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,C.Z)(function*(p){o.isEqual(p)||(yield np(e.localStore,p),o=p)});return function(p){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Ap.apply(this,arguments)}function Sp(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,C.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Mp(i);Qt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>Ug(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,p)=>Ug(e.remoteStore,p)),i.onlineComponents=e}),xp.apply(this,arguments)}function Mp(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,C.Z)(function*(i){return i.offlineComponents||(Qt("FirestoreClient","Using default OfflineComponentProvider"),yield Dp(i,new lu)),i.offlineComponents}),Pf.apply(this,arguments)}function Rh(i){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,C.Z)(function*(i){return i.onlineComponents||(Qt("FirestoreClient","Using default OnlineComponentProvider"),yield Sp(i,new em)),i.onlineComponents}),Rp.apply(this,arguments)}function Cl(i){return Mp(i).then(e=>e.persistence)}function jd(i){return Mp(i).then(e=>e.localStore)}function rm(i){return Rh(i).then(e=>e.remoteStore)}function Pp(i){return Rh(i).then(e=>e.syncEngine)}function Ph(i){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,C.Z)(function*(i){const e=yield Rh(i),n=e.eventManager;return n.onListen=zg.bind(null,e.syncEngine),n.onUnlisten=$y.bind(null,e.syncEngine),n}),Nf.apply(this,arguments)}function Of(i,e,n={}){const o=new ji;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(u,p,I,N,$){const q=new Bd({next:Ve=>{p.enqueueAndForget(()=>vf(u,ue));const vt=Ve.docs.has(I);!vt&&Ve.fromCache?$.reject(new Jt(St.UNAVAILABLE,"Failed to get document because the client is offline.")):vt&&Ve.fromCache&&N&&"server"===N.source?$.reject(new Jt(St.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Ve)},error:Ve=>$.reject(Ve)}),ue=new Dh($s(I.path),q,{includeMetadataChanges:!0,Nu:!0});return bh(u,ue)}(yield Ph(i),i.asyncQueue,e,n,o)})),o.promise}function im(i,e,n={}){const o=new ji;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(u,p,I,N,$){const q=new Bd({next:Ve=>{p.enqueueAndForget(()=>vf(u,ue)),Ve.fromCache&&"server"===N.source?$.reject(new Jt(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Ve)},error:Ve=>$.reject(Ve)}),ue=new Dh(I,q,{includeMetadataChanges:!0,Nu:!0});return bh(u,ue)}(yield Ph(i),i.asyncQueue,e,n,o)})),o.promise}const kp=new Map;function sm(i,e,n){if(!n)throw new Jt(St.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function w_(i,e,n,o){if(!0===e&&!0===o)throw new Jt(St.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Ff(i){if(!on.isDocumentKey(i))throw new Jt(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function C_(i){if(on.isDocumentKey(i))throw new Jt(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Nh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":Sn()}function hi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Jt(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(i);throw new Jt(St.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Fp(i,e){if(e<=0)throw new Jt(St.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Lp{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,w_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jt(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lp(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Tl;switch(n.type){case"gapi":return new Qu(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Jt(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=kp.get(e);n&&(Qt("ComponentProvider","Removing Datastore"),kp.delete(e),n.terminate())}(this),Promise.resolve()}}function lc(i,e,n,o={}){var u;const p=(i=hi(i,cd))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Es("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${n}`,ssl:!1})),o.mockUserToken){let I,N;if("string"==typeof o.mockUserToken)I=o.mockUserToken,N=zr.MOCK_USER;else{I=(0,de.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new Jt(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new zr($)}i._authCredentials=new ca(new Pu(I,N))}}class _s{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _s(this.firestore,e,this._key)}}class xo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class cu extends xo{constructor(e,n,o){super(e,n,$s(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _s(this.firestore,null,new on(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function I_(i,e,...n){if(i=(0,de.m9)(i),sm("collection","path",e),i instanceof cd){const o=Vr.fromString(e,...n);return C_(o),new cu(i,null,o)}{if(!(i instanceof _s||i instanceof cu))throw new Jt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Vr.fromString(e,...n));return C_(o),new cu(i.firestore,null,o)}}function Up(i,e){if(i=hi(i,cd),sm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(St.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xo(i,null,(n=e,new Iu(Vr.emptyPath(),n)));var n}function Vp(i,e,...n){if(i=(0,de.m9)(i),1===arguments.length&&(e=xa.R()),sm("doc","path",e),i instanceof cd){const o=Vr.fromString(e,...n);return Ff(o),new _s(i,null,new on(o))}{if(!(i instanceof _s||i instanceof cu))throw new Jt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Vr.fromString(e,...n));return Ff(o),new _s(i.firestore,i instanceof cu?i.converter:null,new on(o))}}function b_(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof _s||i instanceof cu)&&(e instanceof _s||e instanceof cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function om(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof xo&&e instanceof xo&&i.firestore===e.firestore&&Do(i._query,e._query)&&i.converter===e.converter}class Oh{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new lf(this,"async_queue_retry"),this.jc=()=>{const n=Fr();n&&Qt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=Fr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=Fr();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new ji;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,C.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(n){if(!Qs(n))throw n;Qt("AsyncQueue","Operation failed with retryable error: "+n)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,yi("INTERNAL UNHANDLED ERROR: ",function(p){let I=p.message||"";return p.stack&&(I=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),I}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=n,n}enqueueAfterDelay(e,n,o){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const u=Mu.createAndSchedule(this,e,n,o,p=>this.Jc(p));return this.Uc.push(u),u}Wc(){this.qc&&Sn()}verifyOperationInProgress(){}Yc(){var e=this;return(0,C.Z)(function*(){let n;do{n=e.$c,yield n}while(n!==e.$c)})()}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Bp(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Zy{constructor(){this._progressObserver={},this._taskCompletionResolver=new ji,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const T_=-1;class Rs extends cd{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new Oh,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||am(this),this._firestoreClient.terminate()}}function D_(i,e){const n="object"==typeof i?i:(0,h.getApp)(),o="string"==typeof i?i:e||"(default)";return(0,h._getProvider)(n,"firestore").getImmediate({identifier:o})}function po(i){return i._firestoreClient||am(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function am(i){var e;const n=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new _u(i._databaseId,p,i._persistenceKey,(N=n).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var p,N;i._firestoreClient=new g_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function um(i,e){kh(i=hi(i,Rs));const n=po(i),o=i._freezeSettings(),u=new em;return lm(n,u,new Tp(u,o.cacheSizeBytes,e?.forceOwnership))}function jp(i){kh(i=hi(i,Rs));const e=po(i),n=i._freezeSettings(),o=new em;return lm(e,o,new h_(o,n.cacheSizeBytes))}function lm(i,e,n){const o=new ji;return i.asyncQueue.enqueue((0,C.Z)(function*(){try{yield Dp(i,n),yield Sp(i,e),o.resolve()}catch(u){const p=u;if(!("FirebaseError"===(I=p).name?I.code===St.FAILED_PRECONDITION||I.code===St.UNIMPLEMENTED:!(typeof DOMException<"u"&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw p;Es("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var I})).then(()=>o.promise)}function $p(i){if(i._initialized&&!i._terminated)throw new Jt(St.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ji;return i._queue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{yield(n=(0,C.Z)(function*(o){if(!fs.C())return Promise.resolve();const u=o+"main";yield fs.delete(u)}),function(o){return n.apply(this,arguments)})(Pd(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function A_(i){return function(e){const n=new ji;return e.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function Qg(i,e){return Sh.apply(this,arguments)}(yield Pp(e),n)})),n.promise}(po(i=hi(i,Rs)))}function S_(i){return function m_(i){return i.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield Cl(i),n=yield rm(i);return e.setNetworkEnabled(!0),function(o){const u=hn(o);return u._u.delete(0),_h(u)}(n)}))}(po(i=hi(i,Rs)))}function x_(i){return function __(i){return i.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield Cl(i),n=yield rm(i);return e.setNetworkEnabled(!1),(o=(0,C.Z)(function*(u){const p=hn(u);p._u.add(0),yield yh(p),p.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(n);var o}))}(po(i=hi(i,Rs)))}function M_(i,e){const n=po(i=hi(i,Rs)),o=new Zy;return function E_(i,e,n,o){const u=function(p,I){let N;return N="string"==typeof p?(new TextEncoder).encode(p):p,$=function($,q){if($ instanceof Uint8Array)return tm($,q);if($ instanceof ArrayBuffer)return tm(new Uint8Array($),q);if($ instanceof ReadableStream)return $.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new nm($,I);var $}(n,Od(e));i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){!function d_(i,e,n){const o=hn(i);var u;(u=(0,C.Z)(function*(p,I,N){try{const $=yield I.getMetadata();if(yield function(vt,Ut){const Gt=hn(vt),An=Hs(Ut.createTime);return Gt.persistence.runTransaction("hasNewerBundle","readonly",nr=>Gt.Ns.getBundleMetadata(nr,Ut.id)).then(nr=>!!nr&&nr.createTime.compareTo(An)>=0)}(p.localStore,$))return yield I.close(),N._completeWith({taskState:"Success",documentsLoaded:(vt=$).totalDocuments,bytesLoaded:vt.totalBytes,totalDocuments:vt.totalDocuments,totalBytes:vt.totalBytes}),Promise.resolve(new Set);N._updateProgress(Hg($));const q=new r_($,p.localStore,I.It);let ue=yield I.wc();for(;ue;){const vt=yield q.Ou(ue);vt&&N._updateProgress(vt),ue=yield I.wc()}const Ve=yield q.complete();return yield Gl(p,Ve.Bu,void 0),yield function(vt,Ut){const Gt=hn(vt);return Gt.persistence.runTransaction("Save bundle","readwrite",An=>Gt.Ns.saveBundleMetadata(An,Ut))}(p.localStore,$),N._completeWith(Ve.progress),Promise.resolve(Ve.$u)}catch($){return Es("SyncEngine",`Loading bundle failed with ${$}`),N._failWith($),Promise.resolve(new Set)}var vt}),function(p,I,N){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Pp(i),u,o)}))}(n,i._databaseId,e,o),o}function R_(i,e){return function Op(i,e){return i.asyncQueue.enqueue((0,C.Z)(function*(){return function(n,o){const u=hn(n);return u.persistence.runTransaction("Get named query","readonly",p=>u.Ns.getNamedQuery(p,o))}(yield jd(i),e)}))}(po(i=hi(i,Rs)),e).then(n=>n?new xo(i,null,n.query):null)}function kh(i){if(i._initialized||i._terminated)throw new Jt(St.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Jt(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qu(Br.fromBase64String(e))}catch(n){throw new Jt(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qu(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dd{constructor(e){this._methodName=e}}class Lf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Jt(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Jt(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}}const Hp=/^__.*__$/;class P_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Xe(e,this.data,this.fieldMask,n,this.fieldTransforms):new ae(e,this.data,n,this.fieldTransforms)}}class Il{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Xe(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $d(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sn()}}class Mo{constructor(e,n,o,u,p,I){this.settings=e,this.databaseId=n,this.It=o,this.ignoreUndefinedProperties=u,void 0===p&&this.ea(),this.fieldTransforms=p||[],this.fieldMask=I||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Mo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Lh(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if($d(this.na)&&Hp.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class hd{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=o||Od(e)}fa(e,n,o,u=!1){return new Mo({na:e,methodName:n,la:o,path:Ii.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Wl(i){const e=i._freezeSettings(),n=Od(i._databaseId);return new hd(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ja(i,e,n,o,u,p={}){const I=i.fa(p.merge||p.mergeFields?2:0,e,n,u);Uf("Data must be an object, but it was:",I,o);const N=Gp(o,I);let $,q;if(p.merge)$=new Js(I.fieldMask),q=I.fieldTransforms;else if(p.mergeFields){const ue=[];for(const Ve of p.mergeFields){const vt=Vf(e,Ve,n);if(!I.contains(vt))throw new Jt(St.INVALID_ARGUMENT,`Field '${vt}' is specified in your field mask but missing from your input data.`);zp(ue,vt)||ue.push(vt)}$=new Js(ue),q=I.fieldTransforms.filter(Ve=>$.covers(Ve.field))}else $=null,q=I.fieldTransforms;return new P_(new us(N),$,q)}class fd extends dd{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function pd(i,e,n){return new Mo({na:3,la:e.settings.la,methodName:i._methodName,ra:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Uc extends dd{_toFieldTransform(e){return new Jo(e.path,new Lo)}isEqual(e){return e instanceof Uc}}class Hd extends dd{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=pd(this,e,!0),o=this.da.map(p=>Ku(p,n)),u=new Qo(o);return new Jo(e.path,u)}isEqual(e){return this===e}}class Gd extends dd{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=pd(this,e,!0),o=this.da.map(p=>Ku(p,n)),u=new La(o);return new Jo(e.path,u)}isEqual(e){return this===e}}class Wd extends dd{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=new Bu(e.It,Xl(e.It,this._a));return new Jo(e.path,n)}isEqual(e){return this===e}}function Vc(i,e,n,o){const u=i.fa(1,e,n);Uf("Data must be an object, but it was:",u,o);const p=[],I=us.empty();qa(o,($,q)=>{const ue=Fh(e,$,n);q=(0,de.m9)(q);const Ve=u.ua(ue);if(q instanceof fd)p.push(ue);else{const vt=Ku(q,Ve);null!=vt&&(p.push(ue),I.set(ue,vt))}});const N=new Js(p);return new Il(I,N,u.fieldTransforms)}function Bc(i,e,n,o,u,p){const I=i.fa(1,e,n),N=[Vf(e,o,n)],$=[u];if(p.length%2!=0)throw new Jt(St.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let vt=0;vt<p.length;vt+=2)N.push(Vf(e,p[vt])),$.push(p[vt+1]);const q=[],ue=us.empty();for(let vt=N.length-1;vt>=0;--vt)if(!zp(q,N[vt])){const Ut=N[vt];let Gt=$[vt];Gt=(0,de.m9)(Gt);const An=I.ua(Ut);if(Gt instanceof fd)q.push(Ut);else{const nr=Ku(Gt,An);null!=nr&&(q.push(Ut),ue.set(Ut,nr))}}const Ve=new Js(q);return new Il(ue,Ve,I.fieldTransforms)}function gd(i,e,n,o=!1){return Ku(n,i.fa(o?4:3,e))}function Ku(i,e){if(Wp(i=(0,de.m9)(i)))return Uf("Unsupported field value:",e,i),Gp(i,e);if(i instanceof dd)return function(n,o){if(!$d(o.na))throw o.aa(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(n,o){const u=[];let p=0;for(const I of n){let N=Ku(I,o.ca(p));null==N&&(N={nullValue:"NULL_VALUE"}),u.push(N),p++}return{arrayValue:{values:u}}}(i,e)}return function(n,o){if(null===(n=(0,de.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return Xl(o.It,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const u=li.fromDate(n);return{timestampValue:wa(o.It,u)}}if(n instanceof li){const u=new li(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wa(o.It,u)}}if(n instanceof Lf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qu)return{bytesValue:Hu(o.It,n._byteString)};if(n instanceof _s){const u=o.databaseId,p=n.firestore._databaseId;if(!p.isEqual(u))throw o.aa(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:no(n.firestore._databaseId||o.databaseId,n._key.path)}}throw o.aa(`Unsupported field value: ${Nh(n)}`)}(i,e)}function Gp(i,e){const n={};return Kl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(i,(o,u)=>{const p=Ku(u,e.ia(o));null!=p&&(n[o]=p)}),{mapValue:{fields:n}}}function Wp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof li||i instanceof Lf||i instanceof qu||i instanceof _s||i instanceof dd)}function Uf(i,e,n){if(!Wp(n)||"object"!=typeof(o=n)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Nh(n);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function Vf(i,e,n){if((e=(0,de.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return Fh(i,e);throw Lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const cm=new RegExp("[~\\*/\\[\\]]");function Fh(i,e,n){if(e.search(cm)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new du(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Lh(i,e,n,o,u){const p=o&&!o.isEmpty(),I=void 0!==u;let N=`Function ${e}() called with invalid data`;n&&(N+=" (via `toFirestore()`)"),N+=". ";let $="";return(p||I)&&($+=" (found",p&&($+=` in field ${o}`),I&&($+=` in document ${u}`),$+=")"),new Jt(St.INVALID_ARGUMENT,N+i+$)}function zp(i,e){return i.some(n=>n.isEqual(e))}class zd{constructor(e,n,o,u,p){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new _s(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new N_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class N_ extends zd{data(){return super.data()}}function Bf(i,e){return"string"==typeof e?Fh(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class md extends zd{constructor(e,n,o,u,p,I){super(e,n,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Bf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Zd extends md{data(e={}){return super.data(e)}}class cc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new jc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Zd(this._firestore,this._userDataWriter,o.key,o,new jc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Jt(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new Zd(o._firestore,o._userDataWriter,I.doc.key,I.doc,new jc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>u||3!==I.type).map(I=>{const N=new Zd(o._firestore,o._userDataWriter,I.doc.key,I.doc,new jc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let $=-1,q=-1;return 0!==I.type&&($=p.indexOf(I.doc.key),p=p.delete(I.doc.key)),1!==I.type&&(p=p.add(I.doc),q=p.indexOf(I.doc.key)),{type:Zp(I.type),doc:N,oldIndex:$,newIndex:q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Zp(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sn()}}function O_(i,e){return i instanceof md&&e instanceof md?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof cc&&e instanceof cc&&i._firestore===e._firestore&&om(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Uh(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Jt(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}function qp(i,...e){for(const n of e)i=n._apply(i);return i}class k_ extends $c{constructor(e,n,o){super(),this.wa=e,this.ma=n,this.ga=o,this.type="where"}_apply(e){const n=Wl(e.firestore),o=function(u,p,I,N,$,q,ue){let Ve;if($.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Jt(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){_m(ue,q);const Ut=[];for(const Gt of ue)Ut.push(ng(N,u,Gt));Ve={arrayValue:{values:Ut}}}else Ve=ng(N,u,ue)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||_m(ue,q),Ve=gd(I,"where",ue,"in"===q||"not-in"===q);const vt=bi.create($,q,Ve);return function(Ut,Gt){if(Gt.dt()){const nr=il(Ut);if(null!==nr&&!nr.isEqual(Gt.field))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nr.toString()}' and '${Gt.field.toString()}'`);const Ti=va(Ut);null!==Ti&&ym(0,Gt.field,Ti)}const An=function(nr,Ti){for(const ts of nr.filters)if(Ti.indexOf(ts.op)>=0)return ts.op;return null}(Ut,function(nr){switch(nr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Gt.op));if(null!==An)throw new Jt(St.INVALID_ARGUMENT,An===Gt.op?`Invalid query. You cannot use more than one '${Gt.op.toString()}' filter.`:`Invalid query. You cannot use '${Gt.op.toString()}' filters with '${An.toString()}' filters.`)}(u,vt),vt}(e._query,0,n,e.firestore._databaseId,this.wa,this.ma,this.ga);return new xo(e.firestore,e.converter,function(u,p){const I=u.filters.concat([p]);return new Iu(u.path,u.collectionGroup,u.explicitOrderBy.slice(),I,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}function Kp(i,e,n){const o=e,u=Bf("where",i);return new k_(u,o,n)}class Yp extends $c{constructor(e,n){super(),this.wa=e,this.ya=n,this.type="orderBy"}_apply(e){const n=function(o,u,p){if(null!==o.startAt)throw new Jt(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Jt(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new Uu(u,p);return function(N,$){if(null===va(N)){const q=il(N);null!==q&&ym(0,q,$.field)}}(o,I),I}(e._query,this.wa,this.ya);return new xo(e.firestore,e.converter,function(o,u){const p=o.explicitOrderBy.concat([u]);return new Iu(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function dm(i,e="asc"){const n=e,o=Bf("orderBy",i);return new Yp(o,n)}class Qp extends $c{constructor(e,n,o){super(),this.type=e,this.pa=n,this.Ia=o}_apply(e){return new xo(e.firestore,e.converter,sl(e._query,this.pa,this.Ia))}}function Jp(i){return Fp("limit",i),new Qp("limit",i,"F")}function hm(i){return Fp("limitToLast",i),new Qp("limitToLast",i,"L")}class Xp extends $c{constructor(e,n,o){super(),this.type=e,this.Ta=n,this.Ea=o}_apply(e){const n=tg(e,this.type,this.Ta,this.Ea);return new xo(e.firestore,e.converter,(u=n,new Iu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function eg(...i){return new Xp("startAt",i,!0)}function fm(...i){return new Xp("startAfter",i,!1)}class pm extends $c{constructor(e,n,o){super(),this.type=e,this.Ta=n,this.Ea=o}_apply(e){const n=tg(e,this.type,this.Ta,this.Ea);return new xo(e.firestore,e.converter,(u=n,new Iu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function gm(...i){return new pm("endBefore",i,!1)}function mm(...i){return new pm("endAt",i,!0)}function tg(i,e,n,o){if(n[0]=(0,de.m9)(n[0]),n[0]instanceof zd)return function(u,p,I,N,$){if(!N)throw new Jt(St.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const q=[];for(const ue of To(u))if(ue.field.isKeyField())q.push(tn(p,N.key));else{const Ve=N.data.field(ue.field);if(el(Ve))throw new Jt(St.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ve){const vt=ue.field.canonicalString();throw new Jt(St.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${vt}' (used as the orderBy) does not exist.`)}q.push(Ve)}return new fo(q,$)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Wl(i.firestore);return function(p,I,N,$,q,ue){const Ve=p.explicitOrderBy;if(q.length>Ve.length)throw new Jt(St.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const vt=[];for(let Ut=0;Ut<q.length;Ut++){const Gt=q[Ut];if(Ve[Ut].field.isKeyField()){if("string"!=typeof Gt)throw new Jt(St.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof Gt}`);if(!Ml(p)&&-1!==Gt.indexOf("/"))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${Gt}' contains a slash.`);const An=p.path.child(Vr.fromString(Gt));if(!on.isDocumentKey(An))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${An}' is not because it contains an odd number of segments.`);const nr=new on(An);vt.push(tn(I,nr))}else{const An=gd(N,$,Gt);vt.push(An)}}return new fo(vt,ue)}(i._query,i.firestore._databaseId,u,e,n,o)}}function ng(i,e,n){if("string"==typeof(n=(0,de.m9)(n))){if(""===n)throw new Jt(St.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ml(e)&&-1!==n.indexOf("/"))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Vr.fromString(n));if(!on.isDocumentKey(o))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return tn(i,new on(o))}if(n instanceof _s)return tn(i,n._key);throw new Jt(St.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function _m(i,e){if(!Array.isArray(i)||0===i.length)throw new Jt(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Jt(St.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ym(i,e,n){if(!n.isEqual(e))throw new Jt(St.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const F_={maxAttempts:5};class Vh{convertValue(e,n="none"){switch(T(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Sn()}}convertObject(e,n){const o={};return qa(e.fields,(u,p)=>{o[u]=this.convertValue(p,n)}),o}convertGeoPoint(e){return new Lf(gi(e.latitude),gi(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Fu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){const n=Xs(e);return new li(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Vr.fromString(e);ar(wd(o));const u=new xs(o.get(1),o.get(3)),p=new on(o.popFirst(5));return u.isEqual(n)||yi(`Document ${p} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),p}}function qd(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class vm extends Vh{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,n)}}class rg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wl(e)}set(e,n,o){this._verifyNotCommitted();const u=dc(e,this._firestore),p=qd(u.converter,n,o),I=ja(this._dataReader,"WriteBatch.set",u._key,p,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,Wi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const p=dc(e,this._firestore);let I;return I="string"==typeof(n=(0,de.m9)(n))||n instanceof du?Bc(this._dataReader,"WriteBatch.update",p._key,n,o,u):Vc(this._dataReader,"WriteBatch.update",p._key,n),this._mutations.push(I.toMutation(p._key,Wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dc(e,this._firestore);return this._mutations=this._mutations.concat(new wr(n._key,Wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(St.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dc(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new Jt(St.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Em(i){i=hi(i,_s);const e=hi(i.firestore,Rs);return Of(po(e),i._key).then(n=>jf(e,i,n))}class Hc extends Vh{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,n)}}function wm(i){i=hi(i,_s);const e=hi(i.firestore,Rs),n=po(e),o=new Hc(e);return function y_(i,e){const n=new ji;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(o=(0,C.Z)(function*(u,p,I){try{const N=yield function($,q){const ue=hn($);return ue.persistence.runTransaction("read document","readonly",Ve=>ue.localDocuments.getDocument(Ve,q))}(u,p);N.isFoundDocument()?I.resolve(N):N.isNoDocument()?I.resolve(null):I.reject(new Jt(St.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const $=ud(N,`Failed to get document '${p} from cache`);I.reject($)}}),function(u,p,I){return o.apply(this,arguments)})(yield jd(i),e,n);var o})),n.promise}(n,i._key).then(u=>new md(e,o,i._key,u,new jc(null!==u&&u.hasLocalMutations,!0),i.converter))}function Cm(i){i=hi(i,_s);const e=hi(i.firestore,Rs);return Of(po(e),i._key,{source:"server"}).then(n=>jf(e,i,n))}function Im(i){i=hi(i,xo);const e=hi(i.firestore,Rs),n=po(e),o=new Hc(e);return Uh(i._query),im(n,i._query).then(u=>new cc(e,o,i,u))}function Yy(i){i=hi(i,xo);const e=hi(i.firestore,Rs),n=po(e),o=new Hc(e);return function v_(i,e){const n=new ji;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(o=(0,C.Z)(function*(u,p,I){try{const N=yield rf(u,p,!0),$=new mp(p,N.Hi),q=$.ju(N.documents),ue=$.applyChanges(q,!1);I.resolve(ue.snapshot)}catch(N){const $=ud(N,`Failed to execute query '${p} against cache`);I.reject($)}}),function(u,p,I){return o.apply(this,arguments)})(yield jd(i),e,n);var o})),n.promise}(n,i._query).then(u=>new cc(e,o,i,u))}function L_(i){i=hi(i,xo);const e=hi(i.firestore,Rs),n=po(e),o=new Hc(e);return im(n,i._query,{source:"server"}).then(u=>new cc(e,o,i,u))}function U_(i,e,n){i=hi(i,_s);const o=hi(i.firestore,Rs),u=qd(i.converter,e,n);return Kd(o,[ja(Wl(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Wi.none())])}function bm(i,e,n,...o){i=hi(i,_s);const u=hi(i.firestore,Rs),p=Wl(u);let I;return I="string"==typeof(e=(0,de.m9)(e))||e instanceof du?Bc(p,"updateDoc",i._key,e,n,o):Vc(p,"updateDoc",i._key,e),Kd(u,[I.toMutation(i._key,Wi.exists(!0))])}function V_(i){return Kd(hi(i.firestore,Rs),[new wr(i._key,Wi.none())])}function Ro(i,e){const n=hi(i.firestore,Rs),o=Vp(i),u=qd(i.converter,e);return Kd(n,[ja(Wl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Wi.exists(!1))]).then(()=>o)}function Tm(i,...e){var n,o,u;i=(0,de.m9)(i);let p={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Bp(e[I])||(p=e[I],I++);const N={includeMetadataChanges:p.includeMetadataChanges};if(Bp(e[I])){const Ve=e[I];e[I]=null===(n=Ve.next)||void 0===n?void 0:n.bind(Ve),e[I+1]=null===(o=Ve.error)||void 0===o?void 0:o.bind(Ve),e[I+2]=null===(u=Ve.complete)||void 0===u?void 0:u.bind(Ve)}let $,q,ue;if(i instanceof _s)q=hi(i.firestore,Rs),ue=$s(i._key.path),$={next:Ve=>{e[I]&&e[I](jf(q,i,Ve))},error:e[I+1],complete:e[I+2]};else{const Ve=hi(i,xo);q=hi(Ve.firestore,Rs),ue=Ve._query;const vt=new Hc(q);$={next:Ut=>{e[I]&&e[I](new cc(q,vt,Ve,Ut))},error:e[I+1],complete:e[I+2]},Uh(i._query)}return function(Ve,vt,Ut,Gt){const An=new Bd(Gt),nr=new Dh(vt,An,Ut);return Ve.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return bh(yield Ph(Ve),nr)})),()=>{An.Rc(),Ve.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return vf(yield Ph(Ve),nr)}))}}(po(q),ue,N,$)}function B_(i,e){return function kf(i,e){const n=new Bd(e);return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return o=yield Ph(i),u=n,hn(o).Ru.add(u),void u.next();var o,u})),()=>{n.Rc(),i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return o=yield Ph(i),u=n,void hn(o).Ru.delete(u);var o,u}))}}(po(i=hi(i,Rs)),Bp(e)?e:{next:e})}function Kd(i,e){return function(n,o){const u=new ji;return n.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function Hy(i,e,n){return qg.apply(this,arguments)}(yield Pp(n),o,u)})),u.promise}(po(i),e)}function jf(i,e,n){const o=n.docs.get(e._key),u=new Hc(i);return new md(i,u,e._key,o,new jc(n.hasPendingWrites,n.fromCache),e.converter)}class j_ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Wl(e)}get(e){const n=dc(e,this._firestore),o=new vm(this._firestore);return this._transaction.lookup([n._key]).then(u=>{if(!u||1!==u.length)return Sn();const p=u[0];if(p.isFoundDocument())return new zd(this._firestore,o,p.key,p,n.converter);if(p.isNoDocument())return new zd(this._firestore,o,n._key,null,n.converter);throw Sn()})}set(e,n,o){const u=dc(e,this._firestore),p=qd(u.converter,n,o),I=ja(this._dataReader,"Transaction.set",u._key,p,null!==u.converter,o);return this._transaction.set(u._key,I),this}update(e,n,o,...u){const p=dc(e,this._firestore);let I;return I="string"==typeof(n=(0,de.m9)(n))||n instanceof du?Bc(this._dataReader,"Transaction.update",p._key,n,o,u):Vc(this._dataReader,"Transaction.update",p._key,n),this._transaction.update(p._key,I),this}delete(e){const n=dc(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=dc(e,this._firestore),o=new Hc(this._firestore);return super.get(e).then(u=>new md(this._firestore,o,n._key,u._document,new jc(!1,!1),n.converter))}}function Dm(i,e,n){i=hi(i,Rs);const o=Object.assign(Object.assign({},F_),n);return function(u){if(u.maxAttempts<1)throw new Jt(St.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Np(i,e,n){const o=new ji;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){const u=yield(p=i,Rh(p).then(I=>I.datastore));var p;new p_(i.asyncQueue,u,n,e,o).run()})),o.promise}(po(i),u=>e(new j_(i,u)),o)}function Am(){return new fd("deleteField")}function Yd(){return new Uc("serverTimestamp")}function $_(...i){return new Hd("arrayUnion",i)}function H_(...i){return new Gd("arrayRemove",i)}function Sm(i){return new Wd("increment",i)}!function(i,e=!0){os=h.SDK_VERSION,(0,h._registerComponent)(new Z.wA("firestore",(n,{instanceIdentifier:o,options:u})=>{const p=n.getProvider("app").getImmediate(),I=new Rs(new Zl(n.getProvider("auth-internal")),new Ga(n.getProvider("app-check-internal")),function(N,$){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new Jt(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(N.options.projectId,$)}(p,o),p);return u=Object.assign({useFetchStreams:e},u),I._setSettings(u),I},"PUBLIC").setMultipleInstances(!0)),(0,h.registerVersion)(Or,"3.5.0",i),(0,h.registerVersion)(Or,"3.5.0","esm2017")}()},2090:(an,ht,j)=>{j.d(ht,{$s:()=>Jn,BH:()=>st,DV:()=>mn,G6:()=>ee,GJ:()=>Kn,L:()=>be,LL:()=>Mt,Pz:()=>xn,Sg:()=>ot,UG:()=>at,UI:()=>dr,US:()=>Le,Yr:()=>ut,ZB:()=>fe,ZR:()=>Ye,b$:()=>qt,cI:()=>gn,dS:()=>_e,eu:()=>ze,g5:()=>Z,gK:()=>ri,gQ:()=>Lr,h$:()=>qe,hl:()=>se,hu:()=>h,jU:()=>it,m9:()=>wn,ne:()=>mr,p$:()=>ie,pd:()=>Xn,r3:()=>jn,ru:()=>Ht,tV:()=>tt,uI:()=>Ot,ug:()=>mt,vZ:()=>Cr,w1:()=>gt,w9:()=>Nn,xO:()=>Mr,xb:()=>ir,z$:()=>nt,zI:()=>Pe,zd:()=>dn});const h=function(Te,le){if(!Te)throw Z(le)},Z=function(Te){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Te)},P=function(Te){const le=[];let we=0;for(let Oe=0;Oe<Te.length;Oe++){let Re=Te.charCodeAt(Oe);Re<128?le[we++]=Re:Re<2048?(le[we++]=Re>>6|192,le[we++]=63&Re|128):55296==(64512&Re)&&Oe+1<Te.length&&56320==(64512&Te.charCodeAt(Oe+1))?(Re=65536+((1023&Re)<<10)+(1023&Te.charCodeAt(++Oe)),le[we++]=Re>>18|240,le[we++]=Re>>12&63|128,le[we++]=Re>>6&63|128,le[we++]=63&Re|128):(le[we++]=Re>>12|224,le[we++]=Re>>6&63|128,le[we++]=63&Re|128)}return le},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Te,le){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const we=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,Oe=[];for(let Re=0;Re<Te.length;Re+=3){const wt=Te[Re],Dt=Re+1<Te.length,Yt=Dt?Te[Re+1]:0,Bn=Re+2<Te.length,Zn=Bn?Te[Re+2]:0;let Se=(15&Yt)<<2|Zn>>6,Fe=63&Zn;Bn||(Fe=64,Dt||(Se=64)),Oe.push(we[wt>>2],we[(3&wt)<<4|Yt>>4],we[Se],we[Fe])}return Oe.join("")},encodeString(Te,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(Te):this.encodeByteArray(P(Te),le)},decodeString(Te,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(Te):function(Te){const le=[];let we=0,Oe=0;for(;we<Te.length;){const Re=Te[we++];if(Re<128)le[Oe++]=String.fromCharCode(Re);else if(Re>191&&Re<224){const wt=Te[we++];le[Oe++]=String.fromCharCode((31&Re)<<6|63&wt)}else if(Re>239&&Re<365){const Bn=((7&Re)<<18|(63&Te[we++])<<12|(63&Te[we++])<<6|63&Te[we++])-65536;le[Oe++]=String.fromCharCode(55296+(Bn>>10)),le[Oe++]=String.fromCharCode(56320+(1023&Bn))}else{const wt=Te[we++],Dt=Te[we++];le[Oe++]=String.fromCharCode((15&Re)<<12|(63&wt)<<6|63&Dt)}}return le.join("")}(this.decodeStringToByteArray(Te,le))},decodeStringToByteArray(Te,le){this.init_();const we=le?this.charToByteMapWebSafe_:this.charToByteMap_,Oe=[];for(let Re=0;Re<Te.length;){const wt=we[Te.charAt(Re++)],Yt=Re<Te.length?we[Te.charAt(Re)]:0;++Re;const Zn=Re<Te.length?we[Te.charAt(Re)]:64;++Re;const Je=Re<Te.length?we[Te.charAt(Re)]:64;if(++Re,null==wt||null==Yt||null==Zn||null==Je)throw Error();Oe.push(wt<<2|Yt>>4),64!==Zn&&(Oe.push(Yt<<4&240|Zn>>2),64!==Je&&Oe.push(Zn<<6&192|Je))}return Oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}},qe=function(Te){const le=P(Te);return Le.encodeByteArray(le,!0)},be=function(Te){return qe(Te).replace(/\./g,"")},tt=function(Te){try{return Le.decodeString(Te,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function ie(Te){return fe(void 0,Te)}function fe(Te,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return le}for(const we in le)!le.hasOwnProperty(we)||!Ce(we)||(Te[we]=fe(Te[we],le[we]));return Te}function Ce(Te){return"__proto__"!==Te}class st{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,we)=>{this.resolve=le,this.reject=we})}wrapCallback(le){return(we,Oe)=>{we?this.reject(we):this.resolve(Oe),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(we):le(we,Oe))}}}function ot(Te,le){if(Te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Oe=le||"demo-project",Re=Te.iat||0,wt=Te.sub||Te.user_id;if(!wt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Dt=Object.assign({iss:`https://securetoken.google.com/${Oe}`,aud:Oe,iat:Re,exp:Re+3600,auth_time:Re,sub:wt,user_id:wt,firebase:{sign_in_provider:"custom",identities:{}}},Te);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(Dt)),""].join(".")}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function at(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function Ht(){const Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gt(){const Te=nt();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0}function ut(){return!1}function ee(){return!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){return"object"==typeof indexedDB}function ze(){return new Promise((Te,le)=>{try{let we=!0;const Oe="validate-browser-context-for-indexeddb-analytics-module",Re=self.indexedDB.open(Oe);Re.onsuccess=()=>{Re.result.close(),we||self.indexedDB.deleteDatabase(Oe),Te(!0)},Re.onupgradeneeded=()=>{we=!1},Re.onerror=()=>{var wt;le((null===(wt=Re.error)||void 0===wt?void 0:wt.message)||"")}}catch(we){le(we)}})}function Pe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ye extends Error{constructor(le,we,Oe){super(we),this.code=le,this.customData=Oe,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(le,we,Oe){this.service=le,this.serviceName=we,this.errors=Oe}create(le,...we){const Oe=we[0]||{},Re=`${this.service}/${le}`,wt=this.errors[le],Dt=wt?function kt(Te,le){return Te.replace(Bt,(we,Oe)=>{const Re=le[Oe];return null!=Re?String(Re):`<${Oe}?>`})}(wt,Oe):"Error";return new Ye(Re,`${this.serviceName}: ${Dt} (${Re}).`,Oe)}}const Bt=/\{\$([^}]+)}/g;function gn(Te){return JSON.parse(Te)}function xn(Te){return JSON.stringify(Te)}const Et=function(Te){let le={},we={},Oe={},Re="";try{const wt=Te.split(".");le=gn(tt(wt[0])||""),we=gn(tt(wt[1])||""),Re=wt[2],Oe=we.d||{},delete we.d}catch{}return{header:le,claims:we,data:Oe,signature:Re}},Nn=function(Te){const we=Et(Te).claims;return!!we&&"object"==typeof we&&we.hasOwnProperty("iat")},Kn=function(Te){const le=Et(Te).claims;return"object"==typeof le&&!0===le.admin};function jn(Te,le){return Object.prototype.hasOwnProperty.call(Te,le)}function mn(Te,le){if(Object.prototype.hasOwnProperty.call(Te,le))return Te[le]}function ir(Te){for(const le in Te)if(Object.prototype.hasOwnProperty.call(Te,le))return!1;return!0}function dr(Te,le,we){const Oe={};for(const Re in Te)Object.prototype.hasOwnProperty.call(Te,Re)&&(Oe[Re]=le.call(we,Te[Re],Re,Te));return Oe}function Cr(Te,le){if(Te===le)return!0;const we=Object.keys(Te),Oe=Object.keys(le);for(const Re of we){if(!Oe.includes(Re))return!1;const wt=Te[Re],Dt=le[Re];if(ur(wt)&&ur(Dt)){if(!Cr(wt,Dt))return!1}else if(wt!==Dt)return!1}for(const Re of Oe)if(!we.includes(Re))return!1;return!0}function ur(Te){return null!==Te&&"object"==typeof Te}function Mr(Te){const le=[];for(const[we,Oe]of Object.entries(Te))Array.isArray(Oe)?Oe.forEach(Re=>{le.push(encodeURIComponent(we)+"="+encodeURIComponent(Re))}):le.push(encodeURIComponent(we)+"="+encodeURIComponent(Oe));return le.length?"&"+le.join("&"):""}function dn(Te){const le={};return Te.replace(/^\?/,"").split("&").forEach(Oe=>{if(Oe){const[Re,wt]=Oe.split("=");le[decodeURIComponent(Re)]=decodeURIComponent(wt)}}),le}function Xn(Te){const le=Te.indexOf("?");if(!le)return"";const we=Te.indexOf("#",le);return Te.substring(le,we>0?we:void 0)}class Lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let le=1;le<this.blockSize;++le)this.pad_[le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(le,we){we||(we=0);const Oe=this.W_;if("string"==typeof le)for(let Je=0;Je<16;Je++)Oe[Je]=le.charCodeAt(we)<<24|le.charCodeAt(we+1)<<16|le.charCodeAt(we+2)<<8|le.charCodeAt(we+3),we+=4;else for(let Je=0;Je<16;Je++)Oe[Je]=le[we]<<24|le[we+1]<<16|le[we+2]<<8|le[we+3],we+=4;for(let Je=16;Je<80;Je++){const Se=Oe[Je-3]^Oe[Je-8]^Oe[Je-14]^Oe[Je-16];Oe[Je]=4294967295&(Se<<1|Se>>>31)}let Zn,Ir,Re=this.chain_[0],wt=this.chain_[1],Dt=this.chain_[2],Yt=this.chain_[3],Bn=this.chain_[4];for(let Je=0;Je<80;Je++){Je<40?Je<20?(Zn=Yt^wt&(Dt^Yt),Ir=1518500249):(Zn=wt^Dt^Yt,Ir=1859775393):Je<60?(Zn=wt&Dt|Yt&(wt|Dt),Ir=2400959708):(Zn=wt^Dt^Yt,Ir=3395469782);const Se=(Re<<5|Re>>>27)+Zn+Bn+Ir+Oe[Je]&4294967295;Bn=Yt,Yt=Dt,Dt=4294967295&(wt<<30|wt>>>2),wt=Re,Re=Se}this.chain_[0]=this.chain_[0]+Re&4294967295,this.chain_[1]=this.chain_[1]+wt&4294967295,this.chain_[2]=this.chain_[2]+Dt&4294967295,this.chain_[3]=this.chain_[3]+Yt&4294967295,this.chain_[4]=this.chain_[4]+Bn&4294967295}update(le,we){if(null==le)return;void 0===we&&(we=le.length);const Oe=we-this.blockSize;let Re=0;const wt=this.buf_;let Dt=this.inbuf_;for(;Re<we;){if(0===Dt)for(;Re<=Oe;)this.compress_(le,Re),Re+=this.blockSize;if("string"==typeof le){for(;Re<we;)if(wt[Dt]=le.charCodeAt(Re),++Dt,++Re,Dt===this.blockSize){this.compress_(wt),Dt=0;break}}else for(;Re<we;)if(wt[Dt]=le[Re],++Dt,++Re,Dt===this.blockSize){this.compress_(wt),Dt=0;break}}this.inbuf_=Dt,this.total_+=we}digest(){const le=[];let we=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Re=this.blockSize-1;Re>=56;Re--)this.buf_[Re]=255&we,we/=256;this.compress_(this.buf_);let Oe=0;for(let Re=0;Re<5;Re++)for(let wt=24;wt>=0;wt-=8)le[Oe]=this.chain_[Re]>>wt&255,++Oe;return le}}function mr(Te,le){const we=new en(Te,le);return we.subscribe.bind(we)}class en{constructor(le,we){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=we,this.task.then(()=>{le(this)}).catch(Oe=>{this.error(Oe)})}next(le){this.forEachObserver(we=>{we.next(le)})}error(le){this.forEachObserver(we=>{we.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,we,Oe){let Re;if(void 0===le&&void 0===we&&void 0===Oe)throw new Error("Missing Observer.");Re=function Yn(Te,le){if("object"!=typeof Te||null===Te)return!1;for(const we of le)if(we in Te&&"function"==typeof Te[we])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:we,complete:Oe},void 0===Re.next&&(Re.next=er),void 0===Re.error&&(Re.error=er),void 0===Re.complete&&(Re.complete=er);const wt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Re.error(this.finalError):Re.complete()}catch{}}),this.observers.push(Re),wt}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let we=0;we<this.observers.length;we++)this.sendOne(we,le)}sendOne(le,we){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{we(this.observers[le])}catch(Oe){typeof console<"u"&&console.error&&console.error(Oe)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function er(){}function ri(Te,le){return`${Te} failed: ${le} argument `}const _e=function(Te){const le=[];let we=0;for(let Oe=0;Oe<Te.length;Oe++){let Re=Te.charCodeAt(Oe);if(Re>=55296&&Re<=56319){const wt=Re-55296;Oe++,h(Oe<Te.length,"Surrogate pair missing trail surrogate."),Re=65536+(wt<<10)+(Te.charCodeAt(Oe)-56320)}Re<128?le[we++]=Re:Re<2048?(le[we++]=Re>>6|192,le[we++]=63&Re|128):Re<65536?(le[we++]=Re>>12|224,le[we++]=Re>>6&63|128,le[we++]=63&Re|128):(le[we++]=Re>>18|240,le[we++]=Re>>12&63|128,le[we++]=Re>>6&63|128,le[we++]=63&Re|128)}return le},mt=function(Te){let le=0;for(let we=0;we<Te.length;we++){const Oe=Te.charCodeAt(we);Oe<128?le++:Oe<2048?le+=2:Oe>=55296&&Oe<=56319?(le+=4,we++):le+=3}return le};function Jn(Te,le=1e3,we=2){const Oe=le*Math.pow(we,Te),Re=Math.round(.5*Oe*(Math.random()-.5)*2);return Math.min(144e5,Oe+Re)}function wn(Te){return Te&&Te._delegate?Te._delegate:Te}},880:(an,ht,j)=>{j.r(ht),j.d(ht,{JuegosModule:()=>gt});var C=j(6895),h=j(7001),Z=j(5861),P=j(4650),de=j(4359);function Le(Be,ut){if(1&Be){const ee=P.EpF();P.TgZ(0,"button",11),P.NdJ("click",function(){const Pe=P.CHM(ee).$implicit,Ue=P.oxw();return P.KtG(Ue.attemptWithLetter(Pe.letter))}),P._uU(1),P.qZA()}if(2&Be){const ee=ut.$implicit;P.xp6(1),P.Oqu(ee.letter)}}let qe=(()=>{class Be{constructor(ee){this.listado=ee,this.ALPHABET="ABCDEFGHIJKLMN\xd1OPQRSTUVWXYZ",this.MAX_ATTEMPTS=6,this.MASK_CHAR="_",this.mensaje="",this.displayedWord="",this.letra="",this.palabras=["casa","bebida","gato","perro","elefante","mesa","silla","computadora","typescript","javascript"],this.palabrita="",this.letters=[],this.hiddenWord=[],this.remainingAttempts=0,this.resultado="",this.movimientos=0,this.start="visible",this.palabrita=""}ngOnInit(){}resetGame(){this.resetAttempts(),this.setupKeys(),this.chooseWord(),this.imagePath(),this.displayWord()}checkGameStatus(){if(this.playerWins()){this.mensaje="Ganaste!. La palabra era "+this.getUnhiddenWord(),this.resultado="visible";let ee={tiempo:"N/A",resultado:"Gano",clicks:this.movimientos.toString(),juego:"Ahorcado",correctas:"N/A",errores:(this.MAX_ATTEMPTS-this.remainingAttempts).toString()};this.listado.addResultado(ee)}if(this.playerLoses()){this.mensaje="Perdiste. La palabra era "+this.getUnhiddenWord(),this.resultado="visible";let ee={tiempo:"N/A",resultado:"Perdio",clicks:this.movimientos.toString(),correctas:"N/A",juego:"Ahorcado",errores:(this.MAX_ATTEMPTS-this.remainingAttempts).toString()};this.listado.addResultado(ee)}}getUnhiddenWord(){let ee="";for(const se of this.hiddenWord)ee+=se.letter;return ee}playerWins(){for(const ee of this.hiddenWord)if(ee.hidden)return!1;return!0}playerLoses(){return this.remainingAttempts<=0}imagePath(){this.imagen=`/assets/imagenes/ahorcado/Ahorcado-${this.MAX_ATTEMPTS-this.remainingAttempts}.png`}resetAttempts(){this.displayedWord="",this.movimientos=0,this.remainingAttempts=this.MAX_ATTEMPTS}chooseWord(){var ee=this;return(0,Z.Z)(function*(){ee.palabrita="";let se=ee.palabras[Math.floor(Math.random()*ee.palabras.length)];ee.palabrita=se,console.log("Palabra: "+se),ee.prepareWord(se)})()}prepareWord(ee){ee=ee.toUpperCase(),this.hiddenWord=[];for(const se of ee)this.hiddenWord.push({letter:se,hidden:!0})}displayWord(){let ee="";for(const se of this.hiddenWord)ee+=se.hidden?this.MASK_CHAR:se.letter,ee+=" ";this.displayedWord=ee}setupKeys(){this.letters=[];for(let ee=0;ee<this.ALPHABET.length;ee++)this.letters.push({letter:this.ALPHABET[ee],disabled:!1})}letterExistsInWord(ee){for(const se of this.hiddenWord)if(se.letter===ee)return!0;return!1}discoverLetter(ee){for(const se in this.hiddenWord)this.hiddenWord[se].letter===ee&&(this.hiddenWord[se].hidden=!1);this.displayWord()}attemptWithLetter(ee){this.movimientos+=1,this.letters=this.letters.filter(function se(ze){return ze.letter!=ee}),this.letterExistsInWord(ee)?this.discoverLetter(ee):(this.remainingAttempts-=1,this.imagePath()),this.checkGameStatus()}clickBoton(){this.start="",this.resultado="",this.letra="",this.resetGame()}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.Y36(de.L))},Be.\u0275cmp=P.Xpm({type:Be,selectors:[["app-ahorcado"]],decls:21,vars:12,consts:[[1,"container-fluid"],["id","app",1,"row"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"col-12","text-center"],[1,"text-success"],[1,"displayed-word"],[1,"h4","text-danger"],["alt","",1,"img-fluid",3,"src"],["class","btn btn-success m-1 btn-lg",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-success","m-1","btn-lg",3,"click"]],template:function(ee,se){1&ee&&(P.TgZ(0,"main",0)(1,"div",1)(2,"div",2),P.NdJ("click",function(){return se.clickBoton()}),P._uU(3," Click para empezar "),P.qZA(),P.TgZ(4,"div",3),P.NdJ("click",function(){return se.clickBoton()}),P.TgZ(5,"span",4),P._uU(6),P.qZA(),P.TgZ(7,"span",4),P._uU(8,"Click para jugar de nuevo"),P.qZA()(),P.TgZ(9,"div",5)(10,"h1",6),P._uU(11,"Ahorcado"),P.qZA(),P.TgZ(12,"h3",7),P._uU(13),P.qZA(),P._uU(14),P.TgZ(15,"p",8),P._uU(16),P.qZA(),P._UZ(17,"br")(18,"img",9),P.qZA(),P.TgZ(19,"div",5),P.YNc(20,Le,2,1,"button",10),P.qZA()()()),2&ee&&(P.xp6(2),P.Gre("overlay-text ",se.start,""),P.xp6(2),P.Gre("overlay-text ",se.resultado,""),P.xp6(2),P.hij(" ",se.mensaje,""),P.xp6(7),P.hij("Palabra: ",se.displayedWord,""),P.xp6(1),P.hij(" ",se.palabrita," "),P.xp6(2),P.hij("Intentos restantes: ",se.remainingAttempts,""),P.xp6(2),P.s9C("src",se.imagen,P.LSH),P.xp6(2),P.Q6J("ngForOf",se.letters))},dependencies:[C.sg],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat&display=swap";body[_ngcontent-%COMP%]{padding-bottom:70px;padding-top:70px;font-family:Montserrat,sans-serif}.displayed-word[_ngcontent-%COMP%]{letter-spacing:4px}.img-fluid[_ngcontent-%COMP%]{max-width:20%;margin-bottom:20px}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#ff6d00;font-family:Creepy,serif;font-size:4em;transition:background-color .5s,font-size .5s}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}']}),Be})(),be=(()=>{class Be{constructor(ee){this.router=ee}ngOnInit(){}irMijuego(){this.router.navigate(["/juegos/mijuego"])}irMayorMenor(){this.router.navigate(["/juegos/mayomenor"])}irAhorcado(){this.router.navigate(["/juegos/ahorcado"])}irPreguntados(){this.router.navigate(["/juegos/preguntados"])}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.Y36(h.F0))},Be.\u0275cmp=P.Xpm({type:Be,selectors:[["app-juegos"]],decls:33,vars:0,consts:[[1,"containerT"],[1,"container"],[1,"menu-container"],["routerLink","/juegos/mijuego",1,"fill"],[1,"content",3,"click"],[1,"fill",3,"click"],[1,"content"]],template:function(ee,se){1&ee&&(P.TgZ(0,"div",0)(1,"div",1)(2,"h1"),P._uU(3,"Juegos"),P.qZA(),P.TgZ(4,"div",2)(5,"div",3),P._UZ(6,"span"),P.TgZ(7,"div",4),P.NdJ("click",function(){return se.irMijuego()}),P.TgZ(8,"h2"),P._uU(9,"Mi juego "),P.qZA(),P.TgZ(10,"p"),P._uU(11,"Rompecabezas, ordenar los numeros"),P.qZA()()(),P.TgZ(12,"div",5),P.NdJ("click",function(){return se.irAhorcado()}),P._UZ(13,"span"),P.TgZ(14,"div",6)(15,"h2"),P._uU(16,"Ahorcado"),P.qZA(),P.TgZ(17,"p"),P._uU(18,"Completa la palabra"),P.qZA()()(),P.TgZ(19,"div",5),P.NdJ("click",function(){return se.irMayorMenor()}),P._UZ(20,"span"),P.TgZ(21,"div",6)(22,"h2"),P._uU(23,"Mayor o menor"),P.qZA(),P.TgZ(24,"p"),P._uU(25,"Adivina si el numero es mayor o menor"),P.qZA()()(),P.TgZ(26,"div",5),P.NdJ("click",function(){return se.irPreguntados()}),P._UZ(27,"span"),P.TgZ(28,"div",6)(29,"h2"),P._uU(30,"Preguntados"),P.qZA(),P.TgZ(31,"p"),P._uU(32,"Responde la trivia"),P.qZA()()()()()())},dependencies:[h.rH],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:consolas}.containerT[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh;font-family:Pastel Colors,sans-serif}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin-top:50px;color:#ffe54c;font-size:8.1em;font-family:Pastel Colors,sans-serif;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black}.menu-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;padding:40px 0;flex-wrap:wrap}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 20px;outline:0;border:1px solid black;cursor:pointer;position:relative;width:60%;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:10;padding:20px 40px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.1em;color:#fff;margin-bottom:10px}.container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;color:#fff;margin-bottom:10px;line-height:1.4em}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em;color:#111;background:#fff;padding:10px;text-decoration:none;font-weight:700}']}),Be})();function tt(Be,ut){if(1&Be){const ee=P.EpF();P.TgZ(0,"div",7)(1,"div",8),P._uU(2),P._UZ(3,"br")(4,"br"),P._uU(5),P._UZ(6,"br")(7,"br"),P.TgZ(8,"div",9),P._uU(9),P._UZ(10,"br")(11,"br"),P.qZA()(),P.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"h2",13),P._uU(16),P.qZA()()(),P.TgZ(17,"div",14)(18,"button",15),P.NdJ("click",function(){P.CHM(ee);const ze=P.oxw();return P.KtG(ze.verificar("mayor"))}),P.TgZ(19,"span",16),P._uU(20,"Mayor"),P.qZA()(),P.TgZ(21,"button",15),P.NdJ("click",function(){P.CHM(ee);const ze=P.oxw();return P.KtG(ze.verificar("menor"))}),P.TgZ(22,"span",16),P._uU(23,"Menor"),P.qZA()()()()()}if(2&Be){const ee=P.oxw();P.xp6(2),P.hij("Puntaje: ",ee.correctas," "),P.xp6(3),P.hij(" Preguntas erroneas: ",ee.incorrectas," "),P.xp6(4),P.hij("",ee.mensaje," "),P.xp6(7),P.Oqu(ee.numeroActual)}}let ie=(()=>{class Be{constructor(ee){this.listado=ee,this.numero=0,this.numeroNuevo="?",this.numeroActual=0,this.incorrectas=0,this.correctas=0,this.repondidas=0,this.jugando=!1,this.resultadoText="",this.resultado={},this.victoria="",this.start="visible",this.perdiste="",this.mensaje=""}ngOnInit(){}verificar(ee){for("?"===this.numeroNuevo&&(this.numeroNuevo=this.generarnumero()),this.repondidas++,5===this.repondidas&&(this.jugando=!1,this.terminarjugo()),"mayor"===ee&&(this.numeroActual>this.numeroNuevo?(this.correctas++,this.mensaje="Correcto "+this.numeroActual+" es mayor que "+this.numeroNuevo):(this.incorrectas++,this.mensaje="Incorrecto "+this.numeroActual+" es menor que "+this.numeroNuevo)),"menor"===ee&&(this.numeroActual<this.numeroNuevo?(this.correctas++,this.mensaje="Correcto "+this.numeroActual+" es menor que "+this.numeroNuevo):(this.incorrectas++,this.mensaje="Correcto "+this.numeroActual+" es mayor que "+this.numeroNuevo)),this.numeroActual=this.numeroNuevo,this.numero=this.generarnumero();this.numero===this.numeroActual;)this.numero=this.generarnumero();this.numeroNuevo=this.numero}generarnumero(){return Math.floor(12*Math.random()+1)}terminarjugo(){this.incorrectas>2&&this.jugando?(this.victoria="visible",this.resultadoText="Perdiste"):(this.resultadoText="Ganaste",this.victoria="visible"),this.resultado={tiempo:"N/A",resultado:this.resultadoText,errores:this.incorrectas,clicks:"N/A",correctas:this.correctas,juego:"Mayor o Menor"},this.listado.addResultado(this.resultado),this.numero=0,this.numeroNuevo=0,this.numeroActual=0}clickBoton(){this.jugando=!0,this.numero=0,this.start="",this.numeroNuevo="?",this.numeroActual=0,this.incorrectas=0,this.correctas=0,this.repondidas=0,this.perdiste="",this.resultadoText="",this.resultadoText="",this.victoria="",this.numeroActual=this.generarnumero()}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.Y36(de.L))},Be.\u0275cmp=P.Xpm({type:Be,selectors:[["app-mayoromenor"]],decls:13,vars:10,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],["class","bodyJuego",4,"ngIf"],[1,"bodyJuego"],["id","puntaje",1,"puntaje"],[1,"puntaje"],[1,"cards"],[1,"card"],[1,"face","face2"],[1,"faceh2"],[1,"botones"],[1,"fill",3,"click"],[1,"pan"]],template:function(ee,se){1&ee&&(P.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),P.NdJ("click",function(){return se.clickBoton()}),P._uU(4," Click para empezar "),P.qZA(),P.TgZ(5,"div",4),P.NdJ("click",function(){return se.clickBoton()}),P._uU(6),P._UZ(7,"br"),P._uU(8),P.TgZ(9,"span",5),P._UZ(10,"br"),P._uU(11,"Click para jugar de nuevo"),P.qZA()(),P.YNc(12,tt,24,4,"div",6),P.qZA()()()),2&ee&&(P.xp6(3),P.Gre("overlay-text ",se.start,""),P.xp6(2),P.Gre("overlay-text ",se.victoria,""),P.xp6(1),P.AsE(" ",se.resultadoText," tenes ",se.correctas," respuestas correctas "),P.xp6(2),P.hij(" y ",se.incorrectas," incorrectas "),P.xp6(4),P.Q6J("ngIf",se.jugando))},dependencies:[C.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Righteous&display=swap";.bodyJuego[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center;font-family:calibri;font-size:120%;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;font-family:Creepy,serif}.puntaje[_ngcontent-%COMP%]{padding:10px;color:#075072;font-size:50px}.overlay-text[_ngcontent-%COMP%], .h2l[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#c1ff83;font-family:Creepy,serif;transition:background-color .5s,font-size .5s}.overlay-text-small[_ngcontent-%COMP%]{font-size:.3em}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#4cffff;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s;font-size:10em}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.card[_ngcontent-%COMP%]{position:relative;width:300px;height:400px;margin:0 auto;background:#000;box-shadow:0 15px 60px #00000080;background-image:linear-gradient(40deg,#faf894 0%,#fa99fc 45%,#9dfffd 100%);border-radius:15px}.cards[_ngcontent-%COMP%]{max-width:100vw;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-gap:35px;margin:0 auto}.face[_ngcontent-%COMP%]{bottom:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.faceh2[_ngcontent-%COMP%]{margin:0;padding:0;font-size:10em;color:#fff;transition:.5s;text-shadow:0 2px 5px rgba(0,0,0,.2);z-index:10}.o[_ngcontent-%COMP%]{margin:50px}.botones[_ngcontent-%COMP%]{display:grid}.pan[_ngcontent-%COMP%]{font-size:4em;color:#fff}']}),Be})();class fe{constructor(ut,ee){this.x=ut,this.y=ee}getTopBox(){return 0===this.y?null:new fe(this.x,this.y-1)}getRightBox(){return 2===this.x?null:new fe(this.x+1,this.y)}getBottomBox(){return 2===this.y?null:new fe(this.x,this.y+1)}getLeftBox(){return 0===this.x?null:new fe(this.x-1,this.y)}getNextdoorBoxes(){return[this.getTopBox(),this.getRightBox(),this.getBottomBox(),this.getLeftBox()].filter(ut=>null!==ut)}getRandomNextdoorBox(){const ut=this.getNextdoorBoxes();return ut[Math.floor(Math.random()*ut.length)]}}class Ce{static swapBoxes(ut,ee,se){let ze=ut[ee.y][ee.x];return ut[ee.y][ee.x]=ut[se.y][se.x],ut[se.y][se.x]=ze,ut}static isSolved(ut){return 1===ut[0][0]&&2===ut[0][1]&&3===ut[0][2]&&4===ut[1][0]&&5===ut[1][1]&&6===ut[1][2]&&7===ut[2][0]&&8===ut[2][1]&&0===ut[2][2]}static getRandomGrid(){let ut=[[1,2,3],[4,5,6],[7,8,0]],ee=new fe(2,2);for(let se=0;se<1e3;se++){const ze=ee.getRandomNextdoorBox();Ce.swapBoxes(ut,ee,ze),ee=ze}return Ce.isSolved(ut)?this.getRandomGrid():ut}}class st{constructor(ut,ee,se,ze){this.move=0,this.time=0,this.status="",this.grid=ut,this.move=ee,this.time=se,this.status=ze}static ready(){return new st([[0,0,0],[0,0,0],[0,0,0]],0,0,"listo")}static start(){return new st(Ce.getRandomGrid(),0,0,"jugando")}}function ot(Be,ut){if(1&Be){const ee=P.EpF();P.TgZ(0,"button",3),P.NdJ("click",function(){const Pe=P.CHM(ee).index,Ue=P.oxw();return P.KtG(Ue.handleClickBox(Pe))}),P._uU(1),P.qZA()}if(2&Be){const ee=ut.index,se=P.oxw();P.xp6(1),P.Oqu(se.contenido[ee])}}let nt=(()=>{class Be{constructor(ee){this.listado=ee,this.boton="",this.contenido=new Array(9),this.mensaje="",this.victoria="",this.nuevoJuego(st.ready()),this.grupoCajas=[],this.contenido=[,1,2,3,4,5,6,7,8],this.boton="Jugar",this.start="visible"}ngOnInit(){}nuevoJuego(ee){this.estado=ee,this.tickId=null,this.tick=this.tick.bind(this)}tick(){this.estado.time=this.estado.time+1}setState(ee){this.estado=ee,this.render()}handleClickBox(ee){let se=this.grupoCajas[ee],Pe=se.getNextdoorBoxes().find(Ue=>0===this.estado.grid[Ue.y][Ue.x]);if(Pe){let Ue=Ce.swapBoxes(this.estado.grid,se,Pe);Ce.isSolved(Ue)?(clearInterval(this.tickId),this.setState({grid:Ue,move:this.estado.move+1,time:this.estado.time,status:"gano"})):this.setState({grid:Ue,move:this.estado.move+1,time:this.estado.time,status:this.estado.status})}}render(){this.contador=0;for(let ee=0;ee<3;ee++)for(let se=0;se<3;se++){if("jugando"===this.estado.status){let ze=new fe(se,ee);this.grupoCajas.push(ze),this.boton="Reiniciar"}this.contenido[this.contador]=0===this.estado.grid[ee][se]?"":this.estado.grid[ee][se].toString(),this.contador++}"listo"===this.estado.status&&(this.boton="Jugar",this.start="visible"),"jugando"===this.estado.status&&(this.boton="Reiniciar"),"gano"===this.estado.status&&(this.boton="Jugar",this.victoria="visible",this.resultado={tiempo:this.estado.time.toString()+" seg",resultado:"Gano",errores:"N/A",clicks:this.estado.move.toString(),correctas:"N/A",juego:"Rompecabezas"},this.listado.addResultado(this.resultado))}clickBoton(){clearInterval(this.tickId),this.tickId=setInterval(this.tick,1e3),this.setState(st.start()),this.start="",this.victoria="",this.render()}ordenar(){this.setState({grid:[[1,2,3],[4,5,0],[7,8,6]],move:this.estado.move+1,time:this.estado.time,status:this.estado.status})}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.Y36(de.L))},Be.\u0275cmp=P.Xpm({type:Be,selectors:[["app-mijuego"]],decls:23,vars:10,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"grid"],[3,"click",4,"ngFor","ngForOf"],[1,"footer"],["id","move"],[1,"ordenar",3,"click"],["id","time"]],template:function(ee,se){1&ee&&(P.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),P.NdJ("click",function(){return se.clickBoton()}),P._uU(4," Click para empezar "),P.qZA(),P.TgZ(5,"div",4),P.NdJ("click",function(){return se.clickBoton()}),P.TgZ(6,"span",5),P._uU(7,"Ganaste!!!"),P.qZA(),P.TgZ(8,"span",5),P._UZ(9,"br"),P._uU(10,"Click para jugar de nuevo"),P.qZA()(),P.TgZ(11,"div",6),P.YNc(12,ot,2,1,"button",7),P.qZA(),P.TgZ(13,"div",8)(14,"button",3),P.NdJ("click",function(){return se.clickBoton()}),P._uU(15),P.qZA(),P.TgZ(16,"span",9),P._uU(17),P.qZA()(),P.TgZ(18,"div",8)(19,"button",10),P.NdJ("click",function(){return se.ordenar()}),P._uU(20,"Ordenar para ganar"),P.qZA(),P.TgZ(21,"span",11),P._uU(22),P.qZA()()()()()),2&ee&&(P.xp6(3),P.Gre("overlay-text ",se.start,""),P.xp6(2),P.Gre("overlay-text ",se.victoria,""),P.xp6(7),P.Q6J("ngForOf",se.contenido),P.xp6(3),P.Oqu(se.boton),P.xp6(2),P.hij("Movimiento: ",se.estado.move,""),P.xp6(5),P.hij("Tiempo: ",se.estado.time,""))},dependencies:[C.sg],styles:[".juegoContainer[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}.juego[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.game[_ngcontent-%COMP%]{box-shadow:0 1px 4px #00000080;padding:20px;background-image:linear-gradient(#d6e7b3,#a1e7e7);border-radius:5px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:106px 106px 106px;grid-template-rows:106px 106px 106px;border:1px solid #550000}.grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#ccdbe8 3px 3px 6px inset,#ffffff80 -3px -3px 6px 1px inset;background-color:#f5f4c0;color:#033;font-size:24px;font-weight:700;border:1px solid #550000;outline:none;cursor:pointer}.footer[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:space-between}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px #00000080;padding:5px;width:100px;background-color:#d4ee9f;color:#033;outline:none;cursor:pointer}.ordenar[_ngcontent-%COMP%]{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px #00000080;padding:5px;width:150px;background-color:#d4ee9f;color:#033;outline:none;cursor:pointer;margin-top:15px}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ordenar[_ngcontent-%COMP%]:hover{color:#d4ee9f;background-color:#033}.footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:20px;color:#14a890;font-weight:700;margin:auto 0}.message[_ngcontent-%COMP%]{color:#aa3939;height:80px}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#fdbf8c;font-family:Creepy,serif;font-size:4em;transition:background-color .5s,font-size .5s}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}"]}),Be})();var Ot=j(529);let at=(()=>{class Be{constructor(ee){this.http=ee}getImg(){return this.http.get("https://pixabay.com/api/?key=21351108-e70e13da005029798b867e59c&q=movies&image_type=photo&category=entretaiment&safesearch=true")}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.LFG(Ot.eN))},Be.\u0275prov=P.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})();const it=function(Be){return{"background-color":Be}},qt=[{path:"mayomenor",component:ie},{path:"ahorcado",component:qe},{path:"",component:be},{path:"mijuego",component:nt},{path:"preguntados",component:(()=>{class Be{constructor(ee,se,ze){this.httpClient=ee,this.listado=se,this.svcImg=ze,this.npreguntas=[],this.preguntas_hechas=0,this.preguntas_correctas=0,this.suspender_botones=!1,this.yellowd="yellow",this.victoria="",this.start="visible",this.perdiste="",this.opcion="Siguiente",this.resultadoText="",this.resultado={},this.img=[],this.httpClient.get("assets/json/preguntas.json").subscribe(Pe=>{this.interprete_bp=Pe}),this.svcImg.getImg().subscribe(Pe=>{this.im=Pe,this.getImg(this.im.hits)}),this.imagen="",this.respuesta1="",this.respuesta2="",this.respuesta3="",this.respuesta4="",this.estilo1="",this.estilo2="",this.cantPreguntas=1,this.estilo3="",this.estilo4="",this.pregunta="",this.erradas=0,this.categoria="",this.preguntaActual="",this.numero="",this.estiloImagen="",this.estilos=[this.estilo1,this.estilo2,this.estilo3,this.estilo4],this.posibles_respuestas=[],this.btn_correspondiente=[this.respuesta4,this.respuesta1,this.respuesta2,this.respuesta3],setTimeout(()=>{this.escogerPreguntaAleatoria()},300)}ngOnInit(){}desordenarRespuestas(ee){this.posibles_respuestas=[ee.respuesta,ee.incorrecta1,ee.incorrecta2,ee.incorrecta3],this.posibles_respuestas.sort(()=>Math.random()-.5),this.respuesta1=this.posibles_respuestas[0],this.respuesta2=this.posibles_respuestas[1],this.respuesta3=this.posibles_respuestas[2],this.respuesta4=this.posibles_respuestas[3]}reiniciar(){this.cantPreguntas++,this.suspender_botones=!1;for(let ee=0;ee<this.estilos.length;ee++)this.estilos[ee]="white";this.cantPreguntas>5?this.ckeckJuego():this.escogerPreguntaAleatoria(),this.opcion=5===this.cantPreguntas?"Finalizar":"Siguiente"}escogerPreguntaAleatoria(){let ee=Math.floor(Math.random()*this.interprete_bp.length);for(;this.npreguntas.includes(ee);)ee++,ee>=this.interprete_bp.length&&(ee=0),this.npreguntas.length===this.interprete_bp.length&&(this.npreguntas=[]);this.npreguntas.push(ee),this.preguntas_hechas++,this.escogerPregunta(ee)}oprimir_btn(ee){if(!this.suspender_botones){this.suspender_botones=!0,this.posibles_respuestas[ee]==this.pregunta.respuesta?(this.preguntas_correctas++,this.estilos[ee]="lightgreen"):(this.estilos[ee]="pink",this.erradas++);for(let se=0;se<4;se++)if(this.posibles_respuestas[se]==this.pregunta.respuesta){this.estilos[se]="lightgreen";break}}}escogerPregunta(ee){this.pregunta=this.interprete_bp[ee],this.categoria=this.pregunta.categoria,this.preguntaActual=this.pregunta.pregunta,console.log("url "+this.imagen),this.numero=ee,this.puntaje=this.preguntas_hechas>1?this.preguntas_correctas+"/"+(this.preguntas_hechas-1):"",this.desordenarRespuestas(this.pregunta),this.pregunta.imagen?(this.imagen=this.pregunta.imagen,this.estiloImagen={height:"200px",width:"100%"}):(this.imagen=this.img[ee].largeImageURL,this.estiloImagen={height:"200px",width:"100%"})}ckeckJuego(){this.erradas>2?(this.perdiste="visible",this.resultadoText="Perdiste"):(this.resultadoText="Ganaste",this.victoria="visible"),this.resultado={tiempo:"N/A",resultado:this.resultadoText,errores:this.erradas,clicks:"N/A",correctas:this.preguntas_correctas,juego:"Preguntados"},this.listado.addResultado(this.resultado)}clickBoton(){this.cantPreguntas=0,this.reiniciar(),this.puntaje="",this.numero="",this.erradas=0,this.perdiste="",this.victoria="",this.start=""}getImg(ee){var se=this;return(0,Z.Z)(function*(){se.img=ee})()}}return Be.\u0275fac=function(ee){return new(ee||Be)(P.Y36(Ot.eN),P.Y36(de.L),P.Y36(at))},Be.\u0275cmp=P.Xpm({type:Be,selectors:[["app-preguntados"]],decls:40,vars:36,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"bodyJuego"],["id","puntaje",1,"puntaje"],[1,"encabezado"],["id","categoria",1,"categoria"],["id","numero",1,"numero"],["id","pregunta",1,"pregunta"],["id","imagen",1,"imagen",3,"src","ngStyle"],["id","btn1",1,"btn",3,"ngStyle","click"],["id","btn2",1,"btn",3,"ngStyle","click"],["id","btn3",1,"btn",3,"ngStyle","click"],["id","btn4",1,"btn",3,"ngStyle","click"],[1,"fill",3,"click"]],template:function(ee,se){1&ee&&(P.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),P.NdJ("click",function(){return se.clickBoton()}),P._uU(4," Click para empezar "),P.qZA(),P.TgZ(5,"div",4),P.NdJ("click",function(){return se.clickBoton()}),P._uU(6),P.TgZ(7,"span",5),P._UZ(8,"br")(9,"br")(10,"br")(11,"br"),P._uU(12,"Click para jugar de nuevo"),P.qZA()(),P.TgZ(13,"div",4),P.NdJ("click",function(){return se.clickBoton()}),P._uU(14),P.TgZ(15,"span",5),P._UZ(16,"br"),P._uU(17,"Click para jugar de nuevo"),P.qZA()(),P.TgZ(18,"div",6)(19,"div",7),P._uU(20),P._UZ(21,"br"),P._uU(22),P.qZA(),P.TgZ(23,"div",8)(24,"div",9),P._uU(25),P.qZA(),P._UZ(26,"div",10),P.TgZ(27,"div",11),P._uU(28),P.qZA(),P._UZ(29,"img",12),P.qZA(),P.TgZ(30,"div",13),P.NdJ("click",function(){return se.oprimir_btn(0)}),P._uU(31),P.qZA(),P.TgZ(32,"div",14),P.NdJ("click",function(){return se.oprimir_btn(1)}),P._uU(33),P.qZA(),P.TgZ(34,"div",15),P.NdJ("click",function(){return se.oprimir_btn(2)}),P._uU(35),P.qZA(),P.TgZ(36,"div",16),P.NdJ("click",function(){return se.oprimir_btn(3)}),P._uU(37),P.qZA(),P.TgZ(38,"button",17),P.NdJ("click",function(){return se.reiniciar()}),P._uU(39),P.qZA()()()()()),2&ee&&(P.xp6(3),P.Gre("overlay-text ",se.start,""),P.xp6(2),P.Gre("overlay-text ",se.victoria,""),P.xp6(1),P.AsE(" ",se.resultadoText," tenes ",se.preguntas_correctas," respuestas correctas "),P.xp6(7),P.Gre("overlay-text ",se.perdiste,""),P.xp6(1),P.AsE(" ",se.resultadoText," tenes ",se.erradas," erroneas "),P.xp6(6),P.hij("Puntaje: ",se.preguntas_correctas," "),P.xp6(2),P.hij(" Preguntas erroneas: ",se.erradas," "),P.xp6(3),P.hij(" Categoria: ",se.categoria," "),P.xp6(3),P.hij(" ",se.preguntaActual," "),P.xp6(1),P.s9C("src",se.imagen,P.LSH),P.Q6J("ngStyle",se.estiloImagen),P.xp6(1),P.Q6J("ngStyle",P.VKq(28,it,se.estilos[0])),P.xp6(1),P.hij(" ",se.respuesta1,""),P.xp6(1),P.Q6J("ngStyle",P.VKq(30,it,se.estilos[1])),P.xp6(1),P.hij(" ",se.respuesta2,""),P.xp6(1),P.Q6J("ngStyle",P.VKq(32,it,se.estilos[2])),P.xp6(1),P.hij(" ",se.respuesta3,""),P.xp6(1),P.Q6J("ngStyle",P.VKq(34,it,se.estilos[3])),P.xp6(1),P.hij(" ",se.respuesta4,""),P.xp6(2),P.Oqu(se.opcion))},dependencies:[C.PC],styles:['*[_ngcontent-%COMP%]{transition:all .3s}.bodyJuego[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center;font-family:calibri;font-size:120%;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh}.encabezado[_ngcontent-%COMP%]{position:relative;background:rgb(255,255,255);min-width:300px;width:70%;max-width:600px;padding:10px}.categoria[_ngcontent-%COMP%]{opacity:.3;text-align:left}.pregunta[_ngcontent-%COMP%]{padding:10px}.imagen[_ngcontent-%COMP%]{object-fit:cover;height:0px;width:0px}.btn[_ngcontent-%COMP%]{background:white;width:60%;max-width:550px;padding:10px;margin:5px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.numero[_ngcontent-%COMP%]{position:absolute;opacity:.3;top:10px;right:10px}.puntaje[_ngcontent-%COMP%]{padding:10px;color:#075072;font-size:large}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#c1ff83;font-family:Creepy,serif;transition:background-color .5s,font-size .5s}.overlay-text-small[_ngcontent-%COMP%]{font-size:.3em}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#4cffff;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}']}),Be})()}];let xe=(()=>{class Be{}return Be.\u0275fac=function(ee){return new(ee||Be)},Be.\u0275mod=P.oAB({type:Be}),Be.\u0275inj=P.cJS({imports:[h.Bz.forChild(qt),h.Bz]}),Be})(),gt=(()=>{class Be{}return Be.\u0275fac=function(ee){return new(ee||Be)},Be.\u0275mod=P.oAB({type:Be}),Be.\u0275inj=P.cJS({imports:[C.ez,xe]}),Be})()},6893:(an,ht,j)=>{j.d(ht,{e:()=>tt});var C=j(5861),h=j(4004),Z=j(6027),P=j(9646),de=j(3999),Le=j(4650),qe=j(5626),be=j(3395);let tt=(()=>{class ie{constructor(Ce,st,ot,nt){this.afAuth=Ce,this.firestore=st,this.afs=ot,this.error=nt,this.user$=(0,de.fD)(this.afAuth).pipe((0,h.U)(Ot=>Ot?(console.log(Ot),this.afs.doc(`user/${Ot.uid}`).valueChanges()):(0,P.of)(null))),this.user2$=(0,de.fD)(this.afAuth)}login(Ce,st){var ot=this;return(0,C.Z)(function*(){try{return yield(0,de.e5)(ot.afAuth,Ce,st)}catch(nt){throw console.log(nt.code),new Error(ot.error.getError(nt.code))}})()}registro(Ce,st){var ot=this;return(0,C.Z)(function*(){try{const nt=yield(0,de.Xb)(ot.afAuth,Ce,st);return ot.updateUserData(nt),nt}catch(nt){throw console.log(nt.code),new Error(ot.error.getError(nt.code))}})()}logout(){var Ce=this;return(0,C.Z)(function*(){try{yield Ce.afAuth.signOut()}catch(st){console.log(st)}})()}getUsuario(){try{const Ce=this.afAuth.currentUser;console.log(Ce.uid);const st=(0,Z.JU)(this.firestore,`user/${Ce.uid}`);return(0,Z._1)(st,{idField:"uid"})}catch{return null}}getUsuarioFire(){return this.afAuth.currentUser}updateUserData(Ce){var st=this;return(0,C.Z)(function*(){const ot=(0,Z.JU)(st.firestore,`user/${Ce.user.uid}`),nt={uid:Ce.user.uid,email:Ce.user.email,displayName:Ce.user.displayName,rol:"jugador",myCustomData:"lola"};return console.log("registo Data ",nt),yield(0,Z.pl)(ot,{data:nt}),!0})()}updateLogUser(Ce){var st=this;return(0,C.Z)(function*(){try{return yield(0,Z.pl)((0,Z.JU)(st.firestore,"userlog"),{email:Ce,fechaIngreso:(0,Z.Bt)()}),!0}catch(nt){return nt}})()}}return ie.\u0275fac=function(Ce){return new(Ce||ie)(Le.LFG(de.gx),Le.LFG(Z.gg),Le.LFG(qe.ST),Le.LFG(be.T))},ie.\u0275prov=Le.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},3395:(an,ht,j)=>{j.d(ht,{T:()=>h});var C=j(4650);let h=(()=>{class Z{constructor(){}getError(de){return{"auth/claims-too-large":"La carga \xfatil de la reclamaci\xf3n que se entreg\xf3 a setCustomUserClaims() supera el tama\xf1o m\xe1ximo de 1,000 bytes.","auth/email-already-exists":"Otro usuario ya est\xe1 utilizando el correo electr\xf3nico proporcionado. Cada usuario debe tener un correo electr\xf3nico \xfanico.","auth/id-token-expired":"El token de ID de Firebase que se proporcion\xf3 est\xe1 vencido.","auth/id-token-revoked":"Se revoc\xf3 el token de ID de Firebase.","auth/insufficient-permission":"La credencial que se us\xf3 para inicializar el SDK de Admin no tiene permisos suficientes a fin de acceder al recurso de autenticaci\xf3n solicitado. Consulta c\xf3mo configurar un proyecto de Firebase para ver la documentaci\xf3n sobre c\xf3mo generar una credencial con los permisos apropiados y usarla en la autenticaci\xf3n de los SDK de Admin.","auth/internal-error":"El servidor de autenticaci\xf3n encontr\xf3 un error inesperado cuando se intentaba procesar la solicitud. Para obtener informaci\xf3n adicional, revisa la respuesta del servidor de autenticaci\xf3n, que deber\xeda estar incluida en el mensaje de error. Si el error persiste, av\xedsanos mediante nuestro canal de asistencia de informe de errores.","auth/invalid-argument":"Se proporcion\xf3 un argumento no v\xe1lido para un m\xe9todo de autenticaci\xf3n. El mensaje de error debe incluir informaci\xf3n adicional.","auth/invalid-claims":"Los atributos personalizados del reclamo que se entregaron a setCustomUserClaims() no son v\xe1lidos.","auth/invalid-continue-uri":"La URL de continuaci\xf3n debe ser una string de URL v\xe1lida.","auth/invalid-creation-time":"La hora de creaci\xf3n debe ser una string de fecha en formato UTC v\xe1lida.","auth/invalid-credential":"La credencial que se usa en la autenticaci\xf3n de los SDK de Admin no se puede emplear para realizar la acci\xf3n deseada. Algunos m\xe9todos de autenticaci\xf3n, como createCustomToken() y verifyIdToken(), requieren que los SDK se inicialicen con una credencial de certificado en lugar de un token de actualizaci\xf3n o una credencial predeterminada de la aplicaci\xf3n. Consulta Inicializa el SDK para ver documentaci\xf3n sobre c\xf3mo autenticar el SDK de Admin con una credencial de certificado.","auth/invalid-disabled-field":"El valor que se proporcion\xf3 para la propiedad del usuario disabled no es v\xe1lido. Debe ser un booleano.","auth/invalid-display-name":"El valor que se proporcion\xf3 para la propiedad del usuario displayName no es v\xe1lido. Debe ser una string que no est\xe9 vac\xeda.","auth/invalid-dynamic-link-domain":"El dominio del v\xednculo din\xe1mico proporcionado no se configur\xf3 o no se autoriz\xf3 para el proyecto actual.","auth/invalid-email":"\tLa direcci\xf3n de correo electr\xf3nico ingresada no es valida.","auth/invalid-email-verified":"El valor que se proporcion\xf3 para la propiedad del usuario emailVerified no es v\xe1lido. Debe ser un booleano.","auth/invalid-hash-algorithm":"El algoritmo de hash debe coincidir con las strings de la lista de algoritmos compatibles.","auth/invalid-hash-block-size":"El tama\xf1o del conjunto de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-derived-key-length":"La longitud de la clave derivada de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-key":"La clave de hash debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-hash-memory-cost":"El costo de la memoria de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-parallelization":"La paralelizaci\xf3n de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-rounds":"Las rondas de hash deben ser un n\xfamero v\xe1lido.","auth/invalid-hash-salt-separator":"El campo del separador de sal del algoritmo de hash debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-id-token":"El token de ID que se proporcion\xf3 no es un token de ID de Firebase v\xe1lido.","auth/invalid-last-sign-in-time":"La hora del \xfaltimo acceso debe ser una string de fecha en formato UTC v\xe1lida.","auth/invalid-page-token":"El token de p\xe1gina siguiente que se entreg\xf3 en listUsers() no es v\xe1lido. Debe ser una string v\xe1lida que no est\xe9 vac\xeda.","auth/invalid-password":"El valor que se proporcion\xf3 para la propiedad del usuario password no es v\xe1lido. Debe ser una string con al menos seis caracteres.","auth/invalid-password-hash":"El hash de contrase\xf1as debe ser un b\xfafer de bytes v\xe1lidos.","auth/invalid-password-salt":"La contrase\xf1a con sal debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-phone-number":"El valor que se proporcion\xf3 para phoneNumber no es v\xe1lido. Debe ser una string de identificador que no est\xe9 vac\xeda y que cumpla con el est\xe1ndar E.164.","auth/invalid-photo-url":"El valor que se proporcion\xf3 para la propiedad del usuario photoURL no es v\xe1lido. Debe ser una URL de string.","auth/invalid-provider-data":"providerData debe ser una serie de objetos UserInfo.","auth/invalid-provider-id":"providerId debe ser una string del identificador del proveedor compatible v\xe1lida.","auth/invalid-session-cookie-duration":"La duraci\xf3n de las cookies de la sesi\xf3n debe ser un n\xfamero v\xe1lido en milisegundos que vaya entre los 5 minutos y las 2 semanas.","auth/invalid-uid":"El uid proporcionado debe ser una string no vac\xeda con un m\xe1ximo de 128 caracteres.","auth/invalid-user-import":"El registro de usuarios para importar no es v\xe1lido.","auth/maximum-user-count-exceeded":"Se excedi\xf3 la cantidad m\xe1xima de usuarios permitidos para importar.","auth/missing-android-pkg-name":"Si es obligatorio instalar la app para Android, debe proporcionarse un nombre de paquete de Android.","auth/missing-continue-uri":"Se debe proporcionar una URL de continuaci\xf3n v\xe1lida en la solicitud.","auth/missing-hash-algorithm":"Para importar usuarios con hash de contrase\xf1as, es necesario proporcionar el algoritmo de hash y sus par\xe1metros.","auth/missing-ios-bundle-id":"La solicitud debe contener un ID del paquete de iOS.","auth/missing-uid":"Se requiere un identificador uid para la operaci\xf3n actual.","auth/operation-not-allowed":"El proveedor de acceso proporcionado est\xe1 inhabilitado para tu proyecto de Firebase. Habil\xedtalo en la secci\xf3n M\xe9todo de acceso de Firebase console.","auth/phone-number-already-exists":"Otro usuario ya utiliza el phoneNumber proporcionado. Cada usuario debe tener un phoneNumber \xfanico.","auth/project-not-found":"No se encontr\xf3 ning\xfan proyecto de Firebase correspondiente a la credencial que se us\xf3 para inicializar los SDK de administrador. Consulta c\xf3mo configurar un proyecto de Firebase para ver la documentaci\xf3n sobre c\xf3mo generar una credencial para tu proyecto y usarla en la autenticaci\xf3n de los SDK de Admin.","auth/reserved-claims":"Uno o m\xe1s de los reclamos personalizados de usuarios que se entregaron a setCustomUserClaims() est\xe1n reservados. Por ejemplo, no deben usarse reclamos espec\xedficos de OIDC (p. ej., sub, iat, iss, exp, aud o auth_time) como claves para reclamos personalizados.","auth/session-cookie-expired":"La cookie proporcionada de la sesi\xf3n de Firebase venci\xf3.","auth/session-cookie-revoked":"Se revocaron las cookies de la sesi\xf3n de Firebase.","auth/uid-already-exists":"Otro usuario ya utiliza el uid proporcionado. Cada usuario debe tener un uid \xfanico.","auth/unauthorized-continue-uri":"El dominio de la URL de continuaci\xf3n no est\xe1 en la lista blanca. Incl\xfayelo en la lista en Firebase console.","auth/wrong-password":"Contrase\xf1a err\xf3nea","auth/user-not-found":"El correo electr\xf3nico proporcionado no corresponde a un usuario activo"}[de]}}return Z.\u0275fac=function(de){return new(de||Z)},Z.\u0275prov=C.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},4359:(an,ht,j)=>{j.d(ht,{L:()=>tt});var C=j(5861),h=j(127),P=(j(6551),j(3900)),de=j(4650),Le=j(5626),qe=j(6893),be=j(7001);let tt=(()=>{class ie{constructor(Ce,st,ot){this.afs=Ce,this.authSvc=st,this.router=ot,this.getUserMail()}addResultado(Ce){return this.getUserMail(),this.afs.collection("listados").add({usuario:this.mail,tiempo:Ce.tiempo,resultado:Ce.resultado,clicks:Ce.clicks,juego:Ce.juego,correctas:Ce.correctas,errores:Ce.errores,createdAt:h.Z.firestore.FieldValue.serverTimestamp()})}getListas(){this.getUserMail();let Ce=[];return this.getUserMail(),this.getListado().pipe((0,P.w)(st=>(Ce=st,this.afs.collection("listados",ot=>ot.orderBy("createdAt","desc")).valueChanges({idField:"id"}))))}getListado(){return this.afs.collection("listados",Ce=>Ce.orderBy("createdAt","desc")).valueChanges({idField:"id"})}getUserMail(){var Ce=this;return(0,C.Z)(function*(){Ce.mail=Ce.authSvc.getUsuarioFire()?Ce.authSvc.getUsuarioFire()?.email:"usuario anonimo"})()}}return ie.\u0275fac=function(Ce){return new(Ce||ie)(de.LFG(Le.ST),de.LFG(qe.e),de.LFG(be.F0))},ie.\u0275prov=de.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},7775:(an,ht,j)=>{var C=j(1481),h=j(4650),Z=j(7001),P=j(6893),de=j(6895),Le=j(5861),qe=j(127),be=j(6551),tt=j(3900),ie=j(4004),fe=j(5626);let Ce=(()=>{class m{constructor(E,M,J){this.afs=E,this.authSvc=M,this.router=J,this.getUseMail()}addChatMessage(E){return this.getUseMail(),this.afs.collection("messages").add({msg:E,from:this.mail,createdAt:qe.Z.firestore.FieldValue.serverTimestamp()})}getChatMessages(){let E=[];return this.getUseMail(),this.getUsers().pipe((0,tt.w)(M=>(E=M,this.afs.collection("messages",J=>J.orderBy("createdAt","desc")).valueChanges({idField:"id"}))),(0,ie.U)(M=>{for(let J of M)J.fromName=this.getUserForMsg(J.from,E),J.myMsg=this.mail===J.from;return M}))}getUsers(){return this.afs.collection("user").valueChanges({idField:"uid"})}getUseMail(){var E=this;return(0,Le.Z)(function*(){E.mail=(yield E.authSvc.getUsuarioFire())?E.authSvc.getUsuarioFire()?.email:"usuario anonimo"})()}getUserForMsg(E,M){this.getUseMail();for(let J of M)if(J.email==E)return J.email;return"Deleted"}}return m.\u0275fac=function(E){return new(E||m)(h.LFG(fe.ST),h.LFG(P.e),h.LFG(Z.F0))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var st=j(8996),ot=j(9751),nt=j(4742),Ot=j(8421),at=j(7669),it=j(5403),Ht=j(3268),qt=j(1810);let gt=(()=>{class m{constructor(E,M){this._renderer=E,this._elementRef=M,this.onChange=J=>{},this.onTouched=()=>{}}setProperty(E,M){this._renderer.setProperty(this._elementRef.nativeElement,E,M)}registerOnTouched(E){this.onTouched=E}registerOnChange(E){this.onChange=E}setDisabledState(E){this.setProperty("disabled",E)}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(h.Qsj),h.Y36(h.SBq))},m.\u0275dir=h.lG2({type:m}),m})(),Be=(()=>{class m extends gt{}return m.\u0275fac=function(){let y;return function(M){return(y||(y=h.n5z(m)))(M||m)}}(),m.\u0275dir=h.lG2({type:m,features:[h.qOj]}),m})();const ut=new h.OlP("NgValueAccessor"),ee={provide:ut,useExisting:(0,h.Gpc)(()=>se),multi:!0};let se=(()=>{class m extends Be{writeValue(E){this.setProperty("checked",E)}}return m.\u0275fac=function(){let y;return function(M){return(y||(y=h.n5z(m)))(M||m)}}(),m.\u0275dir=h.lG2({type:m,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(E,M){1&E&&h.NdJ("change",function($e){return M.onChange($e.target.checked)})("blur",function(){return M.onTouched()})},features:[h._Bn([ee]),h.qOj]}),m})();const ze={provide:ut,useExisting:(0,h.Gpc)(()=>Ke),multi:!0},Ue=new h.OlP("CompositionEventMode");let Ke=(()=>{class m extends gt{constructor(E,M,J){super(E,M),this._compositionMode=J,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pe(){const m=(0,de.q)()?(0,de.q)().getUserAgent():"";return/android (\d+)/.test(m.toLowerCase())}())}writeValue(E){this.setProperty("value",E??"")}_handleInput(E){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(E)}_compositionStart(){this._composing=!0}_compositionEnd(E){this._composing=!1,this._compositionMode&&this.onChange(E)}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ue,8))},m.\u0275dir=h.lG2({type:m,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(E,M){1&E&&h.NdJ("input",function($e){return M._handleInput($e.target.value)})("blur",function(){return M.onTouched()})("compositionstart",function(){return M._compositionStart()})("compositionend",function($e){return M._compositionEnd($e.target.value)})},features:[h._Bn([ze]),h.qOj]}),m})();function Mt(m){return null==m||("string"==typeof m||Array.isArray(m))&&0===m.length}function kt(m){return null!=m&&"number"==typeof m.length}const Bt=new h.OlP("NgValidators"),gn=new h.OlP("NgAsyncValidators"),xn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Et{static min(y){return function nn(m){return y=>{if(Mt(y.value)||Mt(m))return null;const E=parseFloat(y.value);return!isNaN(E)&&E<m?{min:{min:m,actual:y.value}}:null}}(y)}static max(y){return function zn(m){return y=>{if(Mt(y.value)||Mt(m))return null;const E=parseFloat(y.value);return!isNaN(E)&&E>m?{max:{max:m,actual:y.value}}:null}}(y)}static required(y){return Nn(y)}static requiredTrue(y){return function Kn(m){return!0===m.value?null:{required:!0}}(y)}static email(y){return function jn(m){return Mt(m.value)||xn.test(m.value)?null:{email:!0}}(y)}static minLength(y){return function mn(m){return y=>Mt(y.value)||!kt(y.value)?null:y.value.length<m?{minlength:{requiredLength:m,actualLength:y.value.length}}:null}(y)}static maxLength(y){return function ir(m){return y=>kt(y.value)&&y.value.length>m?{maxlength:{requiredLength:m,actualLength:y.value.length}}:null}(y)}static pattern(y){return function dr(m){if(!m)return Cr;let y,E;return"string"==typeof m?(E="","^"!==m.charAt(0)&&(E+="^"),E+=m,"$"!==m.charAt(m.length-1)&&(E+="$"),y=new RegExp(E)):(E=m.toString(),y=m),M=>{if(Mt(M.value))return null;const J=M.value;return y.test(J)?null:{pattern:{requiredPattern:E,actualValue:J}}}}(y)}static nullValidator(y){return null}static compose(y){return mr(y)}static composeAsync(y){return hr(y)}}function Nn(m){return Mt(m.value)?{required:!0}:null}function Cr(m){return null}function ur(m){return null!=m}function lr(m){return(0,h.QGY)(m)?(0,st.D)(m):m}function Mr(m){let y={};return m.forEach(E=>{y=null!=E?{...y,...E}:y}),0===Object.keys(y).length?null:y}function dn(m,y){return y.map(E=>E(m))}function Lr(m){return m.map(y=>function Xn(m){return!m.validate}(y)?y:E=>y.validate(E))}function mr(m){if(!m)return null;const y=m.filter(ur);return 0==y.length?null:function(E){return Mr(dn(E,y))}}function en(m){return null!=m?mr(Lr(m)):null}function hr(m){if(!m)return null;const y=m.filter(ur);return 0==y.length?null:function(E){return function xe(...m){const y=(0,at.jO)(m),{args:E,keys:M}=(0,nt.D)(m),J=new ot.y($e=>{const{length:$t}=E;if(!$t)return void $e.complete();const En=new Array($t);let Tn=$t,Wn=$t;for(let ti=0;ti<$t;ti++){let Pi=!1;(0,Ot.Xf)(E[ti]).subscribe((0,it.x)($e,ls=>{Pi||(Pi=!0,Wn--),En[ti]=ls},()=>Tn--,void 0,()=>{(!Tn||!Pi)&&(Wn||$e.next(M?(0,qt.n)(M,En):En),$e.complete())}))}});return y?J.pipe((0,Ht.Z)(y)):J}(dn(E,y).map(lr)).pipe((0,ie.U)(Mr))}}function Yn(m){return null!=m?hr(Lr(m)):null}function er(m,y){return null===m?[y]:Array.isArray(m)?[...m,y]:[m,y]}function fr(m){return m._rawValidators}function ri(m){return m._rawAsyncValidators}function vr(m){return m?Array.isArray(m)?m:[m]:[]}function dt(m,y){return Array.isArray(m)?m.includes(y):m===y}function Ie(m,y){const E=vr(y);return vr(m).forEach(J=>{dt(E,J)||E.push(J)}),E}function _e(m,y){return vr(y).filter(E=>!dt(m,E))}class mt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(y){this._rawValidators=y||[],this._composedValidatorFn=en(this._rawValidators)}_setAsyncValidators(y){this._rawAsyncValidators=y||[],this._composedAsyncValidatorFn=Yn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(y){this._onDestroyCallbacks.push(y)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(y=>y()),this._onDestroyCallbacks=[]}reset(y){this.control&&this.control.reset(y)}hasError(y,E){return!!this.control&&this.control.hasError(y,E)}getError(y,E){return this.control?this.control.getError(y,E):null}}class ct extends mt{get formDirective(){return null}get path(){return null}}class rn extends mt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dn{constructor(y){this._cd=y}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jn=(()=>{class m extends Dn{constructor(E){super(E)}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(rn,2))},m.\u0275dir=h.lG2({type:m,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(E,M){2&E&&h.ekj("ng-untouched",M.isUntouched)("ng-touched",M.isTouched)("ng-pristine",M.isPristine)("ng-dirty",M.isDirty)("ng-valid",M.isValid)("ng-invalid",M.isInvalid)("ng-pending",M.isPending)},features:[h.qOj]}),m})(),vn=(()=>{class m extends Dn{constructor(E){super(E)}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(ct,10))},m.\u0275dir=h.lG2({type:m,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(E,M){2&E&&h.ekj("ng-untouched",M.isUntouched)("ng-touched",M.isTouched)("ng-pristine",M.isPristine)("ng-dirty",M.isDirty)("ng-valid",M.isValid)("ng-invalid",M.isInvalid)("ng-pending",M.isPending)("ng-submitted",M.isSubmitted)},features:[h.qOj]}),m})();const fn="VALID",Cn="INVALID",ve="PENDING",pe="DISABLED";function ce(m){return(he(m)?m.validators:m)||null}function et(m){return Array.isArray(m)?en(m):m||null}function je(m,y){return(he(y)?y.asyncValidators:m)||null}function ft(m){return Array.isArray(m)?Yn(m):m||null}function he(m){return null!=m&&!Array.isArray(m)&&"object"==typeof m}function ne(m,y,E){const M=m.controls;if(!(y?Object.keys(M):M).length)throw new h.vHH(1e3,"");if(!M[E])throw new h.vHH(1001,"")}function W(m,y,E){m._forEachChild((M,J)=>{if(void 0===E[J])throw new h.vHH(1002,"")})}class te{constructor(y,E){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=y,this._rawAsyncValidators=E,this._composedValidatorFn=et(this._rawValidators),this._composedAsyncValidatorFn=ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(y){this._rawValidators=this._composedValidatorFn=y}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(y){this._rawAsyncValidators=this._composedAsyncValidatorFn=y}get parent(){return this._parent}get valid(){return this.status===fn}get invalid(){return this.status===Cn}get pending(){return this.status==ve}get disabled(){return this.status===pe}get enabled(){return this.status!==pe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(y){this._rawValidators=y,this._composedValidatorFn=et(y)}setAsyncValidators(y){this._rawAsyncValidators=y,this._composedAsyncValidatorFn=ft(y)}addValidators(y){this.setValidators(Ie(y,this._rawValidators))}addAsyncValidators(y){this.setAsyncValidators(Ie(y,this._rawAsyncValidators))}removeValidators(y){this.setValidators(_e(y,this._rawValidators))}removeAsyncValidators(y){this.setAsyncValidators(_e(y,this._rawAsyncValidators))}hasValidator(y){return dt(this._rawValidators,y)}hasAsyncValidator(y){return dt(this._rawAsyncValidators,y)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(y={}){this.touched=!0,this._parent&&!y.onlySelf&&this._parent.markAsTouched(y)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(y=>y.markAllAsTouched())}markAsUntouched(y={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(E=>{E.markAsUntouched({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}markAsDirty(y={}){this.pristine=!1,this._parent&&!y.onlySelf&&this._parent.markAsDirty(y)}markAsPristine(y={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(E=>{E.markAsPristine({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}markAsPending(y={}){this.status=ve,!1!==y.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!y.onlySelf&&this._parent.markAsPending(y)}disable(y={}){const E=this._parentMarkedDirty(y.onlySelf);this.status=pe,this.errors=null,this._forEachChild(M=>{M.disable({...y,onlySelf:!0})}),this._updateValue(),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...y,skipPristineCheck:E}),this._onDisabledChange.forEach(M=>M(!0))}enable(y={}){const E=this._parentMarkedDirty(y.onlySelf);this.status=fn,this._forEachChild(M=>{M.enable({...y,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent}),this._updateAncestors({...y,skipPristineCheck:E}),this._onDisabledChange.forEach(M=>M(!1))}_updateAncestors(y){this._parent&&!y.onlySelf&&(this._parent.updateValueAndValidity(y),y.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(y){this._parent=y}getRawValue(){return this.value}updateValueAndValidity(y={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fn||this.status===ve)&&this._runAsyncValidator(y.emitEvent)),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!y.onlySelf&&this._parent.updateValueAndValidity(y)}_updateTreeValidity(y={emitEvent:!0}){this._forEachChild(E=>E._updateTreeValidity(y)),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pe:fn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(y){if(this.asyncValidator){this.status=ve,this._hasOwnPendingAsyncValidator=!0;const E=lr(this.asyncValidator(this));this._asyncValidationSubscription=E.subscribe(M=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(M,{emitEvent:y})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(y,E={}){this.errors=y,this._updateControlsErrors(!1!==E.emitEvent)}get(y){let E=y;return null==E||(Array.isArray(E)||(E=E.split(".")),0===E.length)?null:E.reduce((M,J)=>M&&M._find(J),this)}getError(y,E){const M=E?this.get(E):this;return M&&M.errors?M.errors[y]:null}hasError(y,E){return!!this.getError(y,E)}get root(){let y=this;for(;y._parent;)y=y._parent;return y}_updateControlsErrors(y){this.status=this._calculateStatus(),y&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(y)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?pe:this.errors?Cn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ve)?ve:this._anyControlsHaveStatus(Cn)?Cn:fn}_anyControlsHaveStatus(y){return this._anyControls(E=>E.status===y)}_anyControlsDirty(){return this._anyControls(y=>y.dirty)}_anyControlsTouched(){return this._anyControls(y=>y.touched)}_updatePristine(y={}){this.pristine=!this._anyControlsDirty(),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}_updateTouched(y={}){this.touched=this._anyControlsTouched(),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}_registerOnCollectionChange(y){this._onCollectionChange=y}_setUpdateStrategy(y){he(y)&&null!=y.updateOn&&(this._updateOn=y.updateOn)}_parentMarkedDirty(y){return!y&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(y){return null}}class Ee extends te{constructor(y,E,M){super(ce(E),je(M,E)),this.controls=y,this._initObservables(),this._setUpdateStrategy(E),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(y,E){return this.controls[y]?this.controls[y]:(this.controls[y]=E,E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange),E)}addControl(y,E,M={}){this.registerControl(y,E),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}removeControl(y,E={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}setControl(y,E,M={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],E&&this.registerControl(y,E),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}contains(y){return this.controls.hasOwnProperty(y)&&this.controls[y].enabled}setValue(y,E={}){W(this,0,y),Object.keys(y).forEach(M=>{ne(this,!0,M),this.controls[M].setValue(y[M],{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E)}patchValue(y,E={}){null!=y&&(Object.keys(y).forEach(M=>{const J=this.controls[M];J&&J.patchValue(y[M],{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E))}reset(y={},E={}){this._forEachChild((M,J)=>{M.reset(y[J],{onlySelf:!0,emitEvent:E.emitEvent})}),this._updatePristine(E),this._updateTouched(E),this.updateValueAndValidity(E)}getRawValue(){return this._reduceChildren({},(y,E,M)=>(y[M]=E.getRawValue(),y))}_syncPendingControls(){let y=this._reduceChildren(!1,(E,M)=>!!M._syncPendingControls()||E);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_forEachChild(y){Object.keys(this.controls).forEach(E=>{const M=this.controls[E];M&&y(M,E)})}_setUpControls(){this._forEachChild(y=>{y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(y){for(const[E,M]of Object.entries(this.controls))if(this.contains(E)&&y(M))return!0;return!1}_reduceValue(){return this._reduceChildren({},(E,M,J)=>((M.enabled||this.disabled)&&(E[J]=M.value),E))}_reduceChildren(y,E){let M=y;return this._forEachChild((J,$e)=>{M=E(M,J,$e)}),M}_allControlsDisabled(){for(const y of Object.keys(this.controls))if(this.controls[y].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(y){return this.controls.hasOwnProperty(y)?this.controls[y]:null}}class pt extends Ee{}function In(m,y){return[...y.path,m]}function kn(m,y){Jr(m,y),y.valueAccessor.writeValue(m.value),m.disabled&&y.valueAccessor.setDisabledState?.(!0),function Ci(m,y){y.valueAccessor.registerOnChange(E=>{m._pendingValue=E,m._pendingChange=!0,m._pendingDirty=!0,"change"===m.updateOn&&rr(m,y)})}(m,y),function or(m,y){const E=(M,J)=>{y.valueAccessor.writeValue(M),J&&y.viewToModelUpdate(M)};m.registerOnChange(E),y._registerOnDestroy(()=>{m._unregisterOnChange(E)})}(m,y),function Kr(m,y){y.valueAccessor.registerOnTouched(()=>{m._pendingTouched=!0,"blur"===m.updateOn&&m._pendingChange&&rr(m,y),"submit"!==m.updateOn&&m.markAsTouched()})}(m,y),function qr(m,y){if(y.valueAccessor.setDisabledState){const E=M=>{y.valueAccessor.setDisabledState(M)};m.registerOnDisabledChange(E),y._registerOnDestroy(()=>{m._unregisterOnDisabledChange(E)})}}(m,y)}function pn(m,y,E=!0){const M=()=>{};y.valueAccessor&&(y.valueAccessor.registerOnChange(M),y.valueAccessor.registerOnTouched(M)),tr(m,y),m&&(y._invokeOnDestroyCallbacks(),m._registerOnCollectionChange(()=>{}))}function pr(m,y){m.forEach(E=>{E.registerOnValidatorChange&&E.registerOnValidatorChange(y)})}function Jr(m,y){const E=fr(m);null!==y.validator?m.setValidators(er(E,y.validator)):"function"==typeof E&&m.setValidators([E]);const M=ri(m);null!==y.asyncValidator?m.setAsyncValidators(er(M,y.asyncValidator)):"function"==typeof M&&m.setAsyncValidators([M]);const J=()=>m.updateValueAndValidity();pr(y._rawValidators,J),pr(y._rawAsyncValidators,J)}function tr(m,y){let E=!1;if(null!==m){if(null!==y.validator){const J=fr(m);if(Array.isArray(J)&&J.length>0){const $e=J.filter($t=>$t!==y.validator);$e.length!==J.length&&(E=!0,m.setValidators($e))}}if(null!==y.asyncValidator){const J=ri(m);if(Array.isArray(J)&&J.length>0){const $e=J.filter($t=>$t!==y.asyncValidator);$e.length!==J.length&&(E=!0,m.setAsyncValidators($e))}}}const M=()=>{};return pr(y._rawValidators,M),pr(y._rawAsyncValidators,M),E}function rr(m,y){m._pendingDirty&&m.markAsDirty(),m.setValue(m._pendingValue,{emitModelToViewChange:!1}),y.viewToModelUpdate(m._pendingValue),m._pendingChange=!1}function un(m,y){if(!m.hasOwnProperty("model"))return!1;const E=m.model;return!!E.isFirstChange()||!Object.is(y,E.currentValue)}function $n(m,y){if(!y)return null;let E,M,J;return Array.isArray(y),y.forEach($e=>{$e.constructor===Ke?E=$e:function Mn(m){return Object.getPrototypeOf(m.constructor)===Be}($e)?M=$e:J=$e}),J||M||E||null}function Ns(m,y){const E=m.indexOf(y);E>-1&&m.splice(E,1)}function Yi(m){return"object"==typeof m&&null!==m&&2===Object.keys(m).length&&"value"in m&&"disabled"in m}const Zi=class extends te{constructor(y=null,E,M){super(ce(E),je(M,E)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(y),this._setUpdateStrategy(E),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),he(E)&&(E.nonNullable||E.initialValueIsDefault)&&(this.defaultValue=Yi(y)?y.value:y)}setValue(y,E={}){this.value=this._pendingValue=y,this._onChange.length&&!1!==E.emitModelToViewChange&&this._onChange.forEach(M=>M(this.value,!1!==E.emitViewToModelChange)),this.updateValueAndValidity(E)}patchValue(y,E={}){this.setValue(y,E)}reset(y=this.defaultValue,E={}){this._applyFormState(y),this.markAsPristine(E),this.markAsUntouched(E),this.setValue(this.value,E),this._pendingChange=!1}_updateValue(){}_anyControls(y){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(y){this._onChange.push(y)}_unregisterOnChange(y){Ns(this._onChange,y)}registerOnDisabledChange(y){this._onDisabledChange.push(y)}_unregisterOnDisabledChange(y){Ns(this._onDisabledChange,y)}_forEachChild(y){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(y){Yi(y)?(this.value=this._pendingValue=y.value,y.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=y}},gr={provide:rn,useExisting:(0,h.Gpc)(()=>ds)},rs=(()=>Promise.resolve(null))();let ds=(()=>{class m extends rn{constructor(E,M,J,$e,$t){super(),this._changeDetectorRef=$t,this.control=new Zi,this._registered=!1,this.update=new h.vpe,this._parent=E,this._setValidators(M),this._setAsyncValidators(J),this.valueAccessor=$n(0,$e)}ngOnChanges(E){if(this._checkForErrors(),!this._registered||"name"in E){if(this._registered&&(this._checkName(),this.formDirective)){const M=E.name.previousValue;this.formDirective.removeControl({name:M,path:this._getPath(M)})}this._setUpControl()}"isDisabled"in E&&this._updateDisabled(E),un(E,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(E){this.viewModel=E,this.update.emit(E)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(E){rs.then(()=>{this.control.setValue(E,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(E){const M=E.isDisabled.currentValue,J=0!==M&&(0,h.D6c)(M);rs.then(()=>{J&&!this.control.disabled?this.control.disable():!J&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(E){return this._parent?In(E,this._parent):[E]}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(ct,9),h.Y36(Bt,10),h.Y36(gn,10),h.Y36(ut,10),h.Y36(h.sBO,8))},m.\u0275dir=h.lG2({type:m,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([gr]),h.qOj,h.TTD]}),m})(),Is=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275dir=h.lG2({type:m,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),m})();const Li={provide:ut,useExisting:(0,h.Gpc)(()=>Os),multi:!0};let Ai=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({}),m})(),Nr=(()=>{class m{constructor(){this._accessors=[]}add(E,M){this._accessors.push([E,M])}remove(E){for(let M=this._accessors.length-1;M>=0;--M)if(this._accessors[M][1]===E)return void this._accessors.splice(M,1)}select(E){this._accessors.forEach(M=>{this._isSameGroup(M,E)&&M[1]!==E&&M[1].fireUncheck(E.value)})}_isSameGroup(E,M){return!!E[0].control&&E[0]._parent===M._control._parent&&E[1].name===M.name}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:Ai}),m})(),Os=(()=>{class m extends Be{constructor(E,M,J,$e){super(E,M),this._registry=J,this._injector=$e,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(rn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(E){this._state=E===this.value,this.setProperty("checked",this._state)}registerOnChange(E){this._fn=E,this.onChange=()=>{E(this.value),this._registry.select(this)}}fireUncheck(E){this.writeValue(E)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Nr),h.Y36(h.zs3))},m.\u0275dir=h.lG2({type:m,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(E,M){1&E&&h.NdJ("change",function(){return M.onChange()})("blur",function(){return M.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[h._Bn([Li]),h.qOj]}),m})();const _o=new h.OlP("NgModelWithFormControlWarning"),Si={provide:ct,useExisting:(0,h.Gpc)(()=>qs)};let qs=(()=>{class m extends ct{constructor(E,M){super(),this.validators=E,this.asyncValidators=M,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(E),this._setAsyncValidators(M)}ngOnChanges(E){this._checkFormPresent(),E.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(E){const M=this.form.get(E.path);return kn(M,E),M.updateValueAndValidity({emitEvent:!1}),this.directives.push(E),M}getControl(E){return this.form.get(E.path)}removeControl(E){pn(E.control||null,E,!1),function $r(m,y){const E=m.indexOf(y);E>-1&&m.splice(E,1)}(this.directives,E)}addFormGroup(E){this._setUpFormContainer(E)}removeFormGroup(E){this._cleanUpFormContainer(E)}getFormGroup(E){return this.form.get(E.path)}addFormArray(E){this._setUpFormContainer(E)}removeFormArray(E){this._cleanUpFormContainer(E)}getFormArray(E){return this.form.get(E.path)}updateModel(E,M){this.form.get(E.path).setValue(M)}onSubmit(E){return this.submitted=!0,function Fn(m,y){m._syncPendingControls(),y.forEach(E=>{const M=E.control;"submit"===M.updateOn&&M._pendingChange&&(E.viewToModelUpdate(M._pendingValue),M._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(E),!1}onReset(){this.resetForm()}resetForm(E){this.form.reset(E),this.submitted=!1}_updateDomValue(){this.directives.forEach(E=>{const M=E.control,J=this.form.get(E.path);M!==J&&(pn(M||null,E),(m=>m instanceof Zi)(J)&&(kn(J,E),E.control=J))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(E){const M=this.form.get(E.path);(function On(m,y){Jr(m,y)})(M,E),M.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(E){if(this.form){const M=this.form.get(E.path);M&&function We(m,y){return tr(m,y)}(M,E)&&M.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jr(this.form,this),this._oldForm&&tr(this._oldForm,this)}_checkFormPresent(){}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(Bt,10),h.Y36(gn,10))},m.\u0275dir=h.lG2({type:m,selectors:[["","formGroup",""]],hostBindings:function(E,M){1&E&&h.NdJ("submit",function($e){return M.onSubmit($e)})("reset",function(){return M.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Si]),h.qOj,h.TTD]}),m})();const Ta={provide:rn,useExisting:(0,h.Gpc)(()=>Gr)};let Gr=(()=>{class m extends rn{constructor(E,M,J,$e,$t){super(),this._ngModelWarningConfig=$t,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=E,this._setValidators(M),this._setAsyncValidators(J),this.valueAccessor=$n(0,$e)}set isDisabled(E){}ngOnChanges(E){this._added||this._setUpControl(),un(E,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(E){this.viewModel=E,this.update.emit(E)}get path(){return In(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return m._ngModelWarningSentOnce=!1,m.\u0275fac=function(E){return new(E||m)(h.Y36(ct,13),h.Y36(Bt,10),h.Y36(gn,10),h.Y36(ut,10),h.Y36(_o,8))},m.\u0275dir=h.lG2({type:m,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Ta]),h.qOj,h.TTD]}),m})();const De={provide:ut,useExisting:(0,h.Gpc)(()=>lt),multi:!0};function me(m,y){return null==m?`${y}`:(y&&"object"==typeof y&&(y="Object"),`${m}: ${y}`.slice(0,50))}let lt=(()=>{class m extends Be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(E){this._compareWith=E}writeValue(E){this.value=E;const J=me(this._getOptionId(E),E);this.setProperty("value",J)}registerOnChange(E){this.onChange=M=>{this.value=this._getOptionValue(M),E(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(E){for(const M of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(M),E))return M;return null}_getOptionValue(E){const M=function Ge(m){return m.split(":")[0]}(E);return this._optionMap.has(M)?this._optionMap.get(M):E}}return m.\u0275fac=function(){let y;return function(M){return(y||(y=h.n5z(m)))(M||m)}}(),m.\u0275dir=h.lG2({type:m,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(E,M){1&E&&h.NdJ("change",function($e){return M.onChange($e.target.value)})("blur",function(){return M.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([De]),h.qOj]}),m})(),xt=(()=>{class m{constructor(E,M,J){this._element=E,this._renderer=M,this._select=J,this._select&&(this.id=this._select._registerOption())}set ngValue(E){null!=this._select&&(this._select._optionMap.set(this.id,E),this._setElementValue(me(this.id,E)),this._select.writeValue(this._select.value))}set value(E){this._setElementValue(E),this._select&&this._select.writeValue(this._select.value)}_setElementValue(E){this._renderer.setProperty(this._element.nativeElement,"value",E)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(lt,9))},m.\u0275dir=h.lG2({type:m,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),m})();const Tt={provide:ut,useExisting:(0,h.Gpc)(()=>Ln),multi:!0};function ln(m,y){return null==m?`${y}`:("string"==typeof y&&(y=`'${y}'`),y&&"object"==typeof y&&(y="Object"),`${m}: ${y}`.slice(0,50))}let Ln=(()=>{class m extends Be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(E){this._compareWith=E}writeValue(E){let M;if(this.value=E,Array.isArray(E)){const J=E.map($e=>this._getOptionId($e));M=($e,$t)=>{$e._setSelected(J.indexOf($t.toString())>-1)}}else M=(J,$e)=>{J._setSelected(!1)};this._optionMap.forEach(M)}registerOnChange(E){this.onChange=M=>{const J=[],$e=M.selectedOptions;if(void 0!==$e){const $t=$e;for(let En=0;En<$t.length;En++){const Wn=this._getOptionValue($t[En].value);J.push(Wn)}}else{const $t=M.options;for(let En=0;En<$t.length;En++){const Tn=$t[En];if(Tn.selected){const Wn=this._getOptionValue(Tn.value);J.push(Wn)}}}this.value=J,E(J)}}_registerOption(E){const M=(this._idCounter++).toString();return this._optionMap.set(M,E),M}_getOptionId(E){for(const M of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(M)._value,E))return M;return null}_getOptionValue(E){const M=function cn(m){return m.split(":")[0]}(E);return this._optionMap.has(M)?this._optionMap.get(M)._value:E}}return m.\u0275fac=function(){let y;return function(M){return(y||(y=h.n5z(m)))(M||m)}}(),m.\u0275dir=h.lG2({type:m,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(E,M){1&E&&h.NdJ("change",function($e){return M.onChange($e.target)})("blur",function(){return M.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Tt]),h.qOj]}),m})(),Ar=(()=>{class m{constructor(E,M,J){this._element=E,this._renderer=M,this._select=J,this._select&&(this.id=this._select._registerOption(this))}set ngValue(E){null!=this._select&&(this._value=E,this._setElementValue(ln(this.id,E)),this._select.writeValue(this._select.value))}set value(E){this._select?(this._value=E,this._setElementValue(ln(this.id,E)),this._select.writeValue(this._select.value)):this._setElementValue(E)}_setElementValue(E){this._renderer.setProperty(this._element.nativeElement,"value",E)}_setSelected(E){this._renderer.setProperty(this._element.nativeElement,"selected",E)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Ln,9))},m.\u0275dir=h.lG2({type:m,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),m})(),ii=(()=>{class m{constructor(){this._validator=Cr}ngOnChanges(E){if(this.inputName in E){const M=this.normalizeInput(E[this.inputName].currentValue);this._enabled=this.enabled(M),this._validator=this._enabled?this.createValidator(M):Cr,this._onChange&&this._onChange()}}validate(E){return this._validator(E)}registerOnValidatorChange(E){this._onChange=E}enabled(E){return null!=E}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275dir=h.lG2({type:m,features:[h.TTD]}),m})();const yo={provide:Bt,useExisting:(0,h.Gpc)(()=>Mi),multi:!0};let Mi=(()=>{class m extends ii{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=E=>Nn}enabled(E){return E}}return m.\u0275fac=function(){let y;return function(M){return(y||(y=h.n5z(m)))(M||m)}}(),m.\u0275dir=h.lG2({type:m,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(E,M){2&E&&h.uIk("required",M._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([yo]),h.qOj]}),m})(),Wo=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[Ai]}),m})(),sa=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[Wo]}),m})(),fu=(()=>{class m{static withConfig(E){return{ngModule:m,providers:[{provide:_o,useValue:E.warnOnNgModelWithFormControl}]}}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[Wo]}),m})();class ss extends te{constructor(y,E,M){super(ce(E),je(M,E)),this.controls=y,this._initObservables(),this._setUpdateStrategy(E),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(y){return this.controls[this._adjustIndex(y)]}push(y,E={}){this.controls.push(y),this._registerControl(y),this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}insert(y,E,M={}){this.controls.splice(y,0,E),this._registerControl(E),this.updateValueAndValidity({emitEvent:M.emitEvent})}removeAt(y,E={}){let M=this._adjustIndex(y);M<0&&(M=0),this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),this.updateValueAndValidity({emitEvent:E.emitEvent})}setControl(y,E,M={}){let J=this._adjustIndex(y);J<0&&(J=0),this.controls[J]&&this.controls[J]._registerOnCollectionChange(()=>{}),this.controls.splice(J,1),E&&(this.controls.splice(J,0,E),this._registerControl(E)),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(y,E={}){W(this,0,y),y.forEach((M,J)=>{ne(this,!1,J),this.at(J).setValue(M,{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E)}patchValue(y,E={}){null!=y&&(y.forEach((M,J)=>{this.at(J)&&this.at(J).patchValue(M,{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E))}reset(y=[],E={}){this._forEachChild((M,J)=>{M.reset(y[J],{onlySelf:!0,emitEvent:E.emitEvent})}),this._updatePristine(E),this._updateTouched(E),this.updateValueAndValidity(E)}getRawValue(){return this.controls.map(y=>y.getRawValue())}clear(y={}){this.controls.length<1||(this._forEachChild(E=>E._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:y.emitEvent}))}_adjustIndex(y){return y<0?y+this.length:y}_syncPendingControls(){let y=this.controls.reduce((E,M)=>!!M._syncPendingControls()||E,!1);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_forEachChild(y){this.controls.forEach((E,M)=>{y(E,M)})}_updateValue(){this.value=this.controls.filter(y=>y.enabled||this.disabled).map(y=>y.value)}_anyControls(y){return this.controls.some(E=>E.enabled&&y(E))}_setUpControls(){this._forEachChild(y=>this._registerControl(y))}_allControlsDisabled(){for(const y of this.controls)if(y.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(y){y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)}_find(y){return this.at(y)??null}}function Us(m){return!!m&&(void 0!==m.asyncValidators||void 0!==m.validators||void 0!==m.updateOn)}let oa=(()=>{class m{constructor(){this.useNonNullable=!1}get nonNullable(){const E=new m;return E.useNonNullable=!0,E}group(E,M=null){const J=this._reduceControls(E);let $e={};return Us(M)?$e=M:null!==M&&($e.validators=M.validator,$e.asyncValidators=M.asyncValidator),new Ee(J,$e)}record(E,M=null){const J=this._reduceControls(E);return new pt(J,M)}control(E,M,J){let $e={};return this.useNonNullable?(Us(M)?$e=M:($e.validators=M,$e.asyncValidators=J),new Zi(E,{...$e,nonNullable:!0})):new Zi(E,M,J)}array(E,M,J){const $e=E.map($t=>this._createControl($t));return new ss($e,M,J)}_reduceControls(E){const M={};return Object.keys(E).forEach(J=>{M[J]=this._createControl(E[J])}),M}_createControl(E){return E instanceof Zi||E instanceof te?E:Array.isArray(E)?this.control(E[0],E.length>1?E[1]:null,E.length>2?E[2]:null):this.control(E)}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:fu}),m})();const Ts=[".container"],Yu=function(m,y){return{"messages__item--operator":m,"messages__item--visitor":y}};function Da(m,y){if(1&m&&(h.TgZ(0,"div")(1,"div",14)(2,"b"),h._uU(3),h.qZA(),h._UZ(4,"br"),h.TgZ(5,"span"),h._uU(6),h.qZA(),h.TgZ(7,"span",15),h._UZ(8,"br"),h._uU(9),h.ALo(10,"date"),h.qZA()()()),2&m){const E=y.$implicit;h.xp6(1),h.Q6J("ngClass",h.WLB(7,Yu,E.myMsg,!E.myMsg)),h.xp6(2),h.Oqu(E.fromName),h.xp6(3),h.hij("",E.msg," "),h.xp6(3),h.Oqu(h.xi3(10,4,null==E.createdAt?null:E.createdAt.toMillis(),"short"))}}let ua=(()=>{class m{constructor(E,M){this.chatSer=E,this.router=M,this.newMsg="",this.state=!1}ngOnInit(){this.messages=this.chatSer.getChatMessages()}toggleState(){this.state=!this.state,this.showOrHideChatBox()}showOrHideChatBox(){this.state?this.chatboxStatus="chatbox--active":this.state||(this.chatboxStatus="")}sendMessage(){this.chatSer.addChatMessage(this.newMsg).then(()=>{this.newMsg=""})}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(Ce),h.Y36(Z.F0))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-chat"]],viewQuery:function(E,M){if(1&E&&h.Gf(Ts,5),2&E){let J;h.iGM(J=h.CRH())&&(M.content=J.first)}},decls:18,vars:7,consts:[[1,"container"],[1,"chatbox"],[1,"chatbox__header"],[1,"chatbox__image--header"],[1,"chatbox__content--header"],[1,"chatbox__heading--header"],[1,"chatbox__messages"],[4,"ngFor","ngForOf"],[1,"chatbox__footer"],["type","text","placeholder","Escriba un mensaje...","maxLength","500",3,"ngModel","ngModelChange","keydown.enter"],[1,"chatbox__send--footer",3,"click"],[1,"chatbox__button"],[3,"click"],["src","././assets/imagenes/chat/chatbox-icon.svg"],[1,"messages__item",3,"ngClass"],[1,"time"]],template:function(E,M){1&E&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),h._UZ(4,"div",3),h.TgZ(5,"div",4)(6,"h4",5),h._uU(7,"Chat"),h.qZA()()(),h.TgZ(8,"div",6),h.YNc(9,Da,11,10,"div",7),h.ALo(10,"async"),h.qZA(),h.TgZ(11,"div",8)(12,"input",9),h.NdJ("ngModelChange",function($e){return M.newMsg=$e})("keydown.enter",function(){return M.sendMessage()}),h.qZA(),h.TgZ(13,"p",10),h.NdJ("click",function(){return M.sendMessage()}),h._uU(14," Enviar"),h.qZA()()(),h.TgZ(15,"div",11)(16,"button",12),h.NdJ("click",function(){return M.toggleState()}),h._UZ(17,"img",13),h.qZA()()()()),2&E&&(h.xp6(2),h.Gre("chatbox__support ",M.chatboxStatus,""),h.xp6(7),h.Q6J("ngForOf",h.lcZ(10,5,M.messages)),h.xp6(3),h.Q6J("ngModel",M.newMsg))},dependencies:[de.mk,de.sg,Ke,Jn,ds,de.Ov,de.uU],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.container[_ngcontent-%COMP%]{--primaryGradient: linear-gradient(93.12deg, #581b98 .52%, #9c1de7 100%);--secondaryGradient: linear-gradient(268.91deg, #581b98 -2.14%, #9c1de7 99.69%);--primaryBoxShadow: 0px 10px 15px rgba(0, 0, 0, .1);--secondaryBoxShadow: 0px -10px 15px rgba(0, 0, 0, .1);--light: 300;--regular: 400;--semiBold: 600;--extraLight: 300;--italic: 300;--primary: #581b98;font-family:Nunito,sans-serif;font-weight:400;font-size:100%;background:#f1f1f1;z-index:20}body[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;font-weight:400;font-size:100%;background:#f1f1f1;z-index:20}.chatbox__support[_ngcontent-%COMP%]{background:#f9f9f9;height:450px;width:350px;box-shadow:0 0 15px #0000001a;border-top-left-radius:20px;border-top-right-radius:20px}.chatbox__header[_ngcontent-%COMP%]{background:var(--primaryGradient);display:flex;flex-direction:row;align-items:center;justify-content:center;padding:15px 20px;border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:var(--primaryBoxShadow)}.chatbox__image--header[_ngcontent-%COMP%]{margin-right:10px}.chatbox__heading--header[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff}.chatbox__description--header[_ngcontent-%COMP%]{font-size:.9rem;color:#fff}.chatbox__messages[_ngcontent-%COMP%]{padding:0 20px}.messages__item[_ngcontent-%COMP%]{margin-top:10px;background:#e0e0e0;padding:8px 12px;max-width:70%}.messages__item--visitor[_ngcontent-%COMP%], .messages__item--typing[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;border-bottom-right-radius:20px}.messages__item--operator[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;border-bottom-left-radius:20px;background:var(--primary);color:#fff}.chatbox__footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px;background:var(--secondaryGradient);box-shadow:var(--secondaryBoxShadow);border-bottom-right-radius:10px;border-bottom-left-radius:10px;margin-top:20px}.chatbox__footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px;border-radius:30px;text-align:center}.chatbox__send--footer[_ngcontent-%COMP%]{color:#fff;font-weight:400}.chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:visited{padding:10px;background:white;border:none;outline:none;border-top-left-radius:50px;border-top-right-radius:50px;border-bottom-left-radius:50px;box-shadow:0 10px 15px #0000001a;cursor:pointer}.chatbox[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:30px}.chatbox__support[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#eee;width:300px;height:500px;z-index:-123456;opacity:0;transition:all .5s ease-in-out}.chatbox--active[_ngcontent-%COMP%]{transform:translateY(-40px);z-index:123456;opacity:1}.chatbox__button[_ngcontent-%COMP%]{text-align:right}.chatbox__header[_ngcontent-%COMP%]{position:sticky;top:0;background:linear-gradient(93.12deg,#581b98 .52%,#9c1de7 100%)}.chatbox__messages[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-direction:column;overflow-y:scroll;flex-direction:column-reverse}.messages__item[_ngcontent-%COMP%]{background:linear-gradient(93.12deg,#581b98 .52%,#9c1de7 100%);max-width:80.6%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;display:table}.messages__item--operator[_ngcontent-%COMP%]{margin-left:auto;color:#fff}.messages__item--visitor[_ngcontent-%COMP%]{margin-right:auto;background:linear-gradient(93.12deg,#d9bbf8 .52%,#c997e6 100%)}.chatbox__footer[_ngcontent-%COMP%]{position:sticky;bottom:0}.messages__item--typing[_ngcontent-%COMP%]{will-change:transform;width:auto;border-top-right-radius:20px;border-top-left-radius:20px;border-bottom-right-radius:20px;padding:15px 20px;display:table;margin-right:auto;position:relative;animation:2s bulge infinite ease-out}.messages__item--typing[_ngcontent-%COMP%]:before, .messages__item--typing[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:-2px;height:10px;width:10px;border-radius:50%}.messages__item--typing[_ngcontent-%COMP%]:after{height:10px;width:10px;left:-10px;bottom:-10px}span.messages__dot[_ngcontent-%COMP%]{height:8px;width:8px;float:left;margin:0 1px;background-color:#9e9ea1;display:block;border-radius:50%;opacity:.4;animation:1s blink infinite}@keyframes blink{50%{opacity:1}}@keyframes bulge{50%{transform:scale(1.05)}}.message[_ngcontent-%COMP%]{padding:10px!important;border-radius:10px!important;margin-bottom:4px!important;white-space:pre-wrap}.time[_ngcontent-%COMP%]{color:#fff;float:right;font-size:small}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}']}),m})();function Aa(m,y){1&m&&(h.TgZ(0,"div",12),h._UZ(1,"span"),h.TgZ(2,"div",5)(3,"h2"),h._uU(4,"Resultados Encuestas"),h.qZA()()())}function Ha(m,y){if(1&m&&(h.TgZ(0,"div"),h.YNc(1,Aa,5,0,"div",11),h.qZA()),2&m){const E=h.oxw();h.xp6(1),h.Q6J("ngIf","admin"===E.usuario.rol)}}function la(m,y){1&m&&h._UZ(0,"app-chat")}let Ds=(()=>{class m{constructor(E){this.authSvc=E,this.usuario=null,this.user$=this.authSvc.user$,this.authSvc.getUsuario()?.subscribe(M=>{this.usuario=M})}ngOnInit(){this.user2$=this.authSvc.user2$}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(P.e))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-bienvenido"]],decls:25,vars:4,consts:[[1,"containerD"],[1,"hero-text"],["src","./assets/imagenes/sala.png","width","700"],[1,"menu-container"],["routerLink","/juegos",1,"fill"],[1,"content"],["routerLink","/encuesta",1,"fill"],["routerLink","/listados",1,"fill"],[4,"ngIf"],[1,"chat"],[4,"ngIfUser","ngIf"],["class","fill","routerLink","/encuestaresultados",4,"ngIf"],["routerLink","/encuestaresultados",1,"fill"]],template:function(E,M){1&E&&(h.TgZ(0,"div",0),h._UZ(1,"br"),h.TgZ(2,"div",1)(3,"div"),h._UZ(4,"img",2),h.qZA()(),h.TgZ(5,"div",3)(6,"div",4),h._UZ(7,"span"),h.TgZ(8,"div",5)(9,"h2"),h._uU(10,"Juegos "),h.qZA()()(),h.TgZ(11,"div",6),h._UZ(12,"span"),h.TgZ(13,"div",5)(14,"h2"),h._uU(15,"Encuesta"),h.qZA()()(),h.TgZ(16,"div",7),h._UZ(17,"span"),h.TgZ(18,"div",5)(19,"h2"),h._uU(20,"Resultados"),h.qZA()()(),h.YNc(21,Ha,2,1,"div",8),h.qZA(),h.TgZ(22,"div",9),h.YNc(23,la,1,0,"app-chat",10),h.ALo(24,"async"),h.qZA()()),2&E&&(h.xp6(21),h.Q6J("ngIf",M.usuario),h.xp6(2),h.Q6J("ngIf",h.lcZ(24,2,M.user2$)))},dependencies:[de.O5,Z.rH,ua,de.Ov],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Pastel Colors,sans-serif}.hero-text[_ngcontent-%COMP%]{text-align:center;position:relative;color:#fff;align-self:auto;justify-content:center;align-items:center}.hero-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:none;outline:0;padding:10px 25px;color:#000;background-color:#ddd;text-align:center;cursor:pointer}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;margin:20px 30px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#90ffe7;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:0;padding:20px 40px}.containerD[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin-top:auto;font-size:5.1em}.menu-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;padding:40px 0;flex-wrap:wrap}h2[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:4.1em;z-index:-1}.chat[_ngcontent-%COMP%]{z-index:30}']}),m})(),Fo=(()=>{class m{constructor(E,M,J){this.afs=E,this.authSvc=M,this.router=J,this.getUserMail()}addEncuesta(E){return this.getUserMail(),this.afs.collection("encuesta").add({user:this.mail,pregunta1:E.pregunta1,respuesta1:E.respuesta1,pregunta2:E.pregunta2,respuesta2:E.respuesta2,pregunta3:E.pregunta3,respuesta3:E.respuesta3,nombre:E.nombre,apellido:E.apellido,edad:E.edad,telefono:E.telefono,sexo:E.sexo,createdAt:qe.Z.firestore.FieldValue.serverTimestamp()})}getEncuestas(){this.getUserMail();let E=[];return this.getUserMail(),this.getEncuesta().pipe((0,tt.w)(M=>(E=M,this.afs.collection("encuesta",J=>J.orderBy("createdAt","desc")).valueChanges({idField:"id"}))))}getEncuesta(){return this.afs.collection("encuesta",E=>E.orderBy("createdAt","desc")).valueChanges({idField:"id"})}getUserMail(){var E=this;return(0,Le.Z)(function*(){(yield E.authSvc.getUsuarioFire())?(E.mail=E.authSvc.getUsuarioFire()?.email,console.log(E.mail)):E.mail="usuario anonimo"})()}}return m.\u0275fac=function(E){return new(E||m)(h.LFG(fe.ST),h.LFG(P.e),h.LFG(Z.F0))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function vo(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El nombre es requerido"),h.qZA())}function zo(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El nombre solo puede estar compuesto por letras"),h.qZA())}function Sa(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El apellido es requerido"),h.qZA())}function F(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El apellido solo puede estar compuesto por letras"),h.qZA())}function z(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"La edad es requerida"),h.qZA())}function U(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"La edad tiene que ser numerica"),h.qZA())}function Q(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"La edad no puede ser menor a 18"),h.qZA())}function Ne(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"La edad no puede ser mayor a 99"),h.qZA())}function It(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El numero de telefono es requerido"),h.qZA())}function At(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El numero de telefono no puede exceder los 10 caracteres "),h.qZA())}function Rn(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"El telefono tiene que ser numerico"),h.qZA())}function Qr(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"No ha seleccionado sexo"),h.qZA())}function Ur(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"No ha contestado la pregunta"),h.qZA())}function Wr(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"No ha contestado la pregunta"),h.qZA())}function Pr(m,y){1&m&&(h.TgZ(0,"small",50),h._uU(1,"No ha contestado la pregunta"),h.qZA())}let pi=(()=>{class m{constructor(E,M,J,$e){this.fb=E,this.authSvc=M,this.enSvc=J,this.router=$e,this.encuesta={}}ngOnInit(){this.getmail(),this.formGroup=this.fb.group({nombre:["",[Et.required,Et.pattern("[a-zA-Z]+")]],apellido:["",[Et.required,Et.pattern("[a-zA-Z]+")]],edad:["",[Et.required,Et.min(18),Et.max(99),Et.pattern("^[0-9]+$")]],sexo:["",Et.required],telefono:["",[Et.required,Et.maxLength(10),Et.pattern("^[0-9]+$")]],pregunta2:["",Et.required],pregunta1:["",Et.required],pregunta3:["",Et.required]})}enviar(){this.encuesta={pregunta1:"\xbfLe gusto la pagina?",respuesta1:this.formGroup.get("pregunta1").value,pregunta2:"\xbfQue juegos que le gustaria ver en la pagina?",respuesta2:this.formGroup.get("pregunta2").value,pregunta3:"\xbfCual es su juego favorito?",respuesta3:this.formGroup.get("pregunta3").value,nombre:this.formGroup.get("nombre").value,apellido:this.formGroup.get("apellido").value,edad:this.formGroup.get("edad").value,telefono:this.formGroup.get("telefono").value,sexo:this.formGroup.get("sexo").value},console.log(this.formGroup.get("apellido").value),this.enSvc.addEncuesta(this.encuesta),this.router.navigate(["/bienvenido"])}getmail(){var E=this;return(0,Le.Z)(function*(){E.mail=E.authSvc.getUsuarioFire().email})()}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(oa),h.Y36(P.e),h.Y36(Fo),h.Y36(Z.F0))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-encuesta"]],decls:104,vars:18,consts:[[1,"container"],[1,"py-5","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-7","col-lg-8"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","formControlName","nombre","id","firstName","placeholder","","value","","required","",1,"form-control"],[1,"invalid-feedback"],["class","invalid",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","formControlName","apellido","id","lastName","placeholder","","value","","required","",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],[1,"text-muted"],["type","email","id","email","readonly","",1,"form-control","mail",3,"placeholder"],[1,"col-6"],["for","address",1,"form-label"],["type","text","formControlName","edad","id","address","placeholder","","required","",1,"form-control"],["for","address2",1,"form-label"],["type","text","formControlName","telefono","id","address2","placeholder","",1,"form-control"],[1,"col-md-5"],["for","se",1,"sexo"],["id","country","formControlName","sexo","required","",1,"form-select"],["value",""],["value","Femenino"],["value","Masculino"],["value","Otro"],["value","N/A"],[1,"my-4"],[1,"mb-3"],[1,"form-check"],["type","checkbox","id","same-address","formControlName","pregunta1","value","Si",1,"form-check-input"],["for","same-address",1,"form-check-label"],["type","checkbox","id","save-info","formControlName","pregunta1","value","No",1,"form-check-input"],["for","save-info",1,"form-check-label"],[1,"form-group"],["for","exampleFormControlTextarea1"],["id","exampleFormControlTextarea1","formControlName","pregunta2","rows","3","value","",1,"form-control"],[1,"my-3"],["id","Memotest","name","pregunta3","type","radio","formControlName","pregunta3","value","Memotest","checked","","required","",1,"form-check-input"],["for","Memotest",1,"form-check-label"],["id","TaTeTi","name","pregunta3","type","radio","formControlName","pregunta3","value","TaTeTi","required","",1,"form-check-input"],["for","TaTeTi",1,"form-check-label"],["id","Piedra papel o Tijera","name","pregunta3","type","radio","formControlName","pregunta3","value","Piedra papel o Tijera","required","",1,"form-check-input"],["for","Piedra papel o Tijera",1,"form-check-label"],["id","Rompecabezas de numeros","name","pregunta3","type","radio","formControlName","pregunta3","value","Rompecabezas de numeros","required","",1,"form-check-input"],["for","Rompecabezas de numeros",1,"form-check-label"],["type","submit",1,"fill","w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid"]],template:function(E,M){if(1&E&&(h.TgZ(0,"div",0)(1,"main")(2,"div",1)(3,"h1"),h._uU(4,"Encuesta"),h.qZA()(),h.TgZ(5,"div",2)(6,"div",3)(7,"form",4),h.NdJ("ngSubmit",function(){return M.enviar()}),h.TgZ(8,"div",5)(9,"div",6)(10,"label",7),h._uU(11,"Nombre"),h.qZA(),h._UZ(12,"input",8),h.TgZ(13,"div",9),h._uU(14," Ingrese un nombre valido. "),h.qZA(),h.YNc(15,vo,2,0,"small",10),h.YNc(16,zo,2,0,"small",10),h.qZA(),h.TgZ(17,"div",6)(18,"label",11),h._uU(19,"Apellido"),h.qZA(),h._UZ(20,"input",12),h.TgZ(21,"div",9),h._uU(22," Ingrese un apellido valido. "),h.qZA(),h.YNc(23,Sa,2,0,"small",10),h.YNc(24,F,2,0,"small",10),h.qZA(),h.TgZ(25,"div",13)(26,"label",14),h._uU(27,"Email "),h._UZ(28,"span",15),h.qZA(),h._UZ(29,"input",16),h.qZA(),h.TgZ(30,"div",17)(31,"label",18),h._uU(32,"Edad"),h.qZA(),h._UZ(33,"input",19),h.TgZ(34,"div",9),h._uU(35," Ingrese edad. "),h.qZA(),h.YNc(36,z,2,0,"small",10),h.YNc(37,U,2,0,"small",10),h.YNc(38,Q,2,0,"small",10),h.YNc(39,Ne,2,0,"small",10),h.qZA(),h.TgZ(40,"div",17)(41,"label",20),h._uU(42,"N\xfamero de tel\xe9fono "),h.qZA(),h._UZ(43,"input",21),h.YNc(44,It,2,0,"small",10),h.YNc(45,At,2,0,"small",10),h.YNc(46,Rn,2,0,"small",10),h.qZA(),h.TgZ(47,"div",22)(48,"label",23),h._uU(49,"Sexo "),h.qZA(),h.TgZ(50,"select",24)(51,"option",25),h._uU(52,"Seleccione..."),h.qZA(),h.TgZ(53,"option",26),h._uU(54,"Femenino"),h.qZA(),h.TgZ(55,"option",27),h._uU(56,"Masculino"),h.qZA(),h.TgZ(57,"option",28),h._uU(58,"Otro"),h.qZA(),h.TgZ(59,"option",29),h._uU(60,"N/A"),h.qZA()(),h._UZ(61,"br"),h.YNc(62,Qr,2,0,"small",10),h.qZA()(),h._UZ(63,"hr",30),h.TgZ(64,"h4",31),h._uU(65,"\xbfLe gusto la pagina?"),h.qZA(),h.TgZ(66,"div",32),h._UZ(67,"input",33),h.TgZ(68,"label",34),h._uU(69,"Si"),h.qZA()(),h.TgZ(70,"div",32),h._UZ(71,"input",35),h.TgZ(72,"label",36),h._uU(73,"No"),h.qZA()(),h.YNc(74,Ur,2,0,"small",10),h._UZ(75,"hr",30),h.TgZ(76,"div",37)(77,"label",38),h._uU(78,"\xbfQue juegos que le gustaria ver en la pagina?"),h.qZA(),h._UZ(79,"textarea",39),h.YNc(80,Wr,2,0,"small",10),h.qZA(),h._UZ(81,"hr",30),h.TgZ(82,"h4",31),h._uU(83,"\xbfCual es su juego favorito?"),h.qZA(),h.TgZ(84,"div",40)(85,"div",32),h._UZ(86,"input",41),h.TgZ(87,"label",42),h._uU(88,"Preguntados"),h.qZA()(),h.TgZ(89,"div",32),h._UZ(90,"input",43),h.TgZ(91,"label",44),h._uU(92,"Ahorcado"),h.qZA()(),h.TgZ(93,"div",32),h._UZ(94,"input",45),h.TgZ(95,"label",46),h._uU(96,"Mayor o menor"),h.qZA()(),h.TgZ(97,"div",32),h._UZ(98,"input",47),h.TgZ(99,"label",48),h._uU(100,"Rompecabezas de numeros"),h.qZA()(),h.YNc(101,Pr,2,0,"small",10),h.qZA(),h.TgZ(102,"button",49),h._uU(103,"Enviar "),h.qZA()()()()()()),2&E){let J;h.xp6(7),h.Q6J("formGroup",M.formGroup),h.xp6(8),h.Q6J("ngIf",(null==M.formGroup.get("nombre").errors?null:M.formGroup.get("nombre").errors.required)&&M.formGroup.get("nombre").touched),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("nombre").hasError("pattern")),h.xp6(7),h.Q6J("ngIf",(null==M.formGroup.get("apellido").errors?null:M.formGroup.get("apellido").errors.required)&&M.formGroup.get("apellido").touched),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("apellido").hasError("pattern")),h.xp6(5),h.s9C("placeholder",M.mail),h.xp6(7),h.Q6J("ngIf",(null==M.formGroup.get("edad").errors?null:M.formGroup.get("edad").errors.required)&&M.formGroup.get("edad").touched),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("edad").hasError("pattern")),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("edad").hasError("min")),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("edad").hasError("max")),h.xp6(5),h.Q6J("ngIf",(null==M.formGroup.get("telefono").errors?null:M.formGroup.get("telefono").errors.required)&&M.formGroup.get("telefono").touched),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("telefono").hasError("maxlength")),h.xp6(1),h.Q6J("ngIf",M.formGroup.get("telefono").hasError("pattern")),h.xp6(16),h.Q6J("ngIf",(null==M.formGroup.get("sexo").errors?null:M.formGroup.get("sexo").errors.required)&&M.formGroup.get("sexo").touched),h.xp6(12),h.Q6J("ngIf",(null==M.formGroup.get("pregunta1").errors?null:M.formGroup.get("pregunta1").errors.required)&&M.formGroup.get("pregunta2").touched),h.xp6(6),h.Q6J("ngIf",(null==M.formGroup.get("pregunta2").errors?null:M.formGroup.get("pregunta2").errors.required)&&M.formGroup.get("pregunta2").touched),h.xp6(21),h.Q6J("ngIf",(null==M.formGroup.get("pregunta3").errors?null:M.formGroup.get("pregunta3").errors.required)&&(null==(J=M.formGroup.get("pregunta3"))?null:J.touched)),h.xp6(1),h.Q6J("disabled",!M.formGroup.valid)}},dependencies:[de.O5,Is,xt,Ar,Ke,se,lt,Os,Jn,vn,Mi,qs,Gr],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.container[_ngcontent-%COMP%]{color:#0d606b;font-family:Grandstander,cursive}.mail[_ngcontent-%COMP%]{color:#f0f}.invalid[_ngcontent-%COMP%]{color:red;font-size:large}.sexo[_ngcontent-%COMP%]{margin:20px}main[_ngcontent-%COMP%]{background-color:#bdf3e1}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;color:#0d606b;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px;font-family:Pastel Colors,sans-serif}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}']}),m})(),Hr=(()=>{class m{constructor(){}ngOnInit(){}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-error"]],decls:2,vars:0,template:function(E,M){1&E&&(h.TgZ(0,"h1"),h._uU(1,"Para ver los juegos necesitas iniciar sesion!"),h.qZA())},styles:["h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:7.1em;margin-top:70px}"]}),m})();var si=j(4359);function uo(m,y){if(1&m&&(h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.qZA(),h.TgZ(13,"td"),h._uU(14),h.qZA(),h.TgZ(15,"td"),h._uU(16),h.ALo(17,"date"),h.qZA()()),2&m){const E=y.$implicit;h.xp6(2),h.hij("",E.juego," "),h.xp6(2),h.hij("",E.usuario," "),h.xp6(2),h.hij("",E.resultado," "),h.xp6(2),h.hij("",E.correctas," "),h.xp6(2),h.hij("",E.errores," "),h.xp6(2),h.hij("",E.clicks," "),h.xp6(2),h.hij("",E.tiempo," "),h.xp6(2),h.hij("",h.xi3(17,8,null==E.createdAt?null:E.createdAt.toMillis(),"dd/MM/yy, h:mm a")," ")}}let Or=(()=>{class m{constructor(E){this.listado=E,this.lista=this.listado.getListas(),console.log(this.lista)}ngOnInit(){}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(si.L))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-listados"]],decls:22,vars:3,consts:[[1,"table","table-condensed"],[4,"ngFor","ngForOf"]],template:function(E,M){1&E&&(h.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),h._uU(4,"Juego"),h.qZA(),h.TgZ(5,"th"),h._uU(6,"Jugador"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"Resultado"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Correctas"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Errores"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"Movimientos"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Tiempo"),h.qZA(),h.TgZ(17,"th"),h._uU(18,"Fecha"),h.qZA()()(),h.TgZ(19,"tbody"),h.YNc(20,uo,18,11,"tr",1),h.ALo(21,"async"),h.qZA()()),2&E&&(h.xp6(20),h.Q6J("ngForOf",h.lcZ(21,1,M.lista)))},dependencies:[de.sg,de.Ov,de.uU],styles:["table[_ngcontent-%COMP%]{color:#0d606b;font-weight:bolder;border-bottom:2px,solid,palevioletred}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-bottom:2px solid palevioletred}"]}),m})();var zr=j(3395);function as(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," El email es requerido "),h.qZA())}function Eo(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," No cumple el formato de email. "),h.qZA())}function Qt(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," La contrase\xf1a es requerida. "),h.qZA())}function yi(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),h.qZA())}function Es(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," Repetir la contrase\xf1a es requerido. "),h.qZA())}function pu(m,y){1&m&&(h.TgZ(0,"span",17),h._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),h.qZA())}function ar(m,y){if(1&m&&(h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h._UZ(5,"br"),h._uU(6),h._UZ(7,"br"),h._uU(8),h._UZ(9,"br"),h._uU(10),h._UZ(11,"br"),h._uU(12),h._UZ(13,"br"),h._uU(14),h._UZ(15,"br"),h._uU(16),h._UZ(17,"br"),h._uU(18),h._UZ(19,"br"),h._uU(20),h.ALo(21,"date"),h._UZ(22,"br"),h.qZA()()),2&m){const E=y.$implicit;h.xp6(2),h.hij("",E.user," "),h.xp6(2),h.hij(" Nombre: ",E.nombre,""),h.xp6(2),h.hij(" Apellido: ",E.apellido,""),h.xp6(2),h.hij(" Edad: ",E.edad,""),h.xp6(2),h.hij(" Telefono: ",E.telefono,""),h.xp6(2),h.hij(" Sexo: ",E.sexo,""),h.xp6(2),h.AsE(" ",E.pregunta1,": ",E.respuesta1,""),h.xp6(2),h.AsE(" ",E.pregunta2,": ",E.respuesta2,""),h.xp6(2),h.AsE(" ",E.pregunta3,": ",E.respuesta3,""),h.xp6(2),h.hij(" Fecha: ",h.xi3(21,13,null==E.createdAt?null:E.createdAt.toMillis(),"d/M/yy, h:mm a"),"")}}const Jt=[{path:"",component:(()=>{class m{constructor(E,M,J){this.authSvc=E,this.router=M,this.error=J,this.loginForm=new Ee({email:new Zi(""),password:new Zi("")}),this.seleccion="",this.usuario="",this.clave="",this.message=""}ngOnInit(){}onLogin(){var E=this;return(0,Le.Z)(function*(){const{email:M,password:J}=E.loginForm.value;try{const $e=yield E.authSvc.login(M,J);$e&&(E.message="Bienvenido "+M,console.log("pagina 2"+JSON.stringify($e)),setTimeout(()=>{E.router.navigate(["/bienvenido"])},1e3))}catch($e){console.log("pagina error "+$e),console.log("error.message "+$e.message),E.message=$e.message}})()}onChange(E){switch(console.log(E),this.message="",E){case"admin":this.loginForm.setValue({email:"admin@admin.com",password:"111111"}),console.log(this.loginForm.value);break;case"usuario":this.loginForm.setValue({email:"usuario@usuario.com",password:"123456"}),console.log(this.loginForm.value);break;case"fulanito":this.loginForm.setValue({email:"mail@hola.com",password:"clave123"})}}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(P.e),h.Y36(Z.F0),h.Y36(zr.T))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-login"]],decls:34,vars:5,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control",3,"value"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"value"],["type","submit",1,"fill","btn-lg","btn-block"],[1,"form-group","mt-3"],["routerLink","/registro",1,"button"],["for","usuarios"],["value","seleccione","okText","Seleccionar","name","usuarios","cancelText","Cancelar",1,"form-control",3,"ngModel","ngModelChange","change"],["value","admin"],["value","usuario"],["value","fulanito"]],template:function(E,M){1&E&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5,"Login"),h.qZA(),h.TgZ(6,"form",5),h.NdJ("ngSubmit",function(){return M.onLogin()}),h.TgZ(7,"H2"),h._uU(8),h.qZA(),h.TgZ(9,"div",6)(10,"label",7),h._uU(11,"Email"),h.qZA(),h._UZ(12,"input",8),h.qZA(),h.TgZ(13,"div",6)(14,"label",9),h._uU(15,"Clave"),h.qZA(),h._UZ(16,"input",10),h.qZA(),h.TgZ(17,"button",11),h._uU(18,"Ingresar"),h.qZA()(),h.TgZ(19,"div",12)(20,"p"),h._uU(21,"\xbfNo tienes una cuenta? "),h.TgZ(22,"a",13),h._uU(23,"Registro de usuario"),h.qZA()()(),h.TgZ(24,"div",12)(25,"label",14),h._uU(26,"Seleccione usuario "),h.qZA(),h.TgZ(27,"select",15),h.NdJ("ngModelChange",function($e){return M.seleccion=$e})("change",function(){return M.onChange(M.seleccion)}),h.TgZ(28,"option",16),h._uU(29,"admin"),h.qZA(),h.TgZ(30,"option",17),h._uU(31,"usuario"),h.qZA(),h.TgZ(32,"option",18),h._uU(33,"Fulanito"),h.qZA()()()()()()()),2&E&&(h.xp6(6),h.Q6J("formGroup",M.loginForm),h.xp6(2),h.Oqu(M.message),h.xp6(4),h.s9C("value",M.usuario),h.xp6(4),h.s9C("value",M.clave),h.xp6(11),h.Q6J("ngModel",M.seleccion))},dependencies:[Z.yS,Is,xt,Ar,Ke,lt,Jn,vn,qs,Gr,ds],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}h2[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em;color:red}']}),m})()},{path:"bienvenido",component:Ds},{path:"quiensoy",component:(()=>{class m{constructor(){}ngOnInit(){}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-quiensoy"]],decls:42,vars:0,consts:[[1,"row"],["id","quiwn",1,"col-md-6","text-center"],[1,"margin"],["href","https://github.com/Vaninaquezada/SalaDeJuegos/tree/master","target","_blank"],[1,"fa","fa-github"],["src","./assets/imagenes/quiensoy.jpg","alt","Bird","width","350","height","350",1,"img-responsive","img-circle","margin",2,"display","inline"],["id","que",1,"col-md-6","text-center"],["src","./assets/imagenes/grilla1.png",1,"juego"],["src","./assets/imagenes/Flecha_tesela.svg",1,"flecha"],["src","./assets/imagenes/grilla2.png",1,"juego"],["id","donde",1,"container-fluid","bg-3","text-center"],[1,"col-sm-4"],["src","./assets/imagenes/quiensoy1.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy2.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy3.png","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],[1,"container-fluid","bg-4","text-center"],["href","https://www.blablabla.com.ar"]],template:function(E,M){1&E&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),h._uU(3,"\xbfQui\xe9n Soy?"),h.qZA(),h.TgZ(4,"a",3),h._uU(5,"en GitHub "),h._UZ(6,"i",4),h.qZA(),h.TgZ(7,"p"),h._uU(8,"Vanina Quezada"),h.qZA(),h._UZ(9,"img",5),h.TgZ(10,"h3"),h._uU(11,"Soy Un alumno de la UTN FRA, Vanina Quezada"),h.qZA()(),h.TgZ(12,"div",6)(13,"h2",2),h._uU(14,"Juego: Rompecabezas de numeros"),h.qZA(),h.TgZ(15,"p"),h._uU(16,"El objetivo del juego es mover los casilleros de manera tal que los n\xfameros queden ordenados del 1 al 8, quedando el casillero vac\xedo \xfaltimo."),h.qZA(),h._UZ(17,"img",7)(18,"img",8)(19,"img",9),h.qZA()(),h.TgZ(20,"div",10)(21,"h3",2),h._uU(22,"\xbfD\xf3nde Funciona?"),h.qZA(),h._UZ(23,"br"),h.TgZ(24,"div",0)(25,"div",11),h._UZ(26,"img",12),h.TgZ(27,"p"),h._uU(28,"Con las tecnologias WEB que permiten desarrollar aplicaciones multiplataforma"),h.qZA()(),h.TgZ(29,"div",11),h._UZ(30,"img",13),h.TgZ(31,"p"),h._uU(32,"Principalmente orientada a la experiencia del usuario, garantizando que su funcionamieto sea fluido y pensado en el comportamiento del usuario y en la funcionalidad."),h.qZA()(),h.TgZ(33,"div",11),h._UZ(34,"img",14),h.TgZ(35,"p"),h._uU(36,"Para los sistemas operativos lideres en el mercado del consumo masivo"),h.qZA()()()(),h.TgZ(37,"footer",15)(38,"p"),h._uU(39,"Modificado por "),h.TgZ(40,"a",16),h._uU(41,"https://www.blablabla.com.ar"),h.qZA()()())},styles:[".imagenDeQuienSoy[_ngcontent-%COMP%]{width:400px;height:250px}body[_ngcontent-%COMP%]{font:20px Montserrat,sans-serif;line-height:1.8;color:#f5f6f7}p[_ngcontent-%COMP%]{font-size:16px}.margin[_ngcontent-%COMP%]{margin-bottom:45px}.bg-1[_ngcontent-%COMP%]{background-color:#1abc9c;color:#fff}.bg-2[_ngcontent-%COMP%]{background-color:#474e5d;color:#fff}.bg-3[_ngcontent-%COMP%]{background-color:#fff;color:#555}.bg-4[_ngcontent-%COMP%]{background-color:#3a0447;color:#fff;height:20%}.container-fluid[_ngcontent-%COMP%]{padding-top:70px;padding-bottom:70px}.navbar[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border:0;border-radius:0;margin-bottom:0;font-size:12px;letter-spacing:5px}.navbar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1abc9c!important}nav[_ngcontent-%COMP%]{display:flex;background-color:#0e3aff;color:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{background-color:#f3f3f3;border:solid;border-radius:25px;border-color:#328afd;color:#fff}a[_ngcontent-%COMP%]{color:#fff}.row[_ngcontent-%COMP%]{background-color:#ace7ff;padding:30px;color:#fff}#que[_ngcontent-%COMP%]{margin-top:60px}.juego[_ngcontent-%COMP%]{height:250px}.flecha[_ngcontent-%COMP%]{height:80px;margin:15px}"]}),m})()},{path:"registro",component:(()=>{class m{constructor(E,M,J){this.authSvc=E,this.router=M,this.fb=J,this.message=""}ngOnInit(){this.registerForm=this.fb.group({email:new Zi("",[Et.required,Et.email]),password:new Zi("",[Et.required,Et.minLength(6)]),passwordR:new Zi("",[Et.required,Et.minLength(6)])})}onRegister(){var E=this;return(0,Le.Z)(function*(){const{email:M,password:J}=E.registerForm.value;try{(yield E.authSvc.registro(M,J))&&E.router.navigate(["/bienvenido"])}catch($e){console.log($e),E.message=$e.message}})()}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(P.e),h.Y36(Z.F0),h.Y36(oa))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-registro"]],decls:34,vars:9,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control"],["class","error ion-padding",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control"],["for","passwordR"],["type","password","formControlName","passwordR",1,"form-control"],["type","submit",1,"fill","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"form-group","mt-3"],["routerLink","/",1,"button"],[1,"error","ion-padding"]],template:function(E,M){1&E&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5,"Registro de Usuario"),h.qZA(),h.TgZ(6,"H2"),h._uU(7),h.qZA(),h.TgZ(8,"form",5),h.NdJ("ngSubmit",function(){return M.onRegister()}),h.TgZ(9,"div",6)(10,"label",7),h._uU(11,"Email"),h.qZA(),h._UZ(12,"input",8),h.YNc(13,as,2,0,"span",9),h.YNc(14,Eo,2,0,"span",9),h.qZA(),h.TgZ(15,"div",6)(16,"label",10),h._uU(17,"Contrase\xf1a"),h.qZA(),h._UZ(18,"input",11),h.qZA(),h.YNc(19,Qt,2,0,"span",9),h.YNc(20,yi,2,0,"span",9),h.TgZ(21,"div",6)(22,"label",12),h._uU(23,"Repetir Contrase\xf1a"),h.qZA(),h._UZ(24,"input",13),h.YNc(25,Es,2,0,"span",9),h.YNc(26,pu,2,0,"span",9),h.qZA(),h.TgZ(27,"button",14),h._uU(28,"Registrar"),h.qZA()(),h.TgZ(29,"div",15)(30,"p"),h._uU(31,"\xbfYa tienes una cuenta? "),h.TgZ(32,"a",16),h._uU(33,"Login"),h.qZA()()()()()()()),2&E&&(h.xp6(7),h.Oqu(M.message),h.xp6(1),h.Q6J("formGroup",M.registerForm),h.xp6(5),h.Q6J("ngIf",(null==M.registerForm.get("email").errors?null:M.registerForm.get("email").errors.required)&&M.registerForm.get("email").touched),h.xp6(1),h.Q6J("ngIf",null==M.registerForm.get("email").errors?null:M.registerForm.get("email").errors.email),h.xp6(5),h.Q6J("ngIf",(null==M.registerForm.get("password").errors?null:M.registerForm.get("password").errors.required)&&M.registerForm.get("password").touched),h.xp6(1),h.Q6J("ngIf",M.registerForm.get("password").hasError("minLength")&&M.registerForm.get("password").touched),h.xp6(5),h.Q6J("ngIf",(null==M.registerForm.get("passwordR").errors?null:M.registerForm.get("passwordR").errors.required)&&M.registerForm.get("passwordR").touched),h.xp6(1),h.Q6J("ngIf",M.registerForm.get("passwordR").hasError("minLength")&&M.registerForm.get("passwordR").touched),h.xp6(1),h.Q6J("disabled",M.registerForm.invalid))},dependencies:[de.O5,Z.yS,Is,Ke,Jn,vn,qs,Gr],styles:['.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}span[_ngcontent-%COMP%]{color:red}']}),m})()},{path:"error",component:Hr},{path:"encuesta",component:pi},{path:"listados",component:Or},{path:"encuestaresultados",component:(()=>{class m{constructor(E){this.encuestaServ=E,this.lista=this.encuestaServ.getEncuestas(),console.log(this.lista)}ngOnInit(){}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(Fo))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-resultados-encuesta"]],decls:10,vars:3,consts:[[1,"table","table-condensed"],[4,"ngFor","ngForOf"]],template:function(E,M){1&E&&(h.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),h._uU(4,"Usuario"),h.qZA(),h.TgZ(5,"th"),h._uU(6,"Datos Encuesta"),h.qZA()()(),h.TgZ(7,"tbody"),h.YNc(8,ar,23,16,"tr",1),h.ALo(9,"async"),h.qZA()()),2&E&&(h.xp6(8),h.Q6J("ngForOf",h.lcZ(9,1,M.lista)))},dependencies:[de.sg,de.Ov,de.uU],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{color:#0d606b;font-weight:bolder;border-bottom:2px solid palevioletred}"]}),m})(),canActivate:[(()=>{class m{constructor(E,M){this.router=E,this.authSvc=M,this.authSvc.getUsuario()?.subscribe(J=>{this.usuario=J})}canActivate(E,M){return!0}checkUser(){var E=this;return(0,Le.Z)(function*(){return null!==E.usuario?(E.router.navigate(["/encuestaresultados"]),!0):(E.router.navigate(["/error"]),!1)})()}}return m.\u0275fac=function(E){return new(E||m)(h.LFG(Z.F0),h.LFG(P.e))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()]},{path:"juegos",loadChildren:()=>Promise.resolve().then(j.bind(j,880)).then(m=>m.JuegosModule),canActivate:[(()=>{class m{constructor(E,M){this.router=E,this.authSvc=M}canActivate(E,M){return this.checkUser()}checkUser(){var E=this;return(0,Le.Z)(function*(){return null!==(yield E.authSvc.getUsuario())||(E.router.navigate(["/error"]),!1)})()}}return m.\u0275fac=function(E){return new(E||m)(h.LFG(Z.F0),h.LFG(P.e))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()]}];let ji=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[Z.Bz.forRoot(Jt),Z.Bz]}),m})();function Pu(m,y){if(1&m&&(h.TgZ(0,"li",10)(1,"span",15),h._uU(2),h.qZA()()),2&m){const E=h.oxw().ngIf;h.xp6(2),h.Oqu(null==E?null:E.email)}}function Tl(m,y){if(1&m){const E=h.EpF();h.TgZ(0,"li",16)(1,"a",17),h.NdJ("click",function(){h.CHM(E);const J=h.oxw(2);return h.KtG(J.logOut())}),h._uU(2,"Logout"),h.qZA()()}}function ca(m,y){if(1&m&&(h.TgZ(0,"ul",7)(1,"li",8)(2,"a",9),h._uU(3,"Home "),h.qZA()(),h.TgZ(4,"li",10)(5,"a",11),h._uU(6,"\xbfQuien Soy?"),h.qZA()(),h.TgZ(7,"li",10)(8,"a",12),h._uU(9,"Juegos"),h.qZA()(),h.YNc(10,Pu,3,1,"li",13),h.YNc(11,Tl,3,0,"li",14),h.qZA()),2&m){const E=y.ngIf;h.xp6(10),h.Q6J("ngIf",E),h.xp6(1),h.Q6J("ngIf",E)}}function Zl(m,y){if(1&m){const E=h.EpF();h.TgZ(0,"ul",7)(1,"li",10)(2,"a",18),h._uU(3,"Login"),h.qZA()(),h.TgZ(4,"li",10)(5,"a",19),h._uU(6,"Registro"),h.qZA()(),h.TgZ(7,"li",16)(8,"a",17),h.NdJ("click",function(){h.CHM(E);const J=h.oxw();return h.KtG(J.logOut())}),h._uU(9,"Logout"),h.qZA()()()}}let Zo=(()=>{class m{constructor(E,M){this.authSvc=E,this.router=M,this.user$=this.authSvc.user$,console.log("menu",this.user2$)}ngOnInit(){this.user2$=this.authSvc.user2$,console.log("menu",this.user2$)}logOut(){var E=this;return(0,Le.Z)(function*(){try{yield E.authSvc.logout(),E.router.navigate(["/"])}catch(M){console.log(M)}})()}}return m.\u0275fac=function(E){return new(E||m)(h.Y36(P.e),h.Y36(Z.F0))},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-menu"]],decls:10,vars:4,consts:[[1,"rosa","navbar","navbar-expand-lg"],["routerLink","/bienvenido",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarColor02","aria-controls","navbarColor02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor02",1,"collapse","navbar-collapse"],["class","navbar-nav mr-auto",4,"ngIf","ngIfElse"],["login",""],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","/bienvenido",1,"nav-link"],[1,"nav-item"],["routerLink","/quiensoy",1,"nav-link"],["routerLink","/juegos",1,"nav-link"],["class","nav-item",4,"ngIf"],["class","nav-item my-lg-0",4,"ngIf"],[1,"nav-link"],[1,"nav-item","my-lg-0"],[1,"nav-link",3,"click"],["routerLink","/",1,"nav-link"],["routerLink","/registro",1,"nav-link"]],template:function(E,M){if(1&E&&(h.TgZ(0,"nav",0)(1,"a",1),h._uU(2,"Sala de Juegos"),h.qZA(),h.TgZ(3,"button",2),h._UZ(4,"span",3),h.qZA(),h.TgZ(5,"div",4),h.YNc(6,ca,12,2,"ul",5),h.ALo(7,"async"),h.YNc(8,Zl,10,0,"ng-template",null,6,h.W1O),h.qZA()()),2&E){const J=h.MAs(9);h.xp6(6),h.Q6J("ngIf",h.lcZ(7,2,M.user2$))("ngIfElse",J)}},dependencies:[de.O5,Z.yS,de.Ov],styles:[".rosa[_ngcontent-%COMP%]{background-color:#ffbfcf}.navbar-brand[_ngcontent-%COMP%]{margin-left:20px}"]}),m})(),Qu=(()=>{class m{constructor(){this.title="salaJuegos"}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275cmp=h.Xpm({type:m,selectors:[["app-root"]],decls:2,vars:0,template:function(E,M){1&E&&h._UZ(0,"app-menu")(1,"router-outlet")},dependencies:[Z.lC,Zo]}),m})();var Vs=j(3692);const Ga_firebase={projectId:"tplab4-45942",appId:"1:544089026720:web:12140e7d4d8c437ea759c5",databaseURL:"https://tplab4-45942.firebaseio.com",storageBucket:"tplab4-45942.appspot.com",locationId:"us-central",apiKey:"AIzaSyDaDxkZHkwvJy0N7o_DVcmMXIx_6vPSZ7I",authDomain:"tplab4-45942.firebaseapp.com",messagingSenderId:"544089026720"};var gu=j(3999),Er=j(4215),xa=j(5867),Vn=j(7128);class wo{constructor(y){return y}}const qo="database",Ys=new h.OlP("angularfire2.database-instances");function da(m){return(y,E)=>{const M=y.runOutsideAngular(()=>m(E));return new wo(M)}}const Ii={provide:class li{constructor(){return(0,Er.vb)(qo)}},deps:[[new h.FiY,Ys]]},on={provide:wo,useFactory:function Vr(m,y){const E=(0,Er.JM)(qo,m,y);return E&&new wo(E)},deps:[[new h.FiY,Ys],Vs.Ot]};let Co=(()=>{class m{constructor(){(0,xa.KN)("angularfire",Er.q4.full,"rtdb")}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[on,Ii]}),m})();function Wa(m,...y){return{ngModule:Co,providers:[{provide:Ys,useFactory:da(m),multi:!0,deps:[h.R0b,h.zs3,Er.HU,Vs.z6,[new h.FiY,gu.dh],[new h.FiY,Vn.nm],...y]}]}}const Za=(0,Er.u3)(be.N8,!0);var ho=j(6027),mi=j(9681),yu=j(2090),D=j(4859);const ye="functions";class _n{constructor(y,E,M){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=y.getImmediate({optional:!0}),this.messaging=E.getImmediate({optional:!0}),this.auth||y.get().then(J=>this.auth=J,()=>{}),this.messaging||E.get().then(J=>this.messaging=J,()=>{}),this.appCheck||M.get().then(J=>this.appCheck=J,()=>{})}getAuthToken(){var y=this;return(0,Le.Z)(function*(){if(y.auth)try{return(yield y.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var y=this;return(0,Le.Z)(function*(){if(y.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield y.messaging.getToken()}catch{return}})()}getAppCheckToken(){var y=this;return(0,Le.Z)(function*(){if(y.appCheck){const E=yield y.appCheck.getToken();return E.error?null:E.token}return null})()}getContext(){var y=this;return(0,Le.Z)(function*(){return{authToken:yield y.getAuthToken(),messagingToken:yield y.getMessagingToken(),appCheckToken:yield y.getAppCheckToken()}})()}}const kr="us-central1";class es{constructor(y,E,M,J,$e=kr,$t){this.app=y,this.fetchImpl=$t,this.emulatorOrigin=null,this.contextProvider=new _n(E,M,J),this.cancelAllRequests=new Promise(En=>{this.deleteService=()=>Promise.resolve(En())});try{const En=new URL($e);this.customDomain=En.origin,this.region=kr}catch{this.customDomain=null,this.region=$e}}_delete(){return this.deleteService()}_url(y){const E=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${E}/${this.region}/${y}`:null!==this.customDomain?`${this.customDomain}/${y}`:`https://${this.region}-${E}.cloudfunctions.net/${y}`}}const ci="@firebase/functions";function Ja(m=(0,mi.getApp)(),y=kr){return(0,mi._getProvider)((0,yu.m9)(m),ye).getImmediate({identifier:y})}!function vu(m,y){(0,mi._registerComponent)(new D.wA(ye,(M,{instanceIdentifier:J})=>{const $e=M.getProvider("app").getImmediate(),$t=M.getProvider("auth-internal"),En=M.getProvider("messaging-internal"),Tn=M.getProvider("app-check-internal");return new es($e,$t,En,Tn,J,m)},"PUBLIC").setMultipleInstances(!0)),(0,mi.registerVersion)(ci,"0.8.4",y),(0,mi.registerVersion)(ci,"0.8.4","esm2017")}(fetch.bind(self));class bi{constructor(y){return y}}const Sl="functions",ka=new h.OlP("angularfire2.functions-instances");function Lu(m){return(y,E)=>{const M=y.runOutsideAngular(()=>m(E));return new bi(M)}}const Ql={provide:class xl{constructor(){return(0,Er.vb)(Sl)}},deps:[[new h.FiY,ka]]},Cu={provide:bi,useFactory:function Yl(m,y){const E=(0,Er.JM)(Sl,m,y);return E&&new bi(E)},deps:[[new h.FiY,ka],Vs.Ot]};let fo=(()=>{class m{constructor(){(0,xa.KN)("angularfire",Er.q4.full,"fn")}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[Cu,Ql]}),m})();function Uu(m,...y){return{ngModule:fo,providers:[{provide:ka,useFactory:Lu(m),multi:!0,deps:[h.R0b,h.zs3,Er.HU,Vs.z6,[new h.FiY,gu.dh],[new h.FiY,Vn.nm],...y]}]}}const nl=(0,Er.u3)(Ja,!0);var $s=j(2375);class Xa{constructor(y){return y}}const va="messaging",To=new h.OlP("angularfire2.messaging-instances");function sl(m){return(y,E)=>{if(!Er.n1.sync())return null;const M=y.runOutsideAngular(()=>m(E));return new Xa(M)}}const Do={provide:class il{constructor(){return(0,Er.vb)(va)}},deps:[[new h.FiY,To]]},ol={provide:Xa,useFactory:function eo(m,y){if(!Er.n1.sync())return null;const E=(0,Er.JM)(va,m,y);return E&&new Xa(E)},deps:[[new h.FiY,To],Vs.Ot]};let Jl=(()=>{class m{constructor(){(0,xa.KN)("angularfire",Er.q4.full,"fcm")}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[ol,Do,{provide:h.ip1,useValue:Er.n1.async,multi:!0}]}),m})();function Fa(m,...y){return{ngModule:Jl,providers:[{provide:To,useFactory:sl(m),multi:!0,deps:[h.R0b,h.zs3,Er.HU,Vs.z6,...y]}]}}const bu=(0,Er.u3)($s.KL,!0),Xl="firebasestorage.googleapis.com";class vi extends yu.ZR{constructor(y,E){super(Lo(y),`Firebase Storage: ${E} (${Lo(y)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}_codeEquals(y){return Lo(y)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(y){this.customData.serverResponse=y,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Lo(m){return"storage/"+m}function _(m){return new vi("invalid-argument",m)}function w(){return new vi("app-deleted","The Firebase app was deleted.")}class Xe{constructor(y,E){this.bucket=y,this.path_=E}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const y=encodeURIComponent;return"/b/"+y(this.bucket)+"/o/"+y(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(y,E){let M;try{M=Xe.makeFromUrl(y,E)}catch{return new Xe(y,"")}if(""===M.path)return M;throw function qc(m){return new vi("invalid-default-bucket","Invalid default bucket '"+m+"'.")}(y)}static makeFromUrl(y,E){let M=null;const J="([A-Za-z0-9.\\-_]+)",En=new RegExp("^gs://"+J+"(/(.*))?$","i");function Wn(zs){zs.path_=decodeURIComponent(zs.path)}const Pi=E.replace(/[.]/g,"\\."),cs=[{regex:En,indices:{bucket:1,path:3},postModify:function $e(zs){"/"===zs.path.charAt(zs.path.length-1)&&(zs.path_=zs.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Pi}/v[A-Za-z0-9_]+/b/${J}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Wn},{regex:new RegExp(`^https?://${E===Xl?"(?:storage.googleapis.com|storage.cloud.google.com)":E}/${J}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Wn}];for(let zs=0;zs<cs.length;zs++){const xu=cs[zs],vl=xu.regex.exec(y);if(vl){let Zu=vl[xu.indices.path];Zu||(Zu=""),M=new Xe(vl[xu.indices.bucket],Zu),xu.postModify(M);break}}if(null==M)throw function _c(m){return new vi("invalid-url","Invalid URL '"+m+"'.")}(y);return M}}class Lt{constructor(y){this.promise_=Promise.reject(y)}getPromise(){return this.promise_}cancel(y=!1){}}function Ea(m,y,E,M){if(M<y)throw _(`Invalid value for '${m}'. Expected ${y} or greater.`);if(M>E)throw _(`Invalid value for '${m}'. Expected ${E} or less.`)}var $i=(()=>{return(m=$i||($i={}))[m.NO_ERROR=0]="NO_ERROR",m[m.NETWORK_ERROR=1]="NETWORK_ERROR",m[m.ABORT=2]="ABORT",$i;var m})();class yc{constructor(y,E,M,J,$e,$t,En,Tn,Wn,ti,Pi){this.url_=y,this.method_=E,this.headers_=M,this.body_=J,this.successCodes_=$e,this.additionalRetryCodes_=$t,this.callback_=En,this.errorCallback_=Tn,this.timeout_=Wn,this.progressCallback_=ti,this.connectionFactory_=Pi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ls,ta)=>{this.resolve_=ls,this.reject_=ta,this.start_()})}start_(){const E=(M,J)=>{const $e=this.resolve_,$t=this.reject_,En=J.connection;if(J.wasSuccessCode)try{const Tn=this.callback_(En,En.getResponse());!function wr(m){return void 0!==m}(Tn)?$e():$e(Tn)}catch(Tn){$t(Tn)}else if(null!==En){const Tn=function Qo(){return new vi("unknown","An unknown error occurred, please check the error payload for server response.")}();Tn.serverResponse=En.getErrorText(),$t(this.errorCallback_?this.errorCallback_(En,Tn):Tn)}else $t(J.canceled?this.appDelete_?w():function Jo(){return new vi("canceled","User canceled the upload/download.")}():function Ua(){return new vi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?E(0,new Xo(!1,null,!0)):this.backoffId_=function yn(m,y,E){let M=1,J=null,$e=null,$t=!1,En=0;function Tn(){return 2===En}let Wn=!1;function ti(...ms){Wn||(Wn=!0,y.apply(null,ms))}function Pi(ms){J=setTimeout(()=>{J=null,m(ta,Tn())},ms)}function ls(){$e&&clearTimeout($e)}function ta(ms,...zu){if(Wn)return void ls();if(ms)return ls(),void ti.call(null,ms,...zu);if(Tn()||$t)return ls(),void ti.call(null,ms,...zu);let cs;M<64&&(M*=2),1===En?(En=2,cs=0):cs=1e3*(M+Math.random()),Pi(cs)}let ro=!1;function ou(ms){ro||(ro=!0,ls(),!Wn&&(null!==J?(ms||(En=2),clearTimeout(J),Pi(0)):ms||(En=1)))}return Pi(0),$e=setTimeout(()=>{$t=!0,ou(!0)},E),ou}((M,J)=>{if(J)return void M(!1,new Xo(!1,null,!0));const $e=this.connectionFactory_();this.pendingConnection_=$e;const $t=En=>{null!==this.progressCallback_&&this.progressCallback_(En.loaded,En.lengthComputable?En.total:-1)};null!==this.progressCallback_&&$e.addUploadProgressListener($t),$e.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&$e.removeUploadProgressListener($t),this.pendingConnection_=null;const En=$e.getErrorCode()===$i.NO_ERROR,Tn=$e.getStatus();if(!En||this.isRetryStatusCode_(Tn)){const ti=$e.getErrorCode()===$i.ABORT;return void M(!1,new Xo(!1,null,ti))}const Wn=-1!==this.successCodes_.indexOf(Tn);M(!0,new Xo(Wn,$e))})},E,this.timeout_)}getPromise(){return this.promise_}cancel(y){this.canceled_=!0,this.appDelete_=y||!1,null!==this.backoffId_&&function Un(m){m(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(y){const E=y>=500&&y<600,J=-1!==[408,429].indexOf(y),$e=-1!==this.additionalRetryCodes_.indexOf(y);return E||J||$e}}class Xo{constructor(y,E,M){this.wasSuccessCode=y,this.connection=E,this.canceled=!!M}}class gl{constructor(y,E){this._service=y,this._location=E instanceof Xe?E:Xe.makeFromUrl(E,y.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(y,E){return new gl(y,E)}get root(){const y=new Xe(this._location.bucket,"");return this._newRef(this._service,y)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function Yc(m){const y=m.lastIndexOf("/",m.length-2);return-1===y?m:m.slice(y+1)}(this._location.path)}get storage(){return this._service}get parent(){const y=function wa(m){if(0===m.length)return null;const y=m.lastIndexOf("/");return-1===y?"":m.slice(0,y)}(this._location.path);if(null===y)return null;const E=new Xe(this._location.bucket,y);return new gl(this._service,E)}_throwIfRoot(y){if(""===this._location.path)throw function O(m){return new vi("invalid-root-operation","The operation '"+m+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(y)}}function Zr(m,y){const E=y?.storageBucket;return null==E?null:Xe.makeFromBucketSpec(E,m)}class su{constructor(y,E,M,J,$e){this.app=y,this._authProvider=E,this._appCheckProvider=M,this._url=J,this._firebaseVersion=$e,this._bucket=null,this._host=Xl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=J?Xe.makeFromBucketSpec(J,this._host):Zr(this._host,this.app.options)}get host(){return this._host}set host(y){this._host=y,this._bucket=null!=this._url?Xe.makeFromBucketSpec(this._url,y):Zr(y,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(y){Ea("time",0,Number.POSITIVE_INFINITY,y),this._maxUploadRetryTime=y}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(y){Ea("time",0,Number.POSITIVE_INFINITY,y),this._maxOperationRetryTime=y}_getAuthToken(){var y=this;return(0,Le.Z)(function*(){if(y._overrideAuthToken)return y._overrideAuthToken;const E=y._authProvider.getImmediate({optional:!0});if(E){const M=yield E.getToken();if(null!==M)return M.accessToken}return null})()}_getAppCheckToken(){var y=this;return(0,Le.Z)(function*(){const E=y._appCheckProvider.getImmediate({optional:!0});return E?(yield E.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(y=>y.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(y){return new gl(this,y)}_makeRequest(y,E,M,J){if(this._deleted)return new Lt(w());{const $e=function cl(m,y,E,M,J,$e){const $t=function ul(m){const y=encodeURIComponent;let E="?";for(const M in m)m.hasOwnProperty(M)&&(E=E+(y(M)+"=")+y(m[M])+"&");return E=E.slice(0,-1),E}(m.urlParams),En=m.url+$t,Tn=Object.assign({},m.headers);return function vc(m,y){y&&(m["X-Firebase-GMPID"]=y)}(Tn,y),function ll(m,y){null!==y&&y.length>0&&(m.Authorization="Firebase "+y)}(Tn,E),function Ao(m,y){m["X-Firebase-Storage-Version"]="webjs/"+(y??"AppManager")}(Tn,$e),function gs(m,y){null!==y&&(m["X-Firebase-AppCheck"]=y)}(Tn,M),new yc(En,m.method,Tn,m.body,m.successCodes,m.additionalRetryCodes,m.handler,m.errorHandler,m.timeout,m.progressCallback,J)}(y,this._appId,M,J,E,this._firebaseVersion);return this._requests.add($e),$e.getPromise().then(()=>this._requests.delete($e),()=>this._requests.delete($e)),$e}}makeRequestWithTokens(y,E){var M=this;return(0,Le.Z)(function*(){const[J,$e]=yield Promise.all([M._getAuthToken(),M._getAppCheckToken()]);return M._makeRequest(y,E,J,$e).getPromise()})()}}const ml="@firebase/storage",Xc="storage";function Bl(m=(0,mi.getApp)(),y){return m=(0,yu.m9)(m),(0,mi._getProvider)(m,Xc).getImmediate({identifier:y})}function ah(m,{instanceIdentifier:y}){const E=m.getProvider("app").getImmediate(),M=m.getProvider("auth-internal"),J=m.getProvider("app-check-internal");return new su(E,M,J,y,mi.SDK_VERSION)}!function uh(){(0,mi._registerComponent)(new D.wA(Xc,ah,"PUBLIC").setMultipleInstances(!0)),(0,mi.registerVersion)(ml,"0.9.9",""),(0,mi.registerVersion)(ml,"0.9.9","esm2017")}();class Rc{constructor(y){return y}}const lh="storage",Pc=new h.OlP("angularfire2.storage-instances");function Jh(m){return(y,E)=>{const M=y.runOutsideAngular(()=>m(E));return new Rc(M)}}const Xh={provide:class Qh{constructor(){return(0,Er.vb)(lh)}},deps:[[new h.FiY,Pc]]},Ia={provide:Rc,useFactory:function Nc(m,y){const E=(0,Er.JM)(lh,m,y);return E&&new Rc(E)},deps:[[new h.FiY,Pc],Vs.Ot]};let ef=(()=>{class m{constructor(){(0,xa.KN)("angularfire",Er.q4.full,"gcs")}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[Ia,Xh]}),m})();function Sd(m,...y){return{ngModule:ef,providers:[{provide:Pc,useFactory:Jh(m),multi:!0,deps:[h.R0b,h.zs3,Er.HU,Vs.z6,[new h.FiY,gu.dh],[new h.FiY,Vn.nm],...y]}]}}const Au=(0,Er.u3)(Bl,!0);var hh=j(529),Rd=j(880),tf=j(2011);let ep=(()=>{class m{}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=h.oAB({type:m,bootstrap:[Qu]}),m.\u0275inj=h.cJS({imports:[C.b2,ji,tf.hO.initializeApp(Ga_firebase),(0,Vs.hX)(()=>(0,Vs.ZF)(Ga_firebase)),(0,gu.AR)(()=>(0,gu.v0)()),Wa(()=>Za()),(0,ho.Cm)(()=>(0,ho.ad)()),Uu(()=>nl()),Fa(()=>bu()),Sd(()=>Au()),Z.Bz,fu,sa,Rd.JuegosModule,hh.JF]}),m})();(0,h.G48)(),C.q6().bootstrapModule(ep).catch(m=>console.error(m))},5867:(an,ht,j)=>{j.d(ht,{C6:()=>C.getApps,KN:()=>C.registerVersion,Mq:()=>C.getApp,ZF:()=>C.initializeApp});var C=j(9681);(0,C.registerVersion)("firebase","9.10.0","app")},127:(an,ht,j)=>{j.d(ht,{Z:()=>C.Z});var C=j(3942);C.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(an,ht,j)=>{j.r(ht);var C=j(5861),h=j(3942),Z=j(7143),P=j(2090),qe=(j(9681),j(1877),j(4859));function be(){return window}function fe(){return(fe=(0,C.Z)(function*(Je,Se,Fe){var Ct;const{BuildInfo:jt}=be();(0,Z.aq)(Se.sessionId,"AuthEvent did not contain a session ID");const fn=yield it(Se.sessionId),Cn={};return(0,Z.ar)()?Cn.ibi=jt.packageName:(0,Z.as)()?Cn.apn=jt.packageName:(0,Z.at)(Je,"operation-not-supported-in-this-environment"),jt.displayName&&(Cn.appDisplayName=jt.displayName),Cn.sessionId=fn,(0,Z.au)(Je,Fe,Se.type,void 0,null!==(Ct=Se.eventId)&&void 0!==Ct?Ct:void 0,Cn)})).apply(this,arguments)}function st(){return(st=(0,C.Z)(function*(Je){const{BuildInfo:Se}=be(),Fe={};(0,Z.ar)()?Fe.iosBundleId=Se.packageName:(0,Z.as)()?Fe.androidPackageName=Se.packageName:(0,Z.at)(Je,"operation-not-supported-in-this-environment"),yield(0,Z.av)(Je,Fe)})).apply(this,arguments)}function Ot(){return(Ot=(0,C.Z)(function*(Je,Se,Fe){const{cordova:Ct}=be();let jt=()=>{};try{yield new Promise((fn,Cn)=>{let ve=null;function pe(){var je;fn();const ft=null===(je=Ct.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof ft&&ft(),"function"==typeof Fe?.close&&Fe.close()}function ce(){ve||(ve=window.setTimeout(()=>{Cn((0,Z.aw)(Je,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&ce()}Se.addPassiveListener(pe),document.addEventListener("resume",ce,!1),(0,Z.as)()&&document.addEventListener("visibilitychange",et,!1),jt=()=>{Se.removePassiveListener(pe),document.removeEventListener("resume",ce,!1),document.removeEventListener("visibilitychange",et,!1),ve&&window.clearTimeout(ve)}})}finally{jt()}})).apply(this,arguments)}function it(Je){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,C.Z)(function*(Je){const Se=qt(Je),Fe=yield crypto.subtle.digest("SHA-256",Se);return Array.from(new Uint8Array(Fe)).map(jt=>jt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qt(Je){if((0,Z.aq)(/[0-9a-zA-Z]+/.test(Je),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Je);const Se=new ArrayBuffer(Je.length),Fe=new Uint8Array(Se);for(let Ct=0;Ct<Je.length;Ct++)Fe[Ct]=Je.charCodeAt(Ct);return Fe}class gt extends Z.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Se=>{this.resolveInialized=Se})}addPassiveListener(Se){this.passiveListeners.add(Se)}removePassiveListener(Se){this.passiveListeners.delete(Se)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Se){return this.resolveInialized(),this.passiveListeners.forEach(Fe=>Fe(Se)),super.onEvent(Se)}initialized(){var Se=this;return(0,C.Z)(function*(){yield Se.initPromise})()}}function ee(Je){return se.apply(this,arguments)}function se(){return(se=(0,C.Z)(function*(Je){const Se=yield Ue()._get(Ke(Je));return Se&&(yield Ue()._remove(Ke(Je))),Se})).apply(this,arguments)}function Pe(){const Je=[],Se="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Fe=0;Fe<20;Fe++){const Ct=Math.floor(Math.random()*Se.length);Je.push(Se.charAt(Ct))}return Je.join("")}function Ue(){return(0,Z.ay)(Z.b)}function Ke(Je){return(0,Z.az)("authEvent",Je.config.apiKey,Je.name)}function kt(Je){if(!Je?.includes("?"))return{};const[Se,...Fe]=Je.split("?");return(0,P.zd)(Fe.join("?"))}function Et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,Z.aw)("no-auth-event")}}function jn(){var Je;return(null===(Je=self?.location)||void 0===Je?void 0:Je.protocol)||null}function ir(Je=(0,P.z$)()){return!("file:"!==jn()&&"ionic:"!==jn()&&"capacitor:"!==jn()||!Je.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mr(){try{const Je=self.localStorage,Se=Z.aI();if(Je)return Je.setItem(Se,"1"),Je.removeItem(Se),!function lr(Je=(0,P.z$)()){return function Cr(){return(0,P.w1)()&&11===document?.documentMode}()||function ur(Je=(0,P.z$)()){return/Edge\/\d+/.test(Je)}(Je)}()||(0,P.hl)()}catch{return dn()&&(0,P.hl)()}return!1}function dn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function mn(){return"http:"===jn()||"https:"===jn()}()||(0,P.ru)()||ir())&&!function dr(){return(0,P.b$)()||(0,P.UG)()}()&&Mr()&&!dn()}function Lr(){return ir()&&typeof document<"u"}function en(){return(en=(0,C.Z)(function*(){return!!Lr()&&new Promise(Je=>{const Se=setTimeout(()=>{Je(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Se),Je(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},er=Z.ax,fr="persistence";function vr(Je){return dt.apply(this,arguments)}function dt(){return(dt=(0,C.Z)(function*(Je){yield Je._initializationPromise;const Se=_e(),Fe=Z.az(fr,Je.config.apiKey,Je.name);Se&&Se.setItem(Fe,Je._getPersistence())})).apply(this,arguments)}function _e(){var Je;try{return(null===(Je=function hr(){return typeof window<"u"?window:null}())||void 0===Je?void 0:Je.sessionStorage)||null}catch{return null}}const mt=Z.ax;class ct{constructor(){this.browserResolver=Z.ay(Z.k),this.cordovaResolver=Z.ay(class gn{constructor(){this._redirectPersistence=Z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Z.aB,this._overrideRedirectResult=Z.aC}_initialize(Se){var Fe=this;return(0,C.Z)(function*(){const Ct=Se._key();let jt=Fe.eventManagers.get(Ct);return jt||(jt=new gt(Se),Fe.eventManagers.set(Ct,jt),Fe.attachCallbackListeners(Se,jt)),jt})()}_openPopup(Se){(0,Z.at)(Se,"operation-not-supported-in-this-environment")}_openRedirect(Se,Fe,Ct,jt){var fn=this;return(0,C.Z)(function*(){!function at(Je){var Se,Fe,Ct,jt,fn,Cn,ve,pe,ce,et;const je=be();(0,Z.ax)("function"==typeof(null===(Se=je?.universalLinks)||void 0===Se?void 0:Se.subscribe),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,Z.ax)(typeof(null===(Fe=je?.BuildInfo)||void 0===Fe?void 0:Fe.packageName)<"u",Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,Z.ax)("function"==typeof(null===(fn=null===(jt=null===(Ct=je?.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===jt?void 0:jt.browsertab)||void 0===fn?void 0:fn.openUrl),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Z.ax)("function"==typeof(null===(pe=null===(ve=null===(Cn=je?.cordova)||void 0===Cn?void 0:Cn.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===pe?void 0:pe.isAvailable),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Z.ax)("function"==typeof(null===(et=null===(ce=je?.cordova)||void 0===ce?void 0:ce.InAppBrowser)||void 0===et?void 0:et.open),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Se);const Cn=yield fn._initialize(Se);yield Cn.initialized(),Cn.resetRedirect(),(0,Z.aD)(),yield fn._originValidation(Se);const ve=function Be(Je,Se,Fe=null){return{type:Se,eventId:Fe,urlResponse:null,sessionId:Pe(),postBody:null,tenantId:Je.tenantId,error:(0,Z.aw)(Je,"no-auth-event")}}(Se,Ct,jt);yield function ut(Je,Se){return Ue()._set(Ke(Je),Se)}(Se,ve);const pe=yield function ie(Je,Se,Fe){return fe.apply(this,arguments)}(Se,ve,Fe),ce=yield function ot(Je){const{cordova:Se}=be();return new Promise(Fe=>{Se.plugins.browsertab.isAvailable(Ct=>{let jt=null;Ct?Se.plugins.browsertab.openUrl(Je):jt=Se.InAppBrowser.open(Je,(0,Z.ap)()?"_blank":"_system","location=yes"),Fe(jt)})})}(pe);return function nt(Je,Se,Fe){return Ot.apply(this,arguments)}(Se,Cn,ce)})()}_isIframeWebStorageSupported(Se,Fe){throw new Error("Method not implemented.")}_originValidation(Se){const Fe=Se._key();return this.originValidationPromises[Fe]||(this.originValidationPromises[Fe]=function Ce(Je){return st.apply(this,arguments)}(Se)),this.originValidationPromises[Fe]}attachCallbackListeners(Se,Fe){const{universalLinks:Ct,handleOpenURL:jt,BuildInfo:fn}=be(),Cn=setTimeout((0,C.Z)(function*(){yield ee(Se),Fe.onEvent(Et())}),500),ve=function(){var et=(0,C.Z)(function*(je){clearTimeout(Cn);const ft=yield ee(Se);let he=null;ft&&je?.url&&(he=function ze(Je,Se){var Fe,Ct;const jt=function Mt(Je){const Se=kt(Je),Fe=Se.link?decodeURIComponent(Se.link):void 0,Ct=kt(Fe).link,jt=Se.deep_link_id?decodeURIComponent(Se.deep_link_id):void 0;return kt(jt).link||jt||Ct||Fe||Je}(Se);if(jt.includes("/__/auth/callback")){const fn=kt(jt),Cn=fn.firebaseError?function Ye(Je){try{return JSON.parse(Je)}catch{return null}}(decodeURIComponent(fn.firebaseError)):null,ve=null===(Ct=null===(Fe=Cn?.code)||void 0===Fe?void 0:Fe.split("auth/"))||void 0===Ct?void 0:Ct[1],pe=ve?(0,Z.aw)(ve):null;return pe?{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,error:pe,urlResponse:null,sessionId:null,postBody:null}:{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,sessionId:Je.sessionId,urlResponse:jt,postBody:null}}return null}(ft,je.url)),Fe.onEvent(he||Et())});return function(ft){return et.apply(this,arguments)}}();typeof Ct<"u"&&"function"==typeof Ct.subscribe&&Ct.subscribe(null,ve);const pe=jt,ce=`${fn.packageName.toLowerCase()}://`;be().handleOpenURL=function(){var et=(0,C.Z)(function*(je){if(je.toLowerCase().startsWith(ce)&&ve({url:je}),"function"==typeof pe)try{pe(je)}catch(ft){console.error(ft)}});return function(je){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Z.a,this._completeRedirectFn=Z.aB,this._overrideRedirectResult=Z.aC}_initialize(Se){var Fe=this;return(0,C.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._initialize(Se)})()}_openPopup(Se,Fe,Ct,jt){var fn=this;return(0,C.Z)(function*(){return yield fn.selectUnderlyingResolver(),fn.assertedUnderlyingResolver._openPopup(Se,Fe,Ct,jt)})()}_openRedirect(Se,Fe,Ct,jt){var fn=this;return(0,C.Z)(function*(){return yield fn.selectUnderlyingResolver(),fn.assertedUnderlyingResolver._openRedirect(Se,Fe,Ct,jt)})()}_isIframeWebStorageSupported(Se,Fe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Se,Fe)}_originValidation(Se){return this.assertedUnderlyingResolver._originValidation(Se)}get _shouldInitProactively(){return Lr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Se=this;return(0,C.Z)(function*(){if(Se.underlyingResolver)return;const Fe=yield function mr(){return en.apply(this,arguments)}();Se.underlyingResolver=Fe?Se.cordovaResolver:Se.browserResolver})()}}function rn(Je){return Je.unwrap()}function Qn(Je){return Jn(Je)}function Jn(Je){const{_tokenResponse:Se}=Je instanceof P.ZR?Je.customData:Je;if(!Se)return null;if(!(Je instanceof P.ZR)&&"temporaryProof"in Se&&"phoneNumber"in Se)return Z.P.credentialFromResult(Je);const Fe=Se.providerId;if(!Fe||Fe===Z.o.PASSWORD)return null;let Ct;switch(Fe){case Z.o.GOOGLE:Ct=Z.Q;break;case Z.o.FACEBOOK:Ct=Z.N;break;case Z.o.GITHUB:Ct=Z.T;break;case Z.o.TWITTER:Ct=Z.W;break;default:const{oauthIdToken:jt,oauthAccessToken:fn,oauthTokenSecret:Cn,pendingToken:ve,nonce:pe}=Se;return fn||Cn||jt||ve?ve?Fe.startsWith("saml.")?Z.aL._create(Fe,ve):Z.J._fromParams({providerId:Fe,signInMethod:Fe,pendingToken:ve,idToken:jt,accessToken:fn}):new Z.U(Fe).credential({idToken:jt,accessToken:fn,rawNonce:pe}):null}return Je instanceof P.ZR?Ct.credentialFromError(Je):Ct.credentialFromResult(Je)}function vn(Je,Se){return Se.catch(Fe=>{throw Fe instanceof P.ZR&&function zt(Je,Se){var Fe,Ct;const jt=null===(Fe=Se.customData)||void 0===Fe?void 0:Fe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ct=Se)||void 0===Ct?void 0:Ct.code))Se.resolver=new Te(Je,Z.an(Je,Se));else if(jt){const fn=Jn(Se),Cn=Se;fn&&(Cn.credential=fn,Cn.tenantId=jt.tenantId||void 0,Cn.email=jt.email||void 0,Cn.phoneNumber=jt.phoneNumber||void 0)}}(Je,Fe),Fe}).then(Fe=>{const jt=Fe.user;return{operationType:Fe.operationType,credential:Qn(Fe),additionalUserInfo:Z.al(Fe),user:le.getOrCreate(jt)}})}function br(Je,Se){return wn.apply(this,arguments)}function wn(){return(wn=(0,C.Z)(function*(Je,Se){const Fe=yield Se;return{verificationId:Fe.verificationId,confirm:Ct=>vn(Je,Fe.confirm(Ct))}})).apply(this,arguments)}class Te{constructor(Se,Fe){this.resolver=Fe,this.auth=function Dn(Je){return Je.wrapped()}(Se)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Se){return vn(rn(this.auth),this.resolver.resolveSignIn(Se))}}class le{constructor(Se){this._delegate=Se,this.multiFactor=Z.ao(Se)}static getOrCreate(Se){return le.USER_MAP.has(Se)||le.USER_MAP.set(Se,new le(Se)),le.USER_MAP.get(Se)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Se){return this._delegate.getIdTokenResult(Se)}getIdToken(Se){return this._delegate.getIdToken(Se)}linkAndRetrieveDataWithCredential(Se){return this.linkWithCredential(Se)}linkWithCredential(Se){var Fe=this;return(0,C.Z)(function*(){return vn(Fe.auth,Z.Z(Fe._delegate,Se))})()}linkWithPhoneNumber(Se,Fe){var Ct=this;return(0,C.Z)(function*(){return br(Ct.auth,Z.l(Ct._delegate,Se,Fe))})()}linkWithPopup(Se){var Fe=this;return(0,C.Z)(function*(){return vn(Fe.auth,Z.d(Fe._delegate,Se,ct))})()}linkWithRedirect(Se){var Fe=this;return(0,C.Z)(function*(){return yield vr(Z.aE(Fe.auth)),Z.g(Fe._delegate,Se,ct)})()}reauthenticateAndRetrieveDataWithCredential(Se){return this.reauthenticateWithCredential(Se)}reauthenticateWithCredential(Se){var Fe=this;return(0,C.Z)(function*(){return vn(Fe.auth,Z._(Fe._delegate,Se))})()}reauthenticateWithPhoneNumber(Se,Fe){return br(this.auth,Z.r(this._delegate,Se,Fe))}reauthenticateWithPopup(Se){return vn(this.auth,Z.e(this._delegate,Se,ct))}reauthenticateWithRedirect(Se){var Fe=this;return(0,C.Z)(function*(){return yield vr(Z.aE(Fe.auth)),Z.h(Fe._delegate,Se,ct)})()}sendEmailVerification(Se){return Z.ab(this._delegate,Se)}unlink(Se){var Fe=this;return(0,C.Z)(function*(){return yield Z.ak(Fe._delegate,Se),Fe})()}updateEmail(Se){return Z.ag(this._delegate,Se)}updatePassword(Se){return Z.ah(this._delegate,Se)}updatePhoneNumber(Se){return Z.u(this._delegate,Se)}updateProfile(Se){return Z.af(this._delegate,Se)}verifyBeforeUpdateEmail(Se,Fe){return Z.ac(this._delegate,Se,Fe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}le.USER_MAP=new WeakMap;const we=Z.ax;let Oe=(()=>{class Je{constructor(Fe,Ct){if(this.app=Fe,Ct.isInitialized())return this._delegate=Ct.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:jt}=Fe.options;we(jt,"invalid-api-key",{appName:Fe.name}),we(jt,"invalid-api-key",{appName:Fe.name});const fn=typeof window<"u"?ct:void 0;this._delegate=Ct.initialize({options:{persistence:wt(jt,Fe.name),popupRedirectResolver:fn}}),this._delegate._updateErrorMap(Z.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?le.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Fe){this._delegate.languageCode=Fe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Fe){this._delegate.tenantId=Fe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Fe,Ct){Z.G(this._delegate,Fe,Ct)}applyActionCode(Fe){return Z.a2(this._delegate,Fe)}checkActionCode(Fe){return Z.a3(this._delegate,Fe)}confirmPasswordReset(Fe,Ct){return Z.a1(this._delegate,Fe,Ct)}createUserWithEmailAndPassword(Fe,Ct){var jt=this;return(0,C.Z)(function*(){return vn(jt._delegate,Z.a5(jt._delegate,Fe,Ct))})()}fetchProvidersForEmail(Fe){return this.fetchSignInMethodsForEmail(Fe)}fetchSignInMethodsForEmail(Fe){return Z.aa(this._delegate,Fe)}isSignInWithEmailLink(Fe){return Z.a8(this._delegate,Fe)}getRedirectResult(){var Fe=this;return(0,C.Z)(function*(){we(Xn(),Fe._delegate,"operation-not-supported-in-this-environment");const Ct=yield Z.j(Fe._delegate,ct);return Ct?vn(Fe._delegate,Promise.resolve(Ct)):{credential:null,user:null}})()}addFrameworkForLogging(Fe){!function nn(Je,Se){(0,Z.aE)(Je)._logFramework(Se)}(this._delegate,Fe)}onAuthStateChanged(Fe,Ct,jt){const{next:fn,error:Cn,complete:ve}=Re(Fe,Ct,jt);return this._delegate.onAuthStateChanged(fn,Cn,ve)}onIdTokenChanged(Fe,Ct,jt){const{next:fn,error:Cn,complete:ve}=Re(Fe,Ct,jt);return this._delegate.onIdTokenChanged(fn,Cn,ve)}sendSignInLinkToEmail(Fe,Ct){return Z.a7(this._delegate,Fe,Ct)}sendPasswordResetEmail(Fe,Ct){return Z.a0(this._delegate,Fe,Ct||void 0)}setPersistence(Fe){var Ct=this;return(0,C.Z)(function*(){let jt;switch(function ri(Je,Se){er(Object.values(Yn).includes(Se),Je,"invalid-persistence-type"),(0,P.b$)()?er(Se!==Yn.SESSION,Je,"unsupported-persistence-type"):(0,P.UG)()?er(Se===Yn.NONE,Je,"unsupported-persistence-type"):dn()?er(Se===Yn.NONE||Se===Yn.LOCAL&&(0,P.hl)(),Je,"unsupported-persistence-type"):er(Se===Yn.NONE||Mr(),Je,"unsupported-persistence-type")}(Ct._delegate,Fe),Fe){case Yn.SESSION:jt=Z.a;break;case Yn.LOCAL:jt=(yield Z.ay(Z.i)._isAvailable())?Z.i:Z.b;break;case Yn.NONE:jt=Z.L;break;default:return Z.at("argument-error",{appName:Ct._delegate.name})}return Ct._delegate.setPersistence(jt)})()}signInAndRetrieveDataWithCredential(Fe){return this.signInWithCredential(Fe)}signInAnonymously(){return vn(this._delegate,Z.X(this._delegate))}signInWithCredential(Fe){return vn(this._delegate,Z.Y(this._delegate,Fe))}signInWithCustomToken(Fe){return vn(this._delegate,Z.$(this._delegate,Fe))}signInWithEmailAndPassword(Fe,Ct){return vn(this._delegate,Z.a6(this._delegate,Fe,Ct))}signInWithEmailLink(Fe,Ct){return vn(this._delegate,Z.a9(this._delegate,Fe,Ct))}signInWithPhoneNumber(Fe,Ct){return br(this._delegate,Z.s(this._delegate,Fe,Ct))}signInWithPopup(Fe){var Ct=this;return(0,C.Z)(function*(){return we(Xn(),Ct._delegate,"operation-not-supported-in-this-environment"),vn(Ct._delegate,Z.c(Ct._delegate,Fe,ct))})()}signInWithRedirect(Fe){var Ct=this;return(0,C.Z)(function*(){return we(Xn(),Ct._delegate,"operation-not-supported-in-this-environment"),yield vr(Ct._delegate),Z.f(Ct._delegate,Fe,ct)})()}updateCurrentUser(Fe){return this._delegate.updateCurrentUser(Fe)}verifyPasswordResetCode(Fe){return Z.a4(this._delegate,Fe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Je.Persistence=Yn,Je})();function Re(Je,Se,Fe){let Ct=Je;"function"!=typeof Je&&({next:Ct,error:Se,complete:Fe}=Je);const jt=Ct;return{next:Cn=>jt(Cn&&le.getOrCreate(Cn)),error:Se,complete:Fe}}function wt(Je,Se){const Fe=function Ie(Je,Se){const Fe=_e();if(!Fe)return[];const Ct=Z.az(fr,Je,Se);switch(Fe.getItem(Ct)){case Yn.NONE:return[Z.L];case Yn.LOCAL:return[Z.i,Z.a];case Yn.SESSION:return[Z.a];default:return[]}}(Je,Se);if(typeof self<"u"&&!Fe.includes(Z.i)&&Fe.push(Z.i),typeof window<"u")for(const Ct of[Z.b,Z.a])Fe.includes(Ct)||Fe.push(Ct);return Fe.includes(Z.L)||Fe.push(Z.L),Fe}class Dt{constructor(){this.providerId="phone",this._delegate=new Z.P(rn(h.Z.auth()))}static credential(Se,Fe){return Z.P.credential(Se,Fe)}verifyPhoneNumber(Se,Fe){return this._delegate.verifyPhoneNumber(Se,Fe)}unwrap(){return this._delegate}}Dt.PHONE_SIGN_IN_METHOD=Z.P.PHONE_SIGN_IN_METHOD,Dt.PROVIDER_ID=Z.P.PROVIDER_ID;const Yt=Z.ax;class Bn{constructor(Se,Fe,Ct=h.Z.app()){var jt;Yt(null===(jt=Ct.options)||void 0===jt?void 0:jt.apiKey,"invalid-api-key",{appName:Ct.name}),this._delegate=new Z.R(Se,Fe,Ct.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ir(Je){Je.INTERNAL.registerComponent(new qe.wA("auth-compat",Se=>{const Fe=Se.getProvider("app-compat").getImmediate(),Ct=Se.getProvider("auth");return new Oe(Fe,Ct)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Z.A.EMAIL_SIGNIN,PASSWORD_RESET:Z.A.PASSWORD_RESET,RECOVER_EMAIL:Z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Z.A.VERIFY_EMAIL}},EmailAuthProvider:Z.M,FacebookAuthProvider:Z.N,GithubAuthProvider:Z.T,GoogleAuthProvider:Z.Q,OAuthProvider:Z.U,SAMLAuthProvider:Z.V,PhoneAuthProvider:Dt,PhoneMultiFactorGenerator:Z.m,RecaptchaVerifier:Bn,TwitterAuthProvider:Z.W,Auth:Oe,AuthCredential:Z.H,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Je.registerVersion("@firebase/auth-compat","0.2.20")}(h.Z)},6551:(an,ht,j)=>{j.d(ht,{N8:()=>sh});var C=j(5861),h=j(9681),Z=j(4859),P=j(2090),de=j(1877);const Le="@firebase/database";let be="";class ie{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,l){null==l?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,P.Pz)(l))}get(c){const l=this.domStorage_.getItem(this.prefixedName_(c));return null==l?null:(0,P.cI)(l)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class fe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,l){null==l?delete this.cache_[c]:this.cache_[c]=l}get(c){return(0,P.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Ce=function(f){try{if(typeof window<"u"&&typeof window[f]<"u"){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new ie(c)}}catch{}return new fe},st=Ce("localStorage"),ot=Ce("sessionStorage"),nt=new de.Yd("@firebase/database"),Ot=function(){let f=1;return function(){return f++}}(),at=function(f){const c=(0,P.dS)(f),l=new P.gQ;l.update(c);const v=l.digest();return P.US.encodeByteArray(v)},it=function(...f){let c="";for(let l=0;l<f.length;l++){const v=f[l];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=it.apply(null,v):c+="object"==typeof v?(0,P.Pz)(v):v,c+=" "}return c};let Ht=null,qt=!0;const gt=function(...f){if(!0===qt&&(qt=!1,null===Ht&&!0===ot.get("logging_enabled")&&function(f,c){(0,P.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(nt.logLevel=de.in.VERBOSE,Ht=nt.log.bind(nt),c&&ot.set("logging_enabled",!0)):"function"==typeof f?Ht=f:(Ht=null,ot.remove("logging_enabled"))}(!0)),Ht){const c=it.apply(null,f);Ht(c)}},Be=function(f){return function(...c){gt(f,...c)}},ut=function(...f){const c="FIREBASE INTERNAL ERROR: "+it(...f);nt.error(c)},ee=function(...f){const c=`FIREBASE FATAL ERROR: ${it(...f)}`;throw nt.error(c),new Error(c)},se=function(...f){const c="FIREBASE WARNING: "+it(...f);nt.warn(c)},Pe=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Ke="[MIN_NAME]",Ye="[MAX_NAME]",Mt=function(f,c){if(f===c)return 0;if(f===Ke||c===Ye)return-1;if(c===Ke||f===Ye)return 1;{const l=dr(f),v=dr(c);return null!==l?null!==v?l-v==0?f.length-c.length:l-v:-1:null!==v?1:f<c?-1:1}},kt=function(f,c){return f===c?0:f<c?-1:1},Bt=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,P.Pz)(c))},gn=function(f){if("object"!=typeof f||null===f)return(0,P.Pz)(f);const c=[];for(const v in f)c.push(v);c.sort();let l="{";for(let v=0;v<c.length;v++)0!==v&&(l+=","),l+=(0,P.Pz)(c[v]),l+=":",l+=gn(f[c[v]]);return l+="}",l},xn=function(f,c){const l=f.length;if(l<=c)return[f];const v=[];for(let S=0;S<l;S+=c)v.push(f.substring(S,S+c>l?l:S+c));return v};function Et(f,c){for(const l in f)f.hasOwnProperty(l)&&c(l,f[l])}const nn=function(f){(0,P.hu)(!Pe(f),"Invalid JSON number");const v=1023;let S,V,H,re,Ae;0===f?(V=0,H=0,S=1/f==-1/0?1:0):(S=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(re=Math.min(Math.floor(Math.log(f)/Math.LN2),v),V=re+v,H=Math.round(f*Math.pow(2,52-re)-Math.pow(2,52))):(V=0,H=Math.round(f/Math.pow(2,-1074))));const He=[];for(Ae=52;Ae;Ae-=1)He.push(H%2?1:0),H=Math.floor(H/2);for(Ae=11;Ae;Ae-=1)He.push(V%2?1:0),V=Math.floor(V/2);He.push(S?1:0),He.reverse();const Rt=He.join("");let Pt="";for(Ae=0;Ae<64;Ae+=8){let Ft=parseInt(Rt.substr(Ae,8),2).toString(16);1===Ft.length&&(Ft="0"+Ft),Pt+=Ft}return Pt.toLowerCase()},jn=new RegExp("^-?(0*)\\d{1,10}$"),dr=function(f){if(jn.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},Cr=function(f){try{f()}catch(c){setTimeout(()=>{throw se("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},lr=function(f,c){const l=setTimeout(f,c);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Mr{constructor(c,l){this.appName_=c,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((l,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(l,v):l(null)},0)})}addTokenChangeListener(c){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){se(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dn{constructor(c,l,v){this.appName_=c,this.firebaseOptions_=l,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(S=>this.auth_=S)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(l=>l&&"auth/token-not-initialized"===l.code?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(l,v):l(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(l=>l.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(l=>l.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',se(c)}}let Xn=(()=>{class f{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const er=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dt="websocket",Ie="long_polling";class _e{constructor(c,l,v,S,V=!1,H="",re=!1){this.secure=l,this.namespace=v,this.webSocketOnly=S,this.nodeAdmin=V,this.persistenceKey=H,this.includeNamespaceInQueryParams=re,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=st.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&st.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ct(f,c,l){let v;if((0,P.hu)("string"==typeof c,"typeof type must == string"),(0,P.hu)("object"==typeof l,"typeof params must == object"),c===dt)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Ie)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function mt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(l.ns=f.namespace);const S=[];return Et(l,(V,H)=>{S.push(V+"="+H)}),v+S.join("&")}class rn{constructor(){this.counters_={}}incrementCounter(c,l=1){(0,P.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=l}get(){return(0,P.p$)(this.counters_)}}const Dn={},Qn={};function zt(f){const c=f.toString();return Dn[c]||(Dn[c]=new rn),Dn[c]}class vn{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,l){this.closeAfterResponse=c,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,l){for(this.pendingResponses[c]=l;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<v.length;++S)v[S]&&Cr(()=>{this.onMessage_(v[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jt{constructor(c,l,v,S,V,H,re){this.connId=c,this.repoInfo=l,this.applicationId=v,this.appCheckToken=S,this.authToken=V,this.transportSessionId=H,this.lastSessionId=re,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Be(c),this.stats_=zt(l),this.urlFn=Ae=>(this.appCheckToken&&(Ae.ac=this.appCheckToken),ct(l,Ie,Ae))}open(c,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new vn(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,P.Yr)()||"complete"===document.readyState)f();else{let c=!1;const l=function(){document.body?c||(c=!0,f()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fn((...V)=>{const[H,re,Ae,He,Rt]=V;if(this.incrementIncomingBytes_(V),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===H)this.id=re,this.password=Ae;else{if("close"!==H)throw new Error("Unrecognized command received: "+H);re?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(re,()=>{this.onClosed_()})):this.onClosed_()}},(...V)=>{const[H,re]=V;this.incrementIncomingBytes_(V),this.myPacketOrderer.handleResponse(H,re)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&er.test(location.hostname)&&(v.r="f");const S=this.urlFn(v);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jt.forceAllow_=!0}static forceDisallow(){jt.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!jt.forceAllow_&&(jt.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const l=(0,P.Pz)(c);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const v=(0,P.h$)(l),S=xn(v,1840);for(let V=0;V<S.length;V++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[V]),this.curSegmentNum++}addDisconnectPingFrame(c,l){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=l,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const l=(0,P.Pz)(c).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class fn{constructor(c,l,v,S){if(this.onDisconnect=v,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=c,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Ot(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=fn.createIFrame_();let V="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(V='<script>document.domain="'+document.domain+'";<\/script>');const H="<html><body>"+V+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(H),this.myIFrame.doc.close()}catch(re){gt("frame writing exception"),re.stack&&gt(re.stack),gt(re)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||gt("No IE domain setting required")}catch{const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,l){for(this.myID=c,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let l=this.urlFn(c),v="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const H=this.pendingSegs.shift();v=v+"&seg"+S+"="+H.seg+"&ts"+S+"="+H.ts+"&d"+S+"="+H.d,S++}return l+=v,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(c,l,v){this.pendingSegs.push({seg:c,ts:l,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,l){this.outstandingRequests.add(l);const v=()=>{this.outstandingRequests.delete(l),this.newRequest_()},S=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(S),v()})}addTag(c,l){(0,P.Yr)()?this.doNodeLongPoll(c,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const S=v.readyState;(!S||"loaded"===S||"complete"===S)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),l())},v.onerror=()=>{gt("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch{}},Math.floor(1))}}let pe=null;typeof MozWebSocket<"u"?pe=MozWebSocket:typeof WebSocket<"u"&&(pe=WebSocket);let ce=(()=>{class f{constructor(l,v,S,V,H,re,Ae){this.connId=l,this.applicationId=S,this.appCheckToken=V,this.authToken=H,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Be(this.connId),this.stats_=zt(v),this.connURL=f.connectionURL_(v,re,Ae,V,S),this.nodeAdmin=v.nodeAdmin}static connectionURL_(l,v,S,V,H){const re={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&er.test(location.hostname)&&(re.r="f"),v&&(re.s=v),S&&(re.ls=S),V&&(re.ac=V),H&&(re.p=H),ct(l,dt,re)}open(l,v){this.onDisconnect=v,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,st.set("previous_websocket_failure",!0);try{let S;if((0,P.Yr)()){S={headers:{"User-Agent":`Firebase/5/${be}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const H=process.env,re=0===this.connURL.indexOf("wss://")?H.HTTPS_PROXY||H.https_proxy:H.HTTP_PROXY||H.http_proxy;re&&(S.proxy={origin:re})}this.mySock=new pe(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const V=S.message||S.data;return V&&this.log_(V),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const V=S.message||S.data;V&&this.log_(V),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(l=!0)}return!l&&null!==pe&&!f.forceDisallow_}static previouslyFailed(){return st.isInMemoryStorage||!0===st.get("previous_websocket_failure")}markConnectionHealthy(){st.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const S=(0,P.cI)(v);this.onMessage(S)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const v=Number(l);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const v=l.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const S=this.extractFrameCount_(v);null!==S&&this.appendFrame_(S)}}send(l){this.resetKeepAlive();const v=(0,P.Pz)(l);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const S=xn(v,16384);S.length>1&&this.sendString_(String(S.length));for(let V=0;V<S.length;V++)this.sendString_(S[V])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),et=(()=>{class f{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[jt,ce]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const v=ce&&ce.isAvailable();let S=v&&!ce.previouslyFailed();if(l.webSocketOnly&&(v||se("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[ce];else{const V=this.transports_=[];for(const H of f.ALL_TRANSPORTS)H&&H.isAvailable()&&V.push(H);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class pr{constructor(c,l,v,S,V,H,re,Ae,He,Rt){this.id=c,this.repoInfo_=l,this.applicationId_=v,this.appCheckToken_=S,this.authToken_=V,this.onMessage_=H,this.onReady_=re,this.onDisconnect_=Ae,this.onKill_=He,this.lastSessionId=Rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Be("c:"+this.id+":"),this.transportManager_=new et(l),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,v)},Math.floor(0));const S=c.healthyTimeout||0;S>0&&(this.healthyTimeout_=lr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return l=>{c===this.conn_?this.onConnectionLost_(l):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return l=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(l):c===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const l=c.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const l=Bt("t",c),v=Bt("d",c);if("c"===l)this.onSecondaryControl_(v);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const l=Bt("t",c),v=Bt("d",c);"c"===l?this.onControl_(v):"d"===l&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const l=Bt("t",c);if("d"in c){const v=c.d;if("h"===l)this.onHandshake_(v);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(v):"r"===l?this.onReset_(v):"e"===l?ut("Server Error: "+v):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ut("Unknown control packet command: "+l)}}onHandshake_(c){const l=c.ts,v=c.v,S=c.h;this.sessionId=c.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==v&&se("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,v),lr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,l){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(st.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qr{put(c,l,v,S){}merge(c,l,v,S){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,l,v){}onDisconnectMerge(c,l,v){}onDisconnectCancel(c,l){}reportStats(c){}}class Jr{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,P.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...l){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let S=0;S<v.length;S++)v[S].callback.apply(v[S].context,l)}}on(c,l,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:l,context:v});const S=this.getInitialEvent(c);S&&l.apply(v,S)}off(c,l,v){this.validateEventType_(c);const S=this.listeners_[c]||[];for(let V=0;V<S.length;V++)if(S[V].callback===l&&(!v||v===S[V].context))return void S.splice(V,1)}validateEventType_(c){(0,P.hu)(this.allowedEvents_.find(l=>l===c),"Unknown event: "+c)}}class tr extends Jr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tr}getInitialEvent(c){return(0,P.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class rr{constructor(c,l){if(void 0===l){this.pieces_=c.split("/");let v=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[v]=this.pieces_[S],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=l}toString(){let c="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(c+="/"+this.pieces_[l]);return c||"/"}}function or(){return new rr("")}function On(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function We(f){return f.pieces_.length-f.pieceNum_}function ke(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new rr(f.pieces_,c)}function rt(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Zt(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function un(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let l=f.pieceNum_;l<f.pieces_.length-1;l++)c.push(f.pieces_[l]);return new rr(c,0)}function Mn(f,c){const l=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)l.push(f.pieces_[v]);if(c instanceof rr)for(let v=c.pieceNum_;v<c.pieces_.length;v++)l.push(c.pieces_[v]);else{const v=c.split("/");for(let S=0;S<v.length;S++)v[S].length>0&&l.push(v[S])}return new rr(l,0)}function Fn(f){return f.pieceNum_>=f.pieces_.length}function $n(f,c){const l=On(f),v=On(c);if(null===l)return c;if(l===v)return $n(ke(f),ke(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function ys(f,c){if(We(f)!==We(c))return!1;for(let l=f.pieceNum_,v=c.pieceNum_;l<=f.pieces_.length;l++,v++)if(f.pieces_[l]!==c.pieces_[v])return!1;return!0}function Di(f,c){let l=f.pieceNum_,v=c.pieceNum_;if(We(f)>We(c))return!1;for(;l<f.pieces_.length;){if(f.pieces_[l]!==c.pieces_[v])return!1;++l,++v}return!0}class Hi{constructor(c,l){this.errorPrefix_=l,this.parts_=Zt(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,P.ug)(this.parts_[v]);Yi(this)}}function Yi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Zi(f))}function Zi(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class Cs extends Jr{constructor(){let c,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new Cs}getInitialEvent(c){return(0,P.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const na=1e3;let ds,so=(()=>{class f extends qr{constructor(l,v,S,V,H,re,Ae,He){if(super(),this.repoInfo_=l,this.applicationId_=v,this.onDataUpdate_=S,this.onConnectStatus_=V,this.onServerInfoUpdate_=H,this.authTokenProvider_=re,this.appCheckTokenProvider_=Ae,this.authOverride_=He,this.id=f.nextPersistentConnectionId_++,this.log_=Be("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=na,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,He&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Cs.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&tr.getInstance().on("online",this.onOnline_,this)}sendRequest(l,v,S){const V=++this.requestNumber_,H={r:V,a:l,b:v};this.log_((0,P.Pz)(H)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),S&&(this.requestCBHash_[V]=S)}get(l){this.initConnection_();const v=new P.BH,S={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:re=>{const Ae=re.d;"ok"===re.s?v.resolve(Ae):v.reject(Ae)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(l,v,S,V){this.initConnection_();const H=l._queryIdentifier,re=l._path.toString();this.log_("Listen called for "+re+" "+H),this.listens.has(re)||this.listens.set(re,new Map),(0,P.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(re).has(H),"listen() called twice for same path/queryId.");const Ae={onComplete:V,hashFn:v,query:l,tag:S};this.listens.get(re).set(H,Ae),this.connected_&&this.sendListen_(Ae)}sendGet_(l){const v=this.outstandingGets_[l];this.sendRequest("g",v.request,S=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(S)})}sendListen_(l){const v=l.query,S=v._path.toString(),V=v._queryIdentifier;this.log_("Listen on "+S+" for "+V);const H={p:S};l.tag&&(H.q=v._queryObject,H.t=l.tag),H.h=l.hashFn(),this.sendRequest("q",H,Ae=>{const He=Ae.d,Rt=Ae.s;f.warnOnListenWarnings_(He,v),(this.listens.get(S)&&this.listens.get(S).get(V))===l&&(this.log_("listen response",Ae),"ok"!==Rt&&this.removeListen_(S,V),l.onComplete&&l.onComplete(Rt,He))})}static warnOnListenWarnings_(l,v){if(l&&"object"==typeof l&&(0,P.r3)(l,"w")){const S=(0,P.DV)(l,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const V='".indexOn": "'+v._queryParams.getIndex().toString()+'"',H=v._path.toString();se(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${V} at ${H} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,P.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,v=(0,P.w9)(l)?"auth":"gauth",S={cred:l};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(v,S,V=>{const H=V.s,re=V.d||"error";this.authToken_===l&&("ok"===H?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(H,re))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const v=l.s,S=l.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,S)})}unlisten(l,v){const S=l._path.toString(),V=l._queryIdentifier;this.log_("Unlisten called for "+S+" "+V),(0,P.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,V)&&this.connected_&&this.sendUnlisten_(S,V,l._queryObject,v)}sendUnlisten_(l,v,S,V){this.log_("Unlisten on "+l+" for "+v);const H={p:l};V&&(H.q=S,H.t=V),this.sendRequest("n",H)}onDisconnectPut(l,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,v,S):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:v,onComplete:S})}onDisconnectMerge(l,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,v,S):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:v,onComplete:S})}onDisconnectCancel(l,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(l,v,S,V){const H={p:v,d:S};this.log_("onDisconnect "+l,H),this.sendRequest(l,H,re=>{V&&setTimeout(()=>{V(re.s,re.d)},Math.floor(0))})}put(l,v,S,V){this.putInternal("p",l,v,S,V)}merge(l,v,S,V){this.putInternal("m",l,v,S,V)}putInternal(l,v,S,V,H){this.initConnection_();const re={p:v,d:S};void 0!==H&&(re.h=H),this.outstandingPuts_.push({action:l,request:re,onComplete:V}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(l){const v=this.outstandingPuts_[l].action,S=this.outstandingPuts_[l].request,V=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(v,S,H=>{this.log_(v+" response",H),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),V&&V(H.s,H.d)})}reportStats(l){if(this.connected_){const v={c:l};this.log_("reportStats",v),this.sendRequest("s",v,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,P.Pz)(l));const v=l.r,S=this.requestCBHash_[v];S&&(delete this.requestCBHash_[v],S(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,v){this.log_("handleServerMessage",l,v),"d"===l?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===l?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===l?this.onListenRevoked_(v.p,v.q):"ac"===l?this.onAuthRevoked_(v.s,v.d):"apc"===l?this.onAppCheckRevoked_(v.s,v.d):"sd"===l?this.onSecurityDebugPacket_(v):ut("Unrecognized action received from server: "+(0,P.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=na),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-l);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,C.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const v=l.onDataMessage_.bind(l),S=l.onReady_.bind(l),V=l.onRealtimeDisconnect_.bind(l),H=l.id+":"+f.nextConnectionId_++,re=l.lastSessionId;let Ae=!1,He=null;const Rt=function(){He?He.close():(Ae=!0,V())};l.realtime_={close:Rt,sendRequest:function(bn){(0,P.hu)(He,"sendRequest call when we're not connected not allowed."),He.sendRequest(bn)}};const Ft=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[bn,Gn]=yield Promise.all([l.authTokenProvider_.getToken(Ft),l.appCheckTokenProvider_.getToken(Ft)]);Ae?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),l.authToken_=bn&&bn.accessToken,l.appCheckToken_=Gn&&Gn.token,He=new pr(H,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,v,S,V,Zr=>{se(Zr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},re))}catch(bn){l.log_("Failed to get token: "+bn),Ae||(l.repoInfo_.nodeAdmin&&se(bn),Rt())}}})()}interrupt(l){gt("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){gt("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const v=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const v=this.outstandingPuts_[l];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,v){let S;S=v?v.map(H=>gn(H)).join("$"):"default";const V=this.removeListen_(l,S);V&&V.onComplete&&V.onComplete("permission_denied")}removeListen_(l,v){const S=new rr(l).toString();let V;if(this.listens.has(S)){const H=this.listens.get(S);V=H.get(v),H.delete(v),0===H.size&&this.listens.delete(S)}else V=void 0;return V}onAuthRevoked_(l,v){gt("Auth token revoked: "+l+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,v){gt("App check token revoked: "+l+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const v of l.values())this.sendListen_(v);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let v="js";(0,P.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+v+"."+be.replace(/\./g,"-")]=1,(0,P.uI)()?l["framework.cordova"]=1:(0,P.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=tr.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&l}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class gr{constructor(c,l){this.name=c,this.node=l}static Wrap(c,l){return new gr(c,l)}}class rs{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,l){const v=new gr(Ke,c),S=new gr(Ke,l);return 0!==this.compare(v,S)}minPost(){return gr.MIN}}class Is extends rs{static get __EMPTY_NODE(){return ds}static set __EMPTY_NODE(c){ds=c}compare(c,l){return Mt(c.name,l.name)}isDefinedOn(c){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,l){return!1}minPost(){return gr.MIN}maxPost(){return new gr(Ye,ds)}makePost(c,l){return(0,P.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new gr(c,ds)}toString(){return".key"}}const Xr=new Is;class Fi{constructor(c,l,v,S,V=null){this.isReverse_=S,this.resultGenerator_=V,this.nodeStack_=[];let H=1;for(;!c.isEmpty();)if(H=l?v(c.key,l):1,S&&(H*=-1),H<0)c=this.isReverse_?c.left:c.right;else{if(0===H){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,c=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Zs,Li=(()=>{class f{constructor(l,v,S,V,H){this.key=l,this.value=v,this.color=S??f.RED,this.left=V??Ai.EMPTY_NODE,this.right=H??Ai.EMPTY_NODE}copy(l,v,S,V,H){return new f(l??this.key,v??this.value,S??this.color,V??this.left,H??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,v,S){let V=this;const H=S(l,V.key);return V=H<0?V.copy(null,null,null,V.left.insert(l,v,S),null):0===H?V.copy(null,v,null,null,null):V.copy(null,null,null,null,V.right.insert(l,v,S)),V.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ai.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,v){let S,V;if(S=this,v(l,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(l,v),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===v(l,S.key)){if(S.right.isEmpty())return Ai.EMPTY_NODE;V=S.right.min_(),S=S.copy(V.key,V.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(l,v))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,v)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class Ai{constructor(c,l=Ai.EMPTY_NODE){this.comparator_=c,this.root_=l}insert(c,l){return new Ai(this.comparator_,this.root_.insert(c,l,this.comparator_).copy(null,null,Li.BLACK,null,null))}remove(c){return new Ai(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Li.BLACK,null,null))}get(c){let l,v=this.root_;for(;!v.isEmpty();){if(l=this.comparator_(c,v.key),0===l)return v.value;l<0?v=v.left:l>0&&(v=v.right)}return null}getPredecessorKey(c){let l,v=this.root_,S=null;for(;!v.isEmpty();){if(l=this.comparator_(c,v.key),0===l){if(v.left.isEmpty())return S?S.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}l<0?v=v.left:l>0&&(S=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new Fi(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,l){return new Fi(this.root_,c,this.comparator_,!1,l)}getReverseIteratorFrom(c,l){return new Fi(this.root_,c,this.comparator_,!0,l)}getReverseIterator(c){return new Fi(this.root_,null,this.comparator_,!0,c)}}function Nr(f,c){return Mt(f.name,c.name)}function Os(f,c){return Mt(f,c)}Ai.EMPTY_NODE=new class Ni{copy(c,l,v,S,V){return this}insert(c,l,v){return new Li(c,l,null)}remove(c,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _o=function(f){return"number"==typeof f?"number:"+nn(f):"string:"+f},ks=function(f){if(f.isLeafNode()){const c=f.val();(0,P.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,P.r3)(c,".sv"),"Priority must be a string or number.")}else(0,P.hu)(f===Zs||f.isEmpty(),"priority of unexpected type.");(0,P.hu)(f===Zs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ia,qs,xi,Si=(()=>{class f{constructor(l,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=v,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ks(this.priorityNode_)}static set __childrenNodeConstructor(l){ia=l}static get __childrenNodeConstructor(){return ia}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new f(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Fn(l)?this:".priority"===On(l)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,v){return null}updateImmediateChild(l,v){return".priority"===l?this.updatePriority(v):v.isEmpty()&&".priority"!==l?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,v).updatePriority(this.priorityNode_)}updateChild(l,v){const S=On(l);return null===S?v:v.isEmpty()&&".priority"!==S?this:((0,P.hu)(".priority"!==S||1===We(l),".priority must be the last token in a path"),this.updateImmediateChild(S,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(l),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,v){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+_o(this.priorityNode_.val())+":");const v=typeof this.value_;l+=v+":",l+="number"===v?nn(this.value_):this.value_,this.lazyHash_=at(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===f.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof f.__childrenNodeConstructor?-1:((0,P.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const v=typeof l.value_,S=typeof this.value_,V=f.VALUE_TYPE_ORDER.indexOf(v),H=f.VALUE_TYPE_ORDER.indexOf(S);return(0,P.hu)(V>=0,"Unknown leaf type: "+v),(0,P.hu)(H>=0,"Unknown leaf type: "+S),V===H?"object"===S?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:H-V}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const v=l;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const ei=new class oo extends rs{compare(c,l){const v=c.node.getPriority(),S=l.node.getPriority(),V=v.compareTo(S);return 0===V?Mt(c.name,l.name):V}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,l){return!c.getPriority().equals(l.getPriority())}minPost(){return gr.MIN}maxPost(){return new gr(Ye,new Si("[PRIORITY-POST]",xi))}makePost(c,l){const v=qs(c);return new gr(l,new Si("[PRIORITY-POST]",v))}toString(){return".priority"}},Ta=Math.log(2);class Gr{constructor(c){this.count=parseInt(Math.log(c+1)/Ta,10),this.current_=this.count-1;const S=(V=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&S}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const De=function(f,c,l,v){f.sort(c);const S=function(Ae,He){const Rt=He-Ae;let Pt,Ft;if(0===Rt)return null;if(1===Rt)return Pt=f[Ae],Ft=l?l(Pt):Pt,new Li(Ft,Pt.node,Li.BLACK,null,null);{const bn=parseInt(Rt/2,10)+Ae,Gn=S(Ae,bn),Zr=S(bn+1,He);return Pt=f[bn],Ft=l?l(Pt):Pt,new Li(Ft,Pt.node,Li.BLACK,Gn,Zr)}},re=function(Ae){let He=null,Rt=null,Pt=f.length;const Ft=function(Gn,Zr){const Ws=Pt-Gn,su=Pt;Pt-=Gn;const ml=S(Ws+1,su),Vl=f[Ws],Xc=l?l(Vl):Vl;bn(new Li(Xc,Vl.node,Zr,null,ml))},bn=function(Gn){He?(He.left=Gn,He=Gn):(Rt=Gn,He=Gn)};for(let Gn=0;Gn<Ae.count;++Gn){const Zr=Ae.nextBitIsOne(),Ws=Math.pow(2,Ae.count-(Gn+1));Zr?Ft(Ws,Li.BLACK):(Ft(Ws,Li.BLACK),Ft(Ws,Li.RED))}return Rt}(new Gr(f.length));return new Ai(v||c,re)};let me;const Ge={};class lt{constructor(c,l){this.indexes_=c,this.indexSet_=l}static get Default(){return(0,P.hu)(Ge&&ei,"ChildrenNode.ts has not been loaded"),me=me||new lt({".priority":Ge},{".priority":ei}),me}get(c){const l=(0,P.DV)(this.indexes_,c);if(!l)throw new Error("No index defined for "+c);return l instanceof Ai?l:null}hasIndex(c){return(0,P.r3)(this.indexSet_,c.toString())}addIndex(c,l){(0,P.hu)(c!==Xr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let S=!1;const V=l.getIterator(gr.Wrap);let re,H=V.getNext();for(;H;)S=S||c.isDefinedOn(H.node),v.push(H),H=V.getNext();re=S?De(v,c.getCompare()):Ge;const Ae=c.toString(),He=Object.assign({},this.indexSet_);He[Ae]=c;const Rt=Object.assign({},this.indexes_);return Rt[Ae]=re,new lt(Rt,He)}addToIndexes(c,l){const v=(0,P.UI)(this.indexes_,(S,V)=>{const H=(0,P.DV)(this.indexSet_,V);if((0,P.hu)(H,"Missing index implementation for "+V),S===Ge){if(H.isDefinedOn(c.node)){const re=[],Ae=l.getIterator(gr.Wrap);let He=Ae.getNext();for(;He;)He.name!==c.name&&re.push(He),He=Ae.getNext();return re.push(c),De(re,H.getCompare())}return Ge}{const re=l.get(c.name);let Ae=S;return re&&(Ae=Ae.remove(new gr(c.name,re))),Ae.insert(c,c.node)}});return new lt(v,this.indexSet_)}removeFromIndexes(c,l){const v=(0,P.UI)(this.indexes_,S=>{if(S===Ge)return S;{const V=l.get(c.name);return V?S.remove(new gr(c.name,V)):S}});return new lt(v,this.indexSet_)}}let xt,Tt=(()=>{class f{constructor(l,v,S){this.children_=l,this.priorityNode_=v,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&ks(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xt||(xt=new f(new Ai(Os),null,lt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xt}updatePriority(l){return this.children_.isEmpty()?this:new f(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const v=this.children_.get(l);return null===v?xt:v}}getChild(l){const v=On(l);return null===v?this:this.getImmediateChild(v).getChild(ke(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,v){if((0,P.hu)(v,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(v);{const S=new gr(l,v);let V,H;v.isEmpty()?(V=this.children_.remove(l),H=this.indexMap_.removeFromIndexes(S,this.children_)):(V=this.children_.insert(l,v),H=this.indexMap_.addToIndexes(S,this.children_));const re=V.isEmpty()?xt:this.priorityNode_;return new f(V,re,H)}}updateChild(l,v){const S=On(l);if(null===S)return v;{(0,P.hu)(".priority"!==On(l)||1===We(l),".priority must be the last token in a path");const V=this.getImmediateChild(S).updateChild(ke(l),v);return this.updateImmediateChild(S,V)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const v={};let S=0,V=0,H=!0;if(this.forEachChild(ei,(re,Ae)=>{v[re]=Ae.val(l),S++,H&&f.INTEGER_REGEXP_.test(re)?V=Math.max(V,Number(re)):H=!1}),!l&&H&&V<2*S){const re=[];for(const Ae in v)re[Ae]=v[Ae];return re}return l&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+_o(this.getPriority().val())+":"),this.forEachChild(ei,(v,S)=>{const V=S.hash();""!==V&&(l+=":"+v+":"+V)}),this.lazyHash_=""===l?"":at(l)}return this.lazyHash_}getPredecessorChildName(l,v,S){const V=this.resolveIndex_(S);if(V){const H=V.getPredecessorKey(new gr(l,v));return H?H.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const v=this.resolveIndex_(l);if(v){const S=v.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(l){const v=this.getFirstChildName(l);return v?new gr(v,this.children_.get(v)):null}getLastChildName(l){const v=this.resolveIndex_(l);if(v){const S=v.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(l){const v=this.getLastChildName(l);return v?new gr(v,this.children_.get(v)):null}forEachChild(l,v){const S=this.resolveIndex_(l);return S?S.inorderTraversal(V=>v(V.name,V.node)):this.children_.inorderTraversal(v)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,v){const S=this.resolveIndex_(v);if(S)return S.getIteratorFrom(l,V=>V);{const V=this.children_.getIteratorFrom(l.name,gr.Wrap);let H=V.peek();for(;null!=H&&v.compare(H,l)<0;)V.getNext(),H=V.peek();return V}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,v){const S=this.resolveIndex_(v);if(S)return S.getReverseIteratorFrom(l,V=>V);{const V=this.children_.getReverseIteratorFrom(l.name,gr.Wrap);let H=V.peek();for(;null!=H&&v.compare(H,l)>0;)V.getNext(),H=V.peek();return V}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===cn?-1:0}withIndex(l){if(l===Xr||this.indexMap_.hasIndex(l))return this;{const v=this.indexMap_.addIndex(l,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(l){return l===Xr||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const v=l;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const S=this.getIterator(ei),V=v.getIterator(ei);let H=S.getNext(),re=V.getNext();for(;H&&re;){if(H.name!==re.name||!H.node.equals(re.node))return!1;H=S.getNext(),re=V.getNext()}return null===H&&null===re}return!1}return!1}}resolveIndex_(l){return l===Xr?null:this.indexMap_.get(l.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const cn=new class ln extends Tt{constructor(){super(new Ai(Os),Tt.EMPTY_NODE,lt.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return Tt.EMPTY_NODE}isEmpty(){return!1}};function Ln(f,c=null){if(null===f)return Tt.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,P.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Si(f,Ln(c));if(f instanceof Array){let l=Tt.EMPTY_NODE;return Et(f,(v,S)=>{if((0,P.r3)(f,v)&&"."!==v.substring(0,1)){const V=Ln(S);(V.isLeafNode()||!V.isEmpty())&&(l=l.updateImmediateChild(v,V))}}),l.updatePriority(Ln(c))}{const l=[];let v=!1;if(Et(f,(H,re)=>{if("."!==H.substring(0,1)){const Ae=Ln(re);Ae.isEmpty()||(v=v||!Ae.getPriority().isEmpty(),l.push(new gr(H,Ae)))}}),0===l.length)return Tt.EMPTY_NODE;const V=De(l,Nr,H=>H.name,Os);if(v){const H=De(l,ei.getCompare());return new Tt(V,Ln(c),new lt({".priority":H},{".priority":ei}))}return new Tt(V,Ln(c),lt.Default)}}Object.defineProperties(gr,{MIN:{value:new gr(Ke,Tt.EMPTY_NODE)},MAX:{value:new gr(Ye,cn)}}),Is.__EMPTY_NODE=Tt.EMPTY_NODE,Si.__childrenNodeConstructor=Tt,function qi(f){Zs=f}(cn),function Gi(f){xi=f}(cn),function is(f){qs=f}(Ln);class Ar extends rs{constructor(c){super(),this.indexPath_=c,(0,P.hu)(!Fn(c)&&".priority"!==On(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,l){const v=this.extractChild(c.node),S=this.extractChild(l.node),V=v.compareTo(S);return 0===V?Mt(c.name,l.name):V}makePost(c,l){const v=Ln(c),S=Tt.EMPTY_NODE.updateChild(this.indexPath_,v);return new gr(l,S)}maxPost(){const c=Tt.EMPTY_NODE.updateChild(this.indexPath_,cn);return new gr(Ye,c)}toString(){return Zt(this.indexPath_,0).join("/")}}const _i=new class Yr extends rs{compare(c,l){const v=c.node.compareTo(l.node);return 0===v?Mt(c.name,l.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,l){return!c.equals(l)}minPost(){return gr.MIN}maxPost(){return gr.MAX}makePost(c,l){const v=Ln(c);return new gr(l,v)}toString(){return".value"}};function Vt(f,c,l){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:l}}class Fs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ei}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ke}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ye}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ei}copy(){const c=new Fs;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Bi(f){const c={};if(f.isDefault())return c;let l;return f.index_===ei?l="$priority":f.index_===_i?l="$value":f.index_===Xr?l="$key":((0,P.hu)(f.index_ instanceof Ar,"Unrecognized index type!"),l=f.index_.toString()),c.orderBy=(0,P.Pz)(l),f.startSet_&&(c.startAt=(0,P.Pz)(f.indexStartValue_),f.startNameSet_&&(c.startAt+=","+(0,P.Pz)(f.indexStartName_))),f.endSet_&&(c.endAt=(0,P.Pz)(f.indexEndValue_),f.endNameSet_&&(c.endAt+=","+(0,P.Pz)(f.indexEndName_))),f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function Ls(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_)),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_)),f.limitSet_){c.l=f.limit_;let l=f.viewFrom_;""===l&&(l=f.isViewFromLeft()?"l":"r"),c.vf=l}return f.index_!==ei&&(c.i=f.index_.toString()),c}class Us extends qr{constructor(c,l,v,S){super(),this.repoInfo_=c,this.onDataUpdate_=l,this.authTokenProvider_=v,this.appCheckTokenProvider_=S,this.log_=Be("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,l){return void 0!==l?"tag$"+l:((0,P.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,l,v,S){const V=c._path.toString();this.log_("Listen called for "+V+" "+c._queryIdentifier);const H=Us.getListenId_(c,v),re={};this.listens_[H]=re;const Ae=Bi(c._queryParams);this.restRequest_(V+".json",Ae,(He,Rt)=>{let Pt=Rt;if(404===He&&(Pt=null,He=null),null===He&&this.onDataUpdate_(V,Pt,!1,v),(0,P.DV)(this.listens_,H)===re){let Ft;Ft=He?401===He?"permission_denied":"rest_error:"+He:"ok",S(Ft,null)}})}unlisten(c,l){const v=Us.getListenId_(c,l);delete this.listens_[v]}get(c){const l=Bi(c._queryParams),v=c._path.toString(),S=new P.BH;return this.restRequest_(v+".json",l,(V,H)=>{let re=H;404===V&&(re=null,V=null),null===V?(this.onDataUpdate_(v,re,!1,null),S.resolve(re)):S.reject(new Error(re))}),S.promise}refreshAuthToken(c){}restRequest_(c,l={},v){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,V])=>{S&&S.accessToken&&(l.auth=S.accessToken),V&&V.token&&(l.ac=V.token);const H=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,P.xO)(l);this.log_("Sending REST request for "+H);const re=new XMLHttpRequest;re.onreadystatechange=()=>{if(v&&4===re.readyState){this.log_("REST Response for "+H+" received. status:",re.status,"response:",re.responseText);let Ae=null;if(re.status>=200&&re.status<300){try{Ae=(0,P.cI)(re.responseText)}catch{se("Failed to parse JSON response for "+H+": "+re.responseText)}v(null,Ae)}else 401!==re.status&&404!==re.status&&se("Got unsuccessful REST response for "+H+" Status: "+re.status),v(re.status);v=null}},re.open("GET",H,!0),re.send()})}}class oa{constructor(){this.rootNode_=Tt.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,l){this.rootNode_=this.rootNode_.updateChild(c,l)}}function bs(){return{value:null,children:new Map}}function ko(f,c,l){if(Fn(c))f.value=l,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,l);else{const v=On(c);f.children.has(v)||f.children.set(v,bs()),ko(f.children.get(v),c=ke(c),l)}}function Ts(f,c,l){null!==f.value?l(c,f.value):function Yu(f,c){f.children.forEach((l,v)=>{c(v,l)})}(f,(v,S)=>{Ts(S,new rr(c.toString()+"/"+v),l)})}class Da{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),l=Object.assign({},c);return this.last_&&Et(this.last_,(v,S)=>{l[v]=l[v]-S}),this.last_=c,l}}class la{constructor(c,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Da(c);const v=1e4+2e4*Math.random();lr(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),l={};let v=!1;Et(c,(S,V)=>{V>0&&(0,P.r3)(this.statsToReport_,S)&&(l[S]=V,v=!0)}),v&&this.server_.reportStats(l),lr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ds=(()=>{return(f=Ds||(Ds={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ds;var f})();function zo(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Sa{constructor(c,l,v){this.path=c,this.affectedTree=l,this.revert=v,this.type=Ds.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Fn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new rr(c));return new Sa(or(),l,this.revert)}}return(0,P.hu)(On(this.path)===c,"operationForChild called for unrelated child."),new Sa(ke(this.path),this.affectedTree,this.revert)}}class z{constructor(c,l,v){this.source=c,this.path=l,this.snap=v,this.type=Ds.OVERWRITE}operationForChild(c){return Fn(this.path)?new z(this.source,or(),this.snap.getImmediateChild(c)):new z(this.source,ke(this.path),this.snap)}}class U{constructor(c,l,v){this.source=c,this.path=l,this.children=v,this.type=Ds.MERGE}operationForChild(c){if(Fn(this.path)){const l=this.children.subtree(new rr(c));return l.isEmpty()?null:l.value?new z(this.source,or(),l.value):new U(this.source,or(),l)}return(0,P.hu)(On(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new U(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Q{constructor(c,l,v){this.node_=c,this.fullyInitialized_=l,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Fn(c))return this.isFullyInitialized()&&!this.filtered_;const l=On(c);return this.isCompleteForChild(l)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}function At(f,c,l,v,S,V){const H=v.filter(re=>re.type===l);H.sort((re,Ae)=>function Qr(f,c,l){if(null==c.childName||null==l.childName)throw(0,P.g5)("Should only compare child_ events.");const v=new gr(c.childName,c.snapshotNode),S=new gr(l.childName,l.snapshotNode);return f.index_.compare(v,S)}(f,re,Ae)),H.forEach(re=>{const Ae=function Rn(f,c,l){return"value"===c.type||"child_removed"===c.type||(c.prevName=l.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,re,V);S.forEach(He=>{He.respondsTo(re.type)&&c.push(He.createEvent(Ae,f.query_))})})}function Ur(f,c){return{eventCache:f,serverCache:c}}function Wr(f,c,l,v){return Ur(new Q(c,l,v),f.serverCache)}function Pr(f,c,l,v){return Ur(f.eventCache,new Q(c,l,v))}function pi(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Hr(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let si;class Or{constructor(c,l=(()=>(si||(si=new Ai(kt)),si))()){this.value=c,this.children=l}static fromObject(c){let l=new Or(null);return Et(c,(v,S)=>{l=l.set(new rr(v),S)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,l){if(null!=this.value&&l(this.value))return{path:or(),value:this.value};if(Fn(c))return null;{const v=On(c),S=this.children.get(v);if(null!==S){const V=S.findRootMostMatchingPathAndValue(ke(c),l);return null!=V?{path:Mn(new rr(v),V.path),value:V.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Fn(c))return this;{const l=On(c),v=this.children.get(l);return null!==v?v.subtree(ke(c)):new Or(null)}}set(c,l){if(Fn(c))return new Or(l,this.children);{const v=On(c),V=(this.children.get(v)||new Or(null)).set(ke(c),l),H=this.children.insert(v,V);return new Or(this.value,H)}}remove(c){if(Fn(c))return this.children.isEmpty()?new Or(null):new Or(null,this.children);{const l=On(c),v=this.children.get(l);if(v){const S=v.remove(ke(c));let V;return V=S.isEmpty()?this.children.remove(l):this.children.insert(l,S),null===this.value&&V.isEmpty()?new Or(null):new Or(this.value,V)}return this}}get(c){if(Fn(c))return this.value;{const l=On(c),v=this.children.get(l);return v?v.get(ke(c)):null}}setTree(c,l){if(Fn(c))return l;{const v=On(c),V=(this.children.get(v)||new Or(null)).setTree(ke(c),l);let H;return H=V.isEmpty()?this.children.remove(v):this.children.insert(v,V),new Or(this.value,H)}}fold(c){return this.fold_(or(),c)}fold_(c,l){const v={};return this.children.inorderTraversal((S,V)=>{v[S]=V.fold_(Mn(c,S),l)}),l(c,this.value,v)}findOnPath(c,l){return this.findOnPath_(c,or(),l)}findOnPath_(c,l,v){const S=!!this.value&&v(l,this.value);if(S)return S;if(Fn(c))return null;{const V=On(c),H=this.children.get(V);return H?H.findOnPath_(ke(c),Mn(l,V),v):null}}foreachOnPath(c,l){return this.foreachOnPath_(c,or(),l)}foreachOnPath_(c,l,v){if(Fn(c))return this;{this.value&&v(l,this.value);const S=On(c),V=this.children.get(S);return V?V.foreachOnPath_(ke(c),Mn(l,S),v):new Or(null)}}foreach(c){this.foreach_(or(),c)}foreach_(c,l){this.children.inorderTraversal((v,S)=>{S.foreach_(Mn(c,v),l)}),this.value&&l(c,this.value)}foreachChild(c){this.children.inorderTraversal((l,v)=>{v.value&&c(l,v.value)})}}class zr{constructor(c){this.writeTree_=c}static empty(){return new zr(new Or(null))}}function os(f,c,l){if(Fn(c))return new zr(new Or(l));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const S=v.path;let V=v.value;const H=$n(S,c);return V=V.updateChild(H,l),new zr(f.writeTree_.set(S,V))}{const S=new Or(l),V=f.writeTree_.setTree(c,S);return new zr(V)}}}function Ri(f,c,l){let v=f;return Et(l,(S,V)=>{v=os(v,Mn(c,S),V)}),v}function as(f,c){if(Fn(c))return zr.empty();{const l=f.writeTree_.setTree(c,new Or(null));return new zr(l)}}function Eo(f,c){return null!=Qt(f,c)}function Qt(f,c){const l=f.writeTree_.findRootMostValueAndPath(c);return null!=l?f.writeTree_.get(l.path).getChild($n(l.path,c)):null}function yi(f){const c=[],l=f.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ei,(v,S)=>{c.push(new gr(v,S))}):f.writeTree_.children.inorderTraversal((v,S)=>{null!=S.value&&c.push(new gr(v,S.value))}),c}function Es(f,c){if(Fn(c))return f;{const l=Qt(f,c);return new zr(null!=l?new Or(l):f.writeTree_.subtree(c))}}function pu(f){return f.writeTree_.isEmpty()}function Sn(f,c){return ar(or(),f.writeTree_,c)}function ar(f,c,l){if(null!=c.value)return l.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((S,V)=>{".priority"===S?((0,P.hu)(null!==V.value,"Priority writes must always be leaf nodes"),v=V.value):l=ar(Mn(f,S),V,l)}),!l.getChild(f).isEmpty()&&null!==v&&(l=l.updateChild(Mn(f,".priority"),v)),l}}function bl(f,c){return da(c,f)}function Pu(f,c){if(f.snap)return Di(f.path,c);for(const l in f.children)if(f.children.hasOwnProperty(l)&&Di(Mn(f.path,l),c))return!0;return!1}function ca(f){return f.visible}function Zl(f,c,l){let v=zr.empty();for(let S=0;S<f.length;++S){const V=f[S];if(c(V)){const H=V.path;let re;if(V.snap)Di(l,H)?(re=$n(l,H),v=os(v,re,V.snap)):Di(H,l)&&(re=$n(H,l),v=os(v,or(),V.snap.getChild(re)));else{if(!V.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Di(l,H))re=$n(l,H),v=Ri(v,re,V.children);else if(Di(H,l))if(re=$n(H,l),Fn(re))v=Ri(v,or(),V.children);else{const Ae=(0,P.DV)(V.children,On(re));if(Ae){const He=Ae.getChild(ke(re));v=os(v,or(),He)}}}}}return v}function Zo(f,c,l,v,S){if(v||S){const V=Es(f.visibleWrites,c);return!S&&pu(V)?l:S||null!=l||Eo(V,or())?Sn(Zl(f.allWrites,function(He){return(He.visible||S)&&(!v||!~v.indexOf(He.writeId))&&(Di(He.path,c)||Di(c,He.path))},c),l||Tt.EMPTY_NODE):null}{const V=Qt(f.visibleWrites,c);if(null!=V)return V;{const H=Es(f.visibleWrites,c);return pu(H)?l:null!=l||Eo(H,or())?Sn(H,l||Tt.EMPTY_NODE):null}}}function Vn(f,c,l,v){return Zo(f.writeTree,f.treePath,c,l,v)}function wo(f,c){return function Qu(f,c,l){let v=Tt.EMPTY_NODE;const S=Qt(f.visibleWrites,c);if(S)return S.isLeafNode()||S.forEachChild(ei,(V,H)=>{v=v.updateImmediateChild(V,H)}),v;if(l){const V=Es(f.visibleWrites,c);return l.forEachChild(ei,(H,re)=>{const Ae=Sn(Es(V,new rr(H)),re);v=v.updateImmediateChild(H,Ae)}),yi(V).forEach(H=>{v=v.updateImmediateChild(H.name,H.node)}),v}return yi(Es(f.visibleWrites,c)).forEach(H=>{v=v.updateImmediateChild(H.name,H.node)}),v}(f.writeTree,f.treePath,c)}function qo(f,c,l,v){return function Vs(f,c,l,v,S){(0,P.hu)(v||S,"Either existingEventSnap or existingServerSnap must exist");const V=Mn(c,l);if(Eo(f.visibleWrites,V))return null;{const H=Es(f.visibleWrites,V);return pu(H)?S.getChild(l):Sn(H,S.getChild(l))}}(f.writeTree,f.treePath,c,l,v)}function li(f,c){return function gu(f,c){return Qt(f.visibleWrites,c)}(f.writeTree,Mn(f.treePath,c))}function Ys(f,c,l){return function Ga(f,c,l,v){const S=Mn(c,l),V=Qt(f.visibleWrites,S);return null!=V?V:v.isCompleteForChild(l)?Sn(Es(f.visibleWrites,S),v.getNode().getImmediateChild(l)):null}(f.writeTree,f.treePath,c,l)}function Vr(f,c){return da(Mn(f.treePath,c),f.writeTree)}function da(f,c){return{treePath:f,writeTree:c}}class Ii{constructor(){this.changeMap=new Map}trackChildChange(c){const l=c.type,v=c.childName;(0,P.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(v);if(S){const V=S.type;if("child_added"===l&&"child_removed"===V)this.changeMap.set(v,Vt(v,c.snapshotNode,S.snapshotNode));else if("child_removed"===l&&"child_added"===V)this.changeMap.delete(v);else if("child_removed"===l&&"child_changed"===V)this.changeMap.set(v,function ni(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}(v,S.oldSnap));else if("child_changed"===l&&"child_added"===V)this.changeMap.set(v,function Ui(f,c){return{type:"child_added",snapshotNode:c,childName:f}}(v,c.snapshotNode));else{if("child_changed"!==l||"child_changed"!==V)throw(0,P.g5)("Illegal combination of changes: "+c+" occurred after "+S);this.changeMap.set(v,Vt(v,c.snapshotNode,S.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const Co=new class on{getCompleteChild(c){return null}getChildAfterChild(c,l,v){return null}};class Wa{constructor(c,l,v=null){this.writes_=c,this.viewCache_=l,this.optCompleteServerCache_=v}getCompleteChild(c){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(c))return l.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new Q(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ys(this.writes_,c,v)}}getChildAfterChild(c,l,v){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hr(this.viewCache_),V=function sr(f,c,l,v,S,V){return function Er(f,c,l,v,S,V,H){let re;const Ae=Es(f.visibleWrites,c),He=Qt(Ae,or());if(null!=He)re=He;else{if(null==l)return[];re=Sn(Ae,l)}if(re=re.withIndex(H),re.isEmpty()||re.isLeafNode())return[];{const Rt=[],Pt=H.getCompare(),Ft=V?re.getReverseIteratorFrom(v,H):re.getIteratorFrom(v,H);let bn=Ft.getNext();for(;bn&&Rt.length<S;)0!==Pt(bn,v)&&Rt.push(bn),bn=Ft.getNext();return Rt}}(f.writeTree,f.treePath,c,l,v,S,V)}(this.writes_,S,l,1,v,c);return 0===V.length?null:V[0]}}function fa(f,c,l,v,S,V){const H=c.eventCache;if(null!=li(v,l))return c;{let re,Ae;if(Fn(l))if((0,P.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const He=Hr(c),Pt=wo(v,He instanceof Tt?He:Tt.EMPTY_NODE);re=f.filter.updateFullNode(c.eventCache.getNode(),Pt,V)}else{const He=Vn(v,Hr(c));re=f.filter.updateFullNode(c.eventCache.getNode(),He,V)}else{const He=On(l);if(".priority"===He){(0,P.hu)(1===We(l),"Can't have a priority with additional path components");const Rt=H.getNode();Ae=c.serverCache.getNode();const Pt=qo(v,l,Rt,Ae);re=null!=Pt?f.filter.updatePriority(Rt,Pt):H.getNode()}else{const Rt=ke(l);let Pt;if(H.isCompleteForChild(He)){Ae=c.serverCache.getNode();const Ft=qo(v,l,H.getNode(),Ae);Pt=null!=Ft?H.getNode().getImmediateChild(He).updateChild(Rt,Ft):H.getNode().getImmediateChild(He)}else Pt=Ys(v,He,c.serverCache);re=null!=Pt?f.filter.updateChild(H.getNode(),He,Pt,Rt,S,V):H.getNode()}}return Wr(c,re,H.isFullyInitialized()||Fn(l),f.filter.filtersNodes())}}function za(f,c,l,v,S,V,H,re){const Ae=c.serverCache;let He;const Rt=H?f.filter:f.filter.getIndexedFilter();if(Fn(l))He=Rt.updateFullNode(Ae.getNode(),v,null);else if(Rt.filtersNodes()&&!Ae.isFiltered()){const bn=Ae.getNode().updateChild(l,v);He=Rt.updateFullNode(Ae.getNode(),bn,null)}else{const bn=On(l);if(!Ae.isCompleteForPath(l)&&We(l)>1)return c;const Gn=ke(l),Ws=Ae.getNode().getImmediateChild(bn).updateChild(Gn,v);He=".priority"===bn?Rt.updatePriority(Ae.getNode(),Ws):Rt.updateChild(Ae.getNode(),bn,Ws,Gn,Co,null)}const Pt=Pr(c,He,Ae.isFullyInitialized()||Fn(l),Rt.filtersNodes());return fa(f,Pt,l,S,new Wa(S,Pt,V),re)}function pa(f,c,l,v,S,V,H){const re=c.eventCache;let Ae,He;const Rt=new Wa(S,c,V);if(Fn(l))He=f.filter.updateFullNode(c.eventCache.getNode(),v,H),Ae=Wr(c,He,!0,f.filter.filtersNodes());else{const Pt=On(l);if(".priority"===Pt)He=f.filter.updatePriority(c.eventCache.getNode(),v),Ae=Wr(c,He,re.isFullyInitialized(),re.isFiltered());else{const Ft=ke(l),bn=re.getNode().getImmediateChild(Pt);let Gn;if(Fn(Ft))Gn=v;else{const Zr=Rt.getCompleteChild(Pt);Gn=null!=Zr?".priority"===rt(Ft)&&Zr.getChild(un(Ft)).isEmpty()?Zr:Zr.updateChild(Ft,v):Tt.EMPTY_NODE}Ae=bn.equals(Gn)?c:Wr(c,f.filter.updateChild(re.getNode(),Pt,Gn,Ft,Rt,H),re.isFullyInitialized(),f.filter.filtersNodes())}}return Ae}function Bs(f,c){return f.eventCache.isCompleteForChild(c)}function mu(f,c,l){return l.foreach((v,S)=>{c=c.updateChild(v,S)}),c}function Nu(f,c,l,v,S,V,H,re){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let He,Ae=c;He=Fn(l)?v:new Or(null).setTree(l,v);const Rt=c.serverCache.getNode();return He.children.inorderTraversal((Pt,Ft)=>{if(Rt.hasChild(Pt)){const Gn=mu(0,c.serverCache.getNode().getImmediateChild(Pt),Ft);Ae=za(f,Ae,new rr(Pt),Gn,S,V,H,re)}}),He.children.inorderTraversal((Pt,Ft)=>{const bn=!c.serverCache.isCompleteForChild(Pt)&&null===Ft.value;if(!Rt.hasChild(Pt)&&!bn){const Zr=mu(0,c.serverCache.getNode().getImmediateChild(Pt),Ft);Ae=za(f,Ae,new rr(Pt),Zr,S,V,H,re)}}),Ae}function Za(f,c){const l=Hr(f.viewCache_);return l&&(f.query._queryParams.loadsAllData()||!Fn(c)&&!l.getImmediateChild(On(c)).isEmpty())?l.getChild(c):null}function oi(f,c,l,v){c.type===Ds.MERGE&&null!==c.source.queryId&&((0,P.hu)(Hr(f.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(pi(f.viewCache_),"Missing event cache, even though we have a server cache"));const S=f.viewCache_,V=function Ko(f,c,l,v,S){const V=new Ii;let H,re;if(l.type===Ds.OVERWRITE){const He=l;He.source.fromUser?H=pa(f,c,He.path,He.snap,v,S,V):((0,P.hu)(He.source.fromServer,"Unknown source."),re=He.source.tagged||c.serverCache.isFiltered()&&!Fn(He.path),H=za(f,c,He.path,He.snap,v,S,re,V))}else if(l.type===Ds.MERGE){const He=l;He.source.fromUser?H=function Ji(f,c,l,v,S,V,H){let re=c;return v.foreach((Ae,He)=>{const Rt=Mn(l,Ae);Bs(c,On(Rt))&&(re=pa(f,re,Rt,He,S,V,H))}),v.foreach((Ae,He)=>{const Rt=Mn(l,Ae);Bs(c,On(Rt))||(re=pa(f,re,Rt,He,S,V,H))}),re}(f,c,He.path,He.children,v,S,V):((0,P.hu)(He.source.fromServer,"Unknown source."),re=He.source.tagged||c.serverCache.isFiltered(),H=Nu(f,c,He.path,He.children,v,S,re,V))}else if(l.type===Ds.ACK_USER_WRITE){const He=l;H=He.revert?function yt(f,c,l,v,S,V){let H;if(null!=li(v,l))return c;{const re=new Wa(v,c,S),Ae=c.eventCache.getNode();let He;if(Fn(l)||".priority"===On(l)){let Rt;if(c.serverCache.isFullyInitialized())Rt=Vn(v,Hr(c));else{const Pt=c.serverCache.getNode();(0,P.hu)(Pt instanceof Tt,"serverChildren would be complete if leaf node"),Rt=wo(v,Pt)}He=f.filter.updateFullNode(Ae,Rt,V)}else{const Rt=On(l);let Pt=Ys(v,Rt,c.serverCache);null==Pt&&c.serverCache.isCompleteForChild(Rt)&&(Pt=Ae.getImmediateChild(Rt)),He=null!=Pt?f.filter.updateChild(Ae,Rt,Pt,ke(l),re,V):c.eventCache.getNode().hasChild(Rt)?f.filter.updateChild(Ae,Rt,Tt.EMPTY_NODE,ke(l),re,V):Ae,He.isEmpty()&&c.serverCache.isFullyInitialized()&&(H=Vn(v,Hr(c)),H.isLeafNode()&&(He=f.filter.updateFullNode(He,H,V)))}return H=c.serverCache.isFullyInitialized()||null!=li(v,or()),Wr(c,He,H,f.filter.filtersNodes())}}(f,c,He.path,v,S,V):function Io(f,c,l,v,S,V,H){if(null!=li(S,l))return c;const re=c.serverCache.isFiltered(),Ae=c.serverCache;if(null!=v.value){if(Fn(l)&&Ae.isFullyInitialized()||Ae.isCompleteForPath(l))return za(f,c,l,Ae.getNode().getChild(l),S,V,re,H);if(Fn(l)){let He=new Or(null);return Ae.getNode().forEachChild(Xr,(Rt,Pt)=>{He=He.set(new rr(Rt),Pt)}),Nu(f,c,l,He,S,V,re,H)}return c}{let He=new Or(null);return v.foreach((Rt,Pt)=>{const Ft=Mn(l,Rt);Ae.isCompleteForPath(Ft)&&(He=He.set(Rt,Ae.getNode().getChild(Ft)))}),Nu(f,c,l,He,S,V,re,H)}}(f,c,He.path,He.affectedTree,v,S,V)}else{if(l.type!==Ds.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+l.type);H=function Ra(f,c,l,v,S){const V=c.serverCache;return fa(f,Pr(c,V.getNode(),V.isFullyInitialized()||Fn(l),V.isFiltered()),l,v,Co,S)}(f,c,l.path,v,V)}const Ae=V.getChanges();return function fc(f,c,l){const v=c.eventCache;if(v.isFullyInitialized()){const S=v.getNode().isLeafNode()||v.getNode().isEmpty(),V=pi(f);(l.length>0||!f.eventCache.isFullyInitialized()||S&&!v.getNode().equals(V)||!v.getNode().getPriority().equals(V.getPriority()))&&l.push(function Mi(f){return{type:"value",snapshotNode:f}}(pi(c)))}}(c,H,Ae),{viewCache:H,changes:Ae}}(f.processor_,S,c,l,v);return function Ma(f,c){(0,P.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,V.viewCache),(0,P.hu)(V.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=V.viewCache,function Ju(f,c,l,v){return function It(f,c,l,v){const S=[],V=[];return c.forEach(H=>{"child_changed"===H.type&&f.index_.indexedValueChanged(H.oldSnap,H.snapshotNode)&&V.push(function Rr(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(H.childName,H.snapshotNode))}),At(f,S,"child_removed",c,v,l),At(f,S,"child_added",c,v,l),At(f,S,"child_moved",V,v,l),At(f,S,"child_changed",c,v,l),At(f,S,"value",c,v,l),S}(f.eventGenerator_,c,l,v?[v]:f.eventRegistrations_)}(f,V.changes,V.viewCache.eventCache.getNode(),null)}let Pa,Xs;function ai(f,c,l,v){const S=c.source.queryId;if(null!==S){const V=f.views.get(S);return(0,P.hu)(null!=V,"SyncTree gave us an op for an invalid query."),oi(V,c,l,v)}{let V=[];for(const H of f.views.values())V=V.concat(oi(H,c,l,v));return V}}function ws(f,c){let l=null;for(const v of f.views.values())l=l||Za(v,c);return l}class Fu{constructor(c){this.listenProvider_=c,this.syncPointTree_=new Or(null),this.pendingWriteTree_=function xa(){return{visibleWrites:zr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ka(f,c,l,v,S){return function hn(f,c,l,v,S){(0,P.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),f.allWrites.push({path:c,snap:l,writeId:v,visible:S}),S&&(f.visibleWrites=os(f.visibleWrites,c,l)),f.lastWriteId=v}(f.pendingWriteTree_,c,l,v,S),S?Me(f,new z({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,l)):[]}function xs(f,c,l=!1){const v=function Jt(f,c){for(let l=0;l<f.allWrites.length;l++){const v=f.allWrites[l];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function ji(f,c){const l=f.allWrites.findIndex(re=>re.writeId===c);(0,P.hu)(l>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[l];f.allWrites.splice(l,1);let S=v.visible,V=!1,H=f.allWrites.length-1;for(;S&&H>=0;){const re=f.allWrites[H];re.visible&&(H>=l&&Pu(re,v.path)?S=!1:Di(v.path,re.path)&&(V=!0)),H--}return!!S&&(V?(function Tl(f){f.visibleWrites=Zl(f.allWrites,ca,or()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=as(f.visibleWrites,v.path):Et(v.children,Ae=>{f.visibleWrites=as(f.visibleWrites,Mn(v.path,Ae))}),!0))}(f.pendingWriteTree_,c)){let V=new Or(null);return null!=v.snap?V=V.set(or(),!0):Et(v.children,H=>{V=V.set(new rr(H),!0)}),Me(f,new Sa(v.path,V,l))}return[]}function ho(f,c,l){return Me(f,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,l))}function Y(f,c,l){const S=f.pendingWriteTree_,V=f.syncPointTree_.findOnPath(c,(H,re)=>{const He=ws(re,$n(H,c));if(He)return He});return Zo(S,c,V,l,!0)}function Me(f,c){return bt(c,f.syncPointTree_,null,bl(f.pendingWriteTree_,or()))}function bt(f,c,l,v){if(Fn(f.path))return tn(f,c,l,v);{const S=c.get(or());null==l&&null!=S&&(l=ws(S,or()));let V=[];const H=On(f.path),re=f.operationForChild(H),Ae=c.children.get(H);if(Ae&&re){const He=l?l.getImmediateChild(H):null,Rt=Vr(v,H);V=V.concat(bt(re,Ae,He,Rt))}return S&&(V=V.concat(ai(S,f,v,l))),V}}function tn(f,c,l,v){const S=c.get(or());null==l&&null!=S&&(l=ws(S,or()));let V=[];return c.children.inorderTraversal((H,re)=>{const Ae=l?l.getImmediateChild(H):null,He=Vr(v,H),Rt=f.operationForChild(H);Rt&&(V=V.concat(tn(Rt,re,Ae,He)))}),S&&(V=V.concat(ai(S,f,v,l))),V}function Xi(f,c){return f.tagToQueryMap.get(c)}function es(f){const c=f.indexOf("$");return(0,P.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new rr(f.substr(0,c))}}function Ms(f,c,l){const v=f.syncPointTree_.get(c);return(0,P.hu)(v,"Missing sync point for query tag that we're tracking"),ai(v,l,bl(f.pendingWriteTree_,c),null)}class us{constructor(c){this.node_=c}getImmediateChild(c){const l=this.node_.getImmediateChild(c);return new us(l)}node(){return this.node_}}class Oi{constructor(c,l){this.syncTree_=c,this.path_=l}getImmediateChild(c){const l=Mn(this.path_,c);return new Oi(this.syncTree_,l)}node(){return Y(this.syncTree_,this.path_)}}const Dl=function(f,c,l){return f&&"object"==typeof f?((0,P.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?Al(f[".sv"],c,l):"object"==typeof f[".sv"]?bo(f[".sv"],c):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},Al=function(f,c,l){if("timestamp"===f)return l.timestamp;(0,P.hu)(!1,"Unexpected server value: "+f)},bo=function(f,c,l){f.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,P.hu)(!1,"Unexpected increment value: "+v);const S=c.node();if((0,P.hu)(null!==S&&typeof S<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return v;const H=S.getValue();return"number"!=typeof H?v:H+v},vu=function(f,c,l){return Ja(f,new us(c),l)};function Ja(f,c,l){const v=f.getPriority().val(),S=Dl(v,c.getImmediateChild(".priority"),l);let V;if(f.isLeafNode()){const H=f,re=Dl(H.getValue(),c,l);return re!==H.getValue()||S!==H.getPriority().val()?new Si(re,Ln(S)):f}{const H=f;return V=H,S!==H.getPriority().val()&&(V=V.updatePriority(new Si(S))),H.forEachChild(ei,(re,Ae)=>{const He=Ja(Ae,c.getImmediateChild(re),l);He!==Ae&&(V=V.updateImmediateChild(re,He))}),V}}class Eu{constructor(c="",l=null,v={children:{},childCount:0}){this.name=c,this.parent=l,this.node=v}}function _a(f,c){let l=c instanceof rr?c:new rr(c),v=f,S=On(l);for(;null!==S;){const V=(0,P.DV)(v.node.children,S)||{children:{},childCount:0};v=new Eu(S,v,V),l=ke(l),S=On(l)}return v}function ya(f){return f.node.value}function bi(f,c){f.node.value=c,Ql(f)}function Sl(f){return f.node.childCount>0}function wu(f,c){Et(f.node.children,(l,v)=>{c(new Eu(l,f,v))})}function ka(f,c,l,v){l&&!v&&c(f),wu(f,S=>{ka(S,c,!0,v)}),l&&v&&c(f)}function Lu(f){return new rr(null===f.parent?f.name:Lu(f.parent)+"/"+f.name)}function Ql(f){null!==f.parent&&function Cu(f,c,l){const v=function xl(f){return void 0===ya(f)&&!Sl(f)}(l),S=(0,P.r3)(f.node.children,c);v&&S?(delete f.node.children[c],f.node.childCount--,Ql(f)):!v&&!S&&(f.node.children[c]=l.node,f.node.childCount++,Ql(f))}(f.parent,f.name,f)}const fo=/[\[\].#$\/\u0000-\u001F\u007F]/,Uu=/[\[\].#$\u0000-\u001F\u007F]/,zc=10485760,tl=function(f){return"string"==typeof f&&0!==f.length&&!fo.test(f)},Xa=function(f,c,l){const v=l instanceof rr?new Hi(l,f):l;if(void 0===c)throw new Error(f+"contains undefined "+Zi(v));if("function"==typeof c)throw new Error(f+"contains a function "+Zi(v)+" with contents = "+c.toString());if(Pe(c))throw new Error(f+"contains "+c.toString()+" "+Zi(v));if("string"==typeof c&&c.length>zc/3&&(0,P.ug)(c)>zc)throw new Error(f+"contains a string greater than "+zc+" utf8 bytes "+Zi(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let S=!1,V=!1;if(Et(c,(H,re)=>{if(".value"===H)S=!0;else if(".priority"!==H&&".sv"!==H&&(V=!0,!tl(H)))throw new Error(f+" contains an invalid key ("+H+") "+Zi(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ki(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,P.ug)(c),Yi(f)})(v,H),Xa(f,re,v),function Ns(f){const c=f.parts_.pop();f.byteLength_-=(0,P.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),S&&V)throw new Error(f+' contains ".value" child '+Zi(v)+" in addition to actual children.")}},ol=function(f,c){const l=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!tl(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==l.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),function(f){return"string"==typeof f&&0!==f.length&&!Uu.test(f)}(f)}(l))throw new Error((0,P.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Jl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function to(f,c,l){(function Fa(f,c){let l=null;for(let v=0;v<c.length;v++){const S=c[v],V=S.getPath();null!==l&&!ys(V,l.path)&&(f.eventLists_.push(l),l=null),null===l&&(l={events:[],path:V}),l.events.push(S)}l&&f.eventLists_.push(l)})(f,l),function bu(f,c){f.recursionDepth_++;let l=!0;for(let v=0;v<f.eventLists_.length;v++){const S=f.eventLists_[v];S&&(c(S.path)?(Zc(f.eventLists_[v]),f.eventLists_[v]=null):l=!1)}l&&(f.eventLists_=[]),f.recursionDepth_--}(f,v=>Di(v,c)||Di(c,v))}function Zc(f){for(let c=0;c<f.events.length;c++){const l=f.events[c];if(null!==l){f.events[c]=null;const v=l.getEventRunner();Ht&&gt("event: "+l.toString()),Cr(v)}}}class eu{constructor(c,l,v,S){this.repoInfo_=c,this.forceRestClient_=l,this.authTokenProvider_=v,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bs(),this.transactionQueueTree_=new Eu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tc(f){const l=f.infoData_.getNode(new rr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function vi(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:tc(f)})}function Lo(f,c,l,v,S){f.dataUpdateCount++;const V=new rr(c);l=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,l):l;let H=[];if(S)if(v){const Ae=(0,P.UI)(l,He=>Ln(He));H=function k(f,c,l,v){const S=Xi(f,v);if(S){const V=es(S),H=V.path,re=V.queryId,Ae=$n(H,c),He=Or.fromObject(l);return Ms(f,H,new U(zo(re),Ae,He))}return[]}(f.serverSyncTree_,V,Ae,S)}else{const Ae=Ln(l);H=function T(f,c,l,v){const S=Xi(f,v);if(null!=S){const V=es(S),H=V.path,re=V.queryId,Ae=$n(H,c);return Ms(f,H,new z(zo(re),Ae,l))}return[]}(f.serverSyncTree_,V,Ae,S)}else if(v){const Ae=(0,P.UI)(l,He=>Ln(He));H=function mi(f,c,l){const v=Or.fromObject(l);return Me(f,new U({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,V,Ae)}else{const Ae=Ln(l);H=ho(f.serverSyncTree_,V,Ae)}let re=V;H.length>0&&(re=Un(f,V)),to(f.eventQueue_,re,H)}function Qo(f,c){La(f,"connected",c),!1===c&&function Jo(f){O(f,"onDisconnectEvents");const c=vi(f),l=bs();Ts(f.onDisconnect_,or(),(S,V)=>{const H=function(f,c,l,v){return Ja(c,new Oi(l,f),v)}(S,V,f.serverSyncTree_,c);ko(l,S,H)});let v=[];Ts(l,or(),(S,V)=>{v=v.concat(ho(f.serverSyncTree_,S,V));const H=function $u(f,c){const l=Lu(Ei(f,c)),v=_a(f.transactionQueueTree_,c);return function Yl(f,c,l){let v=l?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,S=>{Ea(f,S)}),Ea(f,v),ka(v,S=>{Ea(f,S)}),l}(f,S);Un(f,H)}),f.onDisconnect_=bs(),to(f.eventQueue_,or(),v)}(f)}function La(f,c,l){const v=new rr("/.info/"+c),S=Ln(l);f.infoData_.updateSnapshot(v,S);const V=ho(f.infoSyncTree_,v,S);to(f.eventQueue_,v,V)}function Vu(f){return f.nextWriteId_++}function O(f,...c){let l="";f.persistentConnection_&&(l=f.persistentConnection_.id+":"),gt(l,...c)}function Xe(f,c,l){return Y(f.serverSyncTree_,c,l)||Tt.EMPTY_NODE}function Lt(f,c=f.transactionQueueTree_){if(c||jr(f,c),ya(c)){const l=Uo(f,c);(0,P.hu)(l.length>0,"Sending zero length transaction queue"),l.every(S=>0===S.status)&&function yn(f,c,l){const v=l.map(He=>He.currentWriteId),S=Xe(f,c,v);let V=S;const H=S.hash();for(let He=0;He<l.length;He++){const Rt=l[He];(0,P.hu)(0===Rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Rt.status=1,Rt.retryCount++;const Pt=$n(c,Rt.path);V=V.updateChild(Pt,Rt.currentOutputSnapshotRaw)}const re=V.val(!0),Ae=c;f.server_.put(Ae.toString(),re,He=>{O(f,"transaction put response",{path:Ae.toString(),status:He});let Rt=[];if("ok"===He){const Pt=[];for(let Ft=0;Ft<l.length;Ft++)l[Ft].status=2,Rt=Rt.concat(xs(f.serverSyncTree_,l[Ft].currentWriteId)),l[Ft].onComplete&&Pt.push(()=>l[Ft].onComplete(null,!0,l[Ft].currentOutputSnapshotResolved)),l[Ft].unwatcher();jr(f,_a(f.transactionQueueTree_,c)),Lt(f,f.transactionQueueTree_),to(f.eventQueue_,c,Rt);for(let Ft=0;Ft<Pt.length;Ft++)Cr(Pt[Ft])}else{if("datastale"===He)for(let Pt=0;Pt<l.length;Pt++)l[Pt].status=3===l[Pt].status?4:0;else{se("transaction at "+Ae.toString()+" failed: "+He);for(let Pt=0;Pt<l.length;Pt++)l[Pt].status=4,l[Pt].abortReason=He}Un(f,c)}},H)}(f,Lu(c),l)}else Sl(c)&&wu(c,l=>{Lt(f,l)})}function Un(f,c){const l=Ei(f,c),v=Lu(l);return function wr(f,c,l){if(0===c.length)return;const v=[];let S=[];const H=c.filter(re=>0===re.status).map(re=>re.currentWriteId);for(let re=0;re<c.length;re++){const Ae=c[re],He=$n(l,Ae.path);let Pt,Rt=!1;if((0,P.hu)(null!==He,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ae.status)Rt=!0,Pt=Ae.abortReason,S=S.concat(xs(f.serverSyncTree_,Ae.currentWriteId,!0));else if(0===Ae.status)if(Ae.retryCount>=25)Rt=!0,Pt="maxretry",S=S.concat(xs(f.serverSyncTree_,Ae.currentWriteId,!0));else{const Ft=Xe(f,Ae.path,H);Ae.currentInputSnapshot=Ft;const bn=c[re].update(Ft.val());if(void 0!==bn){Xa("transaction failed: Data returned ",bn,Ae.path);let Gn=Ln(bn);"object"==typeof bn&&null!=bn&&(0,P.r3)(bn,".priority")||(Gn=Gn.updatePriority(Ft.getPriority()));const Ws=Ae.currentWriteId,su=vi(f),ml=vu(Gn,Ft,su);Ae.currentOutputSnapshotRaw=Gn,Ae.currentOutputSnapshotResolved=ml,Ae.currentWriteId=Vu(f),H.splice(H.indexOf(Ws),1),S=S.concat(Ka(f.serverSyncTree_,Ae.path,ml,Ae.currentWriteId,Ae.applyLocally)),S=S.concat(xs(f.serverSyncTree_,Ws,!0))}else Rt=!0,Pt="nodata",S=S.concat(xs(f.serverSyncTree_,Ae.currentWriteId,!0))}to(f.eventQueue_,l,S),S=[],Rt&&(c[re].status=2,setTimeout(c[re].unwatcher,Math.floor(0)),c[re].onComplete&&v.push("nodata"===Pt?()=>c[re].onComplete(null,!1,c[re].currentInputSnapshot):()=>c[re].onComplete(new Error(Pt),!1,null)))}jr(f,f.transactionQueueTree_);for(let re=0;re<v.length;re++)Cr(v[re]);Lt(f,f.transactionQueueTree_)}(f,Uo(f,l),v),v}function Ei(f,c){let l,v=f.transactionQueueTree_;for(l=On(c);null!==l&&void 0===ya(v);)v=_a(v,l),l=On(c=ke(c));return v}function Uo(f,c){const l=[];return di(f,c,l),l.sort((v,S)=>v.order-S.order),l}function di(f,c,l){const v=ya(c);if(v)for(let S=0;S<v.length;S++)l.push(v[S]);wu(c,S=>{di(f,S,l)})}function jr(f,c){const l=ya(c);if(l){let v=0;for(let S=0;S<l.length;S++)2!==l[S].status&&(l[v]=l[S],v++);l.length=v,bi(c,l.length>0?l:void 0)}wu(c,v=>{jr(f,v)})}function Ea(f,c){const l=ya(c);if(l){const v=[];let S=[],V=-1;for(let H=0;H<l.length;H++)3===l[H].status||(1===l[H].status?((0,P.hu)(V===H-1,"All SENT items should be at beginning of queue."),V=H,l[H].status=3,l[H].abortReason="set"):((0,P.hu)(0===l[H].status,"Unexpected transaction status in abort"),l[H].unwatcher(),S=S.concat(xs(f.serverSyncTree_,l[H].currentWriteId,!0)),l[H].onComplete&&v.push(l[H].onComplete.bind(null,new Error("set"),!1,null))));-1===V?bi(c,void 0):l.length=V+1,to(f.eventQueue_,Lu(c),S);for(let H=0;H<v.length;H++)Cr(v[H])}}const $i=function(f,c){const l=yc(f),v=l.namespace;return"firebase.com"===l.domain&&ee(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==l.domain&&ee("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&se("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _e(l.host,l.secure,v,"ws"===l.scheme||"wss"===l.scheme,c,"",v!==l.subdomain),path:new rr(l.pathString)}},yc=function(f){let c="",l="",v="",S="",V="",H=!0,re="https",Ae=443;if("string"==typeof f){let He=f.indexOf("//");He>=0&&(re=f.substring(0,He-1),f=f.substring(He+2));let Rt=f.indexOf("/");-1===Rt&&(Rt=f.length);let Pt=f.indexOf("?");-1===Pt&&(Pt=f.length),c=f.substring(0,Math.min(Rt,Pt)),Rt<Pt&&(S=function ps(f){let c="";const l=f.split("/");for(let v=0;v<l.length;v++)if(l[v].length>0){let S=l[v];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch{}c+="/"+S}return c}(f.substring(Rt,Pt)));const Ft=function ul(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const l of f.split("&")){if(0===l.length)continue;const v=l.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):se(`Invalid query segment '${l}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,Pt)));He=c.indexOf(":"),He>=0?(H="https"===re||"wss"===re,Ae=parseInt(c.substring(He+1),10)):He=c.length;const bn=c.slice(0,He);if("localhost"===bn.toLowerCase())l="localhost";else if(bn.split(".").length<=2)l=bn;else{const Gn=c.indexOf(".");v=c.substring(0,Gn).toLowerCase(),l=c.substring(Gn+1),V=v}"ns"in Ft&&(V=Ft.ns)}return{host:c,port:Ae,domain:l,subdomain:v,secure:H,scheme:re,pathString:S,namespace:V}};class gs{constructor(c,l,v,S){this._repo=c,this._path=l,this._queryParams=v,this._orderByCalled=S}get key(){return Fn(this._path)?null:rt(this._path)}get ref(){return new ea(this._repo,this._path)}get _queryIdentifier(){const c=Ls(this._queryParams),l=gn(c);return"{}"===l?"default":l}get _queryObject(){return Ls(this._queryParams)}isEqual(c){if(!((c=(0,P.m9)(c))instanceof gs))return!1;const l=this._repo===c._repo,v=ys(this._path,c._path);return l&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Nt(f){let c="";for(let l=f.pieceNum_;l<f.pieces_.length;l++)""!==f.pieces_[l]&&(c+="/"+encodeURIComponent(String(f.pieces_[l])));return c||"/"}(this._path)}}class ea extends gs{constructor(c,l){super(c,l,new Fs,!1)}get parent(){const c=un(this._path);return null===c?null:new ea(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}(function Wc(f){(0,P.hu)(!Pa,"__referenceConstructor has already been defined"),Pa=f})(ea),function gi(f){(0,P.hu)(!Xs,"__referenceConstructor has already been defined"),Xs=f}(ea);const Ll={};class Bo{constructor(c,l){this._repoInternal=c,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ec(f,c,l){if(f.stats_=zt(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Us(f.repoInfo_,(v,S,V,H)=>{Lo(f,v,S,V,H)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Qo(f,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(l)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new so(f.repoInfo_,c,(v,S,V,H)=>{Lo(f,v,S,V,H)},v=>{Qo(f,v)},v=>{!function Rl(f,c){Et(c,(l,v)=>{La(f,l,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,l),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function Jn(f,c){const l=f.toString();return Qn[l]||(Qn[l]=c()),Qn[l]}(f.repoInfo_,()=>new la(f.stats_,f.server_)),f.infoData_=new oa,f.infoSyncTree_=new Fu({startListening:(v,S,V,H)=>{let re=[];const Ae=f.infoData_.getNode(v._path);return Ae.isEmpty()||(re=ho(f.infoSyncTree_,v._path,Ae),setTimeout(()=>{H("ok")},0)),re},stopListening:()=>{}}),La(f,"connected",!1),f.serverSyncTree_=new Fu({startListening:(v,S,V,H)=>(f.server_.listen(v,V,S,(re,Ae)=>{const He=H(re,Ae);to(f.eventQueue_,v._path,He)}),[]),stopListening:(v,S)=>{f.server_.unlisten(v,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ea(this._repo,or())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Dc(f,c){const l=Ll[c];(!l||l[f.key]!==f)&&ee(`Database ${c}(${f.repoInfo_}) has already been deleted.`),function _(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete l[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&ee("Cannot call "+c+" on a deleted database.")}}function sh(f=(0,h.getApp)(),c){return(0,h._getProvider)(f,"database").getImmediate({identifier:c})}so.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},so.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Id(f){(function tt(f){be=f})(h.SDK_VERSION),(0,h._registerComponent)(new Z.wA("database",(c,{instanceIdentifier:l})=>function Qc(f,c,l,v,S){let V=v||f.options.databaseURL;void 0===V&&(f.options.projectId||ee("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",f.options.projectId),V=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ae,He,H=$i(V,S),re=H.repoInfo;typeof process<"u"&&process.env&&(He=process.env.FIREBASE_DATABASE_EMULATOR_HOST),He?(Ae=!0,V=`http://${He}?ns=${re.namespace}`,H=$i(V,S),re=H.repoInfo):Ae=!H.repoInfo.secure;const Rt=S&&Ae?new Xn(Xn.OWNER):new dn(f.name,f.options,c);ol("Invalid Firebase Database URL",H),Fn(H.path)||ee("Database URL must point to the root of a Firebase Database (not including a child path).");const Pt=function Cd(f,c,l,v){let S=Ll[c.name];S||(S={},Ll[c.name]=S);let V=S[f.toURLString()];return V&&ee("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),V=new eu(f,!1,l,v),S[f.toURLString()]=V,V}(re,f,Rt,new Mr(f.name,l));return new Bo(Pt,f)}(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,h.registerVersion)(Le,"0.13.6",f),(0,h.registerVersion)(Le,"0.13.6","esm2017")}()},2375:(an,ht,j)=>{j.d(ht,{KL:()=>pe,Gb:()=>Ct});var C=j(5861),Z=(j(2833),j(4859)),P=j(8766),de=j(2090),Le=j(9681);const qe="/firebase-messaging-sw.js",be="/firebase-cloud-messaging-push-scope",tt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fe="google.c.a.c_id",Ce="google.c.a.c_l",st="google.c.a.ts",ot="google.c.a.e";var Ot=(()=>{return(he=Ot||(Ot={})).PUSH_RECEIVED="push-received",he.NOTIFICATION_CLICKED="notification-clicked",Ot;var he})();function at(he){const ne=new Uint8Array(he);return btoa(String.fromCharCode(...ne)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function it(he){const W=(he+"=".repeat((4-he.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),te=atob(W),Ee=new Uint8Array(te.length);for(let oe=0;oe<te.length;++oe)Ee[oe]=te.charCodeAt(oe);return Ee}const Ht="fcm_token_details_db",xe="fcm_token_object_Store";function gt(he){return Be.apply(this,arguments)}function Be(){return Be=(0,C.Z)(function*(he){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Ht))return null;let ne=null;return(yield(0,P.X3)(Ht,5,{upgrade:(te=(0,C.Z)(function*(Ee,oe,Ze,pt){var Kt;if(oe<2||!Ee.objectStoreNames.contains(xe))return;const In=pt.objectStore(xe),kn=yield In.index("fcmSenderId").get(he);if(yield In.clear(),kn)if(2===oe){const pn=kn;if(!pn.auth||!pn.p256dh||!pn.endpoint)return;ne={token:pn.fcmToken,createTime:null!==(Kt=pn.createTime)&&void 0!==Kt?Kt:Date.now(),subscriptionOptions:{auth:pn.auth,p256dh:pn.p256dh,endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:"string"==typeof pn.vapidKey?pn.vapidKey:at(pn.vapidKey)}}}else if(3===oe){const pn=kn;ne={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:at(pn.auth),p256dh:at(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:at(pn.vapidKey)}}}else if(4===oe){const pn=kn;ne={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:at(pn.auth),p256dh:at(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:at(pn.vapidKey)}}}}),function(oe,Ze,pt,Kt){return te.apply(this,arguments)})})).close(),yield(0,P.Lj)(Ht),yield(0,P.Lj)("fcm_vapid_details_db"),yield(0,P.Lj)("undefined"),ut(ne)?ne:null;var te}),Be.apply(this,arguments)}function ut(he){if(!he||!he.subscriptionOptions)return!1;const{subscriptionOptions:ne}=he;return"number"==typeof he.createTime&&he.createTime>0&&"string"==typeof he.token&&he.token.length>0&&"string"==typeof ne.auth&&ne.auth.length>0&&"string"==typeof ne.p256dh&&ne.p256dh.length>0&&"string"==typeof ne.endpoint&&ne.endpoint.length>0&&"string"==typeof ne.swScope&&ne.swScope.length>0&&"string"==typeof ne.vapidKey&&ne.vapidKey.length>0}const ze="firebase-messaging-store";let Pe=null;function Ue(){return Pe||(Pe=(0,P.X3)("firebase-messaging-database",1,{upgrade:(he,ne)=>{0===ne&&he.createObjectStore(ze)}})),Pe}function Ke(he){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,C.Z)(function*(he){const ne=xn(he),te=yield(yield Ue()).transaction(ze).objectStore(ze).get(ne);if(te)return te;{const Ee=yield gt(he.appConfig.senderId);if(Ee)return yield Mt(he,Ee),Ee}})).apply(this,arguments)}function Mt(he,ne){return kt.apply(this,arguments)}function kt(){return(kt=(0,C.Z)(function*(he,ne){const W=xn(he),Ee=(yield Ue()).transaction(ze,"readwrite");return yield Ee.objectStore(ze).put(ne,W),yield Ee.done,ne})).apply(this,arguments)}function Bt(he){return gn.apply(this,arguments)}function gn(){return(gn=(0,C.Z)(function*(he){const ne=xn(he),te=(yield Ue()).transaction(ze,"readwrite");yield te.objectStore(ze).delete(ne),yield te.done})).apply(this,arguments)}function xn({appConfig:he}){return he.appId}const nn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zn(he,ne){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,C.Z)(function*(he,ne){var W;const te=yield Cr(he),Ee=lr(ne),oe={method:"POST",headers:te,body:JSON.stringify(Ee)};let Ze;try{Ze=yield(yield fetch(dr(he.appConfig),oe)).json()}catch(pt){throw nn.create("token-subscribe-failed",{errorInfo:null===(W=pt)||void 0===W?void 0:W.toString()})}if(Ze.error)throw nn.create("token-subscribe-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw nn.create("token-subscribe-no-token");return Ze.token})).apply(this,arguments)}function Kn(he,ne){return jn.apply(this,arguments)}function jn(){return(jn=(0,C.Z)(function*(he,ne){var W;const te=yield Cr(he),Ee=lr(ne.subscriptionOptions),oe={method:"PATCH",headers:te,body:JSON.stringify(Ee)};let Ze;try{Ze=yield(yield fetch(`${dr(he.appConfig)}/${ne.token}`,oe)).json()}catch(pt){throw nn.create("token-update-failed",{errorInfo:null===(W=pt)||void 0===W?void 0:W.toString()})}if(Ze.error)throw nn.create("token-update-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw nn.create("token-update-no-token");return Ze.token})).apply(this,arguments)}function mn(he,ne){return ir.apply(this,arguments)}function ir(){return(ir=(0,C.Z)(function*(he,ne){var W;const Ee={method:"DELETE",headers:yield Cr(he)};try{const Ze=yield(yield fetch(`${dr(he.appConfig)}/${ne}`,Ee)).json();if(Ze.error)throw nn.create("token-unsubscribe-failed",{errorInfo:Ze.error.message})}catch(oe){throw nn.create("token-unsubscribe-failed",{errorInfo:null===(W=oe)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function dr({projectId:he}){return`https://fcmregistrations.googleapis.com/v1/projects/${he}/registrations`}function Cr(he){return ur.apply(this,arguments)}function ur(){return(ur=(0,C.Z)(function*({appConfig:he,installations:ne}){const W=yield ne.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":he.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function lr({p256dh:he,auth:ne,endpoint:W,vapidKey:te}){const Ee={web:{endpoint:W,auth:ne,p256dh:he}};return te!==tt&&(Ee.web.applicationPubKey=te),Ee}const Mr=6048e5;function dn(he){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,C.Z)(function*(he){const ne=yield fr(he.swRegistration,he.vapidKey),W={vapidKey:he.vapidKey,swScope:he.swRegistration.scope,endpoint:ne.endpoint,auth:at(ne.getKey("auth")),p256dh:at(ne.getKey("p256dh"))},te=yield Ke(he.firebaseDependencies);if(te){if(vr(te.subscriptionOptions,W))return Date.now()>=te.createTime+Mr?en(he,{token:te.token,createTime:Date.now(),subscriptionOptions:W}):te.token;try{yield mn(he.firebaseDependencies,te.token)}catch(Ee){console.warn(Ee)}return Yn(he.firebaseDependencies,W)}return Yn(he.firebaseDependencies,W)})).apply(this,arguments)}function Lr(he){return mr.apply(this,arguments)}function mr(){return(mr=(0,C.Z)(function*(he){const ne=yield Ke(he.firebaseDependencies);ne&&(yield mn(he.firebaseDependencies,ne.token),yield Bt(he.firebaseDependencies));const W=yield he.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function en(he,ne){return hr.apply(this,arguments)}function hr(){return(hr=(0,C.Z)(function*(he,ne){try{const W=yield Kn(he.firebaseDependencies,ne),te=Object.assign(Object.assign({},ne),{token:W,createTime:Date.now()});return yield Mt(he.firebaseDependencies,te),W}catch(W){throw yield Lr(he),W}})).apply(this,arguments)}function Yn(he,ne){return er.apply(this,arguments)}function er(){return(er=(0,C.Z)(function*(he,ne){const te={token:yield zn(he,ne),createTime:Date.now(),subscriptionOptions:ne};return yield Mt(he,te),te.token})).apply(this,arguments)}function fr(he,ne){return ri.apply(this,arguments)}function ri(){return(ri=(0,C.Z)(function*(he,ne){return(yield he.pushManager.getSubscription())||he.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:it(ne)})})).apply(this,arguments)}function vr(he,ne){return ne.vapidKey===he.vapidKey&&ne.endpoint===he.endpoint&&ne.auth===he.auth&&ne.p256dh===he.p256dh}function dt(he){const ne={from:he.from,collapseKey:he.collapse_key,messageId:he.fcmMessageId};return function Ie(he,ne){if(!ne.notification)return;he.notification={};const W=ne.notification.title;W&&(he.notification.title=W);const te=ne.notification.body;te&&(he.notification.body=te);const Ee=ne.notification.image;Ee&&(he.notification.image=Ee)}(ne,he),function _e(he,ne){!ne.data||(he.data=ne.data)}(ne,he),function mt(he,ne){var W,te,Ee,oe,Ze;if(!(ne.fcmOptions||null!==(W=ne.notification)&&void 0!==W&&W.click_action))return;he.fcmOptions={};const pt=null!==(Ee=null===(te=ne.fcmOptions)||void 0===te?void 0:te.link)&&void 0!==Ee?Ee:null===(oe=ne.notification)||void 0===oe?void 0:oe.click_action;pt&&(he.fcmOptions.link=pt);const Kt=null===(Ze=ne.fcmOptions)||void 0===Ze?void 0:Ze.analytics_label;Kt&&(he.fcmOptions.analyticsLabel=Kt)}(ne,he),ne}function ct(he){return"object"==typeof he&&!!he&&fe in he}function rn(he,ne){const W=[];for(let te=0;te<he.length;te++)W.push(he.charAt(te)),te<ne.length&&W.push(ne.charAt(te));return W.join("")}function Qn(he){return nn.create("missing-app-config-values",{valueName:he})}rn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zt{constructor(ne,W,te){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ee=function Dn(he){if(!he||!he.options)throw Qn("App Configuration Object");if(!he.name)throw Qn("App Name");const ne=["projectId","apiKey","appId","messagingSenderId"],{options:W}=he;for(const te of ne)if(!W[te])throw Qn(te);return{appName:he.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(ne);this.firebaseDependencies={app:ne,appConfig:Ee,installations:W,analyticsProvider:te}}_delete(){return Promise.resolve()}}function Jn(he){return vn.apply(this,arguments)}function vn(){return(vn=(0,C.Z)(function*(he){var ne;try{he.swRegistration=yield navigator.serviceWorker.register(qe,{scope:be}),he.swRegistration.update().catch(()=>{})}catch(W){throw nn.create("failed-service-worker-registration",{browserErrorMessage:null===(ne=W)||void 0===ne?void 0:ne.message})}})).apply(this,arguments)}function br(he,ne){return wn.apply(this,arguments)}function wn(){return(wn=(0,C.Z)(function*(he,ne){if(!ne&&!he.swRegistration&&(yield Jn(he)),ne||!he.swRegistration){if(!(ne instanceof ServiceWorkerRegistration))throw nn.create("invalid-sw-registration");he.swRegistration=ne}})).apply(this,arguments)}function Te(he,ne){return le.apply(this,arguments)}function le(){return(le=(0,C.Z)(function*(he,ne){ne?he.vapidKey=ne:he.vapidKey||(he.vapidKey=tt)})).apply(this,arguments)}function Oe(){return(Oe=(0,C.Z)(function*(he,ne){if(!navigator)throw nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nn.create("permission-blocked");return yield Te(he,ne?.vapidKey),yield br(he,ne?.serviceWorkerRegistration),dn(he)})).apply(this,arguments)}function Re(he,ne,W){return wt.apply(this,arguments)}function wt(){return(wt=(0,C.Z)(function*(he,ne,W){const te=Dt(ne);(yield he.firebaseDependencies.analyticsProvider.get()).logEvent(te,{message_id:W[fe],message_name:W[Ce],message_time:W[st],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Dt(he){switch(he){case Ot.NOTIFICATION_CLICKED:return"notification_open";case Ot.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bn(){return(Bn=(0,C.Z)(function*(he,ne){const W=ne.data;if(!W.isFirebaseMessaging)return;he.onMessageHandler&&W.messageType===Ot.PUSH_RECEIVED&&("function"==typeof he.onMessageHandler?he.onMessageHandler(dt(W)):he.onMessageHandler.next(dt(W)));const te=W.data;ct(te)&&"1"===te[ot]&&(yield Re(he,W.messageType,te))})).apply(this,arguments)}const Zn="@firebase/messaging",Je=he=>{const ne=new zt(he.getProvider("app").getImmediate(),he.getProvider("installations-internal").getImmediate(),he.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Yt(he,ne){return Bn.apply(this,arguments)}(ne,W)),ne},Se=he=>{const ne=he.getProvider("messaging").getImmediate();return{getToken:te=>function we(he,ne){return Oe.apply(this,arguments)}(ne,te)}};function Ct(){return jt.apply(this,arguments)}function jt(){return(jt=(0,C.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function pe(he=(0,Le.getApp)()){return Ct().then(ne=>{if(!ne)throw nn.create("unsupported-browser")},ne=>{throw nn.create("indexed-db-unsupported")}),(0,Le._getProvider)((0,de.m9)(he),"messaging").getImmediate()}!function Fe(){(0,Le._registerComponent)(new Z.wA("messaging",Je,"PUBLIC")),(0,Le._registerComponent)(new Z.wA("messaging-internal",Se,"PRIVATE")),(0,Le.registerVersion)(Zn,"0.9.16"),(0,Le.registerVersion)(Zn,"0.9.16","esm2017")}()},9751:(an,ht,j)=>{j.d(ht,{y:()=>be});var C=j(2961),h=j(727),Z=j(8822),P=j(9635),de=j(2416),Le=j(576),qe=j(2806);let be=(()=>{class Ce{constructor(ot){ot&&(this._subscribe=ot)}lift(ot){const nt=new Ce;return nt.source=this,nt.operator=ot,nt}subscribe(ot,nt,Ot){const at=function fe(Ce){return Ce&&Ce instanceof C.Lv||function ie(Ce){return Ce&&(0,Le.m)(Ce.next)&&(0,Le.m)(Ce.error)&&(0,Le.m)(Ce.complete)}(Ce)&&(0,h.Nn)(Ce)}(ot)?ot:new C.Hp(ot,nt,Ot);return(0,qe.x)(()=>{const{operator:it,source:Ht}=this;at.add(it?it.call(at,Ht):Ht?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(ot){try{return this._subscribe(ot)}catch(nt){ot.error(nt)}}forEach(ot,nt){return new(nt=tt(nt))((Ot,at)=>{const it=new C.Hp({next:Ht=>{try{ot(Ht)}catch(qt){at(qt),it.unsubscribe()}},error:at,complete:Ot});this.subscribe(it)})}_subscribe(ot){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(ot)}[Z.L](){return this}pipe(...ot){return(0,P.U)(ot)(this)}toPromise(ot){return new(ot=tt(ot))((nt,Ot)=>{let at;this.subscribe(it=>at=it,it=>Ot(it),()=>nt(at))})}}return Ce.create=st=>new Ce(st),Ce})();function tt(Ce){var st;return null!==(st=Ce??de.v.Promise)&&void 0!==st?st:Promise}},7579:(an,ht,j)=>{j.d(ht,{x:()=>qe});var C=j(9751),h=j(727);const P=(0,j(3888).d)(tt=>function(){tt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=j(8737),Le=j(2806);let qe=(()=>{class tt extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const Ce=new be(this,this);return Ce.operator=fe,Ce}_throwIfClosed(){if(this.closed)throw new P}next(fe){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(fe)}})}error(fe){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(fe)}})}complete(){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:Ce,isStopped:st,observers:ot}=this;return Ce||st?h.Lc:(this.currentObservers=null,ot.push(fe),new h.w0(()=>{this.currentObservers=null,(0,de.P)(ot,fe)}))}_checkFinalizedStatuses(fe){const{hasError:Ce,thrownError:st,isStopped:ot}=this;Ce?fe.error(st):ot&&fe.complete()}asObservable(){const fe=new C.y;return fe.source=this,fe}}return tt.create=(ie,fe)=>new be(ie,fe),tt})();class be extends qe{constructor(ie,fe){super(),this.destination=ie,this.source=fe}next(ie){var fe,Ce;null===(Ce=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===Ce||Ce.call(fe,ie)}error(ie){var fe,Ce;null===(Ce=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===Ce||Ce.call(fe,ie)}complete(){var ie,fe;null===(fe=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===fe||fe.call(ie)}_subscribe(ie){var fe,Ce;return null!==(Ce=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ie))&&void 0!==Ce?Ce:h.Lc}}},2961:(an,ht,j)=>{j.d(ht,{Hp:()=>Ot,Lv:()=>Ce});var C=j(576),h=j(727),Z=j(2416),P=j(7849);function de(){}const Le=tt("C",void 0,void 0);function tt(xe,gt,Be){return{kind:xe,value:gt,error:Be}}var ie=j(3410),fe=j(2806);class Ce extends h.w0{constructor(gt){super(),this.isStopped=!1,gt?(this.destination=gt,(0,h.Nn)(gt)&&gt.add(this)):this.destination=qt}static create(gt,Be,ut){return new Ot(gt,Be,ut)}next(gt){this.isStopped?Ht(function be(xe){return tt("N",xe,void 0)}(gt),this):this._next(gt)}error(gt){this.isStopped?Ht(function qe(xe){return tt("E",void 0,xe)}(gt),this):(this.isStopped=!0,this._error(gt))}complete(){this.isStopped?Ht(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(gt){this.destination.next(gt)}_error(gt){try{this.destination.error(gt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function ot(xe,gt){return st.call(xe,gt)}class nt{constructor(gt){this.partialObserver=gt}next(gt){const{partialObserver:Be}=this;if(Be.next)try{Be.next(gt)}catch(ut){at(ut)}}error(gt){const{partialObserver:Be}=this;if(Be.error)try{Be.error(gt)}catch(ut){at(ut)}else at(gt)}complete(){const{partialObserver:gt}=this;if(gt.complete)try{gt.complete()}catch(Be){at(Be)}}}class Ot extends Ce{constructor(gt,Be,ut){let ee;if(super(),(0,C.m)(gt)||!gt)ee={next:gt??void 0,error:Be??void 0,complete:ut??void 0};else{let se;this&&Z.v.useDeprecatedNextContext?(se=Object.create(gt),se.unsubscribe=()=>this.unsubscribe(),ee={next:gt.next&&ot(gt.next,se),error:gt.error&&ot(gt.error,se),complete:gt.complete&&ot(gt.complete,se)}):ee=gt}this.destination=new nt(ee)}}function at(xe){Z.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(xe):(0,P.h)(xe)}function Ht(xe,gt){const{onStoppedNotification:Be}=Z.v;Be&&ie.z.setTimeout(()=>Be(xe,gt))}const qt={closed:!0,next:de,error:function it(xe){throw xe},complete:de}},727:(an,ht,j)=>{j.d(ht,{Lc:()=>Le,w0:()=>de,Nn:()=>qe});var C=j(576);const Z=(0,j(3888).d)(tt=>function(fe){tt(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Ce,st)=>`${st+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var P=j(8737);class de{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const ot of fe)ot.remove(this);else fe.remove(this);const{initialTeardown:Ce}=this;if((0,C.m)(Ce))try{Ce()}catch(ot){ie=ot instanceof Z?ot.errors:[ot]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const ot of st)try{be(ot)}catch(nt){ie=ie??[],nt instanceof Z?ie=[...ie,...nt.errors]:ie.push(nt)}}if(ie)throw new Z(ie)}}add(ie){var fe;if(ie&&ie!==this)if(this.closed)be(ie);else{if(ie instanceof de){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(ie)}}_hasParent(ie){const{_parentage:fe}=this;return fe===ie||Array.isArray(fe)&&fe.includes(ie)}_addParent(ie){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(ie),fe):fe?[fe,ie]:ie}_removeParent(ie){const{_parentage:fe}=this;fe===ie?this._parentage=null:Array.isArray(fe)&&(0,P.P)(fe,ie)}remove(ie){const{_finalizers:fe}=this;fe&&(0,P.P)(fe,ie),ie instanceof de&&ie._removeParent(this)}}de.EMPTY=(()=>{const tt=new de;return tt.closed=!0,tt})();const Le=de.EMPTY;function qe(tt){return tt instanceof de||tt&&"closed"in tt&&(0,C.m)(tt.remove)&&(0,C.m)(tt.add)&&(0,C.m)(tt.unsubscribe)}function be(tt){(0,C.m)(tt)?tt():tt.unsubscribe()}},2416:(an,ht,j)=>{j.d(ht,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(an,ht,j)=>{j.d(ht,{z:()=>de});var C=j(8189),Z=j(7669),P=j(8996);function de(...Le){return function h(){return(0,C.J)(1)}()((0,P.D)(Le,(0,Z.yG)(Le)))}},515:(an,ht,j)=>{j.d(ht,{E:()=>h});const h=new(j(9751).y)(de=>de.complete())},8996:(an,ht,j)=>{j.d(ht,{D:()=>gt});var C=j(8421),h=j(5363),Z=j(9468),Le=j(9751),be=j(2202),tt=j(576),ie=j(9672);function Ce(Be,ut){if(!Be)throw new Error("Iterable cannot be null");return new Le.y(ee=>{(0,ie.f)(ee,ut,()=>{const se=Be[Symbol.asyncIterator]();(0,ie.f)(ee,ut,()=>{se.next().then(ze=>{ze.done?ee.complete():ee.next(ze.value)})},0,!0)})})}var st=j(3670),ot=j(8239),nt=j(1144),Ot=j(6495),at=j(2206),it=j(4532),Ht=j(3260);function gt(Be,ut){return ut?function xe(Be,ut){if(null!=Be){if((0,st.c)(Be))return function P(Be,ut){return(0,C.Xf)(Be).pipe((0,Z.R)(ut),(0,h.Q)(ut))}(Be,ut);if((0,nt.z)(Be))return function qe(Be,ut){return new Le.y(ee=>{let se=0;return ut.schedule(function(){se===Be.length?ee.complete():(ee.next(Be[se++]),ee.closed||this.schedule())})})}(Be,ut);if((0,ot.t)(Be))return function de(Be,ut){return(0,C.Xf)(Be).pipe((0,Z.R)(ut),(0,h.Q)(ut))}(Be,ut);if((0,at.D)(Be))return Ce(Be,ut);if((0,Ot.T)(Be))return function fe(Be,ut){return new Le.y(ee=>{let se;return(0,ie.f)(ee,ut,()=>{se=Be[be.h](),(0,ie.f)(ee,ut,()=>{let ze,Pe;try{({value:ze,done:Pe}=se.next())}catch(Ue){return void ee.error(Ue)}Pe?ee.complete():ee.next(ze)},0,!0)}),()=>(0,tt.m)(se?.return)&&se.return()})}(Be,ut);if((0,Ht.L)(Be))return function qt(Be,ut){return Ce((0,Ht.Q)(Be),ut)}(Be,ut)}throw(0,it.z)(Be)}(Be,ut):(0,C.Xf)(Be)}},8421:(an,ht,j)=>{j.d(ht,{Xf:()=>st});var C=j(655),h=j(1144),Z=j(8239),P=j(9751),de=j(3670),Le=j(2206),qe=j(4532),be=j(6495),tt=j(3260),ie=j(576),fe=j(7849),Ce=j(8822);function st(xe){if(xe instanceof P.y)return xe;if(null!=xe){if((0,de.c)(xe))return function ot(xe){return new P.y(gt=>{const Be=xe[Ce.L]();if((0,ie.m)(Be.subscribe))return Be.subscribe(gt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,h.z)(xe))return function nt(xe){return new P.y(gt=>{for(let Be=0;Be<xe.length&&!gt.closed;Be++)gt.next(xe[Be]);gt.complete()})}(xe);if((0,Z.t)(xe))return function Ot(xe){return new P.y(gt=>{xe.then(Be=>{gt.closed||(gt.next(Be),gt.complete())},Be=>gt.error(Be)).then(null,fe.h)})}(xe);if((0,Le.D)(xe))return it(xe);if((0,be.T)(xe))return function at(xe){return new P.y(gt=>{for(const Be of xe)if(gt.next(Be),gt.closed)return;gt.complete()})}(xe);if((0,tt.L)(xe))return function Ht(xe){return it((0,tt.Q)(xe))}(xe)}throw(0,qe.z)(xe)}function it(xe){return new P.y(gt=>{(function qt(xe,gt){var Be,ut,ee,se;return(0,C.mG)(this,void 0,void 0,function*(){try{for(Be=(0,C.KL)(xe);!(ut=yield Be.next()).done;)if(gt.next(ut.value),gt.closed)return}catch(ze){ee={error:ze}}finally{try{ut&&!ut.done&&(se=Be.return)&&(yield se.call(Be))}finally{if(ee)throw ee.error}}gt.complete()})})(xe,gt).catch(Be=>gt.error(Be))})}},6451:(an,ht,j)=>{j.d(ht,{T:()=>Le});var C=j(8189),h=j(8421),Z=j(515),P=j(7669),de=j(8996);function Le(...qe){const be=(0,P.yG)(qe),tt=(0,P._6)(qe,1/0),ie=qe;return ie.length?1===ie.length?(0,h.Xf)(ie[0]):(0,C.J)(tt)((0,de.D)(ie,be)):Z.E}},9646:(an,ht,j)=>{j.d(ht,{of:()=>Z});var C=j(7669),h=j(8996);function Z(...P){const de=(0,C.yG)(P);return(0,h.D)(P,de)}},5403:(an,ht,j)=>{j.d(ht,{x:()=>h});var C=j(2961);function h(P,de,Le,qe,be){return new Z(P,de,Le,qe,be)}class Z extends C.Lv{constructor(de,Le,qe,be,tt,ie){super(de),this.onFinalize=tt,this.shouldUnsubscribe=ie,this._next=Le?function(fe){try{Le(fe)}catch(Ce){de.error(Ce)}}:super._next,this._error=be?function(fe){try{be(fe)}catch(Ce){de.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=qe?function(){try{qe()}catch(fe){de.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Le}=this;super.unsubscribe(),!Le&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4351:(an,ht,j)=>{j.d(ht,{b:()=>Z});var C=j(5577),h=j(576);function Z(P,de){return(0,h.m)(de)?(0,C.z)(P,de,1):(0,C.z)(P,1)}},6590:(an,ht,j)=>{j.d(ht,{d:()=>Z});var C=j(4482),h=j(5403);function Z(P){return(0,C.e)((de,Le)=>{let qe=!1;de.subscribe((0,h.x)(Le,be=>{qe=!0,Le.next(be)},()=>{qe||Le.next(P),Le.complete()}))})}},9300:(an,ht,j)=>{j.d(ht,{h:()=>Z});var C=j(4482),h=j(5403);function Z(P,de){return(0,C.e)((Le,qe)=>{let be=0;Le.subscribe((0,h.x)(qe,tt=>P.call(de,tt,be++)&&qe.next(tt)))})}},590:(an,ht,j)=>{j.d(ht,{P:()=>qe});var C=j(6805),h=j(9300),Z=j(5698),P=j(6590),de=j(8068),Le=j(4671);function qe(be,tt){const ie=arguments.length>=2;return fe=>fe.pipe(be?(0,h.h)((Ce,st)=>be(Ce,st,fe)):Le.y,(0,Z.q)(1),ie?(0,P.d)(tt):(0,de.T)(()=>new C.K))}},4004:(an,ht,j)=>{j.d(ht,{U:()=>Z});var C=j(4482),h=j(5403);function Z(P,de){return(0,C.e)((Le,qe)=>{let be=0;Le.subscribe((0,h.x)(qe,tt=>{qe.next(P.call(de,tt,be++))}))})}},8189:(an,ht,j)=>{j.d(ht,{J:()=>Z});var C=j(5577),h=j(4671);function Z(P=1/0){return(0,C.z)(h.y,P)}},5577:(an,ht,j)=>{j.d(ht,{z:()=>be});var C=j(4004),h=j(8421),Z=j(4482),P=j(9672),de=j(5403),qe=j(576);function be(tt,ie,fe=1/0){return(0,qe.m)(ie)?be((Ce,st)=>(0,C.U)((ot,nt)=>ie(Ce,ot,st,nt))((0,h.Xf)(tt(Ce,st))),fe):("number"==typeof ie&&(fe=ie),(0,Z.e)((Ce,st)=>function Le(tt,ie,fe,Ce,st,ot,nt,Ot){const at=[];let it=0,Ht=0,qt=!1;const xe=()=>{qt&&!at.length&&!it&&ie.complete()},gt=ut=>it<Ce?Be(ut):at.push(ut),Be=ut=>{ot&&ie.next(ut),it++;let ee=!1;(0,h.Xf)(fe(ut,Ht++)).subscribe((0,de.x)(ie,se=>{st?.(se),ot?gt(se):ie.next(se)},()=>{ee=!0},void 0,()=>{if(ee)try{for(it--;at.length&&it<Ce;){const se=at.shift();nt?(0,P.f)(ie,nt,()=>Be(se)):Be(se)}xe()}catch(se){ie.error(se)}}))};return tt.subscribe((0,de.x)(ie,gt,()=>{qt=!0,xe()})),()=>{Ot?.()}}(Ce,st,tt,fe)))}},5363:(an,ht,j)=>{j.d(ht,{Q:()=>P});var C=j(9672),h=j(4482),Z=j(5403);function P(de,Le=0){return(0,h.e)((qe,be)=>{qe.subscribe((0,Z.x)(be,tt=>(0,C.f)(be,de,()=>be.next(tt),Le),()=>(0,C.f)(be,de,()=>be.complete(),Le),tt=>(0,C.f)(be,de,()=>be.error(tt),Le)))})}},5026:(an,ht,j)=>{j.d(ht,{R:()=>P});var C=j(4482),h=j(5403);function Z(de,Le,qe,be,tt){return(ie,fe)=>{let Ce=qe,st=Le,ot=0;ie.subscribe((0,h.x)(fe,nt=>{const Ot=ot++;st=Ce?de(st,nt,Ot):(Ce=!0,nt),be&&fe.next(st)},tt&&(()=>{Ce&&fe.next(st),fe.complete()})))}}function P(de,Le){return(0,C.e)(Z(de,Le,arguments.length>=2,!0))}},3099:(an,ht,j)=>{j.d(ht,{B:()=>de});var C=j(8421),h=j(7579),Z=j(2961),P=j(4482);function de(qe={}){const{connector:be=(()=>new h.x),resetOnError:tt=!0,resetOnComplete:ie=!0,resetOnRefCountZero:fe=!0}=qe;return Ce=>{let st,ot,nt,Ot=0,at=!1,it=!1;const Ht=()=>{ot?.unsubscribe(),ot=void 0},qt=()=>{Ht(),st=nt=void 0,at=it=!1},xe=()=>{const gt=st;qt(),gt?.unsubscribe()};return(0,P.e)((gt,Be)=>{Ot++,!it&&!at&&Ht();const ut=nt=nt??be();Be.add(()=>{Ot--,0===Ot&&!it&&!at&&(ot=Le(xe,fe))}),ut.subscribe(Be),!st&&Ot>0&&(st=new Z.Hp({next:ee=>ut.next(ee),error:ee=>{it=!0,Ht(),ot=Le(qt,tt,ee),ut.error(ee)},complete:()=>{at=!0,Ht(),ot=Le(qt,ie),ut.complete()}}),(0,C.Xf)(gt).subscribe(st))})(Ce)}}function Le(qe,be,...tt){if(!0===be)return void qe();if(!1===be)return;const ie=new Z.Hp({next:()=>{ie.unsubscribe(),qe()}});return be(...tt).subscribe(ie)}},8675:(an,ht,j)=>{j.d(ht,{O:()=>P});var C=j(7272),h=j(7669),Z=j(4482);function P(...de){const Le=(0,h.yG)(de);return(0,Z.e)((qe,be)=>{(Le?(0,C.z)(de,qe,Le):(0,C.z)(de,qe)).subscribe(be)})}},9468:(an,ht,j)=>{j.d(ht,{R:()=>h});var C=j(4482);function h(Z,P=0){return(0,C.e)((de,Le)=>{Le.add(Z.schedule(()=>de.subscribe(Le),P))})}},3900:(an,ht,j)=>{j.d(ht,{w:()=>P});var C=j(8421),h=j(4482),Z=j(5403);function P(de,Le){return(0,h.e)((qe,be)=>{let tt=null,ie=0,fe=!1;const Ce=()=>fe&&!tt&&be.complete();qe.subscribe((0,Z.x)(be,st=>{tt?.unsubscribe();let ot=0;const nt=ie++;(0,C.Xf)(de(st,nt)).subscribe(tt=(0,Z.x)(be,Ot=>be.next(Le?Le(st,Ot,nt,ot++):Ot),()=>{tt=null,Ce()}))},()=>{fe=!0,Ce()}))})}},5698:(an,ht,j)=>{j.d(ht,{q:()=>P});var C=j(515),h=j(4482),Z=j(5403);function P(de){return de<=0?()=>C.E:(0,h.e)((Le,qe)=>{let be=0;Le.subscribe((0,Z.x)(qe,tt=>{++be<=de&&(qe.next(tt),de<=be&&qe.complete())}))})}},8505:(an,ht,j)=>{j.d(ht,{b:()=>de});var C=j(576),h=j(4482),Z=j(5403),P=j(4671);function de(Le,qe,be){const tt=(0,C.m)(Le)||qe||be?{next:Le,error:qe,complete:be}:Le;return tt?(0,h.e)((ie,fe)=>{var Ce;null===(Ce=tt.subscribe)||void 0===Ce||Ce.call(tt);let st=!0;ie.subscribe((0,Z.x)(fe,ot=>{var nt;null===(nt=tt.next)||void 0===nt||nt.call(tt,ot),fe.next(ot)},()=>{var ot;st=!1,null===(ot=tt.complete)||void 0===ot||ot.call(tt),fe.complete()},ot=>{var nt;st=!1,null===(nt=tt.error)||void 0===nt||nt.call(tt,ot),fe.error(ot)},()=>{var ot,nt;st&&(null===(ot=tt.unsubscribe)||void 0===ot||ot.call(tt)),null===(nt=tt.finalize)||void 0===nt||nt.call(tt)}))}):P.y}},8068:(an,ht,j)=>{j.d(ht,{T:()=>P});var C=j(6805),h=j(4482),Z=j(5403);function P(Le=de){return(0,h.e)((qe,be)=>{let tt=!1;qe.subscribe((0,Z.x)(be,ie=>{tt=!0,be.next(ie)},()=>tt?be.complete():be.error(Le())))})}function de(){return new C.K}},4408:(an,ht,j)=>{j.d(ht,{o:()=>de});var C=j(727);class h extends C.w0{constructor(qe,be){super()}schedule(qe,be=0){return this}}const Z={setInterval(Le,qe,...be){const{delegate:tt}=Z;return tt?.setInterval?tt.setInterval(Le,qe,...be):setInterval(Le,qe,...be)},clearInterval(Le){const{delegate:qe}=Z;return(qe?.clearInterval||clearInterval)(Le)},delegate:void 0};var P=j(8737);class de extends h{constructor(qe,be){super(qe,be),this.scheduler=qe,this.work=be,this.pending=!1}schedule(qe,be=0){if(this.closed)return this;this.state=qe;const tt=this.id,ie=this.scheduler;return null!=tt&&(this.id=this.recycleAsyncId(ie,tt,be)),this.pending=!0,this.delay=be,this.id=this.id||this.requestAsyncId(ie,this.id,be),this}requestAsyncId(qe,be,tt=0){return Z.setInterval(qe.flush.bind(qe,this),tt)}recycleAsyncId(qe,be,tt=0){if(null!=tt&&this.delay===tt&&!1===this.pending)return be;Z.clearInterval(be)}execute(qe,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const tt=this._execute(qe,be);if(tt)return tt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(qe,be){let ie,tt=!1;try{this.work(qe)}catch(fe){tt=!0,ie=fe||new Error("Scheduled action threw falsy error")}if(tt)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:qe,scheduler:be}=this,{actions:tt}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,P.P)(tt,this),null!=qe&&(this.id=this.recycleAsyncId(be,qe,null)),this.delay=null,super.unsubscribe()}}}},7565:(an,ht,j)=>{j.d(ht,{v:()=>Z});var C=j(6063);class h{constructor(de,Le=h.now){this.schedulerActionCtor=de,this.now=Le}schedule(de,Le=0,qe){return new this.schedulerActionCtor(this,de).schedule(qe,Le)}}h.now=C.l.now;class Z extends h{constructor(de,Le=h.now){super(de,Le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:Le}=this;if(this._active)return void Le.push(de);let qe;this._active=!0;do{if(qe=de.execute(de.state,de.delay))break}while(de=Le.shift());if(this._active=!1,qe){for(;de=Le.shift();)de.unsubscribe();throw qe}}}},4986:(an,ht,j)=>{j.d(ht,{z:()=>Z});var C=j(4408);const Z=new(j(7565).v)(C.o)},6063:(an,ht,j)=>{j.d(ht,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},3410:(an,ht,j)=>{j.d(ht,{z:()=>C});const C={setTimeout(h,Z,...P){const{delegate:de}=C;return de?.setTimeout?de.setTimeout(h,Z,...P):setTimeout(h,Z,...P)},clearTimeout(h){const{delegate:Z}=C;return(Z?.clearTimeout||clearTimeout)(h)},delegate:void 0}},2202:(an,ht,j)=>{j.d(ht,{h:()=>h});const h=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(an,ht,j)=>{j.d(ht,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(an,ht,j)=>{j.d(ht,{K:()=>h});const h=(0,j(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(an,ht,j)=>{j.d(ht,{_6:()=>Le,jO:()=>P,yG:()=>de});var C=j(576);function Z(qe){return qe[qe.length-1]}function P(qe){return(0,C.m)(Z(qe))?qe.pop():void 0}function de(qe){return function h(qe){return qe&&(0,C.m)(qe.schedule)}(Z(qe))?qe.pop():void 0}function Le(qe,be){return"number"==typeof Z(qe)?qe.pop():be}},4742:(an,ht,j)=>{j.d(ht,{D:()=>de});const{isArray:C}=Array,{getPrototypeOf:h,prototype:Z,keys:P}=Object;function de(qe){if(1===qe.length){const be=qe[0];if(C(be))return{args:be,keys:null};if(function Le(qe){return qe&&"object"==typeof qe&&h(qe)===Z}(be)){const tt=P(be);return{args:tt.map(ie=>be[ie]),keys:tt}}}return{args:qe,keys:null}}},8737:(an,ht,j)=>{function C(h,Z){if(h){const P=h.indexOf(Z);0<=P&&h.splice(P,1)}}j.d(ht,{P:()=>C})},3888:(an,ht,j)=>{function C(h){const P=h(de=>{Error.call(de),de.stack=(new Error).stack});return P.prototype=Object.create(Error.prototype),P.prototype.constructor=P,P}j.d(ht,{d:()=>C})},1810:(an,ht,j)=>{function C(h,Z){return h.reduce((P,de,Le)=>(P[de]=Z[Le],P),{})}j.d(ht,{n:()=>C})},2806:(an,ht,j)=>{j.d(ht,{O:()=>P,x:()=>Z});var C=j(2416);let h=null;function Z(de){if(C.v.useDeprecatedSynchronousErrorHandling){const Le=!h;if(Le&&(h={errorThrown:!1,error:null}),de(),Le){const{errorThrown:qe,error:be}=h;if(h=null,qe)throw be}}else de()}function P(de){C.v.useDeprecatedSynchronousErrorHandling&&h&&(h.errorThrown=!0,h.error=de)}},9672:(an,ht,j)=>{function C(h,Z,P,de=0,Le=!1){const qe=Z.schedule(function(){P(),Le?h.add(this.schedule(null,de)):this.unsubscribe()},de);if(h.add(qe),!Le)return qe}j.d(ht,{f:()=>C})},4671:(an,ht,j)=>{function C(h){return h}j.d(ht,{y:()=>C})},1144:(an,ht,j)=>{j.d(ht,{z:()=>C});const C=h=>h&&"number"==typeof h.length&&"function"!=typeof h},2206:(an,ht,j)=>{j.d(ht,{D:()=>h});var C=j(576);function h(Z){return Symbol.asyncIterator&&(0,C.m)(Z?.[Symbol.asyncIterator])}},576:(an,ht,j)=>{function C(h){return"function"==typeof h}j.d(ht,{m:()=>C})},3670:(an,ht,j)=>{j.d(ht,{c:()=>Z});var C=j(8822),h=j(576);function Z(P){return(0,h.m)(P[C.L])}},6495:(an,ht,j)=>{j.d(ht,{T:()=>Z});var C=j(2202),h=j(576);function Z(P){return(0,h.m)(P?.[C.h])}},8239:(an,ht,j)=>{j.d(ht,{t:()=>h});var C=j(576);function h(Z){return(0,C.m)(Z?.then)}},3260:(an,ht,j)=>{j.d(ht,{L:()=>P,Q:()=>Z});var C=j(655),h=j(576);function Z(de){return(0,C.FC)(this,arguments,function*(){const qe=de.getReader();try{for(;;){const{value:be,done:tt}=yield(0,C.qq)(qe.read());if(tt)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(be)}}finally{qe.releaseLock()}})}function P(de){return(0,h.m)(de?.getReader)}},4482:(an,ht,j)=>{j.d(ht,{A:()=>h,e:()=>Z});var C=j(576);function h(P){return(0,C.m)(P?.lift)}function Z(P){return de=>{if(h(de))return de.lift(function(Le){try{return P(Le,this)}catch(qe){this.error(qe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(an,ht,j)=>{j.d(ht,{Z:()=>P});var C=j(4004);const{isArray:h}=Array;function P(de){return(0,C.U)(Le=>function Z(de,Le){return h(Le)?de(...Le):de(Le)}(de,Le))}},9635:(an,ht,j)=>{j.d(ht,{U:()=>Z,z:()=>h});var C=j(4671);function h(...P){return Z(P)}function Z(P){return 0===P.length?C.y:1===P.length?P[0]:function(Le){return P.reduce((qe,be)=>be(qe),Le)}}},7849:(an,ht,j)=>{j.d(ht,{h:()=>Z});var C=j(2416),h=j(3410);function Z(P){h.z.setTimeout(()=>{const{onUnhandledError:de}=C.v;if(!de)throw P;de(P)})}},4532:(an,ht,j)=>{function C(h){return new TypeError(`You provided ${null!==h&&"object"==typeof h?"an invalid object":`'${h}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ht,{z:()=>C})},655:(an,ht,j)=>{function P(Pe,Ue){var Ke={};for(var Ye in Pe)Object.prototype.hasOwnProperty.call(Pe,Ye)&&Ue.indexOf(Ye)<0&&(Ke[Ye]=Pe[Ye]);if(null!=Pe&&"function"==typeof Object.getOwnPropertySymbols){var Mt=0;for(Ye=Object.getOwnPropertySymbols(Pe);Mt<Ye.length;Mt++)Ue.indexOf(Ye[Mt])<0&&Object.prototype.propertyIsEnumerable.call(Pe,Ye[Mt])&&(Ke[Ye[Mt]]=Pe[Ye[Mt]])}return Ke}function be(Pe,Ue,Ke,Ye){return new(Ke||(Ke=Promise))(function(kt,Bt){function gn(nn){try{Et(Ye.next(nn))}catch(zn){Bt(zn)}}function xn(nn){try{Et(Ye.throw(nn))}catch(zn){Bt(zn)}}function Et(nn){nn.done?kt(nn.value):function Mt(kt){return kt instanceof Ke?kt:new Ke(function(Bt){Bt(kt)})}(nn.value).then(gn,xn)}Et((Ye=Ye.apply(Pe,Ue||[])).next())})}function at(Pe){return this instanceof at?(this.v=Pe,this):new at(Pe)}function it(Pe,Ue,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt,Ye=Ke.apply(Pe,Ue||[]),kt=[];return Mt={},Bt("next"),Bt("throw"),Bt("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt;function Bt(Nn){Ye[Nn]&&(Mt[Nn]=function(Kn){return new Promise(function(jn,mn){kt.push([Nn,Kn,jn,mn])>1||gn(Nn,Kn)})})}function gn(Nn,Kn){try{!function xn(Nn){Nn.value instanceof at?Promise.resolve(Nn.value.v).then(Et,nn):zn(kt[0][2],Nn)}(Ye[Nn](Kn))}catch(jn){zn(kt[0][3],jn)}}function Et(Nn){gn("next",Nn)}function nn(Nn){gn("throw",Nn)}function zn(Nn,Kn){Nn(Kn),kt.shift(),kt.length&&gn(kt[0][0],kt[0][1])}}function qt(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Ue=Pe[Symbol.asyncIterator];return Ue?Ue.call(Pe):(Pe=function Ce(Pe){var Ue="function"==typeof Symbol&&Symbol.iterator,Ke=Ue&&Pe[Ue],Ye=0;if(Ke)return Ke.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&Ye>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[Ye++],done:!Pe}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),Ke={},Ye("next"),Ye("throw"),Ye("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function Ye(kt){Ke[kt]=Pe[kt]&&function(Bt){return new Promise(function(gn,xn){!function Mt(kt,Bt,gn,xn){Promise.resolve(xn).then(function(Et){kt({value:Et,done:gn})},Bt)}(gn,xn,(Bt=Pe[kt](Bt)).done,Bt.value)})}}}j.d(ht,{FC:()=>it,KL:()=>qt,_T:()=>P,mG:()=>be,qq:()=>at})},6895:(an,ht,j)=>{j.d(ht,{Do:()=>qt,EM:()=>De,HT:()=>de,JF:()=>Tt,K0:()=>qe,Mx:()=>Jr,O5:()=>rt,Ov:()=>$a,PC:()=>Hi,PM:()=>oo,S$:()=>at,V_:()=>ie,Ye:()=>xe,b0:()=>Ht,bD:()=>Si,ez:()=>ia,mk:()=>tr,q:()=>Z,sg:()=>On,uU:()=>gr,w_:()=>Le});var C=j(4650);let h=null;function Z(){return h}function de(F){h||(h=F)}class Le{}const qe=new C.OlP("DocumentToken");let be=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return function tt(){return(0,C.LFG)(fe)}()},providedIn:"platform"}),F})();const ie=new C.OlP("Location Initialized");let fe=(()=>{class F extends be{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(U){const Q=Z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",U,!1),()=>Q.removeEventListener("popstate",U)}onHashChange(U){const Q=Z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",U,!1),()=>Q.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,Q,Ne){Ce()?this._history.pushState(U,Q,Ne):this.location.hash=Ne}replaceState(U,Q,Ne){Ce()?this._history.replaceState(U,Q,Ne):this.location.hash=Ne}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(qe))},F.\u0275prov=C.Yz7({token:F,factory:function(){return function st(){return new fe((0,C.LFG)(qe))}()},providedIn:"platform"}),F})();function Ce(){return!!window.history.pushState}function ot(F,z){if(0==F.length)return z;if(0==z.length)return F;let U=0;return F.endsWith("/")&&U++,z.startsWith("/")&&U++,2==U?F+z.substring(1):1==U?F+z:F+"/"+z}function nt(F){const z=F.match(/#|\?|$/),U=z&&z.index||F.length;return F.slice(0,U-("/"===F[U-1]?1:0))+F.slice(U)}function Ot(F){return F&&"?"!==F[0]?"?"+F:F}let at=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return(0,C.f3M)(Ht)},providedIn:"root"}),F})();const it=new C.OlP("appBaseHref");let Ht=(()=>{class F extends at{constructor(U,Q){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return ot(this._baseHref,U)}path(U=!1){const Q=this._platformLocation.pathname+Ot(this._platformLocation.search),Ne=this._platformLocation.hash;return Ne&&U?`${Q}${Ne}`:Q}pushState(U,Q,Ne,It){const At=this.prepareExternalUrl(Ne+Ot(It));this._platformLocation.pushState(U,Q,At)}replaceState(U,Q,Ne,It){const At=this.prepareExternalUrl(Ne+Ot(It));this._platformLocation.replaceState(U,Q,At)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(be),C.LFG(it,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),qt=(()=>{class F extends at{constructor(U,Q){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(U){const Q=ot(this._baseHref,U);return Q.length>0?"#"+Q:Q}pushState(U,Q,Ne,It){let At=this.prepareExternalUrl(Ne+Ot(It));0==At.length&&(At=this._platformLocation.pathname),this._platformLocation.pushState(U,Q,At)}replaceState(U,Q,Ne,It){let At=this.prepareExternalUrl(Ne+Ot(It));0==At.length&&(At=this._platformLocation.pathname),this._platformLocation.replaceState(U,Q,At)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(be),C.LFG(it,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac}),F})(),xe=(()=>{class F{constructor(U){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const Q=this._locationStrategy.getBaseHref();this._baseHref=nt(ut(Q)),this._locationStrategy.onPopState(Ne=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ne.state,type:Ne.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,Q=""){return this.path()==this.normalize(U+Ot(Q))}normalize(U){return F.stripTrailingSlash(function Be(F,z){return F&&z.startsWith(F)?z.substring(F.length):z}(this._baseHref,ut(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,Q="",Ne=null){this._locationStrategy.pushState(Ne,"",U,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ot(Q)),Ne)}replaceState(U,Q="",Ne=null){this._locationStrategy.replaceState(Ne,"",U,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ot(Q)),Ne)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",Q){this._urlChangeListeners.forEach(Ne=>Ne(U,Q))}subscribe(U,Q,Ne){return this._subject.subscribe({next:U,error:Q,complete:Ne})}}return F.normalizeQueryParams=Ot,F.joinWithSlash=ot,F.stripTrailingSlash=nt,F.\u0275fac=function(U){return new(U||F)(C.LFG(at))},F.\u0275prov=C.Yz7({token:F,factory:function(){return function gt(){return new xe((0,C.LFG)(at))}()},providedIn:"root"}),F})();function ut(F){return F.replace(/\/index.html$/,"")}var Pe=(()=>((Pe=Pe||{})[Pe.Format=0]="Format",Pe[Pe.Standalone=1]="Standalone",Pe))(),Ue=(()=>((Ue=Ue||{})[Ue.Narrow=0]="Narrow",Ue[Ue.Abbreviated=1]="Abbreviated",Ue[Ue.Wide=2]="Wide",Ue[Ue.Short=3]="Short",Ue))(),Ke=(()=>((Ke=Ke||{})[Ke.Short=0]="Short",Ke[Ke.Medium=1]="Medium",Ke[Ke.Long=2]="Long",Ke[Ke.Full=3]="Full",Ke))(),Ye=(()=>((Ye=Ye||{})[Ye.Decimal=0]="Decimal",Ye[Ye.Group=1]="Group",Ye[Ye.List=2]="List",Ye[Ye.PercentSign=3]="PercentSign",Ye[Ye.PlusSign=4]="PlusSign",Ye[Ye.MinusSign=5]="MinusSign",Ye[Ye.Exponential=6]="Exponential",Ye[Ye.SuperscriptingExponent=7]="SuperscriptingExponent",Ye[Ye.PerMille=8]="PerMille",Ye[Ye.Infinity=9]="Infinity",Ye[Ye.NaN=10]="NaN",Ye[Ye.TimeSeparator=11]="TimeSeparator",Ye[Ye.CurrencyDecimal=12]="CurrencyDecimal",Ye[Ye.CurrencyGroup=13]="CurrencyGroup",Ye))();function Nn(F,z){return en((0,C.cg1)(F)[C.wAp.DateFormat],z)}function Kn(F,z){return en((0,C.cg1)(F)[C.wAp.TimeFormat],z)}function jn(F,z){return en((0,C.cg1)(F)[C.wAp.DateTimeFormat],z)}function mn(F,z){const U=(0,C.cg1)(F),Q=U[C.wAp.NumberSymbols][z];if(typeof Q>"u"){if(z===Ye.CurrencyDecimal)return U[C.wAp.NumberSymbols][Ye.Decimal];if(z===Ye.CurrencyGroup)return U[C.wAp.NumberSymbols][Ye.Group]}return Q}function dn(F){if(!F[C.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[C.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function en(F,z){for(let U=z;U>-1;U--)if(typeof F[U]<"u")return F[U];throw new Error("Locale data API: locale data undefined")}function hr(F){const[z,U]=F.split(":");return{hours:+z,minutes:+U}}const ri=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vr={},dt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ie=(()=>((Ie=Ie||{})[Ie.Short=0]="Short",Ie[Ie.ShortGMT=1]="ShortGMT",Ie[Ie.Long=2]="Long",Ie[Ie.Extended=3]="Extended",Ie))(),_e=(()=>((_e=_e||{})[_e.FullYear=0]="FullYear",_e[_e.Month=1]="Month",_e[_e.Date=2]="Date",_e[_e.Hours=3]="Hours",_e[_e.Minutes=4]="Minutes",_e[_e.Seconds=5]="Seconds",_e[_e.FractionalSeconds=6]="FractionalSeconds",_e[_e.Day=7]="Day",_e))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function ct(F,z,U,Q){let Ne=function Fe(F){if(jt(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[Ne,It=1,At=1]=F.split("-").map(Rn=>+Rn);return rn(Ne,It-1,At)}const U=parseFloat(F);if(!isNaN(F-U))return new Date(U);let Q;if(Q=F.match(ri))return function Ct(F){const z=new Date(0);let U=0,Q=0;const Ne=F[8]?z.setUTCFullYear:z.setFullYear,It=F[8]?z.setUTCHours:z.setHours;F[9]&&(U=Number(F[9]+F[10]),Q=Number(F[9]+F[11])),Ne.call(z,Number(F[1]),Number(F[2])-1,Number(F[3]));const At=Number(F[4]||0)-U,Rn=Number(F[5]||0)-Q,Qr=Number(F[6]||0),Ur=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return It.call(z,At,Rn,Qr,Ur),z}(Q)}const z=new Date(F);if(!jt(z))throw new Error(`Unable to convert "${F}" into a date`);return z}(F);z=Dn(U,z)||z;let Rn,At=[];for(;z;){if(Rn=dt.exec(z),!Rn){At.push(z);break}{At=At.concat(Rn.slice(1));const Wr=At.pop();if(!Wr)break;z=Wr}}let Qr=Ne.getTimezoneOffset();Q&&(Qr=Ir(Q,Qr),Ne=function Se(F,z,U){const Q=U?-1:1,Ne=F.getTimezoneOffset();return function Je(F,z){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+z),F}(F,Q*(Ir(z,Ne)-Ne))}(Ne,Q,!0));let Ur="";return At.forEach(Wr=>{const Pr=function Zn(F){if(Bn[F])return Bn[F];let z;switch(F){case"G":case"GG":case"GGG":z=wn(mt.Eras,Ue.Abbreviated);break;case"GGGG":z=wn(mt.Eras,Ue.Wide);break;case"GGGGG":z=wn(mt.Eras,Ue.Narrow);break;case"y":z=vn(_e.FullYear,1,0,!1,!0);break;case"yy":z=vn(_e.FullYear,2,0,!0,!0);break;case"yyy":z=vn(_e.FullYear,3,0,!1,!0);break;case"yyyy":z=vn(_e.FullYear,4,0,!1,!0);break;case"Y":z=Yt(1);break;case"YY":z=Yt(2,!0);break;case"YYY":z=Yt(3);break;case"YYYY":z=Yt(4);break;case"M":case"L":z=vn(_e.Month,1,1);break;case"MM":case"LL":z=vn(_e.Month,2,1);break;case"MMM":z=wn(mt.Months,Ue.Abbreviated);break;case"MMMM":z=wn(mt.Months,Ue.Wide);break;case"MMMMM":z=wn(mt.Months,Ue.Narrow);break;case"LLL":z=wn(mt.Months,Ue.Abbreviated,Pe.Standalone);break;case"LLLL":z=wn(mt.Months,Ue.Wide,Pe.Standalone);break;case"LLLLL":z=wn(mt.Months,Ue.Narrow,Pe.Standalone);break;case"w":z=Dt(1);break;case"ww":z=Dt(2);break;case"W":z=Dt(1,!0);break;case"d":z=vn(_e.Date,1);break;case"dd":z=vn(_e.Date,2);break;case"c":case"cc":z=vn(_e.Day,1);break;case"ccc":z=wn(mt.Days,Ue.Abbreviated,Pe.Standalone);break;case"cccc":z=wn(mt.Days,Ue.Wide,Pe.Standalone);break;case"ccccc":z=wn(mt.Days,Ue.Narrow,Pe.Standalone);break;case"cccccc":z=wn(mt.Days,Ue.Short,Pe.Standalone);break;case"E":case"EE":case"EEE":z=wn(mt.Days,Ue.Abbreviated);break;case"EEEE":z=wn(mt.Days,Ue.Wide);break;case"EEEEE":z=wn(mt.Days,Ue.Narrow);break;case"EEEEEE":z=wn(mt.Days,Ue.Short);break;case"a":case"aa":case"aaa":z=wn(mt.DayPeriods,Ue.Abbreviated);break;case"aaaa":z=wn(mt.DayPeriods,Ue.Wide);break;case"aaaaa":z=wn(mt.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":z=wn(mt.DayPeriods,Ue.Abbreviated,Pe.Standalone,!0);break;case"bbbb":z=wn(mt.DayPeriods,Ue.Wide,Pe.Standalone,!0);break;case"bbbbb":z=wn(mt.DayPeriods,Ue.Narrow,Pe.Standalone,!0);break;case"B":case"BB":case"BBB":z=wn(mt.DayPeriods,Ue.Abbreviated,Pe.Format,!0);break;case"BBBB":z=wn(mt.DayPeriods,Ue.Wide,Pe.Format,!0);break;case"BBBBB":z=wn(mt.DayPeriods,Ue.Narrow,Pe.Format,!0);break;case"h":z=vn(_e.Hours,1,-12);break;case"hh":z=vn(_e.Hours,2,-12);break;case"H":z=vn(_e.Hours,1);break;case"HH":z=vn(_e.Hours,2);break;case"m":z=vn(_e.Minutes,1);break;case"mm":z=vn(_e.Minutes,2);break;case"s":z=vn(_e.Seconds,1);break;case"ss":z=vn(_e.Seconds,2);break;case"S":z=vn(_e.FractionalSeconds,1);break;case"SS":z=vn(_e.FractionalSeconds,2);break;case"SSS":z=vn(_e.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":z=le(Ie.Short);break;case"ZZZZZ":z=le(Ie.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":z=le(Ie.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":z=le(Ie.Long);break;default:return null}return Bn[F]=z,z}(Wr);Ur+=Pr?Pr(Ne,U,Qr):"''"===Wr?"'":Wr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ur}function rn(F,z,U){const Q=new Date(0);return Q.setFullYear(F,z,U),Q.setHours(0,0,0),Q}function Dn(F,z){const U=function kt(F){return(0,C.cg1)(F)[C.wAp.LocaleId]}(F);if(vr[U]=vr[U]||{},vr[U][z])return vr[U][z];let Q="";switch(z){case"shortDate":Q=Nn(F,Ke.Short);break;case"mediumDate":Q=Nn(F,Ke.Medium);break;case"longDate":Q=Nn(F,Ke.Long);break;case"fullDate":Q=Nn(F,Ke.Full);break;case"shortTime":Q=Kn(F,Ke.Short);break;case"mediumTime":Q=Kn(F,Ke.Medium);break;case"longTime":Q=Kn(F,Ke.Long);break;case"fullTime":Q=Kn(F,Ke.Full);break;case"short":const Ne=Dn(F,"shortTime"),It=Dn(F,"shortDate");Q=Qn(jn(F,Ke.Short),[Ne,It]);break;case"medium":const At=Dn(F,"mediumTime"),Rn=Dn(F,"mediumDate");Q=Qn(jn(F,Ke.Medium),[At,Rn]);break;case"long":const Qr=Dn(F,"longTime"),Ur=Dn(F,"longDate");Q=Qn(jn(F,Ke.Long),[Qr,Ur]);break;case"full":const Wr=Dn(F,"fullTime"),Pr=Dn(F,"fullDate");Q=Qn(jn(F,Ke.Full),[Wr,Pr])}return Q&&(vr[U][z]=Q),Q}function Qn(F,z){return z&&(F=F.replace(/\{([^}]+)}/g,function(U,Q){return null!=z&&Q in z?z[Q]:U})),F}function zt(F,z,U="-",Q,Ne){let It="";(F<0||Ne&&F<=0)&&(Ne?F=1-F:(F=-F,It=U));let At=String(F);for(;At.length<z;)At="0"+At;return Q&&(At=At.slice(At.length-z)),It+At}function vn(F,z,U=0,Q=!1,Ne=!1){return function(It,At){let Rn=function br(F,z){switch(F){case _e.FullYear:return z.getFullYear();case _e.Month:return z.getMonth();case _e.Date:return z.getDate();case _e.Hours:return z.getHours();case _e.Minutes:return z.getMinutes();case _e.Seconds:return z.getSeconds();case _e.FractionalSeconds:return z.getMilliseconds();case _e.Day:return z.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,It);if((U>0||Rn>-U)&&(Rn+=U),F===_e.Hours)0===Rn&&-12===U&&(Rn=12);else if(F===_e.FractionalSeconds)return function Jn(F,z){return zt(F,3).substring(0,z)}(Rn,z);const Qr=mn(At,Ye.MinusSign);return zt(Rn,z,Qr,Q,Ne)}}function wn(F,z,U=Pe.Format,Q=!1){return function(Ne,It){return function Te(F,z,U,Q,Ne,It){switch(U){case mt.Months:return function xn(F,z,U){const Q=(0,C.cg1)(F),It=en([Q[C.wAp.MonthsFormat],Q[C.wAp.MonthsStandalone]],z);return en(It,U)}(z,Ne,Q)[F.getMonth()];case mt.Days:return function gn(F,z,U){const Q=(0,C.cg1)(F),It=en([Q[C.wAp.DaysFormat],Q[C.wAp.DaysStandalone]],z);return en(It,U)}(z,Ne,Q)[F.getDay()];case mt.DayPeriods:const At=F.getHours(),Rn=F.getMinutes();if(It){const Ur=function Xn(F){const z=(0,C.cg1)(F);return dn(z),(z[C.wAp.ExtraData][2]||[]).map(Q=>"string"==typeof Q?hr(Q):[hr(Q[0]),hr(Q[1])])}(z),Wr=function Lr(F,z,U){const Q=(0,C.cg1)(F);dn(Q);const It=en([Q[C.wAp.ExtraData][0],Q[C.wAp.ExtraData][1]],z)||[];return en(It,U)||[]}(z,Ne,Q),Pr=Ur.findIndex(pi=>{if(Array.isArray(pi)){const[Hr,si]=pi,uo=At>=Hr.hours&&Rn>=Hr.minutes,Or=At<si.hours||At===si.hours&&Rn<si.minutes;if(Hr.hours<si.hours){if(uo&&Or)return!0}else if(uo||Or)return!0}else if(pi.hours===At&&pi.minutes===Rn)return!0;return!1});if(-1!==Pr)return Wr[Pr]}return function Bt(F,z,U){const Q=(0,C.cg1)(F),It=en([Q[C.wAp.DayPeriodsFormat],Q[C.wAp.DayPeriodsStandalone]],z);return en(It,U)}(z,Ne,Q)[At<12?0:1];case mt.Eras:return function Et(F,z){return en((0,C.cg1)(F)[C.wAp.Eras],z)}(z,Q)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(Ne,It,F,z,U,Q)}}function le(F){return function(z,U,Q){const Ne=-1*Q,It=mn(U,Ye.MinusSign),At=Ne>0?Math.floor(Ne/60):Math.ceil(Ne/60);switch(F){case Ie.Short:return(Ne>=0?"+":"")+zt(At,2,It)+zt(Math.abs(Ne%60),2,It);case Ie.ShortGMT:return"GMT"+(Ne>=0?"+":"")+zt(At,1,It);case Ie.Long:return"GMT"+(Ne>=0?"+":"")+zt(At,2,It)+":"+zt(Math.abs(Ne%60),2,It);case Ie.Extended:return 0===Q?"Z":(Ne>=0?"+":"")+zt(At,2,It)+":"+zt(Math.abs(Ne%60),2,It);default:throw new Error(`Unknown zone width "${F}"`)}}}function wt(F){return rn(F.getFullYear(),F.getMonth(),F.getDate()+(4-F.getDay()))}function Dt(F,z=!1){return function(U,Q){let Ne;if(z){const It=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,At=U.getDate();Ne=1+Math.floor((At+It)/7)}else{const It=wt(U),At=function Re(F){const z=rn(F,0,1).getDay();return rn(F,0,1+(z<=4?4:11)-z)}(It.getFullYear()),Rn=It.getTime()-At.getTime();Ne=1+Math.round(Rn/6048e5)}return zt(Ne,F,mn(Q,Ye.MinusSign))}}function Yt(F,z=!1){return function(U,Q){return zt(wt(U).getFullYear(),F,mn(Q,Ye.MinusSign),z)}}const Bn={};function Ir(F,z){F=F.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN(U)?z:U}function jt(F){return F instanceof Date&&!isNaN(F.valueOf())}function Jr(F,z){z=encodeURIComponent(z);for(const U of F.split(";")){const Q=U.indexOf("="),[Ne,It]=-1==Q?[U,""]:[U.slice(0,Q),U.slice(Q+1)];if(Ne.trim()===z)return decodeURIComponent(It)}return null}let tr=(()=>{class F{constructor(U,Q,Ne,It){this._iterableDiffers=U,this._keyValueDiffers=Q,this._ngEl=Ne,this._renderer=It,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(U){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof U?U.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(U){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof U?U.split(/\s+/):U,this._rawClass&&((0,C.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const U=this._iterableDiffer.diff(this._rawClass);U&&this._applyIterableChanges(U)}else if(this._keyValueDiffer){const U=this._keyValueDiffer.diff(this._rawClass);U&&this._applyKeyValueChanges(U)}}_applyKeyValueChanges(U){U.forEachAddedItem(Q=>this._toggleClass(Q.key,Q.currentValue)),U.forEachChangedItem(Q=>this._toggleClass(Q.key,Q.currentValue)),U.forEachRemovedItem(Q=>{Q.previousValue&&this._toggleClass(Q.key,!1)})}_applyIterableChanges(U){U.forEachAddedItem(Q=>{if("string"!=typeof Q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,C.AaK)(Q.item)}`);this._toggleClass(Q.item,!0)}),U.forEachRemovedItem(Q=>this._toggleClass(Q.item,!1))}_applyClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(Q=>this._toggleClass(Q,!0)):Object.keys(U).forEach(Q=>this._toggleClass(Q,!!U[Q])))}_removeClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(Q=>this._toggleClass(Q,!1)):Object.keys(U).forEach(Q=>this._toggleClass(Q,!1)))}_toggleClass(U,Q){(U=U.trim())&&U.split(/\s+/g).forEach(Ne=>{Q?this._renderer.addClass(this._ngEl.nativeElement,Ne):this._renderer.removeClass(this._ngEl.nativeElement,Ne)})}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.ZZ4),C.Y36(C.aQg),C.Y36(C.SBq),C.Y36(C.Qsj))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),F})();class or{constructor(z,U,Q,Ne){this.$implicit=z,this.ngForOf=U,this.index=Q,this.count=Ne}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class F{constructor(U,Q,Ne){this._viewContainer=U,this._template=Q,this._differs=Ne,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const Q=this._viewContainer;U.forEachOperation((Ne,It,At)=>{if(null==Ne.previousIndex)Q.createEmbeddedView(this._template,new or(Ne.item,this._ngForOf,-1,-1),null===At?void 0:At);else if(null==At)Q.remove(null===It?void 0:It);else if(null!==It){const Rn=Q.get(It);Q.move(Rn,At),We(Rn,Ne)}});for(let Ne=0,It=Q.length;Ne<It;Ne++){const Rn=Q.get(Ne).context;Rn.index=Ne,Rn.count=It,Rn.ngForOf=this._ngForOf}U.forEachIdentityChange(Ne=>{We(Q.get(Ne.currentIndex),Ne)})}static ngTemplateContextGuard(U,Q){return!0}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function We(F,z){F.context.$implicit=z.item}let rt=(()=>{class F{constructor(U,Q){this._viewContainer=U,this._context=new Nt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){Zt("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){Zt("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,Q){return!0}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.s_b),C.Y36(C.Rgc))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Nt{constructor(){this.$implicit=null,this.ngIf=null}}function Zt(F,z){if(z&&!z.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,C.AaK)(z)}'.`)}let Hi=(()=>{class F{constructor(U,Q,Ne){this._ngEl=U,this._differs=Q,this._renderer=Ne,this._ngStyle=null,this._differ=null}set ngStyle(U){this._ngStyle=U,!this._differ&&U&&(this._differ=this._differs.find(U).create())}ngDoCheck(){if(this._differ){const U=this._differ.diff(this._ngStyle);U&&this._applyChanges(U)}}_setStyle(U,Q){const[Ne,It]=U.split("."),At=-1===Ne.indexOf("-")?void 0:C.JOm.DashCase;null!=Q?this._renderer.setStyle(this._ngEl.nativeElement,Ne,It?`${Q}${It}`:Q,At):this._renderer.removeStyle(this._ngEl.nativeElement,Ne,At)}_applyChanges(U){U.forEachRemovedItem(Q=>this._setStyle(Q.key,null)),U.forEachAddedItem(Q=>this._setStyle(Q.key,Q.currentValue)),U.forEachChangedItem(Q=>this._setStyle(Q.key,Q.currentValue))}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),F})();function Yi(F,z){return new C.vHH(2100,!1)}class Zi{createSubscription(z,U){return z.subscribe({next:U,error:Q=>{throw Q}})}dispose(z){z.unsubscribe()}}class Cs{createSubscription(z,U){return z.then(U,Q=>{throw Q})}dispose(z){}}const na=new Cs,Po=new Zi;let $a=(()=>{class F{constructor(U){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=U}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(U){return this._obj?U!==this._obj?(this._dispose(),this.transform(U)):this._latestValue:(U&&this._subscribe(U),this._latestValue)}_subscribe(U){this._obj=U,this._strategy=this._selectStrategy(U),this._subscription=this._strategy.createSubscription(U,Q=>this._updateLatestValue(U,Q))}_selectStrategy(U){if((0,C.QGY)(U))return na;if((0,C.F4k)(U))return Po;throw Yi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(U,Q){U===this._obj&&(this._latestValue=Q,this._ref.markForCheck())}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.sBO,16))},F.\u0275pipe=C.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})();const so=new C.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let gr=(()=>{class F{constructor(U,Q){this.locale=U,this.defaultTimezone=Q}transform(U,Q="mediumDate",Ne,It){if(null==U||""===U||U!=U)return null;try{return ct(U,Q,It||this.locale,Ne??this.defaultTimezone??void 0)}catch(At){throw Yi()}}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.soG,16),C.Y36(so,24))},F.\u0275pipe=C.Yjl({name:"date",type:F,pure:!0,standalone:!0}),F})(),ia=(()=>{class F{}return F.\u0275fac=function(U){return new(U||F)},F.\u0275mod=C.oAB({type:F}),F.\u0275inj=C.cJS({}),F})();const Si="browser";function oo(F){return"server"===F}let De=(()=>{class F{}return F.\u0275prov=(0,C.Yz7)({token:F,providedIn:"root",factory:()=>new me((0,C.LFG)(qe),window)}),F})();class me{constructor(z,U){this.document=z,this.window=U,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const U=function lt(F,z){const U=F.getElementById(z)||F.getElementsByName(z)[0];if(U)return U;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const Q=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ne=Q.currentNode;for(;Ne;){const It=Ne.shadowRoot;if(It){const At=It.getElementById(z)||It.querySelector(`[name="${z}"]`);if(At)return At}Ne=Q.nextNode()}}return null}(this.document,z);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=z)}}scrollToElement(z){const U=z.getBoundingClientRect(),Q=U.left+this.window.pageXOffset,Ne=U.top+this.window.pageYOffset,It=this.offset();this.window.scrollTo(Q-It[0],Ne-It[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=Ge(this.window.history)||Ge(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ge(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Tt{}},529:(an,ht,j)=>{j.d(ht,{JF:()=>fr,eN:()=>kt});var C=j(6895),h=j(4650),Z=j(9646),P=j(9751),de=j(4351),Le=j(9300),qe=j(4004);class be{}class tt{}class ie{constructor(Ie){this.normalizedNames=new Map,this.lazyUpdate=null,Ie?this.lazyInit="string"==typeof Ie?()=>{this.headers=new Map,Ie.split("\n").forEach(_e=>{const mt=_e.indexOf(":");if(mt>0){const ct=_e.slice(0,mt),rn=ct.toLowerCase(),Dn=_e.slice(mt+1).trim();this.maybeSetNormalizedName(ct,rn),this.headers.has(rn)?this.headers.get(rn).push(Dn):this.headers.set(rn,[Dn])}})}:()=>{this.headers=new Map,Object.keys(Ie).forEach(_e=>{let mt=Ie[_e];const ct=_e.toLowerCase();"string"==typeof mt&&(mt=[mt]),mt.length>0&&(this.headers.set(ct,mt),this.maybeSetNormalizedName(_e,ct))})}:this.headers=new Map}has(Ie){return this.init(),this.headers.has(Ie.toLowerCase())}get(Ie){this.init();const _e=this.headers.get(Ie.toLowerCase());return _e&&_e.length>0?_e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ie){return this.init(),this.headers.get(Ie.toLowerCase())||null}append(Ie,_e){return this.clone({name:Ie,value:_e,op:"a"})}set(Ie,_e){return this.clone({name:Ie,value:_e,op:"s"})}delete(Ie,_e){return this.clone({name:Ie,value:_e,op:"d"})}maybeSetNormalizedName(Ie,_e){this.normalizedNames.has(_e)||this.normalizedNames.set(_e,Ie)}init(){this.lazyInit&&(this.lazyInit instanceof ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ie=>this.applyUpdate(Ie)),this.lazyUpdate=null))}copyFrom(Ie){Ie.init(),Array.from(Ie.headers.keys()).forEach(_e=>{this.headers.set(_e,Ie.headers.get(_e)),this.normalizedNames.set(_e,Ie.normalizedNames.get(_e))})}clone(Ie){const _e=new ie;return _e.lazyInit=this.lazyInit&&this.lazyInit instanceof ie?this.lazyInit:this,_e.lazyUpdate=(this.lazyUpdate||[]).concat([Ie]),_e}applyUpdate(Ie){const _e=Ie.name.toLowerCase();switch(Ie.op){case"a":case"s":let mt=Ie.value;if("string"==typeof mt&&(mt=[mt]),0===mt.length)return;this.maybeSetNormalizedName(Ie.name,_e);const ct=("a"===Ie.op?this.headers.get(_e):void 0)||[];ct.push(...mt),this.headers.set(_e,ct);break;case"d":const rn=Ie.value;if(rn){let Dn=this.headers.get(_e);if(!Dn)return;Dn=Dn.filter(Qn=>-1===rn.indexOf(Qn)),0===Dn.length?(this.headers.delete(_e),this.normalizedNames.delete(_e)):this.headers.set(_e,Dn)}else this.headers.delete(_e),this.normalizedNames.delete(_e)}}forEach(Ie){this.init(),Array.from(this.normalizedNames.keys()).forEach(_e=>Ie(this.normalizedNames.get(_e),this.headers.get(_e)))}}class Ce{encodeKey(Ie){return Ot(Ie)}encodeValue(Ie){return Ot(Ie)}decodeKey(Ie){return decodeURIComponent(Ie)}decodeValue(Ie){return decodeURIComponent(Ie)}}const ot=/%(\d[a-f0-9])/gi,nt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ot(dt){return encodeURIComponent(dt).replace(ot,(Ie,_e)=>nt[_e]??Ie)}function at(dt){return`${dt}`}class it{constructor(Ie={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ie.encoder||new Ce,Ie.fromString){if(Ie.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function st(dt,Ie){const _e=new Map;return dt.length>0&&dt.replace(/^\?/,"").split("&").forEach(ct=>{const rn=ct.indexOf("="),[Dn,Qn]=-1==rn?[Ie.decodeKey(ct),""]:[Ie.decodeKey(ct.slice(0,rn)),Ie.decodeValue(ct.slice(rn+1))],zt=_e.get(Dn)||[];zt.push(Qn),_e.set(Dn,zt)}),_e}(Ie.fromString,this.encoder)}else Ie.fromObject?(this.map=new Map,Object.keys(Ie.fromObject).forEach(_e=>{const mt=Ie.fromObject[_e],ct=Array.isArray(mt)?mt.map(at):[at(mt)];this.map.set(_e,ct)})):this.map=null}has(Ie){return this.init(),this.map.has(Ie)}get(Ie){this.init();const _e=this.map.get(Ie);return _e?_e[0]:null}getAll(Ie){return this.init(),this.map.get(Ie)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ie,_e){return this.clone({param:Ie,value:_e,op:"a"})}appendAll(Ie){const _e=[];return Object.keys(Ie).forEach(mt=>{const ct=Ie[mt];Array.isArray(ct)?ct.forEach(rn=>{_e.push({param:mt,value:rn,op:"a"})}):_e.push({param:mt,value:ct,op:"a"})}),this.clone(_e)}set(Ie,_e){return this.clone({param:Ie,value:_e,op:"s"})}delete(Ie,_e){return this.clone({param:Ie,value:_e,op:"d"})}toString(){return this.init(),this.keys().map(Ie=>{const _e=this.encoder.encodeKey(Ie);return this.map.get(Ie).map(mt=>_e+"="+this.encoder.encodeValue(mt)).join("&")}).filter(Ie=>""!==Ie).join("&")}clone(Ie){const _e=new it({encoder:this.encoder});return _e.cloneFrom=this.cloneFrom||this,_e.updates=(this.updates||[]).concat(Ie),_e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ie=>this.map.set(Ie,this.cloneFrom.map.get(Ie))),this.updates.forEach(Ie=>{switch(Ie.op){case"a":case"s":const _e=("a"===Ie.op?this.map.get(Ie.param):void 0)||[];_e.push(at(Ie.value)),this.map.set(Ie.param,_e);break;case"d":if(void 0===Ie.value){this.map.delete(Ie.param);break}{let mt=this.map.get(Ie.param)||[];const ct=mt.indexOf(at(Ie.value));-1!==ct&&mt.splice(ct,1),mt.length>0?this.map.set(Ie.param,mt):this.map.delete(Ie.param)}}}),this.cloneFrom=this.updates=null)}}class qt{constructor(){this.map=new Map}set(Ie,_e){return this.map.set(Ie,_e),this}get(Ie){return this.map.has(Ie)||this.map.set(Ie,Ie.defaultValue()),this.map.get(Ie)}delete(Ie){return this.map.delete(Ie),this}has(Ie){return this.map.has(Ie)}keys(){return this.map.keys()}}function gt(dt){return typeof ArrayBuffer<"u"&&dt instanceof ArrayBuffer}function Be(dt){return typeof Blob<"u"&&dt instanceof Blob}function ut(dt){return typeof FormData<"u"&&dt instanceof FormData}class se{constructor(Ie,_e,mt,ct){let rn;if(this.url=_e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ie.toUpperCase(),function xe(dt){switch(dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ct?(this.body=void 0!==mt?mt:null,rn=ct):rn=mt,rn&&(this.reportProgress=!!rn.reportProgress,this.withCredentials=!!rn.withCredentials,rn.responseType&&(this.responseType=rn.responseType),rn.headers&&(this.headers=rn.headers),rn.context&&(this.context=rn.context),rn.params&&(this.params=rn.params)),this.headers||(this.headers=new ie),this.context||(this.context=new qt),this.params){const Dn=this.params.toString();if(0===Dn.length)this.urlWithParams=_e;else{const Qn=_e.indexOf("?");this.urlWithParams=_e+(-1===Qn?"?":Qn<_e.length-1?"&":"")+Dn}}else this.params=new it,this.urlWithParams=_e}serializeBody(){return null===this.body?null:gt(this.body)||Be(this.body)||ut(this.body)||function ee(dt){return typeof URLSearchParams<"u"&&dt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof it?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ut(this.body)?null:Be(this.body)?this.body.type||null:gt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof it?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ie={}){const _e=Ie.method||this.method,mt=Ie.url||this.url,ct=Ie.responseType||this.responseType,rn=void 0!==Ie.body?Ie.body:this.body,Dn=void 0!==Ie.withCredentials?Ie.withCredentials:this.withCredentials,Qn=void 0!==Ie.reportProgress?Ie.reportProgress:this.reportProgress;let zt=Ie.headers||this.headers,Jn=Ie.params||this.params;const vn=Ie.context??this.context;return void 0!==Ie.setHeaders&&(zt=Object.keys(Ie.setHeaders).reduce((br,wn)=>br.set(wn,Ie.setHeaders[wn]),zt)),Ie.setParams&&(Jn=Object.keys(Ie.setParams).reduce((br,wn)=>br.set(wn,Ie.setParams[wn]),Jn)),new se(_e,mt,rn,{params:Jn,headers:zt,context:vn,reportProgress:Qn,responseType:ct,withCredentials:Dn})}}var ze=(()=>((ze=ze||{})[ze.Sent=0]="Sent",ze[ze.UploadProgress=1]="UploadProgress",ze[ze.ResponseHeader=2]="ResponseHeader",ze[ze.DownloadProgress=3]="DownloadProgress",ze[ze.Response=4]="Response",ze[ze.User=5]="User",ze))();class Pe{constructor(Ie,_e=200,mt="OK"){this.headers=Ie.headers||new ie,this.status=void 0!==Ie.status?Ie.status:_e,this.statusText=Ie.statusText||mt,this.url=Ie.url||null,this.ok=this.status>=200&&this.status<300}}class Ue extends Pe{constructor(Ie={}){super(Ie),this.type=ze.ResponseHeader}clone(Ie={}){return new Ue({headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class Ke extends Pe{constructor(Ie={}){super(Ie),this.type=ze.Response,this.body=void 0!==Ie.body?Ie.body:null}clone(Ie={}){return new Ke({body:void 0!==Ie.body?Ie.body:this.body,headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class Ye extends Pe{constructor(Ie){super(Ie,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ie.url||"(unknown url)"}`:`Http failure response for ${Ie.url||"(unknown url)"}: ${Ie.status} ${Ie.statusText}`,this.error=Ie.error||null}}function Mt(dt,Ie){return{body:Ie,headers:dt.headers,context:dt.context,observe:dt.observe,params:dt.params,reportProgress:dt.reportProgress,responseType:dt.responseType,withCredentials:dt.withCredentials}}let kt=(()=>{class dt{constructor(_e){this.handler=_e}request(_e,mt,ct={}){let rn;if(_e instanceof se)rn=_e;else{let zt,Jn;zt=ct.headers instanceof ie?ct.headers:new ie(ct.headers),ct.params&&(Jn=ct.params instanceof it?ct.params:new it({fromObject:ct.params})),rn=new se(_e,mt,void 0!==ct.body?ct.body:null,{headers:zt,context:ct.context,params:Jn,reportProgress:ct.reportProgress,responseType:ct.responseType||"json",withCredentials:ct.withCredentials})}const Dn=(0,Z.of)(rn).pipe((0,de.b)(zt=>this.handler.handle(zt)));if(_e instanceof se||"events"===ct.observe)return Dn;const Qn=Dn.pipe((0,Le.h)(zt=>zt instanceof Ke));switch(ct.observe||"body"){case"body":switch(rn.responseType){case"arraybuffer":return Qn.pipe((0,qe.U)(zt=>{if(null!==zt.body&&!(zt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return zt.body}));case"blob":return Qn.pipe((0,qe.U)(zt=>{if(null!==zt.body&&!(zt.body instanceof Blob))throw new Error("Response is not a Blob.");return zt.body}));case"text":return Qn.pipe((0,qe.U)(zt=>{if(null!==zt.body&&"string"!=typeof zt.body)throw new Error("Response is not a string.");return zt.body}));default:return Qn.pipe((0,qe.U)(zt=>zt.body))}case"response":return Qn;default:throw new Error(`Unreachable: unhandled observe type ${ct.observe}}`)}}delete(_e,mt={}){return this.request("DELETE",_e,mt)}get(_e,mt={}){return this.request("GET",_e,mt)}head(_e,mt={}){return this.request("HEAD",_e,mt)}jsonp(_e,mt){return this.request("JSONP",_e,{params:(new it).append(mt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(_e,mt={}){return this.request("OPTIONS",_e,mt)}patch(_e,mt,ct={}){return this.request("PATCH",_e,Mt(ct,mt))}post(_e,mt,ct={}){return this.request("POST",_e,Mt(ct,mt))}put(_e,mt,ct={}){return this.request("PUT",_e,Mt(ct,mt))}}return dt.\u0275fac=function(_e){return new(_e||dt)(h.LFG(be))},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})();class Bt{constructor(Ie,_e){this.next=Ie,this.interceptor=_e}handle(Ie){return this.interceptor.intercept(Ie,this.next)}}const gn=new h.OlP("HTTP_INTERCEPTORS");let xn=(()=>{class dt{intercept(_e,mt){return mt.handle(_e)}}return dt.\u0275fac=function(_e){return new(_e||dt)},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Cr=/^\)\]\}',?\n/;let lr=(()=>{class dt{constructor(_e){this.xhrFactory=_e}handle(_e){if("JSONP"===_e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new P.y(mt=>{const ct=this.xhrFactory.build();if(ct.open(_e.method,_e.urlWithParams),_e.withCredentials&&(ct.withCredentials=!0),_e.headers.forEach((Te,le)=>ct.setRequestHeader(Te,le.join(","))),_e.headers.has("Accept")||ct.setRequestHeader("Accept","application/json, text/plain, */*"),!_e.headers.has("Content-Type")){const Te=_e.detectContentTypeHeader();null!==Te&&ct.setRequestHeader("Content-Type",Te)}if(_e.responseType){const Te=_e.responseType.toLowerCase();ct.responseType="json"!==Te?Te:"text"}const rn=_e.serializeBody();let Dn=null;const Qn=()=>{if(null!==Dn)return Dn;const Te=ct.statusText||"OK",le=new ie(ct.getAllResponseHeaders()),we=function ur(dt){return"responseURL"in dt&&dt.responseURL?dt.responseURL:/^X-Request-URL:/m.test(dt.getAllResponseHeaders())?dt.getResponseHeader("X-Request-URL"):null}(ct)||_e.url;return Dn=new Ue({headers:le,status:ct.status,statusText:Te,url:we}),Dn},zt=()=>{let{headers:Te,status:le,statusText:we,url:Oe}=Qn(),Re=null;204!==le&&(Re=typeof ct.response>"u"?ct.responseText:ct.response),0===le&&(le=Re?200:0);let wt=le>=200&&le<300;if("json"===_e.responseType&&"string"==typeof Re){const Dt=Re;Re=Re.replace(Cr,"");try{Re=""!==Re?JSON.parse(Re):null}catch(Yt){Re=Dt,wt&&(wt=!1,Re={error:Yt,text:Re})}}wt?(mt.next(new Ke({body:Re,headers:Te,status:le,statusText:we,url:Oe||void 0})),mt.complete()):mt.error(new Ye({error:Re,headers:Te,status:le,statusText:we,url:Oe||void 0}))},Jn=Te=>{const{url:le}=Qn(),we=new Ye({error:Te,status:ct.status||0,statusText:ct.statusText||"Unknown Error",url:le||void 0});mt.error(we)};let vn=!1;const br=Te=>{vn||(mt.next(Qn()),vn=!0);let le={type:ze.DownloadProgress,loaded:Te.loaded};Te.lengthComputable&&(le.total=Te.total),"text"===_e.responseType&&!!ct.responseText&&(le.partialText=ct.responseText),mt.next(le)},wn=Te=>{let le={type:ze.UploadProgress,loaded:Te.loaded};Te.lengthComputable&&(le.total=Te.total),mt.next(le)};return ct.addEventListener("load",zt),ct.addEventListener("error",Jn),ct.addEventListener("timeout",Jn),ct.addEventListener("abort",Jn),_e.reportProgress&&(ct.addEventListener("progress",br),null!==rn&&ct.upload&&ct.upload.addEventListener("progress",wn)),ct.send(rn),mt.next({type:ze.Sent}),()=>{ct.removeEventListener("error",Jn),ct.removeEventListener("abort",Jn),ct.removeEventListener("load",zt),ct.removeEventListener("timeout",Jn),_e.reportProgress&&(ct.removeEventListener("progress",br),null!==rn&&ct.upload&&ct.upload.removeEventListener("progress",wn)),ct.readyState!==ct.DONE&&ct.abort()}})}}return dt.\u0275fac=function(_e){return new(_e||dt)(h.LFG(C.JF))},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Mr=new h.OlP("XSRF_COOKIE_NAME"),dn=new h.OlP("XSRF_HEADER_NAME");class Xn{}let Lr=(()=>{class dt{constructor(_e,mt,ct){this.doc=_e,this.platform=mt,this.cookieName=ct,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const _e=this.doc.cookie||"";return _e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(_e,this.cookieName),this.lastCookieString=_e),this.lastToken}}return dt.\u0275fac=function(_e){return new(_e||dt)(h.LFG(C.K0),h.LFG(h.Lbi),h.LFG(Mr))},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),mr=(()=>{class dt{constructor(_e,mt){this.tokenService=_e,this.headerName=mt}intercept(_e,mt){const ct=_e.url.toLowerCase();if("GET"===_e.method||"HEAD"===_e.method||ct.startsWith("http://")||ct.startsWith("https://"))return mt.handle(_e);const rn=this.tokenService.getToken();return null!==rn&&!_e.headers.has(this.headerName)&&(_e=_e.clone({headers:_e.headers.set(this.headerName,rn)})),mt.handle(_e)}}return dt.\u0275fac=function(_e){return new(_e||dt)(h.LFG(Xn),h.LFG(dn))},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),en=(()=>{class dt{constructor(_e,mt){this.backend=_e,this.injector=mt,this.chain=null}handle(_e){if(null===this.chain){const mt=this.injector.get(gn,[]);this.chain=mt.reduceRight((ct,rn)=>new Bt(ct,rn),this.backend)}return this.chain.handle(_e)}}return dt.\u0275fac=function(_e){return new(_e||dt)(h.LFG(tt),h.LFG(h.zs3))},dt.\u0275prov=h.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),er=(()=>{class dt{static disable(){return{ngModule:dt,providers:[{provide:mr,useClass:xn}]}}static withOptions(_e={}){return{ngModule:dt,providers:[_e.cookieName?{provide:Mr,useValue:_e.cookieName}:[],_e.headerName?{provide:dn,useValue:_e.headerName}:[]]}}}return dt.\u0275fac=function(_e){return new(_e||dt)},dt.\u0275mod=h.oAB({type:dt}),dt.\u0275inj=h.cJS({providers:[mr,{provide:gn,useExisting:mr,multi:!0},{provide:Xn,useClass:Lr},{provide:Mr,useValue:"XSRF-TOKEN"},{provide:dn,useValue:"X-XSRF-TOKEN"}]}),dt})(),fr=(()=>{class dt{}return dt.\u0275fac=function(_e){return new(_e||dt)},dt.\u0275mod=h.oAB({type:dt}),dt.\u0275inj=h.cJS({providers:[kt,{provide:be,useClass:en},lr,{provide:tt,useExisting:lr}],imports:[er.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),dt})()},4650:(an,ht,j)=>{j.d(ht,{$8M:()=>Ra,$Z:()=>_f,AFp:()=>G0,ALo:()=>l0,AaK:()=>be,AsE:()=>Z_,CHM:()=>Go,CRH:()=>E0,CZH:()=>Um,CqO:()=>Xp,D6c:()=>RI,EJc:()=>zC,EpF:()=>Qp,F4k:()=>hm,FYo:()=>zh,FiY:()=>_a,G48:()=>fI,Gf:()=>y0,GfV:()=>Id,Gpc:()=>fe,Gre:()=>sv,JOm:()=>Au,KtG:()=>Oo,LFG:()=>Oi,LSH:()=>Ec,Lbi:()=>HC,Lck:()=>Bw,MAs:()=>Zd,MMx:()=>ny,NdJ:()=>eg,OlP:()=>oi,Oqu:()=>z_,PXZ:()=>aI,Q6J:()=>cc,QGY:()=>Jp,QP$:()=>jt,Qsj:()=>Zh,R0b:()=>zl,RDi:()=>Jl,Rgc:()=>cg,SBq:()=>Sc,Sil:()=>qC,Suo:()=>v0,TTD:()=>Nr,TgZ:()=>Uh,VKq:()=>t0,W1O:()=>b0,WLB:()=>n0,X6Q:()=>hI,XFs:()=>en,Xpm:()=>Oe,Xts:()=>Hu,Y36:()=>Fc,YKP:()=>zv,YNc:()=>jc,Yjl:()=>Je,Yz7:()=>Kn,Z0I:()=>dr,ZZ4:()=>Ay,_Bn:()=>Wv,_UZ:()=>qp,_Vd:()=>Ac,_c5:()=>xI,_uU:()=>Qd,aQg:()=>Sy,c2e:()=>GC,cJS:()=>mn,cg1:()=>q_,dDg:()=>rI,dqk:()=>ct,eFA:()=>rE,ekj:()=>e,eoX:()=>eE,f3M:()=>Dl,g9A:()=>z0,h0i:()=>Wf,hGG:()=>MI,hij:()=>xm,iGM:()=>_0,ifc:()=>mt,ip1:()=>H0,jDz:()=>qv,kL8:()=>_v,lG2:()=>Ir,lcZ:()=>c0,lqb:()=>Gu,lri:()=>J0,n5z:()=>Ji,oAB:()=>Yt,oxw:()=>ng,q4F:()=>bd,qLn:()=>Zr,qOj:()=>jp,qZA:()=>$c,rWj:()=>X0,s9C:()=>Vh,sBO:()=>pI,sIi:()=>qu,s_b:()=>km,soG:()=>Vm,tb:()=>Z0,tp0:()=>bi,uIk:()=>fd,vHH:()=>nt,vpe:()=>Gc,wAp:()=>Dr,xi3:()=>d0,xp6:()=>Od,z2F:()=>Bm,zSh:()=>kl,zs3:()=>El});var C=j(7579),h=j(727),Z=j(9751),P=j(6451),de=j(3099);function Le(t){for(let r in t)if(t[r]===Le)return r;throw Error("Could not find renamed property on target object.")}function qe(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function tt(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ie=Le({__forward_ref__:Le});function fe(t){return t.__forward_ref__=fe,t.toString=function(){return be(this())},t}function Ce(t){return st(t)?t():t}function st(t){return"function"==typeof t&&t.hasOwnProperty(ie)&&t.__forward_ref__===fe}class nt extends Error{constructor(r,s){super(function Ot(t,r){return`NG0${Math.abs(t)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function at(t){return"string"==typeof t?t:null==t?"":String(t)}function gt(t,r){throw new nt(-201,!1)}function xn(t,r){null==t&&function Et(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Kn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ir(t){return Cr(t,dn)||Cr(t,Lr)}function dr(t){return null!==ir(t)}function Cr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Mr(t){return t&&(t.hasOwnProperty(Xn)||t.hasOwnProperty(mr))?t[Xn]:null}const dn=Le({\u0275prov:Le}),Xn=Le({\u0275inj:Le}),Lr=Le({ngInjectableDef:Le}),mr=Le({ngInjectorDef:Le});var en=(()=>((en=en||{})[en.Default=0]="Default",en[en.Host=1]="Host",en[en.Self=2]="Self",en[en.SkipSelf=4]="SkipSelf",en[en.Optional=8]="Optional",en))();let hr;function er(t){const r=hr;return hr=t,r}function fr(t,r,s){const a=ir(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&en.Optional?null:void 0!==r?r:void gt(be(t))}function vr(t){return{toString:t}.toString()}var dt=(()=>((dt=dt||{})[dt.OnPush=0]="OnPush",dt[dt.Default=1]="Default",dt))(),mt=(()=>{return(t=mt||(mt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",mt;var t})();const ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},zt=[],Jn=Le({\u0275cmp:Le}),vn=Le({\u0275dir:Le}),br=Le({\u0275pipe:Le}),wn=Le({\u0275mod:Le}),Te=Le({\u0275fac:Le}),le=Le({__NG_ELEMENT_ID__:Le});let we=0;function Oe(t){return vr(()=>{const s=!0===t.standalone,a={},d={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||mt.Emulated,id:"c"+we++,styles:t.styles||zt,_:null,setInput:null,schemas:t.schemas||null,tView:null},g=t.dependencies,b=t.features;return d.inputs=Zn(t.inputs,a),d.outputs=Zn(t.outputs),b&&b.forEach(R=>R(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(wt).filter(Dt):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ct).filter(Dt):null,d})}function wt(t){return Se(t)||Fe(t)}function Dt(t){return null!==t}function Yt(t){return vr(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Zn(t,r){if(null==t)return Qn;const s={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),s[d]=a,r&&(r[d]=g)}return s}const Ir=Oe;function Je(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Se(t){return t[Jn]||null}function Fe(t){return t[vn]||null}function Ct(t){return t[br]||null}function jt(t){const r=Se(t)||Fe(t)||Ct(t);return null!==r&&r.standalone}function fn(t,r){const s=t[wn]||null;if(!s&&!0===r)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return s}function Zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function un(t){return Array.isArray(t)&&!0===t[1]}function Mn(t){return 0!=(8&t.flags)}function Fn(t){return 2==(2&t.flags)}function $n(t){return 1==(1&t.flags)}function $r(t){return null!==t.template}function ys(t){return 0!=(256&t[2])}function Ni(t,r){return t.hasOwnProperty(Te)?t[Te]:null}class Ai{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Nr(){return Os}function Os(t){return t.type.prototype.ngOnChanges&&(t.setInput=qi),Zs}function Zs(){const t=ks(this),r=t?.current;if(r){const s=t.previous;if(s===Qn)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function qi(t,r,s,a){const d=ks(t)||function ia(t,r){return t[_o]=r}(t,{previous:Qn,current:null}),g=d.current||(d.current={}),b=d.previous,R=this.declaredInputs[s],L=b[R];g[R]=new Ai(L&&L.currentValue,r,b===Qn),t[a]=r}Nr.ngInherit=!0;const _o="__ngSimpleChanges__";function ks(t){return t[_o]||null}function Gr(t){for(;Array.isArray(t);)t=t[0];return t}function Ge(t,r){return Gr(r[t])}function lt(t,r){return Gr(r[t.index])}function Tt(t,r){return t.data[r]}function ln(t,r){return t[r]}function cn(t,r){const s=r[t];return Zt(s)?s:s[0]}function Tr(t){return 4==(4&t[2])}function Ln(t){return 64==(64&t[2])}function Yr(t,r){return null==r?null:t[r]}function _i(t){t[18]=0}function ii(t,r){t[5]+=r;let s=t,a=t[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Hn={lFrame:zo(null),bindingsEnabled:!0};function Mi(){return Hn.bindingsEnabled}function Vt(){return Hn.lFrame.lView}function Rr(){return Hn.lFrame.tView}function Go(t){return Hn.lFrame.contextLView=t,t[8]}function Oo(t){return Hn.lFrame.contextLView=null,t}function Vi(){let t=Fs();for(;null!==t&&64===t.type;)t=t.parent;return t}function Fs(){return Hn.lFrame.currentTNode}function vs(t,r){const s=Hn.lFrame;s.currentTNode=t,s.isParent=r}function hu(){return Hn.lFrame.isParent}function Bi(){const t=Hn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function oa(){return Hn.lFrame.bindingIndex++}function bs(t){const r=Hn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Ts(t,r){const s=Hn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Da(r)}function Da(t){Hn.lFrame.currentDirectiveIndex=t}function Aa(){return Hn.lFrame.currentQueryIndex}function Ha(t){Hn.lFrame.currentQueryIndex=t}function la(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function Ds(t,r,s){if(s&en.SkipSelf){let d=r,g=t;for(;!(d=d.parent,null!==d||s&en.Host||(d=la(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;r=d,t=g}const a=Hn.lFrame=vo();return a.currentTNode=r,a.lView=t,!0}function Fo(t){const r=vo(),s=t[1];Hn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function vo(){const t=Hn.lFrame,r=null===t?null:t.child;return null===r?zo(t):r}function zo(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Sa(){const t=Hn.lFrame;return Hn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const F=Sa;function z(){const t=Sa();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ne(){return Hn.lFrame.selectedIndex}function It(t){Hn.lFrame.selectedIndex=t}function At(){const t=Hn.lFrame;return Tt(t.tView,t.selectedIndex)}function Hr(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:R,ngAfterViewInit:L,ngAfterViewChecked:G,ngOnDestroy:X}=g;b&&(t.contentHooks||(t.contentHooks=[])).push(-s,b),R&&((t.contentHooks||(t.contentHooks=[])).push(s,R),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,R)),L&&(t.viewHooks||(t.viewHooks=[])).push(-s,L),G&&((t.viewHooks||(t.viewHooks=[])).push(s,G),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,G)),null!=X&&(t.destroyHooks||(t.destroyHooks=[])).push(s,X)}}function si(t,r,s){zr(t,r,3,s)}function uo(t,r,s,a){(3&t[2])===s&&zr(t,r,s,a)}function Or(t,r){let s=t[2];(3&s)===r&&(s&=2047,s+=1,t[2]=s)}function zr(t,r,s,a){const g=a??-1,b=r.length-1;let R=0;for(let L=void 0!==a?65535&t[18]:0;L<b;L++)if("number"==typeof r[L+1]){if(R=r[L],null!=a&&R>=a)break}else r[L]<0&&(t[18]+=65536),(R<g||-1==g)&&(os(t,s,r,L),t[18]=(4294901760&t[18])+L+2),L++}function os(t,r,s,a){const d=s[a]<0,g=s[a+1],R=t[d?-s[a]:s[a]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{g.call(R)}finally{}}}else try{g.call(R)}finally{}}class as{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function hn(t,r,s){let a=0;for(;a<s.length;){const d=s[a];if("number"==typeof d){if(0!==d)break;a++;const g=s[a++],b=s[a++],R=s[a++];t.setAttribute(r,b,R,g)}else{const g=d,b=s[++a];Jt(g)?t.setProperty(r,g,b):t.setAttribute(r,g,b),a++}}return a}function St(t){return 3===t||4===t||6===t}function Jt(t){return 64===t.charCodeAt(0)}function ji(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?s=d:0===s||Pu(t,s,d,null,-1===s||2===s?r[++a]:null)}}return t}function Pu(t,r,s,a,d){let g=0,b=t.length;if(-1===r)b=-1;else for(;g<t.length;){const R=t[g++];if("number"==typeof R){if(R===r){b=-1;break}if(R>r){b=g-1;break}}}for(;g<t.length;){const R=t[g];if("number"==typeof R)break;if(R===s){if(null===a)return void(null!==d&&(t[g+1]=d));if(a===t[g+1])return void(t[g+2]=d)}g++,null!==a&&g++,null!==d&&g++}-1!==b&&(t.splice(b,0,r),g=b+1),t.splice(g++,0,s),null!==a&&t.splice(g++,0,a),null!==d&&t.splice(g++,0,d)}function Tl(t){return-1!==t}function ca(t){return 32767&t}function Zo(t,r){let s=function Zl(t){return t>>16}(t),a=r;for(;s>0;)a=a[15],s--;return a}let Qu=!0;function Vs(t){const r=Qu;return Qu=t,r}let xa=0;const Vn={};function qo(t,r){const s=sr(t,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(t.injectorIndex=r.length,li(a.data,t),li(r,null),li(a.blueprint,null));const d=Ys(t,r),g=t.injectorIndex;if(Tl(d)){const b=ca(d),R=Zo(d,r),L=R[1].data;for(let G=0;G<8;G++)r[g+G]=R[b+G]|L[b+G]}return r[g+8]=d,g}function li(t,r){t.push(0,0,0,0,0,0,0,0,r)}function sr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Ys(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,d=r;for(;null!==d;){if(a=Io(d),null===a)return-1;if(s++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Vr(t,r,s){!function wo(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(le)&&(a=s[le]),null==a&&(a=s[le]=xa++);const d=255&a;r.data[t+(d>>5)]|=1<<d}(t,r,s)}function Ii(t,r,s){if(s&en.Optional)return t;gt()}function on(t,r,s,a){if(s&en.Optional&&void 0===a&&(a=null),0==(s&(en.Self|en.Host))){const d=t[9],g=er(void 0);try{return d?d.get(r,a,s&en.Optional):fr(r,a,s&en.Optional)}finally{er(g)}}return Ii(a,0,s)}function Co(t,r,s,a=en.Default,d){if(null!==t){if(1024&r[2]){const b=function Nu(t,r,s,a,d){let g=t,b=r;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const R=Wa(g,b,s,a|en.Self,Vn);if(R!==Vn)return R;let L=g.parent;if(!L){const G=b[21];if(G){const X=G.get(s,Vn,a);if(X!==Vn)return X}L=Io(b),b=b[15]}g=L}return d}(t,r,s,a,Vn);if(b!==Vn)return b}const g=Wa(t,r,s,a,Vn);if(g!==Vn)return g}return on(r,s,a,d)}function Wa(t,r,s,a,d){const g=function fc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(le)?t[le]:void 0;return"number"==typeof r?r>=0?255&r:Bs:r}(s);if("function"==typeof g){if(!Ds(r,t,a))return a&en.Host?Ii(d,0,a):on(r,s,a,d);try{const b=g(a);if(null!=b||a&en.Optional)return b;gt()}finally{F()}}else if("number"==typeof g){let b=null,R=sr(t,r),L=-1,G=a&en.Host?r[16][6]:null;for((-1===R||a&en.SkipSelf)&&(L=-1===R?Ys(t,r):r[R+8],-1!==L&&za(a,!1)?(b=r[1],R=ca(L),r=Zo(L,r)):R=-1);-1!==R;){const X=r[1];if(fa(g,R,X.data)){const ge=ha(R,r,s,b,a,G);if(ge!==Vn)return ge}L=r[R+8],-1!==L&&za(a,r[1].data[R+8]===G)&&fa(g,R,r)?(b=X,R=ca(L),r=Zo(L,r)):R=-1}}return d}function ha(t,r,s,a,d,g){const b=r[1],R=b.data[t+8],X=Ma(R,b,s,null==a?Fn(R)&&Qu:a!=b&&0!=(3&R.type),d&en.Host&&g===R);return null!==X?Ko(r,b,X,R):Vn}function Ma(t,r,s,a,d){const g=t.providerIndexes,b=r.data,R=1048575&g,L=t.directiveStart,X=g>>20,Qe=d?R+X:t.directiveEnd;for(let _t=a?R:R+X;_t<Qe;_t++){const Wt=b[_t];if(_t<L&&s===Wt||_t>=L&&Wt.type===s)return _t}if(d){const _t=b[L];if(_t&&$r(_t)&&_t.type===s)return L}return null}function Ko(t,r,s,a){let d=t[s];const g=r.data;if(function Eo(t){return t instanceof as}(d)){const b=d;b.resolving&&function Ht(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new nt(-200,`Circular dependency in DI detected for ${t}${s}`)}(function it(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}(g[s]));const R=Vs(b.canSeeViewProviders);b.resolving=!0;const L=b.injectImpl?er(b.injectImpl):null;Ds(t,a,en.Default);try{d=t[s]=b.factory(void 0,g,t,a),r.firstCreatePass&&s>=a.directiveStart&&function pi(t,r,s){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:g}=r.type.prototype;if(a){const b=Os(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,b)}d&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,d),g&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,g))}(s,g[s],r)}finally{null!==L&&er(L),Vs(R),b.resolving=!1,F()}}return d}function fa(t,r,s){return!!(s[r+(t>>5)]&1<<t)}function za(t,r){return!(t&en.Self||t&en.Host&&r)}class pa{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Co(this._tNode,this._lView,r,a,s)}}function Bs(){return new pa(Vi(),Vt())}function Ji(t){return vr(()=>{const r=t.prototype.constructor,s=r[Te]||mu(r),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const g=d[Te]||mu(d);if(g&&g!==s)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function mu(t){return st(t)?()=>{const r=mu(Ce(t));return r&&r()}:Ni(t)}function Io(t){const r=t[1],s=r.type;return 2===s?r.declTNode:1===s?t[6]:null}function Ra(t){return function da(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let d=0;for(;d<a;){const g=s[d];if(St(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<a&&"string"==typeof s[d];)d++;else{if(g===r)return s[d+1];d+=2}}}return null}(Vi(),t)}const ga="__parameters__";function Qs(t,r,s){return vr(()=>{const a=function Za(t){return function(...s){if(t){const a=t(...s);for(const d in a)this[d]=a[d]}}}(r);function d(...g){if(this instanceof d)return a.apply(this,g),this;const b=new d(...g);return R.annotation=b,R;function R(L,G,X){const ge=L.hasOwnProperty(ga)?L[ga]:Object.defineProperty(L,ga,{value:[]})[ga];for(;ge.length<=X;)ge.push(null);return(ge[X]=ge[X]||[]).push(b),L}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class oi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Kn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Br(t,r){void 0===r&&(r=t);for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?(r===t&&(r=t.slice(0,s)),Br(a,r)):r!==t&&r.push(a)}return r}function lo(t,r){t.forEach(s=>Array.isArray(s)?lo(s,r):r(s))}function Xs(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function gi(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function mi(t,r,s){let a=D(t,r);return a>=0?t[1|a]=s:(a=~a,function Ka(t,r,s,a){let d=t.length;if(d==r)t.push(s,a);else if(1===d)t.push(a,t[0]),t[0]=s;else{for(d--,t.push(t[d-1],t[d]);d>r;)t[d]=t[d-2],d--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function yu(t,r){const s=D(t,r);if(s>=0)return t[1|s]}function D(t,r){return function T(t,r,s){let a=0,d=t.length>>s;for(;d!==a;){const g=a+(d-a>>1),b=t[g<<s];if(r===b)return g<<s;b>r?d=g:a=g+1}return~(d<<s)}(t,r,1)}const kr={},Xi="__NG_DI_FLAG__",es="ngTempTokenPath",js=/\n/gm,Oa="__source";let Yo;function Qa(t){const r=Yo;return Yo=t,r}function us(t,r=en.Default){if(void 0===Yo)throw new nt(-203,!1);return null===Yo?fr(t,void 0,r):Yo.get(t,r&en.Optional?null:void 0,r)}function Oi(t,r=en.Default){return(function Yn(){return hr}()||us)(Ce(t),r)}function Dl(t,r=en.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Oi(t,r)}function Al(t){const r=[];for(let s=0;s<t.length;s++){const a=Ce(t[s]);if(Array.isArray(a)){if(0===a.length)throw new nt(900,!1);let d,g=en.Default;for(let b=0;b<a.length;b++){const R=a[b],L=gc(R);"number"==typeof L?-1===L?d=R.token:g|=L:d=R}r.push(Oi(d,g))}else r.push(Oi(a))}return r}function bo(t,r){return t[Xi]=r,t.prototype[Xi]=r,t}function gc(t){return t[Xi]}const _a=bo(Qs("Optional"),8),bi=bo(Qs("SkipSelf"),4);let ol;function Jl(t){ol=t}class Qo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ua(t){return t instanceof Qo?t.changingThisBreaksApplicationSecurity:t}const ae=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ui=(()=>((ui=ui||{})[ui.NONE=0]="NONE",ui[ui.HTML=1]="HTML",ui[ui.STYLE=2]="STYLE",ui[ui.SCRIPT=3]="SCRIPT",ui[ui.URL=4]="URL",ui[ui.RESOURCE_URL=5]="RESOURCE_URL",ui))();function Ec(t){const r=function wa(){const t=Vt();return t&&t[12]}();return r?r.sanitize(ui.URL,t)||"":function Jo(t,r){const s=function _c(t){return t instanceof Qo&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(t,"URL")?Ua(t):function Xe(t){return(t=String(t)).match(ae)?t:"unsafe:"+t}(at(t))}const Hu=new oi("ENVIRONMENT_INITIALIZER"),Yc=new oi("INJECTOR",-1),Hs=new oi("INJECTOR_DEF_TYPES");class no{get(r,s=kr){if(s===kr){const a=new Error(`NullInjectorError: No provider for ${be(r)}!`);throw a.name="NullInjectorError",a}return s}}function wc(...t){return{\u0275providers:rc(0,t)}}function rc(t,...r){const s=[],a=new Set;let d;return lo(r,g=>{const b=g;Cc(b,s,[],a)&&(d||(d=[]),d.push(b))}),void 0!==d&&Vo(d,s),s}function Vo(t,r){for(let s=0;s<t.length;s++){const{providers:d}=t[s];lo(d,g=>{r.push(g)})}}function Cc(t,r,s,a){if(!(t=Ce(t)))return!1;let d=null,g=Mr(t);const b=!g&&Se(t);if(g||b){if(b&&!b.standalone)return!1;d=t}else{const L=t.ngModule;if(g=Mr(L),!g)return!1;d=L}const R=a.has(d);if(b){if(R)return!1;if(a.add(d),b.dependencies){const L="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const G of L)Cc(G,r,s,a)}}else{if(!g)return!1;{if(null!=g.imports&&!R){let G;a.add(d);try{lo(g.imports,X=>{Cc(X,r,s,a)&&(G||(G=[]),G.push(X))})}finally{}void 0!==G&&Vo(G,r)}if(!R){const G=Ni(d)||(()=>new d);r.push({provide:d,useFactory:G,deps:zt},{provide:Hs,useValue:d,multi:!0},{provide:Hu,useValue:()=>Oi(d),multi:!0})}const L=g.providers;null==L||R||lo(L,X=>{r.push(X)})}}return d!==t&&void 0!==t.providers}const ic=Le({provide:String,useValue:Le});function Ic(t){return null!==t&&"object"==typeof t&&ic in t}function hl(t){return"function"==typeof t}const kl=new oi("Set Injector scope."),So={},Tu={};let fl;function Tc(){return void 0===fl&&(fl=new no),fl}class Gu{}class Fl extends Gu{constructor(r,s,a,d){super(),this.parent=s,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gs(r,b=>this.processProvider(b)),this.records.set(Yc,Ba(void 0,this)),d.has("environment")&&this.records.set(Gu,Ba(void 0,this));const g=this.records.get(kl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Hs.multi,zt,en.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Qa(this),a=er(void 0);try{return r()}finally{Qa(s),er(a)}}get(r,s=kr,a=en.Default){this.assertNotDestroyed();const d=Qa(this),g=er(void 0);try{if(!(a&en.SkipSelf)){let R=this.records.get(r);if(void 0===R){const L=function Wh(t){return"function"==typeof t||"object"==typeof t&&t instanceof oi}(r)&&ir(r);R=L&&this.injectableDefInScope(L)?Ba(Wu(r),So):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(a&en.Self?Tc():this.parent).get(r,s=a&en.Optional&&s===kr?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[es]=b[es]||[]).unshift(be(r)),d)throw b;return function vu(t,r,s,a){const d=t[es];throw r[Oa]&&d.unshift(r[Oa]),t.message=function Ja(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=be(r);if(Array.isArray(r))d=r.map(be).join(" -> ");else if("object"==typeof r){let g=[];for(let b in r)if(r.hasOwnProperty(b)){let R=r[b];g.push(b+":"+("string"==typeof R?JSON.stringify(R):be(R)))}d=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${d}]: ${t.replace(js,"\n  ")}`}("\n"+t.message,d,s,a),t.ngTokenPath=d,t[es]=null,t}(b,r,"R3InjectorError",this.source)}throw b}finally{er(g),Qa(d)}}resolveInjectorInitializers(){const r=Qa(this),s=er(void 0);try{const a=this.get(Hu.multi,zt,en.Self);for(const d of a)d()}finally{Qa(r),er(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(be(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nt(205,!1)}processProvider(r){let s=hl(r=Ce(r))?r:Ce(r&&r.provide);const a=function rh(t){return Ic(t)?Ba(void 0,t.useValue):Ba(pl(t),So)}(r);if(hl(r)||!0!==r.multi)this.records.get(s);else{let d=this.records.get(s);d||(d=Ba(void 0,So,!0),d.factory=()=>Al(d.multi),this.records.set(s,d)),s=r,d.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===So&&(s.value=Tu,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ih(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ce(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Wu(t){const r=ir(t),s=null!==r?r.factory:Ni(t);if(null!==s)return s;if(t instanceof oi)throw new nt(204,!1);if(t instanceof Function)return function nh(t){const r=t.length;if(r>0)throw function co(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(r,"?"),new nt(204,!1);const s=function ur(t){const r=t&&(t[dn]||t[Lr]);if(r){const s=function lr(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new nt(204,!1)}function pl(t,r,s){let a;if(hl(t)){const d=Ce(t);return Ni(d)||Wu(d)}if(Ic(t))a=()=>Ce(t.useValue);else if(function sc(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Al(t.deps||[]));else if(function bc(t){return!(!t||!t.useExisting)}(t))a=()=>Oi(Ce(t.useExisting));else{const d=Ce(t&&(t.useClass||t.provide));if(!function Gh(t){return!!t.deps}(t))return Ni(d)||Wu(d);a=()=>new d(...Al(t.deps))}return a}function Ba(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function wd(t){return!!t.\u0275providers}function Gs(t,r){for(const s of t)Array.isArray(s)?Gs(s,r):wd(s)?Gs(s.\u0275providers,r):r(s)}class Ul{}class Cd{resolveComponentFactory(r){throw function ru(t){const r=Error(`No component factory found for ${be(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let Ac=(()=>{class t{}return t.NULL=new Cd,t})();function Bo(){return Du(Vi(),Vt())}function Du(t,r){return new Sc(lt(t,r))}let Sc=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=Bo,t})();function oc(t){return t instanceof Sc?t.nativeElement:t}class zh{}let Zh=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function iu(){const t=Vt(),s=cn(Vi().index,t);return(Zt(s)?s:t)[11]}(),t})(),qh=(()=>{class t{}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:()=>null}),t})();class Id{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const bd=new Id("14.2.0"),Td={};function Gn(t){return t.ngOriginalError}class Zr{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Gn(r);for(;s&&Gn(s);)s=Gn(s);return s||null}}const ed=new Map;let Dd=0;const jl="__ngContext__";function jo(t,r){Zt(r)?(t[jl]=r[20],function fg(t){ed.set(t[20],t)}(r)):t[jl]=r}function Ad(t){const r=t[jl];return"number"==typeof r?function Yh(t){return ed.get(t)||null}(r):r||null}function ah(t){const r=Ad(t);return r?Zt(r)?r:r.lView:null}function _l(t){return t instanceof Function?t():t}var Au=(()=>((Au=Au||{})[Au.Important=1]="Important",Au[Au.DashCase=2]="DashCase",Au))();function ch(t,r){return undefined(t,r)}function Md(t){const r=t[3];return un(r)?r[3]:r}function hh(t){return tf(t[13])}function Rd(t){return tf(t[4])}function tf(t){for(;null!==t&&!un(t);)t=t[4];return t}function m(t,r,s,a,d){if(null!=a){let g,b=!1;un(a)?g=a:Zt(a)&&(b=!0,a=a[0]);const R=Gr(a);0===t&&null!==s?null==d?zs(r,s,R):cs(r,s,R,d||null,!0):1===t&&null!==s?cs(r,s,R,d||null,!0):2===t?function id(t,r,s){const a=Zu(t,r);a&&function vl(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,R,b):3===t&&r.destroyNode(R),null!=g&&function wg(t,r,s,a,d){const g=s[7];g!==Gr(s)&&m(r,t,a,g,d);for(let R=10;R<s.length;R++){const L=s[R];sd(L[1],L,t,r,a,g)}}(r,t,g,s,d)}}function J(t,r,s){return t.createElement(r,s)}function Pi(t,r){const s=t[9],a=s.indexOf(r),d=r[3];512&r[2]&&(r[2]&=-513,ii(d,-1)),s.splice(a,1)}function ls(t,r){if(t.length<=10)return;const s=10+r,a=t[s];if(a){const d=a[17];null!==d&&d!==t&&Pi(d,a),r>0&&(t[s-1][4]=a[4]);const g=gi(t,10+r);!function $e(t,r){sd(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const b=g[19];null!==b&&b.detachView(g[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function ta(t,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&sd(t,r,s,3,null,null),function Tn(t){let r=t[13];if(!r)return ro(t[1],t);for(;r;){let s=null;if(Zt(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==t;)Zt(r)&&ro(r[1],r),r=r[3];null===r&&(r=t),Zt(r)&&ro(r[1],r),s=r&&r[4]}r=s}}(r)}}function ro(t,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function ms(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const d=r[s[a]];if(!(d instanceof as)){const g=s[a+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const R=d[g[b]],L=g[b+1];try{L.call(R)}finally{}}else try{g.call(d)}finally{}}}}(t,r),function ou(t,r){const s=t.cleanup,a=r[7];let d=-1;if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const b=s[g+1],R="function"==typeof b?b(r):Gr(r[b]),L=a[d=s[g+2]],G=s[g+3];"boolean"==typeof G?R.removeEventListener(s[g],L,G):G>=0?a[d=G]():a[d=-G].unsubscribe(),g+=2}else{const b=a[d=s[g+1]];s[g].call(b)}if(null!==a){for(let g=d+1;g<a.length;g++)(0,a[g])();r[7]=null}}(t,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&un(r[3])){s!==r[3]&&Pi(s,r);const a=r[19];null!==a&&a.detachView(t)}!function pg(t){ed.delete(t[20])}(r)}}function zu(t,r,s){return function Su(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const d=t.data[a.directiveStart].encapsulation;if(d===mt.None||d===mt.Emulated)return null}return lt(a,s)}(t,r.parent,s)}function cs(t,r,s,a,d){t.insertBefore(r,s,a,d)}function zs(t,r,s){t.appendChild(r,s)}function xu(t,r,s,a,d){null!==a?cs(t,r,s,a,d):zs(t,r,s)}function Zu(t,r){return t.parentNode(r)}let np=function tp(t,r,s){return 40&t.type?lt(t,s):null};function ph(t,r,s,a){const d=zu(t,a,r),g=r[11],R=function vg(t,r,s){return np(t,r,s)}(a.parent||r[6],a,r);if(null!=d)if(Array.isArray(s))for(let L=0;L<s.length;L++)xu(g,d,s[L],R,!1);else xu(g,d,s,R,!1)}function nf(t,r){if(null!==r){const s=r.type;if(3&s)return lt(r,t);if(4&s)return ip(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return nf(t,a);{const d=t[r.index];return un(d)?ip(-1,d):Gr(d)}}if(32&s)return ch(r,t)()||Gr(t[r.index]);{const a=rp(t,r);return null!==a?Array.isArray(a)?a[0]:nf(Md(t[16]),a):nf(t,r.next)}}return null}function rp(t,r){return null!==r?t[16][6].projection[r.projection]:null}function ip(t,r){const s=10+t+1;if(s<r.length){const a=r[s],d=a[1].firstChild;if(null!==d)return nf(a,d)}return r[7]}function Oc(t,r,s,a,d,g,b){for(;null!=s;){const R=a[s.index],L=s.type;if(b&&0===r&&(R&&jo(Gr(R),a),s.flags|=4),64!=(64&s.flags))if(8&L)Oc(t,r,s.child,a,d,g,!1),m(r,t,d,R,g);else if(32&L){const G=ch(s,a);let X;for(;X=G();)m(r,t,d,X,g);m(r,t,d,R,g)}else 16&L?sp(t,r,a,s,d,g):m(r,t,d,R,g);s=b?s.projectionNext:s.next}}function sd(t,r,s,a,d,g){Oc(s,a,t.firstChild,r,d,g,!1)}function sp(t,r,s,a,d,g){const b=s[16],L=b[6].projection[a.projection];if(Array.isArray(L))for(let G=0;G<L.length;G++)m(r,t,d,L[G],g);else Oc(t,r,L,b[3],d,g,!0)}function Ig(t,r,s){t.setAttribute(r,"style",s)}function gh(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function bg(t,r,s){let a=t.length;for(;;){const d=t.indexOf(r,s);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=r.length;if(d+g===a||t.charCodeAt(d+g)<=32)return d}s=d+1}}const op="ng-template";function Dg(t,r,s){let a=0;for(;a<t.length;){let d=t[a++];if(s&&"class"===d){if(d=t[a],-1!==bg(d.toLowerCase(),r,0))return!0}else if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}}return!1}function sf(t){return 4===t.type&&t.value!==op}function af(t,r,s){return r===(4!==t.type||s?t.value:op)}function mh(t,r,s){let a=4;const d=t.attrs||[],g=function Ag(t){for(let r=0;r<t.length;r++)if(St(t[r]))return r;return t.length}(d);let b=!1;for(let R=0;R<r.length;R++){const L=r[R];if("number"!=typeof L){if(!b)if(4&a){if(a=2|1&a,""!==L&&!af(t,L,s)||""===L&&1===r.length){if(au(a))return!1;b=!0}}else{const G=8&a?L:r[++R];if(8&a&&null!==t.attrs){if(!Dg(t.attrs,G,s)){if(au(a))return!1;b=!0}continue}const ge=ap(8&a?"class":L,d,sf(t),s);if(-1===ge){if(au(a))return!1;b=!0;continue}if(""!==G){let Qe;Qe=ge>g?"":d[ge+1].toLowerCase();const _t=8&a?Qe:null;if(_t&&-1!==bg(_t,G,0)||2&a&&G!==Qe){if(au(a))return!1;b=!0}}}}else{if(!b&&!au(a)&&!au(L))return!1;if(b&&au(L))continue;b=!1,a=L|1&a}}return au(a)||b}function au(t){return 0==(1&t)}function ap(t,r,s,a){if(null===r)return-1;let d=0;if(a||!s){let g=!1;for(;d<r.length;){const b=r[d];if(b===t)return d;if(3===b||6===b)g=!0;else{if(1===b||2===b){let R=r[++d];for(;"string"==typeof R;)R=r[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=g?1:2}return-1}return function Gm(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function uf(t,r,s=!1){for(let a=0;a<r.length;a++)if(mh(t,r[a],s))return!0;return!1}function xg(t,r){return t?":not("+r.trim()+")":r}function Wm(t){let r=t[0],s=1,a=2,d="",g=!1;for(;s<t.length;){let b=t[s];if("string"==typeof b)if(2&a){const R=t[++s];d+="["+b+(R.length>0?'="'+R+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!au(b)&&(r+=xg(g,d),d=""),a=b,g=g||!au(a);s++}return""!==d&&(r+=xg(g,d)),r}const Fr={};function Od(t){lf(Rr(),Vt(),Ne()+t,!1)}function lf(t,r,s,a){if(!a)if(3==(3&r[2])){const g=t.preOrderCheckHooks;null!==g&&si(r,g,s)}else{const g=t.preOrderHooks;null!==g&&uo(r,g,0,s)}It(s)}function cf(t,r=null,s=null,a){const d=vh(t,r,s,a);return d.resolveInjectorInitializers(),d}function vh(t,r=null,s=null,a,d=new Set){const g=[s||zt,wc(t)];return a=a||("object"==typeof t?void 0:be(t)),new Fl(g,r||Tc(),a||null,d)}let El=(()=>{class t{static create(s,a){if(Array.isArray(s))return cf({name:""},a,s,"");{const d=s.name??"";return cf({name:d},s.parent,s.providers,d)}}}return t.THROW_IF_NOT_FOUND=kr,t.NULL=new no,t.\u0275prov=Kn({token:t,providedIn:"any",factory:()=>Oi(Yc)}),t.__NG_ELEMENT_ID__=-1,t})();function Fc(t,r=en.Default){const s=Vt();return null===s?Oi(t,r):Co(Vi(),s,Ce(t),r)}function _f(){throw new Error("invalid")}function wl(t,r){return t<<17|r<<2}function Mu(t){return t>>17&32767}function yf(t){return 2|t}function uu(t){return(131068&t)>>2}function pp(t,r){return-131069&t|r<<2}function bh(t){return 1|t}function Gl(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a],g=s[a+1];if(-1!==g){const b=t.data[g];Ha(d),b.contentQueries(2,r[g],g)}}}function Ud(t,r,s,a,d,g,b,R,L,G,X){const ge=r.blueprint.slice();return ge[0]=d,ge[2]=76|a,(null!==X||t&&1024&t[2])&&(ge[2]|=1024),_i(ge),ge[3]=ge[15]=t,ge[8]=s,ge[10]=b||t&&t[10],ge[11]=R||t&&t[11],ge[12]=L||t&&t[12]||null,ge[9]=G||t&&t[9]||null,ge[6]=g,ge[20]=function xc(){return Dd++}(),ge[21]=X,ge[16]=2==r.type?t[16]:ge,ge}function Vd(t,r,s,a,d){let g=t.data[r];if(null===g)g=function Cp(t,r,s,a,d){const g=Fs(),b=hu(),L=t.data[r]=function bp(t,r,s,a,d,g){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,s,r,a,d);return null===t.firstChild&&(t.firstChild=L),null!==g&&(b?null==g.child&&null!==L.parent&&(g.child=L):null===g.next&&(g.next=L)),L}(t,r,s,a,d),function ko(){return Hn.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=s,g.value=a,g.attrs=d;const b=function ao(){const t=Hn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return vs(g,!0),g}function Lc(t,r,s,a){if(0===s)return-1;const d=r.length;for(let g=0;g<s;g++)r.push(a),t.blueprint.push(a),t.data.push(null);return d}function Tf(t,r,s){Fo(r);try{const a=t.viewQuery;null!==a&&Ff(1,a,s);const d=t.template;null!==d&&Df(t,r,d,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gl(t,r),t.staticViewQueries&&Ff(2,t.viewQuery,s);const g=t.components;null!==g&&function u_(t,r){for(let s=0;s<r.length;s++)v_(t,r[s])}(r,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[2]&=-5,z()}}function ld(t,r,s,a){const d=r[2];if(128!=(128&d)){Fo(r);try{_i(r),function Us(t){return Hn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Df(t,r,s,2,a);const b=3==(3&d);if(b){const G=t.preOrderCheckHooks;null!==G&&si(r,G,null)}else{const G=t.preOrderHooks;null!==G&&uo(r,G,0,null),Or(r,0)}if(function __(t){for(let r=hh(t);null!==r;r=Rd(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const d=s[a],g=d[3];0==(512&d[2])&&ii(g,1),d[2]|=512}}}(r),function m_(t){for(let r=hh(t);null!==r;r=Rd(r))for(let s=10;s<r.length;s++){const a=r[s],d=a[1];Ln(a)&&ld(d,a,d.template,a[8])}}(r),null!==t.contentQueries&&Gl(t,r),b){const G=t.contentCheckHooks;null!==G&&si(r,G)}else{const G=t.contentHooks;null!==G&&uo(r,G,1),Or(r,1)}!function Ep(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const d=s[a];if(d<0)It(~d);else{const g=d,b=s[++a],R=s[++a];Ts(b,g),R(2,r[g])}}}finally{It(-1)}}(t,r);const R=t.components;null!==R&&function wp(t,r){for(let s=0;s<r.length;s++)y_(t,r[s])}(r,R);const L=t.viewQuery;if(null!==L&&Ff(2,L,a),b){const G=t.viewCheckHooks;null!==G&&si(r,G)}else{const G=t.viewHooks;null!==G&&uo(r,G,2),Or(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,ii(r[3],-1))}finally{z()}}}function l_(t,r,s,a){const d=r[10],b=Tr(r);try{!b&&d.begin&&d.begin(),b&&Tf(t,r,a),ld(t,r,s,a)}finally{!b&&d.end&&d.end()}}function Df(t,r,s,a,d){const g=Ne(),b=2&a;try{It(-1),b&&r.length>22&&lf(t,r,22,!1),s(a,d)}finally{It(g)}}function Mh(t,r,s){!Mi()||(function p_(t,r,s,a){const d=s.directiveStart,g=s.directiveEnd;t.firstCreatePass||qo(s,r),jo(a,r);const b=s.initialInputs;for(let R=d;R<g;R++){const L=t.data[R],G=$r(L);G&&Rp(r,s,L);const X=Ko(r,t,R,s);jo(X,r),null!==b&&rm(0,R-d,X,L,0,b),G&&(cn(s.index,r)[8]=X)}}(t,r,s,lt(s,r)),128==(128&s.flags)&&function g_(t,r,s){const a=s.directiveStart,d=s.directiveEnd,g=s.index,b=function Yu(){return Hn.lFrame.currentDirectiveIndex}();try{It(g);for(let R=a;R<d;R++){const L=t.data[R],G=r[R];Da(R),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Dp(L,G)}}finally{It(-1),Da(b)}}(t,r,s))}function Af(t,r,s=lt){const a=r.localNames;if(null!==a){let d=r.index+1;for(let g=0;g<a.length;g+=2){const b=a[g+1],R=-1===b?s(r,t):t[b];t[d++]=R}}}function Sf(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=xf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function xf(t,r,s,a,d,g,b,R,L,G){const X=22+a,ge=X+d,Qe=function c_(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Fr);return s}(X,ge),_t="function"==typeof G?G():G;return Qe[1]={type:t,blueprint:Qe,template:s,queries:null,viewQuery:R,declTNode:r,data:Qe.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:L,consts:_t,incompleteFirstPass:!1}}function Xg(t,r,s,a){const d=Nh(r);null===s?d.push(a):(d.push(s),t.firstCreatePass&&hi(t).push(a,d.length-1))}function Mf(t,r,s){for(let a in t)if(t.hasOwnProperty(a)){const d=t[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,d):s[a]=[r,d]}return s}function Rf(t,r){const a=r.directiveEnd,d=t.data,g=r.attrs,b=[];let R=null,L=null;for(let G=r.directiveStart;G<a;G++){const X=d[G],ge=X.inputs,Qe=null===g||sf(r)?null:Pp(ge,g);b.push(Qe),R=Mf(ge,G,R),L=Mf(X.outputs,G,L)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=16),R.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=b,r.inputs=R,r.outputs=L}function lu(t,r,s,a,d,g,b,R){const L=lt(r,s);let X,G=r.inputs;!R&&null!=G&&(X=G[a])?(cd(t,s,X,a,d),Fn(r)&&Tp(s,r.index)):3&r.type&&(a=function d_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=b?b(d,r.value||"",a):d,g.setProperty(L,a,d))}function Tp(t,r){const s=cn(r,t);16&s[2]||(s[2]|=32)}function Bd(t,r,s,a){let d=!1;if(Mi()){const g=function Ap(t,r,s){const a=t.directiveRegistry;let d=null;if(a)for(let g=0;g<a.length;g++){const b=a[g];uf(s,b.selectors,!1)&&(d||(d=[]),Vr(qo(s,r),t,b.type),$r(b)?(Sp(t,s),d.unshift(b)):d.push(b))}return d}(t,r,s),b=null===a?null:{"":-1};if(null!==g){d=!0,Pf(s,t.data.length,g.length);for(let X=0;X<g.length;X++){const ge=g[X];ge.providersResolver&&ge.providersResolver(ge)}let R=!1,L=!1,G=Lc(t,r,g.length,null);for(let X=0;X<g.length;X++){const ge=g[X];s.mergedAttrs=ji(s.mergedAttrs,ge.hostAttrs),Rh(t,s,r,G,ge),Mp(G,ge,b),null!==ge.contentQueries&&(s.flags|=8),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(s.flags|=128);const Qe=ge.type.prototype;!R&&(Qe.ngOnChanges||Qe.ngOnInit||Qe.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),R=!0),!L&&(Qe.ngOnChanges||Qe.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),L=!0),G++}Rf(t,s)}b&&function xp(t,r,s){if(r){const a=t.localNames=[];for(let d=0;d<r.length;d+=2){const g=s[r[d+1]];if(null==g)throw new nt(-301,!1);a.push(r[d],g)}}}(s,a,b)}return s.mergedAttrs=ji(s.mergedAttrs,s.attrs),d}function nm(t,r,s,a,d,g){const b=g.hostBindings;if(b){let R=t.hostBindingOpCodes;null===R&&(R=t.hostBindingOpCodes=[]);const L=~r.index;(function f_(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(R)!=L&&R.push(L),R.push(a,d,b)}}function Dp(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Sp(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function Mp(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;$r(r)&&(s[""]=t)}}function Pf(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}function Rh(t,r,s,a,d){t.data[a]=d;const g=d.factory||(d.factory=Ni(d.type)),b=new as(g,$r(d),Fc);t.blueprint[a]=b,s[a]=b,nm(t,r,0,a,Lc(t,s,d.hostVars,Fr),d)}function Rp(t,r,s){const a=lt(r,t),d=Sf(s),g=t[10],b=kf(t,Ud(t,d,null,s.onPush?32:16,a,r,g,g.createRenderer(a,s),null,null,null));t[r.index]=b}function Cl(t,r,s,a,d,g){const b=lt(t,r);!function jd(t,r,s,a,d,g,b){if(null==g)t.removeAttribute(r,d,s);else{const R=null==b?at(g):b(g,a||"",d);t.setAttribute(r,d,R,s)}}(r[11],b,g,t.value,s,a,d)}function rm(t,r,s,a,d,g){const b=g[r];if(null!==b){const R=a.setInput;for(let L=0;L<b.length;){const G=b[L++],X=b[L++],ge=b[L++];null!==R?a.setInput(s,ge,G,X):s[X]=ge}}}function Pp(t,r){let s=null,a=0;for(;a<r.length;){const d=r[a];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===s&&(s=[]),s.push(d,t[d],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Nf(t,r,s,a){return new Array(t,!0,!1,r,null,0,a,s,null,null)}function y_(t,r){const s=cn(r,t);if(Ln(s)){const a=s[1];48&s[2]?ld(a,s,a.template,s[8]):s[5]>0&&Of(s)}}function Of(t){for(let a=hh(t);null!==a;a=Rd(a))for(let d=10;d<a.length;d++){const g=a[d];if(Ln(g))if(512&g[2]){const b=g[1];ld(b,g,b.template,g[8])}else g[5]>0&&Of(g)}const s=t[1].components;if(null!==s)for(let a=0;a<s.length;a++){const d=cn(s[a],t);Ln(d)&&d[5]>0&&Of(d)}}function v_(t,r){const s=cn(r,t),a=s[1];(function im(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])})(a,s),Tf(a,s,s[8])}function kf(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function Np(t){for(;t;){t[2]|=32;const r=Md(t);if(ys(t)&&!r)return t;t=r}return null}function Ff(t,r,s){Ha(0),r(t,s)}function Nh(t){return t[7]||(t[7]=[])}function hi(t){return t.cleanup||(t.cleanup=[])}function Lp(t,r){const s=t[9],a=s?s.get(Zr,null):null;a&&a.handleError(r)}function cd(t,r,s,a,d){for(let g=0;g<s.length;){const b=s[g++],R=s[g++],L=r[b],G=t.data[b];null!==G.setInput?G.setInput(L,d,a,R):L[R]=d}}function lc(t,r,s){const a=Ge(r,t);!function E(t,r,s){t.setValue(r,s)}(t[11],a,s)}function _s(t,r,s){let a=s?t.styles:null,d=s?t.classes:null,g=0;if(null!==r)for(let b=0;b<r.length;b++){const R=r[b];"number"==typeof R?g=R:1==g?d=tt(d,R):2==g&&(a=tt(a,R+": "+r[++b]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=d:t.classesWithoutHost=d}function xo(t,r,s,a,d=!1){for(;null!==s;){const g=r[s.index];if(null!==g&&a.push(Gr(g)),un(g))for(let R=10;R<g.length;R++){const L=g[R],G=L[1].firstChild;null!==G&&xo(L[1],L,G,a)}const b=s.type;if(8&b)xo(t,r,s.child,a);else if(32&b){const R=ch(s,r);let L;for(;L=R();)a.push(L)}else if(16&b){const R=rp(r,s);if(Array.isArray(R))a.push(...R);else{const L=Md(r[16]);xo(L[1],L,R,a,!0)}}s=d?s.projectionNext:s.next}return a}class cu{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return xo(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(un(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(ls(r,a),gi(s,a))}this._attachedToViewContainer=!1}ta(this._lView[1],this._lView)}onDestroy(r){Xg(this._lView[1],this._lView,null,r)}markForCheck(){Np(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Op(t,r,s){const a=r[10];a.begin&&a.begin();try{ld(t,r,t.template,s)}catch(d){throw Lp(r,d),d}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new nt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function En(t,r){sd(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new nt(902,!1);this._appRef=r}}class I_ extends cu{constructor(r){super(r),this._view=r}detectChanges(){!function kp(t){!function E_(t){for(let r=0;r<t.components.length;r++){const s=t.components[r],a=ah(s);if(null!==a){const d=a[1];l_(d,a,d.template,s)}}}(t[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Up extends Ac{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Se(r);return new Oh(s,this.ngModule)}}function Vp(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class om{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const d=this.injector.get(r,Td,a);return d!==Td||s===Td?d:this.parentInjector.get(r,s,a)}}class Oh extends Ul{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function zm(t){return t.map(Wm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Vp(this.componentDef.inputs)}get outputs(){return Vp(this.componentDef.outputs)}create(r,s,a,d){let g=(d=d||this.ngModule)instanceof Gu?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new om(r,g):r,R=b.get(zh,null);if(null===R)throw new nt(407,!1);const L=b.get(qh,null),G=R.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ge=a?function Ip(t,r,s){return t.selectRootElement(r,s===mt.ShadowDom)}(G,a,this.componentDef.encapsulation):J(R.createRenderer(null,this.componentDef),X,function b_(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(X)),Qe=this.componentDef.onPush?288:272,_t={components:[]},Wt=xf(0,null,null,1,0,null,null,null,null,null),sn=Ud(null,Wt,_t,Qe,null,null,R,G,L,b,null);let Pn,qn;Fo(sn);try{const xr=function qy(t,r,s,a,d,g){const b=s[1];s[22]=t;const L=Vd(b,22,2,"#host",null),G=L.mergedAttrs=r.hostAttrs;null!==G&&(_s(L,G,!0),null!==t&&(hn(d,t,G),null!==L.classes&&gh(d,t,L.classes),null!==L.styles&&Ig(d,t,L.styles)));const X=a.createRenderer(t,r),ge=Ud(s,Sf(r),null,r.onPush?32:16,s[22],L,a,X,g||null,null,null);return b.firstCreatePass&&(Vr(qo(L,s),b,r.type),Sp(b,L),Pf(L,s.length,1)),kf(s,ge),s[22]=ge}(ge,this.componentDef,sn,R,G);if(ge)if(a)hn(G,ge,["ng-version",bd.full]);else{const{attrs:Xt,classes:yr}=function Mg(t){const r=[],s=[];let a=1,d=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===d?""!==g&&r.push(g,t[++a]):8===d&&s.push(g);else{if(!au(d))break;d=g}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Xt&&hn(G,ge,Xt),yr&&yr.length>0&&gh(G,ge,yr.join(" "))}if(qn=Tt(Wt,22),void 0!==s){const Xt=qn.projection=[];for(let yr=0;yr<this.ngContentSelectors.length;yr++){const wi=s[yr];Xt.push(null!=wi?Array.from(wi):null)}}Pn=function D_(t,r,s,a,d){const g=s[1],b=function tm(t,r,s){const a=Vi();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Rh(t,a,r,Lc(t,r,1,null),s),Rf(t,a));const d=Ko(r,t,a.directiveStart,a);jo(d,r);const g=lt(a,r);return g&&jo(g,r),d}(g,s,r);if(a.components.push(b),t[8]=b,null!==d)for(const L of d)L(b,r);if(r.contentQueries){const L=Vi();r.contentQueries(1,b,L.directiveStart)}const R=Vi();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(It(R.index),nm(s[1],R,0,R.directiveStart,R.directiveEnd,r),Dp(r,b)),b}(xr,this.componentDef,sn,_t,[am]),Tf(Wt,sn,null)}finally{z()}return new T_(this.componentType,Pn,Du(qn,sn),sn,qn)}}class T_ extends class Ll{}{constructor(r,s,a,d,g){super(),this.location=a,this._rootLView=d,this._tNode=g,this.instance=s,this.hostView=this.changeDetectorRef=new I_(d),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[r])){const g=this._rootLView;cd(g[1],g,d,r,s),Tp(g,this._tNode.index)}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function am(){const t=Vi();Hr(Vt()[1],t)}function jp(t){let r=function um(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let d;if($r(t))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new nt(903,!1);d=r.\u0275dir}if(d){if(s){a.push(d);const b=t;b.inputs=$p(t.inputs),b.declaredInputs=$p(t.declaredInputs),b.outputs=$p(t.outputs);const R=d.hostBindings;R&&x_(t,R);const L=d.viewQuery,G=d.contentQueries;if(L&&A_(t,L),G&&S_(t,G),qe(t.inputs,d.inputs),qe(t.declaredInputs,d.declaredInputs),qe(t.outputs,d.outputs),$r(d)&&d.data.animation){const X=t.data;X.animation=(X.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let b=0;b<g.length;b++){const R=g[b];R&&R.ngInherit&&R(t),R===jp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function lm(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=r+=d.hostVars,d.hostAttrs=ji(d.hostAttrs,s=ji(s,d.hostAttrs))}}(a)}function $p(t){return t===Qn?{}:t===zt?[]:t}function A_(t,r){const s=t.viewQuery;t.viewQuery=s?(a,d)=>{r(a,d),s(a,d)}:r}function S_(t,r){const s=t.contentQueries;t.contentQueries=s?(a,d,g)=>{r(a,d,g),s(a,d,g)}:r}function x_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,d)=>{r(a,d),s(a,d)}:r}let kh=null;function du(){if(!kh){const t=ct.Symbol;if(t&&t.iterator)kh=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(kh=a)}}}return kh}function qu(t){return!!Hp(t)&&(Array.isArray(t)||!(t instanceof Map)&&du()in t)}function Hp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Il(t,r,s){return t[r]=s}function Mo(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function hd(t,r,s,a){const d=Mo(t,r,s);return Mo(t,r+1,a)||d}function fd(t,r,s,a){const d=Vt();return Mo(d,oa(),r)&&(Rr(),Cl(At(),d,t,r,s,a)),fd}function Uc(t,r,s,a){return Mo(t,oa(),s)?r+at(s)+a:Fr}function Hd(t,r,s,a,d,g){const R=hd(t,function Ls(){return Hn.lFrame.bindingIndex}(),s,d);return bs(2),R?r+at(s)+a+at(d)+g:Fr}function jc(t,r,s,a,d,g,b,R){const L=Vt(),G=Rr(),X=t+22,ge=G.firstCreatePass?function Bf(t,r,s,a,d,g,b,R,L){const G=r.consts,X=Vd(r,t,4,b||null,Yr(G,R));Bd(r,s,X,Yr(G,L)),Hr(r,X);const ge=X.tViews=xf(2,X,a,d,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,G);return null!==r.queries&&(r.queries.template(r,X),ge.queries=r.queries.embeddedTView(X)),X}(X,G,L,r,s,a,d,g,b):G.data[X];vs(ge,!1);const Qe=L[11].createComment("");ph(G,L,Qe,ge),jo(Qe,L),kf(L,L[X]=Nf(Qe,L,Qe,ge)),$n(ge)&&Mh(G,L,ge),null!=b&&Af(L,ge,R)}function Zd(t){return ln(function sa(){return Hn.lFrame.contextLView}(),22+t)}function cc(t,r,s){const a=Vt();return Mo(a,oa(),r)&&lu(Rr(),At(),a,t,r,a[11],s,!1),cc}function Zp(t,r,s,a,d){const b=d?"class":"style";cd(t,s,r.inputs[b],b,a)}function Uh(t,r,s,a){const d=Vt(),g=Rr(),b=22+t,R=d[11],L=d[b]=J(R,r,function Pr(){return Hn.lFrame.currentNamespace}()),G=g.firstCreatePass?function O_(t,r,s,a,d,g,b){const R=r.consts,G=Vd(r,t,2,d,Yr(R,g));return Bd(r,s,G,Yr(R,b)),null!==G.attrs&&_s(G,G.attrs,!1),null!==G.mergedAttrs&&_s(G,G.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,G),G}(b,g,d,0,r,s,a):g.data[b];vs(G,!0);const X=G.mergedAttrs;null!==X&&hn(R,L,X);const ge=G.classes;null!==ge&&gh(R,L,ge);const Qe=G.styles;return null!==Qe&&Ig(R,L,Qe),64!=(64&G.flags)&&ph(g,d,L,G),0===function No(){return Hn.lFrame.elementDepthCount}()&&jo(L,d),function yo(){Hn.lFrame.elementDepthCount++}(),$n(G)&&(Mh(g,d,G),function Jg(t,r,s){if(Mn(r)){const d=r.directiveEnd;for(let g=r.directiveStart;g<d;g++){const b=t.data[g];b.contentQueries&&b.contentQueries(1,s[g],g)}}}(g,G,d)),null!==a&&Af(d,G),Uh}function $c(){let t=Vi();hu()?function Qi(){Hn.lFrame.isParent=!1}():(t=t.parent,vs(t,!1));const r=t;!function fi(){Hn.lFrame.elementDepthCount--}();const s=Rr();return s.firstCreatePass&&(Hr(s,t),Mn(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function pu(t){return 0!=(16&t.flags)}(r)&&Zp(s,r,Vt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Sn(t){return 0!=(32&t.flags)}(r)&&Zp(s,r,Vt(),r.stylesWithoutHost,!1),$c}function qp(t,r,s,a){return Uh(t,r,s,a),$c(),qp}function Qp(){return Vt()}function Jp(t){return!!t&&"function"==typeof t.then}function hm(t){return!!t&&"function"==typeof t.subscribe}const Xp=hm;function eg(t,r,s,a){const d=Vt(),g=Rr(),b=Vi();return function gm(t,r,s,a,d,g,b,R){const L=$n(a),X=t.firstCreatePass&&hi(t),ge=r[8],Qe=Nh(r);let _t=!0;if(3&a.type||R){const Pn=lt(a,r),qn=R?R(Pn):Pn,xr=Qe.length,Xt=R?wi=>R(Gr(wi[a.index])):a.index;let yr=null;if(!R&&L&&(yr=function pm(t,r,s,a){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const b=d[g];if(b===s&&d[g+1]===a){const R=r[7],L=d[g+2];return R.length>L?R[L]:null}"string"==typeof b&&(g+=2)}return null}(t,r,d,a.index)),null!==yr)(yr.__ngLastListenerFn__||yr).__ngNextListenerFn__=g,yr.__ngLastListenerFn__=g,_t=!1;else{g=tg(a,r,ge,g,!1);const wi=s.listen(qn,d,g);Qe.push(g,wi),X&&X.push(d,Xt,xr,xr+1)}}else g=tg(a,r,ge,g,!1);const Wt=a.outputs;let sn;if(_t&&null!==Wt&&(sn=Wt[d])){const Pn=sn.length;if(Pn)for(let qn=0;qn<Pn;qn+=2){const Ps=r[sn[qn]][sn[qn+1]].subscribe(g),$h=Qe.length;Qe.push(g,Ps),X&&X.push(d,a.index,$h,-($h+1))}}}(g,d,d[11],b,t,r,0,a),eg}function mm(t,r,s,a){try{return!1!==s(a)}catch(d){return Lp(t,d),!1}}function tg(t,r,s,a,d){return function g(b){if(b===Function)return a;Np(2&t.flags?cn(t.index,r):r);let L=mm(r,0,a,b),G=g.__ngNextListenerFn__;for(;G;)L=mm(r,0,G,b)&&L,G=G.__ngNextListenerFn__;return d&&!1===L&&(b.preventDefault(),b.returnValue=!1),L}}function ng(t=1){return function U(t){return(Hn.lFrame.contextLView=function Q(t,r){for(;t>0;)r=r[15],t--;return r}(t,Hn.lFrame.contextLView))[8]}(t)}function Vh(t,r,s){return qd(t,"",r,"",s),Vh}function qd(t,r,s,a,d){const g=Vt(),b=Uc(g,r,s,a);return b!==Fr&&lu(Rr(),At(),g,t,b,g[11],d,!1),qd}function bm(t,r,s,a,d){const g=t[s+1],b=null===r;let R=a?Mu(g):uu(g),L=!1;for(;0!==R&&(!1===L||b);){const X=t[R+1];V_(t[R],r)&&(L=!0,t[R+1]=a?bh(X):yf(X)),R=a?Mu(X):uu(X)}L&&(t[s+1]=a?yf(g):bh(g))}function V_(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&D(t,r)>=0}const Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tm(t){return t.substring(Ro.key,Ro.keyEnd)}function jf(t,r){const s=Ro.textEnd;return s===r?-1:(r=Ro.keyEnd=function $_(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,Ro.key=r,s),Yd(t,r,s))}function Yd(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function e(t,r){return function I(t,r,s,a){const d=Vt(),g=Rr(),b=bs(2);g.firstUpdatePass&&q(g,t,b,a),r!==Fr&&Mo(d,b,r)&&ns(g,g.data[Ne()],d,d[11],t,d[b+1]=function Ki(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=be(Ua(t)))),t}(r,s),a,b)}(t,r,null,!0),e}function p(t,r){for(let s=function Kd(t){return function Am(t){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=t.length}(t),jf(t,Yd(t,0,Ro.textEnd))}(r);s>=0;s=jf(r,s))mi(t,Tm(r),!0)}function $(t,r){return r>=t.expandoStartIndex}function q(t,r,s,a){const d=t.data;if(null===d[s+1]){const g=d[Ne()],b=$(t,s);$o(g,a)&&null===r&&!b&&(r=!1),r=function ue(t,r,s,a){const d=function ua(t){const r=Hn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(s=An(s=Gt(null,t,r,s,a),r.attrs,a),g=null);else{const b=r.directiveStylingLast;if(-1===b||t[b]!==d)if(s=Gt(d,t,r,s,a),null===g){let L=function Ve(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==uu(a))return t[Mu(a)]}(t,r,a);void 0!==L&&Array.isArray(L)&&(L=Gt(null,t,r,L[1],a),L=An(L,r.attrs,a),function vt(t,r,s,a){t[Mu(s?r.classBindings:r.styleBindings)]=a}(t,r,a,L))}else g=function Ut(t,r,s){let a;const d=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<d;g++)a=An(a,t[g].hostAttrs,s);return An(a,r.attrs,s)}(t,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(d,g,r,a),function L_(t,r,s,a,d,g){let b=g?r.classBindings:r.styleBindings,R=Mu(b),L=uu(b);t[a]=s;let X,G=!1;if(Array.isArray(s)){const ge=s;X=ge[1],(null===X||D(ge,X)>0)&&(G=!0)}else X=s;if(d)if(0!==L){const Qe=Mu(t[R+1]);t[a+1]=wl(Qe,R),0!==Qe&&(t[Qe+1]=pp(t[Qe+1],a)),t[R+1]=function Fd(t,r){return 131071&t|r<<17}(t[R+1],a)}else t[a+1]=wl(R,0),0!==R&&(t[R+1]=pp(t[R+1],a)),R=a;else t[a+1]=wl(L,0),0===R?R=a:t[L+1]=pp(t[L+1],a),L=a;G&&(t[a+1]=yf(t[a+1])),bm(t,X,a,!0),bm(t,X,a,!1),function U_(t,r,s,a,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&D(g,r)>=0&&(s[a+1]=bh(s[a+1]))}(r,X,t,a,g),b=wl(R,L),g?r.classBindings=b:r.styleBindings=b}(d,g,r,s,b,a)}}function Gt(t,r,s,a,d){let g=null;const b=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<b&&(g=r[R],a=An(a,g.hostAttrs,d),g!==t);)R++;return null!==t&&(s.directiveStylingLast=R),a}function An(t,r,s){const a=s?1:2;let d=-1;if(null!==r)for(let g=0;g<r.length;g++){const b=r[g];"number"==typeof b?d=b:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mi(t,b,!!s||r[++g]))}return void 0===t?null:t}function ns(t,r,s,a,d,g,b,R){if(!(3&r.type))return;const L=t.data,G=L[R+1];zi(function Bg(t){return 1==(1&t)}(G)?go(L,r,s,d,uu(G),b):void 0)||(zi(g)||function ud(t){return 2==(2&t)}(G)&&(g=go(L,null,s,d,R,b)),function Cg(t,r,s,a,d){if(r)d?t.addClass(s,a):t.removeClass(s,a);else{let g=-1===a.indexOf("-")?void 0:Au.DashCase;null==d?t.removeStyle(s,a,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Au.Important),t.setStyle(s,a,d,g))}}(a,b,Ge(Ne(),s),d,g))}function go(t,r,s,a,d,g){const b=null===r;let R;for(;d>0;){const L=t[d],G=Array.isArray(L),X=G?L[1]:L,ge=null===X;let Qe=s[d+1];Qe===Fr&&(Qe=ge?zt:void 0);let _t=ge?yu(Qe,a):X===a?Qe:void 0;if(G&&!zi(_t)&&(_t=yu(L,a)),zi(_t)&&(R=_t,b))return R;const Wt=t[d+1];d=b?Mu(Wt):uu(Wt)}if(null!==r){let L=g?r.residualClasses:r.residualStyles;null!=L&&(R=yu(L,a))}return R}function zi(t){return void 0!==t}function $o(t,r){return 0!=(t.flags&(r?16:32))}function Qd(t,r=""){const s=Vt(),a=Rr(),d=t+22,g=a.firstCreatePass?Vd(a,d,1,r,null):a.data[d],b=s[d]=function y(t,r){return t.createText(r)}(s[11],r);ph(a,s,b,g),vs(g,!1)}function z_(t){return xm("",t,""),z_}function xm(t,r,s){const a=Vt(),d=Uc(a,t,r,s);return d!==Fr&&lc(a,Ne(),d),xm}function Z_(t,r,s,a,d){const g=Vt(),b=Hd(g,t,r,s,a,d);return b!==Fr&&lc(g,Ne(),b),Z_}function sv(t,r,s){!function N(t,r,s,a){const d=Rr(),g=bs(2);d.firstUpdatePass&&q(d,null,g,a);const b=Vt();if(s!==Fr&&Mo(b,g,s)){const R=d.data[Ne()];if($o(R,a)&&!$(d,g)){let L=a?R.classesWithoutHost:R.stylesWithoutHost;null!==L&&(s=tt(L,s||"")),Zp(d,R,b,s,a)}else!function ts(t,r,s,a,d,g,b,R){d===Fr&&(d=zt);let L=0,G=0,X=0<d.length?d[0]:null,ge=0<g.length?g[0]:null;for(;null!==X||null!==ge;){const Qe=L<d.length?d[L+1]:void 0,_t=G<g.length?g[G+1]:void 0;let sn,Wt=null;X===ge?(L+=2,G+=2,Qe!==_t&&(Wt=ge,sn=_t)):null===ge||null!==X&&X<ge?(L+=2,Wt=X):(G+=2,Wt=ge,sn=_t),null!==Wt&&ns(t,r,s,a,Wt,sn,b,R),X=L<d.length?d[L]:null,ge=G<g.length?g[G]:null}}(d,R,b,b[11],b[g+1],b[g+1]=function nr(t,r,s){if(null==s||""===s)return zt;const a=[],d=Ua(s);if(Array.isArray(d))for(let g=0;g<d.length;g++)t(a,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&t(a,g,d[g]);else"string"==typeof d&&r(a,d);return a}(t,r,s),a,g)}}(mi,p,Uc(Vt(),t,r,s),!0)}const Bh=void 0;var jE=["en",[["a","p"],["AM","PM"],Bh],[["AM","PM"],Bh,Bh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bh,"{1} 'at' {0}",Bh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BE(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let $f={};function q_(t){const r=function $E(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=yv(r);if(s)return s;const a=r.split("-")[0];if(s=yv(a),s)return s;if("en"===a)return jE;throw new nt(701,!1)}function _v(t){return q_(t)[Dr.PluralCase]}function yv(t){return t in $f||($f[t]=ct.ng&&ct.ng.common&&ct.ng.common.locales&&ct.ng.common.locales[t]),$f[t]}var Dr=(()=>((Dr=Dr||{})[Dr.LocaleId=0]="LocaleId",Dr[Dr.DayPeriodsFormat=1]="DayPeriodsFormat",Dr[Dr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dr[Dr.DaysFormat=3]="DaysFormat",Dr[Dr.DaysStandalone=4]="DaysStandalone",Dr[Dr.MonthsFormat=5]="MonthsFormat",Dr[Dr.MonthsStandalone=6]="MonthsStandalone",Dr[Dr.Eras=7]="Eras",Dr[Dr.FirstDayOfWeek=8]="FirstDayOfWeek",Dr[Dr.WeekendRange=9]="WeekendRange",Dr[Dr.DateFormat=10]="DateFormat",Dr[Dr.TimeFormat=11]="TimeFormat",Dr[Dr.DateTimeFormat=12]="DateTimeFormat",Dr[Dr.NumberSymbols=13]="NumberSymbols",Dr[Dr.NumberFormats=14]="NumberFormats",Dr[Dr.CurrencyCode=15]="CurrencyCode",Dr[Dr.CurrencySymbol=16]="CurrencySymbol",Dr[Dr.CurrencyName=17]="CurrencyName",Dr[Dr.Currencies=18]="Currencies",Dr[Dr.Directionality=19]="Directionality",Dr[Dr.PluralCase=20]="PluralCase",Dr[Dr.ExtraData=21]="ExtraData",Dr))();const Hf="en-US";let vv=Hf;function Q_(t,r,s,a,d){if(t=Ce(t),Array.isArray(t))for(let g=0;g<t.length;g++)Q_(t[g],r,s,a,d);else{const g=Rr(),b=Vt();let R=hl(t)?t:Ce(t.provide),L=pl(t);const G=Vi(),X=1048575&G.providerIndexes,ge=G.directiveStart,Qe=G.providerIndexes>>20;if(hl(t)||!t.multi){const _t=new as(L,d,Fc),Wt=X_(R,r,d?X:X+Qe,ge);-1===Wt?(Vr(qo(G,b),g,R),J_(g,t,r.length),r.push(R),G.directiveStart++,G.directiveEnd++,d&&(G.providerIndexes+=1048576),s.push(_t),b.push(_t)):(s[Wt]=_t,b[Wt]=_t)}else{const _t=X_(R,r,X+Qe,ge),Wt=X_(R,r,X,X+Qe),sn=_t>=0&&s[_t],Pn=Wt>=0&&s[Wt];if(d&&!Pn||!d&&!sn){Vr(qo(G,b),g,R);const qn=function Vw(t,r,s,a,d){const g=new as(t,s,Fc);return g.multi=[],g.index=r,g.componentProviders=0,Gv(g,d,a&&!s),g}(d?Uw:Lw,s.length,d,a,L);!d&&Pn&&(s[Wt].providerFactory=qn),J_(g,t,r.length,0),r.push(R),G.directiveStart++,G.directiveEnd++,d&&(G.providerIndexes+=1048576),s.push(qn),b.push(qn)}else J_(g,t,_t>-1?_t:Wt,Gv(s[d?Wt:_t],L,!d&&a));!d&&a&&Pn&&s[Wt].componentProviders++}}}function J_(t,r,s,a){const d=hl(r),g=function th(t){return!!t.useClass}(r);if(d||g){const L=(g?Ce(r.useClass):r).prototype.ngOnDestroy;if(L){const G=t.destroyHooks||(t.destroyHooks=[]);if(!d&&r.multi){const X=G.indexOf(s);-1===X?G.push(s,[a,L]):G[X+1].push(a,L)}else G.push(s,L)}}}function Gv(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function X_(t,r,s,a){for(let d=s;d<a;d++)if(r[d]===t)return d;return-1}function Lw(t,r,s,a){return ey(this.multi,[])}function Uw(t,r,s,a){const d=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,R=Ko(s,s[1],this.providerFactory.index,a);g=R.slice(0,b),ey(d,g);for(let L=b;L<R.length;L++)g.push(R[L])}else g=[],ey(d,g);return g}function ey(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Wv(t,r=[]){return s=>{s.providersResolver=(a,d)=>function Fw(t,r,s){const a=Rr();if(a.firstCreatePass){const d=$r(t);Q_(s,a.data,a.blueprint,d,!0),Q_(r,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,r)}}class Wf{}class zv{}function Bw(t,r){return new Zv(t,r??null)}class Zv extends Wf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Up(this);const a=fn(r);this._bootstrapComponents=_l(a.bootstrap),this._r3Injector=vh(r,s,[{provide:Wf,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver}],be(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class ty extends zv{constructor(r){super(),this.moduleType=r}create(r){return new Zv(this.moduleType,r)}}class jw extends Wf{constructor(r,s,a){super(),this.componentFactoryResolver=new Up(this),this.instance=null;const d=new Fl([...r,{provide:Wf,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver}],s||Tc(),a,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function ny(t,r,s=null){return new jw(t,r,s).injector}let $w=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=rc(0,s.type),d=a.length>0?ny([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,d)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Kn({token:t,providedIn:"environment",factory:()=>new t(Oi(Gu))}),t})();function qv(t){t.getStandaloneInjector=r=>r.get($w).getOrCreateStandaloneInjector(t)}function t0(t,r,s,a){return r0(Vt(),Bi(),t,r,s,a)}function n0(t,r,s,a,d){return s0(Vt(),Bi(),t,r,s,a,d)}function ug(t,r){const s=t[r];return s===Fr?void 0:s}function r0(t,r,s,a,d,g){const b=r+s;return Mo(t,b,d)?Il(t,b+1,g?a.call(g,d):a(d)):ug(t,b+1)}function s0(t,r,s,a,d,g,b){const R=r+s;return hd(t,R,d,g)?Il(t,R+2,b?a.call(b,d,g):a(d,g)):ug(t,R+2)}function l0(t,r){const s=Rr();let a;const d=t+22;s.firstCreatePass?(a=function sC(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[d]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(d,a.onDestroy)):a=s.data[d];const g=a.factory||(a.factory=Ni(a.type)),b=er(Fc);try{const R=Vs(!1),L=g();return Vs(R),function md(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,Vt(),d,L),L}finally{er(b)}}function c0(t,r,s){const a=t+22,d=Vt(),g=ln(d,a);return lg(d,a)?r0(d,Bi(),r,g.transform,s,g):g.transform(s)}function d0(t,r,s,a){const d=t+22,g=Vt(),b=ln(g,d);return lg(g,d)?s0(g,Bi(),r,b.transform,s,a,b):b.transform(s,a)}function lg(t,r){return t[1].data[r].pure}function iy(t){return r=>{setTimeout(t,void 0,r)}}const Gc=class lC extends C.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let d=r,g=s||(()=>null),b=a;if(r&&"object"==typeof r){const L=r;d=L.next?.bind(L),g=L.error?.bind(L),b=L.complete?.bind(L)}this.__isAsync&&(g=iy(g),d&&(d=iy(d)),b&&(b=iy(b)));const R=super.subscribe({next:d,error:g,complete:b});return r instanceof h.w0&&r.add(R),R}};function cC(){return this._results[du()]()}class sy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=du(),a=sy.prototype;a[s]||(a[s]=cC)}get changes(){return this._changes||(this._changes=new Gc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const d=Br(r);(this._changesDetected=!function ku(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],g=r[a];if(s&&(d=s(d),g=s(g)),g!==d)return!1}return!0}(a._results,d,s))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let cg=(()=>{class t{}return t.__NG_ELEMENT_ID__=fC,t})();const dC=cg,hC=class extends dC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,d=Ud(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(a)),Tf(a,d,r),new cu(d)}};function fC(){return Om(Vi(),Vt())}function Om(t,r){return 4&t.type?new hC(r,t,Du(t,r)):null}let km=(()=>{class t{}return t.__NG_ELEMENT_ID__=pC,t})();function pC(){return p0(Vi(),Vt())}const gC=km,h0=class extends gC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Du(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ys(this._hostTNode,this._hostLView);if(Tl(r)){const s=Zo(r,this._hostLView),a=ca(r);return new pa(s[1].data[a+8],s)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=f0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let d,g;"number"==typeof a?d=a:null!=a&&(d=a.index,g=a.injector);const b=r.createEmbeddedView(s||{},g);return this.insert(b,d),b}createComponent(r,s,a,d,g){const b=r&&!function ws(t){return"function"==typeof t}(r);let R;if(b)R=s;else{const ge=s||{};R=ge.index,a=ge.injector,d=ge.projectableNodes,g=ge.environmentInjector||ge.ngModuleRef}const L=b?r:new Oh(Se(r)),G=a||this.parentInjector;if(!g&&null==L.ngModule){const Qe=(b?G:this.parentInjector).get(Gu,null);Qe&&(g=Qe)}const X=L.create(G,d,void 0,g);return this.insert(X.hostView,R),X}insert(r,s){const a=r._lView,d=a[1];if(function Ar(t){return un(t[3])}(a)){const X=this.indexOf(r);if(-1!==X)this.detach(X);else{const ge=a[3],Qe=new h0(ge,ge[6],ge[3]);Qe.detach(Qe.indexOf(r))}}const g=this._adjustIndex(s),b=this._lContainer;!function Wn(t,r,s,a){const d=10+a,g=s.length;a>0&&(s[d-1][4]=r),a<g-10?(r[4]=s[d],Xs(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function ti(t,r){const s=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===s?t[9]=[r]:s.push(r)}(b,r);const R=r[19];null!==R&&R.insertView(t),r[2]|=64}(d,a,b,g);const R=ip(g,b),L=a[11],G=Zu(L,b[7]);return null!==G&&function $t(t,r,s,a,d,g){a[0]=d,a[6]=r,sd(t,a,s,1,d,g)}(d,b[6],L,a,G,R),r.attachToViewContainerRef(),Xs(oy(b),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=f0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=ls(this._lContainer,s);a&&(gi(oy(this._lContainer),s),ta(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=ls(this._lContainer,s);return a&&null!=gi(oy(this._lContainer),s)?new cu(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function f0(t){return t[8]}function oy(t){return t[8]||(t[8]=[])}function p0(t,r){let s;const a=r[t.index];if(un(a))s=a;else{let d;if(8&t.type)d=Gr(a);else{const g=r[11];d=g.createComment("");const b=lt(t,r);cs(g,Zu(g,b),d,function Nd(t,r){return t.nextSibling(r)}(g,b),!1)}r[t.index]=s=Nf(a,r,d,t),kf(r,s)}return new h0(s,t,r)}class ay{constructor(r){this.queryList=r,this.matches=null}clone(){return new ay(this.queryList)}setDirty(){this.queryList.setDirty()}}class uy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let g=0;g<a;g++){const b=s.getByIndex(g);d.push(this.queries[b.indexInDeclarationView].clone())}return new uy(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==I0(r,s).matches&&this.queries[s].setDirty()}}class g0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class ly{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const d=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,d);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new ly(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cy{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cy(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const g=a[d];this.matchTNodeWithReadOption(r,s,yC(s,g)),this.matchTNodeWithReadOption(r,s,Ma(s,r,g,!1,!1))}else a===cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ma(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Sc||d===km||d===cg&&4&s.type)this.addMatch(s.index,-2);else{const g=Ma(s,r,d,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function yC(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function EC(t,r,s,a){return-1===s?function vC(t,r){return 11&t.type?Du(t,r):4&t.type?Om(t,r):null}(r,t):-2===s?function wC(t,r,s){return s===Sc?Du(r,t):s===cg?Om(r,t):s===km?p0(r,t):void 0}(t,r,a):Ko(t,t[1],s,r)}function m0(t,r,s,a){const d=r[19].queries[a];if(null===d.matches){const g=t.data,b=s.matches,R=[];for(let L=0;L<b.length;L+=2){const G=b[L];R.push(G<0?null:EC(r,g[G],b[L+1],s.metadata.read))}d.matches=R}return d.matches}function dy(t,r,s,a){const d=t.queries.getByIndex(s),g=d.matches;if(null!==g){const b=m0(t,r,d,s);for(let R=0;R<g.length;R+=2){const L=g[R];if(L>0)a.push(b[R/2]);else{const G=g[R+1],X=r[-L];for(let ge=10;ge<X.length;ge++){const Qe=X[ge];Qe[17]===Qe[3]&&dy(Qe[1],Qe,G,a)}if(null!==X[9]){const ge=X[9];for(let Qe=0;Qe<ge.length;Qe++){const _t=ge[Qe];dy(_t[1],_t,G,a)}}}}}return a}function _0(t){const r=Vt(),s=Rr(),a=Aa();Ha(a+1);const d=I0(s,a);if(t.dirty&&Tr(r)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const g=d.crossesNgTemplate?dy(s,r,a,[]):m0(s,r,d,a);t.reset(g,oc),t.notifyOnChanges()}return!0}return!1}function y0(t,r,s){const a=Rr();a.firstCreatePass&&(C0(a,new g0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),w0(a,Vt(),r)}function v0(t,r,s,a){const d=Rr();if(d.firstCreatePass){const g=Vi();C0(d,new g0(r,s,a),g.index),function IC(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(d,t),2==(2&s)&&(d.staticContentQueries=!0)}w0(d,Vt(),s)}function E0(){return function CC(t,r){return t[19].queries[r].queryList}(Vt(),Aa())}function w0(t,r,s){const a=new sy(4==(4&s));Xg(t,r,a,a.destroy),null===r[19]&&(r[19]=new uy),r[19].queries.push(new ay(a))}function C0(t,r,s){null===t.queries&&(t.queries=new ly),t.queries.track(new cy(r,s))}function I0(t,r){return t.queries.getByIndex(r)}function b0(t,r){return Om(t,r)}function Lm(...t){}const H0=new oi("Application Initializer");let Um=(()=>{class t{constructor(s){this.appInits=s,this.resolve=Lm,this.reject=Lm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Jp(g))s.push(g);else if(Xp(g)){const b=new Promise((R,L)=>{g.subscribe({complete:R,error:L})});s.push(b)}}Promise.all(s).then(()=>{a()}).catch(d=>{this.reject(d)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Oi(H0,8))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const G0=new oi("AppId",{providedIn:"root",factory:function W0(){return`${my()}${my()}${my()}`}});function my(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const z0=new oi("Platform Initializer"),HC=new oi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Z0=new oi("appBootstrapListener");let GC=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Vm=new oi("LocaleId",{providedIn:"root",factory:()=>Dl(Vm,en.Optional|en.SkipSelf)||function WC(){return typeof $localize<"u"&&$localize.locale||Hf}()}),zC=new oi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let qC=(()=>{class t{compileModuleSync(s){return new ty(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=_l(fn(s).declarations).reduce((b,R)=>{const L=Se(R);return L&&b.push(new Oh(L)),b},[]);return new ZC(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const QC=(()=>Promise.resolve(0))();function _y(t){typeof Zone>"u"?QC.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class zl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gc(!1),this.onMicrotaskEmpty=new Gc(!1),this.onStable=new Gc(!1),this.onError=new Gc(!1),typeof Zone>"u")throw new nt(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&s,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function JC(){let t=ct.requestAnimationFrame,r=ct.cancelAnimationFrame;if(typeof Zone<"u"&&t&&r){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function tI(t){const r=()=>{!function eI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ct,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vy(t),t.isCheckStableRunning=!0,yy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vy(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,d,g,b,R)=>{try{return Y0(t),s.invokeTask(d,g,b,R)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),Q0(t)}},onInvoke:(s,a,d,g,b,R,L)=>{try{return Y0(t),s.invoke(d,g,b,R,L)}finally{t.shouldCoalesceRunChangeDetection&&r(),Q0(t)}},onHasTask:(s,a,d,g)=>{s.hasTask(d,g),a===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,vy(t),yy(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,d,g)=>(s.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zl.isInAngularZone())throw new nt(909,!1)}static assertNotInAngularZone(){if(zl.isInAngularZone())throw new nt(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,d){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+d,r,XC,Lm,Lm);try{return g.runTask(b,s,a)}finally{g.cancelTask(b)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const XC={};function yy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vy(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Y0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Q0(t){t._nesting--,yy(t)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gc,this.onMicrotaskEmpty=new Gc,this.onStable=new Gc,this.onError=new Gc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,d){return r.apply(s,a)}}const J0=new oi(""),X0=new oi("");let Ey,rI=(()=>{class t{constructor(s,a,d){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ey||(function iI(t){Ey=t}(d),d.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zl.assertNotInAngularZone(),_y(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_y(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,d){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:d})}whenStable(s,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,d){return[]}}return t.\u0275fac=function(s){return new(s||t)(Oi(zl),Oi(eE),Oi(X0))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac}),t})(),eE=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Ey?.findTestabilityInTree(this,s,a)??null}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Jd=null;const tE=new oi("AllowMultipleToken"),wy=new oi("PlatformDestroyListeners");class aI{constructor(r,s){this.name=r,this.token=s}}function rE(t,r,s=[]){const a=`Platform: ${r}`,d=new oi(a);return(g=[])=>{let b=Cy();if(!b||b.injector.get(tE,!1)){const R=[...s,...g,{provide:d,useValue:!0}];t?t(R):function uI(t){if(Jd&&!Jd.get(tE,!1))throw new nt(400,!1);Jd=t;const r=t.get(sE);(function nE(t){const r=t.get(z0,null);r&&r.forEach(s=>s())})(t)}(function iE(t=[],r){return El.create({name:r,providers:[{provide:kl,useValue:"platform"},{provide:wy,useValue:new Set([()=>Jd=null])},...t]})}(R,a))}return function cI(t){const r=Cy();if(!r)throw new nt(401,!1);return r}()}}function Cy(){return Jd?.get(sE)??null}let sE=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const d=function aE(t,r){let s;return s="noop"===t?new nI:("zone.js"===t?void 0:t)||new zl(r),s}(a?.ngZone,function oE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(a)),g=[{provide:zl,useValue:d}];return d.run(()=>{const b=El.create({providers:g,parent:this.injector,name:s.moduleType.name}),R=s.create(b),L=R.injector.get(Zr,null);if(!L)throw new nt(402,!1);return d.runOutsideAngular(()=>{const G=d.onError.subscribe({next:X=>{L.handleError(X)}});R.onDestroy(()=>{jm(this._modules,R),G.unsubscribe()})}),function uE(t,r,s){try{const a=s();return Jp(a)?a.catch(d=>{throw r.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(L,d,()=>{const G=R.injector.get(Um);return G.runInitializers(),G.donePromise.then(()=>(function Ev(t){xn(t,"Expected localeId to be defined"),"string"==typeof t&&(vv=t.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Vm,Hf)||Hf),this._moduleDoBootstrap(R),R))})})}bootstrapModule(s,a=[]){const d=lE({},a);return function sI(t,r,s){const a=new ty(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(s){const a=s.injector.get(Bm);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new nt(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new nt(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(wy,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Oi(El))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function lE(t,r){return Array.isArray(r)?r.reduce(lE,t):{...t,...r}}let Bm=(()=>{class t{constructor(s,a,d){this._zone=s,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new Z.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),b=new Z.y(R=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{zl.assertNotInAngularZone(),_y(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const G=this._zone.onUnstable.subscribe(()=>{zl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{L.unsubscribe(),G.unsubscribe()}});this.isStable=(0,P.T)(g,b.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const d=s instanceof Ul;if(!this._injector.get(Um).done)throw!d&&jt(s),new nt(405,false);let b;b=d?s:this._injector.get(Ac).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const R=function oI(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Wf),G=b.create(El.NULL,[],a||b.selector,R),X=G.location.nativeElement,ge=G.injector.get(J0,null);return ge?.registerApplication(X),G.onDestroy(()=>{this.detachView(G.hostView),jm(this.components,G),ge?.unregisterApplication(X)}),this._loadComponent(G),G}tick(){if(this._runningTick)throw new nt(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;jm(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Z0,[]).concat(this._bootstrapListeners).forEach(d=>d(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>jm(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new nt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(s){return new(s||t)(Oi(zl),Oi(Gu),Oi(Zr))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function jm(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let dE=!0,hE=!1;function hI(){return hE=!0,dE}function fI(){if(hE)throw new Error("Cannot enable prod mode after platform setup.");dE=!1}let pI=(()=>{class t{}return t.__NG_ELEMENT_ID__=gI,t})();function gI(t){return function mI(t,r,s){if(Fn(t)&&!s){const a=cn(t.index,r);return new cu(a,a)}return 47&t.type?new cu(r[16],r):null}(Vi(),Vt(),16==(16&t))}class mE{constructor(){}supports(r){return qu(r)}create(r){return new CI(r)}}const wI=(t,r)=>r;class CI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,d=0,g=null;for(;s||a;){const b=!a||s&&s.currentIndex<yE(a,d,g)?s:a,R=yE(b,d,g),L=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(s=s._next,null==b.previousIndex)d++;else{g||(g=[]);const G=R-d,X=L-d;if(G!=X){for(let Qe=0;Qe<G;Qe++){const _t=Qe<g.length?g[Qe]:g[Qe]=0,Wt=_t+Qe;X<=Wt&&Wt<G&&(g[Qe]=_t+1)}g[b.previousIndex]=X-G}}R!==L&&r(b,R,L)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!qu(r))throw new nt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,g,b,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)g=r[R],b=this._trackByFn(R,g),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,g,b,R)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,b,R),a=!0),s=s._next}else d=0,function Lf(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[du()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,R=>{b=this._trackByFn(d,R),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,R,b,d)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,b,d),a=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,d){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,d)):r=this._addAfter(new II(s,a),g,d),r}_verifyReinsertion(r,s,a,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,g=r._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new _E),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _E),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class II{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class _E{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bI,this.map.set(s,a)),a.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yE(t,r,s){const a=t.previousIndex;if(null===a)return a;let d=0;return s&&a<s.length&&(d=s[a]),a+r+d}class vE{constructor(){}supports(r){return r instanceof Map||Hp(r)}create(){return new TI}}class TI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Hp(r)))throw new nt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(d,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const g=d._prev,b=d._next;return g&&(g._next=b),b&&(b._prev=g),d._next=null,d._prev=null,d}const a=new DI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class DI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function EE(){return new Ay([new mE])}let Ay=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||EE()),deps:[[t,new bi,new _a]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(null!=a)return a;throw new nt(901,!1)}}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:EE}),t})();function wE(){return new Sy([new vE])}let Sy=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||wE()),deps:[[t,new bi,new _a]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(a)return a;throw new nt(901,!1)}}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:wE}),t})();const xI=rE(null,"core",[]);let MI=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Oi(Bm))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mn({}),t})();function RI(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}},1481:(an,ht,j)=>{j.d(ht,{Dx:()=>dt,b2:()=>Yn,q6:()=>Lr});var C=j(6895),h=j(4650);class Z extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class P extends Z{static makeCurrent(){(0,C.HT)(new P)}onAndCancel(pe,ce,et){return pe.addEventListener(ce,et,!1),()=>{pe.removeEventListener(ce,et,!1)}}dispatchEvent(pe,ce){pe.dispatchEvent(ce)}remove(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}createElement(pe,ce){return(ce=ce||this.getDefaultDocument()).createElement(pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pe){return pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(pe){return pe instanceof DocumentFragment}getGlobalEventTarget(pe,ce){return"window"===ce?window:"document"===ce?pe:"body"===ce?pe.body:null}getBaseHref(pe){const ce=function Le(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==ce?null:function be(ve){qe=qe||document.createElement("a"),qe.setAttribute("href",ve);const pe=qe.pathname;return"/"===pe.charAt(0)?pe:`/${pe}`}(ce)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(pe){return(0,C.Mx)(document.cookie,pe)}}let qe,de=null;const tt=new h.OlP("TRANSITION_ID"),fe=[{provide:h.ip1,useFactory:function ie(ve,pe,ce){return()=>{ce.get(h.CZH).donePromise.then(()=>{const et=(0,C.q)(),je=pe.querySelectorAll(`style[ng-transition="${ve}"]`);for(let ft=0;ft<je.length;ft++)et.remove(je[ft])})}},deps:[tt,C.K0,h.zs3],multi:!0}];let st=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(ce){return new(ce||ve)},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const ot=new h.OlP("EventManagerPlugins");let nt=(()=>{class ve{constructor(ce,et){this._zone=et,this._eventNameToPlugin=new Map,ce.forEach(je=>je.manager=this),this._plugins=ce.slice().reverse()}addEventListener(ce,et,je){return this._findPluginFor(et).addEventListener(ce,et,je)}addGlobalEventListener(ce,et,je){return this._findPluginFor(et).addGlobalEventListener(ce,et,je)}getZone(){return this._zone}_findPluginFor(ce){const et=this._eventNameToPlugin.get(ce);if(et)return et;const je=this._plugins;for(let ft=0;ft<je.length;ft++){const he=je[ft];if(he.supports(ce))return this._eventNameToPlugin.set(ce,he),he}throw new Error(`No event manager plugin found for event ${ce}`)}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(ot),h.LFG(h.R0b))},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Ot{constructor(pe){this._doc=pe}addGlobalEventListener(pe,ce,et){const je=(0,C.q)().getGlobalEventTarget(this._doc,pe);if(!je)throw new Error(`Unsupported event target ${je} for event ${ce}`);return this.addEventListener(je,ce,et)}}let at=(()=>{class ve{constructor(){this._stylesSet=new Set}addStyles(ce){const et=new Set;ce.forEach(je=>{this._stylesSet.has(je)||(this._stylesSet.add(je),et.add(je))}),this.onStylesAdded(et)}onStylesAdded(ce){}getAllStyles(){return Array.from(this._stylesSet)}}return ve.\u0275fac=function(ce){return new(ce||ve)},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),it=(()=>{class ve extends at{constructor(ce){super(),this._doc=ce,this._hostNodes=new Map,this._hostNodes.set(ce.head,[])}_addStylesToHost(ce,et,je){ce.forEach(ft=>{const he=this._doc.createElement("style");he.textContent=ft,je.push(et.appendChild(he))})}addHost(ce){const et=[];this._addStylesToHost(this._stylesSet,ce,et),this._hostNodes.set(ce,et)}removeHost(ce){const et=this._hostNodes.get(ce);et&&et.forEach(Ht),this._hostNodes.delete(ce)}onStylesAdded(ce){this._hostNodes.forEach((et,je)=>{this._addStylesToHost(ce,je,et)})}ngOnDestroy(){this._hostNodes.forEach(ce=>ce.forEach(Ht))}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(C.K0))},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function Ht(ve){(0,C.q)().remove(ve)}const qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g;function Pe(ve,pe,ce){for(let et=0;et<pe.length;et++){let je=pe[et];Array.isArray(je)?Pe(ve,je,ce):(je=je.replace(xe,ve),ce.push(je))}return ce}function Ue(ve){return pe=>{if("__ngUnwrap__"===pe)return ve;!1===ve(pe)&&(pe.preventDefault(),pe.returnValue=!1)}}let Ye=(()=>{class ve{constructor(ce,et,je){this.eventManager=ce,this.sharedStylesHost=et,this.appId=je,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(ce)}createRenderer(ce,et){if(!ce||!et)return this.defaultRenderer;switch(et.encapsulation){case h.ifc.Emulated:{let je=this.rendererByCompId.get(et.id);return je||(je=new xn(this.eventManager,this.sharedStylesHost,et,this.appId),this.rendererByCompId.set(et.id,je)),je.applyToHost(ce),je}case 1:case h.ifc.ShadowDom:return new Et(this.eventManager,this.sharedStylesHost,ce,et);default:if(!this.rendererByCompId.has(et.id)){const je=Pe(et.id,et.styles,[]);this.sharedStylesHost.addStyles(je),this.rendererByCompId.set(et.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(nt),h.LFG(it),h.LFG(h.AFp))},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Mt{constructor(pe){this.eventManager=pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pe,ce){return ce?document.createElementNS(qt[ce]||ce,pe):document.createElement(pe)}createComment(pe){return document.createComment(pe)}createText(pe){return document.createTextNode(pe)}appendChild(pe,ce){(gn(pe)?pe.content:pe).appendChild(ce)}insertBefore(pe,ce,et){pe&&(gn(pe)?pe.content:pe).insertBefore(ce,et)}removeChild(pe,ce){pe&&pe.removeChild(ce)}selectRootElement(pe,ce){let et="string"==typeof pe?document.querySelector(pe):pe;if(!et)throw new Error(`The selector "${pe}" did not match any elements`);return ce||(et.textContent=""),et}parentNode(pe){return pe.parentNode}nextSibling(pe){return pe.nextSibling}setAttribute(pe,ce,et,je){if(je){ce=je+":"+ce;const ft=qt[je];ft?pe.setAttributeNS(ft,ce,et):pe.setAttribute(ce,et)}else pe.setAttribute(ce,et)}removeAttribute(pe,ce,et){if(et){const je=qt[et];je?pe.removeAttributeNS(je,ce):pe.removeAttribute(`${et}:${ce}`)}else pe.removeAttribute(ce)}addClass(pe,ce){pe.classList.add(ce)}removeClass(pe,ce){pe.classList.remove(ce)}setStyle(pe,ce,et,je){je&(h.JOm.DashCase|h.JOm.Important)?pe.style.setProperty(ce,et,je&h.JOm.Important?"important":""):pe.style[ce]=et}removeStyle(pe,ce,et){et&h.JOm.DashCase?pe.style.removeProperty(ce):pe.style[ce]=""}setProperty(pe,ce,et){pe[ce]=et}setValue(pe,ce){pe.nodeValue=ce}listen(pe,ce,et){return"string"==typeof pe?this.eventManager.addGlobalEventListener(pe,ce,Ue(et)):this.eventManager.addEventListener(pe,ce,Ue(et))}}function gn(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class xn extends Mt{constructor(pe,ce,et,je){super(pe),this.component=et;const ft=Pe(je+"-"+et.id,et.styles,[]);ce.addStyles(ft),this.contentAttr=function se(ve){return"_ngcontent-%COMP%".replace(xe,ve)}(je+"-"+et.id),this.hostAttr=function ze(ve){return"_nghost-%COMP%".replace(xe,ve)}(je+"-"+et.id)}applyToHost(pe){super.setAttribute(pe,this.hostAttr,"")}createElement(pe,ce){const et=super.createElement(pe,ce);return super.setAttribute(et,this.contentAttr,""),et}}class Et extends Mt{constructor(pe,ce,et,je){super(pe),this.sharedStylesHost=ce,this.hostEl=et,this.shadowRoot=et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ft=Pe(je.id,je.styles,[]);for(let he=0;he<ft.length;he++){const ne=document.createElement("style");ne.textContent=ft[he],this.shadowRoot.appendChild(ne)}}nodeOrShadowRoot(pe){return pe===this.hostEl?this.shadowRoot:pe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pe,ce){return super.appendChild(this.nodeOrShadowRoot(pe),ce)}insertBefore(pe,ce,et){return super.insertBefore(this.nodeOrShadowRoot(pe),ce,et)}removeChild(pe,ce){return super.removeChild(this.nodeOrShadowRoot(pe),ce)}parentNode(pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pe)))}}let nn=(()=>{class ve extends Ot{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,et,je){return ce.addEventListener(et,je,!1),()=>this.removeEventListener(ce,et,je)}removeEventListener(ce,et,je){return ce.removeEventListener(et,je)}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(C.K0))},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const zn=["alt","control","meta","shift"],Nn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let jn=(()=>{class ve extends Ot{constructor(ce){super(ce)}supports(ce){return null!=ve.parseEventName(ce)}addEventListener(ce,et,je){const ft=ve.parseEventName(et),he=ve.eventCallback(ft.fullKey,je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(ce,ft.domEventName,he))}static parseEventName(ce){const et=ce.toLowerCase().split("."),je=et.shift();if(0===et.length||"keydown"!==je&&"keyup"!==je)return null;const ft=ve._normalizeKey(et.pop());let he="",ne=et.indexOf("code");if(ne>-1&&(et.splice(ne,1),he="code."),zn.forEach(te=>{const Ee=et.indexOf(te);Ee>-1&&(et.splice(Ee,1),he+=te+".")}),he+=ft,0!=et.length||0===ft.length)return null;const W={};return W.domEventName=je,W.fullKey=he,W}static matchEventFullKeyCode(ce,et){let je=Nn[ce.key]||ce.key,ft="";return et.indexOf("code.")>-1&&(je=ce.code,ft="code."),!(null==je||!je)&&(je=je.toLowerCase()," "===je?je="space":"."===je&&(je="dot"),zn.forEach(he=>{he!==je&&(0,Kn[he])(ce)&&(ft+=he+".")}),ft+=je,ft===et)}static eventCallback(ce,et,je){return ft=>{ve.matchEventFullKeyCode(ft,ce)&&je.runGuarded(()=>et(ft))}}static _normalizeKey(ce){return"esc"===ce?"escape":ce}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(C.K0))},ve.\u0275prov=h.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Lr=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:C.bD},{provide:h.g9A,useValue:function lr(){P.makeCurrent()},multi:!0},{provide:C.K0,useFactory:function dn(){return(0,h.RDi)(document),document},deps:[]}]),mr=new h.OlP(""),en=[{provide:h.rWj,useClass:class Ce{addToWindow(pe){h.dqk.getAngularTestability=(et,je=!0)=>{const ft=pe.findTestabilityInTree(et,je);if(null==ft)throw new Error("Could not find testability for element.");return ft},h.dqk.getAllAngularTestabilities=()=>pe.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>pe.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(et=>{const je=h.dqk.getAllAngularTestabilities();let ft=je.length,he=!1;const ne=function(W){he=he||W,ft--,0==ft&&et(he)};je.forEach(function(W){W.whenStable(ne)})})}findTestabilityInTree(pe,ce,et){return null==ce?null:pe.getTestability(ce)??(et?(0,C.q)().isShadowRoot(ce)?this.findTestabilityInTree(pe,ce.host,!0):this.findTestabilityInTree(pe,ce.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],hr=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Mr(){return new h.qLn},deps:[]},{provide:ot,useClass:nn,multi:!0,deps:[C.K0,h.R0b,h.Lbi]},{provide:ot,useClass:jn,multi:!0,deps:[C.K0]},{provide:Ye,useClass:Ye,deps:[nt,it,h.AFp]},{provide:h.FYo,useExisting:Ye},{provide:at,useExisting:it},{provide:it,useClass:it,deps:[C.K0]},{provide:nt,useClass:nt,deps:[ot,h.R0b]},{provide:C.JF,useClass:st,deps:[]},[]];let Yn=(()=>{class ve{constructor(ce){}static withServerTransition(ce){return{ngModule:ve,providers:[{provide:h.AFp,useValue:ce.appId},{provide:tt,useExisting:h.AFp},fe]}}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(mr,12))},ve.\u0275mod=h.oAB({type:ve}),ve.\u0275inj=h.cJS({providers:[...hr,...en],imports:[C.ez,h.hGG]}),ve})(),dt=(()=>{class ve{constructor(ce){this._doc=ce}getTitle(){return this._doc.title}setTitle(ce){this._doc.title=ce||""}}return ve.\u0275fac=function(ce){return new(ce||ve)(h.LFG(C.K0))},ve.\u0275prov=h.Yz7({token:ve,factory:function(ce){let et=null;return et=ce?new ce:function vr(){return new dt((0,h.LFG)(C.K0))}(),et},providedIn:"root"}),ve})();typeof window<"u"&&window},7001:(an,ht,j)=>{j.d(ht,{F0:()=>Ji,rH:()=>Io,yS:()=>Ra,Bz:()=>co,lC:()=>Tt});var C=j(4650),h=j(8996),Z=j(9646),P=j(7579);class de extends P.x{constructor(A){super(),this._value=A}get value(){return this.getValue()}_subscribe(A){const T=super._subscribe(A);return!T.closed&&A.next(this._value),T}getValue(){const{hasError:A,thrownError:T,_value:k}=this;if(A)throw T;return this._throwIfClosed(),k}next(A){super.next(this._value=A)}}var Le=j(6805),qe=j(9751),be=j(4742),tt=j(4671),ie=j(3268),fe=j(7669),Ce=j(1810),st=j(5403),ot=j(9672);function nt(...D){const A=(0,fe.yG)(D),T=(0,fe.jO)(D),{args:k,keys:B}=(0,be.D)(D);if(0===k.length)return(0,h.D)([],A);const Y=new qe.y(function Ot(D,A,T=tt.y){return k=>{at(A,()=>{const{length:B}=D,Y=new Array(B);let ye=B,Me=B;for(let bt=0;bt<B;bt++)at(A,()=>{const tn=(0,h.D)(D[bt],A);let cr=!1;tn.subscribe((0,st.x)(k,_n=>{Y[bt]=_n,cr||(cr=!0,Me--),Me||k.next(T(Y.slice()))},()=>{--ye||k.complete()}))},k)},k)}}(k,A,B?ye=>(0,Ce.n)(B,ye):tt.y));return T?Y.pipe((0,ie.Z)(T)):Y}function at(D,A,T){D?(0,ot.f)(T,D,A):A()}var it=j(7272),Ht=j(8421);function qt(D){return new qe.y(A=>{(0,Ht.Xf)(D()).subscribe(A)})}var xe=j(9635),gt=j(576);function Be(D,A){const T=(0,gt.m)(D)?D:()=>D,k=B=>B.error(T());return new qe.y(A?B=>A.schedule(k,0,B):k)}var ut=j(515),ee=j(727),se=j(4482);function ze(){return(0,se.e)((D,A)=>{let T=null;D._refCount++;const k=(0,st.x)(A,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(T=null);const B=D._connection,Y=T;T=null,B&&(!Y||B===Y)&&B.unsubscribe(),A.unsubscribe()});D.subscribe(k),k.closed||(T=D.connect())})}class Pe extends qe.y{constructor(A,T){super(),this.source=A,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,se.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new ee.w0;const T=this.getSubject();A.add(this.source.subscribe((0,st.x)(T,void 0,()=>{this._teardown(),T.complete()},k=>{this._teardown(),T.error(k)},()=>this._teardown()))),A.closed&&(this._connection=null,A=ee.w0.EMPTY)}return A}refCount(){return ze()(this)}}var Ue=j(6895),Ke=j(4004),Ye=j(3900),Mt=j(5698),kt=j(8675),Bt=j(9300),gn=j(5577),xn=j(590),Et=j(4351),nn=j(8505);function zn(D){return(0,se.e)((A,T)=>{let Y,k=null,B=!1;k=A.subscribe((0,st.x)(T,void 0,void 0,ye=>{Y=(0,Ht.Xf)(D(ye,zn(D)(A))),k?(k.unsubscribe(),k=null,Y.subscribe(T)):B=!0})),B&&(k.unsubscribe(),k=null,Y.subscribe(T))})}var Nn=j(5026);function Kn(D){return D<=0?()=>ut.E:(0,se.e)((A,T)=>{let k=[];A.subscribe((0,st.x)(T,B=>{k.push(B),D<k.length&&k.shift()},()=>{for(const B of k)T.next(B);T.complete()},void 0,()=>{k=null}))})}var jn=j(8068),mn=j(6590);function ir(D,A){const T=arguments.length>=2;return k=>k.pipe(D?(0,Bt.h)((B,Y)=>D(B,Y,k)):tt.y,Kn(1),T?(0,mn.d)(A):(0,jn.T)(()=>new Le.K))}function ur(D){return(0,se.e)((A,T)=>{try{A.subscribe(T)}finally{T.add(D)}})}var lr=j(8189),Mr=j(1481);const dn="primary",Xn=Symbol("RouteTitle");class Lr{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T[0]:T}return null}getAll(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function mr(D){return new Lr(D)}function en(D,A,T){const k=T.path.split("/");if(k.length>D.length||"full"===T.pathMatch&&(A.hasChildren()||k.length<D.length))return null;const B={};for(let Y=0;Y<k.length;Y++){const ye=k[Y],Me=D[Y];if(ye.startsWith(":"))B[ye.substring(1)]=Me;else if(ye!==Me.path)return null}return{consumed:D.slice(0,k.length),posParams:B}}function Yn(D,A){const T=D?Object.keys(D):void 0,k=A?Object.keys(A):void 0;if(!T||!k||T.length!=k.length)return!1;let B;for(let Y=0;Y<T.length;Y++)if(B=T[Y],!er(D[B],A[B]))return!1;return!0}function er(D,A){if(Array.isArray(D)&&Array.isArray(A)){if(D.length!==A.length)return!1;const T=[...D].sort(),k=[...A].sort();return T.every((B,Y)=>k[Y]===B)}return D===A}function fr(D){return Array.prototype.concat.apply([],D)}function ri(D){return D.length>0?D[D.length-1]:null}function dt(D,A){for(const T in D)D.hasOwnProperty(T)&&A(D[T],T)}function Ie(D){return(0,C.CqO)(D)?D:(0,C.QGY)(D)?(0,h.D)(Promise.resolve(D)):(0,Z.of)(D)}const ct={exact:function zt(D,A,T){if(!Re(D.segments,A.segments)||!wn(D.segments,A.segments,T)||D.numberOfChildren!==A.numberOfChildren)return!1;for(const k in A.children)if(!D.children[k]||!zt(D.children[k],A.children[k],T))return!1;return!0},subset:vn},rn={exact:function Qn(D,A){return Yn(D,A)},subset:function Jn(D,A){return Object.keys(A).length<=Object.keys(D).length&&Object.keys(A).every(T=>er(D[T],A[T]))},ignored:()=>!0};function Dn(D,A,T){return ct[T.paths](D.root,A.root,T.matrixParams)&&rn[T.queryParams](D.queryParams,A.queryParams)&&!("exact"===T.fragment&&D.fragment!==A.fragment)}function vn(D,A,T){return br(D,A,A.segments,T)}function br(D,A,T,k){if(D.segments.length>T.length){const B=D.segments.slice(0,T.length);return!(!Re(B,T)||A.hasChildren()||!wn(B,T,k))}if(D.segments.length===T.length){if(!Re(D.segments,T)||!wn(D.segments,T,k))return!1;for(const B in A.children)if(!D.children[B]||!vn(D.children[B],A.children[B],k))return!1;return!0}{const B=T.slice(0,D.segments.length),Y=T.slice(D.segments.length);return!!(Re(D.segments,B)&&wn(D.segments,B,k)&&D.children[dn])&&br(D.children[dn],A,Y,k)}}function wn(D,A,T){return A.every((k,B)=>rn[T](D[B].parameters,k.parameters))}class Te{constructor(A,T,k){this.root=A,this.queryParams=T,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return Bn.serialize(this)}}class le{constructor(A,T){this.segments=A,this.children=T,this.parent=null,dt(T,(k,B)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zn(this)}}class we{constructor(A,T){this.path=A,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=mr(this.parameters)),this._parameterMap}toString(){return Cn(this)}}function Re(D,A){return D.length===A.length&&D.every((T,k)=>T.path===A[k].path)}let Dt=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return new Yt},providedIn:"root"}),D})();class Yt{parse(A){const T=new W(A);return new Te(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(A){const T=`/${Ir(A.root,!0)}`,k=function pe(D){const A=Object.keys(D).map(T=>{const k=D[T];return Array.isArray(k)?k.map(B=>`${Se(T)}=${Se(B)}`).join("&"):`${Se(T)}=${Se(k)}`}).filter(T=>!!T);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${T}${k}${"string"==typeof A.fragment?`#${function Fe(D){return encodeURI(D)}(A.fragment)}`:""}`}}const Bn=new Yt;function Zn(D){return D.segments.map(A=>Cn(A)).join("/")}function Ir(D,A){if(!D.hasChildren())return Zn(D);if(A){const T=D.children[dn]?Ir(D.children[dn],!1):"",k=[];return dt(D.children,(B,Y)=>{Y!==dn&&k.push(`${Y}:${Ir(B,!1)}`)}),k.length>0?`${T}(${k.join("//")})`:T}{const T=function wt(D,A){let T=[];return dt(D.children,(k,B)=>{B===dn&&(T=T.concat(A(k,B)))}),dt(D.children,(k,B)=>{B!==dn&&(T=T.concat(A(k,B)))}),T}(D,(k,B)=>B===dn?[Ir(D.children[dn],!1)]:[`${B}:${Ir(k,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[dn]?`${Zn(D)}/${T[0]}`:`${Zn(D)}/(${T.join("//")})`}}function Je(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Se(D){return Je(D).replace(/%3B/gi,";")}function Ct(D){return Je(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jt(D){return decodeURIComponent(D)}function fn(D){return jt(D.replace(/\+/g,"%20"))}function Cn(D){return`${Ct(D.path)}${function ve(D){return Object.keys(D).map(A=>`;${Ct(A)}=${Ct(D[A])}`).join("")}(D.parameters)}`}const ce=/^[^\/()?;=#]+/;function et(D){const A=D.match(ce);return A?A[0]:""}const je=/^[^=?&#]+/,he=/^[^&#]+/;class W{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(A.length>0||Object.keys(T).length>0)&&(k[dn]=new le(A,T)),k}parseSegment(){const A=et(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(A),new we(jt(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const T=et(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const B=et(this.remaining);B&&(k=B,this.capture(k))}A[jt(T)]=jt(k)}parseQueryParam(A){const T=function ft(D){const A=D.match(je);return A?A[0]:""}(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const ye=function ne(D){const A=D.match(he);return A?A[0]:""}(this.remaining);ye&&(k=ye,this.capture(k))}const B=fn(T),Y=fn(k);if(A.hasOwnProperty(B)){let ye=A[B];Array.isArray(ye)||(ye=[ye],A[B]=ye),ye.push(Y)}else A[B]=Y}parseParens(A){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=et(this.remaining),B=this.remaining[k.length];if("/"!==B&&")"!==B&&";"!==B)throw new C.vHH(4010,!1);let Y;k.indexOf(":")>-1?(Y=k.slice(0,k.indexOf(":")),this.capture(Y),this.capture(":")):A&&(Y=dn);const ye=this.parseChildren();T[Y]=1===Object.keys(ye).length?ye[dn]:new le([],ye),this.consumeOptional("//")}return T}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new C.vHH(4011,!1)}}function te(D){return D.segments.length>0?new le([],{[dn]:D}):D}function Ee(D){const A={};for(const k of Object.keys(D.children)){const Y=Ee(D.children[k]);(Y.segments.length>0||Y.hasChildren())&&(A[k]=Y)}return function oe(D){if(1===D.numberOfChildren&&D.children[dn]){const A=D.children[dn];return new le(D.segments.concat(A.segments),A.children)}return D}(new le(D.segments,A))}function Ze(D){return D instanceof Te}function pn(D,A,T,k,B){if(0===T.length)return Jr(A.root,A.root,A.root,k,B);const Y=function Kr(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Ci(!0,0,D);let A=0,T=!1;const k=D.reduce((B,Y,ye)=>{if("object"==typeof Y&&null!=Y){if(Y.outlets){const Me={};return dt(Y.outlets,(bt,tn)=>{Me[tn]="string"==typeof bt?bt.split("/"):bt}),[...B,{outlets:Me}]}if(Y.segmentPath)return[...B,Y.segmentPath]}return"string"!=typeof Y?[...B,Y]:0===ye?(Y.split("/").forEach((Me,bt)=>{0==bt&&"."===Me||(0==bt&&""===Me?T=!0:".."===Me?A++:""!=Me&&B.push(Me))}),B):[...B,Y]},[]);return new Ci(T,A,k)}(T);return Y.toRoot()?Jr(A.root,A.root,new le([],{}),k,B):function ye(bt){const tn=function On(D,A,T,k){if(D.isAbsolute)return new rr(A.root,!0,0);if(-1===k)return new rr(T,T===A.root,0);return function We(D,A,T){let k=D,B=A,Y=T;for(;Y>B;){if(Y-=B,k=k.parent,!k)throw new C.vHH(4005,!1);B=k.segments.length}return new rr(k,!1,B-Y)}(T,k+(pr(D.commands[0])?0:1),D.numberOfDoubleDots)}(Y,A,D.snapshot?._urlSegment,bt),cr=tn.processChildren?Nt(tn.segmentGroup,tn.index,Y.commands):rt(tn.segmentGroup,tn.index,Y.commands);return Jr(A.root,tn.segmentGroup,cr,k,B)}(D.snapshot?._lastPathIndex)}function pr(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function qr(D){return"object"==typeof D&&null!=D&&D.outlets}function Jr(D,A,T,k,B){let ye,Y={};k&&dt(k,(bt,tn)=>{Y[tn]=Array.isArray(bt)?bt.map(cr=>`${cr}`):`${bt}`}),ye=D===A?T:tr(D,A,T);const Me=te(Ee(ye));return new Te(Me,Y,B)}function tr(D,A,T){const k={};return dt(D.children,(B,Y)=>{k[Y]=B===A?T:tr(B,A,T)}),new le(D.segments,k)}class Ci{constructor(A,T,k){if(this.isAbsolute=A,this.numberOfDoubleDots=T,this.commands=k,A&&k.length>0&&pr(k[0]))throw new C.vHH(4003,!1);const B=k.find(qr);if(B&&B!==ri(k))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rr{constructor(A,T,k){this.segmentGroup=A,this.processChildren=T,this.index=k}}function rt(D,A,T){if(D||(D=new le([],{})),0===D.segments.length&&D.hasChildren())return Nt(D,A,T);const k=function Zt(D,A,T){let k=0,B=A;const Y={match:!1,pathIndex:0,commandIndex:0};for(;B<D.segments.length;){if(k>=T.length)return Y;const ye=D.segments[B],Me=T[k];if(qr(Me))break;const bt=`${Me}`,tn=k<T.length-1?T[k+1]:null;if(B>0&&void 0===bt)break;if(bt&&tn&&"object"==typeof tn&&void 0===tn.outlets){if(!$n(bt,tn,ye))return Y;k+=2}else{if(!$n(bt,{},ye))return Y;k++}B++}return{match:!0,pathIndex:B,commandIndex:k}}(D,A,T),B=T.slice(k.commandIndex);if(k.match&&k.pathIndex<D.segments.length){const Y=new le(D.segments.slice(0,k.pathIndex),{});return Y.children[dn]=new le(D.segments.slice(k.pathIndex),D.children),Nt(Y,0,B)}return k.match&&0===B.length?new le(D.segments,{}):k.match&&!D.hasChildren()?un(D,A,T):k.match?Nt(D,0,B):un(D,A,T)}function Nt(D,A,T){if(0===T.length)return new le(D.segments,{});{const k=function ke(D){return qr(D[0])?D[0].outlets:{[dn]:D}}(T),B={};return dt(k,(Y,ye)=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(B[ye]=rt(D.children[ye],A,Y))}),dt(D.children,(Y,ye)=>{void 0===k[ye]&&(B[ye]=Y)}),new le(D.segments,B)}}function un(D,A,T){const k=D.segments.slice(0,A);let B=0;for(;B<T.length;){const Y=T[B];if(qr(Y)){const bt=Mn(Y.outlets);return new le(k,bt)}if(0===B&&pr(T[0])){k.push(new we(D.segments[A].path,Fn(T[0]))),B++;continue}const ye=qr(Y)?Y.outlets[dn]:`${Y}`,Me=B<T.length-1?T[B+1]:null;ye&&Me&&pr(Me)?(k.push(new we(ye,Fn(Me))),B+=2):(k.push(new we(ye,{})),B++)}return new le(k,{})}function Mn(D){const A={};return dt(D,(T,k)=>{"string"==typeof T&&(T=[T]),null!==T&&(A[k]=un(new le([],{}),0,T))}),A}function Fn(D){const A={};return dt(D,(T,k)=>A[k]=`${T}`),A}function $n(D,A,T){return D==T.path&&Yn(A,T.parameters)}class $r{constructor(A,T){this.id=A,this.url=T}}class ys extends $r{constructor(A,T,k="imperative",B=null){super(A,T),this.type=0,this.navigationTrigger=k,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Di extends $r{constructor(A,T,k){super(A,T),this.urlAfterRedirects=k,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hi extends $r{constructor(A,T,k,B){super(A,T),this.reason=k,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ki extends $r{constructor(A,T,k,B){super(A,T),this.error=k,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ns extends $r{constructor(A,T,k,B){super(A,T),this.urlAfterRedirects=k,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yi extends $r{constructor(A,T,k,B){super(A,T),this.urlAfterRedirects=k,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends $r{constructor(A,T,k,B,Y){super(A,T),this.urlAfterRedirects=k,this.state=B,this.shouldActivate=Y,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cs extends $r{constructor(A,T,k,B){super(A,T),this.urlAfterRedirects=k,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na extends $r{constructor(A,T,k,B){super(A,T),this.urlAfterRedirects=k,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $a{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ho{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ba{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(A,T,k){this.routerEvent=A,this.position=T,this.anchor=k,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rs{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const T=this.pathFromRoot(A);return T.length>1?T[T.length-2]:null}children(A){const T=ds(A,this._root);return T?T.children.map(k=>k.value):[]}firstChild(A){const T=ds(A,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(A){const T=Is(A,this._root);return T.length<2?[]:T[T.length-2].children.map(B=>B.value).filter(B=>B!==A)}pathFromRoot(A){return Is(A,this._root).map(T=>T.value)}}function ds(D,A){if(D===A.value)return A;for(const T of A.children){const k=ds(D,T);if(k)return k}return null}function Is(D,A){if(D===A.value)return[A];for(const T of A.children){const k=Is(D,T);if(k.length)return k.unshift(A),k}return[]}class Xr{constructor(A,T){this.value=A,this.children=T}toString(){return`TreeNode(${this.value})`}}function Fi(D){const A={};return D&&D.children.forEach(T=>A[T.value.outlet]=T),A}class Li extends rs{constructor(A,T){super(A),this.snapshot=T,ks(this,A)}toString(){return this.snapshot.toString()}}function Ni(D,A){const T=function Ai(D,A){const ye=new qi([],{},{},"",{},dn,A,null,D.root,-1,{});return new _o("",new Xr(ye,[]))}(D,A),k=new de([new we("",{})]),B=new de({}),Y=new de({}),ye=new de({}),Me=new de(""),bt=new Nr(k,B,ye,Me,Y,dn,A,T.root);return bt.snapshot=T.root,new Li(new Xr(bt,[]),T)}class Nr{constructor(A,T,k,B,Y,ye,Me,bt){this.url=A,this.params=T,this.queryParams=k,this.fragment=B,this.data=Y,this.outlet=ye,this.component=Me,this.title=this.data?.pipe((0,Ke.U)(tn=>tn[Xn]))??(0,Z.of)(void 0),this._futureSnapshot=bt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(A=>mr(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(A=>mr(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Os(D,A="emptyOnly"){const T=D.pathFromRoot;let k=0;if("always"!==A)for(k=T.length-1;k>=1;){const B=T[k],Y=T[k-1];if(B.routeConfig&&""===B.routeConfig.path)k--;else{if(Y.component)break;k--}}return function Zs(D){return D.reduce((A,T)=>({params:{...A.params,...T.params},data:{...A.data,...T.data},resolve:{...T.data,...A.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(k))}class qi{constructor(A,T,k,B,Y,ye,Me,bt,tn,cr,_n,kr){this.url=A,this.params=T,this.queryParams=k,this.fragment=B,this.data=Y,this.outlet=ye,this.component=Me,this.title=this.data?.[Xn],this.routeConfig=bt,this._urlSegment=tn,this._lastPathIndex=cr,this._correctedLastPathIndex=kr??cr,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _o extends rs{constructor(A,T){super(T),this.url=A,ks(this,T)}toString(){return ia(this._root)}}function ks(D,A){A.value._routerState=D,A.children.forEach(T=>ks(D,T))}function ia(D){const A=D.children.length>0?` { ${D.children.map(ia).join(", ")} } `:"";return`${D.value}${A}`}function Si(D){if(D.snapshot){const A=D.snapshot,T=D._futureSnapshot;D.snapshot=T,Yn(A.queryParams,T.queryParams)||D.queryParams.next(T.queryParams),A.fragment!==T.fragment&&D.fragment.next(T.fragment),Yn(A.params,T.params)||D.params.next(T.params),function hr(D,A){if(D.length!==A.length)return!1;for(let T=0;T<D.length;++T)if(!Yn(D[T],A[T]))return!1;return!0}(A.url,T.url)||D.url.next(T.url),Yn(A.data,T.data)||D.data.next(T.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function qs(D,A){const T=Yn(D.params,A.params)&&function Oe(D,A){return Re(D,A)&&D.every((T,k)=>Yn(T.parameters,A[k].parameters))}(D.url,A.url);return T&&!(!D.parent!=!A.parent)&&(!D.parent||qs(D.parent,A.parent))}function is(D,A,T){if(T&&D.shouldReuseRoute(A.value,T.value.snapshot)){const k=T.value;k._futureSnapshot=A.value;const B=function Gi(D,A,T){return A.children.map(k=>{for(const B of T.children)if(D.shouldReuseRoute(k.value,B.value.snapshot))return is(D,k,B);return is(D,k)})}(D,A,T);return new Xr(k,B)}{if(D.shouldAttach(A.value)){const Y=D.retrieve(A.value);if(null!==Y){const ye=Y.route;return ye.value._futureSnapshot=A.value,ye.children=A.children.map(Me=>is(D,Me)),ye}}const k=function oo(D){return new Nr(new de(D.url),new de(D.params),new de(D.queryParams),new de(D.fragment),new de(D.data),D.outlet,D.component,D)}(A.value),B=A.children.map(Y=>is(D,Y));return new Xr(k,B)}}const ei="ngNavigationCancelingError";function Ta(D,A){const{redirectTo:T,navigationBehaviorOptions:k}=Ze(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,B=Gr(!1,0,A);return B.url=T,B.navigationBehaviorOptions=k,B}function Gr(D,A,T){const k=new Error("NavigationCancelingError: "+(D||""));return k[ei]=!0,k.cancellationCode=A,T&&(k.url=T),k}function De(D){return me(D)&&Ze(D.url)}function me(D){return D&&D[ei]}class Ge{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new lt,this.attachRef=null}}let lt=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(T,k){const B=this.getOrCreateContext(T);B.outlet=k,this.contexts.set(T,B)}onChildOutletDestroyed(T){const k=this.getContext(T);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let k=this.getContext(T);return k||(k=new Ge,this.contexts.set(T,k)),k}getContext(T){return this.contexts.get(T)||null}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const xt=!1;let Tt=(()=>{class D{constructor(T,k,B,Y,ye){this.parentContexts=T,this.location=k,this.changeDetector=Y,this.environmentInjector=ye,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=B||dn,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,xt);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,xt);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,xt);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,k){this.activated=T,this._activatedRoute=k,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,k){if(this.isActivated)throw new C.vHH(4013,xt);this._activatedRoute=T;const B=this.location,ye=T._futureSnapshot.component,Me=this.parentContexts.getOrCreateContext(this.name).children,bt=new ln(T,Me,B.injector);if(k&&function cn(D){return!!D.resolveComponentFactory}(k)){const tn=k.resolveComponentFactory(ye);this.activated=B.createComponent(tn,B.length,bt)}else this.activated=B.createComponent(ye,{index:B.length,injector:bt,environmentInjector:k??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(lt),C.Y36(C.s_b),C.$8M("name"),C.Y36(C.sBO),C.Y36(C.lqb))},D.\u0275dir=C.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class ln{constructor(A,T,k){this.route=A,this.childContexts=T,this.parent=k}get(A,T){return A===Nr?this.route:A===lt?this.childContexts:this.parent.get(A,T)}}let Tr=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275cmp=C.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(T,k){1&T&&C._UZ(0,"router-outlet")},dependencies:[Tt],encapsulation:2}),D})();function Ln(D,A){return D.providers&&!D._injector&&(D._injector=(0,C.MMx)(D.providers,A,`Route: ${D.path}`)),D._injector??A}function yo(D){const A=D.children&&D.children.map(yo),T=A?{...D,children:A}:{...D};return!T.component&&!T.loadComponent&&(A||T.loadChildren)&&T.outlet&&T.outlet!==dn&&(T.component=Tr),T}function fi(D){return D.outlet||dn}function Mi(D,A){const T=D.filter(k=>fi(k)===A);return T.push(...D.filter(k=>fi(k)!==A)),T}function Ui(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let A=D.parent;A;A=A.parent){const T=A.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class Vt{constructor(A,T,k,B){this.routeReuseStrategy=A,this.futureState=T,this.currState=k,this.forwardEvent=B}activate(A){const T=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,k,A),Si(this.futureState.root),this.activateChildRoutes(T,k,A)}deactivateChildRoutes(A,T,k){const B=Fi(T);A.children.forEach(Y=>{const ye=Y.value.outlet;this.deactivateRoutes(Y,B[ye],k),delete B[ye]}),dt(B,(Y,ye)=>{this.deactivateRouteAndItsChildren(Y,k)})}deactivateRoutes(A,T,k){const B=A.value,Y=T?T.value:null;if(B===Y)if(B.component){const ye=k.getContext(B.outlet);ye&&this.deactivateChildRoutes(A,T,ye.children)}else this.deactivateChildRoutes(A,T,k);else Y&&this.deactivateRouteAndItsChildren(T,k)}deactivateRouteAndItsChildren(A,T){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,T):this.deactivateRouteAndOutlet(A,T)}detachAndStoreRouteSubtree(A,T){const k=T.getContext(A.value.outlet),B=k&&A.value.component?k.children:T,Y=Fi(A);for(const ye of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ye],B);if(k&&k.outlet){const ye=k.outlet.detach(),Me=k.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:ye,route:A,contexts:Me})}}deactivateRouteAndOutlet(A,T){const k=T.getContext(A.value.outlet),B=k&&A.value.component?k.children:T,Y=Fi(A);for(const ye of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ye],B);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(A,T,k){const B=Fi(T);A.children.forEach(Y=>{this.activateRoutes(Y,B[Y.value.outlet],k),this.forwardEvent(new ra(Y.value.snapshot))}),A.children.length&&this.forwardEvent(new ba(A.value.snapshot))}activateRoutes(A,T,k){const B=A.value,Y=T?T.value:null;if(Si(B),B===Y)if(B.component){const ye=k.getOrCreateContext(B.outlet);this.activateChildRoutes(A,T,ye.children)}else this.activateChildRoutes(A,T,k);else if(B.component){const ye=k.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const Me=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),ye.children.onOutletReAttached(Me.contexts),ye.attachRef=Me.componentRef,ye.route=Me.route.value,ye.outlet&&ye.outlet.attach(Me.componentRef,Me.route.value),Si(Me.route.value),this.activateChildRoutes(A,null,ye.children)}else{const Me=Ui(B.snapshot),bt=Me?.get(C._Vd)??null;ye.attachRef=null,ye.route=B,ye.resolver=bt,ye.injector=Me,ye.outlet&&ye.outlet.activateWith(B,ye.injector),this.activateChildRoutes(A,null,ye.children)}}else this.activateChildRoutes(A,null,k)}}class Rr{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Go{constructor(A,T){this.component=A,this.route=T}}function Oo(D,A,T){const k=D._root;return ao(k,A?A._root:null,T,[k.value])}function Fs(D,A){const T=Symbol(),k=A.get(D,T);return k===T?"function"!=typeof D||(0,C.Z0I)(D)?A.get(D):D:k}function ao(D,A,T,k,B={canDeactivateChecks:[],canActivateChecks:[]}){const Y=Fi(A);return D.children.forEach(ye=>{(function vs(D,A,T,k,B={canDeactivateChecks:[],canActivateChecks:[]}){const Y=D.value,ye=A?A.value:null,Me=T?T.getContext(D.value.outlet):null;if(ye&&Y.routeConfig===ye.routeConfig){const bt=function hu(D,A,T){if("function"==typeof T)return T(D,A);switch(T){case"pathParamsChange":return!Re(D.url,A.url);case"pathParamsOrQueryParamsChange":return!Re(D.url,A.url)||!Yn(D.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qs(D,A)||!Yn(D.queryParams,A.queryParams);default:return!qs(D,A)}}(ye,Y,Y.routeConfig.runGuardsAndResolvers);bt?B.canActivateChecks.push(new Rr(k)):(Y.data=ye.data,Y._resolvedData=ye._resolvedData),ao(D,A,Y.component?Me?Me.children:null:T,k,B),bt&&Me&&Me.outlet&&Me.outlet.isActivated&&B.canDeactivateChecks.push(new Go(Me.outlet.component,ye))}else ye&&Qi(A,Me,B),B.canActivateChecks.push(new Rr(k)),ao(D,null,Y.component?Me?Me.children:null:T,k,B)})(ye,Y[ye.value.outlet],T,k.concat([ye.value]),B),delete Y[ye.value.outlet]}),dt(Y,(ye,Me)=>Qi(ye,T.getContext(Me),B)),B}function Qi(D,A,T){const k=Fi(D),B=D.value;dt(k,(Y,ye)=>{Qi(Y,B.component?A?A.children.getContext(ye):null:A,T)}),T.canDeactivateChecks.push(new Go(B.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,B))}function Wo(D){return"function"==typeof D}function ko(D){return D instanceof Le.K||"EmptyError"===D?.name}const aa=Symbol("INITIAL_VALUE");function Ts(){return(0,Ye.w)(D=>nt(D.map(A=>A.pipe((0,Mt.q)(1),(0,kt.O)(aa)))).pipe((0,Ke.U)(A=>{for(const T of A)if(!0!==T){if(T===aa)return aa;if(!1===T||T instanceof Te)return T}return!0}),(0,Bt.h)(A=>A!==aa),(0,Mt.q)(1)))}function zo(D){return(0,xe.z)((0,nn.b)(A=>{if(Ze(A))throw Ta(0,A)}),(0,Ke.U)(A=>!0===A))}const F={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z(D,A,T,k,B){const Y=U(D,A,T);return Y.matched?function Sa(D,A,T,k){const B=A.canMatch;if(!B||0===B.length)return(0,Z.of)(!0);const Y=B.map(ye=>{const Me=Fs(ye,D);return Ie(function Us(D){return D&&Wo(D.canMatch)}(Me)?Me.canMatch(A,T):D.runInContext(()=>Me(A,T)))});return(0,Z.of)(Y).pipe(Ts(),zo())}(k=Ln(A,k),A,T).pipe((0,Ke.U)(ye=>!0===ye?Y:{...F})):(0,Z.of)(Y)}function U(D,A,T){if(""===A.path)return"full"===A.pathMatch&&(D.hasChildren()||T.length>0)?{...F}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const B=(A.matcher||en)(T,D,A);if(!B)return{...F};const Y={};dt(B.posParams,(Me,bt)=>{Y[bt]=Me.path});const ye=B.consumed.length>0?{...Y,...B.consumed[B.consumed.length-1].parameters}:Y;return{matched:!0,consumedSegments:B.consumed,remainingSegments:T.slice(B.consumed.length),parameters:ye,positionalParamSegments:B.posParams??{}}}function Q(D,A,T,k,B="corrected"){if(T.length>0&&function At(D,A,T){return T.some(k=>Qr(D,A,k)&&fi(k)!==dn)}(D,T,k)){const ye=new le(A,function It(D,A,T,k){const B={};B[dn]=k,k._sourceSegment=D,k._segmentIndexShift=A.length;for(const Y of T)if(""===Y.path&&fi(Y)!==dn){const ye=new le([],{});ye._sourceSegment=D,ye._segmentIndexShift=A.length,B[fi(Y)]=ye}return B}(D,A,k,new le(T,D.children)));return ye._sourceSegment=D,ye._segmentIndexShift=A.length,{segmentGroup:ye,slicedSegments:[]}}if(0===T.length&&function Rn(D,A,T){return T.some(k=>Qr(D,A,k))}(D,T,k)){const ye=new le(D.segments,function Ne(D,A,T,k,B,Y){const ye={};for(const Me of k)if(Qr(D,T,Me)&&!B[fi(Me)]){const bt=new le([],{});bt._sourceSegment=D,bt._segmentIndexShift="legacy"===Y?D.segments.length:A.length,ye[fi(Me)]=bt}return{...B,...ye}}(D,A,T,k,D.children,B));return ye._sourceSegment=D,ye._segmentIndexShift=A.length,{segmentGroup:ye,slicedSegments:T}}const Y=new le(D.segments,D.children);return Y._sourceSegment=D,Y._segmentIndexShift=A.length,{segmentGroup:Y,slicedSegments:T}}function Qr(D,A,T){return(!(D.hasChildren()||A.length>0)||"full"!==T.pathMatch)&&""===T.path}function Ur(D,A,T,k){return!!(fi(D)===k||k!==dn&&Qr(A,T,D))&&("**"===D.path||U(A,D,T).matched)}function Wr(D,A,T){return 0===A.length&&!D.children[T]}const Pr=!1;class pi{constructor(A){this.segmentGroup=A||null}}class Hr{constructor(A){this.urlTree=A}}function si(D){return Be(new pi(D))}function uo(D){return Be(new Hr(D))}class Ri{constructor(A,T,k,B,Y){this.injector=A,this.configLoader=T,this.urlSerializer=k,this.urlTree=B,this.config=Y,this.allowRedirects=!0}apply(){const A=Q(this.urlTree.root,[],[],this.config).segmentGroup,T=new le(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,T,dn).pipe((0,Ke.U)(Y=>this.createUrlTree(Ee(Y),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zn(Y=>{if(Y instanceof Hr)return this.allowRedirects=!1,this.match(Y.urlTree);throw Y instanceof pi?this.noMatchError(Y):Y}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,dn).pipe((0,Ke.U)(B=>this.createUrlTree(Ee(B),A.queryParams,A.fragment))).pipe(zn(B=>{throw B instanceof pi?this.noMatchError(B):B}))}noMatchError(A){return new C.vHH(4002,Pr)}createUrlTree(A,T,k){const B=te(A);return new Te(B,T,k)}expandSegmentGroup(A,T,k,B){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(A,T,k).pipe((0,Ke.U)(Y=>new le([],Y))):this.expandSegment(A,k,T,k.segments,B,!0)}expandChildren(A,T,k){const B=[];for(const Y of Object.keys(k.children))"primary"===Y?B.unshift(Y):B.push(Y);return(0,h.D)(B).pipe((0,Et.b)(Y=>{const ye=k.children[Y],Me=Mi(T,Y);return this.expandSegmentGroup(A,Me,ye,Y).pipe((0,Ke.U)(bt=>({segment:bt,outlet:Y})))}),(0,Nn.R)((Y,ye)=>(Y[ye.outlet]=ye.segment,Y),{}),ir())}expandSegment(A,T,k,B,Y,ye){return(0,h.D)(k).pipe((0,Et.b)(Me=>this.expandSegmentAgainstRoute(A,T,k,Me,B,Y,ye).pipe(zn(tn=>{if(tn instanceof pi)return(0,Z.of)(null);throw tn}))),(0,xn.P)(Me=>!!Me),zn((Me,bt)=>{if(ko(Me))return Wr(T,B,Y)?(0,Z.of)(new le([],{})):si(T);throw Me}))}expandSegmentAgainstRoute(A,T,k,B,Y,ye,Me){return Ur(B,T,Y,ye)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(A,T,B,Y,ye):Me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,T,k,B,Y,ye):si(T):si(T)}expandSegmentAgainstRouteUsingRedirect(A,T,k,B,Y,ye){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,k,B,ye):this.expandRegularSegmentAgainstRouteUsingRedirect(A,T,k,B,Y,ye)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,T,k,B){const Y=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?uo(Y):this.lineralizeSegments(k,Y).pipe((0,gn.z)(ye=>{const Me=new le(ye,{});return this.expandSegment(A,Me,T,ye,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,T,k,B,Y,ye){const{matched:Me,consumedSegments:bt,remainingSegments:tn,positionalParamSegments:cr}=U(T,B,Y);if(!Me)return si(T);const _n=this.applyRedirectCommands(bt,B.redirectTo,cr);return B.redirectTo.startsWith("/")?uo(_n):this.lineralizeSegments(B,_n).pipe((0,gn.z)(kr=>this.expandSegment(A,T,k,kr.concat(tn),ye,!1)))}matchSegmentAgainstRoute(A,T,k,B,Y){return"**"===k.path?(A=Ln(k,A),k.loadChildren?(k._loadedRoutes?(0,Z.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):this.configLoader.loadChildren(A,k)).pipe((0,Ke.U)(Me=>(k._loadedRoutes=Me.routes,k._loadedInjector=Me.injector,new le(B,{})))):(0,Z.of)(new le(B,{}))):z(T,k,B,A).pipe((0,Ye.w)(({matched:ye,consumedSegments:Me,remainingSegments:bt})=>ye?this.getChildConfig(A=k._injector??A,k,B).pipe((0,gn.z)(cr=>{const _n=cr.injector??A,kr=cr.routes,{segmentGroup:Xi,slicedSegments:es}=Q(T,Me,bt,kr),Ms=new le(Xi.segments,Xi.children);if(0===es.length&&Ms.hasChildren())return this.expandChildren(_n,kr,Ms).pipe((0,Ke.U)(Yo=>new le(Me,Yo)));if(0===kr.length&&0===es.length)return(0,Z.of)(new le(Me,{}));const js=fi(k)===Y;return this.expandSegment(_n,Ms,kr,es,js?dn:Y,!0).pipe((0,Ke.U)(Oa=>new le(Me.concat(Oa.segments),Oa.children)))})):si(T)))}getChildConfig(A,T,k){return T.children?(0,Z.of)({routes:T.children,injector:A}):T.loadChildren?void 0!==T._loadedRoutes?(0,Z.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function vo(D,A,T,k){const B=A.canLoad;if(void 0===B||0===B.length)return(0,Z.of)(!0);const Y=B.map(ye=>{const Me=Fs(ye,D);return Ie(function fu(D){return D&&Wo(D.canLoad)}(Me)?Me.canLoad(A,T):D.runInContext(()=>Me(A,T)))});return(0,Z.of)(Y).pipe(Ts(),zo())}(A,T,k).pipe((0,gn.z)(B=>B?this.configLoader.loadChildren(A,T).pipe((0,nn.b)(Y=>{T._loadedRoutes=Y.routes,T._loadedInjector=Y.injector})):function zr(D){return Be(Gr(Pr,3))}())):(0,Z.of)({routes:[],injector:A})}lineralizeSegments(A,T){let k=[],B=T.root;for(;;){if(k=k.concat(B.segments),0===B.numberOfChildren)return(0,Z.of)(k);if(B.numberOfChildren>1||!B.children[dn])return Be(new C.vHH(4e3,Pr));B=B.children[dn]}}applyRedirectCommands(A,T,k){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),A,k)}applyRedirectCreateUrlTree(A,T,k,B){const Y=this.createSegmentGroup(A,T.root,k,B);return new Te(Y,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(A,T){const k={};return dt(A,(B,Y)=>{if("string"==typeof B&&B.startsWith(":")){const Me=B.substring(1);k[Y]=T[Me]}else k[Y]=B}),k}createSegmentGroup(A,T,k,B){const Y=this.createSegments(A,T.segments,k,B);let ye={};return dt(T.children,(Me,bt)=>{ye[bt]=this.createSegmentGroup(A,Me,k,B)}),new le(Y,ye)}createSegments(A,T,k,B){return T.map(Y=>Y.path.startsWith(":")?this.findPosParam(A,Y,B):this.findOrReturn(Y,k))}findPosParam(A,T,k){const B=k[T.path.substring(1)];if(!B)throw new C.vHH(4001,Pr);return B}findOrReturn(A,T){let k=0;for(const B of T){if(B.path===A.path)return T.splice(k),B;k++}return A}}class Qt{}class pu{constructor(A,T,k,B,Y,ye,Me,bt){this.injector=A,this.rootComponentType=T,this.config=k,this.urlTree=B,this.url=Y,this.paramsInheritanceStrategy=ye,this.relativeLinkResolution=Me,this.urlSerializer=bt}recognize(){const A=Q(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,dn).pipe((0,Ke.U)(T=>{if(null===T)return null;const k=new qi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,this.urlTree.root,-1,{}),B=new Xr(k,T),Y=new _o(this.url,B);return this.inheritParamsAndData(Y._root),Y}))}inheritParamsAndData(A){const T=A.value,k=Os(T,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data),A.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(A,T,k,B){return 0===k.segments.length&&k.hasChildren()?this.processChildren(A,T,k):this.processSegment(A,T,k,k.segments,B)}processChildren(A,T,k){return(0,h.D)(Object.keys(k.children)).pipe((0,Et.b)(B=>{const Y=k.children[B],ye=Mi(T,B);return this.processSegmentGroup(A,ye,Y,B)}),(0,Nn.R)((B,Y)=>B&&Y?(B.push(...Y),B):null),function dr(D,A=!1){return(0,se.e)((T,k)=>{let B=0;T.subscribe((0,st.x)(k,Y=>{const ye=D(Y,B++);(ye||A)&&k.next(Y),!ye&&k.complete()}))})}(B=>null!==B),(0,mn.d)(null),ir(),(0,Ke.U)(B=>{if(null===B)return null;const Y=hn(B);return function Sn(D){D.sort((A,T)=>A.value.outlet===dn?-1:T.value.outlet===dn?1:A.value.outlet.localeCompare(T.value.outlet))}(Y),Y}))}processSegment(A,T,k,B,Y){return(0,h.D)(T).pipe((0,Et.b)(ye=>this.processSegmentAgainstRoute(ye._injector??A,ye,k,B,Y)),(0,xn.P)(ye=>!!ye),zn(ye=>{if(ko(ye))return Wr(k,B,Y)?(0,Z.of)([]):(0,Z.of)(null);throw ye}))}processSegmentAgainstRoute(A,T,k,B,Y){if(T.redirectTo||!Ur(T,k,B,Y))return(0,Z.of)(null);let ye;if("**"===T.path){const Me=B.length>0?ri(B).parameters:{},bt=ji(k)+B.length,tn=new qi(B,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tl(T),fi(T),T.component??T._loadedComponent??null,T,Jt(k),bt,ca(T),bt);ye=(0,Z.of)({snapshot:tn,consumedSegments:[],remainingSegments:[]})}else ye=z(k,T,B,A).pipe((0,Ke.U)(({matched:Me,consumedSegments:bt,remainingSegments:tn,parameters:cr})=>{if(!Me)return null;const _n=ji(k)+bt.length;return{snapshot:new qi(bt,cr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tl(T),fi(T),T.component??T._loadedComponent??null,T,Jt(k),_n,ca(T),_n),consumedSegments:bt,remainingSegments:tn}}));return ye.pipe((0,Ye.w)(Me=>{if(null===Me)return(0,Z.of)(null);const{snapshot:bt,consumedSegments:tn,remainingSegments:cr}=Me;A=T._injector??A;const _n=T._loadedInjector??A,kr=function ar(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(T),{segmentGroup:Xi,slicedSegments:es}=Q(k,tn,cr,kr.filter(js=>void 0===js.redirectTo),this.relativeLinkResolution);if(0===es.length&&Xi.hasChildren())return this.processChildren(_n,kr,Xi).pipe((0,Ke.U)(js=>null===js?null:[new Xr(bt,js)]));if(0===kr.length&&0===es.length)return(0,Z.of)([new Xr(bt,[])]);const Ms=fi(T)===Y;return this.processSegment(_n,kr,Xi,es,Ms?dn:Y).pipe((0,Ke.U)(js=>null===js?null:[new Xr(bt,js)]))}))}}function bl(D){const A=D.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function hn(D){const A=[],T=new Set;for(const k of D){if(!bl(k)){A.push(k);continue}const B=A.find(Y=>k.value.routeConfig===Y.value.routeConfig);void 0!==B?(B.children.push(...k.children),T.add(B)):A.push(k)}for(const k of T){const B=hn(k.children);A.push(new Xr(k.value,B))}return A.filter(k=>!T.has(k))}function Jt(D){let A=D;for(;A._sourceSegment;)A=A._sourceSegment;return A}function ji(D){let A=D,T=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,T+=A._segmentIndexShift??0;return T-1}function Tl(D){return D.data||{}}function ca(D){return D.resolve||{}}function Er(D){return"string"==typeof D.title||null===D.title}function xa(D){return(0,Ye.w)(A=>{const T=D(A);return T?(0,h.D)(T).pipe((0,Ke.U)(()=>A)):(0,Z.of)(A)})}let Vn=(()=>{class D{buildTitle(T){let k,B=T.root;for(;void 0!==B;)k=this.getResolvedTitleForRoute(B)??k,B=B.children.find(Y=>Y.outlet===dn);return k}getResolvedTitleForRoute(T){return T.data[Xn]}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(wo)},providedIn:"root"}),D})(),wo=(()=>{class D extends Vn{constructor(T){super(),this.title=T}updateTitle(T){const k=this.buildTitle(T);void 0!==k&&this.title.setTitle(k)}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(Mr.Dx))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class li{}class Ys extends class sr{shouldDetach(A){return!1}store(A,T){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,T){return A.routeConfig===T.routeConfig}}{}const da=new C.OlP("",{providedIn:"root",factory:()=>({})}),on=new C.OlP("ROUTES");let Co=(()=>{class D{constructor(T,k){this.injector=T,this.compiler=k,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,Z.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const k=Ie(T.loadComponent()).pipe((0,nn.b)(Y=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=Y}),ur(()=>{this.componentLoaders.delete(T)})),B=new Pe(k,()=>new P.x).pipe(ze());return this.componentLoaders.set(T,B),B}loadChildren(T,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,Z.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const Y=this.loadModuleFactoryOrRoutes(k.loadChildren).pipe((0,Ke.U)(Me=>{this.onLoadEndListener&&this.onLoadEndListener(k);let bt,tn,cr=!1;Array.isArray(Me)?tn=Me:(bt=Me.create(T).injector,tn=fr(bt.get(on,[],C.XFs.Self|C.XFs.Optional)));return{routes:tn.map(yo),injector:bt}}),ur(()=>{this.childrenLoaders.delete(k)})),ye=new Pe(Y,()=>new P.x).pipe(ze());return this.childrenLoaders.set(k,ye),ye}loadModuleFactoryOrRoutes(T){return Ie(T()).pipe((0,gn.z)(k=>k instanceof C.YKP||Array.isArray(k)?(0,Z.of)(k):(0,h.D)(this.compiler.compileModuleAsync(k))))}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(C.zs3),C.LFG(C.Sil))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class Wa{}class ha{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,T){return A}}function Ko(D){throw D}function fc(D,A,T){return A.parse("/")}const fa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},za={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Bs(){const D=(0,C.f3M)(Dt),A=(0,C.f3M)(lt),T=(0,C.f3M)(Ue.Ye),k=(0,C.f3M)(C.zs3),B=(0,C.f3M)(C.Sil),Y=(0,C.f3M)(on,{optional:!0})??[],ye=(0,C.f3M)(da,{optional:!0})??{},Me=(0,C.f3M)(wo),bt=(0,C.f3M)(Vn,{optional:!0}),tn=(0,C.f3M)(Wa,{optional:!0}),cr=(0,C.f3M)(li,{optional:!0}),_n=new Ji(null,D,A,T,k,B,fr(Y));return tn&&(_n.urlHandlingStrategy=tn),cr&&(_n.routeReuseStrategy=cr),_n.titleStrategy=bt??Me,function pa(D,A){D.errorHandler&&(A.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(A.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(A.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(A.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(A.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(A.canceledNavigationResolution=D.canceledNavigationResolution)}(ye,_n),_n}let Ji=(()=>{class D{constructor(T,k,B,Y,ye,Me,bt){this.rootComponentType=T,this.urlSerializer=k,this.rootContexts=B,this.location=Y,this.config=bt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new P.x,this.errorHandler=Ko,this.malformedUriErrorHandler=fc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Z.of)(void 0),this.urlHandlingStrategy=new ha,this.routeReuseStrategy=new Ys,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ye.get(Co),this.configLoader.onLoadEndListener=kr=>this.triggerEvent(new $a(kr)),this.configLoader.onLoadStartListener=kr=>this.triggerEvent(new Po(kr)),this.ngModule=ye.get(C.h0i),this.console=ye.get(C.c2e);const _n=ye.get(C.R0b);this.isNgZoneEnabled=_n instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(bt),this.currentUrlTree=function mt(){return new Te(new le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ni(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(T){const k=this.events;return T.pipe((0,Bt.h)(B=>0!==B.id),(0,Ke.U)(B=>({...B,extractedUrl:this.urlHandlingStrategy.extract(B.rawUrl)})),(0,Ye.w)(B=>{let Y=!1,ye=!1;return(0,Z.of)(B).pipe((0,nn.b)(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.rawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ye.w)(Me=>{const bt=this.browserUrlTree.toString(),tn=!this.navigated||Me.extractedUrl.toString()!==bt||bt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||tn)&&this.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return Nu(Me.source)&&(this.browserUrlTree=Me.extractedUrl),(0,Z.of)(Me).pipe((0,Ye.w)(_n=>{const kr=this.transitions.getValue();return k.next(new ys(_n.id,this.serializeUrl(_n.extractedUrl),_n.source,_n.restoredState)),kr!==this.transitions.getValue()?ut.E:Promise.resolve(_n)}),function as(D,A,T,k){return(0,Ye.w)(B=>function os(D,A,T,k,B){return new Ri(D,A,T,k,B).apply()}(D,A,T,B.extractedUrl,k).pipe((0,Ke.U)(Y=>({...B,urlAfterRedirects:Y}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,nn.b)(_n=>{this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects},B.urlAfterRedirects=_n.urlAfterRedirects}),function Zl(D,A,T,k,B,Y){return(0,gn.z)(ye=>function Es(D,A,T,k,B,Y,ye="emptyOnly",Me="legacy"){return new pu(D,A,T,k,B,ye,Me,Y).recognize().pipe((0,Ye.w)(bt=>null===bt?function yi(D){return new qe.y(A=>A.error(D))}(new Qt):(0,Z.of)(bt)))}(D,A,T,ye.urlAfterRedirects,k.serialize(ye.urlAfterRedirects),k,B,Y).pipe((0,Ke.U)(Me=>({...ye,targetSnapshot:Me}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,nn.b)(_n=>{if(B.targetSnapshot=_n.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!_n.extras.skipLocationChange){const Xi=this.urlHandlingStrategy.merge(_n.urlAfterRedirects,_n.rawUrl);this.setBrowserUrl(Xi,_n)}this.browserUrlTree=_n.urlAfterRedirects}const kr=new Ns(_n.id,this.serializeUrl(_n.extractedUrl),this.serializeUrl(_n.urlAfterRedirects),_n.targetSnapshot);k.next(kr)}));if(tn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:kr,extractedUrl:Xi,source:es,restoredState:Ms,extras:js}=Me,Ya=new ys(kr,this.serializeUrl(Xi),es,Ms);k.next(Ya);const Oa=Ni(Xi,this.rootComponentType).snapshot;return B={...Me,targetSnapshot:Oa,urlAfterRedirects:Xi,extras:{...js,skipLocationChange:!1,replaceUrl:!1}},(0,Z.of)(B)}return this.rawUrlTree=Me.rawUrl,Me.resolve(null),ut.E}),(0,nn.b)(Me=>{const bt=new Yi(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(bt)}),(0,Ke.U)(Me=>B={...Me,guards:Oo(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)}),function Yu(D,A){return(0,gn.z)(T=>{const{targetSnapshot:k,currentSnapshot:B,guards:{canActivateChecks:Y,canDeactivateChecks:ye}}=T;return 0===ye.length&&0===Y.length?(0,Z.of)({...T,guardsResult:!0}):function Da(D,A,T,k){return(0,h.D)(D).pipe((0,gn.z)(B=>function Fo(D,A,T,k,B){const Y=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!Y||0===Y.length)return(0,Z.of)(!0);const ye=Y.map(Me=>{const bt=Ui(A)??B,tn=Fs(Me,bt);return Ie(function Ls(D){return D&&Wo(D.canDeactivate)}(tn)?tn.canDeactivate(D,A,T,k):bt.runInContext(()=>tn(D,A,T,k))).pipe((0,xn.P)())});return(0,Z.of)(ye).pipe(Ts())}(B.component,B.route,T,A,k)),(0,xn.P)(B=>!0!==B,!0))}(ye,k,B,D).pipe((0,gn.z)(Me=>Me&&function sa(D){return"boolean"==typeof D}(Me)?function ua(D,A,T,k){return(0,h.D)(A).pipe((0,Et.b)(B=>(0,it.z)(function Ha(D,A){return null!==D&&A&&A(new Ho(D)),(0,Z.of)(!0)}(B.route.parent,k),function Aa(D,A){return null!==D&&A&&A(new io(D)),(0,Z.of)(!0)}(B.route,k),function Ds(D,A,T){const k=A[A.length-1],Y=A.slice(0,A.length-1).reverse().map(ye=>function Vi(D){const A=D.routeConfig?D.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:D,guards:A}:null}(ye)).filter(ye=>null!==ye).map(ye=>qt(()=>{const Me=ye.guards.map(bt=>{const tn=Ui(ye.node)??T,cr=Fs(bt,tn);return Ie(function Bi(D){return D&&Wo(D.canActivateChild)}(cr)?cr.canActivateChild(k,D):tn.runInContext(()=>cr(k,D))).pipe((0,xn.P)())});return(0,Z.of)(Me).pipe(Ts())}));return(0,Z.of)(Y).pipe(Ts())}(D,B.path,T),function la(D,A,T){const k=A.routeConfig?A.routeConfig.canActivate:null;if(!k||0===k.length)return(0,Z.of)(!0);const B=k.map(Y=>qt(()=>{const ye=Ui(A)??T,Me=Fs(Y,ye);return Ie(function ss(D){return D&&Wo(D.canActivate)}(Me)?Me.canActivate(A,D):ye.runInContext(()=>Me(A,D))).pipe((0,xn.P)())}));return(0,Z.of)(B).pipe(Ts())}(D,B.route,T))),(0,xn.P)(B=>!0!==B,!0))}(k,Y,D,A):(0,Z.of)(Me)),(0,Ke.U)(Me=>({...T,guardsResult:Me})))})}(this.ngModule.injector,Me=>this.triggerEvent(Me)),(0,nn.b)(Me=>{if(B.guardsResult=Me.guardsResult,Ze(Me.guardsResult))throw Ta(0,Me.guardsResult);const bt=new Zi(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.triggerEvent(bt)}),(0,Bt.h)(Me=>!!Me.guardsResult||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,"",3),!1)),xa(Me=>{if(Me.guards.canActivateChecks.length)return(0,Z.of)(Me).pipe((0,nn.b)(bt=>{const tn=new Cs(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot);this.triggerEvent(tn)}),(0,Ye.w)(bt=>{let tn=!1;return(0,Z.of)(bt).pipe(function Zo(D,A){return(0,gn.z)(T=>{const{targetSnapshot:k,guards:{canActivateChecks:B}}=T;if(!B.length)return(0,Z.of)(T);let Y=0;return(0,h.D)(B).pipe((0,Et.b)(ye=>function Qu(D,A,T,k){const B=D.routeConfig,Y=D._resolve;return void 0!==B?.title&&!Er(B)&&(Y[Xn]=B.title),function Vs(D,A,T,k){const B=function Ga(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===B.length)return(0,Z.of)({});const Y={};return(0,h.D)(B).pipe((0,gn.z)(ye=>function gu(D,A,T,k){const B=Ui(A)??k,Y=Fs(D,B);return Ie(Y.resolve?Y.resolve(A,T):B.runInContext(()=>Y(A,T)))}(D[ye],A,T,k).pipe((0,xn.P)(),(0,nn.b)(Me=>{Y[ye]=Me}))),Kn(1),function Cr(D){return(0,Ke.U)(()=>D)}(Y),zn(ye=>ko(ye)?ut.E:Be(ye)))}(Y,D,A,k).pipe((0,Ke.U)(ye=>(D._resolvedData=ye,D.data=Os(D,T).resolve,B&&Er(B)&&(D.data[Xn]=B.title),null)))}(ye.route,k,D,A)),(0,nn.b)(()=>Y++),Kn(1),(0,gn.z)(ye=>Y===B.length?(0,Z.of)(T):ut.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,nn.b)({next:()=>tn=!0,complete:()=>{tn||(this.restoreHistory(bt),this.cancelNavigationTransition(bt,"",2))}}))}),(0,nn.b)(bt=>{const tn=new na(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot);this.triggerEvent(tn)}))}),xa(Me=>{const bt=tn=>{const cr=[];tn.routeConfig?.loadComponent&&!tn.routeConfig._loadedComponent&&cr.push(this.configLoader.loadComponent(tn.routeConfig).pipe((0,nn.b)(_n=>{tn.component=_n}),(0,Ke.U)(()=>{})));for(const _n of tn.children)cr.push(...bt(_n));return cr};return nt(bt(Me.targetSnapshot.root)).pipe((0,mn.d)(),(0,Mt.q)(1))}),xa(()=>this.afterPreactivation()),(0,Ke.U)(Me=>{const bt=function xi(D,A,T){const k=is(D,A._root,T?T._root:void 0);return new Li(k,A)}(this.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return B={...Me,targetRouterState:bt}}),(0,nn.b)(Me=>{this.currentUrlTree=Me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Me.urlAfterRedirects,Me.rawUrl),this.routerState=Me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Me),this.browserUrlTree=Me.urlAfterRedirects)}),((D,A,T)=>(0,Ke.U)(k=>(new Vt(A,k.targetRouterState,k.currentRouterState,T).activate(D),k)))(this.rootContexts,this.routeReuseStrategy,Me=>this.triggerEvent(Me)),(0,nn.b)({next(){Y=!0},complete(){Y=!0}}),ur(()=>{Y||ye||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),zn(Me=>{if(ye=!0,me(Me)){De(Me)||(this.navigated=!0,this.restoreHistory(B,!0));const bt=new Hi(B.id,this.serializeUrl(B.extractedUrl),Me.message,Me.cancellationCode);if(k.next(bt),De(Me)){const tn=this.urlHandlingStrategy.merge(Me.url,this.rawUrlTree),cr={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nu(B.source)};this.scheduleNavigation(tn,"imperative",null,cr,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{this.restoreHistory(B,!0);const bt=new ki(B.id,this.serializeUrl(B.extractedUrl),Me,B.targetSnapshot??void 0);k.next(bt);try{B.resolve(this.errorHandler(Me))}catch(tn){B.reject(tn)}}return ut.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next({...this.transitions.value,...T})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const k="popstate"===T.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{const B={replaceUrl:!0},Y=T.state?.navigationId?T.state:null;if(Y){const Me={...Y};delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(B.state=Me)}const ye=this.parseUrl(T.url);this.scheduleNavigation(ye,k,Y,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){this.config=T.map(yo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,k={}){const{relativeTo:B,queryParams:Y,fragment:ye,queryParamsHandling:Me,preserveFragment:bt}=k,tn=B||this.routerState.root,cr=bt?this.currentUrlTree.fragment:ye;let _n=null;switch(Me){case"merge":_n={...this.currentUrlTree.queryParams,...Y};break;case"preserve":_n=this.currentUrlTree.queryParams;break;default:_n=Y||null}return null!==_n&&(_n=this.removeEmptyProps(_n)),pn(tn,this.currentUrlTree,T,_n,cr??null)}navigateByUrl(T,k={skipLocationChange:!1}){const B=Ze(T)?T:this.parseUrl(T),Y=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(Y,"imperative",null,k)}navigate(T,k={skipLocationChange:!1}){return function mu(D){for(let A=0;A<D.length;A++){if(null==D[A])throw new C.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,k),k)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let k;try{k=this.urlSerializer.parse(T)}catch(B){k=this.malformedUriErrorHandler(B,this.urlSerializer,T)}return k}isActive(T,k){let B;if(B=!0===k?{...fa}:!1===k?{...za}:k,Ze(T))return Dn(this.currentUrlTree,T,B);const Y=this.parseUrl(T);return Dn(this.currentUrlTree,Y,B)}removeEmptyProps(T){return Object.keys(T).reduce((k,B)=>{const Y=T[B];return null!=Y&&(k[B]=Y),k},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new Di(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,k,B,Y,ye){if(this.disposed)return Promise.resolve(!1);let Me,bt,tn;ye?(Me=ye.resolve,bt=ye.reject,tn=ye.promise):tn=new Promise((kr,Xi)=>{Me=kr,bt=Xi});const cr=++this.navigationId;let _n;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(B=this.location.getState()),_n=B&&B.\u0275routerPageId?B.\u0275routerPageId:Y.replaceUrl||Y.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):_n=0,this.setTransition({id:cr,targetPageId:_n,source:k,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:Y,resolve:Me,reject:bt,promise:tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tn.catch(kr=>Promise.reject(kr))}setBrowserUrl(T,k){const B=this.urlSerializer.serialize(T),Y={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.isCurrentPathEqualTo(B)||k.extras.replaceUrl?this.location.replaceState(B,"",Y):this.location.go(B,"",Y)}restoreHistory(T,k=!1){if("computed"===this.canceledNavigationResolution){const B=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===B?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===B&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(B)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,k,B){const Y=new Hi(T.id,this.serializeUrl(T.extractedUrl),k,B);this.triggerEvent(Y),T.resolve(!1)}generateNgRouterState(T,k){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:k}:{navigationId:T}}}return D.\u0275fac=function(T){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:function(){return Bs()},providedIn:"root"}),D})();function Nu(D){return"imperative"!==D}let Io=(()=>{class D{constructor(T,k,B,Y,ye){this.router=T,this.route=k,this.tabIndexAttribute=B,this.renderer=Y,this.el=ye,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new P.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(T){this._preserveFragment=(0,C.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,C.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,C.D6c)(T)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const k=this.renderer,B=this.el.nativeElement;null!==T?k.setAttribute(B,"tabindex",T):k.removeAttribute(B,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(Ji),C.Y36(Nr),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq))},D.\u0275dir=C.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,k){1&T&&C.NdJ("click",function(){return k.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[C.TTD]}),D})(),Ra=(()=>{class D{constructor(T,k,B){this.router=T,this.route=k,this.locationStrategy=B,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new P.x,this.subscription=T.events.subscribe(Y=>{Y instanceof Di&&this.updateTargetUrlAndHref()})}set preserveFragment(T){this._preserveFragment=(0,C.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,C.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,C.D6c)(T)}get replaceUrl(){return this._replaceUrl}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,k,B,Y,ye){return!!(0!==T||k||B||Y||ye||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(Ji),C.Y36(Nr),C.Y36(Ue.S$))},D.\u0275dir=C.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,k){1&T&&C.NdJ("click",function(Y){return k.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&T&&C.uIk("target",k.target)("href",k.href,C.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[C.TTD]}),D})();class fs{}let Qs=(()=>{class D{constructor(T,k,B,Y,ye){this.router=T,this.injector=B,this.preloadingStrategy=Y,this.loader=ye}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(T=>T instanceof Di),(0,Et.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,k){const B=[];for(const Y of k){Y.providers&&!Y._injector&&(Y._injector=(0,C.MMx)(Y.providers,T,`Route: ${Y.path}`));const ye=Y._injector??T,Me=Y._loadedInjector??ye;Y.loadChildren&&!Y._loadedRoutes&&void 0===Y.canLoad||Y.loadComponent&&!Y._loadedComponent?B.push(this.preloadConfig(ye,Y)):(Y.children||Y._loadedRoutes)&&B.push(this.processRoutes(Me,Y.children??Y._loadedRoutes))}return(0,h.D)(B).pipe((0,lr.J)())}preloadConfig(T,k){return this.preloadingStrategy.preload(k,()=>{let B;B=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(T,k):(0,Z.of)(null);const Y=B.pipe((0,gn.z)(ye=>null===ye?(0,Z.of)(void 0):(k._loadedRoutes=ye.routes,k._loadedInjector=ye.injector,this.processRoutes(ye.injector??T,ye.routes))));if(k.loadComponent&&!k._loadedComponent){const ye=this.loader.loadComponent(k);return(0,h.D)([Y,ye]).pipe((0,lr.J)())}return Y})}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(Ji),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(fs),C.LFG(Co))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Ou=new C.OlP("");let ma=(()=>{class D{constructor(T,k,B={}){this.router=T,this.viewportScroller=k,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Di&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof so&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,k){this.router.triggerEvent(new so(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(T){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();function Pa(D,A){return{\u0275kind:D,\u0275providers:A}}function As(D){return[{provide:on,multi:!0,useValue:D}]}function qa(){const D=(0,C.f3M)(C.zs3);return A=>{const T=D.get(C.z2F);if(A!==T.components[0])return;const k=D.get(Ji),B=D.get(Kl);1===D.get(ai)&&k.initialNavigation(),D.get(Na,null,C.XFs.Optional)?.setUpPreloading(),D.get(Ou,null,C.XFs.Optional)?.init(),k.resetRootComponentType(T.componentTypes[0]),B.next(),B.complete()}}const Kl=new C.OlP("",{factory:()=>new P.x}),ai=new C.OlP("",{providedIn:"root",factory:()=>1});const Na=new C.OlP("");function ws(D){return Pa(0,[{provide:Na,useExisting:Qs},{provide:fs,useExisting:D}])}const lo=new C.OlP("ROUTER_FORROOT_GUARD"),Xs=[Ue.Ye,{provide:Dt,useClass:Yt},{provide:Ji,useFactory:Bs},lt,{provide:Nr,useFactory:function Ju(D){return D.routerState.root},deps:[Ji]},Co];function gi(){return new C.PXZ("Router",Ji)}let co=(()=>{class D{constructor(T){}static forRoot(T,k){return{ngModule:D,providers:[Xs,[],As(T),{provide:lo,useFactory:_u,deps:[[Ji,new C.FiY,new C.tp0]]},{provide:da,useValue:k||{}},k?.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:Ou,useFactory:()=>{const D=(0,C.f3M)(Ji),A=(0,C.f3M)(Ue.EM),T=(0,C.f3M)(da);return T.scrollOffset&&A.setOffset(T.scrollOffset),new ma(D,A,T)}},k?.preloadingStrategy?ws(k.preloadingStrategy).\u0275providers:[],{provide:C.PXZ,multi:!0,useFactory:gi},k?.initialNavigation?xs(k):[],[{provide:ho,useFactory:qa},{provide:C.tb,multi:!0,useExisting:ho}]]}}static forChild(T){return{ngModule:D,providers:[As(T)]}}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(lo,8))},D.\u0275mod=C.oAB({type:D}),D.\u0275inj=C.cJS({imports:[Tr]}),D})();function _u(D){return"guarded"}function xs(D){return["disabled"===D.initialNavigation?Pa(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const A=(0,C.f3M)(Ji);return()=>{A.setUpLocationChangeListener()}}},{provide:ai,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Pa(2,[{provide:ai,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:A=>{const T=A.get(Ue.V_,Promise.resolve(null));let k=!1;return()=>T.then(()=>new Promise(Y=>{const ye=A.get(Ji),Me=A.get(Kl);(function B(Y){A.get(Ji).events.pipe((0,Bt.h)(Me=>Me instanceof Di||Me instanceof Hi||Me instanceof ki),(0,Ke.U)(Me=>Me instanceof Di||Me instanceof Hi&&(0===Me.code||1===Me.code)&&null),(0,Bt.h)(Me=>null!==Me),(0,Mt.q)(1)).subscribe(()=>{Y()})})(()=>{Y(!0),k=!0}),ye.afterPreactivation=()=>(Y(!0),k||Me.closed?(0,Z.of)(void 0):Me),ye.initialNavigation()}))}}]).\u0275providers:[]]}const ho=new C.OlP("")},3942:(an,ht,j)=>{j.d(ht,{Z:()=>nt});var C=j(2090),h=j(4859),Z=j(9681),P=j(1877);class de{constructor(at,it){this._delegate=at,this.firebase=it,(0,Z._addComponent)(at,new h.wA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(at,it=Z._DEFAULT_ENTRY_NAME){var Ht;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(at);return!qt.isInitialized()&&"EXPLICIT"===(null===(Ht=qt.getComponent())||void 0===Ht?void 0:Ht.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:it})}_removeServiceInstance(at,it=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(it)}_addComponent(at){(0,Z._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,Z._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qe=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function tt(){const Ot=function be(Ot){const at={},it={__esModule:!0,initializeApp:function xe(ee,se={}){const ze=Z.initializeApp(ee,se);if((0,C.r3)(at,ze.name))return at[ze.name];const Pe=new Ot(ze,it);return at[ze.name]=Pe,Pe},app:qt,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function Be(ee){const se=ee.name,ze=se.replace("-compat","");if(Z._registerComponent(ee)&&"PUBLIC"===ee.type){const Pe=(Ue=qt())=>{if("function"!=typeof Ue[ze])throw qe.create("invalid-app-argument",{appName:se});return Ue[ze]()};void 0!==ee.serviceProps&&(0,C.ZB)(Pe,ee.serviceProps),it[ze]=Pe,Ot.prototype[ze]=function(...Ue){return this._getService.bind(this,se).apply(this,ee.multipleInstances?Ue:[])}}return"PUBLIC"===ee.type?it[ze]:null},removeApp:function Ht(ee){delete at[ee]},useAsService:function ut(ee,se){return"serverAuth"===se?null:se},modularAPIs:Z}};function qt(ee){if(!(0,C.r3)(at,ee=ee||Z._DEFAULT_ENTRY_NAME))throw qe.create("no-app",{appName:ee});return at[ee]}return it.default=it,Object.defineProperty(it,"apps",{get:function gt(){return Object.keys(at).map(ee=>at[ee])}}),qt.App=Ot,it}(de);return Ot.INTERNAL=Object.assign(Object.assign({},Ot.INTERNAL),{createFirebaseNamespace:tt,extendNamespace:function at(it){(0,C.ZB)(Ot,it)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Ot}(),fe=new P.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ot=self.firebase.SDK_VERSION;Ot&&Ot.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=ie;!function ot(Ot){(0,Z.registerVersion)("@firebase/app-compat","0.1.34",Ot)}()},9681:(an,ht,j)=>{j.r(ht),j.d(ht,{FirebaseError:()=>P.ZR,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>xn,_addComponent:()=>Nn,_addOrOverwriteComponent:()=>Kn,_apps:()=>nn,_clearComponents:()=>dr,_components:()=>zn,_getProvider:()=>mn,_registerComponent:()=>jn,_removeServiceInstance:()=>ir,deleteApp:()=>mr,getApp:()=>Xn,getApps:()=>Lr,initializeApp:()=>dn,onLog:()=>Yn,registerVersion:()=>hr,setLogLevel:()=>er});var C=j(5861),h=j(4859),Z=j(1877),P=j(2090),de=j(8766);class Le{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function qe(we){return"VERSION"===we.getComponent()?.type}(Re)){const wt=Re.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(Re=>Re).join(" ")}}const be="@firebase/app",ie=new Z.Yd("@firebase/app"),xn="[DEFAULT]",Et={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,zn=new Map;function Nn(we,Oe){try{we.container.addComponent(Oe)}catch(Re){ie.debug(`Component ${Oe.name} failed to register with FirebaseApp ${we.name}`,Re)}}function Kn(we,Oe){we.container.addOrOverwriteComponent(Oe)}function jn(we){const Oe=we.name;if(zn.has(Oe))return ie.debug(`There were multiple attempts to register component ${Oe}.`),!1;zn.set(Oe,we);for(const Re of nn.values())Nn(Re,we);return!0}function mn(we,Oe){const Re=we.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),we.container.getProvider(Oe)}function ir(we,Oe,Re=xn){mn(we,Oe).clearInstance(Re)}function dr(){zn.clear()}const ur=new P.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class lr{constructor(Oe,Re,wt){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new h.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}const Mr="9.10.0";function dn(we,Oe={}){"object"!=typeof Oe&&(Oe={name:Oe});const Re=Object.assign({name:xn,automaticDataCollectionEnabled:!1},Oe),wt=Re.name;if("string"!=typeof wt||!wt)throw ur.create("bad-app-name",{appName:String(wt)});const Dt=nn.get(wt);if(Dt){if((0,P.vZ)(we,Dt.options)&&(0,P.vZ)(Re,Dt.config))return Dt;throw ur.create("duplicate-app",{appName:wt})}const Yt=new h.H0(wt);for(const Zn of zn.values())Yt.addComponent(Zn);const Bn=new lr(we,Re,Yt);return nn.set(wt,Bn),Bn}function Xn(we=xn){const Oe=nn.get(we);if(!Oe)throw ur.create("no-app",{appName:we});return Oe}function Lr(){return Array.from(nn.values())}function mr(we){return en.apply(this,arguments)}function en(){return(en=(0,C.Z)(function*(we){const Oe=we.name;nn.has(Oe)&&(nn.delete(Oe),yield Promise.all(we.container.getProviders().map(Re=>Re.delete())),we.isDeleted=!0)})).apply(this,arguments)}function hr(we,Oe,Re){var wt;let Dt=null!==(wt=Et[we])&&void 0!==wt?wt:we;Re&&(Dt+=`-${Re}`);const Yt=Dt.match(/\s|\//),Bn=Oe.match(/\s|\//);if(Yt||Bn){const Zn=[`Unable to register library "${Dt}" with version "${Oe}":`];return Yt&&Zn.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Yt&&Bn&&Zn.push("and"),Bn&&Zn.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void ie.warn(Zn.join(" "))}jn(new h.wA(`${Dt}-version`,()=>({library:Dt,version:Oe}),"VERSION"))}function Yn(we,Oe){if(null!==we&&"function"!=typeof we)throw ur.create("invalid-log-argument");(0,Z.Am)(we,Oe)}function er(we){(0,Z.Ub)(we)}const vr="firebase-heartbeat-store";let dt=null;function Ie(){return dt||(dt=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(we,Oe)=>{0===Oe&&we.createObjectStore(vr)}}).catch(we=>{throw ur.create("idb-open",{originalErrorMessage:we.message})})),dt}function mt(){return(mt=(0,C.Z)(function*(we){var Oe;try{return(yield Ie()).transaction(vr).objectStore(vr).get(Dn(we))}catch(Re){if(Re instanceof P.ZR)ie.warn(Re.message);else{const wt=ur.create("idb-get",{originalErrorMessage:null===(Oe=Re)||void 0===Oe?void 0:Oe.message});ie.warn(wt.message)}}})).apply(this,arguments)}function ct(we,Oe){return rn.apply(this,arguments)}function rn(){return(rn=(0,C.Z)(function*(we,Oe){var Re;try{const Dt=(yield Ie()).transaction(vr,"readwrite");return yield Dt.objectStore(vr).put(Oe,Dn(we)),Dt.done}catch(wt){if(wt instanceof P.ZR)ie.warn(wt.message);else{const Dt=ur.create("idb-set",{originalErrorMessage:null===(Re=wt)||void 0===Re?void 0:Re.message});ie.warn(Dt.message)}}})).apply(this,arguments)}function Dn(we){return`${we.name}!${we.options.appId}`}class Jn{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new wn(Re),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Oe=this;return(0,C.Z)(function*(){const wt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=vn();if(null===Oe._heartbeatsCache&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!Oe._heartbeatsCache.heartbeats.some(Yt=>Yt.date===Dt))return Oe._heartbeatsCache.heartbeats.push({date:Dt,agent:wt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(Yt=>{const Bn=new Date(Yt.date).valueOf();return Date.now()-Bn<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,C.Z)(function*(){if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null===Oe._heartbeatsCache||0===Oe._heartbeatsCache.heartbeats.length)return"";const Re=vn(),{heartbeatsToSend:wt,unsentEntries:Dt}=function br(we,Oe=1024){const Re=[];let wt=we.slice();for(const Dt of we){const Yt=Re.find(Bn=>Bn.agent===Dt.agent);if(Yt){if(Yt.dates.push(Dt.date),Te(Re)>Oe){Yt.dates.pop();break}}else if(Re.push({agent:Dt.agent,dates:[Dt.date]}),Te(Re)>Oe){Re.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:Re,unsentEntries:wt}}(Oe._heartbeatsCache.heartbeats),Yt=(0,P.L)(JSON.stringify({version:2,heartbeats:wt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=Re,Dt.length>0?(Oe._heartbeatsCache.heartbeats=Dt,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),Yt})()}}function vn(){return(new Date).toISOString().substring(0,10)}class wn{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,P.hl)()&&(0,P.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,C.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function _e(we){return mt.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var Re=this;return(0,C.Z)(function*(){var wt;if(yield Re._canUseIndexedDBPromise){const Yt=yield Re.read();return ct(Re.app,{lastSentHeartbeatDate:null!==(wt=Oe.lastSentHeartbeatDate)&&void 0!==wt?wt:Yt.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var Re=this;return(0,C.Z)(function*(){var wt;if(yield Re._canUseIndexedDBPromise){const Yt=yield Re.read();return ct(Re.app,{lastSentHeartbeatDate:null!==(wt=Oe.lastSentHeartbeatDate)&&void 0!==wt?wt:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...Oe.heartbeats]})}})()}}function Te(we){return(0,P.L)(JSON.stringify({version:2,heartbeats:we})).length}!function le(we){jn(new h.wA("platform-logger",Oe=>new Le(Oe),"PRIVATE")),jn(new h.wA("heartbeat",Oe=>new Jn(Oe),"PRIVATE")),hr(be,"0.7.33",we),hr(be,"0.7.33","esm2017"),hr("fire-js","")}("")},4859:(an,ht,j)=>{j.d(ht,{H0:()=>be,wA:()=>Z});var C=j(5861),h=j(2090);class Z{constructor(ie,fe,Ce){this.name=ie,this.instanceFactory=fe,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const P="[DEFAULT]";class de{constructor(ie,fe){this.name=ie,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const fe=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(fe)){const Ce=new h.BH;if(this.instancesDeferred.set(fe,Ce),this.isInitialized(fe)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:fe});st&&Ce.resolve(st)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(ie){var fe;const Ce=this.normalizeInstanceIdentifier(ie?.identifier),st=null!==(fe=ie?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(ot){if(st)return null;throw ot}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function qe(tt){return"EAGER"===tt.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:P})}catch{}for(const[fe,Ce]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(fe);try{const ot=this.getOrInitializeService({instanceIdentifier:st});Ce.resolve(ot)}catch{}}}}clearInstance(ie=P){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,C.Z)(function*(){const fe=Array.from(ie.instances.values());yield Promise.all([...fe.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...fe.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=P){return this.instances.has(ie)}getOptions(ie=P){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:fe={}}=ie,Ce=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Ce,options:fe});for(const[ot,nt]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(ot)&&nt.resolve(st);return st}onInit(ie,fe){var Ce;const st=this.normalizeInstanceIdentifier(fe),ot=null!==(Ce=this.onInitCallbacks.get(st))&&void 0!==Ce?Ce:new Set;ot.add(ie),this.onInitCallbacks.set(st,ot);const nt=this.instances.get(st);return nt&&ie(nt,st),()=>{ot.delete(ie)}}invokeOnInitCallbacks(ie,fe){const Ce=this.onInitCallbacks.get(fe);if(Ce)for(const st of Ce)try{st(ie,fe)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:fe={}}){let Ce=this.instances.get(ie);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(tt=ie,tt===P?void 0:tt),options:fe}),this.instances.set(ie,Ce),this.instancesOptions.set(ie,fe),this.invokeOnInitCallbacks(Ce,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,Ce)}catch{}var tt;return Ce||null}normalizeInstanceIdentifier(ie=P){return this.component?this.component.multipleInstances?ie:P:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const fe=this.getProvider(ie.name);if(fe.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);fe.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const fe=new de(ie,this);return this.providers.set(ie,fe),fe}getProviders(){return Array.from(this.providers.values())}}},2833:(an,ht,j)=>{var C=j(5861),h=j(9681),Z=j(4859),P=j(2090),de=j(8766);const Le="@firebase/installations",qe="0.5.12",tt=`w:${qe}`,ie="FIS_v2",Ot=new P.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(oe){return oe instanceof P.ZR&&oe.code.includes("request-failed")}function it({projectId:oe}){return`https://firebaseinstallations.googleapis.com/v1/projects/${oe}/installations`}function Ht(oe){return{token:oe.token,requestStatus:2,expiresIn:se(oe.expiresIn),creationTime:Date.now()}}function qt(oe,Ze){return xe.apply(this,arguments)}function xe(){return(xe=(0,C.Z)(function*(oe,Ze){const Kt=(yield Ze.json()).error;return Ot.create("request-failed",{requestName:oe,serverCode:Kt.code,serverMessage:Kt.message,serverStatus:Kt.status})})).apply(this,arguments)}function gt({apiKey:oe}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":oe})}function Be(oe,{refreshToken:Ze}){const pt=gt(oe);return pt.append("Authorization",function ze(oe){return`${ie} ${oe}`}(Ze)),pt}function ut(oe){return ee.apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(oe){const Ze=yield oe();return Ze.status>=500&&Ze.status<600?oe():Ze})).apply(this,arguments)}function se(oe){return Number(oe.replace("s","000"))}function Pe(oe,Ze){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,C.Z)(function*({appConfig:oe,heartbeatServiceProvider:Ze},{fid:pt}){const Kt=it(oe),In=gt(oe),kn=Ze.getImmediate({optional:!0});if(kn){const Jr=yield kn.getHeartbeatsHeader();Jr&&In.append("x-firebase-client",Jr)}const pr={method:"POST",headers:In,body:JSON.stringify({fid:pt,authVersion:ie,appId:oe.appId,sdkVersion:tt})},qr=yield ut(()=>fetch(Kt,pr));if(qr.ok){const Jr=yield qr.json();return{fid:Jr.fid||pt,registrationStatus:2,refreshToken:Jr.refreshToken,authToken:Ht(Jr.authToken)}}throw yield qt("Create Installation",qr)})).apply(this,arguments)}function Ke(oe){return new Promise(Ze=>{setTimeout(Ze,oe)})}const Mt=/^[cdef][\w-]{21}$/;function Bt(){try{const oe=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(oe),oe[0]=112+oe[0]%16;const pt=function gn(oe){return function Ye(oe){return btoa(String.fromCharCode(...oe)).replace(/\+/g,"-").replace(/\//g,"_")}(oe).substr(0,22)}(oe);return Mt.test(pt)?pt:""}catch{return""}}function xn(oe){return`${oe.appName}!${oe.appId}`}const Et=new Map;function nn(oe,Ze){const pt=xn(oe);Kn(pt,Ze),function jn(oe,Ze){const pt=function ir(){return!mn&&"BroadcastChannel"in self&&(mn=new BroadcastChannel("[Firebase] FID Change"),mn.onmessage=oe=>{Kn(oe.data.key,oe.data.fid)}),mn}();pt&&pt.postMessage({key:oe,fid:Ze}),function dr(){0===Et.size&&mn&&(mn.close(),mn=null)}()}(pt,Ze)}function Kn(oe,Ze){const pt=Et.get(oe);if(pt)for(const Kt of pt)Kt(Ze)}let mn=null;const lr="firebase-installations-store";let Mr=null;function dn(){return Mr||(Mr=(0,de.X3)("firebase-installations-database",1,{upgrade:(oe,Ze)=>{0===Ze&&oe.createObjectStore(lr)}})),Mr}function Xn(oe,Ze){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,C.Z)(function*(oe,Ze){const pt=xn(oe),In=(yield dn()).transaction(lr,"readwrite"),kn=In.objectStore(lr),pn=yield kn.get(pt);return yield kn.put(Ze,pt),yield In.done,(!pn||pn.fid!==Ze.fid)&&nn(oe,Ze.fid),Ze})).apply(this,arguments)}function mr(oe){return en.apply(this,arguments)}function en(){return(en=(0,C.Z)(function*(oe){const Ze=xn(oe),Kt=(yield dn()).transaction(lr,"readwrite");yield Kt.objectStore(lr).delete(Ze),yield Kt.done})).apply(this,arguments)}function hr(oe,Ze){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,C.Z)(function*(oe,Ze){const pt=xn(oe),In=(yield dn()).transaction(lr,"readwrite"),kn=In.objectStore(lr),pn=yield kn.get(pt),pr=Ze(pn);return void 0===pr?yield kn.delete(pt):yield kn.put(pr,pt),yield In.done,pr&&(!pn||pn.fid!==pr.fid)&&nn(oe,pr.fid),pr})).apply(this,arguments)}function er(oe){return fr.apply(this,arguments)}function fr(){return(fr=(0,C.Z)(function*(oe){let Ze;const pt=yield hr(oe.appConfig,Kt=>{const In=ri(Kt),kn=vr(oe,In);return Ze=kn.registrationPromise,kn.installationEntry});return""===pt.fid?{installationEntry:yield Ze}:{installationEntry:pt,registrationPromise:Ze}})).apply(this,arguments)}function ri(oe){return rn(oe||{fid:Bt(),registrationStatus:0})}function vr(oe,Ze){if(0===Ze.registrationStatus){if(!navigator.onLine)return{installationEntry:Ze,registrationPromise:Promise.reject(Ot.create("app-offline"))};const pt={fid:Ze.fid,registrationStatus:1,registrationTime:Date.now()},Kt=function dt(oe,Ze){return Ie.apply(this,arguments)}(oe,pt);return{installationEntry:pt,registrationPromise:Kt}}return 1===Ze.registrationStatus?{installationEntry:Ze,registrationPromise:_e(oe)}:{installationEntry:Ze}}function Ie(){return(Ie=(0,C.Z)(function*(oe,Ze){try{const pt=yield Pe(oe,Ze);return Xn(oe.appConfig,pt)}catch(pt){throw at(pt)&&409===pt.customData.serverCode?yield mr(oe.appConfig):yield Xn(oe.appConfig,{fid:Ze.fid,registrationStatus:0}),pt}})).apply(this,arguments)}function _e(oe){return mt.apply(this,arguments)}function mt(){return(mt=(0,C.Z)(function*(oe){let Ze=yield ct(oe.appConfig);for(;1===Ze.registrationStatus;)yield Ke(100),Ze=yield ct(oe.appConfig);if(0===Ze.registrationStatus){const{installationEntry:pt,registrationPromise:Kt}=yield er(oe);return Kt||pt}return Ze})).apply(this,arguments)}function ct(oe){return hr(oe,Ze=>{if(!Ze)throw Ot.create("installation-not-found");return rn(Ze)})}function rn(oe){return function Dn(oe){return 1===oe.registrationStatus&&oe.registrationTime+1e4<Date.now()}(oe)?{fid:oe.fid,registrationStatus:0}:oe}function Qn(oe,Ze){return zt.apply(this,arguments)}function zt(){return(zt=(0,C.Z)(function*({appConfig:oe,heartbeatServiceProvider:Ze},pt){const Kt=Jn(oe,pt),In=Be(oe,pt),kn=Ze.getImmediate({optional:!0});if(kn){const Jr=yield kn.getHeartbeatsHeader();Jr&&In.append("x-firebase-client",Jr)}const pr={method:"POST",headers:In,body:JSON.stringify({installation:{sdkVersion:tt,appId:oe.appId}})},qr=yield ut(()=>fetch(Kt,pr));if(qr.ok)return Ht(yield qr.json());throw yield qt("Generate Auth Token",qr)})).apply(this,arguments)}function Jn(oe,{fid:Ze}){return`${it(oe)}/${Ze}/authTokens:generate`}function vn(oe){return br.apply(this,arguments)}function br(){return(br=(0,C.Z)(function*(oe,Ze=!1){let pt;const Kt=yield hr(oe.appConfig,kn=>{if(!Re(kn))throw Ot.create("not-registered");const pn=kn.authToken;if(!Ze&&wt(pn))return kn;if(1===pn.requestStatus)return pt=wn(oe,Ze),kn;{if(!navigator.onLine)throw Ot.create("app-offline");const pr=Yt(kn);return pt=we(oe,pr),pr}});return pt?yield pt:Kt.authToken})).apply(this,arguments)}function wn(oe,Ze){return Te.apply(this,arguments)}function Te(){return(Te=(0,C.Z)(function*(oe,Ze){let pt=yield le(oe.appConfig);for(;1===pt.authToken.requestStatus;)yield Ke(100),pt=yield le(oe.appConfig);const Kt=pt.authToken;return 0===Kt.requestStatus?vn(oe,Ze):Kt})).apply(this,arguments)}function le(oe){return hr(oe,Ze=>{if(!Re(Ze))throw Ot.create("not-registered");return function Bn(oe){return 1===oe.requestStatus&&oe.requestTime+1e4<Date.now()}(Ze.authToken)?Object.assign(Object.assign({},Ze),{authToken:{requestStatus:0}}):Ze})}function we(oe,Ze){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,C.Z)(function*(oe,Ze){try{const pt=yield Qn(oe,Ze),Kt=Object.assign(Object.assign({},Ze),{authToken:pt});return yield Xn(oe.appConfig,Kt),pt}catch(pt){if(!at(pt)||401!==pt.customData.serverCode&&404!==pt.customData.serverCode){const Kt=Object.assign(Object.assign({},Ze),{authToken:{requestStatus:0}});yield Xn(oe.appConfig,Kt)}else yield mr(oe.appConfig);throw pt}})).apply(this,arguments)}function Re(oe){return void 0!==oe&&2===oe.registrationStatus}function wt(oe){return 2===oe.requestStatus&&!function Dt(oe){const Ze=Date.now();return Ze<oe.creationTime||oe.creationTime+oe.expiresIn<Ze+36e5}(oe)}function Yt(oe){const Ze={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},oe),{authToken:Ze})}function Ir(){return(Ir=(0,C.Z)(function*(oe){const Ze=oe,{installationEntry:pt,registrationPromise:Kt}=yield er(Ze);return Kt?Kt.catch(console.error):vn(Ze).catch(console.error),pt.fid})).apply(this,arguments)}function Se(){return(Se=(0,C.Z)(function*(oe,Ze=!1){const pt=oe;return yield Fe(pt),(yield vn(pt,Ze)).token})).apply(this,arguments)}function Fe(oe){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,C.Z)(function*(oe){const{registrationPromise:Ze}=yield er(oe);Ze&&(yield Ze)})).apply(this,arguments)}function ft(oe){return Ot.create("missing-app-config-values",{valueName:oe})}const he="installations",W=oe=>{const Ze=oe.getProvider("app").getImmediate(),pt=function je(oe){if(!oe||!oe.options)throw ft("App Configuration");if(!oe.name)throw ft("App Name");const Ze=["projectId","apiKey","appId"];for(const pt of Ze)if(!oe.options[pt])throw ft(pt);return{appName:oe.name,projectId:oe.options.projectId,apiKey:oe.options.apiKey,appId:oe.options.appId}}(Ze);return{app:Ze,appConfig:pt,heartbeatServiceProvider:(0,h._getProvider)(Ze,"heartbeat"),_delete:()=>Promise.resolve()}},te=oe=>{const Ze=oe.getProvider("app").getImmediate(),pt=(0,h._getProvider)(Ze,he).getImmediate();return{getId:()=>function Zn(oe){return Ir.apply(this,arguments)}(pt),getToken:In=>function Je(oe){return Se.apply(this,arguments)}(pt,In)}};(function Ee(){(0,h._registerComponent)(new Z.wA(he,W,"PUBLIC")),(0,h._registerComponent)(new Z.wA("installations-internal",te,"PRIVATE"))})(),(0,h.registerVersion)(Le,qe),(0,h.registerVersion)(Le,qe,"esm2017")},1877:(an,ht,j)=>{j.d(ht,{Am:()=>tt,Ub:()=>be,Yd:()=>qe,in:()=>h});const C=[];var h=(()=>{return(ie=h||(h={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",h;var ie})();const Z={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},P=h.INFO,de={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},Le=(ie,fe,...Ce)=>{if(fe<ie.logLevel)return;const st=(new Date).toISOString(),ot=de[fe];if(!ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[ot](`[${st}]  ${ie.name}:`,...Ce)};class qe{constructor(fe){this.name=fe,this._logLevel=P,this._logHandler=Le,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in h))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?Z[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...fe),this._logHandler(this,h.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...fe),this._logHandler(this,h.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,h.INFO,...fe),this._logHandler(this,h.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,h.WARN,...fe),this._logHandler(this,h.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...fe),this._logHandler(this,h.ERROR,...fe)}}function be(ie){C.forEach(fe=>{fe.setLogLevel(ie)})}function tt(ie,fe){for(const Ce of C){let st=null;fe&&fe.level&&(st=Z[fe.level]),Ce.userLogHandler=null===ie?null:(ot,nt,...Ot)=>{const at=Ot.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");nt>=(st??ot.logLevel)&&ie({level:h[nt].toLowerCase(),message:at,args:Ot,type:ot.name})}}}},8766:(an,ht,j)=>{j.d(ht,{Lj:()=>xe,X3:()=>qt});var C=j(5861);let Z,P;const qe=new WeakMap,be=new WeakMap,tt=new WeakMap,ie=new WeakMap,fe=new WeakMap;let ot={get(se,ze,Pe){if(se instanceof IDBTransaction){if("done"===ze)return be.get(se);if("objectStoreNames"===ze)return se.objectStoreNames||tt.get(se);if("store"===ze)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return it(se[ze])},set:(se,ze,Pe)=>(se[ze]=Pe,!0),has:(se,ze)=>se instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in se};function at(se){return"function"==typeof se?function Ot(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return P||(P=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ze){return se.apply(Ht(this),ze),it(qe.get(this))}:function(...ze){return it(se.apply(Ht(this),ze))}:function(ze,...Pe){const Ue=se.call(Ht(this),ze,...Pe);return tt.set(Ue,ze.sort?ze.sort():[ze]),it(Ue)}}(se):(se instanceof IDBTransaction&&function st(se){if(be.has(se))return;const ze=new Promise((Pe,Ue)=>{const Ke=()=>{se.removeEventListener("complete",Ye),se.removeEventListener("error",Mt),se.removeEventListener("abort",Mt)},Ye=()=>{Pe(),Ke()},Mt=()=>{Ue(se.error||new DOMException("AbortError","AbortError")),Ke()};se.addEventListener("complete",Ye),se.addEventListener("error",Mt),se.addEventListener("abort",Mt)});be.set(se,ze)}(se),((se,ze)=>ze.some(Pe=>se instanceof Pe))(se,function de(){return Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,ot):se)}function it(se){if(se instanceof IDBRequest)return function Ce(se){const ze=new Promise((Pe,Ue)=>{const Ke=()=>{se.removeEventListener("success",Ye),se.removeEventListener("error",Mt)},Ye=()=>{Pe(it(se.result)),Ke()},Mt=()=>{Ue(se.error),Ke()};se.addEventListener("success",Ye),se.addEventListener("error",Mt)});return ze.then(Pe=>{Pe instanceof IDBCursor&&qe.set(Pe,se)}).catch(()=>{}),fe.set(ze,se),ze}(se);if(ie.has(se))return ie.get(se);const ze=at(se);return ze!==se&&(ie.set(se,ze),fe.set(ze,se)),ze}const Ht=se=>fe.get(se);function qt(se,ze,{blocked:Pe,upgrade:Ue,blocking:Ke,terminated:Ye}={}){const Mt=indexedDB.open(se,ze),kt=it(Mt);return Ue&&Mt.addEventListener("upgradeneeded",Bt=>{Ue(it(Mt.result),Bt.oldVersion,Bt.newVersion,it(Mt.transaction))}),Pe&&Mt.addEventListener("blocked",()=>Pe()),kt.then(Bt=>{Ye&&Bt.addEventListener("close",()=>Ye()),Ke&&Bt.addEventListener("versionchange",()=>Ke())}).catch(()=>{}),kt}function xe(se,{blocked:ze}={}){const Pe=indexedDB.deleteDatabase(se);return ze&&Pe.addEventListener("blocked",()=>ze()),it(Pe).then(()=>{})}const gt=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],ut=new Map;function ee(se,ze){if(!(se instanceof IDBDatabase)||ze in se||"string"!=typeof ze)return;if(ut.get(ze))return ut.get(ze);const Pe=ze.replace(/FromIndex$/,""),Ue=ze!==Pe,Ke=Be.includes(Pe);if(!(Pe in(Ue?IDBIndex:IDBObjectStore).prototype)||!Ke&&!gt.includes(Pe))return;const Ye=function(){var Mt=(0,C.Z)(function*(kt,...Bt){const gn=this.transaction(kt,Ke?"readwrite":"readonly");let xn=gn.store;return Ue&&(xn=xn.index(Bt.shift())),(yield Promise.all([xn[Pe](...Bt),Ke&&gn.done]))[0]});return function(Bt){return Mt.apply(this,arguments)}}();return ut.set(ze,Ye),Ye}!function nt(se){ot=se(ot)}(se=>({...se,get:(ze,Pe,Ue)=>ee(ze,Pe)||se.get(ze,Pe,Ue),has:(ze,Pe)=>!!ee(ze,Pe)||se.has(ze,Pe)}))},5861:(an,ht,j)=>{function C(Z,P,de,Le,qe,be,tt){try{var ie=Z[be](tt),fe=ie.value}catch(Ce){return void de(Ce)}ie.done?P(fe):Promise.resolve(fe).then(Le,qe)}function h(Z){return function(){var P=this,de=arguments;return new Promise(function(Le,qe){var be=Z.apply(P,de);function tt(fe){C(be,Le,qe,tt,ie,"next",fe)}function ie(fe){C(be,Le,qe,tt,ie,"throw",fe)}tt(void 0)})}}j.d(ht,{Z:()=>h})}},an=>{an(an.s=7775)}]);