"use strict";(self.webpackChunksalaJuegos=self.webpackChunksalaJuegos||[]).push([[179],{7128:(an,ot,j)=>{j.d(ot,{nm:()=>oe});var C=j(4215),ve=(j(4650),j(3692),j(5867),j(5861)),Le=j(9681),je=j(4859),we=j(2090),Ye=j(1877);const re=new Map,he={activated:!1,tokenObservers:[]},Ce={initialized:!1,enabled:!1};function dt(qe){return re.get(qe)||he}function ht(qe,ke){re.set(qe,ke)}function at(){return Ce}class lt{constructor(ke,nt,Nt,Wt,dn){if(this.operation=ke,this.retryPolicy=nt,this.getWaitDuration=Nt,this.lowerBound=Wt,this.upperBound=dn,this.pending=null,this.nextErrorWaitInterval=Wt,Wt>dn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ke){var nt=this;return(0,ve.Z)(function*(){nt.stop();try{nt.pending=new we.BH,yield function Ge(qe){return new Promise(ke=>{setTimeout(ke,qe)})}(nt.getNextRun(ke)),nt.pending.resolve(),yield nt.pending.promise,nt.pending=new we.BH,yield nt.operation(),nt.pending.resolve(),yield nt.pending.promise,nt.process(!0).catch(()=>{})}catch(Nt){nt.retryPolicy(Nt)?nt.process(!1).catch(()=>{}):nt.stop()}})()}getNextRun(ke){if(ke)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const nt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),nt}}}const ee=new we.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ze(qe){if(!dt(qe).activated)throw ee.create("use-before-activation",{appName:qe.name})}function $e(qe,ke){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ve.Z)(function*({url:qe,body:ke},nt){var Nt,Wt;const dn={"Content-Type":"application/json"},Mn=nt.getImmediate({optional:!0});if(Mn){const Zi=yield Mn.getHeartbeatsHeader();Zi&&(dn["X-Firebase-Client"]=Zi)}const Ln={method:"POST",body:JSON.stringify(ke),headers:dn};let Bn,Or;try{Bn=yield fetch(qe,Ln)}catch(Zi){throw ee.create("fetch-network-error",{originalErrorMessage:null===(Nt=Zi)||void 0===Nt?void 0:Nt.message})}if(200!==Bn.status)throw ee.create("fetch-status-error",{httpStatus:Bn.status});try{Or=yield Bn.json()}catch(Zi){throw ee.create("fetch-parse-error",{originalErrorMessage:null===(Wt=Zi)||void 0===Wt?void 0:Wt.message})}const rs=Or.ttl.match(/^([\d.]+)(s)$/);if(!rs||!rs[2]||isNaN(Number(rs[1])))throw ee.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Or.ttl}`});const wi=1e3*Number(rs[1]),_i=Date.now();return{token:Or.token,expireTimeMillis:_i+wi,issuedAtTimeMillis:_i}})).apply(this,arguments)}function Yt(qe,ke){const{projectId:nt,appId:Nt,apiKey:Wt}=qe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${nt}/apps/${Nt}:exchangeDebugToken?key=${Wt}`,body:{debug_token:ke}}}const Mt="firebase-app-check-store";let Gn=null;function On(){return Gn||(Gn=new Promise((qe,ke)=>{var nt;try{const Nt=indexedDB.open("firebase-app-check-database",1);Nt.onsuccess=Wt=>{qe(Wt.target.result)},Nt.onerror=Wt=>{var dn;ke(ee.create("storage-open",{originalErrorMessage:null===(dn=Wt.target.error)||void 0===dn?void 0:dn.message}))},Nt.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Mt,{keyPath:"compositeKey"})}}catch(Nt){ke(ee.create("storage-open",{originalErrorMessage:null===(nt=Nt)||void 0===nt?void 0:nt.message}))}}),Gn)}function Dr(){return(Dr=(0,ve.Z)(function*(qe,ke){const Nt=(yield On()).transaction(Mt,"readwrite"),dn=Nt.objectStore(Mt).put({compositeKey:qe,value:ke});return new Promise((Mn,Ln)=>{dn.onsuccess=Bn=>{Mn()},Nt.onerror=Bn=>{var Or;Ln(ee.create("storage-set",{originalErrorMessage:null===(Or=Bn.target.error)||void 0===Or?void 0:Or.message}))}})})).apply(this,arguments)}const ln=new Ye.Yd("@firebase/app-check");function mr(qe,ke){return(0,we.hl)()?function Vn(qe,ke){return function hr(qe,ke){return Dr.apply(this,arguments)}(function Mr(qe){return`${qe.options.appId}-${qe.name}`}(qe),ke)}(qe,ke).catch(nt=>{ln.warn(`Failed to write token to IndexedDB. Error: ${nt}`)}):Promise.resolve()}function Yn(){return at().enabled}function Zn(){return fr.apply(this,arguments)}function fr(){return(fr=(0,ve.Z)(function*(){const qe=at();if(qe.enabled&&qe.token)return qe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Er={error:"UNKNOWN_ERROR"};function tt(qe){return we.US.encodeString(JSON.stringify(qe),!1)}function me(qe){return _e.apply(this,arguments)}function _e(){return(_e=(0,ve.Z)(function*(qe,ke=!1){const nt=qe.app;Ze(nt);const Nt=dt(nt);let dn,Wt=Nt.token;if(!Wt){const Bn=yield Nt.cachedTokenPromise;Bn&&Ht(Bn)&&(Wt=Bn)}if(!ke&&Wt&&Ht(Wt))return{token:Wt.token};let Ln,Mn=!1;if(Yn()){Nt.exchangeTokenPromise||(Nt.exchangeTokenPromise=$e(Yt(nt,yield Zn()),qe.heartbeatServiceProvider).then(Or=>(Nt.exchangeTokenPromise=void 0,Or)),Mn=!0);const Bn=yield Nt.exchangeTokenPromise;return yield mr(nt,Bn),ht(nt,Object.assign(Object.assign({},Nt),{token:Bn})),{token:Bn.token}}try{Nt.exchangeTokenPromise||(Nt.exchangeTokenPromise=Nt.provider.getToken().then(Bn=>(Nt.exchangeTokenPromise=void 0,Bn)),Mn=!0),Wt=yield Nt.exchangeTokenPromise}catch(Bn){"appCheck/throttled"===Bn.code?ln.warn(Bn.message):ln.error(Bn),dn=Bn}return Wt?(Ln={token:Wt.token},ht(nt,Object.assign(Object.assign({},Nt),{token:Wt})),yield mr(nt,Wt)):Ln=tr(dn),Mn&&Hn(nt,Ln),Ln})).apply(this,arguments)}function gt(qe,ke){const nt=dt(qe),Nt=nt.tokenObservers.filter(Wt=>Wt.next!==ke);0===Nt.length&&nt.tokenRefresher&&nt.tokenRefresher.isRunning()&&nt.tokenRefresher.stop(),ht(qe,Object.assign(Object.assign({},nt),{tokenObservers:Nt}))}function nn(qe){const{app:ke}=qe,nt=dt(ke);let Nt=nt.tokenRefresher;Nt||(Nt=function vn(qe){const{app:ke}=qe;return new lt((0,ve.Z)(function*(){let Nt;if(Nt=dt(ke).token?yield me(qe,!0):yield me(qe),Nt.error)throw Nt.error}),()=>!0,()=>{const nt=dt(ke);if(nt.token){let Nt=nt.token.issuedAtTimeMillis+.5*(nt.token.expireTimeMillis-nt.token.issuedAtTimeMillis)+3e5;return Nt=Math.min(Nt,nt.token.expireTimeMillis-3e5),Math.max(0,Nt-Date.now())}return 0},3e4,96e4)}(qe),ht(ke,Object.assign(Object.assign({},nt),{tokenRefresher:Nt}))),!Nt.isRunning()&&nt.isTokenAutoRefreshEnabled&&Nt.start()}function Hn(qe,ke){const nt=dt(qe).tokenObservers;for(const Nt of nt)try{"EXTERNAL"===Nt.type&&null!=ke.error?Nt.error(ke.error):Nt.next(ke)}catch{}}function Ht(qe){return qe.expireTimeMillis-Date.now()>0}function tr(qe){return{token:tt(Er),error:qe}}class En{constructor(ke,nt){this.app=ke,this.heartbeatServiceProvider=nt}_delete(){const{tokenObservers:ke}=dt(this.app);for(const nt of ke)gt(this.app,nt.next);return Promise.resolve()}}const se="app-check-internal";!function G(){(0,Le._registerComponent)(new je.wA("app-check",qe=>function Rr(qe,ke){return new En(qe,ke)}(qe.getProvider("app").getImmediate(),qe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((qe,ke,nt)=>{qe.getProvider(se).initialize()})),(0,Le._registerComponent)(new je.wA(se,qe=>function xn(qe){return{getToken:ke=>me(qe,ke),addTokenListener:ke=>function ft(qe,ke,nt,Nt){const{app:Wt}=qe,dn=dt(Wt),Mn={next:nt,error:Nt,type:ke};if(ht(Wt,Object.assign(Object.assign({},dn),{tokenObservers:[...dn.tokenObservers,Mn]})),dn.token&&Ht(dn.token)){const Ln=dn.token;Promise.resolve().then(()=>{nt({token:Ln.token}),nn(qe)}).catch(()=>{})}dn.cachedTokenPromise.then(()=>nn(qe))}(qe,"INTERNAL",ke),removeTokenListener:ke=>gt(qe.app,ke)}}(qe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)("@firebase/app-check","0.5.12")}();class oe{constructor(){return(0,C.vb)("app-check")}}typeof window<"u"&&window},3692:(an,ot,j)=>{j.d(ot,{Ot:()=>R,ZF:()=>it,hX:()=>dt,z6:()=>ve});var C=j(5867),p=j(4650),Z=j(4215);class R{constructor(lt){return lt}}class ve{constructor(){return(0,C.C6)()}}const we=new p.OlP("angularfire2._apps"),Ye={provide:R,useFactory:function je(Me){return Me&&1===Me.length?Me[0]:new R((0,C.Mq)())},deps:[[new p.FiY,we]]},re={provide:ve,deps:[[new p.FiY,we]]};function he(Me){return(lt,Ge)=>{const ct=lt.runOutsideAngular(()=>Me(Ge));return new R(ct)}}let Ce=(()=>{class Me{constructor(Ge){(0,C.KN)("angularfire",Z.q4.full,"core"),(0,C.KN)("angularfire",Z.q4.full,"app"),(0,C.KN)("angular",p.q4F.full,Ge.toString())}}return Me.\u0275fac=function(Ge){return new(Ge||Me)(p.LFG(p.Lbi))},Me.\u0275mod=p.oAB({type:Me}),Me.\u0275inj=p.cJS({providers:[Ye,re]}),Me})();function dt(Me,...lt){return{ngModule:Ce,providers:[{provide:we,useFactory:he(Me),multi:!0,deps:[p.R0b,p.zs3,Z.HU,...lt]}]}}const it=(0,Z.u3)(C.ZF,!0)},7667:(an,ot,j)=>{j.d(ot,{gx:()=>Ce,dh:()=>dt,Xb:()=>$e,v0:()=>Yt,AR:()=>Me,e5:()=>tt});var C=j(4215),p=j(4650),Z=j(3692),R=j(5867),ve=j(7128),Le=j(7143);j(2090),j(9681),j(1877),j(4859);class Ce{constructor(be){return be}}class dt{constructor(){return(0,C.vb)("auth")}}const at=new p.OlP("angularfire2.auth-instances");function it(ce){return(be,Ie)=>{const yt=be.runOutsideAngular(()=>ce(Ie));return new Ce(yt)}}const et={provide:dt,deps:[[new p.FiY,at]]},Vt={provide:Ce,useFactory:function Ft(ce,be){const Ie=(0,C.JM)("auth",ce,be);return Ie&&new Ce(Ie)},deps:[[new p.FiY,at],Z.Ot]};let $t=(()=>{class ce{constructor(){(0,R.KN)("angularfire",C.q4.full,"auth")}}return ce.\u0275fac=function(Ie){return new(Ie||ce)},ce.\u0275mod=p.oAB({type:ce}),ce.\u0275inj=p.cJS({providers:[Vt,et]}),ce})();function Me(ce,...be){return{ngModule:$t,providers:[{provide:at,useFactory:it(ce),multi:!0,deps:[p.R0b,p.zs3,C.HU,Z.z6,[new p.FiY,ve.nm],...be]}]}}const $e=(0,C.u3)(Le.a5,!0),Yt=(0,C.u3)(Le.n,!0),tt=(0,C.u3)(Le.a6,!0)},5626:(an,ot,j)=>{j.d(ot,{ST:()=>Jt});var C=j(4650),p=j(4986),Z=j(9751),R=j(8996),ve=j(9646),Le=j(4215),je=j(8675),we=j(4482),Ye=j(5403);function re(){return(0,we.e)((se,G)=>{let te,Te=!1;se.subscribe((0,Ye.x)(G,oe=>{const ze=te;te=oe,Te&&G.next([ze,oe]),Te=!0}))})}var he=j(4004),Ce=j(5026),dt=j(4671);function at(se,G){return se===G}var Ft=j(9300),it=j(2011),et=j(6895),$t=(j(5881),j(3942)),Me=j(5525),lt=j(2090),Ge=j(4859);function ie(se,G){if(void 0===G)return{merge:!1};if(void 0!==G.mergeFields&&void 0!==G.merge)throw new Me.WA("invalid-argument",`Invalid options passed to function ${se}(): You cannot specify both "merge" and "mergeFields".`);return G}function Ze(){if(typeof Uint8Array>"u")throw new Me.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Ne(){if(!(0,Me.Me)())throw new Me.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ue{constructor(G){this._delegate=G}static fromBase64String(G){return Ne(),new Ue(Me.Jj.fromBase64String(G))}static fromUint8Array(G){return Ze(),new Ue(Me.Jj.fromUint8Array(G))}toBase64(){return Ne(),this._delegate.toBase64()}toUint8Array(){return Ze(),this._delegate.toUint8Array()}isEqual(G){return this._delegate.isEqual(G._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $e(se){return function Ke(se,G){if("object"!=typeof se||null===se)return!1;const te=se;for(const Te of G)if(Te in te&&"function"==typeof te[Te])return!0;return!1}(se,["next","error","complete"])}class Rt{enableIndexedDbPersistence(G,te){return(0,Me.ST)(G._delegate,{forceOwnership:te})}enableMultiTabIndexedDbPersistence(G){return(0,Me.fH)(G._delegate)}clearIndexedDbPersistence(G){return(0,Me.Fc)(G._delegate)}}class bt{constructor(G,te,Te){this._delegate=te,this._persistenceProvider=Te,this.INTERNAL={delete:()=>this.terminate()},G instanceof Me.l7||(this._appCompat=G)}get _databaseId(){return this._delegate._databaseId}settings(G){const te=this._delegate._getSettings();!G.merge&&te.host!==G.host&&(0,Me.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),G.merge&&delete(G=Object.assign(Object.assign({},te),G)).merge,this._delegate._setSettings(G)}useEmulator(G,te,Te={}){(0,Me.at)(this._delegate,G,te,Te)}enableNetwork(){return(0,Me.Ix)(this._delegate)}disableNetwork(){return(0,Me.TF)(this._delegate)}enablePersistence(G){let te=!1,Te=!1;return G&&(te=!!G.synchronizeTabs,Te=!!G.experimentalForceOwningTab,(0,Me.Wi)("synchronizeTabs",te,"experimentalForceOwningTab",Te)),te?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Te)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Me.Mx)(this._delegate)}onSnapshotsInSync(G){return(0,Me.sc)(this._delegate,G)}get app(){if(!this._appCompat)throw new Me.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(G){try{return new ar(this,(0,Me.hJ)(this._delegate,G))}catch(te){throw On(te,"collection()","Firestore.collection()")}}doc(G){try{return new Gn(this,(0,Me.JU)(this._delegate,G))}catch(te){throw On(te,"doc()","Firestore.doc()")}}collectionGroup(G){try{return new hr(this,(0,Me.B$)(this._delegate,G))}catch(te){throw On(te,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(G){return(0,Me.i3)(this._delegate,te=>G(new An(this,te)))}batch(){return(0,Me.qY)(this._delegate),new Mt(new Me.PU(this._delegate,G=>(0,Me.GL)(this._delegate,G)))}loadBundle(G){return(0,Me.Pb)(this._delegate,G)}namedQuery(G){return(0,Me.L$)(this._delegate,G).then(te=>te?new hr(this,te):null)}}class Yt extends Me.u7{constructor(G){super(),this.firestore=G}convertBytes(G){return new Ue(new Me.Jj(G))}convertReference(G){const te=this.convertDocumentKey(G,this.firestore._databaseId);return Gn.forKey(te,this.firestore,null)}}class An{constructor(G,te){this._firestore=G,this._delegate=te,this._userDataWriter=new Yt(G)}get(G){const te=Mr(G);return this._delegate.get(te).then(Te=>new fn(this._firestore,new Me.xU(this._firestore._delegate,this._userDataWriter,Te._key,Te._document,Te.metadata,te.converter)))}set(G,te,Te){const oe=Mr(G);return Te?(ie("Transaction.set",Te),this._delegate.set(oe,te,Te)):this._delegate.set(oe,te),this}update(G,te,Te,...oe){const ze=Mr(G);return 2===arguments.length?this._delegate.update(ze,te):this._delegate.update(ze,te,Te,...oe),this}delete(G){const te=Mr(G);return this._delegate.delete(te),this}}class Mt{constructor(G){this._delegate=G}set(G,te,Te){const oe=Mr(G);return Te?(ie("WriteBatch.set",Te),this._delegate.set(oe,te,Te)):this._delegate.set(oe,te),this}update(G,te,Te,...oe){const ze=Mr(G);return 2===arguments.length?this._delegate.update(ze,te):this._delegate.update(ze,te,Te,...oe),this}delete(G){const te=Mr(G);return this._delegate.delete(te),this}commit(){return this._delegate.commit()}}class tn{constructor(G,te,Te){this._firestore=G,this._userDataWriter=te,this._delegate=Te}fromFirestore(G,te){const Te=new Me.$q(this._firestore._delegate,this._userDataWriter,G._key,G._document,G.metadata,null);return this._delegate.fromFirestore(new er(this._firestore,Te),te??{})}toFirestore(G,te){return te?this._delegate.toFirestore(G,te):this._delegate.toFirestore(G)}static getInstance(G,te){const Te=tn.INSTANCES;let oe=Te.get(G);oe||(oe=new WeakMap,Te.set(G,oe));let ze=oe.get(te);return ze||(ze=new tn(G,new Yt(G),te),oe.set(te,ze)),ze}}tn.INSTANCES=new WeakMap;class Gn{constructor(G,te){this.firestore=G,this._delegate=te,this._userDataWriter=new Yt(G)}static forPath(G,te,Te){if(G.length%2!=0)throw new Me.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${G.canonicalString()} has ${G.length}`);return new Gn(te,new Me.my(te._delegate,Te,new Me.Ky(G)))}static forKey(G,te,Te){return new Gn(te,new Me.my(te._delegate,Te,G))}get id(){return this._delegate.id}get parent(){return new ar(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(G){try{return new ar(this.firestore,(0,Me.hJ)(this._delegate,G))}catch(te){throw On(te,"collection()","DocumentReference.collection()")}}isEqual(G){return(G=(0,lt.m9)(G))instanceof Me.my&&(0,Me.Eo)(this._delegate,G)}set(G,te){te=ie("DocumentReference.set",te);try{return te?(0,Me.pl)(this._delegate,G,te):(0,Me.pl)(this._delegate,G)}catch(Te){throw On(Te,"setDoc()","DocumentReference.set()")}}update(G,te,...Te){try{return 1===arguments.length?(0,Me.r7)(this._delegate,G):(0,Me.r7)(this._delegate,G,te,...Te)}catch(oe){throw On(oe,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Me.oe)(this._delegate)}onSnapshot(...G){const te=Kn(G),Te=Vn(G,oe=>new fn(this.firestore,new Me.xU(this.firestore._delegate,this._userDataWriter,oe._key,oe._document,oe.metadata,this._delegate.converter)));return(0,Me.cf)(this._delegate,te,Te)}get(G){let te;return te="cache"===G?.source?(0,Me.kl)(this._delegate):"server"===G?.source?(0,Me.Xk)(this._delegate):(0,Me.QT)(this._delegate),te.then(Te=>new fn(this.firestore,new Me.xU(this.firestore._delegate,this._userDataWriter,Te._key,Te._document,Te.metadata,this._delegate.converter)))}withConverter(G){return new Gn(this.firestore,this._delegate.withConverter(G?tn.getInstance(this.firestore,G):null))}}function On(se,G,te){return se.message=se.message.replace(G,te),se}function Kn(se){for(const G of se)if("object"==typeof G&&!$e(G))return G;return{}}function Vn(se,G){var te,Te;let oe;return oe=$e(se[0])?se[0]:$e(se[1])?se[1]:"function"==typeof se[0]?{next:se[0],error:se[1],complete:se[2]}:{next:se[1],error:se[2],complete:se[3]},{next:ze=>{oe.next&&oe.next(G(ze))},error:null===(te=oe.error)||void 0===te?void 0:te.bind(oe),complete:null===(Te=oe.complete)||void 0===Te?void 0:Te.bind(oe)}}class fn{constructor(G,te){this._firestore=G,this._delegate=te}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(G){return this._delegate.data(G)}get(G,te){return this._delegate.get(G,te)}isEqual(G){return(0,Me.qK)(this._delegate,G._delegate)}}class er extends fn{data(G){const te=this._delegate.data(G);return(0,Me.K9)(void 0!==te,"Document in a QueryDocumentSnapshot should exist"),te}}class hr{constructor(G,te){this.firestore=G,this._delegate=te,this._userDataWriter=new Yt(G)}where(G,te,Te){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.ar)(G,te,Te)))}catch(oe){throw On(oe,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(G,te){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.Xo)(G,te)))}catch(Te){throw On(Te,/(orderBy|where)\(\)/,"Query.$1()")}}limit(G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.b9)(G)))}catch(te){throw On(te,"limit()","Query.limit()")}}limitToLast(G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.vh)(G)))}catch(te){throw On(te,"limitToLast()","Query.limitToLast()")}}startAt(...G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.e0)(...G)))}catch(te){throw On(te,"startAt()","Query.startAt()")}}startAfter(...G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.TQ)(...G)))}catch(te){throw On(te,"startAfter()","Query.startAfter()")}}endBefore(...G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.Lx)(...G)))}catch(te){throw On(te,"endBefore()","Query.endBefore()")}}endAt(...G){try{return new hr(this.firestore,(0,Me.IO)(this._delegate,(0,Me.Wu)(...G)))}catch(te){throw On(te,"endAt()","Query.endAt()")}}isEqual(G){return(0,Me.iE)(this._delegate,G._delegate)}get(G){let te;return te="cache"===G?.source?(0,Me.UQ)(this._delegate):"server"===G?.source?(0,Me.zN)(this._delegate):(0,Me.PL)(this._delegate),te.then(Te=>new cr(this.firestore,new Me.W(this.firestore._delegate,this._userDataWriter,this._delegate,Te._snapshot)))}onSnapshot(...G){const te=Kn(G),Te=Vn(G,oe=>new cr(this.firestore,new Me.W(this.firestore._delegate,this._userDataWriter,this._delegate,oe._snapshot)));return(0,Me.cf)(this._delegate,te,Te)}withConverter(G){return new hr(this.firestore,this._delegate.withConverter(G?tn.getInstance(this.firestore,G):null))}}class Dr{constructor(G,te){this._firestore=G,this._delegate=te}get type(){return this._delegate.type}get doc(){return new er(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cr{constructor(G,te){this._firestore=G,this._delegate=te}get query(){return new hr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(G=>new er(this._firestore,G))}docChanges(G){return this._delegate.docChanges(G).map(te=>new Dr(this._firestore,te))}forEach(G,te){this._delegate.forEach(Te=>{G.call(te,new er(this._firestore,Te))})}isEqual(G){return(0,Me.qK)(this._delegate,G._delegate)}}class ar extends hr{constructor(G,te){super(G,te),this.firestore=G,this._delegate=te}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const G=this._delegate.parent;return G?new Gn(this.firestore,G):null}doc(G){try{return new Gn(this.firestore,void 0===G?(0,Me.JU)(this._delegate):(0,Me.JU)(this._delegate,G))}catch(te){throw On(te,"doc()","CollectionReference.doc()")}}add(G){return(0,Me.ET)(this._delegate,G).then(te=>new Gn(this.firestore,te))}isEqual(G){return(0,Me.Eo)(this._delegate,G._delegate)}withConverter(G){return new ar(this.firestore,this._delegate.withConverter(G?tn.getInstance(this.firestore,G):null))}}function Mr(se){return(0,Me.Cf)(se,Me.my)}class ln{constructor(...G){this._delegate=new Me.Lz(...G)}static documentId(){return new ln(Me.Xb.keyField().canonicalString())}isEqual(G){return(G=(0,lt.m9)(G))instanceof Me.Lz&&this._delegate._internalPath.isEqual(G._internalPath)}}class qn{constructor(G){this._delegate=G}static serverTimestamp(){const G=(0,Me.Bt)();return G._methodName="FieldValue.serverTimestamp",new qn(G)}static delete(){const G=(0,Me.AK)();return G._methodName="FieldValue.delete",new qn(G)}static arrayUnion(...G){const te=(0,Me.vr)(...G);return te._methodName="FieldValue.arrayUnion",new qn(te)}static arrayRemove(...G){const te=(0,Me.Ab)(...G);return te._methodName="FieldValue.arrayRemove",new qn(te)}static increment(G){const te=(0,Me.nP)(G);return te._methodName="FieldValue.increment",new qn(te)}isEqual(G){return this._delegate.isEqual(G._delegate)}}const Pr={Firestore:bt,GeoPoint:Me.F8,Timestamp:Me.EK,Blob:Ue,Transaction:An,WriteBatch:Mt,DocumentReference:Gn,DocumentSnapshot:fn,Query:hr,QueryDocumentSnapshot:er,QuerySnapshot:cr,CollectionReference:ar,FieldPath:ln,FieldValue:qn,setLogLevel:function wn(se){(0,Me.Ub)(se)},CACHE_SIZE_UNLIMITED:Me.IX};!function Xt(se){(function mr(se,G){se.INTERNAL.registerComponent(new Ge.wA("firestore-compat",te=>{const Te=te.getProvider("app-compat").getImmediate(),oe=te.getProvider("firestore").getImmediate();return G(Te,oe)},"PUBLIC").setServiceProps(Object.assign({},Pr)))})(se,(G,te)=>new bt(G,te,new Rt)),se.registerVersion("@firebase/firestore-compat","0.1.25")}($t.Z);var dr=j(7579),Yn=j(6451),Zn=j(5363),fr=j(3900),oi=j(6063);class Er extends dr.x{constructor(G=1/0,te=1/0,Te=oi.l){super(),this._bufferSize=G,this._windowTime=te,this._timestampProvider=Te,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=te===1/0,this._bufferSize=Math.max(1,G),this._windowTime=Math.max(1,te)}next(G){const{isStopped:te,_buffer:Te,_infiniteTimeWindow:oe,_timestampProvider:ze,_windowTime:ut}=this;te||(Te.push(G),!oe&&Te.push(ze.now()+ut)),this._trimBuffer(),super.next(G)}_subscribe(G){this._throwIfClosed(),this._trimBuffer();const te=this._innerSubscribe(G),{_infiniteTimeWindow:Te,_buffer:oe}=this,ze=oe.slice();for(let ut=0;ut<ze.length&&!G.closed;ut+=Te?1:2)G.next(ze[ut]);return this._checkFinalizedStatuses(G),te}_trimBuffer(){const{_bufferSize:G,_timestampProvider:te,_buffer:Te,_infiniteTimeWindow:oe}=this,ze=(oe?1:2)*G;if(G<1/0&&ze<Te.length&&Te.splice(0,Te.length-ze),!oe){const ut=te.now();let Zt=0;for(let Tn=1;Tn<Te.length&&Te[Tn]<=ut;Tn+=2)Zt=Tn;Zt&&Te.splice(0,Zt+1)}}}var tt=j(3099);function me(se,G,te){let Te,oe=!1;return se&&"object"==typeof se?({bufferSize:Te=1/0,windowTime:G=1/0,refCount:oe=!1,scheduler:te}=se):Te=se??1/0,(0,tt.B)({connector:()=>new Er(Te,G,te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:oe})}var _e=j(590),ft=j(576);function gt(se,G){return(0,ft.m)(G)?(0,fr.w)(()=>se,G):(0,fr.w)(()=>se)}var nn=j(9468),vn=j(7128);j(127);const tr=new C.OlP("angularfire2.auth.use-emulator"),En=new C.OlP("angularfire2.auth.settings"),Rr=new C.OlP("angularfire2.auth.tenant-id"),xn=new C.OlP("angularfire2.auth.langugage-code"),De=new C.OlP("angularfire2.auth.use-device-language"),le=new C.OlP("angularfire.auth.persistence"),ce=(se,G,te,Te,oe,ze,ut,Zt)=>(0,it.cc)(`${se.name}.auth`,"AngularFireAuth",se.name,()=>{const Tn=G.runOutsideAngular(()=>se.auth());if(te&&Tn.useEmulator(...te),Te&&(Tn.tenantId=Te),Tn.languageCode=oe,ze&&Tn.useDeviceLanguage(),ut)for(const[Un,hn]of Object.entries(ut))Tn.settings[Un]=hn;return Zt&&Tn.setPersistence(Zt),Tn},[te,Te,oe,ze,ut,Zt]);let be=(()=>{class se{constructor(te,Te,oe,ze,ut,Zt,Tn,Un,hn,wr,zr,ri){const ir=new dr.x,mi=(0,ve.of)(void 0).pipe((0,Zn.Q)(ut.outsideAngular),(0,fr.w)(()=>ze.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,5881)))),(0,he.U)(()=>(0,it.on)(te,ze,Te)),(0,he.U)(qr=>ce(qr,ze,Zt,Un,hn,wr,Tn,zr)),me({bufferSize:1,refCount:!1}));if((0,et.PM)(oe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ve.of)(null);else{mi.pipe((0,_e.P)()).subscribe();const sr=mi.pipe((0,fr.w)(qe=>qe.getRedirectResult().then(ke=>ke,()=>null)),Le.iC,me({bufferSize:1,refCount:!1})),or=mi.pipe((0,fr.w)(qe=>new Z.y(ke=>({unsubscribe:ze.runOutsideAngular(()=>qe.onAuthStateChanged(nt=>ke.next(nt),nt=>ke.error(nt),()=>ke.complete()))})))),kn=mi.pipe((0,fr.w)(qe=>new Z.y(ke=>({unsubscribe:ze.runOutsideAngular(()=>qe.onIdTokenChanged(nt=>ke.next(nt),nt=>ke.error(nt),()=>ke.complete()))}))));this.authState=sr.pipe(gt(or),(0,nn.R)(ut.outsideAngular),(0,Zn.Q)(ut.insideAngular)),this.user=sr.pipe(gt(kn),(0,nn.R)(ut.outsideAngular),(0,Zn.Q)(ut.insideAngular)),this.idToken=this.user.pipe((0,fr.w)(qe=>qe?(0,R.D)(qe.getIdToken()):(0,ve.of)(null))),this.idTokenResult=this.user.pipe((0,fr.w)(qe=>qe?(0,R.D)(qe.getIdTokenResult()):(0,ve.of)(null))),this.credential=(0,Yn.T)(sr,ir,this.authState.pipe((0,Ft.h)(qe=>!qe))).pipe((0,he.U)(qe=>qe?.user?qe:null),(0,nn.R)(ut.outsideAngular),(0,Zn.Q)(ut.insideAngular))}return(0,it.pX)(this,mi,ze,{spy:{apply:(qr,sr,or)=>{(qr.startsWith("signIn")||qr.startsWith("createUser"))&&or.then(kn=>ir.next(kn))}}})}}return se.\u0275fac=function(te){return new(te||se)(C.LFG(it.Dh),C.LFG(it.xv,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Le.HU),C.LFG(tr,8),C.LFG(En,8),C.LFG(Rr,8),C.LFG(xn,8),C.LFG(De,8),C.LFG(le,8),C.LFG(vn.nm,8))},se.\u0275prov=C.Yz7({token:se,factory:se.\u0275fac,providedIn:"any"}),se})();function kt(se,G){return function yt(se,G=p.z){return new Z.y(te=>{let Te;return null!=G?G.schedule(()=>{Te=se.onSnapshot({includeMetadataChanges:!0},te)}):Te=se.onSnapshot({includeMetadataChanges:!0},te),()=>{Te?.()}})}(se,G)}function rr(se,G){return kt(se,G).pipe((0,he.U)(te=>({payload:te,type:"query"})))}function Qn(se,G){return rr(se,G).pipe((0,je.O)(void 0),re(),(0,he.U)(([te,Te])=>{const oe=Te.payload.docChanges(),ze=oe.map(ut=>({type:ut.type,payload:ut}));return te&&JSON.stringify(te.payload.metadata)!==JSON.stringify(Te.payload.metadata)&&Te.payload.docs.forEach((ut,Zt)=>{const Tn=oe.find(hn=>hn.doc.ref.isEqual(ut.ref)),Un=te?.payload.docs.find(hn=>hn.ref.isEqual(ut.ref));Tn&&JSON.stringify(Tn.doc.metadata)===JSON.stringify(ut.metadata)||!Tn&&Un&&JSON.stringify(Un.metadata)===JSON.stringify(ut.metadata)||ze.push({type:"modified",payload:{oldIndex:Zt,newIndex:Zt,type:"modified",doc:ut}})}),ze}))}function Ir(se,G,te){return Qn(se,te).pipe((0,Ce.R)((Te,oe)=>function Je(se,G,te){return G.forEach(Te=>{te.indexOf(Te.type)>-1&&(se=function Fe(se,G){switch(G.type){case"added":if(!se[G.newIndex]||!se[G.newIndex].doc.ref.isEqual(G.doc.ref))return Ae(se,G.newIndex,0,G);break;case"modified":if(null==se[G.oldIndex]||se[G.oldIndex].doc.ref.isEqual(G.doc.ref)){if(G.oldIndex!==G.newIndex){const te=se.slice();return te.splice(G.oldIndex,1),te.splice(G.newIndex,0,G),te}return Ae(se,G.newIndex,1,G)}break;case"removed":if(se[G.oldIndex]&&se[G.oldIndex].doc.ref.isEqual(G.doc.ref))return Ae(se,G.oldIndex,1)}return se}(se,Te))}),se}(Te,oe.map(ze=>ze.payload),G),[]),function ht(se,G=dt.y){return se=se??at,(0,we.e)((te,Te)=>{let oe,ze=!0;te.subscribe((0,Ye.x)(Te,ut=>{const Zt=G(ut);(ze||!se(oe,Zt))&&(ze=!1,oe=Zt,Te.next(ut))}))})}(),(0,he.U)(Te=>Te.map(oe=>({type:oe.type,payload:oe}))))}function Ae(se,G,te,...Te){const oe=se.slice();return oe.splice(G,te,...Te),oe}function vt(se){return(!se||0===se.length)&&(se=["added","removed","modified"]),se}class Bt{constructor(G,te,Te){this.ref=G,this.query=te,this.afs=Te}stateChanges(G){let te=Qn(this.query,this.afs.schedulers.outsideAngular);return G&&G.length>0&&(te=te.pipe((0,he.U)(Te=>Te.filter(oe=>G.indexOf(oe.type)>-1)))),te.pipe((0,je.O)(void 0),re(),(0,Ft.h)(([Te,oe])=>oe.length>0||!Te),(0,he.U)(([Te,oe])=>oe),Le.iC)}auditTrail(G){return this.stateChanges(G).pipe((0,Ce.R)((te,Te)=>[...te,...Te],[]))}snapshotChanges(G){const te=vt(G);return Ir(this.query,te,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(G={}){return rr(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(te=>te.payload.docs.map(Te=>G.idField?Object.assign(Object.assign({},Te.data()),{[G.idField]:Te.id}):Te.data())),Le.iC)}get(G){return(0,R.D)(this.query.get(G)).pipe(Le.iC)}add(G){return this.ref.add(G)}doc(G){return new _n(this.ref.doc(G),this.afs)}}class _n{constructor(G,te){this.ref=G,this.afs=te}set(G,te){return this.ref.set(G,te)}update(G){return this.ref.update(G)}delete(){return this.ref.delete()}collection(G,te){const Te=this.ref.collection(G),{ref:oe,query:ze}=pt(Te,te);return new Bt(oe,ze,this.afs)}snapshotChanges(){return function yn(se,G){return kt(se,G).pipe((0,je.O)(void 0),re(),(0,he.U)(([te,Te])=>Te.exists?te?.exists?{payload:Te,type:"modified"}:{payload:Te,type:"added"}:{payload:Te,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(G={}){return this.snapshotChanges().pipe((0,he.U)(({payload:te})=>G.idField?Object.assign(Object.assign({},te.data()),{[G.idField]:te.id}):te.data()))}get(G){return(0,R.D)(this.ref.get(G)).pipe(Le.iC)}}class bn{constructor(G,te){this.query=G,this.afs=te}stateChanges(G){return G&&0!==G.length?Qn(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(te=>te.filter(Te=>G.indexOf(Te.type)>-1)),(0,Ft.h)(te=>te.length>0),Le.iC):Qn(this.query,this.afs.schedulers.outsideAngular).pipe(Le.iC)}auditTrail(G){return this.stateChanges(G).pipe((0,Ce.R)((te,Te)=>[...te,...Te],[]))}snapshotChanges(G){const te=vt(G);return Ir(this.query,te,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(G={}){return rr(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(Te=>Te.payload.docs.map(oe=>G.idField?Object.assign({[G.idField]:oe.id},oe.data()):oe.data())),Le.iC)}get(G){return(0,R.D)(this.query.get(G)).pipe(Le.iC)}}const Ee=new C.OlP("angularfire2.enableFirestorePersistence"),pe=new C.OlP("angularfire2.firestore.persistenceSettings"),de=new C.OlP("angularfire2.firestore.settings"),Xe=new C.OlP("angularfire2.firestore.use-emulator");function pt(se,G=(te=>te)){return{query:G(se),ref:se}}let Jt=(()=>{class se{constructor(te,Te,oe,ze,ut,Zt,Tn,Un,hn,wr,zr,ri,ir,mi,qr,sr,or){this.schedulers=Tn;const kn=(0,it.on)(te,Zt,Te),qe=hn;wr&&ce(kn,Zt,zr,ir,mi,qr,ri,sr),[this.firestore,this.persistenceEnabled$]=(0,it.cc)(`${kn.name}.firestore`,"AngularFirestore",kn.name,()=>{const ke=Zt.runOutsideAngular(()=>kn.firestore());if(ze&&ke.settings(ze),qe&&ke.useEmulator(...qe),oe&&!(0,et.PM)(ut)){const nt=()=>{try{return(0,R.D)(ke.enablePersistence(Un||void 0).then(()=>!0,()=>!1))}catch(Nt){return typeof console<"u"&&console.warn(Nt),(0,ve.of)(!1)}};return[ke,Zt.runOutsideAngular(nt)]}return[ke,(0,ve.of)(!1)]},[ze,qe,oe])}collection(te,Te){let oe;oe="string"==typeof te?this.firestore.collection(te):te;const{ref:ze,query:ut}=pt(oe,Te),Zt=this.schedulers.ngZone.run(()=>ze);return new Bt(Zt,ut,this)}collectionGroup(te,Te){const oe=Te||(ut=>ut),ze=this.firestore.collectionGroup(te);return new bn(oe(ze),this)}doc(te){let Te;Te="string"==typeof te?this.firestore.doc(te):te;const oe=this.schedulers.ngZone.run(()=>Te);return new _n(oe,this)}createId(){return this.firestore.collection("_").doc().id}}return se.\u0275fac=function(te){return new(te||se)(C.LFG(it.Dh),C.LFG(it.xv,8),C.LFG(Ee,8),C.LFG(de,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Le.HU),C.LFG(pe,8),C.LFG(Xe,8),C.LFG(be,8),C.LFG(tr,8),C.LFG(En,8),C.LFG(Rr,8),C.LFG(xn,8),C.LFG(De,8),C.LFG(le,8),C.LFG(vn.nm,8))},se.\u0275prov=C.Yz7({token:se,factory:se.\u0275fac,providedIn:"any"}),se})()},2011:(an,ot,j)=>{j.d(ot,{Dh:()=>we,GT:()=>Le,cc:()=>ht,hO:()=>dt,on:()=>re,pX:()=>ve,xv:()=>Ye});var C=j(4650),p=j(127),Z=j(4215);an=j.hmd(an);const R=["ngOnDestroy"],ve=(et,Vt,$t,Me={})=>new Proxy(et,{get:(lt,Ge)=>$t.runOutsideAngular(()=>{var ct;if(et[Ge])return!(null===(ct=Me?.spy)||void 0===ct)&&ct.get&&Me.spy.get(Ge,et[Ge]),et[Ge];if(R.indexOf(Ge)>-1)return()=>{};const ee=Vt.toPromise().then(ie=>{const Ze=ie&&ie[Ge];return"function"==typeof Ze?Ze.bind(ie):Ze&&Ze.then?Ze.then(Ne=>$t.run(()=>Ne)):$t.run(()=>Ze)});return new Proxy(()=>{},{get:(ie,Ze)=>ee[Ze],apply:(ie,Ze,Ne)=>ee.then(Ue=>{var $e;const Ke=Ue&&Ue(...Ne);return!(null===($e=Me?.spy)||void 0===$e)&&$e.apply&&Me.spy.apply(Ge,Ne,Ke),Ke})})})}),Le=(et,Vt)=>{Vt.forEach($t=>{Object.getOwnPropertyNames($t.prototype||$t).forEach(Me=>{Object.defineProperty(et.prototype,Me,Object.getOwnPropertyDescriptor($t.prototype||$t,Me))})})};class je{constructor(Vt){return Vt}}const we=new C.OlP("angularfire2.app.options"),Ye=new C.OlP("angularfire2.app.name");function re(et,Vt,$t){const lt="object"==typeof $t&&$t||{};lt.name=lt.name||"string"==typeof $t&&$t||"[DEFAULT]";const ct=p.Z.apps.filter(ee=>ee&&ee.name===lt.name)[0]||Vt.runOutsideAngular(()=>p.Z.initializeApp(et,lt));try{JSON.stringify(et)!==JSON.stringify(ct.options)&&he("error",`${ct.name} Firebase App already initialized with different options${an.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new je(ct)}const he=(et,...Vt)=>{(0,C.X6Q)()&&typeof console<"u"&&console[et](...Vt)},Ce={provide:je,useFactory:re,deps:[we,C.R0b,[new C.FiY,Ye]]};let dt=(()=>{class et{constructor($t){p.Z.registerVersion("angularfire",Z.q4.full,"core"),p.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),p.Z.registerVersion("angular",C.q4F.full,$t.toString())}static initializeApp($t,Me){return{ngModule:et,providers:[{provide:we,useValue:$t},{provide:Ye,useValue:Me}]}}}return et.\u0275fac=function($t){return new($t||et)(C.LFG(C.Lbi))},et.\u0275mod=C.oAB({type:et}),et.\u0275inj=C.cJS({providers:[Ce]}),et})();function ht(et,Vt,$t,Me,lt){const[,Ge,ct]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===et)||[];if(Ge)return function at(et,Vt){try{return et.toString()===Vt.toString()}catch{return et===Vt}}(lt,ct)||(it("error",`${Vt} was already initialized on the ${$t} Firebase App with different settings.${Ft?" You may need to reload as Firebase is not HMR aware.":""}`),it("warn",{is:lt,was:ct})),Ge;{const ee=Me();return globalThis.\u0275AngularfireInstanceCache.push([et,ee,lt]),ee}}const Ft=!!an.hot,it=(et,...Vt)=>{(0,C.X6Q)()&&typeof console<"u"&&console[et](...Vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3266:(an,ot,j)=>{j.d(ot,{gg:()=>we,JU:()=>tn,ad:()=>qn,Cm:()=>et,Bt:()=>gt,pl:()=>nn});var C=j(4215),p=j(4650),Z=j(7667),R=j(3692),ve=j(5867),Le=j(7128),je=j(5525);class we{constructor(be){return be}}const Ye="firestore",Ce=new p.OlP("angularfire2.firestore-instances");function ht(ce){return(be,Ie)=>{const yt=be.runOutsideAngular(()=>ce(Ie));return new we(yt)}}const at={provide:class re{constructor(){return(0,C.vb)(Ye)}},deps:[[new p.FiY,Ce]]},Ft={provide:we,useFactory:function dt(ce,be){const Ie=(0,C.JM)(Ye,ce,be);return Ie&&new we(Ie)},deps:[[new p.FiY,Ce],R.Ot]};let it=(()=>{class ce{constructor(){(0,ve.KN)("angularfire",C.q4.full,"fst")}}return ce.\u0275fac=function(Ie){return new(Ie||ce)},ce.\u0275mod=p.oAB({type:ce}),ce.\u0275inj=p.cJS({providers:[Ft,at]}),ce})();function et(ce,...be){return{ngModule:it,providers:[{provide:Ce,useFactory:ht(ce),multi:!0,deps:[p.R0b,p.zs3,C.HU,R.z6,[new p.FiY,Z.dh],[new p.FiY,Le.nm],...be]}]}}const tn=(0,C.u3)(je.JU,!0),qn=(0,C.u3)(je.ad,!0),gt=(0,C.u3)(je.Bt,!0),nn=(0,C.u3)(je.pl,!0)},4215:(an,ot,j)=>{j.d(ot,{q4:()=>Bs,iC:()=>ko,HU:()=>Go,vb:()=>$s,JM:()=>oo,n1:()=>Si,u3:()=>Hr});var C=j(4650),p=j(5867),Z=j(5861),R=j(9681),ve=j(2090),Le=j(4859),je=j(1877);j(2833);const Ye="@firebase/remote-config",ht=new ve.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yt{constructor(ge,We,st,St){this.client=ge,this.storage=We,this.storageCache=st,this.logger=St}isCachedDataFresh(ge,We){if(!We)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const st=Date.now()-We,St=st<=ge;return this.logger.debug(`Config fetch cache check. Cache age millis: ${st}. Cache max age millis (minimumFetchIntervalMillis setting): ${ge}. Is cache hit: ${St}.`),St}fetch(ge){var We=this;return(0,Z.Z)(function*(){const[st,St]=yield Promise.all([We.storage.getLastSuccessfulFetchTimestampMillis(),We.storage.getLastSuccessfulFetchResponse()]);if(St&&We.isCachedDataFresh(ge.cacheMaxAgeMillis,st))return St;ge.eTag=St&&St.eTag;const Ct=yield We.client.fetch(ge),sn=[We.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ct.status&&sn.push(We.storage.setLastSuccessfulFetchResponse(Ct)),yield Promise.all(sn),Ct})()}}function wn(Se=navigator){return Se.languages&&Se.languages[0]||Se.language}class An{constructor(ge,We,st,St,Ct,sn){this.firebaseInstallations=ge,this.sdkVersion=We,this.namespace=st,this.projectId=St,this.apiKey=Ct,this.appId=sn}fetch(ge){var We=this;return(0,Z.Z)(function*(){var st,St,Ct;const[sn,un]=yield Promise.all([We.firebaseInstallations.getId(),We.firebaseInstallations.getToken()]),Rn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${We.projectId}/namespaces/${We.namespace}:fetch?key=${We.apiKey}`,kr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ge.eTag||"*"},Zr={sdk_version:We.sdkVersion,app_instance_id:sn,app_instance_id_token:un,app_id:We.appId,language_code:wn()},bi={method:"POST",headers:kr,body:JSON.stringify(Zr)},yi=fetch(Rn,bi),jn=new Promise((Bi,Fi)=>{ge.signal.addEventListener(()=>{const ii=new Error("The operation was aborted.");ii.name="AbortError",Fi(ii)})});let Es;try{yield Promise.race([yi,jn]),Es=yield yi}catch(Bi){let Fi="fetch-client-network";throw"AbortError"===(null===(st=Bi)||void 0===st?void 0:st.name)&&(Fi="fetch-timeout"),ht.create(Fi,{originalErrorMessage:null===(St=Bi)||void 0===St?void 0:St.message})}let ws=Es.status;const Fo=Es.headers.get("ETag")||void 0;let Eo,li;if(200===Es.status){let Bi;try{Bi=yield Es.json()}catch(Fi){throw ht.create("fetch-client-parse",{originalErrorMessage:null===(Ct=Fi)||void 0===Ct?void 0:Ct.message})}Eo=Bi.entries,li=Bi.state}if("INSTANCE_STATE_UNSPECIFIED"===li?ws=500:"NO_CHANGE"===li?ws=304:("NO_TEMPLATE"===li||"EMPTY_CONFIG"===li)&&(Eo={}),304!==ws&&200!==ws)throw ht.create("fetch-status",{httpStatus:ws});return{status:ws,eTag:Fo,config:Eo}})()}}class Gn{constructor(ge,We){this.client=ge,this.storage=We}fetch(ge){var We=this;return(0,Z.Z)(function*(){const st=(yield We.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return We.attemptFetch(ge,st)})()}attemptFetch(ge,{throttleEndTimeMillis:We,backoffCount:st}){var St=this;return(0,Z.Z)(function*(){yield function Mt(Se,ge){return new Promise((We,st)=>{const St=Math.max(ge-Date.now(),0),Ct=setTimeout(We,St);Se.addEventListener(()=>{clearTimeout(Ct),st(ht.create("fetch-throttle",{throttleEndTimeMillis:ge}))})})}(ge.signal,We);try{const Ct=yield St.client.fetch(ge);return yield St.storage.deleteThrottleMetadata(),Ct}catch(Ct){if(!function tn(Se){if(!(Se instanceof ve.ZR&&Se.customData))return!1;const ge=Number(Se.customData.httpStatus);return 429===ge||500===ge||503===ge||504===ge}(Ct))throw Ct;const sn={throttleEndTimeMillis:Date.now()+(0,ve.$s)(st),backoffCount:st+1};return yield St.storage.setThrottleMetadata(sn),St.attemptFetch(ge,sn)}})()}}class Vn{constructor(ge,We,st,St,Ct){this.app=ge,this._client=We,this._storageCache=st,this._storage=St,this._logger=Ct,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fn(Se,ge){var We;const st=Se.target.error||void 0;return ht.create(ge,{originalErrorMessage:st&&(null===(We=st)||void 0===We?void 0:We.message)})}const er="app_namespace_store";class ar{constructor(ge,We,st,St=function cr(){return new Promise((Se,ge)=>{var We;try{const st=indexedDB.open("firebase_remote_config",1);st.onerror=St=>{ge(fn(St,"storage-open"))},st.onsuccess=St=>{Se(St.target.result)},st.onupgradeneeded=St=>{0===St.oldVersion&&St.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(st){ge(ht.create("storage-open",{originalErrorMessage:null===(We=st)||void 0===We?void 0:We.message}))}})}()){this.appId=ge,this.appName=We,this.namespace=st,this.openDbPromise=St}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(ge){return this.set("last_fetch_status",ge)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(ge){return this.set("last_successful_fetch_timestamp_millis",ge)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(ge){return this.set("last_successful_fetch_response",ge)}getActiveConfig(){return this.get("active_config")}setActiveConfig(ge){return this.set("active_config",ge)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(ge){return this.set("active_config_etag",ge)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(ge){return this.set("throttle_metadata",ge)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(ge){var We=this;return(0,Z.Z)(function*(){const st=yield We.openDbPromise;return new Promise((St,Ct)=>{var sn;const yr=st.transaction([er],"readonly").objectStore(er),Rn=We.createCompositeKey(ge);try{const kr=yr.get(Rn);kr.onerror=Zr=>{Ct(fn(Zr,"storage-get"))},kr.onsuccess=Zr=>{const bi=Zr.target.result;St(bi?bi.value:void 0)}}catch(kr){Ct(ht.create("storage-get",{originalErrorMessage:null===(sn=kr)||void 0===sn?void 0:sn.message}))}})})()}set(ge,We){var st=this;return(0,Z.Z)(function*(){const St=yield st.openDbPromise;return new Promise((Ct,sn)=>{var un;const Rn=St.transaction([er],"readwrite").objectStore(er),kr=st.createCompositeKey(ge);try{const Zr=Rn.put({compositeKey:kr,value:We});Zr.onerror=bi=>{sn(fn(bi,"storage-set"))},Zr.onsuccess=()=>{Ct()}}catch(Zr){sn(ht.create("storage-set",{originalErrorMessage:null===(un=Zr)||void 0===un?void 0:un.message}))}})})()}delete(ge){var We=this;return(0,Z.Z)(function*(){const st=yield We.openDbPromise;return new Promise((St,Ct)=>{var sn;const yr=st.transaction([er],"readwrite").objectStore(er),Rn=We.createCompositeKey(ge);try{const kr=yr.delete(Rn);kr.onerror=Zr=>{Ct(fn(Zr,"storage-delete"))},kr.onsuccess=()=>{St()}}catch(kr){Ct(ht.create("storage-delete",{originalErrorMessage:null===(sn=kr)||void 0===sn?void 0:sn.message}))}})})()}createCompositeKey(ge){return[this.appId,this.appName,this.namespace,ge].join()}}class Mr{constructor(ge){this.storage=ge}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var ge=this;return(0,Z.Z)(function*(){const We=ge.storage.getLastFetchStatus(),st=ge.storage.getLastSuccessfulFetchTimestampMillis(),St=ge.storage.getActiveConfig(),Ct=yield We;Ct&&(ge.lastFetchStatus=Ct);const sn=yield st;sn&&(ge.lastSuccessfulFetchTimestampMillis=sn);const un=yield St;un&&(ge.activeConfig=un)})()}setLastFetchStatus(ge){return this.lastFetchStatus=ge,this.storage.setLastFetchStatus(ge)}setLastSuccessfulFetchTimestampMillis(ge){return this.lastSuccessfulFetchTimestampMillis=ge,this.storage.setLastSuccessfulFetchTimestampMillis(ge)}setActiveConfig(ge){return this.activeConfig=ge,this.storage.setActiveConfig(ge)}}function mr(){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,Z.Z)(function*(){if(!(0,ve.hl)())return!1;try{return yield(0,ve.eu)()}catch{return!1}})).apply(this,arguments)}!function ln(){(0,R._registerComponent)(new Le.wA("remote-config",function Se(ge,{instanceIdentifier:We}){const st=ge.getProvider("app").getImmediate(),St=ge.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ht.create("registration-window");if(!(0,ve.hl)())throw ht.create("indexed-db-unavailable");const{projectId:Ct,apiKey:sn,appId:un}=st.options;if(!Ct)throw ht.create("registration-project-id");if(!sn)throw ht.create("registration-api-key");if(!un)throw ht.create("registration-app-id");const yr=new ar(un,st.name,We=We||"firebase"),Rn=new Mr(yr),kr=new je.Yd(Ye);kr.logLevel=je.in.ERROR;const Zr=new An(St,R.SDK_VERSION,We,Ct,sn,un),bi=new Gn(Zr,yr),yi=new Yt(bi,yr,Rn,kr),jn=new Vn(st,yi,Rn,yr,kr);return function ct(Se){const ge=(0,ve.m9)(Se);ge._initializePromise||(ge._initializePromise=ge._storageCache.loadFromStorage().then(()=>{ge._isInitializationComplete=!0}))}(jn),jn},"PUBLIC").setMultipleInstances(!0)),(0,R.registerVersion)(Ye,"0.3.11"),(0,R.registerVersion)(Ye,"0.3.11","esm2017")}();var dr=j(2375);const Yn="analytics",Zn="firebase_id",Er="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tt="https://www.googletagmanager.com/gtag/js",me=new je.Yd("@firebase/analytics");function _e(Se){return Promise.all(Se.map(ge=>ge.catch(We=>We)))}function ft(Se,ge){const We=document.createElement("script");We.src=`${tt}?l=${Se}&id=${ge}`,We.async=!0,document.head.appendChild(We)}function nn(Se,ge,We,st,St,Ct){return vn.apply(this,arguments)}function vn(){return(vn=(0,Z.Z)(function*(Se,ge,We,st,St,Ct){const sn=st[St];try{if(sn)yield ge[sn];else{const yr=(yield _e(We)).find(Rn=>Rn.measurementId===St);yr&&(yield ge[yr.appId])}}catch(un){me.error(un)}Se("config",St,Ct)})).apply(this,arguments)}function Hn(Se,ge,We,st,St){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,Z.Z)(function*(Se,ge,We,st,St){try{let Ct=[];if(St&&St.send_to){let sn=St.send_to;Array.isArray(sn)||(sn=[sn]);const un=yield _e(We);for(const yr of sn){const Rn=un.find(Zr=>Zr.measurementId===yr),kr=Rn&&ge[Rn.appId];if(!kr){Ct=[];break}Ct.push(kr)}}0===Ct.length&&(Ct=Object.values(ge)),yield Promise.all(Ct),Se("event",st,St||{})}catch(Ct){me.error(Ct)}})).apply(this,arguments)}function Rr(){const Se=window.document.getElementsByTagName("script");for(const ge of Object.values(Se))if(ge.src&&ge.src.includes(tt))return ge;return null}const De=new ve.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ie=new class be{constructor(ge={},We=1e3){this.throttleMetadata=ge,this.intervalMillis=We}getThrottleMetadata(ge){return this.throttleMetadata[ge]}setThrottleMetadata(ge,We){this.throttleMetadata[ge]=We}deleteThrottleMetadata(ge){delete this.throttleMetadata[ge]}};function yt(Se){return new Headers({Accept:"application/json","x-goog-api-key":Se})}function kt(Se){return yn.apply(this,arguments)}function yn(){return(yn=(0,Z.Z)(function*(Se){var ge;const{appId:We,apiKey:st}=Se,St={method:"GET",headers:yt(st)},Ct=Er.replace("{app-id}",We),sn=yield fetch(Ct,St);if(200!==sn.status&&304!==sn.status){let un="";try{const yr=yield sn.json();null!==(ge=yr.error)&&void 0!==ge&&ge.message&&(un=yr.error.message)}catch{}throw De.create("config-fetch-failed",{httpStatus:sn.status,responseMessage:un})}return sn.json()})).apply(this,arguments)}function rr(Se){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,Z.Z)(function*(Se,ge=Ie,We){const{appId:st,apiKey:St,measurementId:Ct}=Se.options;if(!st)throw De.create("no-app-id");if(!St){if(Ct)return{measurementId:Ct,appId:st};throw De.create("no-api-key")}const sn=ge.getThrottleMetadata(st)||{backoffCount:0,throttleEndTimeMillis:Date.now()},un=new vt;return setTimeout((0,Z.Z)(function*(){un.abort()}),void 0!==We?We:6e4),Ir({appId:st,apiKey:St,measurementId:Ct},sn,un,ge)})).apply(this,arguments)}function Ir(Se,ge,We){return Je.apply(this,arguments)}function Je(){return(Je=(0,Z.Z)(function*(Se,{throttleEndTimeMillis:ge,backoffCount:We},st,St=Ie){var Ct,sn;const{appId:un,measurementId:yr}=Se;try{yield Ae(st,ge)}catch(Rn){if(yr)return me.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yr} provided in the "measurementId" field in the local Firebase config. [${null===(Ct=Rn)||void 0===Ct?void 0:Ct.message}]`),{appId:un,measurementId:yr};throw Rn}try{const Rn=yield kt(Se);return St.deleteThrottleMetadata(un),Rn}catch(Rn){const kr=Rn;if(!Fe(kr)){if(St.deleteThrottleMetadata(un),yr)return me.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yr} provided in the "measurementId" field in the local Firebase config. [${kr?.message}]`),{appId:un,measurementId:yr};throw Rn}const Zr=503===Number(null===(sn=kr?.customData)||void 0===sn?void 0:sn.httpStatus)?(0,ve.$s)(We,St.intervalMillis,30):(0,ve.$s)(We,St.intervalMillis),bi={throttleEndTimeMillis:Date.now()+Zr,backoffCount:We+1};return St.setThrottleMetadata(un,bi),me.debug(`Calling attemptFetch again in ${Zr} millis`),Ir(Se,bi,st,St)}})).apply(this,arguments)}function Ae(Se,ge){return new Promise((We,st)=>{const St=Math.max(ge-Date.now(),0),Ct=setTimeout(We,St);Se.addEventListener(()=>{clearTimeout(Ct),st(De.create("fetch-throttle",{throttleEndTimeMillis:ge}))})})}function Fe(Se){if(!(Se instanceof ve.ZR&&Se.customData))return!1;const ge=Number(Se.customData.httpStatus);return 429===ge||500===ge||503===ge||504===ge}class vt{constructor(){this.listeners=[]}addEventListener(ge){this.listeners.push(ge)}abort(){this.listeners.forEach(ge=>ge())}}let Bt,G;function bn(){return(bn=(0,Z.Z)(function*(Se,ge,We,st,St){if(St&&St.global)Se("event",We,st);else{const Ct=yield ge;Se("event",We,Object.assign(Object.assign({},st),{send_to:Ct}))}})).apply(this,arguments)}function te(Se){G=Se}function Te(Se){Bt=Se}function oe(){return ze.apply(this,arguments)}function ze(){return(ze=(0,Z.Z)(function*(){var Se;if(!(0,ve.hl)())return me.warn(De.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ve.eu)()}catch(ge){return me.warn(De.create("indexeddb-unavailable",{errorInfo:null===(Se=ge)||void 0===Se?void 0:Se.toString()}).message),!1}return!0})).apply(this,arguments)}function Zt(){return(Zt=(0,Z.Z)(function*(Se,ge,We,st,St,Ct,sn){var un;const yr=rr(Se);yr.then(yi=>{We[yi.measurementId]=yi.appId,Se.options.measurementId&&yi.measurementId!==Se.options.measurementId&&me.warn(`The measurement ID in the local Firebase config (${Se.options.measurementId}) does not match the measurement ID fetched from the server (${yi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yi=>me.error(yi)),ge.push(yr);const Rn=oe().then(yi=>{if(yi)return st.getId()}),[kr,Zr]=yield Promise.all([yr,Rn]);Rr()||ft(Ct,kr.measurementId),G&&(St("consent","default",G),te(void 0)),St("js",new Date);const bi=null!==(un=sn?.config)&&void 0!==un?un:{};return bi.origin="firebase",bi.update=!0,null!=Zr&&(bi[Zn]=Zr),St("config",kr.measurementId,bi),Bt&&(St("set",Bt),Te(void 0)),kr.measurementId})).apply(this,arguments)}class Tn{constructor(ge){this.app=ge}_delete(){return delete Un[this.app.options.appId],Promise.resolve()}}let Un={},hn=[];const wr={};let ir,mi,zr="dataLayer",qr=!1;function kn(Se,ge,We){!function or(){const Se=[];if((0,ve.ru)()&&Se.push("This is a browser extension environment."),(0,ve.zI)()||Se.push("Cookies are not available."),Se.length>0){const ge=Se.map((st,St)=>`(${St+1}) ${st}`).join(" "),We=De.create("invalid-analytics-context",{errorInfo:ge});me.warn(We.message)}}();const st=Se.options.appId;if(!st)throw De.create("no-app-id");if(!Se.options.apiKey){if(!Se.options.measurementId)throw De.create("no-api-key");me.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Se.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Un[st])throw De.create("already-exists",{id:st});if(!qr){!function gt(Se){let ge=[];Array.isArray(window[Se])?ge=window[Se]:window[Se]=ge}(zr);const{wrappedGtag:Ct,gtagCore:sn}=function En(Se,ge,We,st,St){let Ct=function(...sn){window[st].push(arguments)};return window[St]&&"function"==typeof window[St]&&(Ct=window[St]),window[St]=function tr(Se,ge,We,st){function Ct(){return(Ct=(0,Z.Z)(function*(sn,un,yr){try{"event"===sn?yield Hn(Se,ge,We,un,yr):"config"===sn?yield nn(Se,ge,We,st,un,yr):"consent"===sn?Se("consent","update",yr):Se("set",un)}catch(Rn){me.error(Rn)}})).apply(this,arguments)}return function St(sn,un,yr){return Ct.apply(this,arguments)}}(Ct,Se,ge,We),{gtagCore:Ct,wrappedGtag:window[St]}}(Un,hn,wr,zr,"gtag");mi=Ct,ir=sn,qr=!0}return Un[st]=function ut(Se,ge,We,st,St,Ct,sn){return Zt.apply(this,arguments)}(Se,hn,wr,ge,ir,zr,We),new Tn(Se)}function nt(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,Z.Z)(function*(){if((0,ve.ru)()||!(0,ve.zI)()||!(0,ve.hl)())return!1;try{return yield(0,ve.eu)()}catch{return!1}})).apply(this,arguments)}const wi="@firebase/analytics";!function Zi(){(0,R._registerComponent)(new Le.wA(Yn,(ge,{options:We})=>kn(ge.getProvider("app").getImmediate(),ge.getProvider("installations-internal").getImmediate(),We),"PUBLIC")),(0,R._registerComponent)(new Le.wA("analytics-internal",function Se(ge){try{const We=ge.getProvider(Yn).getImmediate();return{logEvent:(st,St,Ct)=>function Or(Se,ge,We,st){Se=(0,ve.m9)(Se),function _n(Se,ge,We,st,St){return bn.apply(this,arguments)}(mi,Un[Se.app.options.appId],ge,We,st).catch(St=>me.error(St))}(We,st,St,Ct)}}catch(We){throw De.create("interop-component-reg-failed",{reason:We})}},"PRIVATE")),(0,R.registerVersion)(wi,"0.8.0"),(0,R.registerVersion)(wi,"0.8.0","esm2017")}();var Qs=j(4408),No=j(7565);const ba=new class Ss extends No.v{}(class Ki extends Qs.o{constructor(ge,We){super(ge,We),this.scheduler=ge,this.work=We}schedule(ge,We=0){return We>0?super.schedule(ge,We):(this.delay=We,this.state=ge,this.scheduler.flush(this),this)}execute(ge,We){return We>0||this.closed?super.execute(ge,We):this._execute(ge,We)}requestAsyncId(ge,We,st=0){return null!=st&&st>0||null==st&&this.delay>0?super.requestAsyncId(ge,We,st):ge.flush(this)}});var Ta=j(4986),yo=j(9751),ca=j(8505),Vs=j(9468),Po=j(5363);const Bs=new C.GfV("7.4.1"),gr="__angularfire_symbol__analyticsIsSupportedValue",is="__angularfire_symbol__analyticsIsSupported",js="__angularfire_symbol__remoteConfigIsSupportedValue",vo="__angularfire_symbol__remoteConfigIsSupported",Jr="__angularfire_symbol__messagingIsSupportedValue",Vi="__angularfire_symbol__messagingIsSupported";globalThis[is]||(globalThis[is]=nt().then(Se=>globalThis[gr]=Se).catch(()=>globalThis[gr]=!1)),globalThis[Vi]||(globalThis[Vi]=(0,dr.Gb)().then(Se=>globalThis[Jr]=Se).catch(()=>globalThis[Jr]=!1)),globalThis[vo]||(globalThis[vo]=mr().then(Se=>globalThis[js]=Se).catch(()=>globalThis[js]=!1));const Si={async:()=>globalThis[Vi],sync:()=>{const Se=globalThis[Jr];if(void 0===Se)throw new Error((Se=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Se} in the constructor, first ensure that ${Se} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Se})\`.`)("Messaging"));return Se}};function oo(Se,ge,We){if(ge){if(1===ge.length)return ge[0];const Ct=ge.filter(sn=>sn.app===We);if(1===Ct.length)return Ct[0]}return We.container.getProvider(Se).getImmediate({optional:!0})}const $s=(Se,ge)=>{const We=ge?[ge]:(0,p.C6)(),st=[];return We.forEach(St=>{St.container.getProvider(Se).instances.forEach(sn=>{st.includes(sn)||st.push(sn)})}),st};function Yi(){}class Hs{constructor(ge,We=ba){this.zone=ge,this.delegate=We}now(){return this.delegate.now()}schedule(ge,We,st){const St=this.zone;return this.delegate.schedule(function(sn){St.runGuarded(()=>{ge.apply(this,[sn])})},We,st)}}class Ws{constructor(ge){this.zone=ge,this.task=null}call(ge,We){const st=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yi,{},Yi,Yi)),We.pipe((0,ca.b)({next:st,complete:st,error:st})).subscribe(ge).add(st)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Go=(()=>{class Se{constructor(We){this.ngZone=We,this.outsideAngular=We.runOutsideAngular(()=>new Hs(Zone.current)),this.insideAngular=We.run(()=>new Hs(Zone.current,Ta.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Se.\u0275fac=function(We){return new(We||Se)(C.LFG(C.R0b))},Se.\u0275prov=C.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function xi(){const Se=globalThis.\u0275AngularFireScheduler;if(!Se)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Se}function Oo(Se){return xi().ngZone.runOutsideAngular(()=>Se())}function Ci(Se){return xi().ngZone.run(()=>Se())}function ko(Se){return xi(),function ei(Se){return function(We){return(We=We.lift(new Ws(Se.ngZone))).pipe((0,Vs.R)(Se.outsideAngular),(0,Po.Q)(Se.insideAngular))}}(xi())(Se)}const Da=(Se,ge)=>function(){const st=arguments;return ge&&setTimeout(()=>{"scheduled"===ge.state&&ge.invoke()},10),Ci(()=>Se.apply(void 0,st))},Hr=(Se,ge)=>function(){let We;const st=arguments;for(let Ct=0;Ct<arguments.length;Ct++)"function"==typeof st[Ct]&&(ge&&(We||(We=Ci(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yi,{},Yi,Yi)))),st[Ct]=Da(st[Ct],We));const St=Oo(()=>Se.apply(this,st));if(!ge){if(St instanceof yo.y){const Ct=xi();return St.pipe((0,Vs.R)(Ct.outsideAngular),(0,Po.Q)(Ct.insideAngular))}return Ci(()=>St)}return St instanceof yo.y?St.pipe(ko):St instanceof Promise?Ci(()=>new Promise((Ct,sn)=>St.then(un=>Ci(()=>Ct(un)),un=>Ci(()=>sn(un))))):"function"==typeof St&&We?function(){return setTimeout(()=>{We&&"scheduled"===We.state&&We.invoke()},10),St.apply(this,arguments)}:Ci(()=>St)}},7143:(an,ot,j)=>{j.d(ot,{$:()=>Bi,A:()=>he,B:()=>ht,G:()=>ze,H:()=>hn,J:()=>Ss,L:()=>rr,M:()=>Di,N:()=>oo,P:()=>Xo,Q:()=>$s,R:()=>os,T:()=>Yi,U:()=>Sr,V:()=>xi,W:()=>Oo,X:()=>ei,Y:()=>bi,Z:()=>jn,_:()=>ws,a:()=>Qo,a0:()=>zo,a1:()=>Wi,a2:()=>ao,a3:()=>Sa,a4:()=>Aa,a5:()=>hu,a6:()=>Li,a7:()=>Gs,a8:()=>Ma,a9:()=>Cs,aA:()=>vu,aB:()=>To,aC:()=>nu,aD:()=>tu,aE:()=>Te,aI:()=>Yu,aL:()=>Ws,aa:()=>Ku,ab:()=>da,ac:()=>Ya,af:()=>Co,ag:()=>Pa,ah:()=>F,ak:()=>We,al:()=>Kr,an:()=>qt,ao:()=>Ru,ap:()=>de,aq:()=>Ze,ar:()=>pe,as:()=>_n,at:()=>$t,au:()=>ho,av:()=>Eu,aw:()=>Me,ax:()=>ee,ay:()=>Ue,az:()=>Qn,b:()=>fa,c:()=>k,d:()=>Re,e:()=>Y,f:()=>gs,g:()=>Vc,h:()=>$l,i:()=>fu,j:()=>yu,k:()=>Bu,l:()=>Ba,m:()=>Wa,n:()=>na,o:()=>we,r:()=>Ns,s:()=>hs,u:()=>Fu});var C=j(5861),p=j(2090),Z=j(9681),R=j(655),ve=j(1877),Le=j(4859);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},he={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ht=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ft=new p.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new ve.Yd("@firebase/auth");function Vt(A,...m){et.logLevel<=ve.in.ERROR&&et.error(`Auth (${Z.SDK_VERSION}): ${A}`,...m)}function $t(A,...m){throw ct(A,...m)}function Me(A,...m){return ct(A,...m)}function lt(A,m,w){const N=Object.assign(Object.assign({},at()),{[m]:w});return new p.LL("auth","Firebase",N).create(m,{appName:A.name})}function Ge(A,m,w){if(!(m instanceof w))throw w.name!==m.constructor.name&&$t(A,"argument-error"),lt(A,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ct(A,...m){if("string"!=typeof A){const w=m[0],N=[...m.slice(1)];return N[0]&&(N[0].appName=A.name),A._errorFactory.create(w,...N)}return Ft.create(A,...m)}function ee(A,m,...w){if(!A)throw ct(m,...w)}function ie(A){const m="INTERNAL ASSERTION FAILED: "+A;throw Vt(m),new Error(m)}function Ze(A,m){A||ie(m)}const Ne=new Map;function Ue(A){Ze(A instanceof Function,"Expected a class definition");let m=Ne.get(A);return m?(Ze(m instanceof A,"Instance stored in cache mismatched with class"),m):(m=new A,Ne.set(A,m),m)}function Rt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function bt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class Mt{constructor(m,w){this.shortDelay=m,this.longDelay=w,Ze(w>m,"Short delay should be less than long delay!"),this.isMobile=(0,p.uI)()||(0,p.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,p.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tn(A,m){Ze(A.emulator,"Emulator should always be set here");const{url:w}=A.emulator;return m?`${w}${m.startsWith("/")?m.slice(1):m}`:w}class Gn{static initialize(m,w,N){this.fetchImpl=m,w&&(this.headersImpl=w),N&&(this.responseImpl=N)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const On={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kn=new Mt(3e4,6e4);function Vn(A,m){return A.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:A.tenantId}):m}function fn(A,m,w,N){return er.apply(this,arguments)}function er(){return(er=(0,C.Z)(function*(A,m,w,N,K={}){return hr(A,K,(0,C.Z)(function*(){let ue={},rt={};N&&("GET"===m?rt=N:ue={body:JSON.stringify(N)});const Lt=(0,p.xO)(Object.assign({key:A.config.apiKey},rt)).slice(1),gn=yield A._getAdditionalHeaders();return gn["Content-Type"]="application/json",A.languageCode&&(gn["X-Firebase-Locale"]=A.languageCode),Gn.fetch()(Mr(A,A.config.apiHost,w,Lt),Object.assign({method:m,headers:gn,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function hr(A,m,w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,C.Z)(function*(A,m,w){A._canInitEmulator=!1;const N=Object.assign(Object.assign({},On),m);try{const K=new ln(A),ue=yield Promise.race([w(),K.promise]);K.clearNetworkTimeout();const rt=yield ue.json();if("needConfirmation"in rt)throw qn(A,"account-exists-with-different-credential",rt);if(ue.ok&&!("errorMessage"in rt))return rt;{const Lt=ue.ok?rt.errorMessage:rt.error.message,[gn,Fn]=Lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gn)throw qn(A,"credential-already-in-use",rt);if("EMAIL_EXISTS"===gn)throw qn(A,"email-already-in-use",rt);if("USER_DISABLED"===gn)throw qn(A,"user-disabled",rt);const vr=N[gn]||gn.toLowerCase().replace(/[_\s]+/g,"-");if(Fn)throw lt(A,vr,Fn);$t(A,vr)}}catch(K){if(K instanceof p.ZR)throw K;$t(A,"network-request-failed")}})).apply(this,arguments)}function cr(A,m,w,N){return ar.apply(this,arguments)}function ar(){return(ar=(0,C.Z)(function*(A,m,w,N,K={}){const ue=yield fn(A,m,w,N,K);return"mfaPendingCredential"in ue&&$t(A,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function Mr(A,m,w,N){const K=`${m}${w}?${N}`;return A.config.emulator?tn(A.config,K):`${A.config.apiScheme}://${K}`}class ln{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((w,N)=>{this.timer=setTimeout(()=>N(Me(this.auth,"network-request-failed")),Kn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(A,m,w){const N={appName:A.name};w.email&&(N.email=w.email),w.phoneNumber&&(N.phoneNumber=w.phoneNumber);const K=Me(A,m,N);return K.customData._tokenResponse=w,K}function mr(){return(mr=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Xt(A,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Yn(A,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function fr(A){if(A)try{const m=new Date(Number(A));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function tt(){return(tt=(0,C.Z)(function*(A,m=!1){const w=(0,p.m9)(A),N=yield w.getIdToken(m),K=_e(N);ee(K&&K.exp&&K.auth_time&&K.iat,w.auth,"internal-error");const ue="object"==typeof K.firebase?K.firebase:void 0,rt=ue?.sign_in_provider;return{claims:K,token:N,authTime:fr(me(K.auth_time)),issuedAtTime:fr(me(K.iat)),expirationTime:fr(me(K.exp)),signInProvider:rt||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function me(A){return 1e3*Number(A)}function _e(A){var m;const[w,N,K]=A.split(".");if(void 0===w||void 0===N||void 0===K)return Vt("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,p.tV)(N);return ue?JSON.parse(ue):(Vt("Failed to decode base64 JWT payload"),null)}catch(ue){return Vt("Caught error parsing JWT payload as JSON",null===(m=ue)||void 0===m?void 0:m.toString()),null}}function gt(A,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,C.Z)(function*(A,m,w=!1){if(w)return m;try{return yield m}catch(N){throw N instanceof p.ZR&&vn(N)&&A.auth.currentUser===A&&(yield A.auth.signOut()),N}})).apply(this,arguments)}function vn({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}class Hn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var w;if(m){const N=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),N}{this.errorBackoff=3e4;const K=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(m=!1){var w=this;if(!this.isRunning)return;const N=this.getInterval(m);this.timerId=setTimeout((0,C.Z)(function*(){yield w.iteration()}),N)}iteration(){var m=this;return(0,C.Z)(function*(){var w;try{yield m.user.getIdToken(!0)}catch(N){return void("auth/network-request-failed"===(null===(w=N)||void 0===w?void 0:w.code)&&m.schedule(!0))}m.schedule()})()}}class Ht{constructor(m,w){this.createdAt=m,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tr(A){return En.apply(this,arguments)}function En(){return(En=(0,C.Z)(function*(A){var m;const w=A.auth,N=yield A.getIdToken(),K=yield gt(A,Yn(w,{idToken:N}));ee(K?.users.length,w,"internal-error");const ue=K.users[0];A._notifyReloadListener(ue);const rt=null!==(m=ue.providerUserInfo)&&void 0!==m&&m.length?le(ue.providerUserInfo):[],Lt=De(A.providerData,rt),vr=!!A.isAnonymous&&!(A.email&&ue.passwordHash||Lt?.length),vi={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:Lt,metadata:new Ht(ue.createdAt,ue.lastLoginAt),isAnonymous:vr};Object.assign(A,vi)})).apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(A){const m=(0,p.m9)(A);yield tr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function De(A,m){return[...A.filter(N=>!m.some(K=>K.providerId===N.providerId)),...m]}function le(A){return A.map(m=>{var{providerId:w}=m,N=(0,R._T)(m,["providerId"]);return{providerId:w,uid:N.rawId||"",displayName:N.displayName||null,email:N.email||null,phoneNumber:N.phoneNumber||null,photoURL:N.photoUrl||null}})}function be(){return(be=(0,C.Z)(function*(A,m){const w=yield hr(A,{},(0,C.Z)(function*(){const N=(0,p.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:K,apiKey:ue}=A.config,rt=Mr(A,K,"/v1/token",`key=${ue}`),Lt=yield A._getAdditionalHeaders();return Lt["Content-Type"]="application/x-www-form-urlencoded",Gn.fetch()(rt,{method:"POST",headers:Lt,body:N})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class Ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ee(m.idToken,"internal-error"),ee(typeof m.idToken<"u","internal-error"),ee(typeof m.refreshToken<"u","internal-error");const w="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function ft(A){const m=_e(A);return ee(m,"internal-error"),ee(typeof m.exp<"u","internal-error"),ee(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,w)}getToken(m,w=!1){var N=this;return(0,C.Z)(function*(){return ee(!N.accessToken||N.refreshToken,m,"user-token-expired"),w||!N.accessToken||N.isExpired?N.refreshToken?(yield N.refresh(m,N.refreshToken),N.accessToken):null:N.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,w){var N=this;return(0,C.Z)(function*(){const{accessToken:K,refreshToken:ue,expiresIn:rt}=yield function ce(A,m){return be.apply(this,arguments)}(m,w);N.updateTokensAndExpiration(K,ue,Number(rt))})()}updateTokensAndExpiration(m,w,N){this.refreshToken=w||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*N}static fromJSON(m,w){const{refreshToken:N,accessToken:K,expirationTime:ue}=w,rt=new Ie;return N&&(ee("string"==typeof N,"internal-error",{appName:m}),rt.refreshToken=N),K&&(ee("string"==typeof K,"internal-error",{appName:m}),rt.accessToken=K),ue&&(ee("number"==typeof ue,"internal-error",{appName:m}),rt.expirationTime=ue),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Ie,this.toJSON())}_performRefresh(){return ie("not implemented")}}function yt(A,m){ee("string"==typeof A||typeof A>"u","internal-error",{appName:m})}class kt{constructor(m){var{uid:w,auth:N,stsTokenManager:K}=m,ue=(0,R._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=N,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Ht(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(m){var w=this;return(0,C.Z)(function*(){const N=yield gt(w,w.stsTokenManager.getToken(w.auth,m));return ee(N,w.auth,"internal-error"),w.accessToken!==N&&(w.accessToken=N,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),N})()}getIdTokenResult(m){return function Er(A){return tt.apply(this,arguments)}(this,m)}reload(){return function Rr(A){return xn.apply(this,arguments)}(this)}_assign(m){this!==m&&(ee(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(w=>Object.assign({},w)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new kt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,w=!1){var N=this;return(0,C.Z)(function*(){let K=!1;m.idToken&&m.idToken!==N.stsTokenManager.accessToken&&(N.stsTokenManager.updateFromServerResponse(m),K=!0),w&&(yield tr(N)),yield N.auth._persistUserIfCurrent(N),K&&N.auth._notifyListenersIfCurrent(N)})()}delete(){var m=this;return(0,C.Z)(function*(){const w=yield m.getIdToken();return yield gt(m,function Pr(A,m){return mr.apply(this,arguments)}(m.auth,{idToken:w})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,w){var N,K,ue,rt,Lt,gn,Fn,vr;const vi=null!==(N=w.displayName)&&void 0!==N?N:void 0,Bo=null!==(K=w.email)&&void 0!==K?K:void 0,Yr=null!==(ue=w.phoneNumber)&&void 0!==ue?ue:void 0,Ur=null!==(rt=w.photoURL)&&void 0!==rt?rt:void 0,ol=null!==(Lt=w.tenantId)&&void 0!==Lt?Lt:void 0,Ga=null!==(gn=w._redirectEventId)&&void 0!==gn?gn:void 0,ra=null!==(Fn=w.createdAt)&&void 0!==Fn?Fn:void 0,al=null!==(vr=w.lastLoginAt)&&void 0!==vr?vr:void 0,{uid:Ts,emailVerified:yc,isAnonymous:iu,providerData:ul,stsTokenManager:Xi}=w;ee(Ts&&Xi,m,"internal-error");const Sl=Ie.fromJSON(this.name,Xi);ee("string"==typeof Ts,m,"internal-error"),yt(vi,m.name),yt(Bo,m.name),ee("boolean"==typeof yc,m,"internal-error"),ee("boolean"==typeof iu,m,"internal-error"),yt(Yr,m.name),yt(Ur,m.name),yt(ol,m.name),yt(Ga,m.name),yt(ra,m.name),yt(al,m.name);const ms=new kt({uid:Ts,auth:m,email:Bo,emailVerified:yc,displayName:vi,isAnonymous:iu,photoURL:Ur,phoneNumber:Yr,tenantId:ol,stsTokenManager:Sl,createdAt:ra,lastLoginAt:al});return ul&&Array.isArray(ul)&&(ms.providerData=ul.map(ll=>Object.assign({},ll))),Ga&&(ms._redirectEventId=Ga),ms}static _fromIdTokenResponse(m,w,N=!1){return(0,C.Z)(function*(){const K=new Ie;K.updateFromServerResponse(w);const ue=new kt({uid:w.localId,auth:m,stsTokenManager:K,isAnonymous:N});return yield tr(ue),ue})()}}const rr=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(w,N){var K=this;return(0,C.Z)(function*(){K.storage[w]=N})()}_get(w){var N=this;return(0,C.Z)(function*(){const K=N.storage[w];return void 0===K?null:K})()}_remove(w){var N=this;return(0,C.Z)(function*(){delete N.storage[w]})()}_addListener(w,N){}_removeListener(w,N){}}return A.type="NONE",A})();function Qn(A,m,w){return`firebase:${A}:${m}:${w}`}class Ir{constructor(m,w,N){this.persistence=m,this.auth=w,this.userKey=N;const{config:K,name:ue}=this.auth;this.fullUserKey=Qn(this.userKey,K.apiKey,ue),this.fullPersistenceKey=Qn("persistence",K.apiKey,ue),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,C.Z)(function*(){const w=yield m.persistence._get(m.fullUserKey);return w?kt._fromJSON(m.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var w=this;return(0,C.Z)(function*(){if(w.persistence===m)return;const N=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=m,N?w.setCurrentUser(N):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,w,N="authUser"){return(0,C.Z)(function*(){if(!w.length)return new Ir(Ue(rr),m,N);const K=(yield Promise.all(w.map(function(){var Fn=(0,C.Z)(function*(vr){if(yield vr._isAvailable())return vr});return function(vr){return Fn.apply(this,arguments)}}()))).filter(Fn=>Fn);let ue=K[0]||Ue(rr);const rt=Qn(N,m.config.apiKey,m.name);let Lt=null;for(const Fn of w)try{const vr=yield Fn._get(rt);if(vr){const vi=kt._fromJSON(m,vr);Fn!==ue&&(Lt=vi),ue=Fn;break}}catch{}const gn=K.filter(Fn=>Fn._shouldAllowMigration);return ue._shouldAllowMigration&&gn.length?(ue=gn[0],Lt&&(yield ue._set(rt,Lt.toJSON())),yield Promise.all(w.map(function(){var Fn=(0,C.Z)(function*(vr){if(vr!==ue)try{yield vr._remove(rt)}catch{}});return function(vr){return Fn.apply(this,arguments)}}())),new Ir(ue,m,N)):new Ir(ue,m,N)})()}}function Je(A){const m=A.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Bt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Ae(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(bn(m))return"Blackberry";if(Ee(m))return"Webos";if(Fe(m))return"Safari";if((m.includes("chrome/")||vt(m))&&!m.includes("edge/"))return"Chrome";if(_n(m))return"Android";{const N=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===N?.length)return N[1]}return"Other"}function Ae(A=(0,p.z$)()){return/firefox\//i.test(A)}function Fe(A=(0,p.z$)()){const m=A.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function vt(A=(0,p.z$)()){return/crios\//i.test(A)}function Bt(A=(0,p.z$)()){return/iemobile/i.test(A)}function _n(A=(0,p.z$)()){return/android/i.test(A)}function bn(A=(0,p.z$)()){return/blackberry/i.test(A)}function Ee(A=(0,p.z$)()){return/webos/i.test(A)}function pe(A=(0,p.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function de(A=(0,p.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function Jt(A=(0,p.z$)()){return pe(A)||_n(A)||Ee(A)||bn(A)||/windows phone/i.test(A)||Bt(A)}function se(A,m=[]){let w;switch(A){case"Browser":w=Je((0,p.z$)());break;case"Worker":w=`${Je((0,p.z$)())}-${A}`;break;default:w=A}const N=m.length?m.join(","):"FirebaseCore-web";return`${w}/JsCore/${Z.SDK_VERSION}/${N}`}class G{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,w){const N=ue=>new Promise((rt,Lt)=>{try{rt(m(ue))}catch(gn){Lt(gn)}});N.onAbort=w,this.queue.push(N);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(m){var w=this;return(0,C.Z)(function*(){var N;if(w.auth.currentUser===m)return;const K=[];try{for(const ue of w.queue)yield ue(m),ue.onAbort&&K.push(ue.onAbort)}catch(ue){K.reverse();for(const rt of K)try{rt()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:null===(N=ue)||void 0===N?void 0:N.message})}})()}}class te{constructor(m,w,N){this.app=m,this.heartbeatServiceProvider=w,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oe(this),this.idTokenSubscription=new oe(this),this.beforeStateQueue=new G(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ft,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(m,w){var N=this;return w&&(this._popupRedirectResolver=Ue(w)),this._initializationPromise=this.queue((0,C.Z)(function*(){var K,ue;if(!N._deleted&&(N.persistenceManager=yield Ir.create(N,m),!N._deleted)){if(null!==(K=N._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield N._popupRedirectResolver._initialize(N)}catch{}yield N.initializeCurrentUser(w),N.lastNotifiedUid=(null===(ue=N.currentUser)||void 0===ue?void 0:ue.uid)||null,!N._deleted&&(N._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,C.Z)(function*(){if(m._deleted)return;const w=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||w){if(m.currentUser&&w&&m.currentUser.uid===w.uid)return m._currentUser._assign(w),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(w,!0)}})()}initializeCurrentUser(m){var w=this;return(0,C.Z)(function*(){var N;const K=yield w.assertedPersistence.getCurrentUser();let ue=K,rt=!1;if(m&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const Lt=null===(N=w.redirectUser)||void 0===N?void 0:N._redirectEventId,gn=ue?._redirectEventId,Fn=yield w.tryRedirectSignIn(m);(!Lt||Lt===gn)&&Fn?.user&&(ue=Fn.user,rt=!0)}if(!ue)return w.directlySetCurrentUser(null);if(!ue._redirectEventId){if(rt)try{yield w.beforeStateQueue.runMiddleware(ue)}catch(Lt){ue=K,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(Lt))}return ue?w.reloadAndSetCurrentUserOrClear(ue):w.directlySetCurrentUser(null)}return ee(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===ue._redirectEventId?w.directlySetCurrentUser(ue):w.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(m){var w=this;return(0,C.Z)(function*(){let N=null;try{N=yield w._popupRedirectResolver._completeRedirectFn(w,m,!0)}catch{yield w._setRedirectUser(null)}return N})()}reloadAndSetCurrentUserOrClear(m){var w=this;return(0,C.Z)(function*(){var N;try{yield tr(m)}catch(K){if("auth/network-request-failed"!==(null===(N=K)||void 0===N?void 0:N.code))return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function An(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var m=this;return(0,C.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var w=this;return(0,C.Z)(function*(){const N=m?(0,p.m9)(m):null;return N&&ee(N.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(N&&N._clone(w))})()}_updateCurrentUser(m,w=!1){var N=this;return(0,C.Z)(function*(){if(!N._deleted)return m&&ee(N.tenantId===m.tenantId,N,"tenant-id-mismatch"),w||(yield N.beforeStateQueue.runMiddleware(m)),N.queue((0,C.Z)(function*(){yield N.directlySetCurrentUser(m),N.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,C.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var w=this;return this.queue((0,C.Z)(function*(){yield w.assertedPersistence.setPersistence(Ue(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new p.LL("auth","Firebase",m())}onAuthStateChanged(m,w,N){return this.registerStateListener(this.authStateSubscription,m,w,N)}beforeAuthStateChanged(m,w){return this.beforeStateQueue.pushCallback(m,w)}onIdTokenChanged(m,w,N){return this.registerStateListener(this.idTokenSubscription,m,w,N)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,w){var N=this;return(0,C.Z)(function*(){const K=yield N.getOrInitRedirectPersistenceManager(w);return null===m?K.removeCurrentUser():K.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var w=this;return(0,C.Z)(function*(){if(!w.redirectPersistenceManager){const N=m&&Ue(m)||w._popupRedirectResolver;ee(N,w,"argument-error"),w.redirectPersistenceManager=yield Ir.create(w,[Ue(N._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(m){var w=this;return(0,C.Z)(function*(){var N,K;return w._isInitialized&&(yield w.queue((0,C.Z)(function*(){}))),(null===(N=w._currentUser)||void 0===N?void 0:N._redirectEventId)===m?w._currentUser:(null===(K=w.redirectUser)||void 0===K?void 0:K._redirectEventId)===m?w.redirectUser:null})()}_persistUserIfCurrent(m){var w=this;return(0,C.Z)(function*(){if(m===w.currentUser)return w.queue((0,C.Z)(function*(){return w.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const N=null!==(w=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==N&&(this.lastNotifiedUid=N,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,w,N,K){if(this._deleted)return()=>{};const ue="function"==typeof w?w:w.next.bind(w),rt=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(rt,this,"internal-error"),rt.then(()=>ue(this.currentUser)),"function"==typeof w?m.addObserver(w,N,K):m.addObserver(w)}directlySetCurrentUser(m){var w=this;return(0,C.Z)(function*(){w.currentUser&&w.currentUser!==m&&w._currentUser._stopProactiveRefresh(),m&&w.isProactiveRefreshEnabled&&m._startProactiveRefresh(),w.currentUser=m,m?yield w.assertedPersistence.setCurrentUser(m):yield w.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,C.Z)(function*(){var w;const N={"X-Client-Version":m.clientVersion};m.app.options.appId&&(N["X-Firebase-gmpid"]=m.app.options.appId);const K=yield null===(w=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return K&&(N["X-Firebase-Client"]=K),N})()}}function Te(A){return(0,p.m9)(A)}class oe{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,p.ne)(w=>this.observer=w)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ze(A,m,w){const N=Te(A);ee(N._canInitEmulator,N,"emulator-config-failed"),ee(/^https?:\/\//.test(m),N,"invalid-emulator-scheme");const K=!!w?.disableWarnings,ue=ut(m),{host:rt,port:Lt}=function Zt(A){const m=ut(A),w=/(\/\/)?([^?#/]+)/.exec(A.substr(m.length));if(!w)return{host:"",port:null};const N=w[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(N);if(K){const ue=K[1];return{host:ue,port:Tn(N.substr(ue.length+1))}}{const[ue,rt]=N.split(":");return{host:ue,port:Tn(rt)}}}(m);N.config.emulator={url:`${ue}//${rt}${null===Lt?"":`:${Lt}`}/`},N.settings.appVerificationDisabledForTesting=!0,N.emulatorConfig=Object.freeze({host:rt,port:Lt,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Un(){function A(){const m=document.createElement("p"),w=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function ut(A){const m=A.indexOf(":");return m<0?"":A.substr(0,m+1)}function Tn(A){if(!A)return null;const m=Number(A);return isNaN(m)?null:m}class hn{constructor(m,w){this.providerId=m,this.signInMethod=w}toJSON(){return ie("not implemented")}_getIdTokenResponse(m){return ie("not implemented")}_linkToIdToken(m,w){return ie("not implemented")}_getReauthenticationResolver(m){return ie("not implemented")}}function wr(A,m){return zr.apply(this,arguments)}function zr(){return(zr=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:resetPassword",Vn(A,m))})).apply(this,arguments)}function ri(A,m){return ir.apply(this,arguments)}function ir(){return(ir=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function mi(A,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:update",Vn(A,m))})).apply(this,arguments)}function or(){return(or=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithPassword",Vn(A,m))})).apply(this,arguments)}function kn(A,m){return qe.apply(this,arguments)}function qe(){return(qe=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:sendOobCode",Vn(A,m))})).apply(this,arguments)}function ke(A,m){return nt.apply(this,arguments)}function nt(){return(nt=(0,C.Z)(function*(A,m){return kn(A,m)})).apply(this,arguments)}function Nt(A,m){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,C.Z)(function*(A,m){return kn(A,m)})).apply(this,arguments)}function dn(A,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,C.Z)(function*(A,m){return kn(A,m)})).apply(this,arguments)}function Ln(A,m){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,C.Z)(function*(A,m){return kn(A,m)})).apply(this,arguments)}function rs(){return(rs=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithEmailLink",Vn(A,m))})).apply(this,arguments)}function _i(){return(_i=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithEmailLink",Vn(A,m))})).apply(this,arguments)}class Zi extends hn{constructor(m,w,N,K=null){super("password",N),this._email=m,this._password=w,this._tenantId=K}static _fromEmailAndPassword(m,w){return new Zi(m,w,"password")}static _fromEmailAndCode(m,w,N=null){return new Zi(m,w,"emailLink",N)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(m){var w=this;return(0,C.Z)(function*(){switch(w.signInMethod){case"password":return function sr(A,m){return or.apply(this,arguments)}(m,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Or(A,m){return rs.apply(this,arguments)}(m,{email:w._email,oobCode:w._password});default:$t(m,"internal-error")}})()}_linkToIdToken(m,w){var N=this;return(0,C.Z)(function*(){switch(N.signInMethod){case"password":return ri(m,{idToken:w,returnSecureToken:!0,email:N._email,password:N._password});case"emailLink":return function wi(A,m){return _i.apply(this,arguments)}(m,{idToken:w,email:N._email,oobCode:N._password});default:$t(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Qs(A,m){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithIdp",Vn(A,m))})).apply(this,arguments)}class Ss extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const w=new Ss(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(w.idToken=m.idToken),m.accessToken&&(w.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(w.nonce=m.nonce),m.pendingToken&&(w.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(w.accessToken=m.oauthToken,w.secret=m.oauthTokenSecret):$t("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:N,signInMethod:K}=w,ue=(0,R._T)(w,["providerId","signInMethod"]);if(!N||!K)return null;const rt=new Ss(N,K);return rt.idToken=ue.idToken||void 0,rt.accessToken=ue.accessToken||void 0,rt.secret=ue.secret,rt.nonce=ue.nonce,rt.pendingToken=ue.pendingToken||null,rt}_getIdTokenResponse(m){return Qs(m,this.buildRequest())}_linkToIdToken(m,w){const N=this.buildRequest();return N.idToken=w,Qs(m,N)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Qs(m,w)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),m.postBody=(0,p.xO)(w)}return m}}function ba(A,m){return la.apply(this,arguments)}function la(){return(la=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:sendVerificationCode",Vn(A,m))})).apply(this,arguments)}function yo(){return(yo=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithPhoneNumber",Vn(A,m))})).apply(this,arguments)}function Vs(){return(Vs=(0,C.Z)(function*(A,m){const w=yield cr(A,"POST","/v1/accounts:signInWithPhoneNumber",Vn(A,m));if(w.temporaryProof)throw qn(A,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const Po={USER_NOT_FOUND:"user-not-found"};function gr(){return(gr=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithPhoneNumber",Vn(A,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Po)})).apply(this,arguments)}class is extends hn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,w){return new is({verificationId:m,verificationCode:w})}static _fromTokenResponse(m,w){return new is({phoneNumber:m,temporaryProof:w})}_getIdTokenResponse(m){return function Ta(A,m){return yo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,w){return function ca(A,m){return Vs.apply(this,arguments)}(m,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Bs(A,m){return gr.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:w,verificationId:N,verificationCode:K}=this.params;return m&&w?{temporaryProof:m,phoneNumber:w}:{sessionInfo:N,code:K}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:w,verificationCode:N,phoneNumber:K,temporaryProof:ue}=m;return N||w||K||ue?new is({verificationId:w,verificationCode:N,phoneNumber:K,temporaryProof:ue}):null}}class Jr{constructor(m){var w,N,K,ue,rt,Lt;const gn=(0,p.zd)((0,p.pd)(m)),Fn=null!==(w=gn.apiKey)&&void 0!==w?w:null,vr=null!==(N=gn.oobCode)&&void 0!==N?N:null,vi=function js(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=gn.mode)&&void 0!==K?K:null);ee(Fn&&vr&&vi,"argument-error"),this.apiKey=Fn,this.operation=vi,this.code=vr,this.continueUrl=null!==(ue=gn.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(rt=gn.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Lt=gn.tenantId)&&void 0!==Lt?Lt:null}static parseLink(m){const w=function vo(A){const m=(0,p.zd)((0,p.pd)(A)).link,w=m?(0,p.zd)((0,p.pd)(m)).deep_link_id:null,N=(0,p.zd)((0,p.pd)(A)).deep_link_id;return(N?(0,p.zd)((0,p.pd)(N)).link:null)||N||w||m||A}(m);try{return new Jr(w)}catch{return null}}}let Di=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(w,N){return Zi._fromEmailAndPassword(w,N)}static credentialWithLink(w,N){const K=Jr.parseLink(N);return ee(K,"argument-error"),Zi._fromEmailAndCode(w,K.code,K.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Si{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ai extends Si{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Sr extends Ai{static credentialFromJSON(m){const w="string"==typeof m?JSON.parse(m):m;return ee("providerId"in w&&"signInMethod"in w,"argument-error"),Ss._fromParams(w)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ee(m.idToken||m.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Sr.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Sr.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:ue,nonce:rt,providerId:Lt}=m;if(!N&&!K&&!w&&!ue||!Lt)return null;try{return new Sr(Lt)._credential({idToken:w,accessToken:N,nonce:rt,pendingToken:ue})}catch{return null}}}let oo=(()=>{class A extends Ai{constructor(){super("facebook.com")}static credential(w){return Ss._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return A.credential(w.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),$s=(()=>{class A extends Ai{constructor(){super("google.com"),this.addScope("profile")}static credential(w,N){return Ss._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:N})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:N,oauthAccessToken:K}=w;if(!N&&!K)return null;try{return A.credential(N,K)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),Yi=(()=>{class A extends Ai{constructor(){super("github.com")}static credential(w){return Ss._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return A.credential(w.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Ws extends hn{constructor(m,w){super(m,m),this.pendingToken=w}_getIdTokenResponse(m){return Qs(m,this.buildRequest())}_linkToIdToken(m,w){const N=this.buildRequest();return N.idToken=w,Qs(m,N)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Qs(m,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:N,signInMethod:K,pendingToken:ue}=w;return N&&K&&ue&&N===K?new Ws(N,ue):null}static _create(m,w){return new Ws(m,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xi extends Si{constructor(m){ee(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return xi.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return xi.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const w=Ws.fromJSON(m);return ee(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:w,providerId:N}=m;if(!w||!N)return null;try{return Ws._create(N,w)}catch{return null}}}let Oo=(()=>{class A extends Ai{constructor(){super("twitter.com")}static credential(w,N){return Ss._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:N})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:N,oauthTokenSecret:K}=w;if(!N||!K)return null;try{return A.credential(N,K)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Ci(A,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signUp",Vn(A,m))})).apply(this,arguments)}class Ii{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,w,N,K=!1){return(0,C.Z)(function*(){const ue=yield kt._fromIdTokenResponse(m,N,K),rt=ko(N);return new Ii({user:ue,providerId:rt,_tokenResponse:N,operationType:w})})()}static _forOperation(m,w,N){return(0,C.Z)(function*(){yield m._updateTokensIfNecessary(N,!0);const K=ko(N);return new Ii({user:m,providerId:K,_tokenResponse:N,operationType:w})})()}}function ko(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function ei(A){return Da.apply(this,arguments)}function Da(){return(Da=(0,C.Z)(function*(A){var m;const w=Te(A);if(yield w._initializationPromise,null!==(m=w.currentUser)&&void 0!==m&&m.isAnonymous)return new Ii({user:w.currentUser,providerId:null,operationType:"signIn"});const N=yield Ci(w,{returnSecureToken:!0}),K=yield Ii._fromIdTokenResponse(w,"signIn",N,!0);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}class Hr extends p.ZR{constructor(m,w,N,K){var ue;super(w.code,w.message),this.operationType=N,this.user=K,Object.setPrototypeOf(this,Hr.prototype),this.customData={appName:m.name,tenantId:null!==(ue=m.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:w.customData._serverResponse,operationType:N}}static _fromErrorAndOperation(m,w,N,K){return new Hr(m,w,N,K)}}function Se(A,m,w,N){return("reauthenticate"===m?w._getReauthenticationResolver(A):w._getIdTokenResponse(A)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Hr._fromErrorAndOperation(A,ue,m,N):ue})}function ge(A){return new Set(A.map(({providerId:m})=>m).filter(m=>!!m))}function We(A,m){return st.apply(this,arguments)}function st(){return(st=(0,C.Z)(function*(A,m){const w=(0,p.m9)(A);yield sn(!0,w,m);const{providerUserInfo:N}=yield Xt(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[m]}),K=ge(N||[]);return w.providerData=w.providerData.filter(ue=>K.has(ue.providerId)),K.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function St(A,m){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,C.Z)(function*(A,m,w=!1){const N=yield gt(A,m._linkToIdToken(A.auth,yield A.getIdToken()),w);return Ii._forOperation(A,"link",N)})).apply(this,arguments)}function sn(A,m,w){return un.apply(this,arguments)}function un(){return(un=(0,C.Z)(function*(A,m,w){yield tr(m);const K=!1===A?"provider-already-linked":"no-such-provider";ee(ge(m.providerData).has(w)===A,m.auth,K)})).apply(this,arguments)}function yr(A,m){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,C.Z)(function*(A,m,w=!1){var N;const{auth:K}=A,ue="reauthenticate";try{const rt=yield gt(A,Se(K,ue,m,A),w);ee(rt.idToken,K,"internal-error");const Lt=_e(rt.idToken);ee(Lt,K,"internal-error");const{sub:gn}=Lt;return ee(A.uid===gn,K,"user-mismatch"),Ii._forOperation(A,ue,rt)}catch(rt){throw"auth/user-not-found"===(null===(N=rt)||void 0===N?void 0:N.code)&&$t(K,"user-mismatch"),rt}})).apply(this,arguments)}function kr(A,m){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,C.Z)(function*(A,m,w=!1){const N="signIn",K=yield Se(A,N,m),ue=yield Ii._fromIdTokenResponse(A,N,K);return w||(yield A._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function bi(A,m){return yi.apply(this,arguments)}function yi(){return(yi=(0,C.Z)(function*(A,m){return kr(Te(A),m)})).apply(this,arguments)}function jn(A,m){return Es.apply(this,arguments)}function Es(){return(Es=(0,C.Z)(function*(A,m){const w=(0,p.m9)(A);return yield sn(!1,w,m.providerId),St(w,m)})).apply(this,arguments)}function ws(A,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,C.Z)(function*(A,m){return yr((0,p.m9)(A),m)})).apply(this,arguments)}function Eo(A,m){return li.apply(this,arguments)}function li(){return(li=(0,C.Z)(function*(A,m){return cr(A,"POST","/v1/accounts:signInWithCustomToken",Vn(A,m))})).apply(this,arguments)}function Bi(A,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,C.Z)(function*(A,m){const w=Te(A),N=yield Eo(w,{token:m,returnSecureToken:!0}),K=yield Ii._fromIdTokenResponse(w,"signIn",N);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}class ii{constructor(m,w){this.factorId=m,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(m,w){return"phoneInfo"in w?jt._fromServerResponse(m,w):$t(m,"internal-error")}}class jt extends ii{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,w){return new jt(w)}}function Nr(A,m,w){var N;ee((null===(N=w.url)||void 0===N?void 0:N.length)>0,A,"invalid-continue-uri"),ee(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),m.continueUrl=w.url,m.dynamicLinkDomain=w.dynamicLinkDomain,m.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ee(w.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),m.iOSBundleId=w.iOS.bundleId),w.android&&(ee(w.android.packageName.length>0,A,"missing-android-pkg-name"),m.androidInstallApp=w.android.installApp,m.androidMinimumVersionCode=w.android.minimumVersion,m.androidPackageName=w.android.packageName)}function zo(A,m,w){return qo.apply(this,arguments)}function qo(){return(qo=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A),K={requestType:"PASSWORD_RESET",email:m};w&&Nr(N,K,w),yield Nt(N,K)})).apply(this,arguments)}function Wi(A,m,w){return Js.apply(this,arguments)}function Js(){return(Js=(0,C.Z)(function*(A,m,w){yield wr((0,p.m9)(A),{oobCode:m,newPassword:w})})).apply(this,arguments)}function ao(A,m){return ls.apply(this,arguments)}function ls(){return(ls=(0,C.Z)(function*(A,m){yield mi((0,p.m9)(A),{oobCode:m})})).apply(this,arguments)}function Sa(A,m){return ji.apply(this,arguments)}function ji(){return(ji=(0,C.Z)(function*(A,m){const w=(0,p.m9)(A),N=yield wr(w,{oobCode:m}),K=N.requestType;switch(ee(K,w,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(N.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(N.mfaInfo,w,"internal-error");default:ee(N.email,w,"internal-error")}let ue=null;return N.mfaInfo&&(ue=ii._fromServerResponse(Te(w),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:ue},operation:K}})).apply(this,arguments)}function Aa(A,m){return xa.apply(this,arguments)}function xa(){return(xa=(0,C.Z)(function*(A,m){const{data:w}=yield Sa((0,p.m9)(A),m);return w.email})).apply(this,arguments)}function hu(A,m,w){return cs.apply(this,arguments)}function cs(){return(cs=(0,C.Z)(function*(A,m,w){const N=Te(A),K=yield Ci(N,{returnSecureToken:!0,email:m,password:w}),ue=yield Ii._fromIdTokenResponse(N,"signIn",K);return yield N._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function Li(A,m,w){return bi((0,p.m9)(A),Di.credential(m,w))}function Gs(A,m,w){return uo.apply(this,arguments)}function uo(){return(uo=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A),K={requestType:"EMAIL_SIGNIN",email:m};ee(w.handleCodeInApp,N,"argument-error"),w&&Nr(N,K,w),yield dn(N,K)})).apply(this,arguments)}function Ma(A,m){return"EMAIL_SIGNIN"===Jr.parseLink(m)?.operation}function Cs(A,m,w){return wo.apply(this,arguments)}function wo(){return(wo=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A),K=Di.credentialWithLink(m,w||Rt());return ee(K._tenantId===(N.tenantId||null),N,"tenant-id-mismatch"),bi(N,K)})).apply(this,arguments)}function Zo(A,m){return As.apply(this,arguments)}function As(){return(As=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:createAuthUri",Vn(A,m))})).apply(this,arguments)}function Ku(A,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,C.Z)(function*(A,m){const N={identifier:m,continueUri:bt()?Rt():"http://localhost"},{signinMethods:K}=yield Zo((0,p.m9)(A),N);return K||[]})).apply(this,arguments)}function da(A,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,C.Z)(function*(A,m){const w=(0,p.m9)(A),K={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};m&&Nr(w.auth,K,m);const{email:ue}=yield ke(w.auth,K);ue!==A.email&&(yield A.reload())})).apply(this,arguments)}function Ya(A,m,w){return ha.apply(this,arguments)}function ha(){return(ha=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:m};w&&Nr(N.auth,ue,w);const{email:rt}=yield Ln(N.auth,ue);rt!==A.email&&(yield A.reload())})).apply(this,arguments)}function xs(A,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,C.Z)(function*(A,m){return fn(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Co(A,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,C.Z)(function*(A,{displayName:m,photoURL:w}){if(void 0===m&&void 0===w)return;const N=(0,p.m9)(A),ue={idToken:yield N.getIdToken(),displayName:m,photoUrl:w,returnSecureToken:!0},rt=yield gt(N,xs(N.auth,ue));N.displayName=rt.displayName||null,N.photoURL=rt.photoUrl||null;const Lt=N.providerData.find(({providerId:gn})=>"password"===gn);Lt&&(Lt.displayName=N.displayName,Lt.photoURL=N.photoURL),yield N._updateTokensIfNecessary(rt)})).apply(this,arguments)}function Pa(A,m){return z((0,p.m9)(A),m,null)}function F(A,m){return z((0,p.m9)(A),null,m)}function z(A,m,w){return U.apply(this,arguments)}function U(){return(U=(0,C.Z)(function*(A,m,w){const{auth:N}=A,ue={idToken:yield A.getIdToken(),returnSecureToken:!0};m&&(ue.email=m),w&&(ue.password=w);const rt=yield gt(A,ri(N,ue));yield A._updateTokensIfNecessary(rt,!0)})).apply(this,arguments)}class Oe{constructor(m,w,N={}){this.isNewUser=m,this.providerId=w,this.profile=N}}class wt extends Oe{constructor(m,w,N,K){super(m,w,N),this.username=K}}class Tt extends Oe{constructor(m,w){super(m,"facebook.com",w)}}class Nn extends wt{constructor(m,w){super(m,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class Xr extends Oe{constructor(m,w){super(m,"google.com",w)}}class Br extends wt{constructor(m,w,N){super(m,"twitter.com",w,N)}}function Kr(A){const{user:m,_tokenResponse:w}=A;return m.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function Q(A){var m,w;if(!A)return null;const{providerId:N}=A,K=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},ue=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!N&&A?.idToken){const rt=null===(w=null===(m=_e(A.idToken))||void 0===m?void 0:m.firebase)||void 0===w?void 0:w.sign_in_provider;if(rt)return new Oe(ue,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!N)return null;switch(N){case"facebook.com":return new Tt(ue,K);case"github.com":return new Nn(ue,K);case"google.com":return new Xr(ue,K);case"twitter.com":return new Br(ue,K,A.screenName||null);case"custom":case"anonymous":return new Oe(ue,null);default:return new Oe(ue,N,K)}}(w)}class fi{constructor(m,w,N){this.type=m,this.credential=w,this.auth=N}static _fromIdtoken(m,w){return new fi("enroll",m,w)}static _fromMfaPendingCredential(m){return new fi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var w,N;if(m?.multiFactorSession){if(null!==(w=m.multiFactorSession)&&void 0!==w&&w.pendingCredential)return fi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(N=m.multiFactorSession)&&void 0!==N&&N.idToken)return fi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Xs{constructor(m,w,N){this.session=m,this.hints=w,this.signInResolver=N}static _fromError(m,w){const N=Te(m),K=w.customData._serverResponse,ue=(K.mfaInfo||[]).map(Lt=>ii._fromServerResponse(N,Lt));ee(K.mfaPendingCredential,N,"internal-error");const rt=fi._fromMfaPendingCredential(K.mfaPendingCredential);return new Xs(rt,ue,function(){var Lt=(0,C.Z)(function*(gn){const Fn=yield gn._process(N,rt);delete K.mfaInfo,delete K.mfaPendingCredential;const vr=Object.assign(Object.assign({},K),{idToken:Fn.idToken,refreshToken:Fn.refreshToken});switch(w.operationType){case"signIn":const vi=yield Ii._fromIdTokenResponse(N,w.operationType,vr);return yield N._updateCurrentUser(vi.user),vi;case"reauthenticate":return ee(w.user,N,"internal-error"),Ii._forOperation(w.user,w.operationType,vr);default:$t(N,"internal-error")}});return function(gn){return Lt.apply(this,arguments)}}())}resolveSignIn(m){var w=this;return(0,C.Z)(function*(){return w.signInResolver(m)})()}}function qt(A,m){var w;const N=(0,p.m9)(A),K=m;return ee(m.customData.operationType,N,"argument-error"),ee(null===(w=K.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,N,"argument-error"),Xs._fromError(N,K)}function ur(A,m){return fn(A,"POST","/v2/accounts/mfaEnrollment:start",Vn(A,m))}class Dn{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(N=>ii._fromServerResponse(m.auth,N)))})}static _fromUser(m){return new Dn(m)}getSession(){var m=this;return(0,C.Z)(function*(){return fi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,w){var N=this;return(0,C.Z)(function*(){const K=m,ue=yield N.getSession(),rt=yield gt(N.user,K._process(N.user.auth,ue,w));return yield N.user._updateTokensIfNecessary(rt),N.user.reload()})()}unenroll(m){var w=this;return(0,C.Z)(function*(){var N;const K="string"==typeof m?m:m.uid,ue=yield w.user.getIdToken(),rt=yield gt(w.user,function Oa(A,m){return fn(A,"POST","/v2/accounts/mfaEnrollment:withdraw",Vn(A,m))}(w.user.auth,{idToken:ue,mfaEnrollmentId:K}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Lt})=>Lt!==K),yield w.user._updateTokensIfNecessary(rt);try{yield w.user.reload()}catch(Lt){if("auth/user-token-expired"!==(null===(N=Lt)||void 0===N?void 0:N.code))throw Lt}})()}}const Xn=new WeakMap;function Ru(A){const m=(0,p.m9)(A);return Xn.has(m)||Xn.set(m,Dn._fromUser(m)),Xn.get(m)}const cn="__sak";class Dt{constructor(m,w){this.storageRetriever=m,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(cn,"1"),this.storage.removeItem(cn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,w){return this.storage.setItem(m,JSON.stringify(w)),Promise.resolve()}_get(m){const w=this.storage.getItem(m);return Promise.resolve(w?JSON.parse(w):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const fa=(()=>{class A extends Dt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,N)=>this.onStorageEvent(w,N),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Kt(){const A=(0,p.z$)();return Fe(A)||pe(A)}()&&function Pe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Jt(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const N of Object.keys(this.listeners)){const K=this.storage.getItem(N),ue=this.localCache[N];K!==ue&&w(N,ue,K)}}onStorageEvent(w,N=!1){if(!w.key)return void this.forAllChangedKeys((Lt,gn,Fn)=>{this.notifyListeners(Lt,Fn)});const K=w.key;if(N?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Lt=this.storage.getItem(K);if(w.newValue!==Lt)null!==w.newValue?this.storage.setItem(K,w.newValue):this.storage.removeItem(K);else if(this.localCache[K]===w.newValue&&!N)return}const ue=()=>{const Lt=this.storage.getItem(K);!N&&this.localCache[K]===Lt||this.notifyListeners(K,Lt)},rt=this.storage.getItem(K);!function pt(){return(0,p.w1)()&&10===document.documentMode}()||rt===w.newValue||w.newValue===w.oldValue?ue():setTimeout(ue,10)}notifyListeners(w,N){this.localCache[w]=N;const K=this.listeners[w];if(K)for(const ue of Array.from(K))ue(N&&JSON.parse(N))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,N,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:N,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,N){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(N)}_removeListener(w,N){this.listeners[w]&&(this.listeners[w].delete(N),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,N){var K=()=>super._set,ue=this;return(0,C.Z)(function*(){yield K().call(ue,w,N),ue.localCache[w]=JSON.stringify(N)})()}_get(w){var N=()=>super._get,K=this;return(0,C.Z)(function*(){const ue=yield N().call(K,w);return K.localCache[w]=JSON.stringify(ue),ue})()}_remove(w){var N=()=>super._remove,K=this;return(0,C.Z)(function*(){yield N().call(K,w),delete K.localCache[w]})()}}return A.type="LOCAL",A})(),Qo=(()=>{class A extends Dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,N){}_removeListener(w,N){}}return A.type="SESSION",A})();let Pu=(()=>{class A{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const N=this.receivers.find(ue=>ue.isListeningto(w));if(N)return N;const K=new A(w);return this.receivers.push(K),K}isListeningto(w){return this.eventTarget===w}handleEvent(w){var N=this;return(0,C.Z)(function*(){const K=w,{eventId:ue,eventType:rt,data:Lt}=K.data,gn=N.handlersMap[rt];if(!gn?.size)return;K.ports[0].postMessage({status:"ack",eventId:ue,eventType:rt});const Fn=Array.from(gn).map(function(){var vi=(0,C.Z)(function*(Bo){return Bo(K.origin,Lt)});return function(Bo){return vi.apply(this,arguments)}}()),vr=yield function Cl(A){return Promise.all(A.map(function(){var m=(0,C.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(N){return{fulfilled:!1,reason:N}}});return function(w){return m.apply(this,arguments)}}()))}(Fn);K.ports[0].postMessage({status:"done",eventId:ue,eventType:rt,response:vr})})()}_subscribe(w,N){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(N)}_unsubscribe(w,N){this.handlersMap[w]&&N&&this.handlersMap[w].delete(N),(!N||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function Yu(A="",m=10){let w="";for(let N=0;N<m;N++)w+=Math.floor(10*Math.random());return A+w}class hc{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,w,N=50){var K=this;return(0,C.Z)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let rt,Lt;return new Promise((gn,Fn)=>{const vr=Yu("",20);ue.port1.start();const vi=setTimeout(()=>{Fn(new Error("unsupported_event"))},N);Lt={messageChannel:ue,onMessage(Bo){const Yr=Bo;if(Yr.data.eventId===vr)switch(Yr.data.status){case"ack":clearTimeout(vi),rt=setTimeout(()=>{Fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),gn(Yr.data.response);break;default:clearTimeout(vi),clearTimeout(rt),Fn(new Error("invalid_response"))}}},K.handlers.add(Lt),ue.port1.addEventListener("message",Lt.onMessage),K.target.postMessage({eventType:m,eventId:vr,data:w},[ue.port2])}).finally(()=>{Lt&&K.removeMessageHandler(Lt)})})()}}function Gi(){return window}function $n(){return typeof Gi().WorkerGlobalScope<"u"&&"function"==typeof Gi().importScripts}function ka(){return(ka=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Lo="firebaseLocalStorageDb",Fa="firebaseLocalStorage",Ri="fbase_key";class on{constructor(m){this.request=m}toPromise(){return new Promise((m,w)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Uo(A,m){return A.transaction([Fa],m?"readwrite":"readonly").objectStore(Fa)}function ga(){const A=indexedDB.open(Lo,1);return new Promise((m,w)=>{A.addEventListener("error",()=>{w(A.error)}),A.addEventListener("upgradeneeded",()=>{const N=A.result;try{N.createObjectStore(Fa,{keyPath:Ri})}catch(K){w(K)}}),A.addEventListener("success",(0,C.Z)(function*(){const N=A.result;N.objectStoreNames.contains(Fa)?m(N):(N.close(),yield function Qa(){const A=indexedDB.deleteDatabase(Lo);return new on(A).toPromise()}(),m(yield ga()))}))})}function La(A,m,w){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,C.Z)(function*(A,m,w){const N=Uo(A,!0).put({[Ri]:m,value:w});return new on(N).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,C.Z)(function*(A,m){const w=Uo(A,!1).get(m),N=yield new on(w).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}function Ja(A,m){const w=Uo(A,!0).delete(m);return new on(w).toPromise()}const fu=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,C.Z)(function*(){return w.db||(w.db=yield ga()),w.db})()}_withRetries(w){var N=this;return(0,C.Z)(function*(){let K=0;for(;;)try{const ue=yield N._openDb();return yield w(ue)}catch(ue){if(K++>3)throw ue;N.db&&(N.db.close(),N.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,C.Z)(function*(){return $n()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,C.Z)(function*(){w.receiver=Pu._getInstance(function nr(){return $n()?self:null}()),w.receiver._subscribe("keyChanged",function(){var N=(0,C.Z)(function*(K,ue){return{keyProcessed:(yield w._poll()).includes(ue.key)}});return function(K,ue){return N.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var N=(0,C.Z)(function*(K,ue){return["keyChanged"]});return function(K,ue){return N.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,C.Z)(function*(){var N,K;if(w.activeServiceWorker=yield function pa(){return ka.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new hc(w.activeServiceWorker);const ue=yield w.sender._send("ping",{},800);!ue||(null===(N=ue[0])||void 0===N?void 0:N.fulfilled)&&(null===(K=ue[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var N=this;return(0,C.Z)(function*(){if(N.sender&&N.activeServiceWorker&&function ci(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===N.activeServiceWorker)try{yield N.sender._send("keyChanged",{key:w},N.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const w=yield ga();return yield La(w,cn,"1"),yield Ja(w,cn),!0}catch{}return!1})()}_withPendingWrite(w){var N=this;return(0,C.Z)(function*(){N.pendingWrites++;try{yield w()}finally{N.pendingWrites--}})()}_set(w,N){var K=this;return(0,C.Z)(function*(){return K._withPendingWrite((0,C.Z)(function*(){return yield K._withRetries(ue=>La(ue,w,N)),K.localCache[w]=N,K.notifyServiceWorker(w)}))})()}_get(w){var N=this;return(0,C.Z)(function*(){const K=yield N._withRetries(ue=>function fc(A,m){return ma.apply(this,arguments)}(ue,w));return N.localCache[w]=K,K})()}_remove(w){var N=this;return(0,C.Z)(function*(){return N._withPendingWrite((0,C.Z)(function*(){return yield N._withRetries(K=>Ja(K,w)),delete N.localCache[w],N.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,C.Z)(function*(){const N=yield w._withRetries(rt=>{const Lt=Uo(rt,!1).getAll();return new on(Lt).toPromise()});if(!N)return[];if(0!==w.pendingWrites)return[];const K=[],ue=new Set;for(const{fbase_key:rt,value:Lt}of N)ue.add(rt),JSON.stringify(w.localCache[rt])!==JSON.stringify(Lt)&&(w.notifyListeners(rt,Lt),K.push(rt));for(const rt of Object.keys(w.localCache))w.localCache[rt]&&!ue.has(rt)&&(w.notifyListeners(rt,null),K.push(rt));return K})()}notifyListeners(w,N){this.localCache[w]=N;const K=this.listeners[w];if(K)for(const ue of Array.from(K))ue(N)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,N){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(N)}_removeListener(w,N){this.listeners[w]&&(this.listeners[w].delete(N),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function Ou(A,m){return fn(A,"POST","/v2/accounts/mfaSignIn:start",Vn(A,m))}function _t(){return(_t=(0,C.Z)(function*(A){return(yield fn(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ds(A){return new Promise((m,w)=>{const N=document.createElement("script");N.setAttribute("src",A),N.onload=m,N.onerror=K=>{const ue=Me("internal-error");ue.customData=K,w(ue)},N.type="text/javascript",N.charset="UTF-8",function ya(){var A,m;return null!==(m=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==m?m:document}().appendChild(N)})}function Bl(A){return`__${A}${Math.floor(1e6*Math.random())}`}const ku=1e12;class va{constructor(m){this.auth=m,this.counter=ku,this._widgets=new Map}render(m,w){const N=this.counter;return this._widgets.set(N,new ai(m,this.auth.name,w||{})),this.counter++,N}reset(m){var w;const N=m||ku;null===(w=this._widgets.get(N))||void 0===w||w.delete(),this._widgets.delete(N)}getResponse(m){var w;return(null===(w=this._widgets.get(m||ku))||void 0===w?void 0:w.getResponse())||""}execute(m){var w=this;return(0,C.Z)(function*(){var N;return null===(N=w._widgets.get(m||ku))||void 0===N||N.execute(),""})()}}class ai{constructor(m,w,N){this.params=N,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof m?document.getElementById(m):m;ee(K,"argument-error",{appName:w}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pc(A){const m=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<A;N++)m.push(w.charAt(Math.floor(Math.random()*w.length)));return m.join("")}(50);const{callback:m,"expired-callback":w}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ju=Bl("rcb"),Va=new Mt(3e4,6e4);class Uc{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Gi().grecaptcha)||void 0===m||!m.render)}load(m,w=""){return ee(function Xa(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(w),m,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Gi().grecaptcha):new Promise((N,K)=>{const ue=Gi().setTimeout(()=>{K(Me(m,"network-request-failed"))},Va.get());Gi()[Ju]=()=>{Gi().clearTimeout(ue),delete Gi()[Ju];const Lt=Gi().grecaptcha;if(!Lt)return void K(Me(m,"internal-error"));const gn=Lt.render;Lt.render=(Fn,vr)=>{const vi=gn(Fn,vr);return this.counter++,vi},this.hostLanguage=w,N(Lt)},ds(`https://www.google.com/recaptcha/api.js??${(0,p.xO)({onload:Ju,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(ue),K(Me(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var w;return!(null===(w=Gi().grecaptcha)||void 0===w||!w.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jl{load(m){return(0,C.Z)(function*(){return new va(m)})()}clearedOneInstance(){}}const si="recaptcha",qs={theme:"light",type:"image"};class os{constructor(m,w=Object.assign({},qs),N){this.parameters=w,this.type=si,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Te(N),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof m?document.getElementById(m):m;ee(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jl:new Uc,this.validateStartingState()}verify(){var m=this;return(0,C.Z)(function*(){m.assertNotDestroyed();const w=yield m.render(),N=m.getAssertedRecaptcha();return N.getResponse(w)||new Promise(ue=>{const rt=Lt=>{!Lt||(m.tokenChangeListeners.delete(rt),ue(Lt))};m.tokenChangeListeners.add(rt),m.isInvisible&&N.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return w=>{if(this.tokenChangeListeners.forEach(N=>N(w)),"function"==typeof m)m(w);else if("string"==typeof m){const N=Gi()[m];"function"==typeof N&&N(w)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,C.Z)(function*(){if(yield m.init(),!m.widgetId){let w=m.container;if(!m.isInvisible){const N=document.createElement("div");w.appendChild(N),w=N}m.widgetId=m.getAssertedRecaptcha().render(w,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,C.Z)(function*(){ee(bt()&&!$n(),m.auth,"internal-error"),yield function pr(){let A=null;return new Promise(m=>{"complete"!==document.readyState?(A=()=>m(),window.addEventListener("load",A)):m()}).catch(m=>{throw A&&window.removeEventListener("load",A),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const w=yield function Ua(A){return _t.apply(this,arguments)}(m.auth);ee(w,m.auth,"internal-error"),m.parameters.sitekey=w})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ea{constructor(m,w){this.verificationId=m,this.onConfirmation=w}confirm(m){const w=is._fromVerification(this.verificationId,m);return this.onConfirmation(w)}}function hs(A,m,w){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,C.Z)(function*(A,m,w){const N=Te(A),K=yield ti(N,m,(0,p.m9)(w));return new Ea(K,ue=>bi(N,ue))})).apply(this,arguments)}function Ba(A,m,w){return br.apply(this,arguments)}function br(){return(br=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A);yield sn(!1,N,"phone");const K=yield ti(N.auth,m,(0,p.m9)(w));return new Ea(K,ue=>jn(N,ue))})).apply(this,arguments)}function Ns(A,m,w){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A),K=yield ti(N.auth,m,(0,p.m9)(w));return new Ea(K,ue=>ws(N,ue))})).apply(this,arguments)}function ti(A,m,w){return to.apply(this,arguments)}function to(){return(to=(0,C.Z)(function*(A,m,w){var N;const K=yield w.verify();try{let ue;if(ee("string"==typeof K,A,"argument-error"),ee(w.type===si,A,"argument-error"),ue="string"==typeof m?{phoneNumber:m}:m,"session"in ue){const rt=ue.session;if("phoneNumber"in ue)return ee("enroll"===rt.type,A,"internal-error"),(yield ur(A,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ee("signin"===rt.type,A,"internal-error");const Lt=(null===(N=ue.multiFactorHint)||void 0===N?void 0:N.uid)||ue.multiFactorUid;return ee(Lt,A,"missing-multi-factor-info"),(yield Ou(A,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Lt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield ba(A,{phoneNumber:ue.phoneNumber,recaptchaToken:K});return rt}}finally{w._reset()}})).apply(this,arguments)}function Fu(A,m){return gu.apply(this,arguments)}function gu(){return(gu=(0,C.Z)(function*(A,m){yield St((0,p.m9)(A),m)})).apply(this,arguments)}let Xo=(()=>{class A{constructor(w){this.providerId=A.PROVIDER_ID,this.auth=Te(w)}verifyPhoneNumber(w,N){return ti(this.auth,w,(0,p.m9)(N))}static credential(w,N){return is._fromVerification(w,N)}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:N,temporaryProof:K}=w;return N&&K?is._fromTokenResponse(N,K):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function eu(A,m){return m?Ue(m):(ee(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class Is extends hn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Qs(m,this._buildIdpRequest())}_linkToIdToken(m,w){return Qs(m,this._buildIdpRequest(w))}_getReauthenticationResolver(m){return Qs(m,this._buildIdpRequest())}_buildIdpRequest(m){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(w.idToken=m),w}}function bo(A){return kr(A.auth,new Is(A),A.bypassAuthState)}function fs(A){const{auth:m,user:w}=A;return ee(w,m,"internal-error"),yr(w,new Is(A),A.bypassAuthState)}function Xu(A){return D.apply(this,arguments)}function D(){return(D=(0,C.Z)(function*(A){const{auth:m,user:w}=A;return ee(w,m,"internal-error"),St(w,new Is(A),A.bypassAuthState)})).apply(this,arguments)}class S{constructor(m,w,N,K,ue=!1){this.auth=m,this.resolver=N,this.user=K,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var m=this;return new Promise(function(){var w=(0,C.Z)(function*(N,K){m.pendingPromise={resolve:N,reject:K};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ue){m.reject(ue)}});return function(N,K){return w.apply(this,arguments)}}())}onAuthEvent(m){var w=this;return(0,C.Z)(function*(){const{urlResponse:N,sessionId:K,postBody:ue,tenantId:rt,error:Lt,type:gn}=m;if(Lt)return void w.reject(Lt);const Fn={auth:w.auth,requestUri:N,sessionId:K,tenantId:rt||void 0,postBody:ue||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(gn)(Fn))}catch(vr){w.reject(vr)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return bo;case"linkViaPopup":case"linkViaRedirect":return Xu;case"reauthViaPopup":case"reauthViaRedirect":return fs;default:$t(this.auth,"internal-error")}}resolve(m){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const T=new Mt(2e3,1e4);function k(A,m,w){return B.apply(this,arguments)}function B(){return(B=(0,C.Z)(function*(A,m,w){const N=Te(A);Ge(A,m,Si);const K=eu(N,w);return new en(N,"signInViaPopup",m,K).executeNotNull()})).apply(this,arguments)}function Y(A,m,w){return ye.apply(this,arguments)}function ye(){return(ye=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A);Ge(N.auth,m,Si);const K=eu(N.auth,w);return new en(N.auth,"reauthViaPopup",m,K,N).executeNotNull()})).apply(this,arguments)}function Re(A,m,w){return It.apply(this,arguments)}function It(){return(It=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A);Ge(N.auth,m,Si);const K=eu(N.auth,w);return new en(N.auth,"linkViaPopup",m,K,N).executeNotNull()})).apply(this,arguments)}let en=(()=>{class A extends S{constructor(w,N,K,ue,rt){super(w,N,ue,rt),this.provider=K,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var w=this;return(0,C.Z)(function*(){const N=yield w.execute();return ee(N,w.auth,"internal-error"),N})()}onExecution(){var w=this;return(0,C.Z)(function*(){Ze(1===w.filter.length,"Popup operations only handle one event");const N=Yu();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],N),w.authWindow.associatedEvent=N,w.resolver._originValidation(w.auth).catch(K=>{w.reject(K)}),w.resolver._isIframeWebStorageSupported(w.auth,K=>{K||w.reject(Me(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const w=()=>{var N,K;this.pollId=null!==(K=null===(N=this.authWindow)||void 0===N?void 0:N.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,T.get())};w()}}return A.currentPopupAction=null,A})();const pn=new Map;class Gr extends S{constructor(m,w,N=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,N),this.eventId=null}execute(){var m=()=>super.execute,w=this;return(0,C.Z)(function*(){let N=pn.get(w.auth._key());if(!N){try{const ue=(yield function as(A,m){return us.apply(this,arguments)}(w.resolver,w.auth))?yield m().call(w):null;N=()=>Promise.resolve(ue)}catch(K){N=()=>Promise.reject(K)}pn.set(w.auth._key(),N)}return w.bypassAuthState||pn.set(w.auth._key(),()=>Promise.resolve(null)),N()})()}onAuthEvent(m){var w=()=>super.onAuthEvent,N=this;return(0,C.Z)(function*(){if("signInViaRedirect"===m.type)return w().call(N,m);if("unknown"!==m.type){if(m.eventId){const K=yield N.auth._redirectUserForId(m.eventId);if(K)return N.user=K,w().call(N,m);N.resolve(null)}}else N.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function us(){return(us=(0,C.Z)(function*(A,m){const w=ru(m),N=ea(A);if(!(yield N._isAvailable()))return!1;const K="true"===(yield N._get(w));return yield N._remove(w),K})).apply(this,arguments)}function ps(A,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,C.Z)(function*(A,m){return ea(A)._set(ru(m),"true")})).apply(this,arguments)}function tu(){pn.clear()}function nu(A,m){pn.set(A._key(),m)}function ea(A){return Ue(A._redirectPersistence)}function ru(A){return Qn("pendingRedirect",A.config.apiKey,A.name)}function gs(A,m,w){return function $i(A,m,w){return pi.apply(this,arguments)}(A,m,w)}function pi(){return(pi=(0,C.Z)(function*(A,m,w){const N=Te(A);Ge(A,m,Si);const K=eu(N,w);return yield ps(K,N),K._openRedirect(N,m,"signInViaRedirect")})).apply(this,arguments)}function $l(A,m,w){return function Il(A,m,w){return Vo.apply(this,arguments)}(A,m,w)}function Vo(){return(Vo=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A);Ge(N.auth,m,Si);const K=eu(N.auth,w);yield ps(K,N.auth);const ue=yield Hl(N);return K._openRedirect(N.auth,m,"reauthViaRedirect",ue)})).apply(this,arguments)}function Vc(A,m,w){return function mu(A,m,w){return _u.apply(this,arguments)}(A,m,w)}function _u(){return(_u=(0,C.Z)(function*(A,m,w){const N=(0,p.m9)(A);Ge(N.auth,m,Si);const K=eu(N.auth,w);yield sn(!1,N,m.providerId),yield ps(K,N.auth);const ue=yield Hl(N);return K._openRedirect(N.auth,m,"linkViaRedirect",ue)})).apply(this,arguments)}function yu(A,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,C.Z)(function*(A,m){return yield Te(A)._initializationPromise,To(A,m,!1)})).apply(this,arguments)}function To(A,m){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,C.Z)(function*(A,m,w=!1){const N=Te(A),K=eu(N,m),rt=yield new Gr(N,K,w).execute();return rt&&!w&&(delete rt.user._redirectEventId,yield N._persistUserIfCurrent(rt.user),yield N._setRedirectUser(null,m)),rt})).apply(this,arguments)}function Hl(A){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,C.Z)(function*(A){const m=Yu(`${A.uid}:::`);return A._redirectEventId=m,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),m})).apply(this,arguments)}class vu{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let w=!1;return this.consumers.forEach(N=>{this.isEventForConsumer(m,N)&&(w=!0,this.sendToConsumer(m,N),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function zl(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lu(A);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=m,w=!0)),w}sendToConsumer(m,w){var N;if(m.error&&!Lu(m)){const K=(null===(N=m.error.code)||void 0===N?void 0:N.split("auth/")[1])||"internal-error";w.onError(Me(this.auth,K))}else w.onAuthEvent(m)}isEventForConsumer(m,w){const N=null===w.eventId||!!m.eventId&&m.eventId===w.eventId;return w.filter.includes(m.type)&&N}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gl(m))}saveEventToCache(m){this.cachedEventUids.add(Gl(m)),this.lastProcessedEventTime=Date.now()}}function Gl(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(m=>m).join("-")}function Lu({type:A,error:m}){return"unknown"===A&&"auth/no-auth-event"===m?.code}function Eu(A){return co.apply(this,arguments)}function co(){return(co=(0,C.Z)(function*(A,m={}){return fn(A,"GET","/v1/projects",m)})).apply(this,arguments)}const el=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bc=/^https?/;function bl(){return(bl=(0,C.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:m}=yield Eu(A);for(const w of m)try{if(wu(w))return}catch{}$t(A,"unauthorized-domain")})).apply(this,arguments)}function wu(A){const m=Rt(),{protocol:w,hostname:N}=new URL(m);if(A.startsWith("chrome-extension://")){const rt=new URL(A);return""===rt.hostname&&""===N?"chrome-extension:"===w&&A.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===w&&rt.hostname===N}if(!Bc.test(w))return!1;if(el.test(A))return N===A;const K=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(N)}const Cu=new Mt(3e4,6e4);function ks(){const A=Gi().___jsl;if(A?.H)for(const m of Object.keys(A.H))if(A.H[m].r=A.H[m].r||[],A.H[m].L=A.H[m].L||[],A.H[m].r=[...A.H[m].L],A.CP)for(let w=0;w<A.CP.length;w++)A.CP[w]=null}let ja=null;function Pi(A){return ja=ja||function Vu(A){return new Promise((m,w)=>{var N,K,ue;function rt(){ks(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ks(),w(Me(A,"network-request-failed"))},timeout:Cu.get()})}if(null!==(K=null===(N=Gi().gapi)||void 0===N?void 0:N.iframes)&&void 0!==K&&K.Iframe)m(gapi.iframes.getContext());else{if(null===(ue=Gi().gapi)||void 0===ue||!ue.load){const Lt=Bl("iframefcb");return Gi()[Lt]=()=>{gapi.load?rt():w(Me(A,"network-request-failed"))},ds(`https://apis.google.com/js/api.js?onload=${Lt}`).catch(gn=>w(gn))}rt()}}).catch(m=>{throw ja=null,m})}(A),ja}const Iu=new Mt(5e3,15e3),tl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},So=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nl(A){const m=A.config;ee(m.authDomain,A,"auth-domain-config-required");const w=m.emulator?tn(m,"emulator/auth/iframe"):`https://${A.config.authDomain}/__/auth/iframe`,N={apiKey:m.apiKey,appName:A.name,v:Z.SDK_VERSION},K=So.get(A.config.apiHost);K&&(N.eid=K);const ue=A._getFrameworks();return ue.length&&(N.fw=ue.join(",")),`${w}?${(0,p.xO)(N).slice(1)}`}function $a(){return $a=(0,C.Z)(function*(A){const m=yield Pi(A),w=Gi().gapi;return ee(w,A,"internal-error"),m.open({where:document.body,url:nl(A),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tl,dontclear:!0},N=>new Promise(function(){var K=(0,C.Z)(function*(ue,rt){yield N.restyle({setHideOnLeave:!1});const Lt=Me(A,"network-request-failed"),gn=Gi().setTimeout(()=>{rt(Lt)},Iu.get());function Fn(){Gi().clearTimeout(gn),ue(N)}N.ping(Fn).then(Fn,()=>{rt(Lt)})});return function(ue,rt){return K.apply(this,arguments)}}()))}),$a.apply(this,arguments)}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ho(A,m,w,N,K,ue){ee(A.config.authDomain,A,"auth-domain-config-required"),ee(A.config.apiKey,A,"invalid-api-key");const rt={apiKey:A.config.apiKey,appName:A.name,authType:w,redirectUrl:N,v:Z.SDK_VERSION,eventId:K};if(m instanceof Si){m.setDefaultLanguage(A.languageCode),rt.providerId=m.providerId||"",(0,p.xb)(m.getCustomParameters())||(rt.customParameters=JSON.stringify(m.getCustomParameters()));for(const[gn,Fn]of Object.entries(ue||{}))rt[gn]=Fn}if(m instanceof Ai){const gn=m.getScopes().filter(Fn=>""!==Fn);gn.length>0&&(rt.scopes=gn.join(","))}A.tenantId&&(rt.tid=A.tenantId);const Lt=rt;for(const gn of Object.keys(Lt))void 0===Lt[gn]&&delete Lt[gn];return`${function Ao({config:A}){return A.emulator?tn(A,"emulator/auth/handler"):`https://${A.authDomain}/__/auth/handler`}(A)}?${(0,p.xO)(Lt).slice(1)}`}const bs="webStorageSupport",Bu=class Ha{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qo,this._completeRedirectFn=To,this._overrideRedirectResult=nu}_openPopup(m,w,N,K){var ue=this;return(0,C.Z)(function*(){var rt;Ze(null===(rt=ue.eventManagers[m._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Lt=ho(m,w,N,Rt(),K);return function Du(A,m,w,N=500,K=600){const ue=Math.max((window.screen.availHeight-K)/2,0).toString(),rt=Math.max((window.screen.availWidth-N)/2,0).toString();let Lt="";const gn=Object.assign(Object.assign({},bu),{width:N.toString(),height:K.toString(),top:ue,left:rt}),Fn=(0,p.z$)().toLowerCase();w&&(Lt=vt(Fn)?"_blank":w),Ae(Fn)&&(m=m||"http://localhost",gn.scrollbars="yes");const vr=Object.entries(gn).reduce((Bo,[Yr,Ur])=>`${Bo}${Yr}=${Ur},`,"");if(function Xe(A=(0,p.z$)()){var m;return pe(A)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Fn)&&"_self"!==Lt)return function rl(A,m){const w=document.createElement("a");w.href=A,w.target=m;const N=document.createEvent("MouseEvent");N.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(N)}(m||"",Lt),new mc(null);const vi=window.open(m||"",Lt,vr);ee(vi,A,"popup-blocked");try{vi.focus()}catch{}return new mc(vi)}(m,Lt,Yu())})()}_openRedirect(m,w,N,K){var ue=this;return(0,C.Z)(function*(){return yield ue._originValidation(m),function Qu(A){Gi().location.href=A}(ho(m,w,N,Rt(),K)),new Promise(()=>{})})()}_initialize(m){const w=m._key();if(this.eventManagers[w]){const{manager:K,promise:ue}=this.eventManagers[w];return K?Promise.resolve(K):(Ze(ue,"If manager is not set, promise should be"),ue)}const N=this.initAndGetManager(m);return this.eventManagers[w]={promise:N},N.catch(()=>{delete this.eventManagers[w]}),N}initAndGetManager(m){var w=this;return(0,C.Z)(function*(){const N=yield function ql(A){return $a.apply(this,arguments)}(m),K=new vu(m);return N.register("authEvent",ue=>(ee(ue?.authEvent,m,"invalid-auth-event"),{status:K.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[m._key()]={manager:K},w.iframes[m._key()]=N,K})()}_isIframeWebStorageSupported(m,w){this.iframes[m._key()].send(bs,{type:bs},K=>{var ue;const rt=null===(ue=K?.[0])||void 0===ue?void 0:ue[bs];void 0!==rt&&w(!!rt),$t(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const w=m._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Uu(A){return bl.apply(this,arguments)}(m)),this.originValidationPromises[w]}get _shouldInitProactively(){return Jt()||Fe()||pe()}};class $u extends class ju{constructor(m){this.factorId=m}_process(m,w,N){switch(w.type){case"enroll":return this._finalizeEnroll(m,w.credential,N);case"signin":return this._finalizeSignIn(m,w.credential);default:return ie("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new $u(m)}_finalizeEnroll(m,w,N){return function Qi(A,m){return fn(A,"POST","/v2/accounts/mfaEnrollment:finalize",Vn(A,m))}(m,{idToken:w,displayName:N,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,w){return function Io(A,m){return fn(A,"POST","/v2/accounts/mfaSignIn:finalize",Vn(A,m))}(m,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wa=(()=>{class A{constructor(){}static assertion(w){return $u._fromCredential(w)}}return A.FACTOR_ID="phone",A})();var Ca="@firebase/auth";class _c{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var w=this;return(0,C.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const w=this.auth.onIdTokenChanged(N=>{var K;m((null===(K=N)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,w),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const w=this.internalListeners.get(m);!w||(this.internalListeners.delete(m),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function na(A=(0,Z.getApp)()){const m=(0,Z._getProvider)(A,"auth");return m.isInitialized()?m.getImmediate():function $e(A,m){const w=(0,Z._getProvider)(A,"auth");if(w.isInitialized()){const K=w.getImmediate(),ue=w.getOptions();if((0,p.vZ)(ue,m??{}))return K;$t(K,"already-initialized")}return w.initialize({options:m})}(A,{popupRedirectResolver:Bu,persistence:[fu,fa,Qo]})}!function sl(A){(0,Z._registerComponent)(new Le.wA("auth",(m,{options:w})=>{const N=m.getProvider("app").getImmediate(),K=m.getProvider("heartbeat"),{apiKey:ue,authDomain:rt}=N.options;return((Lt,gn)=>{ee(ue&&!ue.includes(":"),"invalid-api-key",{appName:Lt.name}),ee(!rt?.includes(":"),"argument-error",{appName:Lt.name});const Fn={apiKey:ue,authDomain:rt,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:se(A)},vr=new te(Lt,gn,Fn);return function Ke(A,m){const w=m?.persistence||[],N=(Array.isArray(w)?w:[w]).map(Ue);m?.errorMap&&A._updateErrorMap(m.errorMap),A._initializeWithPersistence(N,m?.popupRedirectResolver)}(vr,w),vr})(N,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,w,N)=>{m.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new Le.wA("auth-internal",m=>{const w=Te(m.getProvider("auth").getImmediate());return new _c(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(Ca,"0.20.7",function Oi(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,Z.registerVersion)(Ca,"0.20.7","esm2017")}("Browser")},5525:(an,ot,j)=>{j.d(ot,{u7:()=>Rh,Jj:()=>qu,IX:()=>T_,my:()=>ys,xU:()=>cd,Lz:()=>du,WA:()=>Kt,F8:()=>Nf,$q:()=>Bd,W:()=>lc,EK:()=>ci,PU:()=>rg,l7:()=>Is,Ky:()=>on,Xb:()=>Ri,Cf:()=>di,K9:()=>Ru,Me:()=>Ba,yq:()=>Qi,Wi:()=>w_,ET:()=>Ro,Ab:()=>H_,vr:()=>$_,Fc:()=>$p,hJ:()=>I_,B$:()=>Up,at:()=>uc,oe:()=>V_,AK:()=>Tm,TF:()=>x_,JU:()=>Vp,ST:()=>om,fH:()=>jp,Ix:()=>A_,Wu:()=>pm,Lx:()=>fm,qY:()=>go,GL:()=>$d,QT:()=>ym,kl:()=>vm,Xk:()=>Em,PL:()=>wm,UQ:()=>Yy,zN:()=>L_,ad:()=>D_,nP:()=>Dm,b9:()=>Jp,vh:()=>cm,Pb:()=>M_,L$:()=>R_,cf:()=>Im,sc:()=>B_,Xo:()=>lm,IO:()=>Zp,iE:()=>im,Eo:()=>b_,i3:()=>bm,Bt:()=>Hd,pl:()=>U_,Ub:()=>Xs,qK:()=>O_,TQ:()=>dm,e0:()=>eg,r7:()=>Cm,Mx:()=>S_,ar:()=>Kp});var we,C=j(5861),p=j(9681),Z=j(4859),R=j(1877),ve=j(2090),Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={},Ye=Ye||{},re=Le||self;function he(){}function Ce(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function dt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var at="closure_uid_"+(1e9*Math.random()>>>0),Ft=0;function it(i,e,n){return i.call.apply(i.bind,arguments)}function et(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Vt(i,e,n){return(Vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?it:et).apply(null,arguments)}function $t(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Me(i,e){function n(){}n.prototype=e.prototype,i.X=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(o,u,f){for(var I=Array(arguments.length-2),P=2;P<arguments.length;P++)I[P-2]=arguments[P];return e.prototype[u].apply(o,I)}}function lt(){this.s=this.s,this.o=this.o}var ct={};lt.prototype.s=!1,lt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function ht(i){return Object.prototype.hasOwnProperty.call(i,at)&&i[at]||(i[at]=++Ft)}(this);delete ct[i]}},lt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ee=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function ie(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function Ze(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Ce(o)){const u=i.length||0,f=o.length||0;i.length=u+f;for(let I=0;I<f;I++)i[u+I]=o[I]}else i.push(o)}}function Ne(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{re.addEventListener("test",he,e),re.removeEventListener("test",he,e)}catch{}return i}();function $e(i){return/^[\s\xa0]*$/.test(i)}var Ke=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Rt(i,e){return i<e?-1:i>e?1:0}function bt(){var i=re.navigator;return i&&(i=i.userAgent)?i:""}function Yt(i){return-1!=bt().indexOf(i)}function wn(i){return wn[" "](i),i}wn[" "]=he;var er,i,Mt=Yt("Opera"),tn=Yt("Trident")||Yt("MSIE"),Gn=Yt("Edge"),On=Gn||tn,Kn=Yt("Gecko")&&!(-1!=bt().toLowerCase().indexOf("webkit")&&!Yt("Edge"))&&!(Yt("Trident")||Yt("MSIE"))&&!Yt("Edge"),Vn=-1!=bt().toLowerCase().indexOf("webkit")&&!Yt("Edge");function fn(){var i=re.document;return i?i.documentMode:void 0}e:{var hr="",Dr=(i=bt(),Kn?/rv:([^\);]+)(\)|;)/.exec(i):Gn?/Edge\/([\d\.]+)/.exec(i):tn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Vn?/WebKit\/(\S+)/.exec(i):Mt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Dr&&(hr=Dr?Dr[1]:""),tn){var cr=fn();if(null!=cr&&cr>parseFloat(hr)){er=String(cr);break e}}er=hr}var ar={};var Pr=re.document&&tn&&(fn()||parseInt(er,10))||void 0;function mr(i,e){if(Ne.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Kn){e:{try{wn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Xt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&mr.X.h.call(this)}}Me(mr,Ne);var Xt={2:"touch",3:"pen",4:"mouse"};mr.prototype.h=function(){mr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var dr="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Zn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.ha=u,this.key=++Yn,this.ba=this.ea=!1}function fr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function oi(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Er(i){const e={};for(const n in i)e[n]=i[n];return e}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let f=0;f<tt.length;f++)n=tt[f],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function _e(i){this.src=i,this.g={},this.h=0}function ft(i,e){var n=e.type;if(n in i.g){var f,o=i.g[n],u=ee(o,e);(f=0<=u)&&Array.prototype.splice.call(o,u,1),f&&(fr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function gt(i,e,n,o){for(var u=0;u<i.length;++u){var f=i[u];if(!f.ba&&f.listener==e&&f.capture==!!n&&f.ha==o)return u}return-1}_e.prototype.add=function(i,e,n,o,u){var f=i.toString();(i=this.g[f])||(i=this.g[f]=[],this.h++);var I=gt(i,e,o,u);return-1<I?(e=i[I],n||(e.ea=!1)):((e=new Zn(e,this.src,f,!!o,u)).ea=n,i.push(e)),e};var nn="closure_lm_"+(1e6*Math.random()|0),vn={};function Hn(i,e,n,o,u){if(o&&o.once)return En(i,e,n,o,u);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Hn(i,e[f],n,o,u);return null}return n=Ie(n),i&&i[dr]?i.N(e,n,dt(o)?!!o.capture:!!o,u):Ht(i,e,n,!1,o,u)}function Ht(i,e,n,o,u,f){if(!e)throw Error("Invalid event type");var I=dt(u)?!!u.capture:!!u,P=ce(i);if(P||(i[nn]=P=new _e(i)),(n=P.add(e,n,o,I,f)).proxy)return n;if(o=function tr(){const e=le;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Ue||(u=I),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(De(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function En(i,e,n,o,u){if(Array.isArray(e)){for(var f=0;f<e.length;f++)En(i,e[f],n,o,u);return null}return n=Ie(n),i&&i[dr]?i.O(e,n,dt(o)?!!o.capture:!!o,u):Ht(i,e,n,!0,o,u)}function Rr(i,e,n,o,u){if(Array.isArray(e))for(var f=0;f<e.length;f++)Rr(i,e[f],n,o,u);else o=dt(o)?!!o.capture:!!o,n=Ie(n),i&&i[dr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=gt(f=i.g[e],n,o,u))&&(fr(f[n]),Array.prototype.splice.call(f,n,1),0==f.length&&(delete i.g[e],i.h--))):i&&(i=ce(i))&&(e=i.g[e.toString()],i=-1,e&&(i=gt(e,n,o,u)),(n=-1<i?e[i]:null)&&xn(n))}function xn(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[dr])ft(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(De(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=ce(e))?(ft(n,i),0==n.h&&(n.src=null,e[nn]=null)):fr(i)}}}function De(i){return i in vn?vn[i]:vn[i]="on"+i}function le(i,e){if(i.ba)i=!0;else{e=new mr(e,this);var n=i.listener,o=i.ha||i.src;i.ea&&xn(i),i=n.call(o,e)}return i}function ce(i){return(i=i[nn])instanceof _e?i:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(i){return"function"==typeof i?i:(i[be]||(i[be]=function(e){return i.handleEvent(e)}),i[be])}function yt(){lt.call(this),this.i=new _e(this),this.P=this,this.I=null}function kt(i,e){var n,o=i.I;if(o)for(n=[];o;o=o.I)n.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Ne(e,i);else if(e instanceof Ne)e.target=e.target||i;else{var u=e;me(e=new Ne(o,i),u)}if(u=!0,n)for(var f=n.length-1;0<=f;f--){var I=e.g=n[f];u=yn(I,o,!0,e)&&u}if(u=yn(I=e.g=i,o,!0,e)&&u,u=yn(I,o,!1,e)&&u,n)for(f=0;f<n.length;f++)u=yn(I=e.g=n[f],o,!1,e)&&u}function yn(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,f=0;f<e.length;++f){var I=e[f];if(I&&!I.ba&&I.capture==n){var P=I.listener,$=I.ha||I.src;I.ea&&ft(i.i,I),u=!1!==P.call($,o)&&u}}return u&&!o.defaultPrevented}Me(yt,lt),yt.prototype[dr]=!0,yt.prototype.removeEventListener=function(i,e,n,o){Rr(this,i,e,n,o)},yt.prototype.M=function(){if(yt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)fr(n[o]);delete i.g[e],i.h--}}this.I=null},yt.prototype.N=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},yt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var rr=re.JSON.stringify;function Qn(){var i=Ee;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Bt,Je=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ae,i=>i.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Fe(i){re.setTimeout(()=>{throw i},0)}function vt(i,e){Bt||function _n(){var i=re.Promise.resolve(void 0);Bt=function(){i.then(pe)}}(),bn||(Bt(),bn=!0),Ee.add(i,e)}var bn=!1,Ee=new class Ir{constructor(){this.h=this.g=null}add(e,n){const o=Je.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}};function pe(){for(var i;i=Qn();){try{i.h.call(i.g)}catch(n){Fe(n)}var e=Je;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}bn=!1}function de(i,e){yt.call(this),this.h=i||1,this.g=e||re,this.j=Vt(this.kb,this),this.l=Date.now()}function Xe(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function pt(i,e,n){if("function"==typeof i)n&&(i=Vt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Vt(i.handleEvent,i)}return 2147483647<Number(e)?-1:re.setTimeout(i,e||0)}function Jt(i){i.g=pt(()=>{i.g=null,i.i&&(i.i=!1,Jt(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Me(de,yt),(we=de.prototype).ca=!1,we.R=null,we.kb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),kt(this,"tick"),this.ca&&(Xe(this),this.start()))}},we.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},we.M=function(){de.X.M.call(this),Xe(this),delete this.g};class Pe extends lt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jt(this)}M(){super.M(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(i){lt.call(this),this.h=i,this.g={}}Me(se,lt);var G=[];function te(i,e,n,o){Array.isArray(n)||(n&&(G[0]=n.toString()),n=G);for(var u=0;u<n.length;u++){var f=Hn(e,n[u],o||i.handleEvent,!1,i.h||i);if(!f)break;i.g[f.key]=f}}function Te(i){oi(i.g,function(e,n){this.g.hasOwnProperty(n)&&xn(e)},i),i.g={}}function oe(){this.g=!0}function Zt(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Un(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var f=u[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var I=1;I<u.length;I++)u[I]=""}}}return rr(n)}catch{return e}}(i,n)+(o?" "+o:"")})}se.prototype.M=function(){se.X.M.call(this),Te(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oe.prototype.Aa=function(){this.g=!1},oe.prototype.info=function(){};var hn={},wr=null;function zr(){return wr=wr||new yt}function ri(i){Ne.call(this,hn.Oa,i)}function ir(i){const e=zr();kt(e,new ri(e,i))}function mi(i,e){Ne.call(this,hn.STAT_EVENT,i),this.stat=e}function qr(i){const e=zr();kt(e,new mi(e,i))}function sr(i,e){Ne.call(this,hn.Pa,i),this.size=e}function or(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){i()},e)}hn.Oa="serverreachability",Me(ri,Ne),hn.STAT_EVENT="statevent",Me(mi,Ne),hn.Pa="timingevent",Me(sr,Ne);var kn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},qe={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ke(){}function Nt(){}ke.prototype.h=null;var Ln,Wt={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function dn(){Ne.call(this,"d")}function Mn(){Ne.call(this,"c")}function Bn(){}function Or(i,e,n,o){this.l=i,this.j=e,this.m=n,this.U=o||1,this.S=new se(this),this.O=wi,this.T=new de(i=On?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new rs}function rs(){this.i=null,this.g="",this.h=!1}Me(dn,Ne),Me(Mn,Ne),Me(Bn,ke),Bn.prototype.g=function(){return new XMLHttpRequest},Bn.prototype.i=function(){return{}},Ln=new Bn;var wi=45e3,_i={},Zi={};function Qs(i,e,n){i.K=1,i.v=oo(Vi(e)),i.s=n,i.P=!0,Ki(i,null)}function Ki(i,e){i.F=Date.now(),la(i),i.A=Vi(i.v);var n=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Da(n.i,"t",o),i.C=0,n=i.l.H,i.h=new rs,i.g=F(i.l,n?e:null,!i.s),0<i.N&&(i.L=new Pe(Vt(i.Ka,i,i.g),i.N)),te(i.S,i.g,"readystatechange",i.hb),e=i.H?Er(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),ir(1),function ze(i,e,n,o,u,f){i.info(function(){if(i.g)if(f)for(var I="",P=f.split("&"),$=0;$<P.length;$++){var q=P[$].split("=");if(1<q.length){var ae=q[0];q=q[1];var Be=ae.split("_");I=2<=Be.length&&"type"==Be[1]?I+(ae+"=")+q+"&":I+(ae+"=redacted&")}}else I=null;else I=f;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+I})}(i.j,i.u,i.A,i.m,i.U,i.s)}function No(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Ss(i,e,n){let u,o=!0;for(;!i.I&&i.C<n.length;){if(u=ba(i,n),u==Zi){4==e&&(i.o=4,qr(14),o=!1),Zt(i.j,i.m,null,"[Incomplete Response]");break}if(u==_i){i.o=4,qr(15),Zt(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Zt(i.j,i.m,u,null),Po(i,u)}No(i)&&u!=Zi&&u!=_i&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,qr(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Na(e),e.K=!0,qr(11))):(Zt(i.j,i.m,n,"[Invalid Chunked Response]"),Vs(i),ca(i))}function ba(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Zi:(n=Number(e.substring(n,o)),isNaN(n)?_i:(o+=1)+n>e.length?Zi:(e=e.substr(o,n),i.C=o+n,e))}function la(i){i.V=Date.now()+i.O,Ta(i,i.O)}function Ta(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=or(Vt(i.fb,i),e)}function yo(i){i.B&&(re.clearTimeout(i.B),i.B=null)}function ca(i){0==i.l.G||i.I||xs(i.l,i)}function Vs(i){yo(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Xe(i.T),Te(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Po(i,e){try{var n=i.l;if(0!=n.G&&(n.g==i||sn(n.h,i)))if(!i.J&&sn(n.h,i)&&3==n.G){try{var o=n.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<i.F))break e;ha(n),uo(n)}da(n),qr(18)}}else n.Ba=u[1],0<n.Ba-n.T&&37500>u[2]&&n.L&&0==n.A&&!n.v&&(n.v=or(Vt(n.bb,n),6e3));if(1>=Ct(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Co(n,11)}else if((i.J||n.g==i)&&ha(n),!$e(e))for(u=n.Fa.g.parse(e),e=0;e<u.length;e++){let q=u[e];if(n.T=q[0],q=q[1],2==n.G)if("c"==q[0]){n.I=q[1],n.ka=q[2];const ae=q[3];null!=ae&&(n.ma=ae,n.j.info("VER="+n.ma));const Be=q[4];null!=Be&&(n.Ca=Be,n.j.info("SVER="+n.Ca));const Et=q[5];null!=Et&&"number"==typeof Et&&0<Et&&(n.J=o=1.5*Et,n.j.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ut=i.g;if(Ut){const Gt=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gt){var f=o.h;f.g||-1==Gt.indexOf("spdy")&&-1==Gt.indexOf("quic")&&-1==Gt.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(un(f,f.h),f.h=null))}if(o.D){const In=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;In&&(o.za=In,Sr(o.F,o.D,In))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-i.F,n.j.info("Handshake RTT: "+n.P+"ms"));var I=i;if((o=n).sa=Pa(o,o.H?o.ka:null,o.V),I.J){yr(o.h,I);var P=I,$=o.J;$&&P.setTimeout($),P.B&&(yo(P),la(P)),o.g=I}else Ra(o);0<n.i.length&&Cs(n)}else"stop"!=q[0]&&"close"!=q[0]||Co(n,7);else 3==n.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?Co(n,7):Gs(n):"noop"!=q[0]&&n.l&&n.l.wa(q),n.A=0)}ir(4)}catch{}}function is(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ce(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function gr(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ce(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Bs(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ce(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,f=0;f<u;f++)e.call(void 0,o[f],n&&n[f],i)}(we=Or.prototype).setTimeout=function(i){this.O=i},we.hb=function(i){i=i.target;const e=this.L;e&&3==ji(i)?e.l():this.Ka(i)},we.Ka=function(i){try{if(i==this.g)e:{const ae=ji(this.g);var e=this.g.Ea();const Be=this.g.aa();if(!(3>ae)&&(3!=ae||On||this.g&&(this.h.h||this.g.fa()||Aa(this.g)))){this.I||4!=ae||7==e||ir(8==e||0>=Be?3:2),yo(this);var n=this.g.aa();this.Y=n;t:if(No(this)){var o=Aa(this.g);i="";var u=o.length,f=4==ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),ca(this);var I="";break t}this.h.i=new re.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:f&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==n,function ut(i,e,n,o,u,f,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+f+" "+I})}(this.j,this.u,this.A,this.m,this.U,ae,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$e(P)){var q=P;break t}}q=null}if(!(n=q)){this.i=!1,this.o=3,qr(12),Vs(this),ca(this);break e}Zt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Po(this,n)}this.P?(Ss(this,ae,I),On&&this.i&&3==ae&&(te(this.S,this.T,"tick",this.gb),this.T.start())):(Zt(this.j,this.m,I,null),Po(this,I)),4==ae&&Vs(this),this.i&&!this.I&&(4==ae?xs(this.l,this):(this.i=!1,la(this)))}else 400==n&&0<I.indexOf("Unknown SID")?(this.o=3,qr(12)):(this.o=0,qr(13)),Vs(this),ca(this)}}}catch{}},we.gb=function(){if(this.g){var i=ji(this.g),e=this.g.fa();this.C<e.length&&(yo(this),Ss(this,i,e),this.i&&4!=i&&la(this))}},we.cancel=function(){this.I=!0,Vs(this)},we.fb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Tn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ir(3),qr(17)),Vs(this),this.o=2,ca(this)):Ta(this,this.V-i)};var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jr(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Jr){this.h=void 0!==e?e:i.h,Di(this,i.j),this.s=i.s,this.g=i.g,Si(this,i.m),this.l=i.l,e=i.i;var n=new vs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ai(this,n),this.o=i.o}else i&&(n=String(i).match(js))?(this.h=!!e,Di(this,n[1]||"",!0),this.s=$s(n[2]||""),this.g=$s(n[3]||"",!0),Si(this,n[4]),this.l=$s(n[5]||"",!0),Ai(this,n[6]||"",!0),this.o=$s(n[7]||"")):(this.h=!!e,this.i=new vs(null,this.h))}function Vi(i){return new Jr(i)}function Di(i,e,n){i.j=n?$s(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Si(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ai(i,e,n){e instanceof vs?(i.i=e,function Se(i,e){e&&!i.j&&(Ii(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(ko(this,o),Da(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Yi(e,Oo)),i.i=new vs(e,i.h))}function Sr(i,e,n){i.i.set(e,n)}function oo(i){return Sr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function $s(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Yi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Hs),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Hs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Jr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Yi(e,Ws,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Yi(e,Ws,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Yi(n,"/"==n.charAt(0)?xi:Go,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Yi(n,Ci)),i.join("")};var Ws=/[#\/\?@]/g,Go=/[#\?:]/g,xi=/[#\?]/g,Oo=/[#\?@]/g,Ci=/#/g;function vs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ii(i){i.g||(i.g=new Map,i.h=0,i.i&&function vo(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var f=i[n].substring(0,o);u=i[n].substring(o+1)}else f=i[n];e(f,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ko(i,e){Ii(i),e=Hr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ei(i,e){return Ii(i),e=Hr(i,e),i.g.has(e)}function Da(i,e,n){ko(i,e),0<n.length&&(i.i=null,i.g.set(Hr(i,e),ie(n)),i.h+=n.length)}function Hr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function We(i){this.l=i||st,i=re.PerformanceNavigationTiming?0<(i=re.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(re.g&&re.g.Ga&&re.g.Ga()&&re.g.Ga().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(we=vs.prototype).add=function(i,e){Ii(this),this.i=null,i=Hr(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},we.forEach=function(i,e){Ii(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},we.oa=function(){Ii(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let f=0;f<u.length;f++)n.push(e[o])}return n},we.W=function(i){Ii(this);let e=[];if("string"==typeof i)ei(this,i)&&(e=e.concat(this.g.get(Hr(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},we.set=function(i,e){return Ii(this),this.i=null,ei(this,i=Hr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},we.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},we.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const f=encodeURIComponent(String(o)),I=this.W(o);for(o=0;o<I.length;o++){var u=f;""!==I[o]&&(u+="="+encodeURIComponent(String(I[o]))),i.push(u)}}return this.i=i.join("&")};var st=10;function St(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ct(i){return i.h?1:i.g?i.g.size:0}function sn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function un(i,e){i.g?i.g.add(e):i.h=e}function yr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Rn(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.D);return e}return ie(i.i)}function kr(){}function Zr(){this.g=new kr}function bi(i,e,n){const o=n||"";try{is(i,function(u,f){let I=u;dt(u)&&(I=rr(u)),e.push(o+f+"="+encodeURIComponent(I))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function jn(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Es(i){this.l=i.$b||null,this.j=i.ib||!1}function ws(i,e){yt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}We.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},kr.prototype.stringify=function(i){return re.JSON.stringify(i,void 0)},kr.prototype.parse=function(i){return re.JSON.parse(i,void 0)},Me(Es,ke),Es.prototype.g=function(){return new ws(this.l,this.j)},Es.prototype.i=function(i){return function(){return i}}({}),Me(ws,yt);var Fo=0;function Eo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ga.bind(i))}function li(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Bi(i)}function Bi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(we=ws.prototype).open=function(i,e){if(this.readyState!=Fo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Bi(this)},we.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||re).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},we.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,li(this)),this.readyState=Fo},we.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Eo(this)}else i.text().then(this.Ua.bind(this),this.ga.bind(this))},we.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?li(this):Bi(this),3==this.readyState&&Eo(this)}},we.Ua=function(i){this.g&&(this.response=this.responseText=i,li(this))},we.Ta=function(i){this.g&&(this.response=i,li(this))},we.ga=function(){this.g&&li(this)},we.setRequestHeader=function(i,e){this.v.append(i,e)},we.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},we.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Fi=re.JSON.parse;function ii(i){yt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jt,this.K=this.L=!1}Me(ii,yt);var jt="",Nr=/^https?$/i,zo=["POST","PUT"];function Wi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Js(i),ls(i)}function Js(i){i.D||(i.D=!0,kt(i,"complete"),kt(i,"error"))}function ao(i){if(i.h&&typeof Ye<"u"&&(!i.C[1]||4!=ji(i)||2!=i.aa()))if(i.v&&4==ji(i))pt(i.Ha,0,i);else if(kt(i,"readystatechange"),4==ji(i)){i.h=!1;try{const P=i.aa();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===P){var u=String(i.H).match(js)[1]||null;if(!u&&re.self&&re.self.location){var f=re.self.location.protocol;u=f.substr(0,f.length-1)}o=!Nr.test(u?u.toLowerCase():"")}n=o}if(n)kt(i,"complete"),kt(i,"success");else{i.m=6;try{var I=2<ji(i)?i.g.statusText:""}catch{I=""}i.j=I+" ["+i.aa()+"]",Js(i)}}finally{ls(i)}}}function ls(i,e){if(i.g){Sa(i);const n=i.g,o=i.C[0]?he:null;i.g=null,i.C=null,e||kt(i,"ready");try{n.onreadystatechange=o}catch{}}}function Sa(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(re.clearTimeout(i.A),i.A=null)}function ji(i){return i.g?i.g.readyState:0}function Aa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case jt:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(i){let e="";return oi(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function hu(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=xa(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Sr(i,e,n))}function cs(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Li(i){this.Ca=0,this.i=[],this.j=new oe,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=cs("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=cs("baseRetryDelayMs",5e3,i),this.ab=cs("retryDelaySeedMs",1e4,i),this.Za=cs("forwardChannelMaxRetries",2,i),this.ta=cs("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Yb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new We(i&&i.concurrentRequestLimit),this.Fa=new Zr,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=i&&i.Wb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Gs(i){if(Ma(i),3==i.G){var e=i.U++,n=Vi(i.F);Sr(n,"SID",i.I),Sr(n,"RID",e),Sr(n,"TYPE","terminate"),As(i,n),(e=new Or(i,i.j,e,void 0)).K=2,e.v=oo(Vi(n)),n=!1,re.navigator&&re.navigator.sendBeacon&&(n=re.navigator.sendBeacon(e.v.toString(),"")),!n&&re.Image&&((new Image).src=e.v,n=!0),n||(e.g=F(e.l,null),e.g.da(e.v)),e.F=Date.now(),la(e)}Yo(i)}function uo(i){i.g&&(Na(i),i.g.cancel(),i.g=null)}function Ma(i){uo(i),i.u&&(re.clearTimeout(i.u),i.u=null),ha(i),i.h.cancel(),i.m&&("number"==typeof i.m&&re.clearTimeout(i.m),i.m=null)}function Cs(i){St(i.h)||i.m||(i.m=!0,vt(i.Ja,i),i.C=0)}function Zo(i,e){var n;n=e?e.m:i.U++;const o=Vi(i.F);Sr(o,"SID",i.I),Sr(o,"RID",n),Sr(o,"AID",i.T),As(i,o),i.o&&i.s&&hu(o,i.o,i.s),n=new Or(i,i.j,n,i.C+1),null===i.o&&(n.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Ku(i,n,1e3),n.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),un(i.h,n),Qs(n,o,e)}function As(i,e){i.ia&&oi(i.ia,function(n,o){Sr(e,o,n)}),i.l&&is({},function(n,o){Sr(e,o,n)})}function Ku(i,e,n){n=Math.min(i.i.length,n);var o=i.l?Vt(i.l.Qa,i.l,i):null;e:{var u=i.i;let f=-1;for(;;){const I=["count="+n];-1==f?0<n?(f=u[0].h,I.push("ofs="+f)):f=0:I.push("ofs="+f);let P=!0;for(let $=0;$<n;$++){let q=u[$].h;const ae=u[$].g;if(q-=f,0>q)f=Math.max(0,u[$].h-100),P=!1;else try{bi(ae,I,"req"+q+"_")}catch{o&&o(ae)}}if(P){o=I.join("&");break e}}}return i=i.i.splice(0,n),e.D=i,o}function Ra(i){i.g||i.u||(i.Z=1,vt(i.Ia,i),i.A=0)}function da(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=or(Vt(i.Ia,i),Ko(i,i.A)),i.A++,0))}function Na(i){null!=i.B&&(re.clearTimeout(i.B),i.B=null)}function Ya(i){i.g=new Or(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Vi(i.sa);Sr(e,"RID","rpc"),Sr(e,"SID",i.I),Sr(e,"CI",i.L?"0":"1"),Sr(e,"AID",i.T),Sr(e,"TYPE","xmlhttp"),As(i,e),i.o&&i.s&&hu(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var n=i.g;i=i.ka,n.K=1,n.v=oo(Vi(e)),n.s=null,n.P=!0,Ki(n,i)}function ha(i){null!=i.v&&(re.clearTimeout(i.v),i.v=null)}function xs(i,e){var n=null;if(i.g==e){ha(i),Na(i),i.g=null;var o=2}else{if(!sn(i.h,e))return;n=e.D,yr(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;kt(o=zr(),new sr(o,n,e,u)),Cs(i)}else Ra(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function wo(i,e){return!(Ct(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Ya?0:i.Za)||(i.m=or(Vt(i.Ja,i,e),Ko(i,i.C)),i.C++,0)))}(i,e)||2==o&&da(i)))switch(n&&0<n.length&&(e=i.h,e.i=e.i.concat(n)),u){case 1:Co(i,5);break;case 4:Co(i,10);break;case 3:Co(i,6);break;default:Co(i,2)}}function Ko(i,e){let n=i.Wa+Math.floor(Math.random()*i.ab);return i.l||(n*=2),n*e}function Co(i,e){if(i.j.info("Error code "+e),2==e){var n=null;i.l&&(n=null);var o=Vt(i.jb,i);n||(n=new Jr("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||Di(n,"https"),oo(n)),function yi(i,e){const n=new oe;if(re.Image){const o=new Image;o.onload=$t(jn,n,o,"TestLoadImage: loaded",!0,e),o.onerror=$t(jn,n,o,"TestLoadImage: error",!1,e),o.onabort=$t(jn,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=$t(jn,n,o,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else qr(2);i.G=0,i.l&&i.l.va(e),Yo(i),Ma(i)}function Yo(i){if(i.G=0,i.la=[],i.l){const e=Rn(i.h);(0!=e.length||0!=i.i.length)&&(Ze(i.la,e),Ze(i.la,i.i),i.h.i.length=0,ie(i.i),i.i.length=0),i.l.ua()}}function Pa(i,e,n){var o=n instanceof Jr?Vi(n):new Jr(n,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),Si(o,o.m);else{var u=re.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var f=new Jr(null,void 0);o&&Di(f,o),e&&(f.g=e),u&&Si(f,u),n&&(f.l=n),o=f}return e=i.za,(n=i.D)&&e&&Sr(o,n,e),Sr(o,"VER",i.ma),As(i,o),o}function F(i,e,n){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ii(n&&i.Da&&!i.ra?new Es({ib:!0}):i.ra)).L=i.H,e}function z(){}function U(){if(tn&&!(10<=Number(Pr)))throw Error("Environmental error: no available transport.")}function Q(i,e){yt.call(this),this.g=new Li(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Xb)&&!$e(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$e(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Tt(this)}function Oe(i){dn.call(this);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function wt(){Mn.call(this),this.status=1}function Tt(i){this.g=i}(we=ii.prototype).da=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ln.g(),this.C=function nt(i){return i.h||(i.h=i.i())}(this.u?this.u:Ln),this.g.onreadystatechange=Vt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(f){return void Wi(this,f)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const f of o.keys())n.set(f,o.get(f))}o=Array.from(n.keys()).find(f=>"content-type"==f.toLowerCase()),u=re.FormData&&i instanceof re.FormData,!(0<=ee(zo,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,I]of n)this.g.setRequestHeader(f,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sa(this),0<this.B&&((this.K=function qo(i){return tn&&function Mr(){return function An(i){var e=ar;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ke(String(er)).split("."),n=Ke("9").split("."),o=Math.max(e.length,n.length);for(let I=0;0==i&&I<o;I++){var u=e[I]||"",f=n[I]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==u[0].length&&0==f[0].length)break;i=Rt(0==u[1].length?0:parseInt(u[1],10),0==f[1].length?0:parseInt(f[1],10))||Rt(0==u[2].length,0==f[2].length)||Rt(u[2],f[2]),u=u[3],f=f[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vt(this.qa,this)):this.A=pt(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(f){Wi(this,f)}},we.qa=function(){typeof Ye<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))},we.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,kt(this,"complete"),kt(this,"abort"),ls(this))},we.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ls(this,!0)),ii.X.M.call(this)},we.Ha=function(){this.s||(this.F||this.v||this.l?ao(this):this.eb())},we.eb=function(){ao(this)},we.aa=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},we.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},we.Ra=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Fi(e)}},we.Ea=function(){return this.m},we.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(we=Li.prototype).ma=8,we.G=1,we.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Or(this,this.j,i,void 0);let f=this.s;if(this.S&&(f?(f=Er(f),me(f,this.S)):f=this.S),null!==this.o||this.N||(u.H=f,f=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var o=this.i[n];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ku(this,u,e),Sr(n=Vi(this.F),"RID",i),Sr(n,"CVER",22),this.D&&Sr(n,"X-HTTP-Session-Id",this.D),As(this,n),f&&(this.N?e="headers="+encodeURIComponent(String(xa(f)))+"&"+e:this.o&&hu(n,this.o,f)),un(this.h,u),this.Xa&&Sr(n,"TYPE","init"),this.O?(Sr(n,"$req",e),Sr(n,"SID","null"),u.Z=!0,Qs(u,n,null)):Qs(u,n,e),this.G=2}}else 3==this.G&&(i?Zo(this,i):0==this.i.length||St(this.h)||Zo(this))},we.Ia=function(){if(this.u=null,Ya(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=or(Vt(this.cb,this),i)}},we.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qr(10),uo(this),Ya(this))},we.bb=function(){null!=this.v&&(this.v=null,uo(this),da(this),qr(19))},we.jb=function(i){i?(this.j.info("Successfully pinged google.com"),qr(2)):(this.j.info("Failed to ping google.com"),qr(1))},(we=z.prototype).xa=function(){},we.wa=function(){},we.va=function(){},we.ua=function(){},we.Qa=function(){},U.prototype.g=function(i,e){return new Q(i,e)},Me(Q,yt),Q.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,n=this.h||void 0;qr(0),i.V=e,i.ia=n||{},i.L=i.Y,i.F=Pa(i,null,i.V),Cs(i)},Q.prototype.close=function(){Gs(this.g)},Q.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=rr(i),i=n);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.$a++,i)),3==e.G&&Cs(e)},Q.prototype.M=function(){this.g.l=null,delete this.j,Gs(this.g),delete this.g,Q.X.M.call(this)},Me(Oe,dn),Me(wt,Mn),Me(Tt,z),Tt.prototype.xa=function(){kt(this.g,"a")},Tt.prototype.wa=function(i){kt(this.g,new Oe(i))},Tt.prototype.va=function(i){kt(this.g,new wt(i))},Tt.prototype.ua=function(){kt(this.g,"b")},U.prototype.createWebChannel=U.prototype.g,Q.prototype.send=Q.prototype.u,Q.prototype.open=Q.prototype.m,Q.prototype.close=Q.prototype.close,kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,qe.COMPLETE="complete",Nt.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",yt.prototype.listen=yt.prototype.N,ii.prototype.listenOnce=ii.prototype.O,ii.prototype.getLastError=ii.prototype.Na,ii.prototype.getLastErrorCode=ii.prototype.Ea,ii.prototype.getStatus=ii.prototype.aa,ii.prototype.getResponseJson=ii.prototype.Ra,ii.prototype.getResponseText=ii.prototype.fa,ii.prototype.send=ii.prototype.da;var Nn=je.createWebChannelTransport=function(){return new U},Xr=je.getStatEventTarget=function(){return zr()},Br=je.ErrorCode=kn,Kr=je.EventType=qe,Fr=je.Event=hn,hi=je.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jr=je.FetchXmlHttpFactory=Es,ui=je.WebChannel=Nt,lo=je.XhrIo=ii;const Lr="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let ss="9.10.0";const Mi=new R.Yd("@firebase/firestore");function fi(){return Mi.logLevel}function Xs(i){Mi.setLogLevel(i)}function qt(i,...e){if(Mi.logLevel<=R.in.DEBUG){const n=e.map(Oa);Mi.debug(`Firestore (${ss}): ${i}`,...n)}}function ur(i,...e){if(Mi.logLevel<=R.in.ERROR){const n=e.map(Oa);Mi.error(`Firestore (${ss}): ${i}`,...n)}}function Qi(i,...e){if(Mi.logLevel<=R.in.WARN){const n=e.map(Oa);Mi.warn(`Firestore (${ss}): ${i}`,...n)}}function Oa(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Dn(i="Unexpected state"){const e=`FIRESTORE (${ss}) INTERNAL ASSERTION FAILED: `+i;throw ur(e),new Error(e)}function Xn(i,e){i||Dn()}function Ru(i,e){i||Dn()}function cn(i,e){return i}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends ve.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Nu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wr.UNAUTHENTICATED))}shutdown(){}}class fa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vl{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const f=q=>this.i!==u?(u=this.i,n(q)):Promise.resolve();let I=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ui,e.enqueueRetryable(()=>f(this.currentUser))};const P=()=>{const q=I;e.enqueueRetryable((0,C.Z)(function*(){yield q.promise,yield f(o.currentUser)}))},$=q=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(q=>$(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?$(q):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ui)}},0),P()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Xn("string"==typeof o.accessToken),new Nu(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xn(null===e||"string"==typeof e),new Wr(e)}}class Qo{constructor(e,n,o,u){this.h=e,this.l=n,this.m=o,this.g=u,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Xn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Cl{constructor(e,n,o,u){this.h=e,this.l=n,this.m=o,this.g=u}getToken(){return Promise.resolve(new Qo(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const o=f=>{null!=f.error&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const I=f.token!==this.A;return this.A=f.token,qt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>o(f))};const u=f=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.T.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.T.getImmediate({optional:!0});f?u(f):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xn("string"==typeof n.token),this.A=n.token,new Pu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gi(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Qu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Gi(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<n&&(o+=e.charAt(u[f]%e.length))}return o}}function $n(i,e){return i<e?-1:i>e?1:0}function pa(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function ka(i){return i+"\0"}class ci{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new ci(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$n(this.nanoseconds,e.nanoseconds):$n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nr(e)}static min(){return new nr(new ci(0,0))}static max(){return new nr(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lo{constructor(e,n,o){void 0===n?n=0:n>e.length&&Dn(),void 0===o?o=e.length-n:o>e.length-n&&Dn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Lo.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const f=e.get(u),I=n.get(u);if(f<I)return-1;if(f>I)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $r extends Lo{construct(e,n,o){return new $r(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new $r(n)}static emptyPath(){return new $r([])}}const Fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ri extends Lo{construct(e,n,o){return new Ri(e,n,o)}static isValidIdentifier(e){return Fa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ri.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ri(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const f=()=>{if(0===o.length)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let I=!1;for(;u<e.length;){const P=e[u];if("\\"===P){if(u+1===e.length)throw new Kt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $=e[u+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new Kt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=$,u+=2}else"`"===P?(I=!I,u++):"."!==P||I?(o+=P,u++):(f(),u++)}if(f(),I)throw new Kt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ri(n)}static emptyPath(){return new Ri([])}}class on{constructor(e){this.path=e}static fromPath(e){return new on($r.fromString(e))}static fromName(e){return new on($r.fromString(e).popFirst(5))}static empty(){return new on($r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return $r.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new on(new $r(e.slice()))}}class Uo{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Qa(i){return i.fields.find(e=>2===e.kind)}function ga(i){return i.fields.filter(e=>2!==e.kind)}Uo.UNKNOWN_ID=-1;class Jo{constructor(e,n){this.fieldPath=e,this.kind=n}}class ma{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ma(0,zs.min())}}function Ja(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=nr.fromTimestamp(1e9===o?new ci(n+1,0):new ci(n,o));return new zs(u,on.empty(),e)}function _a(i){return new zs(i.readTime,i.key,-1)}class zs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new zs(nr.min(),on.empty(),-1)}static max(){return new zs(nr.max(),on.empty(),-1)}}function Ji(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=on.comparator(i.documentKey,e.documentKey),0!==n?n:$n(i.largestBatchId,e.largestBatchId))}const fu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ou{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Io(i){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,C.Z)(function*(i){if(i.code!==Dt.FAILED_PRECONDITION||i.message!==fu)throw i;qt("LocalStore","Unexpectedly lost primary lease")}),Ua.apply(this,arguments)}class _t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _t((o,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(o,u)},this.catchCallback=f=>{this.wrapFailure(n,f).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _t?n:_t.resolve(n)}catch(n){return _t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_t.reject(n)}static resolve(e){return new _t((n,o)=>{n(e)})}static reject(e){return new _t((n,o)=>{o(e)})}static waitFor(e){return new _t((n,o)=>{let u=0,f=0,I=!1;e.forEach(P=>{++u,P.next(()=>{++f,I&&f===u&&n()},$=>o($))}),I=!0,f===u&&n()})}static or(e){let n=_t.resolve(!1);for(const o of e)n=n.next(u=>u?_t.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,f)=>{o.push(n.call(this,u,f))}),this.waitFor(o)}static mapArray(e,n){return new _t((o,u)=>{const f=e.length,I=new Array(f);let P=0;for(let $=0;$<f;$++){const q=$;n(e[q]).next(ae=>{I[q]=ae,++P,P===f&&o(I)},ae=>u(ae))}})}static doWhile(e,n){return new _t((o,u)=>{const f=()=>{!0===e()?n().next(()=>{f()},u):o()};f()})}}class ya{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Ui,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new pu(e,n.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=pc(o.target.error);this.P.reject(new pu(e,u))}}static open(e,n,o,u){try{return new ya(n,e.transaction(u,o))}catch(f){throw new pu(n,f)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ku(n)}}class ds{constructor(e,n,o){this.name=e,this.version=n,this.S=o,12.2===ds.D((0,ve.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qt("SimpleDb","Removing database:",e),va(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ve.hl)())return!1;if(ds.N())return!0;const e=(0,ve.z$)(),n=ds.D(e),o=0<n&&n<10,u=ds.k(e),f=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||f)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var n=this;return(0,C.Z)(function*(){return n.db||(qt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const f=indexedDB.open(n.name,n.version);f.onsuccess=I=>{o(I.target.result)},f.onblocked=()=>{u(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=I=>{const P=I.target.error;u("VersionError"===P.name?new Kt(Dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new Kt(Dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new pu(e,P))},f.onupgradeneeded=I=>{qt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',I.oldVersion),n.S.$(I.target.result,f.transaction,I.oldVersion,n.version).next(()=>{qt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var f=this;return(0,C.Z)(function*(){const I="readonly"===n;let P=0;for(;;){++P;try{f.db=yield f.F(e);const $=ya.open(f.db,e,I?"readonly":"readwrite",o),q=u($).next(ae=>($.V(),ae)).catch(ae=>($.abort(ae),_t.reject(ae))).toPromise();return q.catch(()=>{}),yield $.v,q}catch($){const q=$,ae="FirebaseError"!==q.name&&P<3;if(qt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ae),f.close(),!ae)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Bl{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return va(this.U.delete())}}class pu extends Kt{constructor(e,n){super(Dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function eo(i){return"IndexedDbTransactionError"===i.name}class ku{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(qt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),va(o)}add(e){return qt("SimpleDb","ADD",this.store.name,e,e),va(this.store.add(e))}get(e){return va(this.store.get(e)).next(n=>(void 0===n&&(n=null),qt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return qt("SimpleDb","DELETE",this.store.name,e),va(this.store.delete(e))}count(){return qt("SimpleDb","COUNT",this.store.name),va(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),f=[];return this.H(u,(I,P)=>{f.push(P)}).next(()=>f)}{const u=this.store.getAll(o.range);return new _t((f,I)=>{u.onerror=P=>{I(P.target.error)},u.onsuccess=P=>{f(P.target.result)}})}}J(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new _t((u,f)=>{o.onerror=I=>{f(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}Y(e,n){qt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.X=!1;const u=this.cursor(o);return this.H(u,(f,I,P)=>P.delete())}Z(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.H(u,n)}tt(e){const n=this.cursor({});return new _t((o,u)=>{n.onerror=f=>{const I=pc(f.target.error);u(I)},n.onsuccess=f=>{const I=f.target.result;I?e(I.primaryKey,I.value).next(P=>{P?I.continue():o()}):o()}})}H(e,n){const o=[];return new _t((u,f)=>{e.onerror=I=>{f(I.target.error)},e.onsuccess=I=>{const P=I.target.result;if(!P)return void u();const $=new Bl(P),q=n(P.primaryKey,P.value,$);if(q instanceof _t){const ae=q.catch(Be=>($.done(),_t.reject(Be)));o.push(ae)}$.isDone?u():null===$.G?P.continue():P.continue($.G)}}).next(()=>_t.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function va(i){return new _t((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=pc(o.target.error);n(u)}})}let ai=!1;function pc(i){const e=ds.D((0,ve.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Kt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ai||(ai=!0,setTimeout(()=>{throw o},0)),o}}return i}class Ju{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;qt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,C.Z)(function*(){n.task=null;try{qt("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(o){eo(o)?qt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Io(o)}yield n.nt(6e4)}))}}class Va{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,C.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.it(o,e))})()}it(e,n){const o=new Set;let u=n,f=!0;return _t.doWhile(()=>!0===f&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return qt("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,u).next(P=>{u-=P,o.add(I)});f=!1})).next(()=>n-u)}rt(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(f=>{const I=f.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(u,f)).next(P=>(qt("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,n,P))).next(()=>I.size)}))}ot(e,n){let o=e;return n.changes.forEach((u,f)=>{const I=_a(f);Ji(I,o)>0&&(o=I)}),new zs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Ms{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>n.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Uc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Xa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function jl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Ms.at=-1;class si{constructor(e,n){this.comparator=e,this.root=n||os.EMPTY}insert(e,n){return new si(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qs(this.root,e,this.comparator,!0)}}class qs{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=n?o(e.key,n):1,n&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,n,o,u,f){this.key=e,this.value=n,this.color=o??os.RED,this.left=u??os.EMPTY,this.right=f??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,f){return new os(e??this.key,n??this.value,o??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const f=o(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===f?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return os.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dn();const e=this.left.check();if(e!==this.right.check())throw Dn();return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1,os.EMPTY=new class{constructor(){this.size=0}get key(){throw Dn()}get value(){throw Dn()}get color(){throw Dn()}get left(){throw Dn()}get right(){throw Dn()}copy(i,e,n,o,u){return this}insert(i,e,n){return new os(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pr{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ea(this.data.getIterator())}getIteratorFrom(e){return new Ea(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=o.getNext().key;if(0!==this.comparator(u,f))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pr(this.comparator);return n.data=e,n}}class Ea{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hs(i){return i.hasNext()?i.getNext():void 0}class Rs{constructor(e){this.fields=e,e.sort(Ri.comparator)}static empty(){return new Rs([])}unionWith(e){let n=new pr(Ri.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Rs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,o)=>n.isEqual(o))}}function Ba(){return typeof atob<"u"}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new br(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new br(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const Ns=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(i){if(Xn(!!i),"string"==typeof i){let e=0;const n=Ns.exec(i);if(Xn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ti(i.seconds),nanos:ti(i.nanos)}}function ti(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function to(i){return"string"==typeof i?br.fromBase64String(i):br.fromUint8Array(i)}function Fu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gu(i){const e=i.mapValue.fields.__previous_value__;return Fu(e)?gu(e):e}function Xo(i){const e=Ps(i.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class eu{constructor(e,n,o,u,f,I,P,$){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=f,this.forceLongPolling=I,this.autoDetectLongPolling=P,this.useFetchStreams=$}}class Is{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Is("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Is&&e.projectId===this.projectId&&e.database===this.database}}function bo(i){return null==i}function fs(i){return 0===i&&1/i==-1/0}function Xu(i){return"number"==typeof i&&Number.isInteger(i)&&!fs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const D={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},S={nullValue:"NULL_VALUE"};function T(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fu(i)?4:Os(i)?9007199254740991:10:Dn()}function k(i,e){if(i===e)return!0;const n=T(i);if(n!==T(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Xo(i).isEqual(Xo(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ps(o.timestampValue),I=Ps(u.timestampValue);return f.seconds===I.seconds&&f.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,to(i.bytesValue).isEqual(to(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return ti(o.geoPointValue.latitude)===ti(u.geoPointValue.latitude)&&ti(o.geoPointValue.longitude)===ti(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ti(o.integerValue)===ti(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ti(o.doubleValue),I=ti(u.doubleValue);return f===I?fs(f)===fs(I):isNaN(f)&&isNaN(I)}return!1}(i,e);case 9:return pa(i.arrayValue.values||[],e.arrayValue.values||[],k);case 10:return function(o,u){const f=o.mapValue.fields||{},I=u.mapValue.fields||{};if(Uc(f)!==Uc(I))return!1;for(const P in f)if(f.hasOwnProperty(P)&&(void 0===I[P]||!k(f[P],I[P])))return!1;return!0}(i,e);default:return Dn()}var u}function B(i,e){return void 0!==(i.values||[]).find(n=>k(n,e))}function Y(i,e){if(i===e)return 0;const n=T(i),o=T(e);if(n!==o)return $n(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return $n(i.booleanValue,e.booleanValue);case 2:return function(u,f){const I=ti(u.integerValue||u.doubleValue),P=ti(f.integerValue||f.doubleValue);return I<P?-1:I>P?1:I===P?0:isNaN(I)?isNaN(P)?0:-1:1}(i,e);case 3:return ye(i.timestampValue,e.timestampValue);case 4:return ye(Xo(i),Xo(e));case 5:return $n(i.stringValue,e.stringValue);case 6:return function(u,f){const I=to(u),P=to(f);return I.compareTo(P)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const I=u.split("/"),P=f.split("/");for(let $=0;$<I.length&&$<P.length;$++){const q=$n(I[$],P[$]);if(0!==q)return q}return $n(I.length,P.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const I=$n(ti(u.latitude),ti(f.latitude));return 0!==I?I:$n(ti(u.longitude),ti(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,f){const I=u.values||[],P=f.values||[];for(let $=0;$<I.length&&$<P.length;++$){const q=Y(I[$],P[$]);if(q)return q}return $n(I.length,P.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,f){if(u===D.mapValue&&f===D.mapValue)return 0;if(u===D.mapValue)return 1;if(f===D.mapValue)return-1;const I=u.fields||{},P=Object.keys(I),$=f.fields||{},q=Object.keys($);P.sort(),q.sort();for(let ae=0;ae<P.length&&ae<q.length;++ae){const Be=$n(P[ae],q[ae]);if(0!==Be)return Be;const Et=Y(I[P[ae]],$[q[ae]]);if(0!==Et)return Et}return $n(P.length,q.length)}(i.mapValue,e.mapValue);default:throw Dn()}}function ye(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return $n(i,e);const n=Ps(i),o=Ps(e),u=$n(n.seconds,o.seconds);return 0!==u?u:$n(n.nanos,o.nanos)}function Re(i){return It(i)}function It(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ps(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?to(i.bytesValue).toBase64():"referenceValue"in i?on.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",f=!0;for(const I of o.values||[])f?f=!1:u+=",",u+=It(I);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let f="{",I=!0;for(const P of u)I?I=!1:f+=",",f+=`${P}:${It(o.fields[P])}`;return f+"}"}(i.mapValue):Dn();var e}function en(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function lr(i){return!!i&&"integerValue"in i}function pn(i){return!!i&&"arrayValue"in i}function Gr(i){return!!i&&"nullValue"in i}function as(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function us(i){return!!i&&"mapValue"in i}function ps(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Xa(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=ps(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ps(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Os(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function tu(i){return"nullValue"in i?S:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?en(Is.empty(),on.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Dn()}function nu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?en(Is.empty(),on.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?D:Dn()}function ea(i,e){const n=Y(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ru(i,e){const n=Y(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!us(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ps(n)}setAll(e){let n=Ri.emptyPath(),o={},u=[];e.forEach((I,P)=>{if(!n.isImmediateParentOf(P)){const $=this.getFieldsMap(n);this.applyChanges($,o,u),o={},u=[],n=P.popLast()}I?o[P.lastSegment()]=ps(I):u.push(P.lastSegment())});const f=this.getFieldsMap(n);this.applyChanges(f,o,u)}delete(e){const n=this.field(e.popLast());us(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return k(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];us(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Xa(n,(u,f)=>e[u]=f);for(const u of o)delete e[u]}clone(){return new gs(ps(this.value))}}function $i(i){const e=[];return Xa(i.fields,(n,o)=>{const u=new Ri([n]);if(us(o)){const f=$i(o.mapValue).fields;if(0===f.length)e.push(u);else for(const I of f)e.push(u.child(I))}else e.push(u)}),new Rs(e)}class pi{constructor(e,n,o,u,f,I){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.data=f,this.documentState=I}static newInvalidDocument(e){return new pi(e,0,nr.min(),nr.min(),gs.empty(),0)}static newFoundDocument(e,n,o){return new pi(e,1,n,nr.min(),o,0)}static newNoDocument(e,n){return new pi(e,2,n,nr.min(),gs.empty(),0)}static newUnknownDocument(e,n){return new pi(e,3,n,nr.min(),gs.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $l{constructor(e,n=null,o=[],u=[],f=null,I=null,P=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=f,this.startAt=I,this.endAt=P,this.ht=null}}function Il(i,e=null,n=[],o=[],u=null,f=null,I=null){return new $l(i,e,n,o,u,f,I)}function Vo(i){const e=cn(i);if(null===e.ht){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Re(u.value);var u}).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),bo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Re(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Re(o)).join(",")),e.ht=n}return e.ht}function mu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Bc(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((n=i.filters[u]).op!==(o=e.filters[u]).op||!n.field.isEqual(o.field)||!k(n.value,o.value))return!1;var n,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!bl(i.startAt,e.startAt)&&bl(i.endAt,e.endAt)}function _u(i){return on.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function yu(i,e){return i.filters.filter(n=>n instanceof Ni&&n.field.isEqual(e))}function ta(i,e,n){let o=S,u=!0;for(const f of yu(i,e)){let I=S,P=!0;switch(f.op){case"<":case"<=":I=tu(f.value);break;case"==":case"in":case">=":I=f.value;break;case">":I=f.value,P=!1;break;case"!=":case"not-in":I=S}ea({value:o,inclusive:u},{value:I,inclusive:P})<0&&(o=I,u=P)}if(null!==n)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const I=n.position[f];ea({value:o,inclusive:u},{value:I,inclusive:n.inclusive})<0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}function To(i,e,n){let o=D,u=!0;for(const f of yu(i,e)){let I=D,P=!0;switch(f.op){case">=":case">":I=nu(f.value),P=!1;break;case"==":case"in":case"<=":I=f.value;break;case"<":I=f.value,P=!1;break;case"!=":case"not-in":I=D}ru({value:o,inclusive:u},{value:I,inclusive:P})>0&&(o=I,u=P)}if(null!==n)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const I=n.position[f];ru({value:o,inclusive:u},{value:I,inclusive:n.inclusive})>0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}class Ni extends class{}{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.lt(e,n,o):new Hl(e,n,o):"array-contains"===n?new Gl(e,o):"in"===n?new Lu(e,o):"not-in"===n?new zl(e,o):"array-contains-any"===n?new Eu(e,o):new Ni(e,n,o)}static lt(e,n,o){return"in"===n?new Wl(e,o):new wa(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.ft(Y(n,this.value)):null!==n&&T(this.value)===T(n)&&this.ft(Y(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Hl extends Ni{constructor(e,n,o){super(e,n,o),this.key=on.fromName(o.referenceValue)}matches(e){const n=on.comparator(e.key,this.key);return this.ft(n)}}class Wl extends Ni{constructor(e,n){super(e,"in",n),this.keys=vu(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wa extends Ni{constructor(e,n){super(e,"not-in",n),this.keys=vu(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vu(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>on.fromName(o.referenceValue))}class Gl extends Ni{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pn(n)&&B(n.arrayValue,this.value)}}class Lu extends Ni{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&B(this.value.arrayValue,n)}}class zl extends Ni{constructor(e,n){super(e,"not-in",n)}matches(e){if(B(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!B(this.value.arrayValue,n)}}class Eu extends Ni{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pn(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>B(this.value.arrayValue,o))}}class co{constructor(e,n){this.position=e,this.inclusive=n}}class el{constructor(e,n="asc"){this.field=e,this.dir=n}}function Bc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Uu(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const f=e[u],I=i.position[u];if(o=f.field.isKeyField()?on.comparator(on.fromName(I.referenceValue),n.key):Y(I,n.data.field(f.field)),"desc"===f.dir&&(o*=-1),0!==o)break}return o}function bl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!k(i.position[n],e.position[n]))return!1;return!0}class wu{constructor(e,n=null,o=[],u=[],f=null,I="F",P=null,$=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=I,this.startAt=P,this.endAt=$,this._t=null,this.wt=null}}function Cu(i,e,n,o,u,f,I,P){return new wu(i,e,n,o,u,f,I,P)}function ks(i){return new wu(i)}function Vu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ja(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Pi(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Iu(i){return null!==i.collectionGroup}function Do(i){const e=cn(i);if(null===e._t){e._t=[];const n=Pi(e),o=ja(e);if(null!==n&&null===o)n.isKeyField()||e._t.push(new el(n)),e._t.push(new el(Ri.keyField(),"asc"));else{let u=!1;for(const f of e.explicitOrderBy)e._t.push(f),f.field.isKeyField()&&(u=!0);if(!u){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new el(Ri.keyField(),f))}}}return e._t}function no(i){const e=cn(i);if(!e.wt)if("F"===e.limitType)e.wt=Il(e.path,e.collectionGroup,Do(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const f of Do(e))n.push(new el(f.field,"desc"===f.dir?"asc":"desc"));const o=e.endAt?new co(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new co(e.startAt.position,e.startAt.inclusive):null;e.wt=Il(e.path,e.collectionGroup,n,e.filters,e.limit,o,u)}return e.wt}function tl(i,e,n){return new wu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function So(i,e){return mu(no(i),no(e))&&i.limitType===e.limitType}function nl(i){return`${Vo(no(i))}|lt:${i.limitType}`}function ql(i){return`Query(target=${function Vc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(n=>{return`${(o=n).field.canonicalString()} ${o.op} ${Re(o.value)}`;var o}).join(", ")}]`),bo(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(n=>{return`${(o=n).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(n=>Re(n)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(n=>Re(n)).join(",")),`Target(${e})`}(no(i))}; limitType=${i.limitType})`}function $a(i,e){return e.isFoundDocument()&&function(n,o){const u=o.key.path;return null!==n.collectionGroup?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):on.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)}(i,e)&&function(n,o){for(const u of n.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(n,o){for(const u of n.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((n=i).startAt&&!function(u,f,I){const P=Uu(u,f,I);return u.inclusive?P<=0:P<0}(n.startAt,Do(n),o)||n.endAt&&!function(u,f,I){const P=Uu(u,f,I);return u.inclusive?P>=0:P>0}(n.endAt,Do(n),o)));var n,o}function bu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Zs(i){return(e,n)=>{let o=!1;for(const u of Do(i)){const f=Tu(u,e,n);if(0!==f)return f;o=o||u.field.isKeyField()}return 0}}function Tu(i,e,n){const o=i.field.isKeyField()?on.comparator(e.key,n.key):function(u,f,I){const P=f.data.field(u),$=I.data.field(u);return null!==P&&null!==$?Y(P,$):Dn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Dn()}}function gc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fs(e)?"-0":e}}function Tl(i){return{integerValue:""+i}}function mc(i,e){return Xu(e)?Tl(e):gc(i,e)}class Du{constructor(){this._=void 0}}function rl(i,e,n){return i instanceof ho?function(o,u){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(f.fields.__previous_value__=u),{mapValue:f}}(n,e):i instanceof Ao?bs(i,e):i instanceof Ha?Bu(i,e):function(o,u){const f=Su(o,u),I=$u(f)+$u(o.yt);return lr(f)&&lr(o.yt)?Tl(I):gc(o.It,I)}(i,e)}function Dl(i,e,n){return i instanceof Ao?bs(i,e):i instanceof Ha?Bu(i,e):n}function Su(i,e){return i instanceof ju?lr(n=e)||(o=n)&&"doubleValue"in o?e:{integerValue:0}:null;var o,n}class ho extends Du{}class Ao extends Du{constructor(e){super(),this.elements=e}}function bs(i,e){const n=Wa(e);for(const o of i.elements)n.some(u=>k(u,o))||n.push(o);return{arrayValue:{values:n}}}class Ha extends Du{constructor(e){super(),this.elements=e}}function Bu(i,e){let n=Wa(e);for(const o of i.elements)n=n.filter(u=>!k(u,o));return{arrayValue:{values:n}}}class ju extends Du{constructor(e,n){super(),this.It=e,this.yt=n}}function $u(i){return ti(i.integerValue||i.doubleValue)}function Wa(i){return pn(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ca{constructor(e,n){this.field=e,this.transform=n}}class _c{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class na{}function A(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new vr(i.key,Oi.none()):new ue(i.key,i.data,Oi.none());{const n=i.data,o=gs.empty();let u=new pr(Ri.comparator);for(let f of e.fields)if(!u.has(f)){let I=n.field(f);null===I&&f.length>1&&(f=f.popLast(),I=n.field(f)),null===I?o.delete(f):o.set(f,I),u=u.add(f)}return new rt(i.key,o,new Rs(u.toArray()),Oi.none())}}function m(i,e,n){i instanceof ue?function(o,u,f){const I=o.value.clone(),P=gn(o.fieldTransforms,u,f.transformResults);I.setAll(P),u.convertToFoundDocument(f.version,I).setHasCommittedMutations()}(i,e,n):i instanceof rt?function(o,u,f){if(!sl(o.precondition,u))return void u.convertToUnknownDocument(f.version);const I=gn(o.fieldTransforms,u,f.transformResults),P=u.data;P.setAll(Lt(o)),P.setAll(I),u.convertToFoundDocument(f.version,P).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function w(i,e,n,o){return i instanceof ue?function(u,f,I,P){if(!sl(u.precondition,f))return I;const $=u.value.clone(),q=Fn(u.fieldTransforms,P,f);return $.setAll(q),f.convertToFoundDocument(f.version,$).setHasLocalMutations(),null}(i,e,n,o):i instanceof rt?function(u,f,I,P){if(!sl(u.precondition,f))return I;const $=Fn(u.fieldTransforms,P,f),q=f.data;return q.setAll(Lt(u)),q.setAll($),f.convertToFoundDocument(f.version,q).setHasLocalMutations(),null===I?null:I.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ae=>ae.field))}(i,e,n,o):(I=n,sl(i.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):I);var f,I}function N(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),f=Su(o.transform,u||null);null!=f&&(null===n&&(n=gs.empty()),n.set(o.field,f))}return n||null}function K(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===o||n&&o&&pa(n,o,(u,f)=>function il(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(n=i.transform)instanceof Ao&&o instanceof Ao||n instanceof Ha&&o instanceof Ha?pa(n.elements,o.elements,k):n instanceof ju&&o instanceof ju?k(n.yt,o.yt):n instanceof ho&&o instanceof ho);var n,o}(u,f))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,o}class ue extends na{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class rt extends na{constructor(e,n,o,u,f=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Lt(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function gn(i,e,n){const o=new Map;Xn(i.length===n.length);for(let u=0;u<n.length;u++){const f=i[u],I=f.transform,P=e.data.field(f.field);o.set(f.field,Dl(I,P,n[u]))}return o}function Fn(i,e,n){const o=new Map;for(const u of i){const f=u.transform,I=n.data.field(u.field);o.set(u.field,rl(f,I,e))}return o}class vr extends na{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vi extends na{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bo{constructor(e){this.count=e}}var Yr,Ur;function ol(i){switch(i){default:return Dn();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0}}function Ga(i){if(void 0===i)return ur("GRPC error has no .code"),Dt.UNKNOWN;switch(i){case Yr.OK:return Dt.OK;case Yr.CANCELLED:return Dt.CANCELLED;case Yr.UNKNOWN:return Dt.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return Dt.INTERNAL;case Yr.UNAVAILABLE:return Dt.UNAVAILABLE;case Yr.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case Yr.NOT_FOUND:return Dt.NOT_FOUND;case Yr.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case Yr.ABORTED:return Dt.ABORTED;case Yr.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case Yr.DATA_LOSS:return Dt.DATA_LOSS;default:return Dn()}}(Ur=Yr||(Yr={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,f]of o)if(this.equalsFn(u,e))return f}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(n,o)=>{for(const[u,f]of o)e(u,f)})}isEmpty(){return jl(this.inner)}size(){return this.innerSize}}const al=new si(on.comparator);function Ts(){return al}const yc=new si(on.comparator);function iu(...i){let e=yc;for(const n of i)e=e.insert(n.key,n);return e}function ul(i){let e=yc;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Xi(){return ms()}function Sl(){return ms()}function ms(){return new ra(i=>i.toString(),(i,e)=>i.isEqual(e))}const ll=new si(on.comparator),Ia=new pr(on.comparator);function Ar(...i){let e=Ia;for(const n of i)e=e.add(n);return e}const ki=new pr($n);function ia(){return ki}class zi{constructor(e,n,o,u,f){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,n){const o=new Map;return o.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n)),new zi(nr.min(),o,ia(),Ts(),Ar())}}class Hu{constructor(e,n,o,u,f){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Hu(br.EMPTY_BYTE_STRING,n,Ar(),Ar(),Ar())}}class Au{constructor(e,n,o,u){this.Tt=e,this.removedTargetIds=n,this.key=o,this.Et=u}}class jc{constructor(e,n){this.targetId=e,this.At=n}}class $c{constructor(e,n,o=br.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class zd{constructor(){this.Rt=0,this.bt=fd(),this.Pt=br.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ar(),n=Ar(),o=Ar();return this.bt.forEach((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Dn()}}),new Hu(this.Pt,this.vt,e,n,o)}Nt(){this.Vt=!1,this.bt=fd()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class vc{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ts(),this.qt=hd(),this.Kt=new pr($n)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const o=this.zt(n);switch(e.state){case 0:this.Ht(n)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),o.Ct(e.resumeToken));break;default:Dn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((o,u)=>{this.Ht(u)&&n(u)})}Yt(e){const n=e.targetId,o=e.At.count,u=this.Xt(n);if(u){const f=u.target;if(_u(f))if(0===o){const I=new on(f.path);this.jt(n,I,pi.newNoDocument(I,nr.min()))}else Xn(1===o);else this.Zt(n)!==o&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((f,I)=>{const P=this.Xt(I);if(P){if(f.current&&_u(P.target)){const $=new on(P.target.path);null!==this.Ut.get($)||this.ee(I,$)||this.jt(I,$,pi.newNoDocument($,e))}f.Dt&&(n.set(I,f.xt()),f.Nt())}});let o=Ar();this.qt.forEach((f,I)=>{let P=!0;I.forEachWhile($=>{const q=this.Xt($);return!q||2===q.purpose||(P=!1,!1)}),P&&(o=o.add(f))}),this.Ut.forEach((f,I)=>I.setReadTime(e));const u=new zi(e,n,this.Kt,this.Ut,o);return this.Ut=Ts(),this.qt=hd(),this.Kt=new pr($n),u}Qt(e,n){if(!this.Ht(e))return;const o=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,o),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,n)?u.kt(n,1):u.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),o&&(this.Ut=this.Ut.insert(n,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new zd,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new pr($n),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=null!==this.Xt(e);return n||qt("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new zd),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function hd(){return new si(on.comparator)}function fd(){return new si(on.comparator)}const kh={asc:"ASCENDING",desc:"DESCENDING"},Hf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sa{constructor(e,n){this.databaseId=e,this.gt=n}}function _s(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function za(i,e){return i.gt?e.toBase64():e.toUint8Array()}function pd(i,e){return _s(i,e.toTimestamp())}function Ks(i){return Xn(!!i),nr.fromTimestamp(function(e){const n=Ps(e);return new ci(n.seconds,n.nanos)}(i))}function Wu(i,e){return(n=i,new $r(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Zl(i){const e=$r.fromString(i);return Xn(qd(e)),e}function Al(i,e){return Wu(i.databaseId,e.path)}function su(i,e){const n=Zl(e);if(n.get(1)!==i.databaseId.projectId)throw new Kt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Kt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new on(wc(n))}function Kl(i,e){return Wu(i.databaseId,e)}function gd(i){const e=Zl(i);return 4===e.length?$r.emptyPath():wc(e)}function Ec(i){return new $r(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function wc(i){return Xn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function md(i,e,n){return{name:Al(i,e),fields:n.value.mapValue.fields}}function Yl(i,e,n){const o=su(i,e.name),u=Ks(e.updateTime),f=new gs({mapValue:{fields:e.fields}}),I=pi.newFoundDocument(o,u,f);return n&&I.setHasCommittedMutations(),n?I.setHasCommittedMutations():I}function Gu(i,e){let n;if(e instanceof ue)n={update:md(i,e.key,e.value)};else if(e instanceof vr)n={delete:Al(i,e.key)};else if(e instanceof rt)n={update:md(i,e.key,e.data),updateMask:Vh(e.fieldMask)};else{if(!(e instanceof vi))return Dn();n={verify:Al(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(u,f){const I=f.transform;if(I instanceof ho)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Ao)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof Ha)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof ju)return{fieldPath:f.field.canonicalString(),increment:I.yt};throw Dn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:pd(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Dn()),n;var u}function xl(i,e){const n=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Oi.updateTime(Ks(u.updateTime)):void 0!==u.exists?Oi.exists(u.exists):Oi.none():Oi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(f,I){let P=null;"setToServerValue"in I?(Xn("REQUEST_TIME"===I.setToServerValue),P=new ho):"appendMissingElements"in I?P=new Ao(I.appendMissingElements.values||[]):"removeAllFromArray"in I?P=new Ha(I.removeAllFromArray.values||[]):"increment"in I?P=new ju(f,I.increment):Dn();const $=Ri.fromServerFormat(I.fieldPath);return new Ca($,P)}(i,u)):[];var u;if(e.update){const u=su(i,e.update.name),f=new gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Rs((e.updateMask.fieldPaths||[]).map(q=>Ri.fromServerFormat(q)));return new rt(u,f,I,n,o)}return new ue(u,f,n,o)}if(e.delete){const u=su(i,e.delete);return new vr(u,n)}if(e.verify){const u=su(i,e.verify);return new vi(u,n)}return Dn()}function Ql(i,e){return{documents:[Kl(i,e.path)]}}function Ic(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Kl(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kl(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function($){if(0===$.length)return;const q=$.map(ae=>function(Be){if("=="===Be.op){if(as(Be.value))return{unaryFilter:{field:hl(Be.field),op:"IS_NAN"}};if(Gr(Be.value))return{unaryFilter:{field:hl(Be.field),op:"IS_NULL"}}}else if("!="===Be.op){if(as(Be.value))return{unaryFilter:{field:hl(Be.field),op:"IS_NOT_NAN"}};if(Gr(Be.value))return{unaryFilter:{field:hl(Be.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(Be.field),op:Rl(Be.op),value:Be.value}}}(ae));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);u&&(n.structuredQuery.where=u);const f=function($){if(0!==$.length)return $.map(q=>{return{field:hl((ae=q).field),direction:Lh(ae.dir)};var ae})}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const I=(q=e.limit,i.gt||bo(q)?q:{value:q});var q,P,$;return null!==I&&(n.structuredQuery.limit=I),e.startAt&&(n.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(n.structuredQuery.endAt={before:!($=e.endAt).inclusive,values:$.position}),n}function dl(i){let e=gd(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Xn(1===o);const ae=n.from[0];ae.allDescendants?u=ae.collectionId:e=e.child(ae.collectionId)}let f=[];n.where&&(f=Ml(n.where));let I=[];n.orderBy&&(I=n.orderBy.map(ae=>{return new el(ou((Be=ae).field),function(Et){switch(Et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Be.direction));var Be}));let P=null;n.limit&&(P=function(ae){let Be;return Be="object"==typeof ae?ae.value:ae,bo(Be)?null:Be}(n.limit));let $=null;var ae;n.startAt&&($=new co((ae=n.startAt).values||[],!!ae.before));let q=null;return n.endAt&&(q=function(ae){return new co(ae.values||[],!ae.before)}(n.endAt)),Cu(e,u,I,f,P,"F",$,q)}function Ml(i){return i?void 0!==i.unaryFilter?[qa(i)]:void 0!==i.fieldFilter?[Uh(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Ml(e)).reduce((e,n)=>e.concat(n)):Dn():[]}function Lh(i){return kh[i]}function Rl(i){return Hf[i]}function hl(i){return{fieldPath:i.canonicalString()}}function ou(i){return Ri.fromServerFormat(i.fieldPath)}function Uh(i){return Ni.create(ou(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dn()}}(i.fieldFilter.op),i.fieldFilter.value)}function qa(i){switch(i.unaryFilter.op){case"IS_NAN":const e=ou(i.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ou(i.unaryFilter.field);return Ni.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ou(i.unaryFilter.field);return Ni.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ou(i.unaryFilter.field);return Ni.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Dn()}}function Vh(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ro(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=bc(e)),e=Hc(i.get(n),e);return bc(e)}function Hc(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const f=i.charAt(u);switch(f){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=f}}return n}function bc(i){return i+"\x01\x01"}function fo(i){const e=i.length;if(Xn(e>=2),2===e)return Xn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),$r.emptyPath();const n=e-2,o=[];let u="";for(let f=0;f<e;){const I=i.indexOf("\x01",f);switch((I<0||I>n)&&Dn(),i.charAt(I+1)){case"\x01":const P=i.substring(f,I);let $;0===u.length?$=P:(u+=P,$=u,u=""),o.push($);break;case"\x10":u+=i.substring(f,I),u+="\0";break;case"\x11":u+=i.substring(f,I+1);break;default:Dn()}f=I+2}return new $r(o)}const Wc=["userId","batchId"];function Gc(i,e){return[i,ro(e)]}function zc(i,e,n){return[i,ro(e),n]}const Jl={},Zd=["prefixPath","collectionGroup","readTime","documentId"],fl=["prefixPath","collectionGroup","documentId"],Xl=["collectionGroup","readTime","prefixPath","documentId"],_d=["canonicalId","targetId"],Kd=["targetId","path"],Yd=["path","targetId"],Bh=["collectionId","parent"],jh=["indexId","uid"],$h=["uid","sequenceNumber"],qc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yd=["indexId","uid","orderedDocumentKey"],vd=["userId","collectionPath","documentId"],Qd=["userId","collectionPath","largestBatchId"],Jd=["userId","collectionGroup","largestBatchId"],Tc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wf=[...Tc,"documentOverlays"],Ed=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],h=Ed,c=[...h,"indexConfiguration","indexState","indexEntries"];class l extends Ou{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function y(i,e){const n=cn(i);return ds.O(n.ie,e)}class x{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&m(f,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=w(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=w(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Sl();return this.mutations.forEach(u=>{const f=e.get(u.key),I=f.overlayedDocument;let P=this.applyToLocalView(I,f.mutatedFields);P=n.has(u.key)?null:P;const $=A(I,P);null!==$&&o.set(u.key,$),I.isValidDocument()||I.convertToNoDocument(nr.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ar())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,o)=>K(n,o))&&pa(this.baseMutations,e.baseMutations,(n,o)=>K(n,o))}}class V{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Xn(e.mutations.length===o.length);let u=ll;const f=e.mutations;for(let I=0;I<f.length;I++)u=u.insert(f[I].key,o[I].version);return new V(e,n,o,u)}}class H{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ne{constructor(e,n,o,u,f=nr.min(),I=nr.min(),P=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=P}withSequenceNumber(e){return new ne(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ne(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ne(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xe{constructor(e){this.re=e}}function At(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xt(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Al(u=i.re,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:_s(u,f.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ot(e.version)};else{if(!e.isUnknownDocument())return Dn();o.unknownDocument={path:n.path.toArray(),version:Ot(e.version)}}var u,f;return o}function xt(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ot(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cn(i){const e=new ci(i.seconds,i.nanoseconds);return nr.fromTimestamp(e)}function Wn(i,e){const n=(e.baseMutations||[]).map(f=>xl(i.re,f));for(let f=0;f<e.mutations.length-1;++f){const I=e.mutations[f];f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(I.updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f)}const o=e.mutations.map(f=>xl(i.re,f)),u=ci.fromMillis(e.localWriteTimeMs);return new x(e.batchId,u,n,o)}function Qr(i){const e=Cn(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Cn(i.lastLimboFreeSnapshotVersion):nr.min();let o;var u;return void 0!==i.query.documents?(Xn(1===(u=i.query).documents.length),o=no(ks(gd(u.documents[0])))):o=no(dl(i.query)),new ne(o,i.targetId,0,i.lastListenSequenceNumber,e,n,br.fromBase64String(i.resumeToken))}function io(i,e){const n=Ot(e.snapshotVersion),o=Ot(e.lastLimboFreeSnapshotVersion);let u;u=_u(e.target)?Ql(i.re,e.target):Ic(i.re,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vo(e.target),readTime:n,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function pl(i){const e=dl({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?tl(e,e.limit,"L"):e}function ec(i,e){return new H(e.largestBatchId,xl(i.re,e.overlayMutation))}function tc(i,e){const n=e.path.lastSegment();return[i,ro(e.path.popLast()),n]}function wd(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ot(o.readTime),documentKey:ro(o.documentKey.path),largestBatchId:o.largestBatchId}}class Xd{getBundleMetadata(e,n){return eh(e).get(n).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Cn(u.createTime),version:u.version};var u})}saveBundleMetadata(e,n){return eh(e).put({bundleId:(o=n).id,createTime:Ot(Ks(o.createTime)),version:o.version});var o}getNamedQuery(e,n){return Hh(e).get(n).next(o=>{if(o)return{name:(u=o).name,query:pl(u.bundledQuery),readTime:Cn(u.readTime)};var u})}saveNamedQuery(e,n){return Hh(e).put({name:(o=n).name,readTime:Ot(Ks(o.readTime)),bundledQuery:o.bundledQuery});var o}}function eh(i){return y(i,"bundles")}function Hh(i){return y(i,"namedQueries")}class Zc{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){return new Zc(e,n.uid||"")}getOverlay(e,n){return nc(e).get(tc(this.userId,n)).next(o=>o?ec(this.It,o):null)}getOverlays(e,n){const o=Xi();return _t.forEach(n,u=>this.getOverlay(e,u).next(f=>{null!==f&&o.set(u,f)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((f,I)=>{const P=new H(n,I);u.push(this.ue(e,P))}),_t.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(I=>u.add(ro(I.getCollectionPath())));const f=[];return u.forEach(I=>{const P=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);f.push(nc(e).Y("collectionPathOverlayIndex",P))}),_t.waitFor(f)}getOverlaysForCollection(e,n,o){const u=Xi(),f=ro(n),I=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,Number.POSITIVE_INFINITY],!0);return nc(e).W("collectionPathOverlayIndex",I).next(P=>{for(const $ of P){const q=ec(this.It,$);u.set(q.getKey(),q)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const f=Xi();let I;const P=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nc(e).Z({index:"collectionGroupOverlayIndex",range:P},($,q,ae)=>{const Be=ec(this.It,q);f.size()<u||Be.largestBatchId===I?(f.set(Be.getKey(),Be),I=Be.largestBatchId):ae.done()}).next(()=>f)}ue(e,n){return nc(e).put(function(o,u,f){const[I,P,$]=tc(u,f.mutation.key);return{userId:u,collectionPath:P,documentId:$,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Gu(o.re,f.mutation)}}(this.It,this.userId,n))}}function nc(i){return y(i,"documentOverlays")}class rc{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(ti(e.integerValue));else if("doubleValue"in e){const o=ti(e.doubleValue);isNaN(o)?this.le(n,13):(this.le(n,15),fs(o)?n.fe(0):n.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(n,20),"string"==typeof o?n.de(o):(n.de(`${o.seconds||""}`),n.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(to(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(n,45),n.fe(o.latitude||0),n.fe(o.longitude||0)}else"mapValue"in e?Os(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):Dn()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const o=e.fields||{};this.le(n,55);for(const u of Object.keys(o))this._e(u,n),this.ae(o[u],n)}pe(e,n){const o=e.values||[];this.le(n,50);for(const u of o)this.ae(u,n)}ge(e,n){this.le(n,37),on.fromName(e).path.forEach(o=>{this.le(n,60),this.Ie(o,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}function Gf(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function th(i){const e=64-function(n){let o=0;for(let u=0;u<8;++u){const f=Gf(255&n[u]);if(o+=f,8!==f)break}return o}(i);return Math.ceil(e/8)}rc.Te=new rc;class zf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ae(o.value),o=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Pe(o.value),o=n.next();this.ve()}Ve(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=n.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=n.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const n=this.Ce(e),o=th(n);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}Ne(e){const n=this.Ce(e),o=th(n);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(u){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,u,!1),new Uint8Array(f.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ae(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;0===n?(this.Fe(0),this.Fe(255)):255===n?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class qf{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class oa{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Dc{constructor(){this.Be=new zf,this.Le=new qf(this.Be),this.Ue=new oa(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ic{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new ic(this.indexId,this.documentKey,this.arrayValue,o)}}function Nl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=$o(i.arrayValue,e.arrayValue),0!==n?n:(n=$o(i.directionalValue,e.directionalValue),0!==n?n:on.comparator(i.documentKey,e.documentKey)))}function $o(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Cd{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const o=n;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const n=Qa(e);if(void 0!==n&&!this.ze(n))return!1;const o=ga(e);let u=0,f=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const I=o[u];if(!this.He(this.je,I)||!this.Je(this.Ge[f++],I))return!1;++u}for(;u<o.length;++u){const I=o[u];if(f>=this.Ge.length||!this.Je(this.Ge[f++],I))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class Wh{constructor(){this.Ye=new Gh}addToCollectionParentIndex(e,n){return this.Ye.add(n),_t.resolve()}getCollectionParents(e,n){return _t.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return _t.resolve()}deleteFieldIndex(e,n){return _t.resolve()}getDocumentsMatchingTarget(e,n){return _t.resolve(null)}getIndexType(e,n){return _t.resolve(0)}getFieldIndexes(e,n){return _t.resolve([])}getNextCollectionGroupToUpdate(e){return _t.resolve(null)}getMinOffset(e,n){return _t.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,n){return _t.resolve(zs.min())}updateCollectionGroup(e,n,o){return _t.resolve()}updateIndexEntries(e,n){return _t.resolve()}}class Gh{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new pr($r.comparator),f=!u.has(o);return this.index[n]=u.add(o),f}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new pr($r.comparator)).toArray()}}const nh=new Uint8Array(0);class zh{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new Gh,this.Ze=new ra(o=>Vo(o),(o,u)=>mu(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const f={collectionId:o,parent:ro(u)};return Zf(e).put(f)}return _t.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[ka(n),""],!1,!0);return Zf(e).W(u).next(f=>{for(const I of f){if(I.collectionId!==n)break;o.push(fo(I.parent))}return o})}addFieldIndex(e,n){const o=rh(e),u={indexId:(I=n).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var I;delete u.indexId;const f=o.add(u);if(n.indexState){const I=Yc(e);return f.next(P=>{I.put(wd(P,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return f.next()}deleteFieldIndex(e,n){const o=rh(e),u=Yc(e),f=Kc(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const o=Kc(e);let u=!0;const f=new Map;return _t.forEach(this.tn(n),I=>this.en(e,I).next(P=>{u&&(u=!!P),f.set(I,P)})).next(()=>{if(u){let I=Ar();const P=[];return _t.forEach(f,($,q)=>{var ae;qt("IndexedDbIndexManager",`Using index ${ae=$,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(ns=>`${ns.fieldPath}:${ns.kind}`).join(",")}`} to execute ${Vo(n)}`);const Be=function(ns,mo){const Hi=Qa(mo);if(void 0===Hi)return null;for(const qi of yu(ns,Hi.fieldPath))switch(qi.op){case"array-contains-any":return qi.value.arrayValue.values||[];case"array-contains":return[qi.value]}return null}(q,$),Et=function(ns,mo){const Hi=new Map;for(const qi of ga(mo))for(const Wo of yu(ns,qi.fieldPath))switch(Wo.op){case"==":case"in":Hi.set(qi.fieldPath.canonicalString(),Wo.value);break;case"not-in":case"!=":return Hi.set(qi.fieldPath.canonicalString(),Wo.value),Array.from(Hi.values())}return null}(q,$),Ut=function(ns,mo){const Hi=[];let qi=!0;for(const Wo of ga(mo)){const Wd=0===Wo.kind?ta(ns,Wo.fieldPath,ns.startAt):To(ns,Wo.fieldPath,ns.startAt);Hi.push(Wd.value),qi&&(qi=Wd.inclusive)}return new co(Hi,qi)}(q,$),Gt=function(ns,mo){const Hi=[];let qi=!0;for(const Wo of ga(mo)){const Wd=0===Wo.kind?To(ns,Wo.fieldPath,ns.endAt):ta(ns,Wo.fieldPath,ns.endAt);Hi.push(Wd.value),qi&&(qi=Wd.inclusive)}return new co(Hi,qi)}(q,$),In=this.nn($,q,Ut),Jn=this.nn($,q,Gt),Ti=this.sn($,q,Et),ts=this.rn($.indexId,Be,In,Ut.inclusive,Jn,Gt.inclusive,Ti);return _t.forEach(ts,ns=>o.J(ns,n.limit).next(mo=>{mo.forEach(Hi=>{const qi=on.fromSegments(Hi.documentKey);I.has(qi)||(I=I.add(qi),P.push(qi))})}))}).next(()=>P)}return _t.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,o,u,f,I,P){const $=(null!=n?n.length:1)*Math.max(o.length,f.length),q=$/(null!=n?n.length:1),ae=[];for(let Be=0;Be<$;++Be){const Et=n?this.on(n[Be/q]):nh,Ut=this.un(e,Et,o[Be%q],u),Gt=this.cn(e,Et,f[Be%q],I),In=P.map(Jn=>this.un(e,Et,Jn,!0));ae.push(...this.createRange(Ut,Gt,In))}return ae}un(e,n,o,u){const f=new ic(e,on.empty(),n,o);return u?f:f.Ke()}cn(e,n,o,u){const f=new ic(e,on.empty(),n,o);return u?f.Ke():f}en(e,n){const o=new Cd(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(f=>{let I=null;for(const P of f)o.We(P)&&(!I||P.fields.length>I.fields.length)&&(I=P);return I})}getIndexType(e,n){let o=2;return _t.forEach(this.tn(n),u=>this.en(e,u).next(f=>{f?0!==o&&f.fields.length<function(I){let P=new pr(Ri.comparator),$=!1;for(const q of I.filters){const ae=q;ae.field.isKeyField()||("array-contains"===ae.op||"array-contains-any"===ae.op?$=!0:P=P.add(ae.field))}for(const q of I.orderBy)q.field.isKeyField()||(P=P.add(q.field));return P.size+($?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,n){const o=new Dc;for(const u of ga(e)){const f=n.data.field(u.fieldPath);if(null==f)return null;const I=o.qe(u.kind);rc.Te.ce(f,I)}return o.$e()}on(e){const n=new Dc;return rc.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const o=new Dc;return rc.Te.ce(en(this.databaseId,n),o.qe(function(u){const f=ga(u);return 0===f.length?0:f[f.length-1].kind}(e))),o.$e()}sn(e,n,o){if(null===o)return[];let u=[];u.push(new Dc);let f=0;for(const I of ga(e)){const P=o[f++];for(const $ of u)if(this.ln(n,I.fieldPath)&&pn(P))u=this.fn(u,I,P);else{const q=$.qe(I.kind);rc.Te.ce(P,q)}}return this.dn(u)}nn(e,n,o){return this.sn(e,n,o.position)}dn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].$e();return n}fn(e,n,o){const u=[...e],f=[];for(const I of o.arrayValue.values||[])for(const P of u){const $=new Dc;$.seed(P.$e()),rc.Te.ce(I,$.qe(n.kind)),f.push($)}return f}ln(e,n){return!!e.filters.find(o=>o instanceof Ni&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=rh(e),u=Yc(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(f=>{const I=[];return _t.forEach(f,P=>u.get([P.indexId,this.uid]).next($=>{I.push(function(q,ae){const Be=ae?new ma(ae.sequenceNumber,new zs(Cn(ae.readTime),new on(fo(ae.documentKey)),ae.largestBatchId)):ma.empty(),Et=q.fields.map(([Ut,Gt])=>new Jo(Ri.fromServerFormat(Ut),Gt));return new Uo(q.indexId,q.collectionGroup,Et,Be)}(P,$))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const f=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==f?f:$n(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=rh(e),f=Yc(e);return this._n(e).next(I=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(P=>_t.forEach(P,$=>f.put(wd($.indexId,this.user,I,o)))))}updateIndexEntries(e,n){const o=new Map;return _t.forEach(n,(u,f)=>{const I=o.get(u.collectionGroup);return(I?_t.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(P=>(o.set(u.collectionGroup,P),_t.forEach(P,$=>this.wn(e,u,$).next(q=>{const ae=this.mn(f,$);return q.isEqual(ae)?_t.resolve():this.gn(e,f,$,q,ae)}))))})}yn(e,n,o,u){return Kc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,n.key),documentKey:n.key.path.toArray()})}pn(e,n,o,u){return Kc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,n.key),n.key.path.toArray()])}wn(e,n,o){const u=Kc(e);let f=new pr(Nl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,n)])},(I,P)=>{f=f.add(new ic(o.indexId,n,P.arrayValue,P.directionalValue))}).next(()=>f)}mn(e,n){let o=new pr(Nl);const u=this.an(n,e);if(null==u)return o;const f=Qa(n);if(null!=f){const I=e.data.field(f.fieldPath);if(pn(I))for(const P of I.arrayValue.values||[])o=o.add(new ic(n.indexId,e.key,this.on(P),u))}else o=o.add(new ic(n.indexId,e.key,nh,u));return o}gn(e,n,o,u,f){qt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const I=[];return function(P,$,q,ae,Be){const Et=P.getIterator(),Ut=$.getIterator();let Gt=hs(Et),In=hs(Ut);for(;Gt||In;){let Jn=!1,Ti=!1;if(Gt&&In){const ts=q(Gt,In);ts<0?Ti=!0:ts>0&&(Jn=!0)}else null!=Gt?Ti=!0:Jn=!0;Jn?(ae(In),In=hs(Ut)):Ti?(Be(Gt),Gt=hs(Et)):(Gt=hs(Et),In=hs(Ut))}}(u,f,Nl,P=>{I.push(this.yn(e,n,o,P))},P=>{I.push(this.pn(e,n,o,P))}),_t.waitFor(I)}_n(e){let n=1;return Yc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,f)=>{f.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((I,P)=>Nl(I,P)).filter((I,P,$)=>!P||0!==Nl(I,$[P-1]));const u=[];u.push(e);for(const I of o){const P=Nl(I,e),$=Nl(I,n);if(0===P)u[0]=e.Ke();else if(P>0&&$<0)u.push(I),u.push(I.Ke());else if($>0)break}u.push(n);const f=[];for(let I=0;I<u.length;I+=2)f.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,nh,[]],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,nh,[]]));return f}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Kf)}getMinOffset(e,n){return _t.mapArray(this.tn(n),o=>this.en(e,o).next(u=>u||Dn())).next(Kf)}}function Zf(i){return y(i,"collectionParents")}function Kc(i){return y(i,"indexEntries")}function rh(i){return y(i,"indexConfiguration")}function Yc(i){return y(i,"indexState")}function Kf(i){Xn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Ji(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new zs(e.readTime,e.documentKey,n)}const Yf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Za{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Za(e,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qf(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),f=[],I=IDBKeyRange.only(n.batchId);let P=0;const $=o.Z({range:I},(ae,Be,Et)=>(P++,Et.delete()));f.push($.next(()=>{Xn(1===P)}));const q=[];for(const ae of n.mutations){const Be=zc(e,ae.key.path,n.batchId);f.push(u.delete(Be)),q.push(ae.key)}return _t.waitFor(f).next(()=>q)}function Id(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Dn();e=i.noDocument}return JSON.stringify(e).length}Za.DEFAULT_COLLECTION_PERCENTILE=10,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Za.DEFAULT=new Za(41943040,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Za.DISABLED=new Za(-1,0,0);class gl{constructor(e,n,o,u){this.userId=e,this.It=n,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,n,o,u){Xn(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new gl(f,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pl(e).Z({index:"userMutationsIndex",range:o},(u,f,I)=>{n=!1,I.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const f=_(e),I=Pl(e);return I.add({}).next(P=>{Xn("number"==typeof P);const $=new x(P,n,o,u),q=function(Et,Ut,Gt){const In=Gt.baseMutations.map(Ti=>Gu(Et.re,Ti)),Jn=Gt.mutations.map(Ti=>Gu(Et.re,Ti));return{userId:Ut,batchId:Gt.batchId,localWriteTimeMs:Gt.localWriteTime.toMillis(),baseMutations:In,mutations:Jn}}(this.It,this.userId,$),ae=[];let Be=new pr((Et,Ut)=>$n(Et.canonicalString(),Ut.canonicalString()));for(const Et of u){const Ut=zc(this.userId,Et.key.path,P);Be=Be.add(Et.key.path.popLast()),ae.push(I.put(q)),ae.push(f.put(Ut,Jl))}return Be.forEach(Et=>{ae.push(this.indexManager.addToCollectionParentIndex(e,Et))}),e.addOnCommittedListener(()=>{this.In[P]=$.keys()}),_t.waitFor(ae).next(()=>$)})}lookupMutationBatch(e,n){return Pl(e).get(n).next(o=>o?(Xn(o.userId===this.userId),Wn(this.It,o)):null)}Tn(e,n){return this.In[n]?_t.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.In[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let f=null;return Pl(e).Z({index:"userMutationsIndex",range:u},(I,P,$)=>{P.userId===this.userId&&(Xn(P.batchId>=o),f=Wn(this.It,P)),$.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Pl(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(u,f,I)=>{o=f.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pl(e).W("userMutationsIndex",n).next(o=>o.map(u=>Wn(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Gc(this.userId,n.path),u=IDBKeyRange.lowerBound(o),f=[];return _(e).Z({range:u},(I,P,$)=>{const[q,ae,Be]=I,Et=fo(ae);if(q===this.userId&&n.path.isEqual(Et))return Pl(e).get(Be).next(Ut=>{if(!Ut)throw Dn();Xn(Ut.userId===this.userId),f.push(Wn(this.It,Ut))});$.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new pr($n);const u=[];return n.forEach(f=>{const I=Gc(this.userId,f.path),P=IDBKeyRange.lowerBound(I),$=_(e).Z({range:P},(q,ae,Be)=>{const[Et,Ut,Gt]=q,In=fo(Ut);Et===this.userId&&f.path.isEqual(In)?o=o.add(Gt):Be.done()});u.push($)}),_t.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,f=Gc(this.userId,o),I=IDBKeyRange.lowerBound(f);let P=new pr($n);return _(e).Z({range:I},($,q,ae)=>{const[Be,Et,Ut]=$,Gt=fo(Et);Be===this.userId&&o.isPrefixOf(Gt)?Gt.length===u&&(P=P.add(Ut)):ae.done()}).next(()=>this.En(e,P))}En(e,n){const o=[],u=[];return n.forEach(f=>{u.push(Pl(e).get(f).next(I=>{if(null===I)throw Dn();Xn(I.userId===this.userId),o.push(Wn(this.It,I))}))}),_t.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return Qf(e.ie,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),_t.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _t.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return _(e).Z({range:o},(f,I,P)=>{if(f[0]===this.userId){const $=fo(f[1]);u.push($)}else P.done()}).next(()=>{Xn(0===u.length)})})}containsKey(e,n){return zu(e,this.userId,n)}Rn(e){return v(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zu(i,e,n){const o=Gc(e,n.path),u=o[1],f=IDBKeyRange.lowerBound(o);let I=!1;return _(i).Z({range:f,X:!0},(P,$,q)=>{const[ae,Be,Et]=P;ae===e&&Be===u&&(I=!0),q.done()}).next(()=>I)}function Pl(i){return y(i,"mutations")}function _(i){return y(i,"documentMutations")}function v(i){return y(i,"mutationQueues")}class E{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new E(0)}static vn(){return new E(-1)}}class O{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const o=new E(n.highestTargetId);return n.highestTargetId=o.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>nr.fromTimestamp(new ci(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Sn(e,u)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(n,o),this.Sn(e,o))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>X(e).delete(n.targetId)).next(()=>this.Vn(e)).next(o=>(Xn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,n,o){let u=0;const f=[];return X(e).Z((I,P)=>{const $=Qr(P);$.sequenceNumber<=n&&null===o.get($.targetId)&&(u++,f.push(this.removeTargetData(e,$)))}).next(()=>_t.waitFor(f)).next(()=>u)}forEachTarget(e,n){return X(e).Z((o,u)=>{const f=Qr(u);n(f)})}Vn(e){return Ve(e).get("targetGlobalKey").next(n=>(Xn(null!==n),n))}Sn(e,n){return Ve(e).put("targetGlobalKey",n)}Dn(e,n){return X(e).put(io(this.It,n))}Cn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Vo(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let f=null;return X(e).Z({range:u,index:"queryTargetsIndex"},(I,P,$)=>{const q=Qr(P);mu(n,q.target)&&(f=q,$.done())}).next(()=>f)}addMatchingKeys(e,n,o){const u=[],f=Pt(e);return n.forEach(I=>{const P=ro(I.path);u.push(f.put({targetId:o,path:P})),u.push(this.referenceDelegate.addReference(e,o,I))}),_t.waitFor(u)}removeMatchingKeys(e,n,o){const u=Pt(e);return _t.forEach(n,f=>{const I=ro(f.path);return _t.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,f)])})}removeMatchingKeysForTargetId(e,n){const o=Pt(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Pt(e);let f=Ar();return u.Z({range:o,X:!0},(I,P,$)=>{const q=fo(I[1]),ae=new on(q);f=f.add(ae)}).next(()=>f)}containsKey(e,n){const o=ro(n.path),u=IDBKeyRange.bound([o],[ka(o)],!1,!0);let f=0;return Pt(e).Z({index:"documentTargetsIndex",X:!0,range:u},([I,P],$,q)=>{0!==I&&(f++,q.done())}).next(()=>f>0)}se(e,n){return X(e).get(n).next(o=>o?Qr(o):null)}}function X(i){return y(i,"targets")}function Ve(i){return y(i,"targetGlobal")}function Pt(i){return y(i,"targetDocuments")}function mn([i,e],[n,o]){const u=$n(i,n);return 0===u?$n(e,o):u}class Sn{constructor(e){this.xn=e,this.buffer=new pr(mn),this.Nn=0}kn(){return++this.Nn}Mn(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();mn(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Cr{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var n=this;qt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,C.Z)(function*(){n.On=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){eo(o)?qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Io(o)}yield n.Fn(3e5)}))}}class ni{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return _t.resolve(Ms.at);const o=new Sn(n);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.$n.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(Yf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yf):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let o,u,f,I,P,$,q;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Be=>(Be>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Be}`),u=this.params.maximumSequenceNumbersToCollect):u=Be,I=Date.now(),this.nthSequenceNumber(e,u))).next(Be=>(o=Be,P=Date.now(),this.removeTargets(e,o,n))).next(Be=>(f=Be,$=Date.now(),this.removeOrphanedDocuments(e,o))).next(Be=>(q=Date.now(),fi()<=R.in.DEBUG&&qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ae}ms\n\tDetermined least recently used ${u} in `+(P-I)+`ms\n\tRemoved ${f} targets in `+($-P)+`ms\n\tRemoved ${Be} documents in `+(q-$)+`ms\nTotal Duration: ${q-ae}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:Be})))}}class gi{constructor(e,n){this.db=e,this.garbageCollector=new ni(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}qn(e){let n=0;return this.Ln(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(o,u)=>n(u))}addReference(e,n,o){return es(e,o)}removeReference(e,n,o){return es(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return es(e,n)}Gn(e,n){return function(o,u){let f=!1;return v(o).tt(I=>zu(o,I,u).next(P=>(P&&(f=!0),_t.resolve(!P)))).next(()=>f)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let f=0;return this.Kn(e,(I,P)=>{if(P<=n){const $=this.Gn(e,I).next(q=>{if(!q)return f++,o.getEntry(e,I).next(()=>(o.removeEntry(I,nr.min()),Pt(e).delete([0,ro(I.path)])))});u.push($)}}).next(()=>_t.waitFor(u)).next(()=>o.apply(e)).next(()=>f)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return es(e,n)}Kn(e,n){const o=Pt(e);let u,f=Ms.at;return o.Z({index:"documentTargetsIndex"},([I,P],{path:$,sequenceNumber:q})=>{0===I?(f!==Ms.at&&n(new on(fo(u)),f),f=q,u=$):f=Ms.at}).next(()=>{f!==Ms.at&&n(new on(fo(u)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function es(i,e){return Pt(i).put((o=i.currentSequenceNumber,{targetId:0,path:ro(e.path),sequenceNumber:o}));var o}class aa{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?_t.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class po{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Ys(e).put(o)}removeEntry(e,n,o){return Ys(e).delete(function(u,f){const I=u.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],xt(f),I[I.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.Qn(e,o)))}getEntry(e,n){let o=pi.newInvalidDocument(n);return Ys(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ds(n))},(u,f)=>{o=this.jn(n,f)}).next(()=>o)}Wn(e,n){let o={size:0,document:pi.newInvalidDocument(n)};return Ys(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ds(n))},(u,f)=>{o={document:this.jn(n,f),size:Id(f)}}).next(()=>o)}getEntries(e,n){let o=Ts();return this.zn(e,n,(u,f)=>{const I=this.jn(u,f);o=o.insert(u,I)}).next(()=>o)}Hn(e,n){let o=Ts(),u=new si(on.comparator);return this.zn(e,n,(f,I)=>{const P=this.jn(f,I);o=o.insert(f,P),u=u.insert(f,Id(I))}).next(()=>({documents:o,Jn:u}))}zn(e,n,o){if(n.isEmpty())return _t.resolve();let u=new pr(sc);n.forEach($=>u=u.add($));const f=IDBKeyRange.bound(Ds(u.first()),Ds(u.last())),I=u.getIterator();let P=I.getNext();return Ys(e).Z({index:"documentKeyIndex",range:f},($,q,ae)=>{const Be=on.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;P&&sc(P,Be)<0;)o(P,null),P=I.getNext();P&&P.isEqual(Be)&&(o(P,q),P=I.hasNext()?I.getNext():null),P?ae.j(Ds(P)):ae.done()}).next(()=>{for(;P;)o(P,null),P=I.hasNext()?I.getNext():null})}getAllFromCollection(e,n,o){const u=[n.popLast().toArray(),n.lastSegment(),xt(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],f=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(e).W(IDBKeyRange.bound(u,f,!0)).next(I=>{let P=Ts();for(const $ of I){const q=this.jn(on.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);P=P.insert(q.key,q)}return P})}getAllFromCollectionGroup(e,n,o,u){let f=Ts();const I=so(n,o),P=so(n,zs.max());return Ys(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,P,!0)},($,q,ae)=>{const Be=this.jn(on.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);f=f.insert(Be.key,Be),f.size===u&&ae.done()}).next(()=>f)}newChangeBuffer(e){return new Fs(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ml(e).get("remoteDocumentGlobalKey").next(n=>(Xn(!!n),n))}Qn(e,n){return ml(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const o=function He(i,e){let n;if(e.document)n=Yl(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=on.fromSegments(e.noDocument.path),u=Cn(e.noDocument.readTime);n=pi.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dn();{const o=on.fromSegments(e.unknownDocument.path),u=Cn(e.unknownDocument.version);n=pi.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(o){const u=new ci(o[0],o[1]);return nr.fromTimestamp(u)}(e.readTime)),n}(this.It,n);if(!o.isNoDocument()||!o.version.isEqual(nr.min()))return o}return pi.newInvalidDocument(e)}}function ua(i){return new po(i)}class Fs extends aa{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new ra(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new pr((f,I)=>$n(f.canonicalString(),I.canonicalString()));return this.changes.forEach((f,I)=>{const P=this.Xn.get(f);if(n.push(this.Yn.removeEntry(e,f,P.readTime)),I.isValidDocument()){const $=At(this.Yn.It,I);u=u.add(f.path.popLast()),o+=Id($)-P.size,n.push(this.Yn.addEntry(e,f,$))}else if(o-=P.size,this.trackRemovals){const $=At(this.Yn.It,I.convertToNoDocument(nr.min()));n.push(this.Yn.addEntry(e,f,$))}}),u.forEach(f=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,f))}),n.push(this.Yn.updateMetadata(e,o)),_t.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(o=>(this.Xn.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:o,Jn:u})=>(u.forEach((f,I)=>{this.Xn.set(f,{size:I,readTime:o.get(f).readTime})}),o))}}function ml(i){return y(i,"remoteDocumentGlobal")}function Ys(i){return y(i,"remoteDocumentsV14")}function Ds(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function so(i,e){const n=e.documentKey.path.toArray();return[i,xt(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sc(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let f=0;f<n.length-2&&f<o.length-2;++f)if(u=$n(n[f],o[f]),u)return u;return u=$n(n.length,o.length),u||(u=$n(n[n.length-2],o[o.length-2]),u||$n(n[n.length-1],o[o.length-1]))}class Ol{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class bd{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.getBaseDocument(e,n,o))).next(u=>(null!==o&&w(o.mutation,u,Rs.empty(),ci.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Ar()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Ar()){const u=Xi();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(f=>{let I=iu();return f.forEach((P,$)=>{I=I.insert(P,$.overlayedDocument)}),I}))}getOverlayedDocuments(e,n){const o=Xi();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Ar()))}populateOverlays(e,n,o){const u=[];return o.forEach(f=>{n.has(f)||u.push(f)}),this.documentOverlayCache.getOverlays(e,u).next(f=>{f.forEach((I,P)=>{n.set(I,P)})})}computeViews(e,n,o,u){let f=Ts();const I=ms(),P=ms();return n.forEach(($,q)=>{const ae=o.get(q.key);u.has(q.key)&&(void 0===ae||ae.mutation instanceof rt)?f=f.insert(q.key,q):void 0!==ae&&(I.set(q.key,ae.mutation.getFieldMask()),w(ae.mutation,q,ae.mutation.getFieldMask(),ci.now()))}),this.recalculateAndSaveOverlays(e,f).next($=>($.forEach((q,ae)=>I.set(q,ae)),n.forEach((q,ae)=>{var Be;return P.set(q,new Ol(ae,null!==(Be=I.get(q))&&void 0!==Be?Be:null))}),P))}recalculateAndSaveOverlays(e,n){const o=ms();let u=new si((I,P)=>I-P),f=Ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(I=>{for(const P of I)P.keys().forEach($=>{const q=n.get($);if(null===q)return;let ae=o.get($)||Rs.empty();ae=P.applyToLocalView(q,ae),o.set($,ae);const Be=(u.get(P.batchId)||Ar()).add($);u=u.insert(P.batchId,Be)})}).next(()=>{const I=[],P=u.getReverseIterator();for(;P.hasNext();){const $=P.getNext(),q=$.key,ae=$.value,Be=Sl();ae.forEach(Et=>{if(!f.has(Et)){const Ut=A(n.get(Et),o.get(Et));null!==Ut&&Be.set(Et,Ut),f=f.add(Et)}}),I.push(this.documentOverlayCache.saveOverlays(e,q,Be))}return _t.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o){return on.isDocumentKey((u=n).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Iu(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o):this.getDocumentsMatchingCollectionQuery(e,n,o);var u}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(f=>{const I=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-f.size):_t.resolve(Xi());let P=-1,$=f;return I.next(q=>_t.forEach(q,(ae,Be)=>(P<Be.largestBatchId&&(P=Be.largestBatchId),f.get(ae)?_t.resolve():this.getBaseDocument(e,ae,Be).next(Et=>{$=$.insert(ae,Et)}))).next(()=>this.populateOverlays(e,q,f)).next(()=>this.computeViews(e,$,q,Ar())).next(ae=>({batchId:P,changes:ul(ae)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new on(n)).next(o=>{let u=iu();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o){const u=n.collectionGroup;let f=iu();return this.indexManager.getCollectionParents(e,u).next(I=>_t.forEach(I,P=>{const $=(q=n,ae=P.child(u),new wu(ae,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ae;return this.getDocumentsMatchingCollectionQuery(e,$,o).next(q=>{q.forEach((ae,Be)=>{f=f.insert(ae,Be)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,n.path,o).next(f=>(u=f,this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId))).next(f=>{f.forEach((P,$)=>{const q=$.getKey();null===u.get(q)&&(u=u.insert(q,pi.newInvalidDocument(q)))});let I=iu();return u.forEach((P,$)=>{const q=f.get(P);void 0!==q&&w(q.mutation,$,Rs.empty(),ci.now()),$a(n,$)&&(I=I.insert(P,$))}),I})}getBaseDocument(e,n,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,n):_t.resolve(pi.newInvalidDocument(n))}}class Qc{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return _t.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var o;return this.Zn.set(n.id,{id:(o=n).id,version:o.version,createTime:Ks(o.createTime)}),_t.resolve()}getNamedQuery(e,n){return _t.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(o=n).name,query:pl(o.bundledQuery),readTime:Ks(o.readTime)}),_t.resolve();var o}}class ih{constructor(){this.overlays=new si(on.comparator),this.es=new Map}getOverlay(e,n){return _t.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Xi();return _t.forEach(n,u=>this.getOverlay(e,u).next(f=>{null!==f&&o.set(u,f)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,f)=>{this.ue(e,n,f)}),_t.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(f=>this.overlays=this.overlays.remove(f)),this.es.delete(o)),_t.resolve()}getOverlaysForCollection(e,n,o){const u=Xi(),f=n.length+1,I=new on(n.child("")),P=this.overlays.getIteratorFrom(I);for(;P.hasNext();){const $=P.getNext().value,q=$.getKey();if(!n.isPrefixOf(q.path))break;q.path.length===f&&$.largestBatchId>o&&u.set($.getKey(),$)}return _t.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let f=new si((q,ae)=>q-ae);const I=this.overlays.getIterator();for(;I.hasNext();){const q=I.getNext().value;if(q.getKey().getCollectionGroup()===n&&q.largestBatchId>o){let ae=f.get(q.largestBatchId);null===ae&&(ae=Xi(),f=f.insert(q.largestBatchId,ae)),ae.set(q.getKey(),q)}}const P=Xi(),$=f.getIterator();for(;$.hasNext()&&($.getNext().value.forEach((q,ae)=>P.set(q,ae)),!(P.size()>=u)););return _t.resolve(P)}ue(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const I=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new H(n,o));let f=this.es.get(n);void 0===f&&(f=Ar(),this.es.set(n,f)),this.es.set(n,f.add(o.key))}}class Jf{constructor(){this.ns=new pr(Ho.ss),this.rs=new pr(Ho.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const o=new Ho(e,n);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.cs(new Ho(e,n))}hs(e,n){e.forEach(o=>this.removeReference(o,n))}ls(e){const n=new on(new $r([])),o=new Ho(n,e),u=new Ho(n,e+1),f=[];return this.rs.forEachInRange([o,u],I=>{this.cs(I),f.push(I.key)}),f}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new on(new $r([])),o=new Ho(n,e),u=new Ho(n,e+1);let f=Ar();return this.rs.forEachInRange([o,u],I=>{f=f.add(I.key)}),f}containsKey(e){const n=new Ho(e,0),o=this.ns.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ho{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return on.comparator(e.key,n.key)||$n(e._s,n._s)}static os(e,n){return $n(e._s,n._s)||on.comparator(e.key,n.key)}}class $m{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new pr(Ho.ss)}checkEmpty(e){return _t.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const f=this.ws;this.ws++;const I=new x(f,n,o,u);this.mutationQueue.push(I);for(const P of u)this.gs=this.gs.add(new Ho(P.key,f)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return _t.resolve(I)}lookupMutationBatch(e,n){return _t.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.ps(n+1),f=u<0?0:u;return _t.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ho(n,0),u=new Ho(n,Number.POSITIVE_INFINITY),f=[];return this.gs.forEachInRange([o,u],I=>{const P=this.ys(I._s);f.push(P)}),_t.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new pr($n);return n.forEach(u=>{const f=new Ho(u,0),I=new Ho(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([f,I],P=>{o=o.add(P._s)})}),_t.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let f=o;on.isDocumentKey(f)||(f=f.child(""));const I=new Ho(new on(f),0);let P=new pr($n);return this.gs.forEachWhile($=>{const q=$.key.path;return!!o.isPrefixOf(q)&&(q.length===u&&(P=P.add($._s)),!0)},I),_t.resolve(this.Is(P))}Is(e){const n=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Xn(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return _t.forEach(n.mutations,u=>{const f=new Ho(u.key,n.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,n){const o=new Ho(n,0),u=this.gs.firstAfterOrEqual(o);return _t.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return _t.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hg{constructor(e){this.Es=e,this.docs=new si(on.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),f=u?u.size:0,I=this.Es(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:I}),this.size+=I-f,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return _t.resolve(o?o.document.mutableCopy():pi.newInvalidDocument(n))}getEntries(e,n){let o=Ts();return n.forEach(u=>{const f=this.docs.get(u);o=o.insert(u,f?f.document.mutableCopy():pi.newInvalidDocument(u))}),_t.resolve(o)}getAllFromCollection(e,n,o){let u=Ts();const f=new on(n.child("")),I=this.docs.getIteratorFrom(f);for(;I.hasNext();){const{key:P,value:{document:$}}=I.getNext();if(!n.isPrefixOf(P.path))break;P.path.length>n.length+1||Ji(_a($),o)<=0||(u=u.insert($.key,$.mutableCopy()))}return _t.resolve(u)}getAllFromCollectionGroup(e,n,o,u){Dn()}As(e,n){return _t.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new Xf(this)}getSize(e){return _t.resolve(this.size)}}class Xf extends aa{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),_t.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class fg{constructor(e){this.persistence=e,this.Rs=new ra(n=>Vo(n),mu),this.lastRemoteSnapshotVersion=nr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Jf,this.targetCount=0,this.vs=E.Pn()}forEachTarget(e,n){return this.Rs.forEach((o,u)=>n(u)),_t.resolve()}getLastRemoteSnapshotVersion(e){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _t.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.bs&&(this.bs=n),_t.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new E(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,_t.resolve()}updateTargetData(e,n){return this.Dn(n),_t.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,_t.resolve()}removeTargets(e,n,o){let u=0;const f=[];return this.Rs.forEach((I,P)=>{P.sequenceNumber<=n&&null===o.get(P.targetId)&&(this.Rs.delete(I),f.push(this.removeMatchingKeysForTargetId(e,P.targetId)),u++)}),_t.waitFor(f).next(()=>u)}getTargetCount(e){return _t.resolve(this.targetCount)}getTargetData(e,n){const o=this.Rs.get(n)||null;return _t.resolve(o)}addMatchingKeys(e,n,o){return this.Ps.us(n,o),_t.resolve()}removeMatchingKeys(e,n,o){this.Ps.hs(n,o);const u=this.persistence.referenceDelegate,f=[];return u&&n.forEach(I=>{f.push(u.markPotentiallyOrphaned(e,I))}),_t.waitFor(f)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),_t.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Ps.ds(n);return _t.resolve(o)}containsKey(e,n){return _t.resolve(this.Ps.containsKey(n))}}class qh{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Ms(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new fg(this),this.indexManager=new Wh,this.remoteDocumentCache=new hg(o=>this.referenceDelegate.xs(o)),this.It=new xe(n),this.Ns=new Qc(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ih,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Vs[e.toKey()];return o||(o=new $m(n,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,o){qt("MemoryPersistence","Starting transaction:",e);const u=new Hm(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(f=>this.referenceDelegate.Ms(u).next(()=>f)).toPromise().then(f=>(u.raiseOnCommittedEvent(),f))}Os(e,n){return _t.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,n)))}}class Hm extends Ou{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Fs=new Jf,this.$s=null}static Bs(e){return new Zh(e)}get Ls(){if(this.$s)return this.$s;throw Dn()}addReference(e,n,o){return this.Fs.addReference(o,n),this.Ls.delete(o.toString()),_t.resolve()}removeReference(e,n,o){return this.Fs.removeReference(o,n),this.Ls.add(o.toString()),_t.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),_t.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(f=>this.Ls.add(f.toString()))}).next(()=>o.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.Ls,o=>{const u=on.fromPath(o);return this.Us(e,u).next(f=>{f||n.removeEntry(u,nr.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(o=>{o?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return _t.or([()=>_t.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}class pg{constructor(e){this.It=e}$(e,n,o,u){const f=new ya("createOrUpgrade",n);var P;o<1&&u>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wc,{unique:!0}),P.createObjectStore("documentMutations"),ep(e),function(P){P.createObjectStore("remoteDocuments")}(e));let I=_t.resolve();return o<3&&u>=3&&(0!==o&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),ep(e)),I=I.next(()=>function(P){const $=P.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nr.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",q)}(f))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(P,$){return $.store("mutations").W().next(q=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wc,{unique:!0});const ae=$.store("mutations"),Be=q.map(Et=>ae.put(Et));return _t.waitFor(Be)})}(e,f))),I=I.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.qs(f))),o<6&&u>=6&&(I=I.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(f)))),o<7&&u>=7&&(I=I.next(()=>this.Gs(f))),o<8&&u>=8&&(I=I.next(()=>this.Qs(e,f))),o<9&&u>=9&&(I=I.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.js(f))),o<11&&u>=11&&(I=I.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(P){const $=P.createObjectStore("documentOverlays",{keyPath:vd});$.createIndex("collectionPathOverlayIndex",Qd,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",Jd,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(P){const $=P.createObjectStore("remoteDocumentsV14",{keyPath:Zd});$.createIndex("documentKeyIndex",fl),$.createIndex("collectionGroupIndex",Xl)}(e)).next(()=>this.Ws(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>this.zs(e,f))),o<15&&u>=15&&(I=I.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:jh}).createIndex("sequenceNumberIndex",$h,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:qc}).createIndex("documentKeyIndex",yd,{unique:!1})}(e))),I}Ks(e){let n=0;return e.store("remoteDocuments").Z((o,u)=>{n+=Id(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>_t.forEach(u,f=>{const I=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(P=>_t.forEach(P,$=>{Xn($.userId===f.userId);const q=Wn(this.It,$);return Qf(e,f.userId,q).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const f=[];return o.Z((I,P)=>{const $=new $r(I),q=[0,ro($)];f.push(n.get(q).next(ae=>ae?_t.resolve():n.put({targetId:0,path:ro($),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>_t.waitFor(f))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:Bh});const o=n.store("collectionParents"),u=new Gh,f=I=>{if(u.add(I)){const P=I.lastSegment(),$=I.popLast();return o.put({collectionId:P,parent:ro($)})}};return n.store("remoteDocuments").Z({X:!0},(I,P)=>{const $=new $r(I);return f($.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([I,P,$],q)=>{const ae=fo(P);return f(ae.popLast())}))}js(e){const n=e.store("targets");return n.Z((o,u)=>{const f=Qr(u),I=io(this.It,f);return n.put(I)})}Ws(e,n){const o=n.store("remoteDocuments"),u=[];return o.Z((f,I)=>{const P=n.store("remoteDocumentsV14"),$=(q=I,q.document?new on($r.fromString(q.document.name).popFirst(5)):q.noDocument?on.fromSegments(q.noDocument.path):q.unknownDocument?on.fromSegments(q.unknownDocument.path):Dn()).path.toArray();var q;const ae={prefixPath:$.slice(0,$.length-2),collectionGroup:$[$.length-2],documentId:$[$.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};u.push(P.put(ae))}).next(()=>_t.waitFor(u))}zs(e,n){const o=n.store("mutations"),u=ua(this.It),f=new qh(Zh.Bs,this.It.re);return o.W().next(I=>{const P=new Map;return I.forEach($=>{var q;let ae=null!==(q=P.get($.userId))&&void 0!==q?q:Ar();Wn(this.It,$).keys().forEach(Be=>ae=ae.add(Be)),P.set($.userId,ae)}),_t.forEach(P,($,q)=>{const ae=new Wr(q),Be=Zc.oe(this.It,ae),Et=f.getIndexManager(ae),Ut=gl.oe(ae,this.It,Et,f.referenceDelegate);return new bd(u,Ut,Be,Et).recalculateAndSaveOverlaysForDocumentKeys(new l(n,Ms.at),$).next()})})}}function ep(i){i.createObjectStore("targetDocuments",{keyPath:Kd}).createIndex("documentTargetsIndex",Yd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_d,{unique:!0}),i.createObjectStore("targetGlobal")}const oc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kh{constructor(e,n,o,u,f,I,P,$,q,ae,Be=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.Hs=f,this.window=I,this.document=P,this.Js=q,this.Ys=ae,this.Xs=Be,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Et=>Promise.resolve(),!Kh.C())throw new Kt(Dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gi(this,u),this.ii=n+"main",this.It=new xe($),this.ri=new ds(this.ii,this.Xs,new pg(this.It)),this.Cs=new O(this.referenceDelegate,this.It),this.remoteDocumentCache=ua(this.It),this.Ns=new Xd,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ae&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Kt(Dt.FAILED_PRECONDITION,oc);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ms(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var o=(0,C.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=(0,C.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,C.Z)(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(eo(e))return qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Td(e).get("owner").next(n=>_t.resolve(this.mi(n)))}gi(e){return Yh(e).delete(this.clientId)}yi(){var e=this;return(0,C.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=y(o,"clientMetadata");return u.W().next(f=>{const I=e.Ii(f,18e5),P=f.filter($=>-1===I.indexOf($));return _t.forEach(P,$=>u.delete($.clientId)).next(()=>P)})}).catch(()=>[]);if(e.oi)for(const o of n)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?_t.resolve(!0):Td(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new Kt(Dt.FAILED_PRECONDITION,oc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yh(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const I=!this.inForeground&&u.inForeground,P=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||I&&P)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&qt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,C.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new l(n,Ms.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(o=>this.pi(o.updateTimeMs,n)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yh(e).W().next(n=>this.Ii(n,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return gl.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Zc.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,o){qt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",f=15===(I=this.Xs)?c:14===I?h:13===I?Ed:12===I?Wf:11===I?Tc:void Dn();var I;let P;return this.ri.runTransaction(e,u,f,$=>(P=new l($,this.Ss?this.Ss.next():Ms.at),"readwrite-primary"===n?this.fi(P).next(q=>!!q||this.di(P)).next(q=>{if(!q)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Kt(Dt.FAILED_PRECONDITION,fu);return o(P)}).next(q=>this.wi(P).next(()=>q)):this.Vi(P).next(()=>o(P)))).then($=>(P.raiseOnCommittedEvent(),$))}Vi(e){return Td(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Kt(Dt.FAILED_PRECONDITION,oc)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Td(e).put("owner",n)}static C(){return ds.C()}_i(e){const n=Td(e);return n.get("owner").next(o=>this.mi(o)?(qt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_t.resolve())}pi(e,n){const o=Date.now();return!(e<o-n||e>o&&(ur(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ve.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const o=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return qt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ur("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Td(i){return y(i,"owner")}function Yh(i){return y(i,"clientMetadata")}function gg(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Dd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Si=o,this.Di=u}static Ci(e,n){let o=Ar(),u=Ar();for(const f of n.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new Dd(e,n.fromCache,o,u)}}class mg{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,o,u){return this.ki(e,n).next(f=>f||this.Mi(e,n,u,o)).next(f=>f||this.Oi(e,n))}ki(e,n){if(Vu(n))return _t.resolve(null);let o=no(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=tl(n,null,"F"),o=no(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(f=>{const I=Ar(...f);return this.Ni.getDocuments(e,I).next(P=>this.indexManager.getMinOffset(e,o).next($=>{const q=this.Fi(n,P);return this.$i(n,q,I,$.readTime)?this.ki(e,tl(n,null,"F")):this.Bi(e,q,n,$)}))})))}Mi(e,n,o,u){return Vu(n)||u.isEqual(nr.min())?this.Oi(e,n):this.Ni.getDocuments(e,o).next(f=>{const I=this.Fi(n,f);return this.$i(n,I,o,u)?this.Oi(e,n):(fi()<=R.in.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),ql(n)),this.Bi(e,I,n,Ja(u,-1)))})}Fi(e,n){let o=new pr(Zs(e));return n.forEach((u,f)=>{$a(e,f)&&(o=o.add(f))}),o}$i(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const f="F"===e.limitType?n.last():n.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}Oi(e,n){return fi()<=R.in.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",ql(n)),this.Ni.getDocumentsMatchingQuery(e,n,zs.min())}Bi(e,n,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(f=>(n.forEach(I=>{f=f.insert(I.key,I)}),f))}}class _g{constructor(e,n,o,u){this.persistence=e,this.Li=n,this.It=u,this.Ui=new si($n),this.qi=new ra(f=>Vo(f),mu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bd(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function tp(i,e,n,o){return new _g(i,e,n,o)}function np(i,e){return sh.apply(this,arguments)}function sh(){return sh=(0,C.Z)(function*(i,e){const n=cn(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(f=>(u=f,n.Qi(e),n.mutationQueue.getAllMutationBatches(o))).next(f=>{const I=[],P=[];let $=Ar();for(const q of u){I.push(q.batchId);for(const ae of q.mutations)$=$.add(ae.key)}for(const q of f){P.push(q.batchId);for(const ae of q.mutations)$=$.add(ae.key)}return n.localDocuments.getDocuments(o,$).next(q=>({ji:q,removedBatchIds:I,addedBatchIds:P}))})})}),sh.apply(this,arguments)}function yg(i,e){const n=cn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),f=n.Gi.newChangeBuffer({trackRemovals:!0});return function(I,P,$,q){const ae=$.batch,Be=ae.keys();let Et=_t.resolve();return Be.forEach(Ut=>{Et=Et.next(()=>q.getEntry(P,Ut)).next(Gt=>{const In=$.docVersions.get(Ut);Xn(null!==In),Gt.version.compareTo(In)<0&&(ae.applyToRemoteDocument(Gt,$),Gt.isValidDocument()&&(Gt.setReadTime($.commitVersion),q.addEntry(Gt)))})}),Et.next(()=>I.mutationQueue.removeMutationBatch(P,ae))}(n,o,e,f).next(()=>f.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let P=Ar();for(let $=0;$<I.mutationResults.length;++$)I.mutationResults[$].transformResults.length>0&&(P=P.add(I.batch.mutations[$].key));return P}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}function oh(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Qh(i,e){const n=cn(i),o=e.snapshotVersion;let u=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const I=n.Gi.newChangeBuffer({trackRemovals:!0});u=n.Ui;const P=[];e.targetChanges.forEach((ae,Be)=>{const Et=u.get(Be);if(!Et)return;P.push(n.Cs.removeMatchingKeys(f,ae.removedDocuments,Be).next(()=>n.Cs.addMatchingKeys(f,ae.addedDocuments,Be)));let Ut=Et.withSequenceNumber(f.currentSequenceNumber);var Gt,In,Jn;e.targetMismatches.has(Be)?Ut=Ut.withResumeToken(br.EMPTY_BYTE_STRING,nr.min()).withLastLimboFreeSnapshotVersion(nr.min()):ae.resumeToken.approximateByteSize()>0&&(Ut=Ut.withResumeToken(ae.resumeToken,o)),u=u.insert(Be,Ut),In=Ut,Jn=ae,(0===(Gt=Et).resumeToken.approximateByteSize()||In.snapshotVersion.toMicroseconds()-Gt.snapshotVersion.toMicroseconds()>=3e8||Jn.addedDocuments.size+Jn.modifiedDocuments.size+Jn.removedDocuments.size>0)&&P.push(n.Cs.updateTargetData(f,Ut))});let $=Ts(),q=Ar();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&P.push(n.persistence.referenceDelegate.updateLimboDocument(f,ae))}),P.push(rp(f,I,e.documentUpdates).next(ae=>{$=ae.Wi,q=ae.zi})),!o.isEqual(nr.min())){const ae=n.Cs.getLastRemoteSnapshotVersion(f).next(Be=>n.Cs.setTargetsMetadata(f,f.currentSequenceNumber,o));P.push(ae)}return _t.waitFor(P).next(()=>I.apply(f)).next(()=>n.localDocuments.getLocalViewOfDocuments(f,$,q)).next(()=>$)}).then(f=>(n.Ui=u,f))}function rp(i,e,n){let o=Ar(),u=Ar();return n.forEach(f=>o=o.add(f)),e.getEntries(i,o).next(f=>{let I=Ts();return n.forEach((P,$)=>{const q=f.get(P);$.isFoundDocument()!==q.isFoundDocument()&&(u=u.add(P)),$.isNoDocument()&&$.version.isEqual(nr.min())?(e.removeEntry(P,$.readTime),I=I.insert(P,$)):!q.isValidDocument()||$.version.compareTo(q.version)>0||0===$.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry($),I=I.insert(P,$)):qt("LocalStore","Ignoring outdated watch update for ",P,". Current version:",q.version," Watch version:",$.version)}),{Wi:I,zi:u}})}function ip(i,e){const n=cn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Jc(i,e){const n=cn(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Cs.getTargetData(o,e).next(f=>f?(u=f,_t.resolve(u)):n.Cs.allocateTargetId(o).next(I=>(u=new ne(e,I,0,o.currentSequenceNumber),n.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(o.targetId,o),n.qi.set(e,o.targetId)),o})}function Sc(i,e,n){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,C.Z)(function*(i,e,n){const o=cn(i),u=o.Ui.get(e),f=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",f,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!eo(I))throw I;qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),Xc.apply(this,arguments)}function Jh(i,e,n){const o=cn(i);let u=nr.min(),f=Ar();return o.persistence.runTransaction("Execute query","readonly",I=>function(P,$,q){const ae=cn(P),Be=ae.qi.get(q);return void 0!==Be?_t.resolve(ae.Ui.get(Be)):ae.Cs.getTargetData($,q)}(o,I,no(e)).next(P=>{if(P)return u=P.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(I,P.targetId).next($=>{f=$})}).next(()=>o.Li.getDocumentsMatchingQuery(I,e,n?u:nr.min(),n?f:Ar())).next(P=>(Eg(o,bu(e),P),{documents:P,Hi:f})))}function sp(i,e){const n=cn(i),o=cn(n.Cs),u=n.Ui.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",f=>o.se(f,e).next(I=>I?I.target:null))}function vg(i,e){const n=cn(i),o=n.Ki.get(e)||nr.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.Gi.getAllFromCollectionGroup(u,e,Ja(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Eg(n,e,u),u))}function Eg(i,e,n){let o=nr.min();n.forEach((u,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)}),i.Ki.set(e,o)}function ah(){return ah=(0,C.Z)(function*(i,e,n,o){const u=cn(i);let f=Ar(),I=Ts();for(const q of n){const ae=e.Ji(q.metadata.name);q.document&&(f=f.add(ae));const Be=e.Yi(q);Be.setReadTime(e.Xi(q.metadata.readTime)),I=I.insert(ae,Be)}const P=u.Gi.newChangeBuffer({trackRemovals:!0}),$=yield Jc(u,(q=o,no(ks($r.fromString(`__bundle__/docs/${q}`)))));var q;return u.persistence.runTransaction("Apply bundle documents","readwrite",q=>rp(q,P,I).next(ae=>(P.apply(q),ae)).next(ae=>u.Cs.removeMatchingKeysForTargetId(q,$.targetId).next(()=>u.Cs.addMatchingKeys(q,f,$.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(q,ae.Wi,ae.zi)).next(()=>ae.Wi)))}),ah.apply(this,arguments)}function Cg(i,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,C.Z)(function*(i,e,n=Ar()){const o=yield Jc(i,no(pl(e.bundledQuery))),u=cn(i);return u.persistence.runTransaction("Save named query","readwrite",f=>{const I=Ks(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.Ns.saveNamedQuery(f,e);const P=o.withResumeToken(br.EMPTY_BYTE_STRING,I);return u.Ui=u.Ui.insert(P.targetId,P),u.Cs.updateTargetData(f,P).next(()=>u.Cs.removeMatchingKeysForTargetId(f,o.targetId)).next(()=>u.Cs.addMatchingKeys(f,n,o.targetId)).next(()=>u.Ns.saveNamedQuery(f,e))})}),Ig.apply(this,arguments)}function op(i,e){return`firestore_clients_${i}_${e}`}function bg(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Xh(i,e){return`firestore_targets_${i}_${e}`}class ef{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Zi(e,n,o){const u=JSON.parse(o);let f,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(f=new Kt(u.error.code,u.error.message))),I?new ef(e,n,u.state,f):(ur("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Zi(e,n){const o=JSON.parse(n);let u,f="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(u=new Kt(o.error.code,o.error.message))),f?new uh(e,o.state,u):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,f=ia();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=Xu(o.activeTargetIds[I]),f=f.add(o.activeTargetIds[I]);return u?new au(e,f):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ap{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new ap(n.clientId,n.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tf{constructor(){this.activeTargetIds=ia()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,n,o,u,f){this.window=e,this.Hs=n,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new si($n),this.started=!1,this.cr=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.ar=op(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tf),this.lr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,C.Z)(function*(){const n=yield e.syncEngine.vi();for(const u of n){if(u===e.sr)continue;const f=e.getItem(op(e.persistenceKey,u));if(f){const I=au.Zi(u,f);I&&(e.ur=e.ur.insert(I.clientId,I))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,o){this.Tr(e,n,o),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Xh(this.persistenceKey,e));if(o){const u=uh.Zi(e,o);u&&(n=u.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xh(this.persistenceKey,e))}updateQueryState(e,n,o){this.Rr(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return qt("SharedClientState","READ",e,n),n}setItem(e,n){qt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const o=e;if(o.storageArea===this.storage){if(qt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,C.Z)(function*(){if(n.started){if(null!==o.key)if(n.lr.test(o.key)){if(null==o.newValue){const u=n.vr(o.key);return n.Vr(u,null)}{const u=n.Sr(o.key,o.newValue);if(u)return n.Vr(u.clientId,u)}}else if(n.dr.test(o.key)){if(null!==o.newValue){const u=n.Dr(o.key,o.newValue);if(u)return n.Cr(u)}}else if(n._r.test(o.key)){if(null!==o.newValue){const u=n.Nr(o.key,o.newValue);if(u)return n.kr(u)}}else if(o.key===n.wr){if(null!==o.newValue){const u=n.yr(o.newValue);if(u)return n.pr(u)}}else if(o.key===n.hr){const u=function(f){let I=Ms.at;if(null!=f)try{const P=JSON.parse(f);Xn("number"==typeof P),I=P}catch(P){ur("SharedClientState","Failed to read sequence number from WebStorage",P)}return I}(o.newValue);u!==Ms.at&&n.sequenceNumberHandler(u)}else if(o.key===n.mr){const u=n.Mr(o.newValue);yield Promise.all(u.map(f=>n.syncEngine.Or(f)))}}else n.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,o){const u=new ef(this.currentUser,e,n,o),f=bg(this.persistenceKey,this.currentUser,e);this.setItem(f,u.tr())}Er(e){const n=bg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,o){const u=Xh(this.persistenceKey,e),f=new uh(e,n,o);this.setItem(u,f.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const o=this.vr(e);return au.Zi(o,n)}Dr(e,n){const o=this.dr.exec(e),u=Number(o[1]);return ef.Zi(new Wr(void 0!==o[2]?o[2]:null),u,n)}Nr(e,n){const o=this._r.exec(e),u=Number(o[1]);return uh.Zi(u,n)}yr(e){return ap.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var n=this;return(0,C.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const o=n?this.ur.insert(e,n):this.ur.remove(e),u=this.Ir(this.ur),f=this.Ir(o),I=[],P=[];return f.forEach($=>{u.has($)||I.push($)}),u.forEach($=>{f.has($)||P.push($)}),this.syncEngine.Br(I,P).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=ia();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Tg{constructor(){this.Lr=new tf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,o){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tf,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wm{qr(e){}shutdown(){}}class Dg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Sg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Gm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class zm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,o,u,f){const I=this.ao(e,n);qt("RestConnection","Sending: ",I,o);const P={};return this.ho(P,u,f),this.lo(e,I,P,o).then($=>(qt("RestConnection","Received: ",$),$),$=>{throw Qi("RestConnection",`${e} failed with error: `,$,"url: ",I,"request:",o),$})}fo(e,n,o,u,f,I){return this.co(e,n,o,u,f)}ho(e,n,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ss,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,f)=>e[f]=u),o&&o.headers.forEach((u,f)=>e[f]=u)}ao(e,n){return`${this.oo}/v1/${n}:${Sg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,o,u){return new Promise((f,I)=>{const P=new lo;P.listenOnce(Kr.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case Br.NO_ERROR:const q=P.getResponseJson();qt("Connection","XHR received:",JSON.stringify(q)),f(q);break;case Br.TIMEOUT:qt("Connection",'RPC "'+e+'" timed out'),I(new Kt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case Br.HTTP_ERROR:const ae=P.getStatus();if(qt("Connection",'RPC "'+e+'" failed with status:',ae,"response text:",P.getResponseText()),ae>0){const Be=P.getResponseJson().error;if(Be&&Be.status&&Be.message){const Et=function(Ut){const Gt=Ut.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Gt)>=0?Gt:Dt.UNKNOWN}(Be.status);I(new Kt(Et,Be.message))}else I(new Kt(Dt.UNKNOWN,"Server responded with status "+P.getStatus()))}else I(new Kt(Dt.UNAVAILABLE,"Connection failed."));break;default:Dn()}}finally{qt("Connection",'RPC "'+e+'" completed.')}});const $=JSON.stringify(u);P.send(n,"POST",$,o,15)})}_o(e,n,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Nn(),I=Xr(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new jr({})),this.ho(P.initMessageHeaders,n,o),P.encodeInitMessageHeaders=!0;const $=u.join("");qt("Connection","Creating WebChannel: "+$,P);const q=f.createWebChannel($,P);let ae=!1,Be=!1;const Et=new Gm({Hr:Gt=>{Be?qt("Connection","Not sending because WebChannel is closed:",Gt):(ae||(qt("Connection","Opening WebChannel transport."),q.open(),ae=!0),qt("Connection","WebChannel sending:",Gt),q.send(Gt))},Jr:()=>q.close()}),Ut=(Gt,In,Jn)=>{Gt.listen(In,Ti=>{try{Jn(Ti)}catch(ts){setTimeout(()=>{throw ts},0)}})};return Ut(q,ui.EventType.OPEN,()=>{Be||qt("Connection","WebChannel transport opened.")}),Ut(q,ui.EventType.CLOSE,()=>{Be||(Be=!0,qt("Connection","WebChannel transport closed"),Et.io())}),Ut(q,ui.EventType.ERROR,Gt=>{Be||(Be=!0,Qi("Connection","WebChannel transport errored:",Gt),Et.io(new Kt(Dt.UNAVAILABLE,"The operation could not be completed")))}),Ut(q,ui.EventType.MESSAGE,Gt=>{var In;if(!Be){const Jn=Gt.data[0];Xn(!!Jn);const Ti=Jn,ts=Ti.error||(null===(In=Ti[0])||void 0===In?void 0:In.error);if(ts){qt("Connection","WebChannel received error:",ts);const ns=ts.status;let mo=function(qi){const Wo=Yr[qi];if(void 0!==Wo)return Ga(Wo)}(ns),Hi=ts.message;void 0===mo&&(mo=Dt.INTERNAL,Hi="Unknown error status: "+ns+" with message "+ts.message),Be=!0,Et.io(new Kt(mo,Hi)),q.close()}else qt("Connection","WebChannel received:",Jn),Et.ro(Jn)}}),Ut(I,Fr.STAT_EVENT,Gt=>{Gt.stat===hi.PROXY?qt("Connection","Detected buffering proxy"):Gt.stat===hi.NOPROXY&&qt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Et.so()},0),Et}}function Ag(){return typeof window<"u"?window:null}function Vr(){return typeof document<"u"?document:null}function Sd(i){return new sa(i,!0)}class nf{constructor(e,n,o=1e3,u=1.5,f=6e4){this.Hs=e,this.timerId=n,this.wo=o,this.mo=u,this.yo=f,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,n-o);u>0&&qt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class lp{constructor(e,n,o,u,f,I,P,$){this.Hs=e,this.Po=o,this.vo=u,this.Vo=f,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=P,this.listener=$,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new nf(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,C.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,C.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var o=this;return(0,C.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():n&&n.code===Dt.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):n&&n.code===Dt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(n)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===n&&this.Go(o,u)},o=>{e(()=>{const u=new Kt(Dt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,n){const o=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,C.Z)(function*(){e.state=0,e.start()}))}Qo(e){return qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qm extends lp{constructor(e,n,o,u,f,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,I),this.It=f}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=function Cc(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===($=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:Dn(),u=e.targetChange.targetIds||[],f=function($,q){return $.gt?(Xn(void 0===q||"string"==typeof q),br.fromBase64String(q||"")):(Xn(void 0===q||q instanceof Uint8Array),br.fromUint8Array(q||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,P=I&&function($){const q=void 0===$.code?Dt.UNKNOWN:Ga($.code);return new Kt(q,$.message||"")}(I);n=new $c(o,u,f,P||null)}else if("documentChange"in e){const o=e.documentChange,u=su(i,o.document.name),f=Ks(o.document.updateTime),I=new gs({mapValue:{fields:o.document.fields}}),P=pi.newFoundDocument(u,f,I);n=new Au(o.targetIds||[],o.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const o=e.documentDelete,u=su(i,o.document),f=o.readTime?Ks(o.readTime):nr.min(),I=pi.newNoDocument(u,f);n=new Au([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=su(i,o.document);n=new Au([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Dn();{const o=e.filter,f=new Bo(o.count||0);n=new jc(o.targetId,f)}}var $;return n}(this.It,e),o=function(u){if(!("targetChange"in u))return nr.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?nr.min():f.readTime?Ks(f.readTime):nr.min()}(e);return this.listener.Wo(n,o)}zo(e){const n={};n.database=Ec(this.It),n.addTarget=function(u,f){let I;const P=f.target;return I=_u(P)?{documents:Ql(u,P)}:{query:Ic(u,P)},I.targetId=f.targetId,f.resumeToken.approximateByteSize()>0?I.resumeToken=za(u,f.resumeToken):f.snapshotVersion.compareTo(nr.min())>0&&(I.readTime=_s(u,f.snapshotVersion.toTimestamp())),I}(this.It,e);const o=function jo(i,e){const n=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Dn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.Bo(n)}Ho(e){const n={};n.database=Ec(this.It),n.removeTarget=e,this.Bo(n)}}class Zm extends lp{constructor(e,n,o,u,f,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,I),this.It=f,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(Xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function Fh(i,e){return i&&i.length>0?(Xn(void 0!==e),i.map(n=>function(o,u){let f=Ks(o.updateTime?o.updateTime:u);return f.isEqual(nr.min())&&(f=Ks(u)),new _c(f,o.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ks(e.commitTime);return this.listener.Zo(o,n)}return Xn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ec(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Gu(this.It,o))};this.Bo(n)}}class xg extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new Kt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.Vo.co(e,n,o,u,f)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Kt(Dt.UNKNOWN,u.toString())})}fo(e,n,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,I])=>this.Vo.fo(e,n,o,f,I,u)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Kt(Dt.UNKNOWN,f.toString())})}terminate(){this.nu=!0}}class Km{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ur(n),this.ou=!1):qt("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Mg{constructor(e,n,o,u,f){var I=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=f,this.mu.qr(P=>{o.enqueueAndForget((0,C.Z)(function*(){var $;ed(I)&&(qt("RemoteStore","Restarting streams for network reachability change."),yield($=(0,C.Z)(function*(q){const ae=cn(q);ae._u.add(4),yield ch(ae),ae.gu.set("Unknown"),ae._u.delete(4),yield lh(ae)}),function(q){return $.apply(this,arguments)})(I))}))}),this.gu=new Km(o,u)}}function lh(i){return cp.apply(this,arguments)}function cp(){return cp=(0,C.Z)(function*(i){if(ed(i))for(const e of i.wu)yield e(!0)}),cp.apply(this,arguments)}function ch(i){return rf.apply(this,arguments)}function rf(){return rf=(0,C.Z)(function*(i){for(const e of i.wu)yield e(!1)}),rf.apply(this,arguments)}function dh(i,e){const n=cn(i);n.du.has(e.targetId)||(n.du.set(e.targetId,e),hp(n)?hh(n):td(n).ko()&&dp(n,e))}function _l(i,e){const n=cn(i),o=td(n);n.du.delete(e),o.ko()&&sf(n,e),0===n.du.size&&(o.ko()?o.Fo():ed(n)&&n.gu.set("Unknown"))}function dp(i,e){i.yu.Ot(e.targetId),td(i).zo(e)}function sf(i,e){i.yu.Ot(e),td(i).Ho(e)}function hh(i){i.yu=new vc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),td(i).start(),i.gu.uu()}function hp(i){return ed(i)&&!td(i).No()&&i.du.size>0}function ed(i){return 0===cn(i)._u.size}function Ym(i){i.yu=void 0}function Uy(i){return fp.apply(this,arguments)}function fp(){return fp=(0,C.Z)(function*(i){i.du.forEach((e,n)=>{dp(i,e)})}),fp.apply(this,arguments)}function Rg(i,e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,C.Z)(function*(i,e){Ym(i),hp(i)?(i.gu.hu(e),hh(i)):i.gu.set("Unknown")}),Ng.apply(this,arguments)}function Qm(i,e,n){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,C.Z)(function*(i,e,n){if(i.gu.set("Online"),e instanceof $c&&2===e.state&&e.cause)try{yield(o=(0,C.Z)(function*(u,f){const I=f.cause;for(const P of f.targetIds)u.du.has(P)&&(yield u.remoteSyncer.rejectListen(P,I),u.du.delete(P),u.yu.removeTarget(P))}),function(u,f){return o.apply(this,arguments)})(i,e)}catch(o){qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield af(i,o)}else if(e instanceof Au?i.yu.Gt(e):e instanceof jc?i.yu.Yt(e):i.yu.Wt(e),!n.isEqual(nr.min()))try{const o=yield oh(i.localStore);n.compareTo(o)>=0&&(yield function(u,f){const I=u.yu.te(f);return I.targetChanges.forEach((P,$)=>{if(P.resumeToken.approximateByteSize()>0){const q=u.du.get($);q&&u.du.set($,q.withResumeToken(P.resumeToken,f))}}),I.targetMismatches.forEach(P=>{const $=u.du.get(P);if(!$)return;u.du.set(P,$.withResumeToken(br.EMPTY_BYTE_STRING,$.snapshotVersion)),sf(u,P);const q=new ne($.target,P,1,$.sequenceNumber);dp(u,q)}),u.remoteSyncer.applyRemoteEvent(I)}(i,n))}catch(o){qt("RemoteStore","Failed to raise snapshot:",o),yield af(i,o)}var o}),Ac.apply(this,arguments)}function af(i,e,n){return uf.apply(this,arguments)}function uf(){return uf=(0,C.Z)(function*(i,e,n){if(!eo(e))throw e;i._u.add(1),yield ch(i),i.gu.set("Offline"),n||(n=()=>oh(i.localStore)),i.asyncQueue.enqueueRetryable((0,C.Z)(function*(){qt("RemoteStore","Retrying IndexedDB access"),yield n(),i._u.delete(1),yield lh(i)}))}),uf.apply(this,arguments)}function fh(i,e){return e().catch(n=>af(i,n,e))}function Ad(i){return lf.apply(this,arguments)}function lf(){return lf=(0,C.Z)(function*(i){const e=cn(i),n=yl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Jm(e);)try{const u=yield ip(e.localStore,o);if(null===u){0===e.fu.length&&n.Fo();break}o=u.batchId,Xm(e,u)}catch(u){yield af(e,u)}Pg(e)&&Og(e)}),lf.apply(this,arguments)}function Jm(i){return ed(i)&&i.fu.length<10}function Xm(i,e){i.fu.push(e);const n=yl(i);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Pg(i){return ed(i)&&!yl(i).No()&&i.fu.length>0}function Og(i){yl(i).start()}function e_(i){return cf.apply(this,arguments)}function cf(){return cf=(0,C.Z)(function*(i){yl(i).eu()}),cf.apply(this,arguments)}function t_(i){return df.apply(this,arguments)}function df(){return df=(0,C.Z)(function*(i){const e=yl(i);for(const n of i.fu)e.Xo(n.mutations)}),df.apply(this,arguments)}function kg(i,e,n){return ph.apply(this,arguments)}function ph(){return ph=(0,C.Z)(function*(i,e,n){const o=i.fu.shift(),u=V.from(o,e,n);yield fh(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Ad(i)}),ph.apply(this,arguments)}function Vy(i,e){return gh.apply(this,arguments)}function gh(){return gh=(0,C.Z)(function*(i,e){var n;e&&yl(i).Yo&&(yield(n=(0,C.Z)(function*(o,u){if(ol(f=u.code)&&f!==Dt.ABORTED){const I=o.fu.shift();yl(o).Oo(),yield fh(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,u)),yield Ad(o)}var f}),function(o,u){return n.apply(this,arguments)})(i,e)),Pg(i)&&Og(i)}),gh.apply(this,arguments)}function Fg(i,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,C.Z)(function*(i,e){const n=cn(i);n.asyncQueue.verifyOperationInProgress(),qt("RemoteStore","RemoteStore received new credentials");const o=ed(n);n._u.add(3),yield ch(n),o&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield lh(n)}),Lg.apply(this,arguments)}function xc(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,C.Z)(function*(i,e){const n=cn(i);e?(n._u.delete(2),yield lh(n)):e||(n._u.add(2),yield ch(n),n.gu.set("Unknown"))}),hf.apply(this,arguments)}function td(i){return i.pu||(i.pu=function(e,n,o){const u=cn(e);return u.su(),new qm(n,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Uy.bind(null,i),Zr:Rg.bind(null,i),Wo:Qm.bind(null,i)}),i.wu.push(function(){var e=(0,C.Z)(function*(n){n?(i.pu.Oo(),hp(i)?hh(i):i.gu.set("Unknown")):(yield i.pu.stop(),Ym(i))});return function(n){return e.apply(this,arguments)}}())),i.pu}function yl(i){return i.Iu||(i.Iu=function(e,n,o){const u=cn(e);return u.su(),new Zm(n,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:e_.bind(null,i),Zr:Vy.bind(null,i),tu:t_.bind(null,i),Zo:kg.bind(null,i)}),i.wu.push(function(){var e=(0,C.Z)(function*(n){n?(i.Iu.Oo(),yield Ad(i)):(yield i.Iu.stop(),i.fu.length>0&&(qt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(n){return e.apply(this,arguments)}}())),i.Iu}class xu{constructor(e,n,o,u,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,n,o,u,f){const I=Date.now()+o,P=new xu(e,n,I,u,f);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kt(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nd(i,e){if(ur("AsyncQueue",`${e}: ${i}`),eo(i))return new Kt(Dt.UNAVAILABLE,`${e}: ${i}`);throw i}class xd{constructor(e){this.comparator=e?(n,o)=>e(n,o)||on.comparator(n.key,o.key):(n,o)=>on.comparator(n.key,o.key),this.keyedMap=iu(),this.sortedSet=new si(this.comparator)}static emptySet(e){return new xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=o.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new xd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class ff{constructor(){this.Tu=new si(on.comparator)}track(e){const n=e.doc.key,o=this.Tu.get(n);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(n):1===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Dn():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,o)=>{e.push(o)}),e}}class uu{constructor(e,n,o,u,f,I,P,$){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=f,this.fromCache=I,this.syncStateChanged=P,this.excludesMetadataChanges=$}static fromInitialDocuments(e,n,o,u){const f=[];return n.forEach(I=>{f.push({type:0,doc:I})}),new uu(e,n,xd.emptySet(n),f,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&So(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class pp{constructor(){this.Au=void 0,this.listeners=[]}}class Ug{constructor(){this.queries=new ra(e=>nl(e),So),this.onlineState="Unknown",this.Ru=new Set}}function mh(i,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,C.Z)(function*(i,e){const n=cn(i),o=e.query;let u=!1,f=n.queries.get(o);if(f||(u=!0,f=new pp),u)try{f.Au=yield n.onListen(o)}catch(I){const P=nd(I,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(P)}n.queries.set(o,f),f.listeners.push(e),e.bu(n.onlineState),f.Au&&e.Pu(f.Au)&&_h(n)}),Vg.apply(this,arguments)}function pf(i,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,C.Z)(function*(i,e){const n=cn(i),o=e.query;let u=!1;const f=n.queries.get(o);if(f){const I=f.listeners.indexOf(e);I>=0&&(f.listeners.splice(I,1),u=0===f.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Bg.apply(this,arguments)}function gf(i,e){const n=cn(i);let o=!1;for(const u of e){const I=n.queries.get(u.query);if(I){for(const P of I.listeners)P.Pu(u)&&(o=!0);I.Au=u}}o&&_h(n)}function mf(i,e,n){const o=cn(i),u=o.queries.get(e);if(u)for(const f of u.listeners)f.onError(n);o.queries.delete(e)}function _h(i){i.Ru.forEach(e=>{e.next()})}class yh{constructor(e,n,o){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new uu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||!(this.options.Nu&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class gp{constructor(e,n){this.payload=e,this.byteLength=n}ku(){return"metadata"in this.payload}}class n_{constructor(e){this.It=e}Ji(e){return su(this.It,e)}Yi(e){return e.metadata.exists?Yl(this.It,e.document,!1):pi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ks(e)}}class r_{constructor(e,n,o){this.Mu=e,this.localStore=n,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jg(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const o=$r.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Fu(e){const n=new Map,o=new n_(this.It);for(const u of e)if(u.metadata.queries){const f=o.Ji(u.metadata.name);for(const I of u.metadata.queries){const P=(n.get(I)||Ar()).add(f);n.set(I,P)}}return n}complete(){var e=this;return(0,C.Z)(function*(){const n=yield function wg(i,e,n,o){return ah.apply(this,arguments)}(e.localStore,new n_(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield Cg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:n}})()}}function jg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class $g{constructor(e){this.key=e}}class Hg{constructor(e){this.key=e}}class mp{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=Ar(),this.mutatedKeys=Ar(),this.Ku=Zs(e),this.Gu=new xd(this.Ku)}get Qu(){return this.Lu}ju(e,n){const o=n?n.Wu:new ff,u=n?n.Gu:this.Gu;let f=n?n.mutatedKeys:this.mutatedKeys,I=u,P=!1;const $="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,q="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ae,Be)=>{const Et=u.get(ae),Ut=$a(this.query,Be)?Be:null,Gt=!!Et&&this.mutatedKeys.has(Et.key),In=!!Ut&&(Ut.hasLocalMutations||this.mutatedKeys.has(Ut.key)&&Ut.hasCommittedMutations);let Jn=!1;Et&&Ut?Et.data.isEqual(Ut.data)?Gt!==In&&(o.track({type:3,doc:Ut}),Jn=!0):this.zu(Et,Ut)||(o.track({type:2,doc:Ut}),Jn=!0,($&&this.Ku(Ut,$)>0||q&&this.Ku(Ut,q)<0)&&(P=!0)):!Et&&Ut?(o.track({type:0,doc:Ut}),Jn=!0):Et&&!Ut&&(o.track({type:1,doc:Et}),Jn=!0,($||q)&&(P=!0)),Jn&&(Ut?(I=I.add(Ut),f=In?f.add(ae):f.delete(ae)):(I=I.delete(ae),f=f.delete(ae)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ae="F"===this.query.limitType?I.last():I.first();I=I.delete(ae.key),f=f.delete(ae.key),o.track({type:1,doc:ae})}return{Gu:I,Wu:o,$i:P,mutatedKeys:f}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const f=e.Wu.Eu();f.sort((q,ae)=>function(Be,Et){const Ut=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dn()}};return Ut(Be)-Ut(Et)}(q.type,ae.type)||this.Ku(q.doc,ae.doc)),this.Hu(o);const I=n?this.Ju():[],P=0===this.qu.size&&this.current?1:0,$=P!==this.Uu;return this.Uu=P,0!==f.length||$?{snapshot:new uu(this.query,e.Gu,u,f,e.mutatedKeys,0===P,$,!1),Yu:I}:{Yu:I}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new ff,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ar(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const n=[];return e.forEach(o=>{this.qu.has(o)||n.push(new Hg(o))}),this.qu.forEach(o=>{e.has(o)||n.push(new $g(o))}),n}Zu(e){this.Lu=e.Hi,this.qu=Ar();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return uu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class By{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class i_{constructor(e){this.key=e,this.ec=!1}}class jy{constructor(e,n,o,u,f,I){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=I,this.nc={},this.sc=new ra(P=>nl(P),So),this.ic=new Map,this.rc=new Set,this.oc=new si(on.comparator),this.uc=new Map,this.cc=new Jf,this.ac={},this.hc=new Map,this.lc=E.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Wg(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,C.Z)(function*(i,e){const n=Tf(i);let o,u;const f=n.sc.get(e);if(f)o=f.targetId,n.sharedClientState.addLocalQueryTarget(o),u=f.view.tc();else{const I=yield Jc(n.localStore,no(e));n.isPrimaryClient&&dh(n.remoteStore,I);const P=n.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,u=yield _p(n,e,o,"current"===P)}return u}),_f.apply(this,arguments)}function _p(i,e,n,o){return vh.apply(this,arguments)}function vh(){return vh=(0,C.Z)(function*(i,e,n,o){i.dc=(ae,Be,Et)=>{return(Ut=(0,C.Z)(function*(Gt,In,Jn,Ti){let ts=In.view.ju(Jn);ts.$i&&(ts=yield Jh(Gt.localStore,In.query,!1).then(({documents:Hi})=>In.view.ju(Hi,ts)));const ns=Ti&&Ti.targetChanges.get(In.targetId),mo=In.view.applyChanges(ts,Gt.isPrimaryClient,ns);return vf(Gt,In.targetId,mo.Yu),mo.snapshot}),function(Gt,In,Jn,Ti){return Ut.apply(this,arguments)})(i,ae,Be,Et);var Ut};const u=yield Jh(i.localStore,e,!0),f=new mp(e,u.Hi),I=f.ju(u.documents),P=Hu.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState),$=f.applyChanges(I,i.isPrimaryClient,P);vf(i,n,$.Yu);const q=new By(e,n,f);return i.sc.set(e,q),i.ic.has(n)?i.ic.get(n).push(e):i.ic.set(n,[e]),$.snapshot}),vh.apply(this,arguments)}function $y(i,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,C.Z)(function*(i,e){const n=cn(i),o=n.sc.get(e),u=n.ic.get(o.targetId);if(u.length>1)return n.ic.set(o.targetId,u.filter(f=>!So(f,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Sc(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),_l(n.remoteStore,o.targetId),Md(n,o.targetId)}).catch(Io))):(Md(n,o.targetId),yield Sc(n.localStore,o.targetId,!0))}),Gg.apply(this,arguments)}function zg(){return zg=(0,C.Z)(function*(i,e,n){const o=Df(i);try{const u=yield function(f,I){const P=cn(f),$=ci.now(),q=I.reduce((Et,Ut)=>Et.add(Ut.key),Ar());let ae,Be;return P.persistence.runTransaction("Locally write mutations","readwrite",Et=>{let Ut=Ts(),Gt=Ar();return P.Gi.getEntries(Et,q).next(In=>{Ut=In,Ut.forEach((Jn,Ti)=>{Ti.isValidDocument()||(Gt=Gt.add(Jn))})}).next(()=>P.localDocuments.getOverlayedDocuments(Et,Ut)).next(In=>{ae=In;const Jn=[];for(const Ti of I){const ts=N(Ti,ae.get(Ti.key).overlayedDocument);null!=ts&&Jn.push(new rt(Ti.key,ts,$i(ts.value.mapValue),Oi.exists(!0)))}return P.mutationQueue.addMutationBatch(Et,$,Jn,I)}).next(In=>{Be=In;const Jn=In.applyToLocalDocumentSet(ae,Gt);return P.documentOverlayCache.saveOverlays(Et,In.batchId,Jn)})}).then(()=>({batchId:Be.batchId,changes:ul(ae)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(f,I,P){let $=f.ac[f.currentUser.toKey()];$||($=new si($n)),$=$.insert(I,P),f.ac[f.currentUser.toKey()]=$}(o,u.batchId,n),yield Fl(o,u.changes),yield Ad(o.remoteStore)}catch(u){const f=nd(u,"Failed to persist write");n.reject(f)}}),zg.apply(this,arguments)}function s_(i,e){return qg.apply(this,arguments)}function qg(){return qg=(0,C.Z)(function*(i,e){const n=cn(i);try{const o=yield Qh(n.localStore,e);e.targetChanges.forEach((u,f)=>{const I=n.uc.get(f);I&&(Xn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.ec=!0:u.modifiedDocuments.size>0?Xn(I.ec):u.removedDocuments.size>0&&(Xn(I.ec),I.ec=!1))}),yield Fl(n,o,e)}catch(o){yield Io(o)}}),qg.apply(this,arguments)}function o_(i,e,n){const o=cn(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.sc.forEach((f,I)=>{const P=I.view.bu(e);P.snapshot&&u.push(P.snapshot)}),function(f,I){const P=cn(f);P.onlineState=I;let $=!1;P.queries.forEach((q,ae)=>{for(const Be of ae.listeners)Be.bu(I)&&($=!0)}),$&&_h(P)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Wy(i,e,n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,C.Z)(function*(i,e,n){const o=cn(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.uc.get(e),f=u&&u.key;if(f){let I=new si(on.comparator);I=I.insert(f,pi.newNoDocument(f,nr.min()));const P=Ar().add(f),$=new zi(nr.min(),new Map,new pr($n),I,P);yield s_(o,$),o.oc=o.oc.remove(f),o.uc.delete(e),Ep(o)}else yield Sc(o.localStore,e,!1).then(()=>Md(o,e,n)).catch(Io)}),Zg.apply(this,arguments)}function Gy(i,e){return kl.apply(this,arguments)}function kl(){return kl=(0,C.Z)(function*(i,e){const n=cn(i),o=e.batch.batchId;try{const u=yield yg(n.localStore,e);wh(n,o,null),yf(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Fl(n,u)}catch(u){yield Io(u)}}),kl.apply(this,arguments)}function yp(i,e,n){return vp.apply(this,arguments)}function vp(){return vp=(0,C.Z)(function*(i,e,n){const o=cn(i);try{const u=yield function(f,I){const P=cn(f);return P.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let q;return P.mutationQueue.lookupMutationBatch($,I).next(ae=>(Xn(null!==ae),q=ae.keys(),P.mutationQueue.removeMutationBatch($,ae))).next(()=>P.mutationQueue.performConsistencyCheck($)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId($,q,I)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,q)).next(()=>P.localDocuments.getDocuments($,q))})}(o.localStore,e);wh(o,e,n),yf(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Fl(o,u)}catch(u){yield Io(u)}}),vp.apply(this,arguments)}function Eh(){return Eh=(0,C.Z)(function*(i,e){const n=cn(i);ed(n.remoteStore)||qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(f){const I=cn(f);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>I.mutationQueue.getHighestUnacknowledgedBatchId(P))}(n.localStore);if(-1===o)return void e.resolve();const u=n.hc.get(o)||[];u.push(e),n.hc.set(o,u)}catch(o){const u=nd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Eh.apply(this,arguments)}function yf(i,e){(i.hc.get(e)||[]).forEach(n=>{n.resolve()}),i.hc.delete(e)}function wh(i,e,n){const o=cn(i);let u=o.ac[o.currentUser.toKey()];if(u){const f=u.get(e);f&&(n?f.reject(n):f.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Md(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),n&&i.nc._c(o,n);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||ac(i,o)})}function ac(i,e){i.rc.delete(e.path.canonicalString());const n=i.oc.get(e);null!==n&&(_l(i.remoteStore,n),i.oc=i.oc.remove(e),i.uc.delete(n),Ep(i))}function vf(i,e,n){for(const o of n)o instanceof $g?(i.cc.addReference(o.key,e),a_(i,o)):o instanceof Hg?(qt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||ac(i,o.key)):Dn()}function a_(i,e){const n=e.key,o=n.path.canonicalString();i.oc.get(n)||i.rc.has(o)||(qt("SyncEngine","New document in limbo: "+n),i.rc.add(o),Ep(i))}function Ep(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const n=new on($r.fromString(e)),o=i.lc.next();i.uc.set(o,new i_(n)),i.oc=i.oc.insert(n,o),dh(i.remoteStore,new ne(no(ks(n.path)),o,2,Ms.at))}}function Fl(i,e,n){return wp.apply(this,arguments)}function wp(){return wp=(0,C.Z)(function*(i,e,n){const o=cn(i),u=[],f=[],I=[];var P;o.sc.isEmpty()||(o.sc.forEach((P,$)=>{I.push(o.dc($,e,n).then(q=>{if(q){o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,q.fromCache?"not-current":"current"),u.push(q);const ae=Dd.Ci($.targetId,q);f.push(ae)}}))}),yield Promise.all(I),o.nc.Wo(u),yield(P=(0,C.Z)(function*($,q){const ae=cn($);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Be=>_t.forEach(q,Et=>_t.forEach(Et.Si,Ut=>ae.persistence.referenceDelegate.addReference(Be,Et.targetId,Ut)).next(()=>_t.forEach(Et.Di,Ut=>ae.persistence.referenceDelegate.removeReference(Be,Et.targetId,Ut)))))}catch(Be){if(!eo(Be))throw Be;qt("LocalStore","Failed to update sequence numbers: "+Be)}for(const Be of q){const Et=Be.targetId;if(!Be.fromCache){const Ut=ae.Ui.get(Et),In=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);ae.Ui=ae.Ui.insert(Et,In)}}}),function($,q){return P.apply(this,arguments)})(o.localStore,f))}),wp.apply(this,arguments)}function u_(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,C.Z)(function*(i,e){const n=cn(i);if(!n.currentUser.isEqual(e)){qt("SyncEngine","User change. New user:",e.toKey());const o=yield np(n.localStore,e);n.currentUser=e,(u=n).hc.forEach(I=>{I.forEach(P=>{P.reject(new Kt(Dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Fl(n,o.ji)}var u}),Rd.apply(this,arguments)}function Nd(i,e){const n=cn(i),o=n.uc.get(e);if(o&&o.ec)return Ar().add(o.key);{let u=Ar();const f=n.ic.get(e);if(!f)return u;for(const I of f){const P=n.sc.get(I);u=u.unionWith(P.view.Qu)}return u}}function Cp(i,e){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,C.Z)(function*(i,e){const n=cn(i),o=yield Jh(n.localStore,e.query,!0),u=e.view.Zu(o);return n.isPrimaryClient&&vf(n,e.targetId,u.Yu),u}),Mc.apply(this,arguments)}function Ef(i,e){return rd.apply(this,arguments)}function rd(){return rd=(0,C.Z)(function*(i,e){const n=cn(i);return vg(n.localStore,e).then(o=>Fl(n,o))}),rd.apply(this,arguments)}function l_(i,e,n,o){return wf.apply(this,arguments)}function wf(){return wf=(0,C.Z)(function*(i,e,n,o){const u=cn(i),f=yield function(I,P){const $=cn(I),q=cn($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",ae=>q.Tn(ae,P).next(Be=>Be?$.localDocuments.getDocuments(ae,Be):_t.resolve(null)))}(u.localStore,e);var P;null!==f?("pending"===n?yield Ad(u.remoteStore):"acknowledged"===n||"rejected"===n?(wh(u,e,o||null),yf(u,e),P=e,cn(cn(u.localStore).mutationQueue).An(P)):Dn(),yield Fl(u,f)):qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),wf.apply(this,arguments)}function Ch(){return Ch=(0,C.Z)(function*(i,e){const n=cn(i);if(Tf(n),Df(n),!0===e&&!0!==n.fc){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Cf(n,o.toArray());n.fc=!0,yield xc(n.remoteStore,!0);for(const f of u)dh(n.remoteStore,f)}else if(!1===e&&!1!==n.fc){const o=[];let u=Promise.resolve();n.ic.forEach((f,I)=>{n.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>(Md(n,I),Sc(n.localStore,I,!0))),_l(n.remoteStore,I)}),yield u,yield Cf(n,o),function(f){const I=cn(f);I.uc.forEach((P,$)=>{_l(I.remoteStore,$)}),I.cc.fs(),I.uc=new Map,I.oc=new si(on.comparator)}(n),n.fc=!1,yield xc(n.remoteStore,!1)}}),Ch.apply(this,arguments)}function Cf(i,e,n){return If.apply(this,arguments)}function If(){return If=(0,C.Z)(function*(i,e,n){const o=cn(i),u=[],f=[];for(const I of e){let P;const $=o.ic.get(I);if($&&0!==$.length){P=yield Jc(o.localStore,no($[0]));for(const q of $){const ae=o.sc.get(q),Be=yield Cp(o,ae);Be.snapshot&&f.push(Be.snapshot)}}else{const q=yield sp(o.localStore,I);P=yield Jc(o.localStore,q),yield _p(o,bf(q),I,!1)}u.push(P)}return o.nc.Wo(f),u}),If.apply(this,arguments)}function bf(i){return Cu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function c_(i){const e=cn(i);return cn(cn(e.localStore).persistence).vi()}function zy(i,e,n,o){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,C.Z)(function*(i,e,n,o){const u=cn(i);if(u.fc)return void qt("SyncEngine","Ignoring unexpected query state notification.");const f=u.ic.get(e);if(f&&f.length>0)switch(n){case"current":case"not-current":{const I=yield vg(u.localStore,bu(f[0])),P=zi.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Fl(u,I,P);break}case"rejected":yield Sc(u.localStore,e,!0),Md(u,e,o);break;default:Dn()}}),Ip.apply(this,arguments)}function Qg(i,e,n){return bp.apply(this,arguments)}function bp(){return bp=(0,C.Z)(function*(i,e,n){const o=Tf(i);if(o.fc){for(const u of e){if(o.ic.has(u)){qt("SyncEngine","Adding an already active target "+u);continue}const f=yield sp(o.localStore,u),I=yield Jc(o.localStore,f);yield _p(o,bf(f),I.targetId,!1),dh(o.remoteStore,I)}for(const u of n)o.ic.has(u)&&(yield Sc(o.localStore,u,!1).then(()=>{_l(o.remoteStore,u),Md(o,u)}).catch(Io))}}),bp.apply(this,arguments)}function Tf(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wy.bind(null,e),e.nc.Wo=gf.bind(null,e.eventManager),e.nc._c=mf.bind(null,e.eventManager),e}function Df(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yp.bind(null,e),e}class lu{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,C.Z)(function*(){n.It=Sd(e.databaseInfo.databaseId),n.sharedClientState=n.mc(e),n.persistence=n.gc(e),yield n.persistence.start(),n.localStore=n.yc(e),n.gcScheduler=n.Ic(e,n.localStore),n.indexBackfillerScheduler=n.Tc(e,n.localStore)})()}Ic(e,n){return null}Tc(e,n){return null}yc(e){return tp(this.persistence,new mg,e.initialUser,this.It)}gc(e){return new qh(Zh.Bs,this.It)}mc(e){return new Tg}terminate(){var e=this;return(0,C.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tp extends lu{constructor(e,n,o){super(),this.Ec=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,C.Z)(function*(){yield n().call(o,e),yield o.Ec.initialize(o,e),yield Df(o.Ec.syncEngine),yield Ad(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return tp(this.persistence,new mg,e.initialUser,this.It)}Ic(e,n){return new Cr(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Tc(e,n){const o=new Va(n,this.persistence);return new Ju(e.asyncQueue,o)}gc(e){const n=gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Za.withCacheSize(this.cacheSizeBytes):Za.DEFAULT;return new Kh(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Ag(),Vr(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Tg}}class h_ extends Tp{constructor(e,n){super(e,n,!1),this.Ec=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,C.Z)(function*(){yield n().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof up&&(o.sharedClientState.syncEngine={Fr:l_.bind(null,u),$r:zy.bind(null,u),Br:Qg.bind(null,u),vi:c_.bind(null,u),Or:Ef.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var f=(0,C.Z)(function*(I){yield function Yg(i,e){return Ch.apply(this,arguments)}(o.Ec.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return f.apply(this,arguments)}}())})()}mc(e){const n=Ag();if(!up.C(n))throw new Kt(Dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Jg{initialize(e,n){var o=this;return(0,C.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>o_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=u_.bind(null,o.syncEngine),yield xc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ug}createDatastore(e){const n=Sd(e.databaseInfo.databaseId),o=new zm(e.databaseInfo);return new xg(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return n=this.localStore,o=this.datastore,u=e.asyncQueue,f=P=>o_(this.syncEngine,P,0),I=Dg.C()?new Dg:new Wm,new Mg(n,o,u,f,I);var n,o,u,f,I}createSyncEngine(e,n){return function(o,u,f,I,P,$,q){const ae=new jy(o,u,f,I,P,$);return q&&(ae.fc=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,C.Z)(function*(n){const o=cn(n);qt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield ch(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xg(i,e=10240){let n=0;return{read:()=>(0,C.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,C.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Pd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class em{constructor(e,n){this.bc=e,this.It=n,this.metadata=new Ui,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,C.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,C.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,C.Z)(function*(){const n=yield e.Vc();if(null===n)return null;const o=e.Pc.decode(n),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const f=yield e.Dc(u);return new gp(JSON.parse(f),n.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,C.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const n=e.Cc();n<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Dc(e){var n=this;return(0,C.Z)(function*(){for(;n.buffer.length<e;)(yield n.xc())&&n.Sc("Reached the end of bundle when more is expected.");const o=n.Pc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,C.Z)(function*(){const n=yield e.bc.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class f_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,C.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Kt(Dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,C.Z)(function*(f,I){const P=cn(f),$=Ec(P.It)+"/documents",q={documents:I.map(Ut=>Al(P.It,Ut))},ae=yield P.fo("BatchGetDocuments",$,q,I.length),Be=new Map;ae.forEach(Ut=>{const Gt=function cl(i,e){return"found"in e?function(n,o){Xn(!!o.found);const u=su(n,o.found.name),f=Ks(o.found.updateTime),I=new gs({mapValue:{fields:o.found.fields}});return pi.newFoundDocument(u,f,I)}(i,e):"missing"in e?function(n,o){Xn(!!o.missing),Xn(!!o.readTime);const u=su(n,o.missing),f=Ks(o.readTime);return pi.newNoDocument(u,f)}(i,e):Dn()}(P.It,Ut);Be.set(Gt.key.toString(),Gt)});const Et=[];return I.forEach(Ut=>{const Gt=Be.get(Ut.toString());Xn(!!Gt),Et.push(Gt)}),Et}),function(f,I){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new vr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,C.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const f=on.fromPath(u);e.mutations.push(new vi(f,e.precondition(f)))}),yield(o=(0,C.Z)(function*(u,f){const I=cn(u),P=Ec(I.It)+"/documents",$={writes:f.map(q=>Gu(I.It,q))};yield I.co("Commit",P,$)}),function(u,f){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Dn();n=nr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Kt(Dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(nr.min())?Oi.exists(!1):Oi.updateTime(n):Oi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(nr.min()))throw new Kt(Dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oi.updateTime(n)}return Oi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class p_{constructor(e,n,o,u,f){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=f,this.Nc=o.maxAttempts,this.xo=new nf(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,C.Z)(function*(){const n=new f_(e.datastore),o=e.Mc(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(f=>{e.Oc(f)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const n=this.updateFunction(e);return!bo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!ol(n)}return!1}}class g_{constructor(e,n,o,u){var f=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Wr.UNAUTHENTICATED,this.clientId=Qu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,C.Z)(function*(P){qt("FirestoreClient","Received user=",P.uid),yield f.authCredentialListener(P),f.user=P});return function(P){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(qt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,C.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Kt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=nd(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Dp(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,C.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),qt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,C.Z)(function*(f){o.isEqual(f)||(yield np(e.localStore,f),o=f)});return function(f){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Sp.apply(this,arguments)}function Ap(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,C.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Mp(i);qt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>Fg(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,f)=>Fg(e.remoteStore,f)),i.onlineComponents=e}),xp.apply(this,arguments)}function Mp(i){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,C.Z)(function*(i){return i.offlineComponents||(qt("FirestoreClient","Using default OfflineComponentProvider"),yield Dp(i,new lu)),i.offlineComponents}),Sf.apply(this,arguments)}function Ih(i){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,C.Z)(function*(i){return i.onlineComponents||(qt("FirestoreClient","Using default OnlineComponentProvider"),yield Ap(i,new Jg)),i.onlineComponents}),Rp.apply(this,arguments)}function vl(i){return Mp(i).then(e=>e.persistence)}function Od(i){return Mp(i).then(e=>e.localStore)}function tm(i){return Ih(i).then(e=>e.remoteStore)}function Np(i){return Ih(i).then(e=>e.syncEngine)}function bh(i){return Af.apply(this,arguments)}function Af(){return Af=(0,C.Z)(function*(i){const e=yield Ih(i),n=e.eventManager;return n.onListen=Wg.bind(null,e.syncEngine),n.onUnlisten=$y.bind(null,e.syncEngine),n}),Af.apply(this,arguments)}function xf(i,e,n={}){const o=new Ui;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(u,f,I,P,$){const q=new Pd({next:Be=>{f.enqueueAndForget(()=>pf(u,ae));const Et=Be.docs.has(I);!Et&&Be.fromCache?$.reject(new Kt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):Et&&Be.fromCache&&P&&"server"===P.source?$.reject(new Kt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Be)},error:Be=>$.reject(Be)}),ae=new yh(ks(I.path),q,{includeMetadataChanges:!0,Nu:!0});return mh(u,ae)}(yield bh(i),i.asyncQueue,e,n,o)})),o.promise}function nm(i,e,n={}){const o=new Ui;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(u,f,I,P,$){const q=new Pd({next:Be=>{f.enqueueAndForget(()=>pf(u,ae)),Be.fromCache&&"server"===P.source?$.reject(new Kt(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Be)},error:Be=>$.reject(Be)}),ae=new yh(I,q,{includeMetadataChanges:!0,Nu:!0});return mh(u,ae)}(yield bh(i),i.asyncQueue,e,n,o)})),o.promise}const kp=new Map;function rm(i,e,n){if(!n)throw new Kt(Dt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function w_(i,e,n,o){if(!0===e&&!0===o)throw new Kt(Dt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Rf(i){if(!on.isDocumentKey(i))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function C_(i){if(on.isDocumentKey(i))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Th(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":Dn()}function di(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Kt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Th(i);throw new Kt(Dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Fp(i,e){if(e<=0)throw new Kt(Dt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Lp{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,w_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Kt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lp(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new wl;switch(n.type){case"gapi":return new Cl(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Kt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=kp.get(e);n&&(qt("ComponentProvider","Removing Datastore"),kp.delete(e),n.terminate())}(this),Promise.resolve()}}function uc(i,e,n,o={}){var u;const f=(i=di(i,id))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&Qi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${n}`,ssl:!1})),o.mockUserToken){let I,P;if("string"==typeof o.mockUserToken)I=o.mockUserToken,P=Wr.MOCK_USER;else{I=(0,ve.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new Kt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Wr($)}i._authCredentials=new fa(new Nu(I,P))}}class ys{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}}class xo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class cu extends xo{constructor(e,n,o){super(e,n,ks(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new on(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function I_(i,e,...n){if(i=(0,ve.m9)(i),rm("collection","path",e),i instanceof id){const o=$r.fromString(e,...n);return C_(o),new cu(i,null,o)}{if(!(i instanceof ys||i instanceof cu))throw new Kt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child($r.fromString(e,...n));return C_(o),new cu(i.firestore,null,o)}}function Up(i,e){if(i=di(i,id),rm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xo(i,null,(n=e,new wu($r.emptyPath(),n)));var n}function Vp(i,e,...n){if(i=(0,ve.m9)(i),1===arguments.length&&(e=Qu.R()),rm("doc","path",e),i instanceof id){const o=$r.fromString(e,...n);return Rf(o),new ys(i,null,new on(o))}{if(!(i instanceof ys||i instanceof cu))throw new Kt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child($r.fromString(e,...n));return Rf(o),new ys(i.firestore,i instanceof cu?i.converter:null,new on(o))}}function b_(i,e){return i=(0,ve.m9)(i),e=(0,ve.m9)(e),(i instanceof ys||i instanceof cu)&&(e instanceof ys||e instanceof cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function im(i,e){return i=(0,ve.m9)(i),e=(0,ve.m9)(e),i instanceof xo&&e instanceof xo&&i.firestore===e.firestore&&So(i._query,e._query)&&i.converter===e.converter}class Dh{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new nf(this,"async_queue_retry"),this.jc=()=>{const n=Vr();n&&qt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=Vr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=Vr();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new Ui;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,C.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(n){if(!eo(n))throw n;qt("AsyncQueue","Operation failed with retryable error: "+n)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,ur("INTERNAL UNHANDLED ERROR: ",function(f){let I=f.message||"";return f.stack&&(I=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),I}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=n,n}enqueueAfterDelay(e,n,o){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const u=xu.createAndSchedule(this,e,n,o,f=>this.Jc(f));return this.Uc.push(u),u}Wc(){this.qc&&Dn()}verifyOperationInProgress(){}Yc(){var e=this;return(0,C.Z)(function*(){let n;do{n=e.$c,yield n}while(n!==e.$c)})()}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Bp(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class qy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const T_=-1;class Ls extends id{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new Dh,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sm(this),this._firestoreClient.terminate()}}function D_(i,e){const n="object"==typeof i?i:(0,p.getApp)(),o="string"==typeof i?i:e||"(default)";return(0,p._getProvider)(n,"firestore").getImmediate({identifier:o})}function go(i){return i._firestoreClient||sm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function sm(i){var e;const n=i._freezeSettings(),o=(f=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new eu(i._databaseId,f,i._persistenceKey,(P=n).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));var f,P;i._firestoreClient=new g_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function om(i,e){Sh(i=di(i,Ls));const n=go(i),o=i._freezeSettings(),u=new Jg;return am(n,u,new Tp(u,o.cacheSizeBytes,e?.forceOwnership))}function jp(i){Sh(i=di(i,Ls));const e=go(i),n=i._freezeSettings(),o=new Jg;return am(e,o,new h_(o,n.cacheSizeBytes))}function am(i,e,n){const o=new Ui;return i.asyncQueue.enqueue((0,C.Z)(function*(){try{yield Dp(i,n),yield Ap(i,e),o.resolve()}catch(u){const f=u;if(!("FirebaseError"===(I=f).name?I.code===Dt.FAILED_PRECONDITION||I.code===Dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw f;Qi("Error enabling offline persistence. Falling back to persistence disabled: "+f),o.reject(f)}var I})).then(()=>o.promise)}function $p(i){if(i._initialized&&!i._terminated)throw new Kt(Dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ui;return i._queue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{yield(n=(0,C.Z)(function*(o){if(!ds.C())return Promise.resolve();const u=o+"main";yield ds.delete(u)}),function(o){return n.apply(this,arguments)})(gg(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function S_(i){return function(e){const n=new Ui;return e.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function Kg(i,e){return Eh.apply(this,arguments)}(yield Np(e),n)})),n.promise}(go(i=di(i,Ls)))}function A_(i){return function m_(i){return i.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield vl(i),n=yield tm(i);return e.setNetworkEnabled(!0),function(o){const u=cn(o);return u._u.delete(0),lh(u)}(n)}))}(go(i=di(i,Ls)))}function x_(i){return function __(i){return i.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield vl(i),n=yield tm(i);return e.setNetworkEnabled(!1),(o=(0,C.Z)(function*(u){const f=cn(u);f._u.add(0),yield ch(f),f.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(n);var o}))}(go(i=di(i,Ls)))}function M_(i,e){const n=go(i=di(i,Ls)),o=new qy;return function E_(i,e,n,o){const u=function(f,I){let P;return P="string"==typeof f?(new TextEncoder).encode(f):f,$=function($,q){if($ instanceof Uint8Array)return Xg($,q);if($ instanceof ArrayBuffer)return Xg(new Uint8Array($),q);if($ instanceof ReadableStream)return $.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new em($,I);var $}(n,Sd(e));i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){!function d_(i,e,n){const o=cn(i);var u;(u=(0,C.Z)(function*(f,I,P){try{const $=yield I.getMetadata();if(yield function(Et,Ut){const Gt=cn(Et),In=Ks(Ut.createTime);return Gt.persistence.runTransaction("hasNewerBundle","readonly",Jn=>Gt.Ns.getBundleMetadata(Jn,Ut.id)).then(Jn=>!!Jn&&Jn.createTime.compareTo(In)>=0)}(f.localStore,$))return yield I.close(),P._completeWith({taskState:"Success",documentsLoaded:(Et=$).totalDocuments,bytesLoaded:Et.totalBytes,totalDocuments:Et.totalDocuments,totalBytes:Et.totalBytes}),Promise.resolve(new Set);P._updateProgress(jg($));const q=new r_($,f.localStore,I.It);let ae=yield I.wc();for(;ae;){const Et=yield q.Ou(ae);Et&&P._updateProgress(Et),ae=yield I.wc()}const Be=yield q.complete();return yield Fl(f,Be.Bu,void 0),yield function(Et,Ut){const Gt=cn(Et);return Gt.persistence.runTransaction("Save bundle","readwrite",In=>Gt.Ns.saveBundleMetadata(In,Ut))}(f.localStore,$),P._completeWith(Be.progress),Promise.resolve(Be.$u)}catch($){return Qi("SyncEngine",`Loading bundle failed with ${$}`),P._failWith($),Promise.resolve(new Set)}var Et}),function(f,I,P){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Np(i),u,o)}))}(n,i._databaseId,e,o),o}function R_(i,e){return function Op(i,e){return i.asyncQueue.enqueue((0,C.Z)(function*(){return function(n,o){const u=cn(n);return u.persistence.runTransaction("Get named query","readonly",f=>u.Ns.getNamedQuery(f,o))}(yield Od(i),e)}))}(go(i=di(i,Ls)),e).then(n=>n?new xo(i,null,n.query):null)}function Sh(i){if(i._initialized||i._terminated)throw new Kt(Dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Kt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qu(br.fromBase64String(e))}catch(n){throw new Kt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qu(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sd{constructor(e){this._methodName=e}}class Nf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Kt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Kt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $n(this._lat,e._lat)||$n(this._long,e._long)}}const Hp=/^__.*__$/;class N_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new rt(e,this.data,this.fieldMask,n,this.fieldTransforms):new ue(e,this.data,n,this.fieldTransforms)}}class El{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new rt(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dn()}}class Mo{constructor(e,n,o,u,f,I){this.settings=e,this.databaseId=n,this.It=o,this.ignoreUndefinedProperties=u,void 0===f&&this.ea(),this.fieldTransforms=f||[],this.fieldMask=I||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Mo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return xh(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(kd(this.na)&&Hp.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class od{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=o||Sd(e)}fa(e,n,o,u=!1){return new Mo({na:e,methodName:n,la:o,path:Ri.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ll(i){const e=i._freezeSettings(),n=Sd(i._databaseId);return new od(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ka(i,e,n,o,u,f={}){const I=i.fa(f.merge||f.mergeFields?2:0,e,n,u);Pf("Data must be an object, but it was:",I,o);const P=Wp(o,I);let $,q;if(f.merge)$=new Rs(I.fieldMask),q=I.fieldTransforms;else if(f.mergeFields){const ae=[];for(const Be of f.mergeFields){const Et=Of(e,Be,n);if(!I.contains(Et))throw new Kt(Dt.INVALID_ARGUMENT,`Field '${Et}' is specified in your field mask but missing from your input data.`);zp(ae,Et)||ae.push(Et)}$=new Rs(ae),q=I.fieldTransforms.filter(Be=>$.covers(Be.field))}else $=null,q=I.fieldTransforms;return new N_(new gs(P),$,q)}class ad extends sd{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}function ud(i,e,n){return new Mo({na:3,la:e.settings.la,methodName:i._methodName,ra:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Rc extends sd{_toFieldTransform(e){return new Ca(e.path,new ho)}isEqual(e){return e instanceof Rc}}class Fd extends sd{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=ud(this,e,!0),o=this.da.map(f=>Zu(f,n)),u=new Ao(o);return new Ca(e.path,u)}isEqual(e){return this===e}}class Ld extends sd{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=ud(this,e,!0),o=this.da.map(f=>Zu(f,n)),u=new Ha(o);return new Ca(e.path,u)}isEqual(e){return this===e}}class Ud extends sd{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=new ju(e.It,mc(e.It,this._a));return new Ca(e.path,n)}isEqual(e){return this===e}}function Nc(i,e,n,o){const u=i.fa(1,e,n);Pf("Data must be an object, but it was:",u,o);const f=[],I=gs.empty();Xa(o,($,q)=>{const ae=Ah(e,$,n);q=(0,ve.m9)(q);const Be=u.ua(ae);if(q instanceof ad)f.push(ae);else{const Et=Zu(q,Be);null!=Et&&(f.push(ae),I.set(ae,Et))}});const P=new Rs(f);return new El(I,P,u.fieldTransforms)}function Pc(i,e,n,o,u,f){const I=i.fa(1,e,n),P=[Of(e,o,n)],$=[u];if(f.length%2!=0)throw new Kt(Dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Et=0;Et<f.length;Et+=2)P.push(Of(e,f[Et])),$.push(f[Et+1]);const q=[],ae=gs.empty();for(let Et=P.length-1;Et>=0;--Et)if(!zp(q,P[Et])){const Ut=P[Et];let Gt=$[Et];Gt=(0,ve.m9)(Gt);const In=I.ua(Ut);if(Gt instanceof ad)q.push(Ut);else{const Jn=Zu(Gt,In);null!=Jn&&(q.push(Ut),ae.set(Ut,Jn))}}const Be=new Rs(q);return new El(ae,Be,I.fieldTransforms)}function ld(i,e,n,o=!1){return Zu(n,i.fa(o?4:3,e))}function Zu(i,e){if(Gp(i=(0,ve.m9)(i)))return Pf("Unsupported field value:",e,i),Wp(i,e);if(i instanceof sd)return function(n,o){if(!kd(o.na))throw o.aa(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(n,o){const u=[];let f=0;for(const I of n){let P=Zu(I,o.ca(f));null==P&&(P={nullValue:"NULL_VALUE"}),u.push(P),f++}return{arrayValue:{values:u}}}(i,e)}return function(n,o){if(null===(n=(0,ve.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return mc(o.It,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const u=ci.fromDate(n);return{timestampValue:_s(o.It,u)}}if(n instanceof ci){const u=new ci(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:_s(o.It,u)}}if(n instanceof Nf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qu)return{bytesValue:za(o.It,n._byteString)};if(n instanceof ys){const u=o.databaseId,f=n.firestore._databaseId;if(!f.isEqual(u))throw o.aa(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wu(n.firestore._databaseId||o.databaseId,n._key.path)}}throw o.aa(`Unsupported field value: ${Th(n)}`)}(i,e)}function Wp(i,e){const n={};return jl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xa(i,(o,u)=>{const f=Zu(u,e.ia(o));null!=f&&(n[o]=f)}),{mapValue:{fields:n}}}function Gp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ci||i instanceof Nf||i instanceof qu||i instanceof ys||i instanceof sd)}function Pf(i,e,n){if(!Gp(n)||"object"!=typeof(o=n)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Th(n);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function Of(i,e,n){if((e=(0,ve.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return Ah(i,e);throw xh("Field path arguments must be of type string or ",i,!1,void 0,n)}const um=new RegExp("[~\\*/\\[\\]]");function Ah(i,e,n){if(e.search(um)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new du(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function xh(i,e,n,o,u){const f=o&&!o.isEmpty(),I=void 0!==u;let P=`Function ${e}() called with invalid data`;n&&(P+=" (via `toFirestore()`)"),P+=". ";let $="";return(f||I)&&($+=" (found",f&&($+=` in field ${o}`),I&&($+=` in document ${u}`),$+=")"),new Kt(Dt.INVALID_ARGUMENT,P+i+$)}function zp(i,e){return i.some(n=>n.isEqual(e))}class Vd{constructor(e,n,o,u,f){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new P_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class P_ extends Vd{data(){return super.data()}}function kf(i,e){return"string"==typeof e?Ah(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class Oc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends Vd{constructor(e,n,o,u,f,I){super(e,n,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(kf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Bd extends cd{data(e={}){return super.data(e)}}class lc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Oc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Bd(this._firestore,this._userDataWriter,o.key,o,new Oc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Kt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new Bd(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Oc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:f++}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>u||3!==I.type).map(I=>{const P=new Bd(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Oc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let $=-1,q=-1;return 0!==I.type&&($=f.indexOf(I.doc.key),f=f.delete(I.doc.key)),1!==I.type&&(f=f.add(I.doc),q=f.indexOf(I.doc.key)),{type:qp(I.type),doc:P,oldIndex:$,newIndex:q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qp(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dn()}}function O_(i,e){return i instanceof cd&&e instanceof cd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof lc&&e instanceof lc&&i._firestore===e._firestore&&im(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Mh(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Kt(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kc{}function Zp(i,...e){for(const n of e)i=n._apply(i);return i}class k_ extends kc{constructor(e,n,o){super(),this.wa=e,this.ma=n,this.ga=o,this.type="where"}_apply(e){const n=Ll(e.firestore),o=function(u,f,I,P,$,q,ae){let Be;if($.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){gm(ae,q);const Ut=[];for(const Gt of ae)Ut.push(ng(P,u,Gt));Be={arrayValue:{values:Ut}}}else Be=ng(P,u,ae)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||gm(ae,q),Be=ld(I,"where",ae,"in"===q||"not-in"===q);const Et=Ni.create($,q,Be);return function(Ut,Gt){if(Gt.dt()){const Jn=Pi(Ut);if(null!==Jn&&!Jn.isEqual(Gt.field))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Jn.toString()}' and '${Gt.field.toString()}'`);const Ti=ja(Ut);null!==Ti&&mm(0,Gt.field,Ti)}const In=function(Jn,Ti){for(const ts of Jn.filters)if(Ti.indexOf(ts.op)>=0)return ts.op;return null}(Ut,function(Jn){switch(Jn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Gt.op));if(null!==In)throw new Kt(Dt.INVALID_ARGUMENT,In===Gt.op?`Invalid query. You cannot use more than one '${Gt.op.toString()}' filter.`:`Invalid query. You cannot use '${Gt.op.toString()}' filters with '${In.toString()}' filters.`)}(u,Et),Et}(e._query,0,n,e.firestore._databaseId,this.wa,this.ma,this.ga);return new xo(e.firestore,e.converter,function(u,f){const I=u.filters.concat([f]);return new wu(u.path,u.collectionGroup,u.explicitOrderBy.slice(),I,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}function Kp(i,e,n){const o=e,u=kf("where",i);return new k_(u,o,n)}class Yp extends kc{constructor(e,n){super(),this.wa=e,this.ya=n,this.type="orderBy"}_apply(e){const n=function(o,u,f){if(null!==o.startAt)throw new Kt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Kt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new el(u,f);return function(P,$){if(null===ja(P)){const q=Pi(P);null!==q&&mm(0,q,$.field)}}(o,I),I}(e._query,this.wa,this.ya);return new xo(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new wu(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function lm(i,e="asc"){const n=e,o=kf("orderBy",i);return new Yp(o,n)}class Qp extends kc{constructor(e,n,o){super(),this.type=e,this.pa=n,this.Ia=o}_apply(e){return new xo(e.firestore,e.converter,tl(e._query,this.pa,this.Ia))}}function Jp(i){return Fp("limit",i),new Qp("limit",i,"F")}function cm(i){return Fp("limitToLast",i),new Qp("limitToLast",i,"L")}class Xp extends kc{constructor(e,n,o){super(),this.type=e,this.Ta=n,this.Ea=o}_apply(e){const n=tg(e,this.type,this.Ta,this.Ea);return new xo(e.firestore,e.converter,(u=n,new wu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function eg(...i){return new Xp("startAt",i,!0)}function dm(...i){return new Xp("startAfter",i,!1)}class hm extends kc{constructor(e,n,o){super(),this.type=e,this.Ta=n,this.Ea=o}_apply(e){const n=tg(e,this.type,this.Ta,this.Ea);return new xo(e.firestore,e.converter,(u=n,new wu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function fm(...i){return new hm("endBefore",i,!1)}function pm(...i){return new hm("endAt",i,!0)}function tg(i,e,n,o){if(n[0]=(0,ve.m9)(n[0]),n[0]instanceof Vd)return function(u,f,I,P,$){if(!P)throw new Kt(Dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const q=[];for(const ae of Do(u))if(ae.field.isKeyField())q.push(en(f,P.key));else{const Be=P.data.field(ae.field);if(Fu(Be))throw new Kt(Dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Be){const Et=ae.field.canonicalString();throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Et}' (used as the orderBy) does not exist.`)}q.push(Be)}return new co(q,$)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Ll(i.firestore);return function(f,I,P,$,q,ae){const Be=f.explicitOrderBy;if(q.length>Be.length)throw new Kt(Dt.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Et=[];for(let Ut=0;Ut<q.length;Ut++){const Gt=q[Ut];if(Be[Ut].field.isKeyField()){if("string"!=typeof Gt)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof Gt}`);if(!Iu(f)&&-1!==Gt.indexOf("/"))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${Gt}' contains a slash.`);const In=f.path.child($r.fromString(Gt));if(!on.isDocumentKey(In))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${In}' is not because it contains an odd number of segments.`);const Jn=new on(In);Et.push(en(I,Jn))}else{const In=ld(P,$,Gt);Et.push(In)}}return new co(Et,ae)}(i._query,i.firestore._databaseId,u,e,n,o)}}function ng(i,e,n){if("string"==typeof(n=(0,ve.m9)(n))){if(""===n)throw new Kt(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iu(e)&&-1!==n.indexOf("/"))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child($r.fromString(n));if(!on.isDocumentKey(o))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return en(i,new on(o))}if(n instanceof ys)return en(i,n._key);throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Th(n)}.`)}function gm(i,e){if(!Array.isArray(i)||0===i.length)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mm(i,e,n){if(!n.isEqual(e))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const F_={maxAttempts:5};class Rh{convertValue(e,n="none"){switch(T(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ti(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Dn()}}convertObject(e,n){const o={};return Xa(e.fields,(u,f)=>{o[u]=this.convertValue(f,n)}),o}convertGeoPoint(e){return new Nf(ti(e.latitude),ti(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=gu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Xo(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new ci(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=$r.fromString(e);Xn(qd(o));const u=new Is(o.get(1),o.get(3)),f=new on(o.popFirst(5));return u.isEqual(n)||ur(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),f}}function jd(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class _m extends Rh{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,n)}}class rg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ll(e)}set(e,n,o){this._verifyNotCommitted();const u=cc(e,this._firestore),f=jd(u.converter,n,o),I=Ka(this._dataReader,"WriteBatch.set",u._key,f,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,Oi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const f=cc(e,this._firestore);let I;return I="string"==typeof(n=(0,ve.m9)(n))||n instanceof du?Pc(this._dataReader,"WriteBatch.update",f._key,n,o,u):Nc(this._dataReader,"WriteBatch.update",f._key,n),this._mutations.push(I.toMutation(f._key,Oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=cc(e,this._firestore);return this._mutations=this._mutations.concat(new vr(n._key,Oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(Dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cc(i,e){if((i=(0,ve.m9)(i)).firestore!==e)throw new Kt(Dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function ym(i){i=di(i,ys);const e=di(i.firestore,Ls);return xf(go(e),i._key).then(n=>Ff(e,i,n))}class Fc extends Rh{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,n)}}function vm(i){i=di(i,ys);const e=di(i.firestore,Ls),n=go(e),o=new Fc(e);return function y_(i,e){const n=new Ui;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(o=(0,C.Z)(function*(u,f,I){try{const P=yield function($,q){const ae=cn($);return ae.persistence.runTransaction("read document","readonly",Be=>ae.localDocuments.getDocument(Be,q))}(u,f);P.isFoundDocument()?I.resolve(P):P.isNoDocument()?I.resolve(null):I.reject(new Kt(Dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const $=nd(P,`Failed to get document '${f} from cache`);I.reject($)}}),function(u,f,I){return o.apply(this,arguments)})(yield Od(i),e,n);var o})),n.promise}(n,i._key).then(u=>new cd(e,o,i._key,u,new Oc(null!==u&&u.hasLocalMutations,!0),i.converter))}function Em(i){i=di(i,ys);const e=di(i.firestore,Ls);return xf(go(e),i._key,{source:"server"}).then(n=>Ff(e,i,n))}function wm(i){i=di(i,xo);const e=di(i.firestore,Ls),n=go(e),o=new Fc(e);return Mh(i._query),nm(n,i._query).then(u=>new lc(e,o,i,u))}function Yy(i){i=di(i,xo);const e=di(i.firestore,Ls),n=go(e),o=new Fc(e);return function v_(i,e){const n=new Ui;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(o=(0,C.Z)(function*(u,f,I){try{const P=yield Jh(u,f,!0),$=new mp(f,P.Hi),q=$.ju(P.documents),ae=$.applyChanges(q,!1);I.resolve(ae.snapshot)}catch(P){const $=nd(P,`Failed to execute query '${f} against cache`);I.reject($)}}),function(u,f,I){return o.apply(this,arguments)})(yield Od(i),e,n);var o})),n.promise}(n,i._query).then(u=>new lc(e,o,i,u))}function L_(i){i=di(i,xo);const e=di(i.firestore,Ls),n=go(e),o=new Fc(e);return nm(n,i._query,{source:"server"}).then(u=>new lc(e,o,i,u))}function U_(i,e,n){i=di(i,ys);const o=di(i.firestore,Ls),u=jd(i.converter,e,n);return $d(o,[Ka(Ll(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Oi.none())])}function Cm(i,e,n,...o){i=di(i,ys);const u=di(i.firestore,Ls),f=Ll(u);let I;return I="string"==typeof(e=(0,ve.m9)(e))||e instanceof du?Pc(f,"updateDoc",i._key,e,n,o):Nc(f,"updateDoc",i._key,e),$d(u,[I.toMutation(i._key,Oi.exists(!0))])}function V_(i){return $d(di(i.firestore,Ls),[new vr(i._key,Oi.none())])}function Ro(i,e){const n=di(i.firestore,Ls),o=Vp(i),u=jd(i.converter,e);return $d(n,[Ka(Ll(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Oi.exists(!1))]).then(()=>o)}function Im(i,...e){var n,o,u;i=(0,ve.m9)(i);let f={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Bp(e[I])||(f=e[I],I++);const P={includeMetadataChanges:f.includeMetadataChanges};if(Bp(e[I])){const Be=e[I];e[I]=null===(n=Be.next)||void 0===n?void 0:n.bind(Be),e[I+1]=null===(o=Be.error)||void 0===o?void 0:o.bind(Be),e[I+2]=null===(u=Be.complete)||void 0===u?void 0:u.bind(Be)}let $,q,ae;if(i instanceof ys)q=di(i.firestore,Ls),ae=ks(i._key.path),$={next:Be=>{e[I]&&e[I](Ff(q,i,Be))},error:e[I+1],complete:e[I+2]};else{const Be=di(i,xo);q=di(Be.firestore,Ls),ae=Be._query;const Et=new Fc(q);$={next:Ut=>{e[I]&&e[I](new lc(q,Et,Be,Ut))},error:e[I+1],complete:e[I+2]},Mh(i._query)}return function(Be,Et,Ut,Gt){const In=new Pd(Gt),Jn=new yh(Et,In,Ut);return Be.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return mh(yield bh(Be),Jn)})),()=>{In.Rc(),Be.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return pf(yield bh(Be),Jn)}))}}(go(q),ae,P,$)}function B_(i,e){return function Mf(i,e){const n=new Pd(e);return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return o=yield bh(i),u=n,cn(o).Ru.add(u),void u.next();var o,u})),()=>{n.Rc(),i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return o=yield bh(i),u=n,void cn(o).Ru.delete(u);var o,u}))}}(go(i=di(i,Ls)),Bp(e)?e:{next:e})}function $d(i,e){return function(n,o){const u=new Ui;return n.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function Hy(i,e,n){return zg.apply(this,arguments)}(yield Np(n),o,u)})),u.promise}(go(i),e)}function Ff(i,e,n){const o=n.docs.get(e._key),u=new Fc(i);return new cd(i,u,e._key,o,new Oc(n.hasPendingWrites,n.fromCache),e.converter)}class j_ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ll(e)}get(e){const n=cc(e,this._firestore),o=new _m(this._firestore);return this._transaction.lookup([n._key]).then(u=>{if(!u||1!==u.length)return Dn();const f=u[0];if(f.isFoundDocument())return new Vd(this._firestore,o,f.key,f,n.converter);if(f.isNoDocument())return new Vd(this._firestore,o,n._key,null,n.converter);throw Dn()})}set(e,n,o){const u=cc(e,this._firestore),f=jd(u.converter,n,o),I=Ka(this._dataReader,"Transaction.set",u._key,f,null!==u.converter,o);return this._transaction.set(u._key,I),this}update(e,n,o,...u){const f=cc(e,this._firestore);let I;return I="string"==typeof(n=(0,ve.m9)(n))||n instanceof du?Pc(this._dataReader,"Transaction.update",f._key,n,o,u):Nc(this._dataReader,"Transaction.update",f._key,n),this._transaction.update(f._key,I),this}delete(e){const n=cc(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=cc(e,this._firestore),o=new Fc(this._firestore);return super.get(e).then(u=>new cd(this._firestore,o,n._key,u._document,new Oc(!1,!1),n.converter))}}function bm(i,e,n){i=di(i,Ls);const o=Object.assign(Object.assign({},F_),n);return function(u){if(u.maxAttempts<1)throw new Kt(Dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Pp(i,e,n){const o=new Ui;return i.asyncQueue.enqueueAndForget((0,C.Z)(function*(){const u=yield(f=i,Ih(f).then(I=>I.datastore));var f;new p_(i.asyncQueue,u,n,e,o).run()})),o.promise}(go(i),u=>e(new j_(i,u)),o)}function Tm(){return new ad("deleteField")}function Hd(){return new Rc("serverTimestamp")}function $_(...i){return new Fd("arrayUnion",i)}function H_(...i){return new Ld("arrayRemove",i)}function Dm(i){return new Ud("increment",i)}!function(i,e=!0){ss=p.SDK_VERSION,(0,p._registerComponent)(new Z.wA("firestore",(n,{instanceIdentifier:o,options:u})=>{const f=n.getProvider("app").getImmediate(),I=new Ls(new Vl(n.getProvider("auth-internal")),new Yu(n.getProvider("app-check-internal")),function(P,$){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Kt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Is(P.options.projectId,$)}(f,o),f);return u=Object.assign({useFetchStreams:e},u),I._setSettings(u),I},"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(Lr,"3.5.0",i),(0,p.registerVersion)(Lr,"3.5.0","esm2017")}()},2090:(an,ot,j)=>{j.d(ot,{$s:()=>tr,BH:()=>dt,DV:()=>fn,G6:()=>ee,GJ:()=>Kn,L:()=>we,LL:()=>Rt,Pz:()=>An,Sg:()=>ht,UG:()=>it,UI:()=>hr,US:()=>Le,Yr:()=>ct,ZB:()=>he,ZR:()=>Ke,b$:()=>$t,cI:()=>wn,dS:()=>_e,eu:()=>Ze,g5:()=>Z,gK:()=>oi,gQ:()=>Pr,h$:()=>je,hl:()=>ie,hu:()=>p,jU:()=>et,m9:()=>xn,ne:()=>mr,p$:()=>re,pd:()=>qn,r3:()=>Vn,ru:()=>Vt,tV:()=>Ye,uI:()=>Ft,ug:()=>ft,vZ:()=>Dr,w1:()=>lt,w9:()=>On,xO:()=>Mr,xb:()=>er,z$:()=>at,zI:()=>Ne,zd:()=>ln});const p=function(De,le){if(!De)throw Z(le)},Z=function(De){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+De)},R=function(De){const le=[];let ce=0;for(let be=0;be<De.length;be++){let Ie=De.charCodeAt(be);Ie<128?le[ce++]=Ie:Ie<2048?(le[ce++]=Ie>>6|192,le[ce++]=63&Ie|128):55296==(64512&Ie)&&be+1<De.length&&56320==(64512&De.charCodeAt(be+1))?(Ie=65536+((1023&Ie)<<10)+(1023&De.charCodeAt(++be)),le[ce++]=Ie>>18|240,le[ce++]=Ie>>12&63|128,le[ce++]=Ie>>6&63|128,le[ce++]=63&Ie|128):(le[ce++]=Ie>>12|224,le[ce++]=Ie>>6&63|128,le[ce++]=63&Ie|128)}return le},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(De,le){if(!Array.isArray(De))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ce=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let Ie=0;Ie<De.length;Ie+=3){const yt=De[Ie],kt=Ie+1<De.length,yn=kt?De[Ie+1]:0,rr=Ie+2<De.length,Qn=rr?De[Ie+2]:0;let Ae=(15&yn)<<2|Qn>>6,Fe=63&Qn;rr||(Fe=64,kt||(Ae=64)),be.push(ce[yt>>2],ce[(3&yt)<<4|yn>>4],ce[Ae],ce[Fe])}return be.join("")},encodeString(De,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(De):this.encodeByteArray(R(De),le)},decodeString(De,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(De):function(De){const le=[];let ce=0,be=0;for(;ce<De.length;){const Ie=De[ce++];if(Ie<128)le[be++]=String.fromCharCode(Ie);else if(Ie>191&&Ie<224){const yt=De[ce++];le[be++]=String.fromCharCode((31&Ie)<<6|63&yt)}else if(Ie>239&&Ie<365){const rr=((7&Ie)<<18|(63&De[ce++])<<12|(63&De[ce++])<<6|63&De[ce++])-65536;le[be++]=String.fromCharCode(55296+(rr>>10)),le[be++]=String.fromCharCode(56320+(1023&rr))}else{const yt=De[ce++],kt=De[ce++];le[be++]=String.fromCharCode((15&Ie)<<12|(63&yt)<<6|63&kt)}}return le.join("")}(this.decodeStringToByteArray(De,le))},decodeStringToByteArray(De,le){this.init_();const ce=le?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let Ie=0;Ie<De.length;){const yt=ce[De.charAt(Ie++)],yn=Ie<De.length?ce[De.charAt(Ie)]:0;++Ie;const Qn=Ie<De.length?ce[De.charAt(Ie)]:64;++Ie;const Je=Ie<De.length?ce[De.charAt(Ie)]:64;if(++Ie,null==yt||null==yn||null==Qn||null==Je)throw Error();be.push(yt<<2|yn>>4),64!==Qn&&(be.push(yn<<4&240|Qn>>2),64!==Je&&be.push(Qn<<6&192|Je))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let De=0;De<this.ENCODED_VALS.length;De++)this.byteToCharMap_[De]=this.ENCODED_VALS.charAt(De),this.charToByteMap_[this.byteToCharMap_[De]]=De,this.byteToCharMapWebSafe_[De]=this.ENCODED_VALS_WEBSAFE.charAt(De),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[De]]=De,De>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(De)]=De,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(De)]=De)}}},je=function(De){const le=R(De);return Le.encodeByteArray(le,!0)},we=function(De){return je(De).replace(/\./g,"")},Ye=function(De){try{return Le.decodeString(De,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function re(De){return he(void 0,De)}function he(De,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===De&&(De={});break;case Array:De=[];break;default:return le}for(const ce in le)!le.hasOwnProperty(ce)||!Ce(ce)||(De[ce]=he(De[ce],le[ce]));return De}function Ce(De){return"__proto__"!==De}class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,ce)=>{this.resolve=le,this.reject=ce})}wrapCallback(le){return(ce,be)=>{ce?this.reject(ce):this.resolve(be),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(ce):le(ce,be))}}}function ht(De,le){if(De.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=le||"demo-project",Ie=De.iat||0,yt=De.sub||De.user_id;if(!yt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const kt=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:Ie,exp:Ie+3600,auth_time:Ie,sub:yt,user_id:yt,firebase:{sign_in_provider:"custom",identities:{}}},De);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(kt)),""].join(".")}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ft(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function it(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function Vt(){const De="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof De&&void 0!==De.id}function $t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lt(){const De=at();return De.indexOf("MSIE ")>=0||De.indexOf("Trident/")>=0}function ct(){return!1}function ee(){return!it()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){return"object"==typeof indexedDB}function Ze(){return new Promise((De,le)=>{try{let ce=!0;const be="validate-browser-context-for-indexeddb-analytics-module",Ie=self.indexedDB.open(be);Ie.onsuccess=()=>{Ie.result.close(),ce||self.indexedDB.deleteDatabase(be),De(!0)},Ie.onupgradeneeded=()=>{ce=!1},Ie.onerror=()=>{var yt;le((null===(yt=Ie.error)||void 0===yt?void 0:yt.message)||"")}}catch(ce){le(ce)}})}function Ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ke extends Error{constructor(le,ce,be){super(ce),this.code=le,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}}class Rt{constructor(le,ce,be){this.service=le,this.serviceName=ce,this.errors=be}create(le,...ce){const be=ce[0]||{},Ie=`${this.service}/${le}`,yt=this.errors[le],kt=yt?function bt(De,le){return De.replace(Yt,(ce,be)=>{const Ie=le[be];return null!=Ie?String(Ie):`<${be}?>`})}(yt,be):"Error";return new Ke(Ie,`${this.serviceName}: ${kt} (${Ie}).`,be)}}const Yt=/\{\$([^}]+)}/g;function wn(De){return JSON.parse(De)}function An(De){return JSON.stringify(De)}const Mt=function(De){let le={},ce={},be={},Ie="";try{const yt=De.split(".");le=wn(Ye(yt[0])||""),ce=wn(Ye(yt[1])||""),Ie=yt[2],be=ce.d||{},delete ce.d}catch{}return{header:le,claims:ce,data:be,signature:Ie}},On=function(De){const ce=Mt(De).claims;return!!ce&&"object"==typeof ce&&ce.hasOwnProperty("iat")},Kn=function(De){const le=Mt(De).claims;return"object"==typeof le&&!0===le.admin};function Vn(De,le){return Object.prototype.hasOwnProperty.call(De,le)}function fn(De,le){if(Object.prototype.hasOwnProperty.call(De,le))return De[le]}function er(De){for(const le in De)if(Object.prototype.hasOwnProperty.call(De,le))return!1;return!0}function hr(De,le,ce){const be={};for(const Ie in De)Object.prototype.hasOwnProperty.call(De,Ie)&&(be[Ie]=le.call(ce,De[Ie],Ie,De));return be}function Dr(De,le){if(De===le)return!0;const ce=Object.keys(De),be=Object.keys(le);for(const Ie of ce){if(!be.includes(Ie))return!1;const yt=De[Ie],kt=le[Ie];if(cr(yt)&&cr(kt)){if(!Dr(yt,kt))return!1}else if(yt!==kt)return!1}for(const Ie of be)if(!ce.includes(Ie))return!1;return!0}function cr(De){return null!==De&&"object"==typeof De}function Mr(De){const le=[];for(const[ce,be]of Object.entries(De))Array.isArray(be)?be.forEach(Ie=>{le.push(encodeURIComponent(ce)+"="+encodeURIComponent(Ie))}):le.push(encodeURIComponent(ce)+"="+encodeURIComponent(be));return le.length?"&"+le.join("&"):""}function ln(De){const le={};return De.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[Ie,yt]=be.split("=");le[decodeURIComponent(Ie)]=decodeURIComponent(yt)}}),le}function qn(De){const le=De.indexOf("?");if(!le)return"";const ce=De.indexOf("#",le);return De.substring(le,ce>0?ce:void 0)}class Pr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let le=1;le<this.blockSize;++le)this.pad_[le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(le,ce){ce||(ce=0);const be=this.W_;if("string"==typeof le)for(let Je=0;Je<16;Je++)be[Je]=le.charCodeAt(ce)<<24|le.charCodeAt(ce+1)<<16|le.charCodeAt(ce+2)<<8|le.charCodeAt(ce+3),ce+=4;else for(let Je=0;Je<16;Je++)be[Je]=le[ce]<<24|le[ce+1]<<16|le[ce+2]<<8|le[ce+3],ce+=4;for(let Je=16;Je<80;Je++){const Ae=be[Je-3]^be[Je-8]^be[Je-14]^be[Je-16];be[Je]=4294967295&(Ae<<1|Ae>>>31)}let Qn,Ir,Ie=this.chain_[0],yt=this.chain_[1],kt=this.chain_[2],yn=this.chain_[3],rr=this.chain_[4];for(let Je=0;Je<80;Je++){Je<40?Je<20?(Qn=yn^yt&(kt^yn),Ir=1518500249):(Qn=yt^kt^yn,Ir=1859775393):Je<60?(Qn=yt&kt|yn&(yt|kt),Ir=2400959708):(Qn=yt^kt^yn,Ir=3395469782);const Ae=(Ie<<5|Ie>>>27)+Qn+rr+Ir+be[Je]&4294967295;rr=yn,yn=kt,kt=4294967295&(yt<<30|yt>>>2),yt=Ie,Ie=Ae}this.chain_[0]=this.chain_[0]+Ie&4294967295,this.chain_[1]=this.chain_[1]+yt&4294967295,this.chain_[2]=this.chain_[2]+kt&4294967295,this.chain_[3]=this.chain_[3]+yn&4294967295,this.chain_[4]=this.chain_[4]+rr&4294967295}update(le,ce){if(null==le)return;void 0===ce&&(ce=le.length);const be=ce-this.blockSize;let Ie=0;const yt=this.buf_;let kt=this.inbuf_;for(;Ie<ce;){if(0===kt)for(;Ie<=be;)this.compress_(le,Ie),Ie+=this.blockSize;if("string"==typeof le){for(;Ie<ce;)if(yt[kt]=le.charCodeAt(Ie),++kt,++Ie,kt===this.blockSize){this.compress_(yt),kt=0;break}}else for(;Ie<ce;)if(yt[kt]=le[Ie],++kt,++Ie,kt===this.blockSize){this.compress_(yt),kt=0;break}}this.inbuf_=kt,this.total_+=ce}digest(){const le=[];let ce=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ie=this.blockSize-1;Ie>=56;Ie--)this.buf_[Ie]=255&ce,ce/=256;this.compress_(this.buf_);let be=0;for(let Ie=0;Ie<5;Ie++)for(let yt=24;yt>=0;yt-=8)le[be]=this.chain_[Ie]>>yt&255,++be;return le}}function mr(De,le){const ce=new Xt(De,le);return ce.subscribe.bind(ce)}class Xt{constructor(le,ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ce,this.task.then(()=>{le(this)}).catch(be=>{this.error(be)})}next(le){this.forEachObserver(ce=>{ce.next(le)})}error(le){this.forEachObserver(ce=>{ce.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,ce,be){let Ie;if(void 0===le&&void 0===ce&&void 0===be)throw new Error("Missing Observer.");Ie=function Yn(De,le){if("object"!=typeof De||null===De)return!1;for(const ce of le)if(ce in De&&"function"==typeof De[ce])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:ce,complete:be},void 0===Ie.next&&(Ie.next=Zn),void 0===Ie.error&&(Ie.error=Zn),void 0===Ie.complete&&(Ie.complete=Zn);const yt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ie.error(this.finalError):Ie.complete()}catch{}}),this.observers.push(Ie),yt}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let ce=0;ce<this.observers.length;ce++)this.sendOne(ce,le)}sendOne(le,ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{ce(this.observers[le])}catch(be){typeof console<"u"&&console.error&&console.error(be)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zn(){}function oi(De,le){return`${De} failed: ${le} argument `}const _e=function(De){const le=[];let ce=0;for(let be=0;be<De.length;be++){let Ie=De.charCodeAt(be);if(Ie>=55296&&Ie<=56319){const yt=Ie-55296;be++,p(be<De.length,"Surrogate pair missing trail surrogate."),Ie=65536+(yt<<10)+(De.charCodeAt(be)-56320)}Ie<128?le[ce++]=Ie:Ie<2048?(le[ce++]=Ie>>6|192,le[ce++]=63&Ie|128):Ie<65536?(le[ce++]=Ie>>12|224,le[ce++]=Ie>>6&63|128,le[ce++]=63&Ie|128):(le[ce++]=Ie>>18|240,le[ce++]=Ie>>12&63|128,le[ce++]=Ie>>6&63|128,le[ce++]=63&Ie|128)}return le},ft=function(De){let le=0;for(let ce=0;ce<De.length;ce++){const be=De.charCodeAt(ce);be<128?le++:be<2048?le+=2:be>=55296&&be<=56319?(le+=4,ce++):le+=3}return le};function tr(De,le=1e3,ce=2){const be=le*Math.pow(ce,De),Ie=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+Ie)}function xn(De){return De&&De._delegate?De._delegate:De}},880:(an,ot,j)=>{j.r(ot),j.d(ot,{JuegosModule:()=>lt});var C=j(6895),p=j(7001),Z=j(5861),R=j(4650),ve=j(4359);function Le(Ge,ct){if(1&Ge){const ee=R.EpF();R.TgZ(0,"button",11),R.NdJ("click",function(){const Ne=R.CHM(ee).$implicit,Ue=R.oxw();return R.KtG(Ue.attemptWithLetter(Ne.letter))}),R._uU(1),R.qZA()}if(2&Ge){const ee=ct.$implicit;R.xp6(1),R.Oqu(ee.letter)}}let je=(()=>{class Ge{constructor(ee){this.listado=ee,this.ALPHABET="ABCDEFGHIJKLMN\xd1OPQRSTUVWXYZ",this.MAX_ATTEMPTS=6,this.MASK_CHAR="_",this.mensaje="",this.displayedWord="",this.letra="",this.palabras=["casa","bebida","gato","perro","elefante","mesa","silla","computadora","typescript","javascript"],this.letters=[],this.hiddenWord=[],this.remainingAttempts=0,this.resultado="",this.movimientos=0,this.start="visible"}ngOnInit(){}resetGame(){this.resetAttempts(),this.setupKeys(),this.chooseWord(),this.imagePath(),this.displayWord()}checkGameStatus(){if(this.playerWins()){this.mensaje="Ganaste!. La palabra era "+this.getUnhiddenWord(),this.resultado="visible";let ee={tiempo:"N/A",resultado:"Gano",clicks:this.movimientos.toString(),juego:"Ahorcado",errores:(this.MAX_ATTEMPTS-this.remainingAttempts).toString()};this.listado.addResultado(ee)}if(this.playerLoses()){this.mensaje="Perdiste. La palabra era "+this.getUnhiddenWord(),this.resultado="visible";let ee={tiempo:"N/A",resultado:"Perdio",clicks:this.movimientos.toString(),correctas:"N/A",juego:"Ahorcado",errores:(this.MAX_ATTEMPTS-this.remainingAttempts).toString()};this.listado.addResultado(ee)}}getUnhiddenWord(){let ee="";for(const ie of this.hiddenWord)ee+=ie.letter;return ee}playerWins(){for(const ee of this.hiddenWord)if(ee.hidden)return!1;return!0}playerLoses(){return this.remainingAttempts<=0}imagePath(){this.imagen=`/assets/imagenes/ahorcado/Ahorcado-${this.MAX_ATTEMPTS-this.remainingAttempts}.png`}resetAttempts(){this.displayedWord="",this.movimientos=0,this.remainingAttempts=this.MAX_ATTEMPTS}chooseWord(){var ee=this;return(0,Z.Z)(function*(){let ie=ee.palabras[Math.floor(Math.random()*ee.palabras.length)];console.log("Palabra: "+ie),ee.prepareWord(ie)})()}prepareWord(ee){ee=ee.toUpperCase(),this.hiddenWord=[];for(const ie of ee)this.hiddenWord.push({letter:ie,hidden:!0})}displayWord(){let ee="";for(const ie of this.hiddenWord)ee+=ie.hidden?this.MASK_CHAR:ie.letter,ee+=" ";this.displayedWord=ee}setupKeys(){this.letters=[];for(let ee=0;ee<this.ALPHABET.length;ee++)this.letters.push({letter:this.ALPHABET[ee],disabled:!1})}letterExistsInWord(ee){for(const ie of this.hiddenWord)if(ie.letter===ee)return!0;return!1}discoverLetter(ee){for(const ie in this.hiddenWord)this.hiddenWord[ie].letter===ee&&(this.hiddenWord[ie].hidden=!1);this.displayWord()}attemptWithLetter(ee){this.movimientos+=1,this.letters=this.letters.filter(function ie(Ze){return Ze.letter!=ee}),this.letterExistsInWord(ee)?this.discoverLetter(ee):(this.remainingAttempts-=1,this.imagePath()),this.checkGameStatus()}clickBoton(){this.start="",this.resultado="",this.letra="",this.resetGame()}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.Y36(ve.L))},Ge.\u0275cmp=R.Xpm({type:Ge,selectors:[["app-ahorcado"]],decls:23,vars:11,consts:[[1,"container-fluid"],["id","app",1,"row"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"col-12","text-center"],[1,"text-success"],[1,"displayed-word"],[1,"h4","text-danger"],["alt","",1,"img-fluid",3,"src"],["class","btn btn-success m-1 btn-lg",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-success","m-1","btn-lg",3,"click"]],template:function(ee,ie){1&ee&&(R.TgZ(0,"main",0)(1,"div",1)(2,"div",2),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(3," Click para empezar "),R.qZA(),R.TgZ(4,"div",3),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(5),R.TgZ(6,"span",4),R._UZ(7,"br")(8,"br")(9,"br")(10,"br"),R._uU(11,"Click para jugar de nuevo"),R.qZA()(),R.TgZ(12,"div",5)(13,"h1",6),R._uU(14,"Ahorcado"),R.qZA(),R.TgZ(15,"h3",7),R._uU(16),R.qZA(),R.TgZ(17,"p",8),R._uU(18),R.qZA(),R._UZ(19,"br")(20,"img",9),R.qZA(),R.TgZ(21,"div",5),R.YNc(22,Le,2,1,"button",10),R.qZA()()()),2&ee&&(R.xp6(2),R.Gre("overlay-text ",ie.start,""),R.xp6(2),R.Gre("overlay-text ",ie.resultado,""),R.xp6(1),R.hij(" ",ie.mensaje," "),R.xp6(11),R.hij("Palabra: ",ie.displayedWord,""),R.xp6(2),R.hij("Intentos restantes: ",ie.remainingAttempts,""),R.xp6(2),R.s9C("src",ie.imagen,R.LSH),R.xp6(2),R.Q6J("ngForOf",ie.letters))},dependencies:[C.sg],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat&display=swap";body[_ngcontent-%COMP%]{padding-bottom:70px;padding-top:70px;font-family:Montserrat,sans-serif}.displayed-word[_ngcontent-%COMP%]{letter-spacing:4px}.img-fluid[_ngcontent-%COMP%]{max-width:20%;margin-bottom:20px}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#ff6d00;font-family:Creepy,serif;font-size:4em;transition:background-color .5s,font-size .5s}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}']}),Ge})(),we=(()=>{class Ge{constructor(ee){this.router=ee}ngOnInit(){}irMijuego(){this.router.navigate(["/juegos/mijuego"])}irMayorMenor(){this.router.navigate(["/juegos/mayomenor"])}irAhorcado(){this.router.navigate(["/juegos/ahorcado"])}irPreguntados(){this.router.navigate(["/juegos/preguntados"])}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.Y36(p.F0))},Ge.\u0275cmp=R.Xpm({type:Ge,selectors:[["app-juegos"]],decls:33,vars:0,consts:[[1,"containerT"],[1,"container"],[1,"menu-container"],["routerLink","/juegos/mijuego",1,"fill"],[1,"content",3,"click"],[1,"fill",3,"click"],[1,"content"]],template:function(ee,ie){1&ee&&(R.TgZ(0,"div",0)(1,"div",1)(2,"h1"),R._uU(3,"Juegos"),R.qZA(),R.TgZ(4,"div",2)(5,"div",3),R._UZ(6,"span"),R.TgZ(7,"div",4),R.NdJ("click",function(){return ie.irMijuego()}),R.TgZ(8,"h2"),R._uU(9,"Mi juego "),R.qZA(),R.TgZ(10,"p"),R._uU(11,"Rompecabezas, ordenar los numeros"),R.qZA()()(),R.TgZ(12,"div",5),R.NdJ("click",function(){return ie.irAhorcado()}),R._UZ(13,"span"),R.TgZ(14,"div",6)(15,"h2"),R._uU(16,"Ahorcado"),R.qZA(),R.TgZ(17,"p"),R._uU(18,"Completa la palabra"),R.qZA()()(),R.TgZ(19,"div",5),R.NdJ("click",function(){return ie.irMayorMenor()}),R._UZ(20,"span"),R.TgZ(21,"div",6)(22,"h2"),R._uU(23,"Mayor o menor"),R.qZA(),R.TgZ(24,"p"),R._uU(25,"Adivina si el numero es mayor o menor"),R.qZA()()(),R.TgZ(26,"div",5),R.NdJ("click",function(){return ie.irPreguntados()}),R._UZ(27,"span"),R.TgZ(28,"div",6)(29,"h2"),R._uU(30,"Preguntados"),R.qZA(),R.TgZ(31,"p"),R._uU(32,"Responde la trivia"),R.qZA()()()()()())},dependencies:[p.rH],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:consolas}.containerT[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh;font-family:Pastel Colors,sans-serif}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin-top:50px;color:#ffe54c;font-size:8.1em;font-family:Pastel Colors,sans-serif;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black}.menu-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;padding:40px 0;flex-wrap:wrap}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 20px;outline:0;border:1px solid black;cursor:pointer;position:relative;width:60%;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:10;padding:20px 40px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.1em;color:#fff;margin-bottom:10px}.container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;color:#fff;margin-bottom:10px;line-height:1.4em}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em;color:#111;background:#fff;padding:10px;text-decoration:none;font-weight:700}']}),Ge})();function Ye(Ge,ct){if(1&Ge){const ee=R.EpF();R.TgZ(0,"div",7)(1,"div",8),R._uU(2),R._UZ(3,"br")(4,"br"),R._uU(5),R._UZ(6,"br")(7,"br"),R.TgZ(8,"div",9),R._uU(9),R._UZ(10,"br")(11,"br"),R.qZA()(),R.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"h2",13),R._uU(16),R.qZA()()(),R.TgZ(17,"div",14)(18,"button",15),R.NdJ("click",function(){R.CHM(ee);const Ze=R.oxw();return R.KtG(Ze.verificar("mayor"))}),R.TgZ(19,"span",16),R._uU(20,"Mayor"),R.qZA()(),R.TgZ(21,"button",15),R.NdJ("click",function(){R.CHM(ee);const Ze=R.oxw();return R.KtG(Ze.verificar("menor"))}),R.TgZ(22,"span",16),R._uU(23,"Menor"),R.qZA()()()()()}if(2&Ge){const ee=R.oxw();R.xp6(2),R.hij("Puntaje: ",ee.correctas," "),R.xp6(3),R.hij(" Preguntas erroneas: ",ee.incorrectas," "),R.xp6(4),R.hij("",ee.mensaje," "),R.xp6(7),R.Oqu(ee.numeroActual)}}let re=(()=>{class Ge{constructor(ee){this.listado=ee,this.numero=0,this.numeroNuevo="?",this.numeroActual=0,this.incorrectas=0,this.correctas=0,this.repondidas=0,this.jugando=!1,this.resultadoText="",this.resultado={},this.victoria="",this.start="visible",this.perdiste="",this.mensaje=""}ngOnInit(){}verificar(ee){for("?"===this.numeroNuevo&&(this.numeroNuevo=this.generarnumero()),this.repondidas++,5===this.repondidas&&(this.jugando=!1,this.terminarjugo()),"mayor"===ee&&(this.numeroActual>this.numeroNuevo?(this.correctas++,this.mensaje="Correcto "+this.numeroActual+" es mayor que "+this.numeroNuevo):(this.incorrectas++,this.mensaje="Incorrecto "+this.numeroActual+" es menor que "+this.numeroNuevo)),"menor"===ee&&(this.numeroActual<this.numeroNuevo?(this.correctas++,this.mensaje="Correcto "+this.numeroActual+" es menor que "+this.numeroNuevo):(this.incorrectas++,this.mensaje="Correcto "+this.numeroActual+" es mayor que "+this.numeroNuevo)),this.numeroActual=this.numeroNuevo,this.numero=this.generarnumero();this.numero===this.numeroActual;)this.numero=this.generarnumero();this.numeroNuevo=this.numero}generarnumero(){return Math.floor(12*Math.random()+1)}terminarjugo(){this.incorrectas>2&&this.jugando?(this.victoria="visible",this.resultadoText="Perdiste"):(this.resultadoText="Ganaste",this.victoria="visible"),this.resultado={tiempo:"N/A",resultado:this.resultadoText,errores:this.incorrectas,clicks:"N/A",correctas:this.correctas,juego:"Mayor o Menor"},this.listado.addResultado(this.resultado),this.numero=0,this.numeroNuevo=0,this.numeroActual=0}clickBoton(){this.jugando=!0,this.numero=0,this.start="",this.numeroNuevo="?",this.numeroActual=0,this.incorrectas=0,this.correctas=0,this.repondidas=0,this.perdiste="",this.resultadoText="",this.resultadoText="",this.victoria="",this.numeroActual=this.generarnumero()}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.Y36(ve.L))},Ge.\u0275cmp=R.Xpm({type:Ge,selectors:[["app-mayoromenor"]],decls:19,vars:10,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],["class","bodyJuego",4,"ngIf"],[1,"bodyJuego"],["id","puntaje",1,"puntaje"],[1,"puntaje"],[1,"cards"],[1,"card"],[1,"face","face2"],[1,"faceh2"],[1,"botones"],[1,"fill",3,"click"],[1,"pan"]],template:function(ee,ie){1&ee&&(R.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(4," Click para empezar "),R.qZA(),R.TgZ(5,"div",4),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(6),R._UZ(7,"br")(8,"br")(9,"br")(10,"br"),R._uU(11),R.TgZ(12,"span",5),R._UZ(13,"br")(14,"br")(15,"br")(16,"br"),R._uU(17,"Click para jugar de nuevo"),R.qZA()(),R.YNc(18,Ye,24,4,"div",6),R.qZA()()()),2&ee&&(R.xp6(3),R.Gre("overlay-text ",ie.start,""),R.xp6(2),R.Gre("overlay-text ",ie.victoria,""),R.xp6(1),R.AsE(" ",ie.resultadoText," tenes ",ie.correctas," respuestas correctas "),R.xp6(5),R.hij(" y ",ie.incorrectas," incorrectas "),R.xp6(7),R.Q6J("ngIf",ie.jugando))},dependencies:[C.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Righteous&display=swap";.bodyJuego[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center;font-family:calibri;font-size:120%;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;font-family:Creepy,serif}.puntaje[_ngcontent-%COMP%]{padding:10px;color:#075072;font-size:50px}.overlay-text[_ngcontent-%COMP%], .h2l[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#c1ff83;font-family:Creepy,serif;transition:background-color .5s,font-size .5s}.overlay-text-small[_ngcontent-%COMP%]{font-size:.3em}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#4cffff;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s;font-size:10em}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.card[_ngcontent-%COMP%]{position:relative;width:300px;height:400px;margin:0 auto;background:#000;box-shadow:0 15px 60px #00000080;background-image:linear-gradient(40deg,#faf894 0%,#fa99fc 45%,#9dfffd 100%);border-radius:15px}.cards[_ngcontent-%COMP%]{max-width:100vw;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-gap:35px;margin:0 auto}.face[_ngcontent-%COMP%]{bottom:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.faceh2[_ngcontent-%COMP%]{margin:0;padding:0;font-size:10em;color:#fff;transition:.5s;text-shadow:0 2px 5px rgba(0,0,0,.2);z-index:10}.o[_ngcontent-%COMP%]{margin:50px}.botones[_ngcontent-%COMP%]{display:grid}.pan[_ngcontent-%COMP%]{font-size:4em;color:#fff}']}),Ge})();class he{constructor(ct,ee){this.x=ct,this.y=ee}getTopBox(){return 0===this.y?null:new he(this.x,this.y-1)}getRightBox(){return 2===this.x?null:new he(this.x+1,this.y)}getBottomBox(){return 2===this.y?null:new he(this.x,this.y+1)}getLeftBox(){return 0===this.x?null:new he(this.x-1,this.y)}getNextdoorBoxes(){return[this.getTopBox(),this.getRightBox(),this.getBottomBox(),this.getLeftBox()].filter(ct=>null!==ct)}getRandomNextdoorBox(){const ct=this.getNextdoorBoxes();return ct[Math.floor(Math.random()*ct.length)]}}class Ce{static swapBoxes(ct,ee,ie){let Ze=ct[ee.y][ee.x];return ct[ee.y][ee.x]=ct[ie.y][ie.x],ct[ie.y][ie.x]=Ze,ct}static isSolved(ct){return 1===ct[0][0]&&2===ct[0][1]&&3===ct[0][2]&&4===ct[1][0]&&5===ct[1][1]&&6===ct[1][2]&&7===ct[2][0]&&8===ct[2][1]&&0===ct[2][2]}static getRandomGrid(){let ct=[[1,2,3],[4,5,6],[7,8,0]],ee=new he(2,2);for(let ie=0;ie<1e3;ie++){const Ze=ee.getRandomNextdoorBox();Ce.swapBoxes(ct,ee,Ze),ee=Ze}return Ce.isSolved(ct)?this.getRandomGrid():ct}}class dt{constructor(ct,ee,ie,Ze){this.move=0,this.time=0,this.status="",this.grid=ct,this.move=ee,this.time=ie,this.status=Ze}static ready(){return new dt([[0,0,0],[0,0,0],[0,0,0]],0,0,"listo")}static start(){return new dt(Ce.getRandomGrid(),0,0,"jugando")}}function ht(Ge,ct){if(1&Ge){const ee=R.EpF();R.TgZ(0,"button",3),R.NdJ("click",function(){const Ne=R.CHM(ee).index,Ue=R.oxw();return R.KtG(Ue.handleClickBox(Ne))}),R._uU(1),R.qZA()}if(2&Ge){const ee=ct.index,ie=R.oxw();R.xp6(1),R.Oqu(ie.contenido[ee])}}let at=(()=>{class Ge{constructor(ee){this.listado=ee,this.boton="",this.contenido=new Array(9),this.mensaje="",this.victoria="",this.nuevoJuego(dt.ready()),this.grupoCajas=[],this.contenido=[,1,2,3,4,5,6,7,8],this.boton="Jugar",this.start="visible"}ngOnInit(){}nuevoJuego(ee){this.estado=ee,this.tickId=null,this.tick=this.tick.bind(this)}tick(){this.estado.time=this.estado.time+1}setState(ee){this.estado=ee,this.render()}handleClickBox(ee){let ie=this.grupoCajas[ee],Ne=ie.getNextdoorBoxes().find(Ue=>0===this.estado.grid[Ue.y][Ue.x]);if(Ne){let Ue=Ce.swapBoxes(this.estado.grid,ie,Ne);Ce.isSolved(Ue)?(clearInterval(this.tickId),this.setState({grid:Ue,move:this.estado.move+1,time:this.estado.time,status:"gano"})):this.setState({grid:Ue,move:this.estado.move+1,time:this.estado.time,status:this.estado.status})}}render(){this.contador=0;for(let ee=0;ee<3;ee++)for(let ie=0;ie<3;ie++){if("jugando"===this.estado.status){let Ze=new he(ie,ee);this.grupoCajas.push(Ze),this.boton="Reiniciar"}this.contenido[this.contador]=0===this.estado.grid[ee][ie]?"":this.estado.grid[ee][ie].toString(),this.contador++}"listo"===this.estado.status&&(this.boton="Jugar",this.start="visible"),"jugando"===this.estado.status&&(this.boton="Reiniciar"),"gano"===this.estado.status&&(this.boton="Jugar",this.victoria="visible",this.resultado={tiempo:this.estado.time.toString()+" seg",resultado:"Gano",errores:"N/A",clicks:this.estado.move.toString(),correctas:"N/A",juego:"Rompecabezas"},this.listado.addResultado(this.resultado))}clickBoton(){clearInterval(this.tickId),this.tickId=setInterval(this.tick,1e3),this.setState(dt.start()),this.start="",this.victoria="",this.render()}ordenar(){this.setState({grid:[[1,2,3],[4,5,0],[7,8,6]],move:this.estado.move+1,time:this.estado.time,status:this.estado.status})}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.Y36(ve.L))},Ge.\u0275cmp=R.Xpm({type:Ge,selectors:[["app-mijuego"]],decls:25,vars:10,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"grid"],[3,"click",4,"ngFor","ngForOf"],[1,"footer"],["id","move"],[1,"ordenar",3,"click"],["id","time"]],template:function(ee,ie){1&ee&&(R.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(4," Click para empezar "),R.qZA(),R.TgZ(5,"div",4),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(6," Ganaste!!! "),R.TgZ(7,"span",5),R._UZ(8,"br")(9,"br")(10,"br")(11,"br"),R._uU(12,"Click para jugar de nuevo"),R.qZA()(),R.TgZ(13,"div",6),R.YNc(14,ht,2,1,"button",7),R.qZA(),R.TgZ(15,"div",8)(16,"button",3),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(17),R.qZA(),R.TgZ(18,"span",9),R._uU(19),R.qZA()(),R.TgZ(20,"div",8)(21,"button",10),R.NdJ("click",function(){return ie.ordenar()}),R._uU(22,"Ordenar para ganar"),R.qZA(),R.TgZ(23,"span",11),R._uU(24),R.qZA()()()()()),2&ee&&(R.xp6(3),R.Gre("overlay-text ",ie.start,""),R.xp6(2),R.Gre("overlay-text ",ie.victoria,""),R.xp6(9),R.Q6J("ngForOf",ie.contenido),R.xp6(3),R.Oqu(ie.boton),R.xp6(2),R.hij("Movimiento: ",ie.estado.move,""),R.xp6(5),R.hij("Tiempo: ",ie.estado.time,""))},dependencies:[C.sg],styles:[".juegoContainer[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}.juego[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.game[_ngcontent-%COMP%]{box-shadow:0 1px 4px #00000080;padding:20px;background-image:linear-gradient(#d6e7b3,#a1e7e7);border-radius:5px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:106px 106px 106px;grid-template-rows:106px 106px 106px;border:1px solid #550000}.grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#ccdbe8 3px 3px 6px inset,#ffffff80 -3px -3px 6px 1px inset;background-color:#f5f4c0;color:#033;font-size:24px;font-weight:700;border:1px solid #550000;outline:none;cursor:pointer}.footer[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:space-between}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px #00000080;padding:5px;width:100px;background-color:#d4ee9f;color:#033;outline:none;cursor:pointer}.ordenar[_ngcontent-%COMP%]{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px #00000080;padding:5px;width:150px;background-color:#d4ee9f;color:#033;outline:none;cursor:pointer;margin-top:15px}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ordenar[_ngcontent-%COMP%]:hover{color:#d4ee9f;background-color:#033}.footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:20px;color:#14a890;font-weight:700;margin:auto 0}.message[_ngcontent-%COMP%]{color:#aa3939;height:80px}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#fdbf8c;font-family:Creepy,serif;font-size:4em;transition:background-color .5s,font-size .5s}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}"]}),Ge})();var Ft=j(529);let it=(()=>{class Ge{constructor(ee){this.http=ee}getImg(){return this.http.get("https://pixabay.com/api/?key=21351108-e70e13da005029798b867e59c&q=movies&image_type=photo&category=entretaiment&safesearch=true")}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.LFG(Ft.eN))},Ge.\u0275prov=R.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})();const et=function(Ge){return{"background-color":Ge}},$t=[{path:"mayomenor",component:re},{path:"ahorcado",component:je},{path:"",component:we},{path:"mijuego",component:at},{path:"preguntados",component:(()=>{class Ge{constructor(ee,ie,Ze){this.httpClient=ee,this.listado=ie,this.svcImg=Ze,this.npreguntas=[],this.preguntas_hechas=0,this.preguntas_correctas=0,this.suspender_botones=!1,this.yellowd="yellow",this.victoria="",this.start="visible",this.perdiste="",this.opcion="Siguiente",this.resultadoText="",this.resultado={},this.img=[],this.httpClient.get("assets/json/preguntas.json").subscribe(Ne=>{this.interprete_bp=Ne}),this.svcImg.getImg().subscribe(Ne=>{this.im=Ne,this.getImg(this.im.hits)}),this.imagen="",this.respuesta1="",this.respuesta2="",this.respuesta3="",this.respuesta4="",this.estilo1="",this.estilo2="",this.cantPreguntas=1,this.estilo3="",this.estilo4="",this.pregunta="",this.erradas=0,this.categoria="",this.preguntaActual="",this.numero="",this.estiloImagen="",this.estilos=[this.estilo1,this.estilo2,this.estilo3,this.estilo4],this.posibles_respuestas=[],this.btn_correspondiente=[this.respuesta4,this.respuesta1,this.respuesta2,this.respuesta3],setTimeout(()=>{this.escogerPreguntaAleatoria()},300)}ngOnInit(){}desordenarRespuestas(ee){this.posibles_respuestas=[ee.respuesta,ee.incorrecta1,ee.incorrecta2,ee.incorrecta3],this.posibles_respuestas.sort(()=>Math.random()-.5),this.respuesta1=this.posibles_respuestas[0],this.respuesta2=this.posibles_respuestas[1],this.respuesta3=this.posibles_respuestas[2],this.respuesta4=this.posibles_respuestas[3]}reiniciar(){this.cantPreguntas++,this.suspender_botones=!1;for(let ee=0;ee<this.estilos.length;ee++)this.estilos[ee]="white";this.cantPreguntas>5?this.ckeckJuego():this.escogerPreguntaAleatoria(),this.opcion=5===this.cantPreguntas?"Finalizar":"Siguiente"}escogerPreguntaAleatoria(){let ee=Math.floor(Math.random()*this.interprete_bp.length);for(;this.npreguntas.includes(ee);)ee++,ee>=this.interprete_bp.length&&(ee=0),this.npreguntas.length===this.interprete_bp.length&&(this.npreguntas=[]);this.npreguntas.push(ee),this.preguntas_hechas++,this.escogerPregunta(ee)}oprimir_btn(ee){if(!this.suspender_botones){this.suspender_botones=!0,this.posibles_respuestas[ee]==this.pregunta.respuesta?(this.preguntas_correctas++,this.estilos[ee]="lightgreen"):(this.estilos[ee]="pink",this.erradas++);for(let ie=0;ie<4;ie++)if(this.posibles_respuestas[ie]==this.pregunta.respuesta){this.estilos[ie]="lightgreen";break}}}escogerPregunta(ee){this.pregunta=this.interprete_bp[ee],this.categoria=this.pregunta.categoria,this.preguntaActual=this.pregunta.pregunta,console.log("url "+this.imagen),this.numero=ee,this.puntaje=this.preguntas_hechas>1?this.preguntas_correctas+"/"+(this.preguntas_hechas-1):"",this.desordenarRespuestas(this.pregunta),this.pregunta.imagen?(this.imagen=this.pregunta.imagen,this.estiloImagen={height:"200px",width:"100%"}):(this.imagen=this.img[ee].largeImageURL,this.estiloImagen={height:"200px",width:"100%"})}ckeckJuego(){this.erradas>2?(this.perdiste="visible",this.resultadoText="Perdiste"):(this.resultadoText="Ganaste",this.victoria="visible"),this.resultado={tiempo:"N/A",resultado:this.resultadoText,errores:this.erradas,clicks:"N/A",correctas:this.preguntas_correctas,juego:"Preguntados"},this.listado.addResultado(this.resultado)}clickBoton(){this.cantPreguntas=0,this.reiniciar(),this.puntaje="",this.numero="",this.erradas=0,this.perdiste="",this.victoria="",this.start=""}getImg(ee){var ie=this;return(0,Z.Z)(function*(){ie.img=ee})()}}return Ge.\u0275fac=function(ee){return new(ee||Ge)(R.Y36(Ft.eN),R.Y36(ve.L),R.Y36(it))},Ge.\u0275cmp=R.Xpm({type:Ge,selectors:[["app-preguntados"]],decls:43,vars:36,consts:[[1,"juegoContainer"],[1,"juego"],[1,"game"],[3,"click"],["id","victory-text",3,"click"],[1,"overlay-text-small"],[1,"bodyJuego"],["id","puntaje",1,"puntaje"],[1,"encabezado"],["id","categoria",1,"categoria"],["id","numero",1,"numero"],["id","pregunta",1,"pregunta"],["id","imagen",1,"imagen",3,"src","ngStyle"],["id","btn1",1,"btn",3,"ngStyle","click"],["id","btn2",1,"btn",3,"ngStyle","click"],["id","btn3",1,"btn",3,"ngStyle","click"],["id","btn4",1,"btn",3,"ngStyle","click"],[1,"fill",3,"click"]],template:function(ee,ie){1&ee&&(R.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(4," Click para empezar "),R.qZA(),R.TgZ(5,"div",4),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(6),R.TgZ(7,"span",5),R._UZ(8,"br")(9,"br")(10,"br")(11,"br"),R._uU(12,"Click para jugar de nuevo"),R.qZA()(),R.TgZ(13,"div",4),R.NdJ("click",function(){return ie.clickBoton()}),R._uU(14),R.TgZ(15,"span",5),R._UZ(16,"br")(17,"br")(18,"br")(19,"br"),R._uU(20,"Click para jugar de nuevo"),R.qZA()(),R.TgZ(21,"div",6)(22,"div",7),R._uU(23),R._UZ(24,"br"),R._uU(25),R.qZA(),R.TgZ(26,"div",8)(27,"div",9),R._uU(28),R.qZA(),R._UZ(29,"div",10),R.TgZ(30,"div",11),R._uU(31),R.qZA(),R._UZ(32,"img",12),R.qZA(),R.TgZ(33,"div",13),R.NdJ("click",function(){return ie.oprimir_btn(0)}),R._uU(34),R.qZA(),R.TgZ(35,"div",14),R.NdJ("click",function(){return ie.oprimir_btn(1)}),R._uU(36),R.qZA(),R.TgZ(37,"div",15),R.NdJ("click",function(){return ie.oprimir_btn(2)}),R._uU(38),R.qZA(),R.TgZ(39,"div",16),R.NdJ("click",function(){return ie.oprimir_btn(3)}),R._uU(40),R.qZA(),R.TgZ(41,"button",17),R.NdJ("click",function(){return ie.reiniciar()}),R._uU(42),R.qZA()()()()()),2&ee&&(R.xp6(3),R.Gre("overlay-text ",ie.start,""),R.xp6(2),R.Gre("overlay-text ",ie.victoria,""),R.xp6(1),R.AsE(" ",ie.resultadoText," tenes ",ie.preguntas_correctas," respuestas correctas "),R.xp6(7),R.Gre("overlay-text ",ie.perdiste,""),R.xp6(1),R.AsE(" ",ie.resultadoText," tenes ",ie.erradas," erroneas "),R.xp6(9),R.hij("Puntaje: ",ie.preguntas_correctas," "),R.xp6(2),R.hij(" Preguntas erroneas: ",ie.erradas," "),R.xp6(3),R.hij(" Categoria: ",ie.categoria," "),R.xp6(3),R.hij(" ",ie.preguntaActual," "),R.xp6(1),R.s9C("src",ie.imagen,R.LSH),R.Q6J("ngStyle",ie.estiloImagen),R.xp6(1),R.Q6J("ngStyle",R.VKq(28,et,ie.estilos[0])),R.xp6(1),R.hij(" ",ie.respuesta1,""),R.xp6(1),R.Q6J("ngStyle",R.VKq(30,et,ie.estilos[1])),R.xp6(1),R.hij(" ",ie.respuesta2,""),R.xp6(1),R.Q6J("ngStyle",R.VKq(32,et,ie.estilos[2])),R.xp6(1),R.hij(" ",ie.respuesta3,""),R.xp6(1),R.Q6J("ngStyle",R.VKq(34,et,ie.estilos[3])),R.xp6(1),R.hij(" ",ie.respuesta4,""),R.xp6(2),R.Oqu(ie.opcion))},dependencies:[C.PC],styles:['*[_ngcontent-%COMP%]{transition:all .3s}.bodyJuego[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center;font-family:calibri;font-size:120%;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh}.encabezado[_ngcontent-%COMP%]{position:relative;background:rgb(255,255,255);min-width:300px;width:70%;max-width:600px;padding:10px}.categoria[_ngcontent-%COMP%]{opacity:.3;text-align:left}.pregunta[_ngcontent-%COMP%]{padding:10px}.imagen[_ngcontent-%COMP%]{object-fit:cover;height:0px;width:0px}.btn[_ngcontent-%COMP%]{background:white;width:60%;max-width:550px;padding:10px;margin:5px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.numero[_ngcontent-%COMP%]{position:absolute;opacity:.3;top:10px;right:10px}.puntaje[_ngcontent-%COMP%]{padding:10px;color:#075072;font-size:large}.overlay-text[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;z-index:100;display:none;position:fixed;justify-content:center;align-items:center;flex-direction:column;color:#c1ff83;font-family:Creepy,serif;transition:background-color .5s,font-size .5s}.overlay-text-small[_ngcontent-%COMP%]{font-size:.3em}.overlay-text.visible[_ngcontent-%COMP%]{display:flex;animation:overlay-grow .5s forwards}@keyframes overlay-grow{0%{background-color:#0000;font-size:0}to{background-color:#000c;font-size:6em}}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#4cffff;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}']}),Ge})()}];let Me=(()=>{class Ge{}return Ge.\u0275fac=function(ee){return new(ee||Ge)},Ge.\u0275mod=R.oAB({type:Ge}),Ge.\u0275inj=R.cJS({imports:[p.Bz.forChild($t),p.Bz]}),Ge})(),lt=(()=>{class Ge{}return Ge.\u0275fac=function(ee){return new(ee||Ge)},Ge.\u0275mod=R.oAB({type:Ge}),Ge.\u0275inj=R.cJS({imports:[C.ez,Me]}),Ge})()},6893:(an,ot,j)=>{j.d(ot,{e:()=>Le});var C=j(5861),p=j(3266),Z=j(7667),R=j(4650),ve=j(5626);let Le=(()=>{class je{constructor(Ye,re,he){this.afAuth=Ye,this.firestore=re,this.afs=he}login(Ye,re){var he=this;return(0,C.Z)(function*(){try{return yield(0,Z.e5)(he.afAuth,Ye,re)}catch(Ce){return console.log("servicio"+Ce),null}})()}registro(Ye,re){var he=this;return(0,C.Z)(function*(){try{const Ce=yield(0,Z.Xb)(he.afAuth,Ye,re);return he.updateUserData(Ce),Ce}catch(Ce){return console.log(Ce),Ce}})()}logout(){var Ye=this;return(0,C.Z)(function*(){try{yield Ye.afAuth.signOut()}catch(re){console.log(re)}})()}getUsuario(){const Ye=this.afAuth.currentUser;return this.afs.collection("user").valueChanges({idField:Ye?.uid})}getUsuarioFire(){return this.afAuth.currentUser}updateUserData(Ye){var re=this;return(0,C.Z)(function*(){const he=(0,p.JU)(re.firestore,`users/${Ye.uid}`),Ce={uid:Ye.uid,email:Ye.email,displayName:Ye.displayName,myCustomData:"lola"};return yield(0,p.pl)(he,{data:Ce}),!0})()}updateLogUser(Ye){var re=this;return(0,C.Z)(function*(){try{return yield(0,p.pl)((0,p.JU)(re.firestore,"userlog"),{email:Ye,fechaIngreso:(0,p.Bt)()}),!0}catch(Ce){return Ce}})()}}return je.\u0275fac=function(Ye){return new(Ye||je)(R.LFG(Z.gx),R.LFG(p.gg),R.LFG(ve.ST))},je.\u0275prov=R.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},4359:(an,ot,j)=>{j.d(ot,{L:()=>Ye});var C=j(5861),p=j(127),R=(j(6551),j(3900)),ve=j(4650),Le=j(5626),je=j(6893),we=j(7001);let Ye=(()=>{class re{constructor(Ce,dt,ht){this.afs=Ce,this.authSvc=dt,this.router=ht,this.getUserMail()}addResultado(Ce){return this.getUserMail(),this.afs.collection("listados").add({usuario:this.mail,tiempo:Ce.tiempo,resultado:Ce.resultado,clicks:Ce.clicks,juego:Ce.juego,correctas:Ce.correctas,errores:Ce.errores,createdAt:p.Z.firestore.FieldValue.serverTimestamp()})}getListas(){this.getUserMail();let Ce=[];return this.getUserMail(),this.getListado().pipe((0,R.w)(dt=>(Ce=dt,this.afs.collection("listados",ht=>ht.orderBy("createdAt","desc")).valueChanges({idField:"id"}))))}getListado(){return this.afs.collection("listados",Ce=>Ce.orderBy("createdAt","desc")).valueChanges({idField:"id"})}getUserMail(){var Ce=this;return(0,C.Z)(function*(){Ce.mail=Ce.authSvc.getUsuarioFire()?Ce.authSvc.getUsuarioFire()?.email:"usuario anonimo"})()}}return re.\u0275fac=function(Ce){return new(Ce||re)(ve.LFG(Le.ST),ve.LFG(je.e),ve.LFG(we.F0))},re.\u0275prov=ve.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},9190:(an,ot,j)=>{var C=j(1481),p=j(4650),Z=j(7001),R=j(6893);let ve=(()=>{class _{constructor(E){this.authSvc=E}ngOnInit(){}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(R.e))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-bienvenido"]],decls:22,vars:0,consts:[[1,"containerD"],[1,"hero-text"],["src","./assets/imagenes/sala.png","width","700"],[1,"menu-container"],["routerLink","/juegos",1,"fill"],[1,"content"],["routerLink","/encuesta",1,"fill"],["routerLink","/listados",1,"fill"],[1,"chat"]],template:function(E,O){1&E&&(p.TgZ(0,"div",0),p._UZ(1,"br"),p.TgZ(2,"div",1)(3,"div"),p._UZ(4,"img",2),p.qZA()(),p.TgZ(5,"div",3)(6,"div",4),p._UZ(7,"span"),p.TgZ(8,"div",5)(9,"h2"),p._uU(10,"Juegos "),p.qZA()()(),p.TgZ(11,"div",6),p._UZ(12,"span"),p.TgZ(13,"div",5)(14,"h2"),p._uU(15,"Encuesta"),p.qZA()()(),p.TgZ(16,"div",7),p._UZ(17,"span"),p.TgZ(18,"div",5)(19,"h2"),p._uU(20,"Resultados"),p.qZA()()()(),p._UZ(21,"div",8),p.qZA())},dependencies:[Z.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Pastel Colors,sans-serif}.hero-text[_ngcontent-%COMP%]{text-align:center;position:relative;color:#fff;align-self:auto;justify-content:center;align-items:center}.hero-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:none;outline:0;padding:10px 25px;color:#000;background-color:#ddd;text-align:center;cursor:pointer}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;margin:20px 30px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#90ffe7;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}.menu-container[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:0;padding:20px 40px}.containerD[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;flex-wrap:wrap}h1[_ngcontent-%COMP%]{margin-top:auto;font-size:5.1em}.menu-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;padding:40px 0;flex-wrap:wrap}h2[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:4.1em;z-index:-1}.chat[_ngcontent-%COMP%]{z-index:30}']}),_})();var Le=j(5861),je=j(6895),we=j(8996),Ye=j(9751),re=j(4742),he=j(8421),Ce=j(7669),dt=j(5403),ht=j(3268),at=j(1810),it=j(4004);let et=(()=>{class _{constructor(E,O){this._renderer=E,this._elementRef=O,this.onChange=X=>{},this.onTouched=()=>{}}setProperty(E,O){this._renderer.setProperty(this._elementRef.nativeElement,E,O)}registerOnTouched(E){this.onTouched=E}registerOnChange(E){this.onChange=E}setDisabledState(E){this.setProperty("disabled",E)}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(p.Qsj),p.Y36(p.SBq))},_.\u0275dir=p.lG2({type:_}),_})(),Vt=(()=>{class _ extends et{}return _.\u0275fac=function(){let v;return function(O){return(v||(v=p.n5z(_)))(O||_)}}(),_.\u0275dir=p.lG2({type:_,features:[p.qOj]}),_})();const $t=new p.OlP("NgValueAccessor"),Me={provide:$t,useExisting:(0,p.Gpc)(()=>lt),multi:!0};let lt=(()=>{class _ extends Vt{writeValue(E){this.setProperty("checked",E)}}return _.\u0275fac=function(){let v;return function(O){return(v||(v=p.n5z(_)))(O||_)}}(),_.\u0275dir=p.lG2({type:_,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(E,O){1&E&&p.NdJ("change",function(Ve){return O.onChange(Ve.target.checked)})("blur",function(){return O.onTouched()})},features:[p._Bn([Me]),p.qOj]}),_})();const Ge={provide:$t,useExisting:(0,p.Gpc)(()=>ie),multi:!0},ee=new p.OlP("CompositionEventMode");let ie=(()=>{class _ extends et{constructor(E,O,X){super(E,O),this._compositionMode=X,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ct(){const _=(0,je.q)()?(0,je.q)().getUserAgent():"";return/android (\d+)/.test(_.toLowerCase())}())}writeValue(E){this.setProperty("value",E??"")}_handleInput(E){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(E)}_compositionStart(){this._composing=!0}_compositionEnd(E){this._composing=!1,this._compositionMode&&this.onChange(E)}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ee,8))},_.\u0275dir=p.lG2({type:_,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(E,O){1&E&&p.NdJ("input",function(Ve){return O._handleInput(Ve.target.value)})("blur",function(){return O.onTouched()})("compositionstart",function(){return O._compositionStart()})("compositionend",function(Ve){return O._compositionEnd(Ve.target.value)})},features:[p._Bn([Ge]),p.qOj]}),_})();function Ne(_){return null==_||("string"==typeof _||Array.isArray(_))&&0===_.length}function Ue(_){return null!=_&&"number"==typeof _.length}const $e=new p.OlP("NgValidators"),Ke=new p.OlP("NgAsyncValidators"),Rt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bt{static min(v){return function Yt(_){return v=>{if(Ne(v.value)||Ne(_))return null;const E=parseFloat(v.value);return!isNaN(E)&&E<_?{min:{min:_,actual:v.value}}:null}}(v)}static max(v){return function wn(_){return v=>{if(Ne(v.value)||Ne(_))return null;const E=parseFloat(v.value);return!isNaN(E)&&E>_?{max:{max:_,actual:v.value}}:null}}(v)}static required(v){return An(v)}static requiredTrue(v){return function Mt(_){return!0===_.value?null:{required:!0}}(v)}static email(v){return function tn(_){return Ne(_.value)||Rt.test(_.value)?null:{email:!0}}(v)}static minLength(v){return function Gn(_){return v=>Ne(v.value)||!Ue(v.value)?null:v.value.length<_?{minlength:{requiredLength:_,actualLength:v.value.length}}:null}(v)}static maxLength(v){return function On(_){return v=>Ue(v.value)&&v.value.length>_?{maxlength:{requiredLength:_,actualLength:v.value.length}}:null}(v)}static pattern(v){return function Kn(_){if(!_)return Vn;let v,E;return"string"==typeof _?(E="","^"!==_.charAt(0)&&(E+="^"),E+=_,"$"!==_.charAt(_.length-1)&&(E+="$"),v=new RegExp(E)):(E=_.toString(),v=_),O=>{if(Ne(O.value))return null;const X=O.value;return v.test(X)?null:{pattern:{requiredPattern:E,actualValue:X}}}}(v)}static nullValidator(v){return null}static compose(v){return Mr(v)}static composeAsync(v){return qn(v)}}function An(_){return Ne(_.value)?{required:!0}:null}function Vn(_){return null}function fn(_){return null!=_}function er(_){return(0,p.QGY)(_)?(0,we.D)(_):_}function hr(_){let v={};return _.forEach(E=>{v=null!=E?{...v,...E}:v}),0===Object.keys(v).length?null:v}function Dr(_,v){return v.map(E=>E(_))}function ar(_){return _.map(v=>function cr(_){return!_.validate}(v)?v:E=>v.validate(E))}function Mr(_){if(!_)return null;const v=_.filter(fn);return 0==v.length?null:function(E){return hr(Dr(E,v))}}function ln(_){return null!=_?Mr(ar(_)):null}function qn(_){if(!_)return null;const v=_.filter(fn);return 0==v.length?null:function(E){return function Ft(..._){const v=(0,Ce.jO)(_),{args:E,keys:O}=(0,re.D)(_),X=new Ye.y(Ve=>{const{length:Pt}=E;if(!Pt)return void Ve.complete();const mn=new Array(Pt);let Sn=Pt,Cr=Pt;for(let ni=0;ni<Pt;ni++){let gi=!1;(0,he.Xf)(E[ni]).subscribe((0,dt.x)(Ve,es=>{gi||(gi=!0,Cr--),mn[ni]=es},()=>Sn--,void 0,()=>{(!Sn||!gi)&&(Cr||Ve.next(O?(0,at.n)(O,mn):mn),Ve.complete())}))}});return v?X.pipe((0,ht.Z)(v)):X}(Dr(E,v).map(er)).pipe((0,it.U)(hr))}}function Pr(_){return null!=_?qn(ar(_)):null}function mr(_,v){return null===_?[v]:Array.isArray(_)?[..._,v]:[_,v]}function Xt(_){return _._rawValidators}function dr(_){return _._rawAsyncValidators}function Yn(_){return _?Array.isArray(_)?_:[_]:[]}function Zn(_,v){return Array.isArray(_)?_.includes(v):_===v}function fr(_,v){const E=Yn(v);return Yn(_).forEach(X=>{Zn(E,X)||E.push(X)}),E}function oi(_,v){return Yn(v).filter(E=>!Zn(_,E))}class Er{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(v){this._rawValidators=v||[],this._composedValidatorFn=ln(this._rawValidators)}_setAsyncValidators(v){this._rawAsyncValidators=v||[],this._composedAsyncValidatorFn=Pr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(v){this._onDestroyCallbacks.push(v)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(v=>v()),this._onDestroyCallbacks=[]}reset(v){this.control&&this.control.reset(v)}hasError(v,E){return!!this.control&&this.control.hasError(v,E)}getError(v,E){return this.control?this.control.getError(v,E):null}}class tt extends Er{get formDirective(){return null}get path(){return null}}class me extends Er{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _e{constructor(v){this._cd=v}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let nn=(()=>{class _ extends _e{constructor(E){super(E)}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(me,2))},_.\u0275dir=p.lG2({type:_,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(E,O){2&E&&p.ekj("ng-untouched",O.isUntouched)("ng-touched",O.isTouched)("ng-pristine",O.isPristine)("ng-dirty",O.isDirty)("ng-valid",O.isValid)("ng-invalid",O.isInvalid)("ng-pending",O.isPending)},features:[p.qOj]}),_})(),vn=(()=>{class _ extends _e{constructor(E){super(E)}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(tt,10))},_.\u0275dir=p.lG2({type:_,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(E,O){2&E&&p.ekj("ng-untouched",O.isUntouched)("ng-touched",O.isTouched)("ng-pristine",O.isPristine)("ng-dirty",O.isDirty)("ng-valid",O.isValid)("ng-invalid",O.isInvalid)("ng-pending",O.isPending)("ng-submitted",O.isSubmitted)},features:[p.qOj]}),_})();const Ae="VALID",Fe="INVALID",vt="PENDING",Bt="DISABLED";function _n(_){return(de(_)?_.validators:_)||null}function bn(_){return Array.isArray(_)?ln(_):_||null}function Ee(_,v){return(de(v)?v.asyncValidators:_)||null}function pe(_){return Array.isArray(_)?Pr(_):_||null}function de(_){return null!=_&&!Array.isArray(_)&&"object"==typeof _}function Xe(_,v,E){const O=_.controls;if(!(v?Object.keys(O):O).length)throw new p.vHH(1e3,"");if(!O[E])throw new p.vHH(1001,"")}function pt(_,v,E){_._forEachChild((O,X)=>{if(void 0===E[X])throw new p.vHH(1002,"")})}class Jt{constructor(v,E){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=v,this._rawAsyncValidators=E,this._composedValidatorFn=bn(this._rawValidators),this._composedAsyncValidatorFn=pe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(v){this._rawValidators=this._composedValidatorFn=v}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(v){this._rawAsyncValidators=this._composedAsyncValidatorFn=v}get parent(){return this._parent}get valid(){return this.status===Ae}get invalid(){return this.status===Fe}get pending(){return this.status==vt}get disabled(){return this.status===Bt}get enabled(){return this.status!==Bt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(v){this._rawValidators=v,this._composedValidatorFn=bn(v)}setAsyncValidators(v){this._rawAsyncValidators=v,this._composedAsyncValidatorFn=pe(v)}addValidators(v){this.setValidators(fr(v,this._rawValidators))}addAsyncValidators(v){this.setAsyncValidators(fr(v,this._rawAsyncValidators))}removeValidators(v){this.setValidators(oi(v,this._rawValidators))}removeAsyncValidators(v){this.setAsyncValidators(oi(v,this._rawAsyncValidators))}hasValidator(v){return Zn(this._rawValidators,v)}hasAsyncValidator(v){return Zn(this._rawAsyncValidators,v)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(v={}){this.touched=!0,this._parent&&!v.onlySelf&&this._parent.markAsTouched(v)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(v=>v.markAllAsTouched())}markAsUntouched(v={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(E=>{E.markAsUntouched({onlySelf:!0})}),this._parent&&!v.onlySelf&&this._parent._updateTouched(v)}markAsDirty(v={}){this.pristine=!1,this._parent&&!v.onlySelf&&this._parent.markAsDirty(v)}markAsPristine(v={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(E=>{E.markAsPristine({onlySelf:!0})}),this._parent&&!v.onlySelf&&this._parent._updatePristine(v)}markAsPending(v={}){this.status=vt,!1!==v.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!v.onlySelf&&this._parent.markAsPending(v)}disable(v={}){const E=this._parentMarkedDirty(v.onlySelf);this.status=Bt,this.errors=null,this._forEachChild(O=>{O.disable({...v,onlySelf:!0})}),this._updateValue(),!1!==v.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...v,skipPristineCheck:E}),this._onDisabledChange.forEach(O=>O(!0))}enable(v={}){const E=this._parentMarkedDirty(v.onlySelf);this.status=Ae,this._forEachChild(O=>{O.enable({...v,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:v.emitEvent}),this._updateAncestors({...v,skipPristineCheck:E}),this._onDisabledChange.forEach(O=>O(!1))}_updateAncestors(v){this._parent&&!v.onlySelf&&(this._parent.updateValueAndValidity(v),v.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(v){this._parent=v}getRawValue(){return this.value}updateValueAndValidity(v={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ae||this.status===vt)&&this._runAsyncValidator(v.emitEvent)),!1!==v.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!v.onlySelf&&this._parent.updateValueAndValidity(v)}_updateTreeValidity(v={emitEvent:!0}){this._forEachChild(E=>E._updateTreeValidity(v)),this.updateValueAndValidity({onlySelf:!0,emitEvent:v.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bt:Ae}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(v){if(this.asyncValidator){this.status=vt,this._hasOwnPendingAsyncValidator=!0;const E=er(this.asyncValidator(this));this._asyncValidationSubscription=E.subscribe(O=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(O,{emitEvent:v})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(v,E={}){this.errors=v,this._updateControlsErrors(!1!==E.emitEvent)}get(v){let E=v;return null==E||(Array.isArray(E)||(E=E.split(".")),0===E.length)?null:E.reduce((O,X)=>O&&O._find(X),this)}getError(v,E){const O=E?this.get(E):this;return O&&O.errors?O.errors[v]:null}hasError(v,E){return!!this.getError(v,E)}get root(){let v=this;for(;v._parent;)v=v._parent;return v}_updateControlsErrors(v){this.status=this._calculateStatus(),v&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(v)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Bt:this.errors?Fe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vt)?vt:this._anyControlsHaveStatus(Fe)?Fe:Ae}_anyControlsHaveStatus(v){return this._anyControls(E=>E.status===v)}_anyControlsDirty(){return this._anyControls(v=>v.dirty)}_anyControlsTouched(){return this._anyControls(v=>v.touched)}_updatePristine(v={}){this.pristine=!this._anyControlsDirty(),this._parent&&!v.onlySelf&&this._parent._updatePristine(v)}_updateTouched(v={}){this.touched=this._anyControlsTouched(),this._parent&&!v.onlySelf&&this._parent._updateTouched(v)}_registerOnCollectionChange(v){this._onCollectionChange=v}_setUpdateStrategy(v){de(v)&&null!=v.updateOn&&(this._updateOn=v.updateOn)}_parentMarkedDirty(v){return!v&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(v){return null}}class Pe extends Jt{constructor(v,E,O){super(_n(E),Ee(O,E)),this.controls=v,this._initObservables(),this._setUpdateStrategy(E),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(v,E){return this.controls[v]?this.controls[v]:(this.controls[v]=E,E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange),E)}addControl(v,E,O={}){this.registerControl(v,E),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}removeControl(v,E={}){this.controls[v]&&this.controls[v]._registerOnCollectionChange(()=>{}),delete this.controls[v],this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}setControl(v,E,O={}){this.controls[v]&&this.controls[v]._registerOnCollectionChange(()=>{}),delete this.controls[v],E&&this.registerControl(v,E),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}contains(v){return this.controls.hasOwnProperty(v)&&this.controls[v].enabled}setValue(v,E={}){pt(this,0,v),Object.keys(v).forEach(O=>{Xe(this,!0,O),this.controls[O].setValue(v[O],{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E)}patchValue(v,E={}){null!=v&&(Object.keys(v).forEach(O=>{const X=this.controls[O];X&&X.patchValue(v[O],{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E))}reset(v={},E={}){this._forEachChild((O,X)=>{O.reset(v[X],{onlySelf:!0,emitEvent:E.emitEvent})}),this._updatePristine(E),this._updateTouched(E),this.updateValueAndValidity(E)}getRawValue(){return this._reduceChildren({},(v,E,O)=>(v[O]=E.getRawValue(),v))}_syncPendingControls(){let v=this._reduceChildren(!1,(E,O)=>!!O._syncPendingControls()||E);return v&&this.updateValueAndValidity({onlySelf:!0}),v}_forEachChild(v){Object.keys(this.controls).forEach(E=>{const O=this.controls[E];O&&v(O,E)})}_setUpControls(){this._forEachChild(v=>{v.setParent(this),v._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(v){for(const[E,O]of Object.entries(this.controls))if(this.contains(E)&&v(O))return!0;return!1}_reduceValue(){return this._reduceChildren({},(E,O,X)=>((O.enabled||this.disabled)&&(E[X]=O.value),E))}_reduceChildren(v,E){let O=v;return this._forEachChild((X,Ve)=>{O=E(O,X,Ve)}),O}_allControlsDisabled(){for(const v of Object.keys(this.controls))if(this.controls[v].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(v){return this.controls.hasOwnProperty(v)?this.controls[v]:null}}class te extends Pe{}function oe(_,v){return[...v.path,_]}function ze(_,v){Un(_,v),v.valueAccessor.writeValue(_.value),_.disabled&&v.valueAccessor.setDisabledState?.(!0),function wr(_,v){v.valueAccessor.registerOnChange(E=>{_._pendingValue=E,_._pendingChange=!0,_._pendingDirty=!0,"change"===_.updateOn&&ri(_,v)})}(_,v),function ir(_,v){const E=(O,X)=>{v.valueAccessor.writeValue(O),X&&v.viewToModelUpdate(O)};_.registerOnChange(E),v._registerOnDestroy(()=>{_._unregisterOnChange(E)})}(_,v),function zr(_,v){v.valueAccessor.registerOnTouched(()=>{_._pendingTouched=!0,"blur"===_.updateOn&&_._pendingChange&&ri(_,v),"submit"!==_.updateOn&&_.markAsTouched()})}(_,v),function Tn(_,v){if(v.valueAccessor.setDisabledState){const E=O=>{v.valueAccessor.setDisabledState(O)};_.registerOnDisabledChange(E),v._registerOnDestroy(()=>{_._unregisterOnDisabledChange(E)})}}(_,v)}function ut(_,v,E=!0){const O=()=>{};v.valueAccessor&&(v.valueAccessor.registerOnChange(O),v.valueAccessor.registerOnTouched(O)),hn(_,v),_&&(v._invokeOnDestroyCallbacks(),_._registerOnCollectionChange(()=>{}))}function Zt(_,v){_.forEach(E=>{E.registerOnValidatorChange&&E.registerOnValidatorChange(v)})}function Un(_,v){const E=Xt(_);null!==v.validator?_.setValidators(mr(E,v.validator)):"function"==typeof E&&_.setValidators([E]);const O=dr(_);null!==v.asyncValidator?_.setAsyncValidators(mr(O,v.asyncValidator)):"function"==typeof O&&_.setAsyncValidators([O]);const X=()=>_.updateValueAndValidity();Zt(v._rawValidators,X),Zt(v._rawAsyncValidators,X)}function hn(_,v){let E=!1;if(null!==_){if(null!==v.validator){const X=Xt(_);if(Array.isArray(X)&&X.length>0){const Ve=X.filter(Pt=>Pt!==v.validator);Ve.length!==X.length&&(E=!0,_.setValidators(Ve))}}if(null!==v.asyncValidator){const X=dr(_);if(Array.isArray(X)&&X.length>0){const Ve=X.filter(Pt=>Pt!==v.asyncValidator);Ve.length!==X.length&&(E=!0,_.setAsyncValidators(Ve))}}}const O=()=>{};return Zt(v._rawValidators,O),Zt(v._rawAsyncValidators,O),E}function ri(_,v){_._pendingDirty&&_.markAsDirty(),_.setValue(_._pendingValue,{emitModelToViewChange:!1}),v.viewToModelUpdate(_._pendingValue),_._pendingChange=!1}function ke(_,v){if(!_.hasOwnProperty("model"))return!1;const E=_.model;return!!E.isFirstChange()||!Object.is(v,E.currentValue)}function Wt(_,v){if(!v)return null;let E,O,X;return Array.isArray(v),v.forEach(Ve=>{Ve.constructor===ie?E=Ve:function nt(_){return Object.getPrototypeOf(_.constructor)===Vt}(Ve)?O=Ve:X=Ve}),X||O||E||null}function rs(_,v){const E=_.indexOf(v);E>-1&&_.splice(E,1)}function wi(_){return"object"==typeof _&&null!==_&&2===Object.keys(_).length&&"value"in _&&"disabled"in _}const _i=class extends Jt{constructor(v=null,E,O){super(_n(E),Ee(O,E)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(v),this._setUpdateStrategy(E),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),de(E)&&(E.nonNullable||E.initialValueIsDefault)&&(this.defaultValue=wi(v)?v.value:v)}setValue(v,E={}){this.value=this._pendingValue=v,this._onChange.length&&!1!==E.emitModelToViewChange&&this._onChange.forEach(O=>O(this.value,!1!==E.emitViewToModelChange)),this.updateValueAndValidity(E)}patchValue(v,E={}){this.setValue(v,E)}reset(v=this.defaultValue,E={}){this._applyFormState(v),this.markAsPristine(E),this.markAsUntouched(E),this.setValue(this.value,E),this._pendingChange=!1}_updateValue(){}_anyControls(v){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(v){this._onChange.push(v)}_unregisterOnChange(v){rs(this._onChange,v)}registerOnDisabledChange(v){this._onDisabledChange.push(v)}_unregisterOnDisabledChange(v){rs(this._onDisabledChange,v)}_forEachChild(v){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(v){wi(v)?(this.value=this._pendingValue=v.value,v.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=v}},ca={provide:me,useExisting:(0,p.Gpc)(()=>Po)},Vs=(()=>Promise.resolve(null))();let Po=(()=>{class _ extends me{constructor(E,O,X,Ve,Pt){super(),this._changeDetectorRef=Pt,this.control=new _i,this._registered=!1,this.update=new p.vpe,this._parent=E,this._setValidators(O),this._setAsyncValidators(X),this.valueAccessor=Wt(0,Ve)}ngOnChanges(E){if(this._checkForErrors(),!this._registered||"name"in E){if(this._registered&&(this._checkName(),this.formDirective)){const O=E.name.previousValue;this.formDirective.removeControl({name:O,path:this._getPath(O)})}this._setUpControl()}"isDisabled"in E&&this._updateDisabled(E),ke(E,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(E){this.viewModel=E,this.update.emit(E)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ze(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(E){Vs.then(()=>{this.control.setValue(E,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(E){const O=E.isDisabled.currentValue,X=0!==O&&(0,p.D6c)(O);Vs.then(()=>{X&&!this.control.disabled?this.control.disable():!X&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(E){return this._parent?oe(E,this._parent):[E]}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(tt,9),p.Y36($e,10),p.Y36(Ke,10),p.Y36($t,10),p.Y36(p.sBO,8))},_.\u0275dir=p.lG2({type:_,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([ca]),p.qOj,p.TTD]}),_})(),Bs=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275dir=p.lG2({type:_,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),_})();const js={provide:$t,useExisting:(0,p.Gpc)(()=>Di),multi:!0};let Jr=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({}),_})(),Vi=(()=>{class _{constructor(){this._accessors=[]}add(E,O){this._accessors.push([E,O])}remove(E){for(let O=this._accessors.length-1;O>=0;--O)if(this._accessors[O][1]===E)return void this._accessors.splice(O,1)}select(E){this._accessors.forEach(O=>{this._isSameGroup(O,E)&&O[1]!==E&&O[1].fireUncheck(E.value)})}_isSameGroup(E,O){return!!E[0].control&&E[0]._parent===O._control._parent&&E[1].name===O.name}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:Jr}),_})(),Di=(()=>{class _ extends Vt{constructor(E,O,X,Ve){super(E,O),this._registry=X,this._injector=Ve,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(me),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(E){this._state=E===this.value,this.setProperty("checked",this._state)}registerOnChange(E){this._fn=E,this.onChange=()=>{E(this.value),this._registry.select(this)}}fireUncheck(E){this.writeValue(E)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Vi),p.Y36(p.zs3))},_.\u0275dir=p.lG2({type:_,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(E,O){1&E&&p.NdJ("change",function(){return O.onChange()})("blur",function(){return O.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([js]),p.qOj]}),_})();const Sr=new p.OlP("NgModelWithFormControlWarning"),Yi={provide:tt,useExisting:(0,p.Gpc)(()=>Hs)};let Hs=(()=>{class _ extends tt{constructor(E,O){super(),this.validators=E,this.asyncValidators=O,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(E),this._setAsyncValidators(O)}ngOnChanges(E){this._checkFormPresent(),E.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(E){const O=this.form.get(E.path);return ze(O,E),O.updateValueAndValidity({emitEvent:!1}),this.directives.push(E),O}getControl(E){return this.form.get(E.path)}removeControl(E){ut(E.control||null,E,!1),function dn(_,v){const E=_.indexOf(v);E>-1&&_.splice(E,1)}(this.directives,E)}addFormGroup(E){this._setUpFormContainer(E)}removeFormGroup(E){this._cleanUpFormContainer(E)}getFormGroup(E){return this.form.get(E.path)}addFormArray(E){this._setUpFormContainer(E)}removeFormArray(E){this._cleanUpFormContainer(E)}getFormArray(E){return this.form.get(E.path)}updateModel(E,O){this.form.get(E.path).setValue(O)}onSubmit(E){return this.submitted=!0,function Nt(_,v){_._syncPendingControls(),v.forEach(E=>{const O=E.control;"submit"===O.updateOn&&O._pendingChange&&(E.viewToModelUpdate(O._pendingValue),O._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(E),!1}onReset(){this.resetForm()}resetForm(E){this.form.reset(E),this.submitted=!1}_updateDomValue(){this.directives.forEach(E=>{const O=E.control,X=this.form.get(E.path);O!==X&&(ut(O||null,E),(_=>_ instanceof _i)(X)&&(ze(X,E),E.control=X))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(E){const O=this.form.get(E.path);(function mi(_,v){Un(_,v)})(O,E),O.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(E){if(this.form){const O=this.form.get(E.path);O&&function qr(_,v){return hn(_,v)}(O,E)&&O.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Un(this.form,this),this._oldForm&&hn(this._oldForm,this)}_checkFormPresent(){}}return _.\u0275fac=function(E){return new(E||_)(p.Y36($e,10),p.Y36(Ke,10))},_.\u0275dir=p.lG2({type:_,selectors:[["","formGroup",""]],hostBindings:function(E,O){1&E&&p.NdJ("submit",function(Ve){return O.onSubmit(Ve)})("reset",function(){return O.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Yi]),p.qOj,p.TTD]}),_})();const vs={provide:me,useExisting:(0,p.Gpc)(()=>Ii)};let Ii=(()=>{class _ extends me{constructor(E,O,X,Ve,Pt){super(),this._ngModelWarningConfig=Pt,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=E,this._setValidators(O),this._setAsyncValidators(X),this.valueAccessor=Wt(0,Ve)}set isDisabled(E){}ngOnChanges(E){this._added||this._setUpControl(),ke(E,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(E){this.viewModel=E,this.update.emit(E)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return _._ngModelWarningSentOnce=!1,_.\u0275fac=function(E){return new(E||_)(p.Y36(tt,13),p.Y36($e,10),p.Y36(Ke,10),p.Y36($t,10),p.Y36(Sr,8))},_.\u0275dir=p.lG2({type:_,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([vs]),p.qOj,p.TTD]}),_})();const ko={provide:$t,useExisting:(0,p.Gpc)(()=>Hr),multi:!0};function ei(_,v){return null==_?`${v}`:(v&&"object"==typeof v&&(v="Object"),`${_}: ${v}`.slice(0,50))}let Hr=(()=>{class _ extends Vt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(E){this._compareWith=E}writeValue(E){this.value=E;const X=ei(this._getOptionId(E),E);this.setProperty("value",X)}registerOnChange(E){this.onChange=O=>{this.value=this._getOptionValue(O),E(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(E){for(const O of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(O),E))return O;return null}_getOptionValue(E){const O=function Da(_){return _.split(":")[0]}(E);return this._optionMap.has(O)?this._optionMap.get(O):E}}return _.\u0275fac=function(){let v;return function(O){return(v||(v=p.n5z(_)))(O||_)}}(),_.\u0275dir=p.lG2({type:_,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(E,O){1&E&&p.NdJ("change",function(Ve){return O.onChange(Ve.target.value)})("blur",function(){return O.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ko]),p.qOj]}),_})(),Se=(()=>{class _{constructor(E,O,X){this._element=E,this._renderer=O,this._select=X,this._select&&(this.id=this._select._registerOption())}set ngValue(E){null!=this._select&&(this._select._optionMap.set(this.id,E),this._setElementValue(ei(this.id,E)),this._select.writeValue(this._select.value))}set value(E){this._setElementValue(E),this._select&&this._select.writeValue(this._select.value)}_setElementValue(E){this._renderer.setProperty(this._element.nativeElement,"value",E)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Hr,9))},_.\u0275dir=p.lG2({type:_,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),_})();const ge={provide:$t,useExisting:(0,p.Gpc)(()=>Ct),multi:!0};function We(_,v){return null==_?`${v}`:("string"==typeof v&&(v=`'${v}'`),v&&"object"==typeof v&&(v="Object"),`${_}: ${v}`.slice(0,50))}let Ct=(()=>{class _ extends Vt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(E){this._compareWith=E}writeValue(E){let O;if(this.value=E,Array.isArray(E)){const X=E.map(Ve=>this._getOptionId(Ve));O=(Ve,Pt)=>{Ve._setSelected(X.indexOf(Pt.toString())>-1)}}else O=(X,Ve)=>{X._setSelected(!1)};this._optionMap.forEach(O)}registerOnChange(E){this.onChange=O=>{const X=[],Ve=O.selectedOptions;if(void 0!==Ve){const Pt=Ve;for(let mn=0;mn<Pt.length;mn++){const Cr=this._getOptionValue(Pt[mn].value);X.push(Cr)}}else{const Pt=O.options;for(let mn=0;mn<Pt.length;mn++){const Sn=Pt[mn];if(Sn.selected){const Cr=this._getOptionValue(Sn.value);X.push(Cr)}}}this.value=X,E(X)}}_registerOption(E){const O=(this._idCounter++).toString();return this._optionMap.set(O,E),O}_getOptionId(E){for(const O of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(O)._value,E))return O;return null}_getOptionValue(E){const O=function st(_){return _.split(":")[0]}(E);return this._optionMap.has(O)?this._optionMap.get(O)._value:E}}return _.\u0275fac=function(){let v;return function(O){return(v||(v=p.n5z(_)))(O||_)}}(),_.\u0275dir=p.lG2({type:_,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(E,O){1&E&&p.NdJ("change",function(Ve){return O.onChange(Ve.target)})("blur",function(){return O.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ge]),p.qOj]}),_})(),sn=(()=>{class _{constructor(E,O,X){this._element=E,this._renderer=O,this._select=X,this._select&&(this.id=this._select._registerOption(this))}set ngValue(E){null!=this._select&&(this._value=E,this._setElementValue(We(this.id,E)),this._select.writeValue(this._select.value))}set value(E){this._select?(this._value=E,this._setElementValue(We(this.id,E)),this._select.writeValue(this._select.value)):this._setElementValue(E)}_setElementValue(E){this._renderer.setProperty(this._element.nativeElement,"value",E)}_setSelected(E){this._renderer.setProperty(this._element.nativeElement,"selected",E)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ct,9))},_.\u0275dir=p.lG2({type:_,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),_})(),Rn=(()=>{class _{constructor(){this._validator=Vn}ngOnChanges(E){if(this.inputName in E){const O=this.normalizeInput(E[this.inputName].currentValue);this._enabled=this.enabled(O),this._validator=this._enabled?this.createValidator(O):Vn,this._onChange&&this._onChange()}}validate(E){return this._validator(E)}registerOnValidatorChange(E){this._onChange=E}enabled(E){return null!=E}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275dir=p.lG2({type:_,features:[p.TTD]}),_})();const jn={provide:$e,useExisting:(0,p.Gpc)(()=>ws),multi:!0};let ws=(()=>{class _ extends Rn{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=E=>An}enabled(E){return E}}return _.\u0275fac=function(){let v;return function(O){return(v||(v=p.n5z(_)))(O||_)}}(),_.\u0275dir=p.lG2({type:_,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(E,O){2&E&&p.uIk("required",O._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([jn]),p.qOj]}),_})(),ao=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[Jr]}),_})(),ls=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[ao]}),_})(),Sa=(()=>{class _{static withConfig(E){return{ngModule:_,providers:[{provide:Sr,useValue:E.warnOnNgModelWithFormControl}]}}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[ao]}),_})();class ji extends Jt{constructor(v,E,O){super(_n(E),Ee(O,E)),this.controls=v,this._initObservables(),this._setUpdateStrategy(E),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(v){return this.controls[this._adjustIndex(v)]}push(v,E={}){this.controls.push(v),this._registerControl(v),this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}insert(v,E,O={}){this.controls.splice(v,0,E),this._registerControl(E),this.updateValueAndValidity({emitEvent:O.emitEvent})}removeAt(v,E={}){let O=this._adjustIndex(v);O<0&&(O=0),this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),this.updateValueAndValidity({emitEvent:E.emitEvent})}setControl(v,E,O={}){let X=this._adjustIndex(v);X<0&&(X=0),this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),this.controls.splice(X,1),E&&(this.controls.splice(X,0,E),this._registerControl(E)),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(v,E={}){pt(this,0,v),v.forEach((O,X)=>{Xe(this,!1,X),this.at(X).setValue(O,{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E)}patchValue(v,E={}){null!=v&&(v.forEach((O,X)=>{this.at(X)&&this.at(X).patchValue(O,{onlySelf:!0,emitEvent:E.emitEvent})}),this.updateValueAndValidity(E))}reset(v=[],E={}){this._forEachChild((O,X)=>{O.reset(v[X],{onlySelf:!0,emitEvent:E.emitEvent})}),this._updatePristine(E),this._updateTouched(E),this.updateValueAndValidity(E)}getRawValue(){return this.controls.map(v=>v.getRawValue())}clear(v={}){this.controls.length<1||(this._forEachChild(E=>E._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:v.emitEvent}))}_adjustIndex(v){return v<0?v+this.length:v}_syncPendingControls(){let v=this.controls.reduce((E,O)=>!!O._syncPendingControls()||E,!1);return v&&this.updateValueAndValidity({onlySelf:!0}),v}_forEachChild(v){this.controls.forEach((E,O)=>{v(E,O)})}_updateValue(){this.value=this.controls.filter(v=>v.enabled||this.disabled).map(v=>v.value)}_anyControls(v){return this.controls.some(E=>E.enabled&&v(E))}_setUpControls(){this._forEachChild(v=>this._registerControl(v))}_allControlsDisabled(){for(const v of this.controls)if(v.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(v){v.setParent(this),v._registerOnCollectionChange(this._onCollectionChange)}_find(v){return this.at(v)??null}}function hu(_){return!!_&&(void 0!==_.asyncValidators||void 0!==_.validators||void 0!==_.updateOn)}let cs=(()=>{class _{constructor(){this.useNonNullable=!1}get nonNullable(){const E=new _;return E.useNonNullable=!0,E}group(E,O=null){const X=this._reduceControls(E);let Ve={};return hu(O)?Ve=O:null!==O&&(Ve.validators=O.validator,Ve.asyncValidators=O.asyncValidator),new Pe(X,Ve)}record(E,O=null){const X=this._reduceControls(E);return new te(X,O)}control(E,O,X){let Ve={};return this.useNonNullable?(hu(O)?Ve=O:(Ve.validators=O,Ve.asyncValidators=X),new _i(E,{...Ve,nonNullable:!0})):new _i(E,O,X)}array(E,O,X){const Ve=E.map(Pt=>this._createControl(Pt));return new ji(Ve,O,X)}_reduceControls(E){const O={};return Object.keys(E).forEach(X=>{O[X]=this._createControl(E[X])}),O}_createControl(E){return E instanceof _i||E instanceof Jt?E:Array.isArray(E)?this.control(E[0],E.length>1?E[1]:null,E.length>2?E[2]:null):this.control(E)}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:Sa}),_})();var Ma=j(127),Cs=j(5626);let wo=(()=>{class _{constructor(E,O,X){this.afs=E,this.authSvc=O,this.router=X,this.getUseMail()}addEncuesta(E){return this.getUseMail(),this.afs.collection("encuesta").add({user:this.mail,pregunta1:E.pregunta1,respuesta1:E.respuesta1,pregunta2:E.pregunta2,respuesta2:E.respuesta2,pregunta3:E.pregunta3,respuesta3:E.respuesta3,nombre:E.nombre,apellido:E.apellido,edad:E.edad,telefono:E.telefono,sexo:E.sexo,createdAt:Ma.Z.firestore.FieldValue.serverTimestamp()})}getUseMail(){var E=this;return(0,Le.Z)(function*(){(yield E.authSvc.getUsuarioFire())?(E.mail=E.authSvc.getUsuarioFire()?.email,console.log(E.mail)):E.mail="usuario anonimo"})()}}return _.\u0275fac=function(E){return new(E||_)(p.LFG(Cs.ST),p.LFG(R.e),p.LFG(Z.F0))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function Zo(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El nombre es requerido"),p.qZA())}function As(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El nombre solo puede estar compuesto por letras"),p.qZA())}function Ku(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El apellido es requerido"),p.qZA())}function Ra(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El apellido solo puede estar compuesto por letras"),p.qZA())}function da(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"La edad es requerida"),p.qZA())}function Na(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"La edad tiene que ser numerica"),p.qZA())}function Ya(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"La edad no puede ser menor a 18"),p.qZA())}function ha(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"La edad no puede ser mayor a 99"),p.qZA())}function xs(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El numero de telefono es requerido"),p.qZA())}function Ko(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El numero de telefono no puede exceder los 10 caracteres "),p.qZA())}function Co(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"El telefono tiene que ser numerico"),p.qZA())}function Yo(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"No ha seleccionado sexo"),p.qZA())}function Pa(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"No ha contestado la pregunta"),p.qZA())}function F(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"No ha contestado la pregunta"),p.qZA())}function z(_,v){1&_&&(p.TgZ(0,"small",50),p._uU(1,"No ha contestado la pregunta"),p.qZA())}let U=(()=>{class _{constructor(E,O,X,Ve){this.fb=E,this.authSvc=O,this.enSvc=X,this.router=Ve,this.encuesta={}}ngOnInit(){this.getmail(),this.formGroup=this.fb.group({nombre:["",[bt.required,bt.pattern("[a-zA-Z]+")]],apellido:["",[bt.required,bt.pattern("[a-zA-Z]+")]],edad:["",[bt.required,bt.min(18),bt.max(99),bt.pattern("^[0-9]+$")]],sexo:["",bt.required],telefono:["",[bt.required,bt.maxLength(10),bt.pattern("^[0-9]+$")]],pregunta2:["",bt.required],pregunta1:["",bt.required],pregunta3:["",bt.required]})}enviar(){this.encuesta={pregunta1:"\xbfLe gusto la pagina?",respuesta1:this.formGroup.get("pregunta1").value,pregunta2:"\xbfQue juegos que le gustaria ver en la pagina?",respuesta2:this.formGroup.get("pregunta2").value,pregunta3:"\xbfCual es su juego favorito?",respuesta3:this.formGroup.get("pregunta3").value,nombre:this.formGroup.get("nombre").value,apellido:this.formGroup.get("apellido").value,edad:this.formGroup.get("edad").value,telefono:this.formGroup.get("telefono").value,sexo:this.formGroup.get("sexo").value},console.log(this.formGroup.get("apellido").value),this.enSvc.addEncuesta(this.encuesta),this.router.navigate(["/home"])}getmail(){var E=this;return(0,Le.Z)(function*(){E.mail=E.authSvc.getUsuarioFire().email})()}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(cs),p.Y36(R.e),p.Y36(wo),p.Y36(Z.F0))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-encuesta"]],decls:104,vars:18,consts:[[1,"container"],[1,"py-5","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-7","col-lg-8"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","formControlName","nombre","id","firstName","placeholder","","value","","required","",1,"form-control"],[1,"invalid-feedback"],["class","invalid",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","formControlName","apellido","id","lastName","placeholder","","value","","required","",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],[1,"text-muted"],["type","email","id","email","readonly","",1,"form-control","mail",3,"placeholder"],[1,"col-6"],["for","address",1,"form-label"],["type","text","formControlName","edad","id","address","placeholder","","required","",1,"form-control"],["for","address2",1,"form-label"],["type","text","formControlName","telefono","id","address2","placeholder","",1,"form-control"],[1,"col-md-5"],["for","se",1,"sexo"],["id","country","formControlName","sexo","required","",1,"form-select"],["value",""],["value","Femenino"],["value","Masculino"],["value","Otro"],["value","N/A"],[1,"my-4"],[1,"mb-3"],[1,"form-check"],["type","checkbox","id","same-address","formControlName","pregunta1","value","Si",1,"form-check-input"],["for","same-address",1,"form-check-label"],["type","checkbox","id","save-info","formControlName","pregunta1","value","No",1,"form-check-input"],["for","save-info",1,"form-check-label"],[1,"form-group"],["for","exampleFormControlTextarea1"],["id","exampleFormControlTextarea1","formControlName","pregunta2","rows","3","value","",1,"form-control"],[1,"my-3"],["id","Memotest","name","pregunta3","type","radio","formControlName","pregunta3","value","Memotest","checked","","required","",1,"form-check-input"],["for","Memotest",1,"form-check-label"],["id","TaTeTi","name","pregunta3","type","radio","formControlName","pregunta3","value","TaTeTi","required","",1,"form-check-input"],["for","TaTeTi",1,"form-check-label"],["id","Piedra papel o Tijera","name","pregunta3","type","radio","formControlName","pregunta3","value","Piedra papel o Tijera","required","",1,"form-check-input"],["for","Piedra papel o Tijera",1,"form-check-label"],["id","Rompecabezas de numeros","name","pregunta3","type","radio","formControlName","pregunta3","value","Rompecabezas de numeros","required","",1,"form-check-input"],["for","Rompecabezas de numeros",1,"form-check-label"],["type","submit",1,"fill","w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid"]],template:function(E,O){if(1&E&&(p.TgZ(0,"div",0)(1,"main")(2,"div",1)(3,"h1"),p._uU(4,"Encuesta"),p.qZA()(),p.TgZ(5,"div",2)(6,"div",3)(7,"form",4),p.NdJ("ngSubmit",function(){return O.enviar()}),p.TgZ(8,"div",5)(9,"div",6)(10,"label",7),p._uU(11,"Nombre"),p.qZA(),p._UZ(12,"input",8),p.TgZ(13,"div",9),p._uU(14," Ingrese un nombre valido. "),p.qZA(),p.YNc(15,Zo,2,0,"small",10),p.YNc(16,As,2,0,"small",10),p.qZA(),p.TgZ(17,"div",6)(18,"label",11),p._uU(19,"Apellido"),p.qZA(),p._UZ(20,"input",12),p.TgZ(21,"div",9),p._uU(22," Ingrese un apellido valido. "),p.qZA(),p.YNc(23,Ku,2,0,"small",10),p.YNc(24,Ra,2,0,"small",10),p.qZA(),p.TgZ(25,"div",13)(26,"label",14),p._uU(27,"Email "),p._UZ(28,"span",15),p.qZA(),p._UZ(29,"input",16),p.qZA(),p.TgZ(30,"div",17)(31,"label",18),p._uU(32,"Edad"),p.qZA(),p._UZ(33,"input",19),p.TgZ(34,"div",9),p._uU(35," Ingrese edad. "),p.qZA(),p.YNc(36,da,2,0,"small",10),p.YNc(37,Na,2,0,"small",10),p.YNc(38,Ya,2,0,"small",10),p.YNc(39,ha,2,0,"small",10),p.qZA(),p.TgZ(40,"div",17)(41,"label",20),p._uU(42,"N\xfamero de tel\xe9fono "),p.qZA(),p._UZ(43,"input",21),p.YNc(44,xs,2,0,"small",10),p.YNc(45,Ko,2,0,"small",10),p.YNc(46,Co,2,0,"small",10),p.qZA(),p.TgZ(47,"div",22)(48,"label",23),p._uU(49,"Sexo "),p.qZA(),p.TgZ(50,"select",24)(51,"option",25),p._uU(52,"Seleccione..."),p.qZA(),p.TgZ(53,"option",26),p._uU(54,"Femenino"),p.qZA(),p.TgZ(55,"option",27),p._uU(56,"Masculino"),p.qZA(),p.TgZ(57,"option",28),p._uU(58,"Otro"),p.qZA(),p.TgZ(59,"option",29),p._uU(60,"N/A"),p.qZA()(),p._UZ(61,"br"),p.YNc(62,Yo,2,0,"small",10),p.qZA()(),p._UZ(63,"hr",30),p.TgZ(64,"h4",31),p._uU(65,"\xbfLe gusto la pagina?"),p.qZA(),p.TgZ(66,"div",32),p._UZ(67,"input",33),p.TgZ(68,"label",34),p._uU(69,"Si"),p.qZA()(),p.TgZ(70,"div",32),p._UZ(71,"input",35),p.TgZ(72,"label",36),p._uU(73,"No"),p.qZA()(),p.YNc(74,Pa,2,0,"small",10),p._UZ(75,"hr",30),p.TgZ(76,"div",37)(77,"label",38),p._uU(78,"\xbfQue juegos que le gustaria ver en la pagina?"),p.qZA(),p._UZ(79,"textarea",39),p.YNc(80,F,2,0,"small",10),p.qZA(),p._UZ(81,"hr",30),p.TgZ(82,"h4",31),p._uU(83,"\xbfCual es su juego favorito?"),p.qZA(),p.TgZ(84,"div",40)(85,"div",32),p._UZ(86,"input",41),p.TgZ(87,"label",42),p._uU(88,"Preguntados"),p.qZA()(),p.TgZ(89,"div",32),p._UZ(90,"input",43),p.TgZ(91,"label",44),p._uU(92,"Ahorcado"),p.qZA()(),p.TgZ(93,"div",32),p._UZ(94,"input",45),p.TgZ(95,"label",46),p._uU(96,"Mayor o menor"),p.qZA()(),p.TgZ(97,"div",32),p._UZ(98,"input",47),p.TgZ(99,"label",48),p._uU(100,"Rompecabezas de numeros"),p.qZA()(),p.YNc(101,z,2,0,"small",10),p.qZA(),p.TgZ(102,"button",49),p._uU(103,"Enviar "),p.qZA()()()()()()),2&E){let X;p.xp6(7),p.Q6J("formGroup",O.formGroup),p.xp6(8),p.Q6J("ngIf",(null==O.formGroup.get("nombre").errors?null:O.formGroup.get("nombre").errors.required)&&O.formGroup.get("nombre").touched),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("nombre").hasError("pattern")),p.xp6(7),p.Q6J("ngIf",(null==O.formGroup.get("apellido").errors?null:O.formGroup.get("apellido").errors.required)&&O.formGroup.get("apellido").touched),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("apellido").hasError("pattern")),p.xp6(5),p.s9C("placeholder",O.mail),p.xp6(7),p.Q6J("ngIf",(null==O.formGroup.get("edad").errors?null:O.formGroup.get("edad").errors.required)&&O.formGroup.get("edad").touched),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("edad").hasError("pattern")),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("edad").hasError("min")),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("edad").hasError("max")),p.xp6(5),p.Q6J("ngIf",(null==O.formGroup.get("telefono").errors?null:O.formGroup.get("telefono").errors.required)&&O.formGroup.get("telefono").touched),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("telefono").hasError("maxlength")),p.xp6(1),p.Q6J("ngIf",O.formGroup.get("telefono").hasError("pattern")),p.xp6(16),p.Q6J("ngIf",(null==O.formGroup.get("sexo").errors?null:O.formGroup.get("sexo").errors.required)&&O.formGroup.get("sexo").touched),p.xp6(12),p.Q6J("ngIf",(null==O.formGroup.get("pregunta1").errors?null:O.formGroup.get("pregunta1").errors.required)&&O.formGroup.get("pregunta2").touched),p.xp6(6),p.Q6J("ngIf",(null==O.formGroup.get("pregunta2").errors?null:O.formGroup.get("pregunta2").errors.required)&&O.formGroup.get("pregunta2").touched),p.xp6(21),p.Q6J("ngIf",(null==O.formGroup.get("pregunta3").errors?null:O.formGroup.get("pregunta3").errors.required)&&(null==(X=O.formGroup.get("pregunta3"))?null:X.touched)),p.xp6(1),p.Q6J("disabled",!O.formGroup.valid)}},dependencies:[je.O5,Bs,Se,sn,ie,lt,Hr,Di,nn,vn,ws,Hs,Ii],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.container[_ngcontent-%COMP%]{color:#0d606b;font-family:Grandstander,cursive}.mail[_ngcontent-%COMP%]{color:#f0f}.invalid[_ngcontent-%COMP%]{color:red;font-size:large}.sexo[_ngcontent-%COMP%]{margin:20px}main[_ngcontent-%COMP%]{background-color:#bdf3e1}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;color:#0d606b;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px;font-family:Pastel Colors,sans-serif}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}']}),_})(),Q=(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-error"]],decls:2,vars:0,template:function(E,O){1&E&&(p.TgZ(0,"h1"),p._uU(1,"Para ver los juegos necesitas iniciar sesion!"),p.qZA())},styles:["h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:7.1em;margin-top:70px}"]}),_})();var Oe=j(4359);function wt(_,v){if(1&_&&(p.TgZ(0,"tr")(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.TgZ(13,"td"),p._uU(14),p.qZA(),p.TgZ(15,"td"),p._uU(16),p.ALo(17,"date"),p.qZA()()),2&_){const E=v.$implicit;p.xp6(2),p.hij("",E.juego," "),p.xp6(2),p.hij("",E.usuario," "),p.xp6(2),p.hij("",E.resultado," "),p.xp6(2),p.hij("",E.correctas," "),p.xp6(2),p.hij("",E.errores," "),p.xp6(2),p.hij("",E.clicks," "),p.xp6(2),p.hij("",E.tiempo," "),p.xp6(2),p.hij("",p.xi3(17,8,null==E.createdAt?null:E.createdAt.toMillis(),"short")," ")}}let Tt=(()=>{class _{constructor(E){this.listado=E,this.lista=this.listado.getListas(),console.log(this.lista)}ngOnInit(){}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(Oe.L))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-listados"]],decls:22,vars:3,consts:[[1,"table","table-condensed"],[4,"ngFor","ngForOf"]],template:function(E,O){1&E&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),p._uU(4,"Juego"),p.qZA(),p.TgZ(5,"th"),p._uU(6,"Jugador"),p.qZA(),p.TgZ(7,"th"),p._uU(8,"Resultado"),p.qZA(),p.TgZ(9,"th"),p._uU(10,"Correctas"),p.qZA(),p.TgZ(11,"th"),p._uU(12,"Errores"),p.qZA(),p.TgZ(13,"th"),p._uU(14,"Movimientos"),p.qZA(),p.TgZ(15,"th"),p._uU(16,"Tiempo"),p.qZA(),p.TgZ(17,"th"),p._uU(18,"Fecha"),p.qZA()()(),p.TgZ(19,"tbody"),p.YNc(20,wt,18,11,"tr",1),p.ALo(21,"async"),p.qZA()()),2&E&&(p.xp6(20),p.Q6J("ngForOf",p.lcZ(21,1,O.lista)))},dependencies:[je.sg,je.Ov,je.uU],styles:["table[_ngcontent-%COMP%]{color:#0d606b;font-weight:bolder}"]}),_})(),Nn=(()=>{class _{constructor(){}getError(E){return{"auth/claims-too-large":"La carga \xfatil de la reclamaci\xf3n que se entreg\xf3 a setCustomUserClaims() supera el tama\xf1o m\xe1ximo de 1,000 bytes.","auth/email-already-exists":"Otro usuario ya est\xe1 utilizando el correo electr\xf3nico proporcionado. Cada usuario debe tener un correo electr\xf3nico \xfanico.","auth/id-token-expired":"El token de ID de Firebase que se proporcion\xf3 est\xe1 vencido.","auth/id-token-revoked":"Se revoc\xf3 el token de ID de Firebase.","auth/insufficient-permission":"La credencial que se us\xf3 para inicializar el SDK de Admin no tiene permisos suficientes a fin de acceder al recurso de autenticaci\xf3n solicitado. Consulta c\xf3mo configurar un proyecto de Firebase para ver la documentaci\xf3n sobre c\xf3mo generar una credencial con los permisos apropiados y usarla en la autenticaci\xf3n de los SDK de Admin.","auth/internal-error":"El servidor de autenticaci\xf3n encontr\xf3 un error inesperado cuando se intentaba procesar la solicitud. Para obtener informaci\xf3n adicional, revisa la respuesta del servidor de autenticaci\xf3n, que deber\xeda estar incluida en el mensaje de error. Si el error persiste, av\xedsanos mediante nuestro canal de asistencia de informe de errores.","auth/invalid-argument":"Se proporcion\xf3 un argumento no v\xe1lido para un m\xe9todo de autenticaci\xf3n. El mensaje de error debe incluir informaci\xf3n adicional.","auth/invalid-claims":"Los atributos personalizados del reclamo que se entregaron a setCustomUserClaims() no son v\xe1lidos.","auth/invalid-continue-uri":"La URL de continuaci\xf3n debe ser una string de URL v\xe1lida.","auth/invalid-creation-time":"La hora de creaci\xf3n debe ser una string de fecha en formato UTC v\xe1lida.","auth/invalid-credential":"La credencial que se usa en la autenticaci\xf3n de los SDK de Admin no se puede emplear para realizar la acci\xf3n deseada. Algunos m\xe9todos de autenticaci\xf3n, como createCustomToken() y verifyIdToken(), requieren que los SDK se inicialicen con una credencial de certificado en lugar de un token de actualizaci\xf3n o una credencial predeterminada de la aplicaci\xf3n. Consulta Inicializa el SDK para ver documentaci\xf3n sobre c\xf3mo autenticar el SDK de Admin con una credencial de certificado.","auth/invalid-disabled-field":"El valor que se proporcion\xf3 para la propiedad del usuario disabled no es v\xe1lido. Debe ser un booleano.","auth/invalid-display-name":"El valor que se proporcion\xf3 para la propiedad del usuario displayName no es v\xe1lido. Debe ser una string que no est\xe9 vac\xeda.","auth/invalid-dynamic-link-domain":"El dominio del v\xednculo din\xe1mico proporcionado no se configur\xf3 o no se autoriz\xf3 para el proyecto actual.","auth/invalid-email":"\tLa direcci\xf3n de correo electr\xf3nico ingresada no es valida.","auth/invalid-email-verified":"El valor que se proporcion\xf3 para la propiedad del usuario emailVerified no es v\xe1lido. Debe ser un booleano.","auth/invalid-hash-algorithm":"El algoritmo de hash debe coincidir con las strings de la lista de algoritmos compatibles.","auth/invalid-hash-block-size":"El tama\xf1o del conjunto de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-derived-key-length":"La longitud de la clave derivada de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-key":"La clave de hash debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-hash-memory-cost":"El costo de la memoria de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-parallelization":"La paralelizaci\xf3n de hash debe ser un n\xfamero v\xe1lido.","auth/invalid-hash-rounds":"Las rondas de hash deben ser un n\xfamero v\xe1lido.","auth/invalid-hash-salt-separator":"El campo del separador de sal del algoritmo de hash debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-id-token":"El token de ID que se proporcion\xf3 no es un token de ID de Firebase v\xe1lido.","auth/invalid-last-sign-in-time":"La hora del \xfaltimo acceso debe ser una string de fecha en formato UTC v\xe1lida.","auth/invalid-page-token":"El token de p\xe1gina siguiente que se entreg\xf3 en listUsers() no es v\xe1lido. Debe ser una string v\xe1lida que no est\xe9 vac\xeda.","auth/invalid-password":"El valor que se proporcion\xf3 para la propiedad del usuario password no es v\xe1lido. Debe ser una string con al menos seis caracteres.","auth/invalid-password-hash":"El hash de contrase\xf1as debe ser un b\xfafer de bytes v\xe1lidos.","auth/invalid-password-salt":"La contrase\xf1a con sal debe ser un b\xfafer de bytes v\xe1lido.","auth/invalid-phone-number":"El valor que se proporcion\xf3 para phoneNumber no es v\xe1lido. Debe ser una string de identificador que no est\xe9 vac\xeda y que cumpla con el est\xe1ndar E.164.","auth/invalid-photo-url":"El valor que se proporcion\xf3 para la propiedad del usuario photoURL no es v\xe1lido. Debe ser una URL de string.","auth/invalid-provider-data":"providerData debe ser una serie de objetos UserInfo.","auth/invalid-provider-id":"providerId debe ser una string del identificador del proveedor compatible v\xe1lida.","auth/invalid-session-cookie-duration":"La duraci\xf3n de las cookies de la sesi\xf3n debe ser un n\xfamero v\xe1lido en milisegundos que vaya entre los 5 minutos y las 2 semanas.","auth/invalid-uid":"El uid proporcionado debe ser una string no vac\xeda con un m\xe1ximo de 128 caracteres.","auth/invalid-user-import":"El registro de usuarios para importar no es v\xe1lido.","auth/maximum-user-count-exceeded":"Se excedi\xf3 la cantidad m\xe1xima de usuarios permitidos para importar.","auth/missing-android-pkg-name":"Si es obligatorio instalar la app para Android, debe proporcionarse un nombre de paquete de Android.","auth/missing-continue-uri":"Se debe proporcionar una URL de continuaci\xf3n v\xe1lida en la solicitud.","auth/missing-hash-algorithm":"Para importar usuarios con hash de contrase\xf1as, es necesario proporcionar el algoritmo de hash y sus par\xe1metros.","auth/missing-ios-bundle-id":"La solicitud debe contener un ID del paquete de iOS.","auth/missing-uid":"Se requiere un identificador uid para la operaci\xf3n actual.","auth/operation-not-allowed":"El proveedor de acceso proporcionado est\xe1 inhabilitado para tu proyecto de Firebase. Habil\xedtalo en la secci\xf3n M\xe9todo de acceso de Firebase console.","auth/phone-number-already-exists":"Otro usuario ya utiliza el phoneNumber proporcionado. Cada usuario debe tener un phoneNumber \xfanico.","auth/project-not-found":"No se encontr\xf3 ning\xfan proyecto de Firebase correspondiente a la credencial que se us\xf3 para inicializar los SDK de administrador. Consulta c\xf3mo configurar un proyecto de Firebase para ver la documentaci\xf3n sobre c\xf3mo generar una credencial para tu proyecto y usarla en la autenticaci\xf3n de los SDK de Admin.","auth/reserved-claims":"Uno o m\xe1s de los reclamos personalizados de usuarios que se entregaron a setCustomUserClaims() est\xe1n reservados. Por ejemplo, no deben usarse reclamos espec\xedficos de OIDC (p. ej., sub, iat, iss, exp, aud o auth_time) como claves para reclamos personalizados.","auth/session-cookie-expired":"La cookie proporcionada de la sesi\xf3n de Firebase venci\xf3.","auth/session-cookie-revoked":"Se revocaron las cookies de la sesi\xf3n de Firebase.","auth/uid-already-exists":"Otro usuario ya utiliza el uid proporcionado. Cada usuario debe tener un uid \xfanico.","auth/unauthorized-continue-uri":"El dominio de la URL de continuaci\xf3n no est\xe1 en la lista blanca. Incl\xfayelo en la lista en Firebase console.","auth/wrong-password":"Contrase\xf1a err\xf3nea","auth/user-not-found":"El correo electr\xf3nico proporcionado no corresponde a un usuario activo"}[E]}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const hi=[{path:"",component:(()=>{class _{constructor(E,O,X){this.authSvc=E,this.router=O,this.error=X,this.loginForm=new Pe({email:new _i(""),password:new _i("")}),this.seleccion="",this.usuario="",this.clave="",this.message=""}ngOnInit(){}onLogin(){var E=this;return(0,Le.Z)(function*(){const{email:O,password:X}=E.loginForm.value;try{const Ve=yield E.authSvc.login(O,X);Ve&&(E.message="Bienvenido "+O,console.log("pagina 2"+JSON.stringify(Ve)),setTimeout(()=>{E.router.navigate(["/bienvenido"])},1e3))}catch(Ve){console.log("pagina error "+Ve.code),E.message=E.error.getError(Ve.code)}})()}onChange(E){switch(console.log(E),this.message="",E){case"admin":this.loginForm.setValue({email:"usuario@usuario.com",password:"123456"}),console.log(this.loginForm.value);break;case"fulanito":this.loginForm.setValue({email:"mail@hola.com",password:"clave123"})}}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(R.e),p.Y36(Z.F0),p.Y36(Nn))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-login"]],decls:32,vars:5,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control",3,"value"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"value"],["type","submit",1,"fill","btn-lg","btn-block"],[1,"form-group","mt-3"],["routerLink","/registro",1,"button"],["for","usuarios"],["value","seleccione","okText","Seleccionar","name","usuarios","cancelText","Cancelar",1,"form-control",3,"ngModel","ngModelChange","change"],["value","admin"],["value","fulanito"]],template:function(E,O){1&E&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),p._uU(5,"Login"),p.qZA(),p.TgZ(6,"form",5),p.NdJ("ngSubmit",function(){return O.onLogin()}),p.TgZ(7,"H2"),p._uU(8),p.qZA(),p.TgZ(9,"div",6)(10,"label",7),p._uU(11,"Email"),p.qZA(),p._UZ(12,"input",8),p.qZA(),p.TgZ(13,"div",6)(14,"label",9),p._uU(15,"Clave"),p.qZA(),p._UZ(16,"input",10),p.qZA(),p.TgZ(17,"button",11),p._uU(18,"Ingresar"),p.qZA()(),p.TgZ(19,"div",12)(20,"p"),p._uU(21,"\xbfNo tienes una cuenta? "),p.TgZ(22,"a",13),p._uU(23,"Registro de usuario"),p.qZA()()(),p.TgZ(24,"div",12)(25,"label",14),p._uU(26,"Seleccione usuario "),p.qZA(),p.TgZ(27,"select",15),p.NdJ("ngModelChange",function(Ve){return O.seleccion=Ve})("change",function(){return O.onChange(O.seleccion)}),p.TgZ(28,"option",16),p._uU(29,"admin"),p.qZA(),p.TgZ(30,"option",17),p._uU(31,"Fulanito"),p.qZA()()()()()()()),2&E&&(p.xp6(6),p.Q6J("formGroup",O.loginForm),p.xp6(2),p.Oqu(O.message),p.xp6(4),p.s9C("value",O.usuario),p.xp6(4),p.s9C("value",O.clave),p.xp6(11),p.Q6J("ngModel",O.seleccion))},dependencies:[Z.yS,Bs,Se,sn,ie,Hr,nn,vn,Hs,Ii,Po],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}']}),_})()},{path:"bienvenido",component:ve},{path:"quiensoy",component:(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-quiensoy"]],decls:42,vars:0,consts:[[1,"row"],["id","quiwn",1,"col-md-6","text-center"],[1,"margin"],["href","https://github.com/Vaninaquezada/SalaDeJuegos/tree/master","target","_blank"],[1,"fa","fa-github"],["src","./assets/imagenes/quiensoy.jpg","alt","Bird","width","350","height","350",1,"img-responsive","img-circle","margin",2,"display","inline"],["id","que",1,"col-md-6","text-center"],["src","./assets/imagenes/grilla1.png",1,"juego"],["src","./assets/imagenes/Flecha_tesela.svg",1,"flecha"],["src","./assets/imagenes/grilla2.png",1,"juego"],["id","donde",1,"container-fluid","bg-3","text-center"],[1,"col-sm-4"],["src","./assets/imagenes/quiensoy1.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy2.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy3.png","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],[1,"container-fluid","bg-4","text-center"],["href","https://www.blablabla.com.ar"]],template:function(E,O){1&E&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),p._uU(3,"\xbfQui\xe9n Soy?"),p.qZA(),p.TgZ(4,"a",3),p._uU(5,"en GitHub "),p._UZ(6,"i",4),p.qZA(),p.TgZ(7,"p"),p._uU(8,"Vanina Quezada"),p.qZA(),p._UZ(9,"img",5),p.TgZ(10,"h3"),p._uU(11,"Soy Un alumno de la UTN FRA, Vanina Quezada"),p.qZA()(),p.TgZ(12,"div",6)(13,"h2",2),p._uU(14,"Juego: Rompecabezas de numeros"),p.qZA(),p.TgZ(15,"p"),p._uU(16,"El objetivo del juego es mover los casilleros de manera tal que los n\xfameros queden ordenados del 1 al 8, quedando el casillero vac\xedo \xfaltimo."),p.qZA(),p._UZ(17,"img",7)(18,"img",8)(19,"img",9),p.qZA()(),p.TgZ(20,"div",10)(21,"h3",2),p._uU(22,"\xbfD\xf3nde Funciona?"),p.qZA(),p._UZ(23,"br"),p.TgZ(24,"div",0)(25,"div",11),p._UZ(26,"img",12),p.TgZ(27,"p"),p._uU(28,"Con las tecnologias WEB que permiten desarrollar aplicaciones multiplataforma"),p.qZA()(),p.TgZ(29,"div",11),p._UZ(30,"img",13),p.TgZ(31,"p"),p._uU(32,"Principalmente orientada a la experiencia del usuario, garantizando que su funcionamieto sea fluido y pensado en el comportamiento del usuario y en la funcionalidad."),p.qZA()(),p.TgZ(33,"div",11),p._UZ(34,"img",14),p.TgZ(35,"p"),p._uU(36,"Para los sistemas operativos lideres en el mercado del consumo masivo"),p.qZA()()()(),p.TgZ(37,"footer",15)(38,"p"),p._uU(39,"Modificado por "),p.TgZ(40,"a",16),p._uU(41,"https://www.blablabla.com.ar"),p.qZA()()())},styles:[".imagenDeQuienSoy[_ngcontent-%COMP%]{width:400px;height:250px}body[_ngcontent-%COMP%]{font:20px Montserrat,sans-serif;line-height:1.8;color:#f5f6f7}p[_ngcontent-%COMP%]{font-size:16px}.margin[_ngcontent-%COMP%]{margin-bottom:45px}.bg-1[_ngcontent-%COMP%]{background-color:#1abc9c;color:#fff}.bg-2[_ngcontent-%COMP%]{background-color:#474e5d;color:#fff}.bg-3[_ngcontent-%COMP%]{background-color:#fff;color:#555}.bg-4[_ngcontent-%COMP%]{background-color:#3a0447;color:#fff;height:20%}.container-fluid[_ngcontent-%COMP%]{padding-top:70px;padding-bottom:70px}.navbar[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border:0;border-radius:0;margin-bottom:0;font-size:12px;letter-spacing:5px}.navbar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1abc9c!important}nav[_ngcontent-%COMP%]{display:flex;background-color:#0e3aff;color:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{background-color:#f3f3f3;border:solid;border-radius:25px;border-color:#328afd;color:#fff}a[_ngcontent-%COMP%]{color:#fff}.row[_ngcontent-%COMP%]{background-color:#ace7ff;padding:30px;color:#fff}#que[_ngcontent-%COMP%]{margin-top:60px}.juego[_ngcontent-%COMP%]{height:250px}.flecha[_ngcontent-%COMP%]{height:80px;margin:15px}"]}),_})()},{path:"registro",component:(()=>{class _{constructor(E,O){this.authSvc=E,this.router=O,this.registerForm=new Pe({email:new _i("",[bt.required,bt.email]),password:new _i("",[bt.required,bt.minLength(6)]),passwordR:new _i("",[bt.required,bt.minLength(6)])})}ngOnInit(){}onRegister(){var E=this;return(0,Le.Z)(function*(){const{email:O,password:X}=E.registerForm.value;try{(yield E.authSvc.registro(O,X))&&E.router.navigate(["/bienvenido"])}catch{}})()}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(R.e),p.Y36(Z.F0))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-registro"]],decls:26,vars:1,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control"],["for","password"],["type","password","formControlName","password",1,"form-control"],["for","passwordR"],["type","password","formControlName","passwordR",1,"form-control"],["type","submit",1,"fill","btn-primary","btn-lg","btn-block"],[1,"form-group","mt-3"],["routerLink","/",1,"button"]],template:function(E,O){1&E&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),p._uU(5,"Registro de Usuario"),p.qZA(),p.TgZ(6,"form",5),p.NdJ("ngSubmit",function(){return O.onRegister()}),p.TgZ(7,"div",6)(8,"label",7),p._uU(9,"Email"),p.qZA(),p._UZ(10,"input",8),p.qZA(),p.TgZ(11,"div",6)(12,"label",9),p._uU(13,"Clave"),p.qZA(),p._UZ(14,"input",10),p.qZA(),p.TgZ(15,"div",6)(16,"label",11),p._uU(17,"Repetir clave"),p.qZA(),p._UZ(18,"input",12),p.qZA(),p.TgZ(19,"button",13),p._uU(20,"Registrar"),p.qZA()(),p.TgZ(21,"div",14)(22,"p"),p._uU(23,"\xbfYa tienes una cuenta? "),p.TgZ(24,"a",15),p._uU(25,"Login"),p.qZA()()()()()()()),2&E&&(p.xp6(6),p.Q6J("formGroup",O.registerForm))},dependencies:[Z.yS,Bs,ie,nn,vn,Hs,Ii],styles:['.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0px;left:0px}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}']}),_})()},{path:"error",component:Q},{path:"encuesta",component:U},{path:"listados",component:Tt},{path:"juegos",loadChildren:()=>Promise.resolve().then(j.bind(j,880)).then(_=>_.JuegosModule),canActivate:[(()=>{class _{canActivate(E,O){return!0}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()]}];let jr=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[Z.Bz.forRoot(hi),Z.Bz]}),_})();function ui(_,v){1&_&&(p.TgZ(0,"li",10),p._UZ(1,"span",14),p.qZA())}function lo(_,v){if(1&_){const E=p.EpF();p.TgZ(0,"li",10)(1,"a",15),p.NdJ("click",function(){p.CHM(E);const X=p.oxw(2);return p.KtG(X.logOut())}),p._uU(2,"Logout"),p.qZA()()}}function Lr(_,v){if(1&_&&(p.TgZ(0,"ul",7)(1,"li",8)(2,"a",9),p._uU(3,"Home "),p.qZA()(),p.TgZ(4,"li",10)(5,"a",11),p._uU(6,"\xbfQuien Soy?"),p.qZA()(),p.TgZ(7,"li",10)(8,"a",12),p._uU(9,"Juegos"),p.qZA()(),p.YNc(10,ui,2,0,"li",13),p.YNc(11,lo,3,0,"li",13),p.qZA()),2&_){const E=p.oxw();p.xp6(10),p.Q6J("ngIf",E.user),p.xp6(1),p.Q6J("ngIf",E.user)}}function Wr(_,v){1&_&&(p.TgZ(0,"ul",7)(1,"li",10)(2,"a",16),p._uU(3,"Login"),p.qZA()(),p.TgZ(4,"li",10)(5,"a",17),p._uU(6,"Registro"),p.qZA()()())}let ss=(()=>{class _{constructor(E,O){this.authSvc=E,this.router=O}ngOnInit(){this.user=this.authSvc.getUsuarioFire()}logOut(){var E=this;return(0,Le.Z)(function*(){try{yield E.authSvc.logout(),E.router.navigate(["/"])}catch(O){console.log(O)}})()}}return _.\u0275fac=function(E){return new(E||_)(p.Y36(R.e),p.Y36(Z.F0))},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-menu"]],decls:9,vars:2,consts:[[1,"rosa","navbar","navbar-expand-lg"],["routerLink","/bienvenido",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarColor02","aria-controls","navbarColor02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor02",1,"collapse","navbar-collapse"],["class","navbar-nav mr-auto",4,"ngIf","ngIfElse"],["login",""],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","/bienvenido",1,"nav-link"],[1,"nav-item"],["routerLink","/quiensoy",1,"nav-link"],["routerLink","/juegos",1,"nav-link"],["class","nav-item",4,"ngIf"],[1,"nav-link"],[1,"nav-link",3,"click"],["routerLink","/",1,"nav-link"],["routerLink","/registro",1,"nav-link"]],template:function(E,O){if(1&E&&(p.TgZ(0,"nav",0)(1,"a",1),p._uU(2,"Sala de Juegos"),p.qZA(),p.TgZ(3,"button",2),p._UZ(4,"span",3),p.qZA(),p.TgZ(5,"div",4),p.YNc(6,Lr,12,2,"ul",5),p.YNc(7,Wr,7,0,"ng-template",null,6,p.W1O),p.qZA()()),2&E){const X=p.MAs(8);p.xp6(6),p.Q6J("ngIf",null!==O.user)("ngIfElse",X)}},dependencies:[je.O5,Z.yS],styles:[".rosa[_ngcontent-%COMP%]{background-color:#ffbfcf}.navbar-brand[_ngcontent-%COMP%]{margin-left:20px}"]}),_})(),Mi=(()=>{class _{constructor(){this.title="salaJuegos"}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["app-root"]],decls:2,vars:0,template:function(E,O){1&E&&p._UZ(0,"app-menu")(1,"router-outlet")},dependencies:[Z.lC,ss]}),_})();var fi=j(3692);const Xs_firebase={projectId:"tplab4-45942",appId:"1:544089026720:web:12140e7d4d8c437ea759c5",databaseURL:"https://tplab4-45942.firebaseio.com",storageBucket:"tplab4-45942.appspot.com",locationId:"us-central",apiKey:"AIzaSyDaDxkZHkwvJy0N7o_DVcmMXIx_6vPSZ7I",authDomain:"tplab4-45942.firebaseapp.com",messagingSenderId:"544089026720"};var qt=j(7667),ur=j(4215),Qi=j(5867),Oa=j(7128),Dn=j(6551);class Xn{constructor(v){return v}}const Ru="database",Kt=new p.OlP("angularfire2.database-instances");function Nu(_){return(v,E)=>{const O=v.runOutsideAngular(()=>_(E));return new Xn(O)}}const wl={provide:class cn{constructor(){return(0,ur.vb)(Ru)}},deps:[[new p.FiY,Kt]]},fa={provide:Xn,useFactory:function Ui(_,v){const E=(0,ur.JM)(Ru,_,v);return E&&new Xn(E)},deps:[[new p.FiY,Kt],fi.Ot]};let Vl=(()=>{class _{constructor(){(0,Qi.KN)("angularfire",ur.q4.full,"rtdb")}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({providers:[fa,wl]}),_})();function Qo(_,...v){return{ngModule:Vl,providers:[{provide:Kt,useFactory:Nu(_),multi:!0,deps:[p.R0b,p.zs3,ur.HU,fi.z6,[new p.FiY,qt.dh],[new p.FiY,Oa.nm],...v]}]}}const Qa=(0,ur.u3)(Dn.N8,!0);var si=j(3266),qs=j(9681),os=j(2090),pr=j(4859);const Ns="functions";class gu{constructor(v,E,O){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=v.getImmediate({optional:!0}),this.messaging=E.getImmediate({optional:!0}),this.auth||v.get().then(X=>this.auth=X,()=>{}),this.messaging||E.get().then(X=>this.messaging=X,()=>{}),this.appCheck||O.get().then(X=>this.appCheck=X,()=>{})}getAuthToken(){var v=this;return(0,Le.Z)(function*(){if(v.auth)try{return(yield v.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var v=this;return(0,Le.Z)(function*(){if(v.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield v.messaging.getToken()}catch{return}})()}getAppCheckToken(){var v=this;return(0,Le.Z)(function*(){if(v.appCheck){const E=yield v.appCheck.getToken();return E.error?null:E.token}return null})()}getContext(){var v=this;return(0,Le.Z)(function*(){return{authToken:yield v.getAuthToken(),messagingToken:yield v.getMessagingToken(),appCheckToken:yield v.getAppCheckToken()}})()}}const Xo="us-central1";class Is{constructor(v,E,O,X,Ve=Xo,Pt){this.app=v,this.fetchImpl=Pt,this.emulatorOrigin=null,this.contextProvider=new gu(E,O,X),this.cancelAllRequests=new Promise(mn=>{this.deleteService=()=>Promise.resolve(mn())});try{const mn=new URL(Ve);this.customDomain=mn.origin,this.region=Xo}catch{this.customDomain=null,this.region=Ve}}_delete(){return this.deleteService()}_url(v){const E=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${E}/${this.region}/${v}`:null!==this.customDomain?`${this.customDomain}/${v}`:`https://${this.region}-${E}.cloudfunctions.net/${v}`}}const Y="@firebase/functions";function pn(_=(0,qs.getApp)(),v=Xo){return(0,qs._getProvider)((0,os.m9)(_),Ns).getImmediate({identifier:v})}!function lr(_,v){(0,qs._registerComponent)(new pr.wA(Ns,(O,{instanceIdentifier:X})=>{const Ve=O.getProvider("app").getImmediate(),Pt=O.getProvider("auth-internal"),mn=O.getProvider("messaging-internal"),Sn=O.getProvider("app-check-internal");return new Is(Ve,Pt,mn,Sn,X,_)},"PUBLIC").setMultipleInstances(!0)),(0,qs.registerVersion)(Y,"0.8.4",v),(0,qs.registerVersion)(Y,"0.8.4","esm2017")}(fetch.bind(self));class ps{constructor(v){return v}}const Os="functions",ea=new p.OlP("angularfire2.functions-instances");function gs(_){return(v,E)=>{const O=v.runOutsideAngular(()=>_(E));return new ps(O)}}const $i={provide:class tu{constructor(){return(0,ur.vb)(Os)}},deps:[[new p.FiY,ea]]},pi={provide:ps,useFactory:function ru(_,v){const E=(0,ur.JM)(Os,_,v);return E&&new ps(E)},deps:[[new p.FiY,ea],fi.Ot]};let $l=(()=>{class _{constructor(){(0,Qi.KN)("angularfire",ur.q4.full,"fn")}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({providers:[pi,$i]}),_})();function Il(_,...v){return{ngModule:$l,providers:[{provide:ea,useFactory:gs(_),multi:!0,deps:[p.R0b,p.zs3,ur.HU,fi.z6,[new p.FiY,qt.dh],[new p.FiY,Oa.nm],...v]}]}}const mu=(0,ur.u3)(pn,!0);var ta=j(2375);class To{constructor(v){return v}}const Ni="messaging",wa=new p.OlP("angularfire2.messaging-instances");function Gl(_){return(v,E)=>{if(!ur.n1.sync())return null;const O=v.runOutsideAngular(()=>_(E));return new To(O)}}const Lu={provide:class Hl{constructor(){return(0,ur.vb)(Ni)}},deps:[[new p.FiY,wa]]},zl={provide:To,useFactory:function vu(_,v){if(!ur.n1.sync())return null;const E=(0,ur.JM)(Ni,_,v);return E&&new To(E)},deps:[[new p.FiY,wa],fi.Ot]};let Eu=(()=>{class _{constructor(){(0,Qi.KN)("angularfire",ur.q4.full,"fcm")}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({providers:[zl,Lu,{provide:p.ip1,useValue:ur.n1.async,multi:!0}]}),_})();function co(_,...v){return{ngModule:Eu,providers:[{provide:wa,useFactory:Gl(_),multi:!0,deps:[p.R0b,p.zs3,ur.HU,fi.z6,...v]}]}}const Uu=(0,ur.u3)(ta.KL,!0),Cu="firebasestorage.googleapis.com";class Pi extends os.ZR{constructor(v,E){super(Iu(v),`Firebase Storage: ${E} (${Iu(v)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pi.prototype)}_codeEquals(v){return Iu(v)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(v){this.customData.serverResponse=v,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Iu(_){return"storage/"+_}function rl(_){return new Pi("invalid-argument",_)}function Dl(){return new Pi("app-deleted","The Firebase app was deleted.")}class bs{constructor(v,E){this.bucket=v,this.path_=E}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const v=encodeURIComponent;return"/b/"+v(this.bucket)+"/o/"+v(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(v,E){let O;try{O=bs.makeFromUrl(v,E)}catch{return new bs(v,"")}if(""===O.path)return O;throw function Tu(_){return new Pi("invalid-default-bucket","Invalid default bucket '"+_+"'.")}(v)}static makeFromUrl(v,E){let O=null;const X="([A-Za-z0-9.\\-_]+)",mn=new RegExp("^gs://"+X+"(/(.*))?$","i");function Cr(so){so.path_=decodeURIComponent(so.path)}const gi=E.replace(/[.]/g,"\\."),Ds=[{regex:mn,indices:{bucket:1,path:3},postModify:function Ve(so){"/"===so.path.charAt(so.path.length-1)&&(so.path_=so.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${gi}/v[A-Za-z0-9_]+/b/${X}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Cr},{regex:new RegExp(`^https?://${E===Cu?"(?:storage.googleapis.com|storage.cloud.google.com)":E}/${X}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Cr}];for(let so=0;so<Ds.length;so++){const sc=Ds[so],Ol=sc.regex.exec(v);if(Ol){let Qc=Ol[sc.indices.path];Qc||(Qc=""),O=new bs(Ol[sc.indices.bucket],Qc),sc.postModify(O);break}}if(null==O)throw function Zs(_){return new Pi("invalid-url","Invalid URL '"+_+"'.")}(v);return O}}class Ha{constructor(v){this.promise_=Promise.reject(v)}getPromise(){return this.promise_}cancel(v=!1){}}function sl(_,v,E,O){if(O<v)throw rl(`Invalid value for '${_}'. Expected ${v} or greater.`);if(O>E)throw rl(`Invalid value for '${_}'. Expected ${E} or less.`)}var m=(()=>{return(_=m||(m={}))[_.NO_ERROR=0]="NO_ERROR",_[_.NETWORK_ERROR=1]="NETWORK_ERROR",_[_.ABORT=2]="ABORT",m;var _})();class w{constructor(v,E,O,X,Ve,Pt,mn,Sn,Cr,ni,gi){this.url_=v,this.method_=E,this.headers_=O,this.body_=X,this.successCodes_=Ve,this.additionalRetryCodes_=Pt,this.callback_=mn,this.errorCallback_=Sn,this.timeout_=Cr,this.progressCallback_=ni,this.connectionFactory_=gi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((es,aa)=>{this.resolve_=es,this.reject_=aa,this.start_()})}start_(){const E=(O,X)=>{const Ve=this.resolve_,Pt=this.reject_,mn=X.connection;if(X.wasSuccessCode)try{const Sn=this.callback_(mn,mn.getResponse());!function $u(_){return void 0!==_}(Sn)?Ve():Ve(Sn)}catch(Sn){Pt(Sn)}else if(null!==mn){const Sn=function Do(){return new Pi("unknown","An unknown error occurred, please check the error payload for server response.")}();Sn.serverResponse=mn.getErrorText(),Pt(this.errorCallback_?this.errorCallback_(mn,Sn):Sn)}else Pt(X.canceled?this.appDelete_?Dl():function bu(){return new Pi("canceled","User canceled the upload/download.")}():function $a(){return new Pi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?E(0,new N(!1,null,!0)):this.backoffId_=function Bu(_,v,E){let O=1,X=null,Ve=null,Pt=!1,mn=0;function Sn(){return 2===mn}let Cr=!1;function ni(...Fs){Cr||(Cr=!0,v.apply(null,Fs))}function gi(Fs){X=setTimeout(()=>{X=null,_(aa,Sn())},Fs)}function es(){Ve&&clearTimeout(Ve)}function aa(Fs,...ml){if(Cr)return void es();if(Fs)return es(),void ni.call(null,Fs,...ml);if(Sn()||Pt)return es(),void ni.call(null,Fs,...ml);let Ds;O<64&&(O*=2),1===mn?(mn=2,Ds=0):Ds=1e3*(O+Math.random()),gi(Ds)}let po=!1;function ua(Fs){po||(po=!0,es(),!Cr&&(null!==X?(Fs||(mn=2),clearTimeout(X),gi(0)):Fs||(mn=1)))}return gi(0),Ve=setTimeout(()=>{Pt=!0,ua(!0)},E),ua}((O,X)=>{if(X)return void O(!1,new N(!1,null,!0));const Ve=this.connectionFactory_();this.pendingConnection_=Ve;const Pt=mn=>{null!==this.progressCallback_&&this.progressCallback_(mn.loaded,mn.lengthComputable?mn.total:-1)};null!==this.progressCallback_&&Ve.addUploadProgressListener(Pt),Ve.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ve.removeUploadProgressListener(Pt),this.pendingConnection_=null;const mn=Ve.getErrorCode()===m.NO_ERROR,Sn=Ve.getStatus();if(!mn||this.isRetryStatusCode_(Sn)){const ni=Ve.getErrorCode()===m.ABORT;return void O(!1,new N(!1,null,ni))}const Cr=-1!==this.successCodes_.indexOf(Sn);O(!0,new N(Cr,Ve))})},E,this.timeout_)}getPromise(){return this.promise_}cancel(v){this.canceled_=!0,this.appDelete_=v||!1,null!==this.backoffId_&&function ju(_){_(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(v){const E=v>=500&&v<600,X=-1!==[408,429].indexOf(v),Ve=-1!==this.additionalRetryCodes_.indexOf(v);return E||X||Ve}}class N{constructor(v,E,O){this.wasSuccessCode=v,this.connection=E,this.canceled=!!O}}class fo{constructor(v,E){this._service=v,this._location=E instanceof bs?E:bs.makeFromUrl(E,v.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(v,E){return new fo(v,E)}get root(){const v=new bs(this._location.bucket,"");return this._newRef(this._service,v)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function Ia(_){const v=_.lastIndexOf("/",_.length-2);return-1===v?_:_.slice(v+1)}(this._location.path)}get storage(){return this._service}get parent(){const v=function ms(_){if(0===_.length)return null;const v=_.lastIndexOf("/");return-1===v?"":_.slice(0,v)}(this._location.path);if(null===v)return null;const E=new bs(this._location.bucket,v);return new fo(this._service,E)}_throwIfRoot(v){if(""===this._location.path)throw function Su(_){return new Pi("invalid-root-operation","The operation '"+_+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(v)}}function Tc(_,v){const E=v?.storageBucket;return null==E?null:bs.makeFromBucketSpec(E,_)}class Ed{constructor(v,E,O,X,Ve){this.app=v,this._authProvider=E,this._appCheckProvider=O,this._url=X,this._firebaseVersion=Ve,this._bucket=null,this._host=Cu,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=X?bs.makeFromBucketSpec(X,this._host):Tc(this._host,this.app.options)}get host(){return this._host}set host(v){this._host=v,this._bucket=null!=this._url?bs.makeFromBucketSpec(this._url,v):Tc(v,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(v){sl("time",0,Number.POSITIVE_INFINITY,v),this._maxUploadRetryTime=v}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(v){sl("time",0,Number.POSITIVE_INFINITY,v),this._maxOperationRetryTime=v}_getAuthToken(){var v=this;return(0,Le.Z)(function*(){if(v._overrideAuthToken)return v._overrideAuthToken;const E=v._authProvider.getImmediate({optional:!0});if(E){const O=yield E.getToken();if(null!==O)return O.accessToken}return null})()}_getAppCheckToken(){var v=this;return(0,Le.Z)(function*(){const E=v._appCheckProvider.getImmediate({optional:!0});return E?(yield E.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(v=>v.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(v){return new fo(this,v)}_makeRequest(v,E,O,X){if(this._deleted)return new Ha(Dl());{const Ve=function gn(_,v,E,O,X,Ve){const Pt=function A(_){const v=encodeURIComponent;let E="?";for(const O in _)_.hasOwnProperty(O)&&(E=E+(v(O)+"=")+v(_[O])+"&");return E=E.slice(0,-1),E}(_.urlParams),mn=_.url+Pt,Sn=Object.assign({},_.headers);return function rt(_,v){v&&(_["X-Firebase-GMPID"]=v)}(Sn,v),function K(_,v){null!==v&&v.length>0&&(_.Authorization="Firebase "+v)}(Sn,E),function ue(_,v){_["X-Firebase-Storage-Version"]="webjs/"+(v??"AppManager")}(Sn,Ve),function Lt(_,v){null!==v&&(_["X-Firebase-AppCheck"]=v)}(Sn,O),new w(mn,_.method,Sn,_.body,_.successCodes,_.additionalRetryCodes,_.handler,_.errorHandler,_.timeout,_.progressCallback,X)}(v,this._appId,O,X,E,this._firebaseVersion);return this._requests.add(Ve),Ve.getPromise().then(()=>this._requests.delete(Ve),()=>this._requests.delete(Ve)),Ve}}makeRequestWithTokens(v,E){var O=this;return(0,Le.Z)(function*(){const[X,Ve]=yield Promise.all([O._getAuthToken(),O._getAppCheckToken()]);return O._makeRequest(v,E,X,Ve).getPromise()})()}}const h="@firebase/storage",c="0.9.9",l="storage";function Qr(_=(0,qs.getApp)(),v){return _=(0,os.m9)(_),(0,qs._getProvider)(_,l).getImmediate({identifier:v})}function tc(_,{instanceIdentifier:v}){const E=_.getProvider("app").getImmediate(),O=_.getProvider("auth-internal"),X=_.getProvider("app-check-internal");return new Ed(E,O,X,v,qs.SDK_VERSION)}!function wd(){(0,qs._registerComponent)(new pr.wA(l,tc,"PUBLIC").setMultipleInstances(!0)),(0,qs.registerVersion)(h,c,""),(0,qs.registerVersion)(h,c,"esm2017")}();class Xd{constructor(v){return v}}const eh="storage",nc=new p.OlP("angularfire2.storage-instances");function Gf(_){return(v,E)=>{const O=v.runOutsideAngular(()=>_(E));return new Xd(O)}}const th={provide:class Hh{constructor(){return(0,ur.vb)(eh)}},deps:[[new p.FiY,nc]]},zf={provide:Xd,useFactory:function rc(_,v){const E=(0,ur.JM)(eh,_,v);return E&&new Xd(E)},deps:[[new p.FiY,nc],fi.Ot]};let qf=(()=>{class _{constructor(){(0,Qi.KN)("angularfire",ur.q4.full,"gcs")}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({providers:[zf,th]}),_})();function oa(_,...v){return{ngModule:qf,providers:[{provide:nc,useFactory:Gf(_),multi:!0,deps:[p.R0b,p.zs3,ur.HU,fi.z6,[new p.FiY,qt.dh],[new p.FiY,Oa.nm],...v]}]}}const zh=(0,ur.u3)(Qr,!0);var Id=j(529),gl=j(880),zu=j(2011);let Pl=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=p.oAB({type:_,bootstrap:[Mi]}),_.\u0275inj=p.cJS({imports:[C.b2,jr,zu.hO.initializeApp(Xs_firebase),(0,fi.hX)(()=>(0,fi.ZF)(Xs_firebase)),(0,qt.AR)(()=>(0,qt.v0)()),Qo(()=>Qa()),(0,si.Cm)(()=>(0,si.ad)()),Il(()=>mu()),co(()=>Uu()),oa(()=>zh()),Z.Bz,Sa,ls,gl.JuegosModule,Id.JF]}),_})();(0,p.G48)(),C.q6().bootstrapModule(Pl).catch(_=>console.error(_))},5867:(an,ot,j)=>{j.d(ot,{C6:()=>C.getApps,KN:()=>C.registerVersion,Mq:()=>C.getApp,ZF:()=>C.initializeApp});var C=j(9681);(0,C.registerVersion)("firebase","9.10.0","app")},127:(an,ot,j)=>{j.d(ot,{Z:()=>C.Z});var C=j(3942);C.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(an,ot,j)=>{j.r(ot);var C=j(5861),p=j(3942),Z=j(7143),R=j(2090),je=(j(9681),j(1877),j(4859));function we(){return window}function he(){return(he=(0,C.Z)(function*(Je,Ae,Fe){var vt;const{BuildInfo:Bt}=we();(0,Z.aq)(Ae.sessionId,"AuthEvent did not contain a session ID");const _n=yield et(Ae.sessionId),bn={};return(0,Z.ar)()?bn.ibi=Bt.packageName:(0,Z.as)()?bn.apn=Bt.packageName:(0,Z.at)(Je,"operation-not-supported-in-this-environment"),Bt.displayName&&(bn.appDisplayName=Bt.displayName),bn.sessionId=_n,(0,Z.au)(Je,Fe,Ae.type,void 0,null!==(vt=Ae.eventId)&&void 0!==vt?vt:void 0,bn)})).apply(this,arguments)}function dt(){return(dt=(0,C.Z)(function*(Je){const{BuildInfo:Ae}=we(),Fe={};(0,Z.ar)()?Fe.iosBundleId=Ae.packageName:(0,Z.as)()?Fe.androidPackageName=Ae.packageName:(0,Z.at)(Je,"operation-not-supported-in-this-environment"),yield(0,Z.av)(Je,Fe)})).apply(this,arguments)}function Ft(){return(Ft=(0,C.Z)(function*(Je,Ae,Fe){const{cordova:vt}=we();let Bt=()=>{};try{yield new Promise((_n,bn)=>{let Ee=null;function pe(){var pt;_n();const Jt=null===(pt=vt.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Jt&&Jt(),"function"==typeof Fe?.close&&Fe.close()}function de(){Ee||(Ee=window.setTimeout(()=>{bn((0,Z.aw)(Je,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===document?.visibilityState&&de()}Ae.addPassiveListener(pe),document.addEventListener("resume",de,!1),(0,Z.as)()&&document.addEventListener("visibilitychange",Xe,!1),Bt=()=>{Ae.removePassiveListener(pe),document.removeEventListener("resume",de,!1),document.removeEventListener("visibilitychange",Xe,!1),Ee&&window.clearTimeout(Ee)}})}finally{Bt()}})).apply(this,arguments)}function et(Je){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,C.Z)(function*(Je){const Ae=$t(Je),Fe=yield crypto.subtle.digest("SHA-256",Ae);return Array.from(new Uint8Array(Fe)).map(Bt=>Bt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $t(Je){if((0,Z.aq)(/[0-9a-zA-Z]+/.test(Je),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Je);const Ae=new ArrayBuffer(Je.length),Fe=new Uint8Array(Ae);for(let vt=0;vt<Je.length;vt++)Fe[vt]=Je.charCodeAt(vt);return Fe}class lt extends Z.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Ae=>{this.resolveInialized=Ae})}addPassiveListener(Ae){this.passiveListeners.add(Ae)}removePassiveListener(Ae){this.passiveListeners.delete(Ae)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Ae){return this.resolveInialized(),this.passiveListeners.forEach(Fe=>Fe(Ae)),super.onEvent(Ae)}initialized(){var Ae=this;return(0,C.Z)(function*(){yield Ae.initPromise})()}}function ee(Je){return ie.apply(this,arguments)}function ie(){return(ie=(0,C.Z)(function*(Je){const Ae=yield Ue()._get($e(Je));return Ae&&(yield Ue()._remove($e(Je))),Ae})).apply(this,arguments)}function Ne(){const Je=[],Ae="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Fe=0;Fe<20;Fe++){const vt=Math.floor(Math.random()*Ae.length);Je.push(Ae.charAt(vt))}return Je.join("")}function Ue(){return(0,Z.ay)(Z.b)}function $e(Je){return(0,Z.az)("authEvent",Je.config.apiKey,Je.name)}function bt(Je){if(!Je?.includes("?"))return{};const[Ae,...Fe]=Je.split("?");return(0,R.zd)(Fe.join("?"))}function Mt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,Z.aw)("no-auth-event")}}function Vn(){var Je;return(null===(Je=self?.location)||void 0===Je?void 0:Je.protocol)||null}function er(Je=(0,R.z$)()){return!("file:"!==Vn()&&"ionic:"!==Vn()&&"capacitor:"!==Vn()||!Je.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mr(){try{const Je=self.localStorage,Ae=Z.aI();if(Je)return Je.setItem(Ae,"1"),Je.removeItem(Ae),!function ar(Je=(0,R.z$)()){return function Dr(){return(0,R.w1)()&&11===document?.documentMode}()||function cr(Je=(0,R.z$)()){return/Edge\/\d+/.test(Je)}(Je)}()||(0,R.hl)()}catch{return ln()&&(0,R.hl)()}return!1}function ln(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function fn(){return"http:"===Vn()||"https:"===Vn()}()||(0,R.ru)()||er())&&!function hr(){return(0,R.b$)()||(0,R.UG)()}()&&Mr()&&!ln()}function Pr(){return er()&&typeof document<"u"}function Xt(){return(Xt=(0,C.Z)(function*(){return!!Pr()&&new Promise(Je=>{const Ae=setTimeout(()=>{Je(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Ae),Je(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},Zn=Z.ax,fr="persistence";function Er(Je){return tt.apply(this,arguments)}function tt(){return(tt=(0,C.Z)(function*(Je){yield Je._initializationPromise;const Ae=_e(),Fe=Z.az(fr,Je.config.apiKey,Je.name);Ae&&Ae.setItem(Fe,Je._getPersistence())})).apply(this,arguments)}function _e(){var Je;try{return(null===(Je=function dr(){return typeof window<"u"?window:null}())||void 0===Je?void 0:Je.sessionStorage)||null}catch{return null}}const ft=Z.ax;class gt{constructor(){this.browserResolver=Z.ay(Z.k),this.cordovaResolver=Z.ay(class wn{constructor(){this._redirectPersistence=Z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Z.aB,this._overrideRedirectResult=Z.aC}_initialize(Ae){var Fe=this;return(0,C.Z)(function*(){const vt=Ae._key();let Bt=Fe.eventManagers.get(vt);return Bt||(Bt=new lt(Ae),Fe.eventManagers.set(vt,Bt),Fe.attachCallbackListeners(Ae,Bt)),Bt})()}_openPopup(Ae){(0,Z.at)(Ae,"operation-not-supported-in-this-environment")}_openRedirect(Ae,Fe,vt,Bt){var _n=this;return(0,C.Z)(function*(){!function it(Je){var Ae,Fe,vt,Bt,_n,bn,Ee,pe,de,Xe;const pt=we();(0,Z.ax)("function"==typeof(null===(Ae=pt?.universalLinks)||void 0===Ae?void 0:Ae.subscribe),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,Z.ax)(typeof(null===(Fe=pt?.BuildInfo)||void 0===Fe?void 0:Fe.packageName)<"u",Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,Z.ax)("function"==typeof(null===(_n=null===(Bt=null===(vt=pt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===_n?void 0:_n.openUrl),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Z.ax)("function"==typeof(null===(pe=null===(Ee=null===(bn=pt?.cordova)||void 0===bn?void 0:bn.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===pe?void 0:pe.isAvailable),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Z.ax)("function"==typeof(null===(Xe=null===(de=pt?.cordova)||void 0===de?void 0:de.InAppBrowser)||void 0===Xe?void 0:Xe.open),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Ae);const bn=yield _n._initialize(Ae);yield bn.initialized(),bn.resetRedirect(),(0,Z.aD)(),yield _n._originValidation(Ae);const Ee=function Ge(Je,Ae,Fe=null){return{type:Ae,eventId:Fe,urlResponse:null,sessionId:Ne(),postBody:null,tenantId:Je.tenantId,error:(0,Z.aw)(Je,"no-auth-event")}}(Ae,vt,Bt);yield function ct(Je,Ae){return Ue()._set($e(Je),Ae)}(Ae,Ee);const pe=yield function re(Je,Ae,Fe){return he.apply(this,arguments)}(Ae,Ee,Fe),de=yield function ht(Je){const{cordova:Ae}=we();return new Promise(Fe=>{Ae.plugins.browsertab.isAvailable(vt=>{let Bt=null;vt?Ae.plugins.browsertab.openUrl(Je):Bt=Ae.InAppBrowser.open(Je,(0,Z.ap)()?"_blank":"_system","location=yes"),Fe(Bt)})})}(pe);return function at(Je,Ae,Fe){return Ft.apply(this,arguments)}(Ae,bn,de)})()}_isIframeWebStorageSupported(Ae,Fe){throw new Error("Method not implemented.")}_originValidation(Ae){const Fe=Ae._key();return this.originValidationPromises[Fe]||(this.originValidationPromises[Fe]=function Ce(Je){return dt.apply(this,arguments)}(Ae)),this.originValidationPromises[Fe]}attachCallbackListeners(Ae,Fe){const{universalLinks:vt,handleOpenURL:Bt,BuildInfo:_n}=we(),bn=setTimeout((0,C.Z)(function*(){yield ee(Ae),Fe.onEvent(Mt())}),500),Ee=function(){var Xe=(0,C.Z)(function*(pt){clearTimeout(bn);const Jt=yield ee(Ae);let Pe=null;Jt&&pt?.url&&(Pe=function Ze(Je,Ae){var Fe,vt;const Bt=function Rt(Je){const Ae=bt(Je),Fe=Ae.link?decodeURIComponent(Ae.link):void 0,vt=bt(Fe).link,Bt=Ae.deep_link_id?decodeURIComponent(Ae.deep_link_id):void 0;return bt(Bt).link||Bt||vt||Fe||Je}(Ae);if(Bt.includes("/__/auth/callback")){const _n=bt(Bt),bn=_n.firebaseError?function Ke(Je){try{return JSON.parse(Je)}catch{return null}}(decodeURIComponent(_n.firebaseError)):null,Ee=null===(vt=null===(Fe=bn?.code)||void 0===Fe?void 0:Fe.split("auth/"))||void 0===vt?void 0:vt[1],pe=Ee?(0,Z.aw)(Ee):null;return pe?{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,error:pe,urlResponse:null,sessionId:null,postBody:null}:{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,sessionId:Je.sessionId,urlResponse:Bt,postBody:null}}return null}(Jt,pt.url)),Fe.onEvent(Pe||Mt())});return function(Jt){return Xe.apply(this,arguments)}}();typeof vt<"u"&&"function"==typeof vt.subscribe&&vt.subscribe(null,Ee);const pe=Bt,de=`${_n.packageName.toLowerCase()}://`;we().handleOpenURL=function(){var Xe=(0,C.Z)(function*(pt){if(pt.toLowerCase().startsWith(de)&&Ee({url:pt}),"function"==typeof pe)try{pe(pt)}catch(Jt){console.error(Jt)}});return function(pt){return Xe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Z.a,this._completeRedirectFn=Z.aB,this._overrideRedirectResult=Z.aC}_initialize(Ae){var Fe=this;return(0,C.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._initialize(Ae)})()}_openPopup(Ae,Fe,vt,Bt){var _n=this;return(0,C.Z)(function*(){return yield _n.selectUnderlyingResolver(),_n.assertedUnderlyingResolver._openPopup(Ae,Fe,vt,Bt)})()}_openRedirect(Ae,Fe,vt,Bt){var _n=this;return(0,C.Z)(function*(){return yield _n.selectUnderlyingResolver(),_n.assertedUnderlyingResolver._openRedirect(Ae,Fe,vt,Bt)})()}_isIframeWebStorageSupported(Ae,Fe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Ae,Fe)}_originValidation(Ae){return this.assertedUnderlyingResolver._originValidation(Ae)}get _shouldInitProactively(){return Pr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Ae=this;return(0,C.Z)(function*(){if(Ae.underlyingResolver)return;const Fe=yield function mr(){return Xt.apply(this,arguments)}();Ae.underlyingResolver=Fe?Ae.cordovaResolver:Ae.browserResolver})()}}function nn(Je){return Je.unwrap()}function Hn(Je){return tr(Je)}function tr(Je){const{_tokenResponse:Ae}=Je instanceof R.ZR?Je.customData:Je;if(!Ae)return null;if(!(Je instanceof R.ZR)&&"temporaryProof"in Ae&&"phoneNumber"in Ae)return Z.P.credentialFromResult(Je);const Fe=Ae.providerId;if(!Fe||Fe===Z.o.PASSWORD)return null;let vt;switch(Fe){case Z.o.GOOGLE:vt=Z.Q;break;case Z.o.FACEBOOK:vt=Z.N;break;case Z.o.GITHUB:vt=Z.T;break;case Z.o.TWITTER:vt=Z.W;break;default:const{oauthIdToken:Bt,oauthAccessToken:_n,oauthTokenSecret:bn,pendingToken:Ee,nonce:pe}=Ae;return _n||bn||Bt||Ee?Ee?Fe.startsWith("saml.")?Z.aL._create(Fe,Ee):Z.J._fromParams({providerId:Fe,signInMethod:Fe,pendingToken:Ee,idToken:Bt,accessToken:_n}):new Z.U(Fe).credential({idToken:Bt,accessToken:_n,rawNonce:pe}):null}return Je instanceof R.ZR?vt.credentialFromError(Je):vt.credentialFromResult(Je)}function En(Je,Ae){return Ae.catch(Fe=>{throw Fe instanceof R.ZR&&function Ht(Je,Ae){var Fe,vt;const Bt=null===(Fe=Ae.customData)||void 0===Fe?void 0:Fe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(vt=Ae)||void 0===vt?void 0:vt.code))Ae.resolver=new De(Je,Z.an(Je,Ae));else if(Bt){const _n=tr(Ae),bn=Ae;_n&&(bn.credential=_n,bn.tenantId=Bt.tenantId||void 0,bn.email=Bt.email||void 0,bn.phoneNumber=Bt.phoneNumber||void 0)}}(Je,Fe),Fe}).then(Fe=>{const Bt=Fe.user;return{operationType:Fe.operationType,credential:Hn(Fe),additionalUserInfo:Z.al(Fe),user:le.getOrCreate(Bt)}})}function Rr(Je,Ae){return xn.apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(Je,Ae){const Fe=yield Ae;return{verificationId:Fe.verificationId,confirm:vt=>En(Je,Fe.confirm(vt))}})).apply(this,arguments)}class De{constructor(Ae,Fe){this.resolver=Fe,this.auth=function vn(Je){return Je.wrapped()}(Ae)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Ae){return En(nn(this.auth),this.resolver.resolveSignIn(Ae))}}class le{constructor(Ae){this._delegate=Ae,this.multiFactor=Z.ao(Ae)}static getOrCreate(Ae){return le.USER_MAP.has(Ae)||le.USER_MAP.set(Ae,new le(Ae)),le.USER_MAP.get(Ae)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Ae){return this._delegate.getIdTokenResult(Ae)}getIdToken(Ae){return this._delegate.getIdToken(Ae)}linkAndRetrieveDataWithCredential(Ae){return this.linkWithCredential(Ae)}linkWithCredential(Ae){var Fe=this;return(0,C.Z)(function*(){return En(Fe.auth,Z.Z(Fe._delegate,Ae))})()}linkWithPhoneNumber(Ae,Fe){var vt=this;return(0,C.Z)(function*(){return Rr(vt.auth,Z.l(vt._delegate,Ae,Fe))})()}linkWithPopup(Ae){var Fe=this;return(0,C.Z)(function*(){return En(Fe.auth,Z.d(Fe._delegate,Ae,gt))})()}linkWithRedirect(Ae){var Fe=this;return(0,C.Z)(function*(){return yield Er(Z.aE(Fe.auth)),Z.g(Fe._delegate,Ae,gt)})()}reauthenticateAndRetrieveDataWithCredential(Ae){return this.reauthenticateWithCredential(Ae)}reauthenticateWithCredential(Ae){var Fe=this;return(0,C.Z)(function*(){return En(Fe.auth,Z._(Fe._delegate,Ae))})()}reauthenticateWithPhoneNumber(Ae,Fe){return Rr(this.auth,Z.r(this._delegate,Ae,Fe))}reauthenticateWithPopup(Ae){return En(this.auth,Z.e(this._delegate,Ae,gt))}reauthenticateWithRedirect(Ae){var Fe=this;return(0,C.Z)(function*(){return yield Er(Z.aE(Fe.auth)),Z.h(Fe._delegate,Ae,gt)})()}sendEmailVerification(Ae){return Z.ab(this._delegate,Ae)}unlink(Ae){var Fe=this;return(0,C.Z)(function*(){return yield Z.ak(Fe._delegate,Ae),Fe})()}updateEmail(Ae){return Z.ag(this._delegate,Ae)}updatePassword(Ae){return Z.ah(this._delegate,Ae)}updatePhoneNumber(Ae){return Z.u(this._delegate,Ae)}updateProfile(Ae){return Z.af(this._delegate,Ae)}verifyBeforeUpdateEmail(Ae,Fe){return Z.ac(this._delegate,Ae,Fe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}le.USER_MAP=new WeakMap;const ce=Z.ax;let be=(()=>{class Je{constructor(Fe,vt){if(this.app=Fe,vt.isInitialized())return this._delegate=vt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Bt}=Fe.options;ce(Bt,"invalid-api-key",{appName:Fe.name}),ce(Bt,"invalid-api-key",{appName:Fe.name});const _n=typeof window<"u"?gt:void 0;this._delegate=vt.initialize({options:{persistence:yt(Bt,Fe.name),popupRedirectResolver:_n}}),this._delegate._updateErrorMap(Z.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?le.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Fe){this._delegate.languageCode=Fe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Fe){this._delegate.tenantId=Fe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Fe,vt){Z.G(this._delegate,Fe,vt)}applyActionCode(Fe){return Z.a2(this._delegate,Fe)}checkActionCode(Fe){return Z.a3(this._delegate,Fe)}confirmPasswordReset(Fe,vt){return Z.a1(this._delegate,Fe,vt)}createUserWithEmailAndPassword(Fe,vt){var Bt=this;return(0,C.Z)(function*(){return En(Bt._delegate,Z.a5(Bt._delegate,Fe,vt))})()}fetchProvidersForEmail(Fe){return this.fetchSignInMethodsForEmail(Fe)}fetchSignInMethodsForEmail(Fe){return Z.aa(this._delegate,Fe)}isSignInWithEmailLink(Fe){return Z.a8(this._delegate,Fe)}getRedirectResult(){var Fe=this;return(0,C.Z)(function*(){ce(qn(),Fe._delegate,"operation-not-supported-in-this-environment");const vt=yield Z.j(Fe._delegate,gt);return vt?En(Fe._delegate,Promise.resolve(vt)):{credential:null,user:null}})()}addFrameworkForLogging(Fe){!function tn(Je,Ae){(0,Z.aE)(Je)._logFramework(Ae)}(this._delegate,Fe)}onAuthStateChanged(Fe,vt,Bt){const{next:_n,error:bn,complete:Ee}=Ie(Fe,vt,Bt);return this._delegate.onAuthStateChanged(_n,bn,Ee)}onIdTokenChanged(Fe,vt,Bt){const{next:_n,error:bn,complete:Ee}=Ie(Fe,vt,Bt);return this._delegate.onIdTokenChanged(_n,bn,Ee)}sendSignInLinkToEmail(Fe,vt){return Z.a7(this._delegate,Fe,vt)}sendPasswordResetEmail(Fe,vt){return Z.a0(this._delegate,Fe,vt||void 0)}setPersistence(Fe){var vt=this;return(0,C.Z)(function*(){let Bt;switch(function oi(Je,Ae){Zn(Object.values(Yn).includes(Ae),Je,"invalid-persistence-type"),(0,R.b$)()?Zn(Ae!==Yn.SESSION,Je,"unsupported-persistence-type"):(0,R.UG)()?Zn(Ae===Yn.NONE,Je,"unsupported-persistence-type"):ln()?Zn(Ae===Yn.NONE||Ae===Yn.LOCAL&&(0,R.hl)(),Je,"unsupported-persistence-type"):Zn(Ae===Yn.NONE||Mr(),Je,"unsupported-persistence-type")}(vt._delegate,Fe),Fe){case Yn.SESSION:Bt=Z.a;break;case Yn.LOCAL:Bt=(yield Z.ay(Z.i)._isAvailable())?Z.i:Z.b;break;case Yn.NONE:Bt=Z.L;break;default:return Z.at("argument-error",{appName:vt._delegate.name})}return vt._delegate.setPersistence(Bt)})()}signInAndRetrieveDataWithCredential(Fe){return this.signInWithCredential(Fe)}signInAnonymously(){return En(this._delegate,Z.X(this._delegate))}signInWithCredential(Fe){return En(this._delegate,Z.Y(this._delegate,Fe))}signInWithCustomToken(Fe){return En(this._delegate,Z.$(this._delegate,Fe))}signInWithEmailAndPassword(Fe,vt){return En(this._delegate,Z.a6(this._delegate,Fe,vt))}signInWithEmailLink(Fe,vt){return En(this._delegate,Z.a9(this._delegate,Fe,vt))}signInWithPhoneNumber(Fe,vt){return Rr(this._delegate,Z.s(this._delegate,Fe,vt))}signInWithPopup(Fe){var vt=this;return(0,C.Z)(function*(){return ce(qn(),vt._delegate,"operation-not-supported-in-this-environment"),En(vt._delegate,Z.c(vt._delegate,Fe,gt))})()}signInWithRedirect(Fe){var vt=this;return(0,C.Z)(function*(){return ce(qn(),vt._delegate,"operation-not-supported-in-this-environment"),yield Er(vt._delegate),Z.f(vt._delegate,Fe,gt)})()}updateCurrentUser(Fe){return this._delegate.updateCurrentUser(Fe)}verifyPasswordResetCode(Fe){return Z.a4(this._delegate,Fe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Je.Persistence=Yn,Je})();function Ie(Je,Ae,Fe){let vt=Je;"function"!=typeof Je&&({next:vt,error:Ae,complete:Fe}=Je);const Bt=vt;return{next:bn=>Bt(bn&&le.getOrCreate(bn)),error:Ae,complete:Fe}}function yt(Je,Ae){const Fe=function me(Je,Ae){const Fe=_e();if(!Fe)return[];const vt=Z.az(fr,Je,Ae);switch(Fe.getItem(vt)){case Yn.NONE:return[Z.L];case Yn.LOCAL:return[Z.i,Z.a];case Yn.SESSION:return[Z.a];default:return[]}}(Je,Ae);if(typeof self<"u"&&!Fe.includes(Z.i)&&Fe.push(Z.i),typeof window<"u")for(const vt of[Z.b,Z.a])Fe.includes(vt)||Fe.push(vt);return Fe.includes(Z.L)||Fe.push(Z.L),Fe}class kt{constructor(){this.providerId="phone",this._delegate=new Z.P(nn(p.Z.auth()))}static credential(Ae,Fe){return Z.P.credential(Ae,Fe)}verifyPhoneNumber(Ae,Fe){return this._delegate.verifyPhoneNumber(Ae,Fe)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=Z.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=Z.P.PROVIDER_ID;const yn=Z.ax;class rr{constructor(Ae,Fe,vt=p.Z.app()){var Bt;yn(null===(Bt=vt.options)||void 0===Bt?void 0:Bt.apiKey,"invalid-api-key",{appName:vt.name}),this._delegate=new Z.R(Ae,Fe,vt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ir(Je){Je.INTERNAL.registerComponent(new je.wA("auth-compat",Ae=>{const Fe=Ae.getProvider("app-compat").getImmediate(),vt=Ae.getProvider("auth");return new be(Fe,vt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Z.A.EMAIL_SIGNIN,PASSWORD_RESET:Z.A.PASSWORD_RESET,RECOVER_EMAIL:Z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Z.A.VERIFY_EMAIL}},EmailAuthProvider:Z.M,FacebookAuthProvider:Z.N,GithubAuthProvider:Z.T,GoogleAuthProvider:Z.Q,OAuthProvider:Z.U,SAMLAuthProvider:Z.V,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:Z.m,RecaptchaVerifier:rr,TwitterAuthProvider:Z.W,Auth:be,AuthCredential:Z.H,Error:R.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Je.registerVersion("@firebase/auth-compat","0.2.20")}(p.Z)},6551:(an,ot,j)=>{j.d(ot,{N8:()=>Kd});var C=j(5861),p=j(9681),Z=j(4859),R=j(2090),ve=j(1877);const Le="@firebase/database";let we="";class re{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,l){null==l?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,R.Pz)(l))}get(c){const l=this.domStorage_.getItem(this.prefixedName_(c));return null==l?null:(0,R.cI)(l)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class he{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,l){null==l?delete this.cache_[c]:this.cache_[c]=l}get(c){return(0,R.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Ce=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const c=window[h];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new re(c)}}catch{}return new he},dt=Ce("localStorage"),ht=Ce("sessionStorage"),at=new ve.Yd("@firebase/database"),Ft=function(){let h=1;return function(){return h++}}(),it=function(h){const c=(0,R.dS)(h),l=new R.gQ;l.update(c);const y=l.digest();return R.US.encodeByteArray(y)},et=function(...h){let c="";for(let l=0;l<h.length;l++){const y=h[l];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?c+=et.apply(null,y):c+="object"==typeof y?(0,R.Pz)(y):y,c+=" "}return c};let Vt=null,$t=!0;const lt=function(...h){if(!0===$t&&($t=!1,null===Vt&&!0===ht.get("logging_enabled")&&function(h,c){(0,R.hu)(!c||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(at.logLevel=ve.in.VERBOSE,Vt=at.log.bind(at),c&&ht.set("logging_enabled",!0)):"function"==typeof h?Vt=h:(Vt=null,ht.remove("logging_enabled"))}(!0)),Vt){const c=et.apply(null,h);Vt(c)}},Ge=function(h){return function(...c){lt(h,...c)}},ct=function(...h){const c="FIREBASE INTERNAL ERROR: "+et(...h);at.error(c)},ee=function(...h){const c=`FIREBASE FATAL ERROR: ${et(...h)}`;throw at.error(c),new Error(c)},ie=function(...h){const c="FIREBASE WARNING: "+et(...h);at.warn(c)},Ne=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},$e="[MIN_NAME]",Ke="[MAX_NAME]",Rt=function(h,c){if(h===c)return 0;if(h===$e||c===Ke)return-1;if(c===$e||h===Ke)return 1;{const l=hr(h),y=hr(c);return null!==l?null!==y?l-y==0?h.length-c.length:l-y:-1:null!==y?1:h<c?-1:1}},bt=function(h,c){return h===c?0:h<c?-1:1},Yt=function(h,c){if(c&&h in c)return c[h];throw new Error("Missing required key ("+h+") in object: "+(0,R.Pz)(c))},wn=function(h){if("object"!=typeof h||null===h)return(0,R.Pz)(h);const c=[];for(const y in h)c.push(y);c.sort();let l="{";for(let y=0;y<c.length;y++)0!==y&&(l+=","),l+=(0,R.Pz)(c[y]),l+=":",l+=wn(h[c[y]]);return l+="}",l},An=function(h,c){const l=h.length;if(l<=c)return[h];const y=[];for(let x=0;x<l;x+=c)y.push(h.substring(x,x+c>l?l:x+c));return y};function Mt(h,c){for(const l in h)h.hasOwnProperty(l)&&c(l,h[l])}const tn=function(h){(0,R.hu)(!Ne(h),"Invalid JSON number");const y=1023;let x,V,H,ne,xe;0===h?(V=0,H=0,x=1/h==-1/0?1:0):(x=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(ne=Math.min(Math.floor(Math.log(h)/Math.LN2),y),V=ne+y,H=Math.round(h*Math.pow(2,52-ne)-Math.pow(2,52))):(V=0,H=Math.round(h/Math.pow(2,-1074))));const He=[];for(xe=52;xe;xe-=1)He.push(H%2?1:0),H=Math.floor(H/2);for(xe=11;xe;xe-=1)He.push(V%2?1:0),V=Math.floor(V/2);He.push(x?1:0),He.reverse();const At=He.join("");let xt="";for(xe=0;xe<64;xe+=8){let Ot=parseInt(At.substr(xe,8),2).toString(16);1===Ot.length&&(Ot="0"+Ot),xt+=Ot}return xt.toLowerCase()},Vn=new RegExp("^-?(0*)\\d{1,10}$"),hr=function(h){if(Vn.test(h)){const c=Number(h);if(c>=-2147483648&&c<=2147483647)return c}return null},Dr=function(h){try{h()}catch(c){setTimeout(()=>{throw ie("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},ar=function(h,c){const l=setTimeout(h,c);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Mr{constructor(c,l){this.appName_=c,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(y=>this.appCheck=y)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((l,y)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(l,y):l(null)},0)})}addTokenChangeListener(c){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(y=>y.addTokenListener(c))}notifyForInvalidToken(){ie(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ln{constructor(c,l,y){this.appName_=c,this.firebaseOptions_=l,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(x=>this.auth_=x)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(l=>l&&"auth/token-not-initialized"===l.code?(lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,y)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(l,y):l(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(l=>l.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(l=>l.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ie(c)}}let qn=(()=>{class h{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Zn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tt="websocket",me="long_polling";class _e{constructor(c,l,y,x,V=!1,H="",ne=!1){this.secure=l,this.namespace=y,this.webSocketOnly=x,this.nodeAdmin=V,this.persistenceKey=H,this.includeNamespaceInQueryParams=ne,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dt.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&dt.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gt(h,c,l){let y;if((0,R.hu)("string"==typeof c,"typeof type must == string"),(0,R.hu)("object"==typeof l,"typeof params must == object"),c===tt)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(c!==me)throw new Error("Unknown connection type: "+c);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function ft(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(l.ns=h.namespace);const x=[];return Mt(l,(V,H)=>{x.push(V+"="+H)}),y+x.join("&")}class nn{constructor(){this.counters_={}}incrementCounter(c,l=1){(0,R.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=l}get(){return(0,R.p$)(this.counters_)}}const vn={},Hn={};function Ht(h){const c=h.toString();return vn[c]||(vn[c]=new nn),vn[c]}class En{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,l){this.closeAfterResponse=c,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,l){for(this.pendingResponses[c]=l;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<y.length;++x)y[x]&&Dr(()=>{this.onMessage_(y[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bt{constructor(c,l,y,x,V,H,ne){this.connId=c,this.repoInfo=l,this.applicationId=y,this.appCheckToken=x,this.authToken=V,this.transportSessionId=H,this.lastSessionId=ne,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ge(c),this.stats_=Ht(l),this.urlFn=xe=>(this.appCheckToken&&(xe.ac=this.appCheckToken),gt(l,me,xe))}open(c,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new En(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,R.Yr)()||"complete"===document.readyState)h();else{let c=!1;const l=function(){document.body?c||(c=!0,h()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _n((...V)=>{const[H,ne,xe,He,At]=V;if(this.incrementIncomingBytes_(V),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===H)this.id=ne,this.password=xe;else{if("close"!==H)throw new Error("Unrecognized command received: "+H);ne?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ne,()=>{this.onClosed_()})):this.onClosed_()}},(...V)=>{const[H,ne]=V;this.incrementIncomingBytes_(V),this.myPacketOrderer.handleResponse(H,ne)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Zn.test(location.hostname)&&(y.r="f");const x=this.urlFn(y);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bt.forceAllow_=!0}static forceDisallow(){Bt.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!Bt.forceAllow_&&(Bt.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const l=(0,R.Pz)(c);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const y=(0,R.h$)(l),x=An(y,1840);for(let V=0;V<x.length;V++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[V]),this.curSegmentNum++}addDisconnectPingFrame(c,l){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=c,y.pw=l,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const l=(0,R.Pz)(c).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class _n{constructor(c,l,y,x){if(this.onDisconnect=y,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=c,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Ft(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=_n.createIFrame_();let V="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(V='<script>document.domain="'+document.domain+'";<\/script>');const H="<html><body>"+V+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(H),this.myIFrame.doc.close()}catch(ne){lt("frame writing exception"),ne.stack&&lt(ne.stack),lt(ne)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||lt("No IE domain setting required")}catch{const y=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,l){for(this.myID=c,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let l=this.urlFn(c),y="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const H=this.pendingSegs.shift();y=y+"&seg"+x+"="+H.seg+"&ts"+x+"="+H.ts+"&d"+x+"="+H.d,x++}return l+=y,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(c,l,y){this.pendingSegs.push({seg:c,ts:l,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(c,l){this.outstandingRequests.add(l);const y=()=>{this.outstandingRequests.delete(l),this.newRequest_()},x=setTimeout(y,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(x),y()})}addTag(c,l){(0,R.Yr)()?this.doNodeLongPoll(c,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=c,y.onload=y.onreadystatechange=function(){const x=y.readyState;(!x||"loaded"===x||"complete"===x)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),l())},y.onerror=()=>{lt("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let pe=null;typeof MozWebSocket<"u"?pe=MozWebSocket:typeof WebSocket<"u"&&(pe=WebSocket);let de=(()=>{class h{constructor(l,y,x,V,H,ne,xe){this.connId=l,this.applicationId=x,this.appCheckToken=V,this.authToken=H,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ge(this.connId),this.stats_=Ht(y),this.connURL=h.connectionURL_(y,ne,xe,V,x),this.nodeAdmin=y.nodeAdmin}static connectionURL_(l,y,x,V,H){const ne={v:"5"};return!(0,R.Yr)()&&typeof location<"u"&&location.hostname&&Zn.test(location.hostname)&&(ne.r="f"),y&&(ne.s=y),x&&(ne.ls=x),V&&(ne.ac=V),H&&(ne.p=H),gt(l,tt,ne)}open(l,y){this.onDisconnect=y,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dt.set("previous_websocket_failure",!0);try{let x;if((0,R.Yr)()){x={headers:{"User-Agent":`Firebase/5/${we}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const H=process.env,ne=0===this.connURL.indexOf("wss://")?H.HTTPS_PROXY||H.https_proxy:H.HTTP_PROXY||H.http_proxy;ne&&(x.proxy={origin:ne})}this.mySock=new pe(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const V=x.message||x.data;return V&&this.log_(V),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const V=x.message||x.data;V&&this.log_(V),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(l=!0)}return!l&&null!==pe&&!h.forceDisallow_}static previouslyFailed(){return dt.isInMemoryStorage||!0===dt.get("previous_websocket_failure")}markConnectionHealthy(){dt.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const x=(0,R.cI)(y);this.onMessage(x)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const y=Number(l);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const y=l.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const x=this.extractFrameCount_(y);null!==x&&this.appendFrame_(x)}}send(l){this.resetKeepAlive();const y=(0,R.Pz)(l);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const x=An(y,16384);x.length>1&&this.sendString_(String(x.length));for(let V=0;V<x.length;V++)this.sendString_(x[V])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Xe=(()=>{class h{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Bt,de]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const y=de&&de.isAvailable();let x=y&&!de.previouslyFailed();if(l.webSocketOnly&&(y||ie("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[de];else{const V=this.transports_=[];for(const H of h.ALL_TRANSPORTS)H&&H.isAvailable()&&V.push(H);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class wr{constructor(c,l,y,x,V,H,ne,xe,He,At){this.id=c,this.repoInfo_=l,this.applicationId_=y,this.appCheckToken_=x,this.authToken_=V,this.onMessage_=H,this.onReady_=ne,this.onDisconnect_=xe,this.onKill_=He,this.lastSessionId=At,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ge("c:"+this.id+":"),this.transportManager_=new Xe(l),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,y)},Math.floor(0));const x=c.healthyTimeout||0;x>0&&(this.healthyTimeout_=ar(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return l=>{c===this.conn_?this.onConnectionLost_(l):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return l=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(l):c===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const l=c.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const l=Yt("t",c),y=Yt("d",c);if("c"===l)this.onSecondaryControl_(y);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const l=Yt("t",c),y=Yt("d",c);"c"===l?this.onControl_(y):"d"===l&&this.onDataMessage_(y)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const l=Yt("t",c);if("d"in c){const y=c.d;if("h"===l)this.onHandshake_(y);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(y):"r"===l?this.onReset_(y):"e"===l?ct("Server Error: "+y):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ct("Unknown control packet command: "+l)}}onHandshake_(c){const l=c.ts,y=c.v,x=c.h;this.sessionId=c.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==y&&ie("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,y),ar(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,l){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ar(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zr{put(c,l,y,x){}merge(c,l,y,x){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,l,y){}onDisconnectMerge(c,l,y){}onDisconnectCancel(c,l){}reportStats(c){}}class ri{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,R.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...l){if(Array.isArray(this.listeners_[c])){const y=[...this.listeners_[c]];for(let x=0;x<y.length;x++)y[x].callback.apply(y[x].context,l)}}on(c,l,y){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:l,context:y});const x=this.getInitialEvent(c);x&&l.apply(y,x)}off(c,l,y){this.validateEventType_(c);const x=this.listeners_[c]||[];for(let V=0;V<x.length;V++)if(x[V].callback===l&&(!y||y===x[V].context))return void x.splice(V,1)}validateEventType_(c){(0,R.hu)(this.allowedEvents_.find(l=>l===c),"Unknown event: "+c)}}class ir extends ri{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ir}getInitialEvent(c){return(0,R.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class sr{constructor(c,l){if(void 0===l){this.pieces_=c.split("/");let y=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[y]=this.pieces_[x],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=l}toString(){let c="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(c+="/"+this.pieces_[l]);return c||"/"}}function or(){return new sr("")}function kn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function qe(h){return h.pieces_.length-h.pieceNum_}function ke(h){let c=h.pieceNum_;return c<h.pieces_.length&&c++,new sr(h.pieces_,c)}function nt(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Wt(h,c=0){return h.pieces_.slice(h.pieceNum_+c)}function dn(h){if(h.pieceNum_>=h.pieces_.length)return null;const c=[];for(let l=h.pieceNum_;l<h.pieces_.length-1;l++)c.push(h.pieces_[l]);return new sr(c,0)}function Mn(h,c){const l=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)l.push(h.pieces_[y]);if(c instanceof sr)for(let y=c.pieceNum_;y<c.pieces_.length;y++)l.push(c.pieces_[y]);else{const y=c.split("/");for(let x=0;x<y.length;x++)y[x].length>0&&l.push(y[x])}return new sr(l,0)}function Ln(h){return h.pieceNum_>=h.pieces_.length}function Bn(h,c){const l=kn(h),y=kn(c);if(null===l)return c;if(l===y)return Bn(ke(h),ke(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+h+")")}function rs(h,c){if(qe(h)!==qe(c))return!1;for(let l=h.pieceNum_,y=c.pieceNum_;l<=h.pieces_.length;l++,y++)if(h.pieces_[l]!==c.pieces_[y])return!1;return!0}function wi(h,c){let l=h.pieceNum_,y=c.pieceNum_;if(qe(h)>qe(c))return!1;for(;l<h.pieces_.length;){if(h.pieces_[l]!==c.pieces_[y])return!1;++l,++y}return!0}class _i{constructor(c,l){this.errorPrefix_=l,this.parts_=Wt(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,R.ug)(this.parts_[y]);Ki(this)}}function Ki(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+No(h))}function No(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Ss extends ri{constructor(){let c,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const y=!document[c];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new Ss}getInitialEvent(c){return(0,R.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const ba=1e3;let js,Bs=(()=>{class h extends zr{constructor(l,y,x,V,H,ne,xe,He){if(super(),this.repoInfo_=l,this.applicationId_=y,this.onDataUpdate_=x,this.onConnectStatus_=V,this.onServerInfoUpdate_=H,this.authTokenProvider_=ne,this.appCheckTokenProvider_=xe,this.authOverride_=He,this.id=h.nextPersistentConnectionId_++,this.log_=Ge("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ba,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,He&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ss.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&ir.getInstance().on("online",this.onOnline_,this)}sendRequest(l,y,x){const V=++this.requestNumber_,H={r:V,a:l,b:y};this.log_((0,R.Pz)(H)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),x&&(this.requestCBHash_[V]=x)}get(l){this.initConnection_();const y=new R.BH,x={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:ne=>{const xe=ne.d;"ok"===ne.s?y.resolve(xe):y.reject(xe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(l,y,x,V){this.initConnection_();const H=l._queryIdentifier,ne=l._path.toString();this.log_("Listen called for "+ne+" "+H),this.listens.has(ne)||this.listens.set(ne,new Map),(0,R.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(ne).has(H),"listen() called twice for same path/queryId.");const xe={onComplete:V,hashFn:y,query:l,tag:x};this.listens.get(ne).set(H,xe),this.connected_&&this.sendListen_(xe)}sendGet_(l){const y=this.outstandingGets_[l];this.sendRequest("g",y.request,x=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(x)})}sendListen_(l){const y=l.query,x=y._path.toString(),V=y._queryIdentifier;this.log_("Listen on "+x+" for "+V);const H={p:x};l.tag&&(H.q=y._queryObject,H.t=l.tag),H.h=l.hashFn(),this.sendRequest("q",H,xe=>{const He=xe.d,At=xe.s;h.warnOnListenWarnings_(He,y),(this.listens.get(x)&&this.listens.get(x).get(V))===l&&(this.log_("listen response",xe),"ok"!==At&&this.removeListen_(x,V),l.onComplete&&l.onComplete(At,He))})}static warnOnListenWarnings_(l,y){if(l&&"object"==typeof l&&(0,R.r3)(l,"w")){const x=(0,R.DV)(l,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const V='".indexOn": "'+y._queryParams.getIndex().toString()+'"',H=y._path.toString();ie(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${V} at ${H} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,R.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,y=(0,R.w9)(l)?"auth":"gauth",x={cred:l};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(y,x,V=>{const H=V.s,ne=V.d||"error";this.authToken_===l&&("ok"===H?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(H,ne))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const y=l.s,x=l.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,x)})}unlisten(l,y){const x=l._path.toString(),V=l._queryIdentifier;this.log_("Unlisten called for "+x+" "+V),(0,R.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,V)&&this.connected_&&this.sendUnlisten_(x,V,l._queryObject,y)}sendUnlisten_(l,y,x,V){this.log_("Unlisten on "+l+" for "+y);const H={p:l};V&&(H.q=x,H.t=V),this.sendRequest("n",H)}onDisconnectPut(l,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,y,x):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:y,onComplete:x})}onDisconnectMerge(l,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,y,x):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:y,onComplete:x})}onDisconnectCancel(l,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(l,y,x,V){const H={p:y,d:x};this.log_("onDisconnect "+l,H),this.sendRequest(l,H,ne=>{V&&setTimeout(()=>{V(ne.s,ne.d)},Math.floor(0))})}put(l,y,x,V){this.putInternal("p",l,y,x,V)}merge(l,y,x,V){this.putInternal("m",l,y,x,V)}putInternal(l,y,x,V,H){this.initConnection_();const ne={p:y,d:x};void 0!==H&&(ne.h=H),this.outstandingPuts_.push({action:l,request:ne,onComplete:V}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(l){const y=this.outstandingPuts_[l].action,x=this.outstandingPuts_[l].request,V=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(y,x,H=>{this.log_(y+" response",H),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),V&&V(H.s,H.d)})}reportStats(l){if(this.connected_){const y={c:l};this.log_("reportStats",y),this.sendRequest("s",y,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,R.Pz)(l));const y=l.r,x=this.requestCBHash_[y];x&&(delete this.requestCBHash_[y],x(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,y){this.log_("handleServerMessage",l,y),"d"===l?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===l?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===l?this.onListenRevoked_(y.p,y.q):"ac"===l?this.onAuthRevoked_(y.s,y.d):"apc"===l?this.onAppCheckRevoked_(y.s,y.d):"sd"===l?this.onSecurityDebugPacket_(y):ct("Unrecognized action received from server: "+(0,R.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ba),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-l);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,C.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const y=l.onDataMessage_.bind(l),x=l.onReady_.bind(l),V=l.onRealtimeDisconnect_.bind(l),H=l.id+":"+h.nextConnectionId_++,ne=l.lastSessionId;let xe=!1,He=null;const At=function(){He?He.close():(xe=!0,V())};l.realtime_={close:At,sendRequest:function(Cn){(0,R.hu)(He,"sendRequest call when we're not connected not allowed."),He.sendRequest(Cn)}};const Ot=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Cn,Wn]=yield Promise.all([l.authTokenProvider_.getToken(Ot),l.appCheckTokenProvider_.getToken(Ot)]);xe?lt("getToken() completed but was canceled"):(lt("getToken() completed. Creating connection."),l.authToken_=Cn&&Cn.accessToken,l.appCheckToken_=Wn&&Wn.token,He=new wr(H,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,y,x,V,Qr=>{ie(Qr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ne))}catch(Cn){l.log_("Failed to get token: "+Cn),xe||(l.repoInfo_.nodeAdmin&&ie(Cn),At())}}})()}interrupt(l){lt("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){lt("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const y=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const y=this.outstandingPuts_[l];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,y){let x;x=y?y.map(H=>wn(H)).join("$"):"default";const V=this.removeListen_(l,x);V&&V.onComplete&&V.onComplete("permission_denied")}removeListen_(l,y){const x=new sr(l).toString();let V;if(this.listens.has(x)){const H=this.listens.get(x);V=H.get(y),H.delete(y),0===H.size&&this.listens.delete(x)}else V=void 0;return V}onAuthRevoked_(l,y){lt("Auth token revoked: "+l+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,y){lt("App check token revoked: "+l+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const y of l.values())this.sendListen_(y);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let y="js";(0,R.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+y+"."+we.replace(/\./g,"-")]=1,(0,R.uI)()?l["framework.cordova"]=1:(0,R.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=ir.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&l}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class gr{constructor(c,l){this.name=c,this.node=l}static Wrap(c,l){return new gr(c,l)}}class is{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,l){const y=new gr($e,c),x=new gr($e,l);return 0!==this.compare(y,x)}minPost(){return gr.MIN}}class vo extends is{static get __EMPTY_NODE(){return js}static set __EMPTY_NODE(c){js=c}compare(c,l){return Rt(c.name,l.name)}isDefinedOn(c){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,l){return!1}minPost(){return gr.MIN}maxPost(){return new gr(Ke,js)}makePost(c,l){return(0,R.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new gr(c,js)}toString(){return".key"}}const Jr=new vo;class Vi{constructor(c,l,y,x,V=null){this.isReverse_=x,this.resultGenerator_=V,this.nodeStack_=[];let H=1;for(;!c.isEmpty();)if(H=l?y(c.key,l):1,x&&(H*=-1),H<0)c=this.isReverse_?c.left:c.right;else{if(0===H){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,c=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let $s,Di=(()=>{class h{constructor(l,y,x,V,H){this.key=l,this.value=y,this.color=x??h.RED,this.left=V??Ai.EMPTY_NODE,this.right=H??Ai.EMPTY_NODE}copy(l,y,x,V,H){return new h(l??this.key,y??this.value,x??this.color,V??this.left,H??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,y,x){let V=this;const H=x(l,V.key);return V=H<0?V.copy(null,null,null,V.left.insert(l,y,x),null):0===H?V.copy(null,y,null,null,null):V.copy(null,null,null,null,V.right.insert(l,y,x)),V.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ai.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,y){let x,V;if(x=this,y(l,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(l,y),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===y(l,x.key)){if(x.right.isEmpty())return Ai.EMPTY_NODE;V=x.right.min_(),x=x.copy(V.key,V.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(l,y))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,y)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Ai{constructor(c,l=Ai.EMPTY_NODE){this.comparator_=c,this.root_=l}insert(c,l){return new Ai(this.comparator_,this.root_.insert(c,l,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(c){return new Ai(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(c){let l,y=this.root_;for(;!y.isEmpty();){if(l=this.comparator_(c,y.key),0===l)return y.value;l<0?y=y.left:l>0&&(y=y.right)}return null}getPredecessorKey(c){let l,y=this.root_,x=null;for(;!y.isEmpty();){if(l=this.comparator_(c,y.key),0===l){if(y.left.isEmpty())return x?x.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}l<0?y=y.left:l>0&&(x=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new Vi(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,l){return new Vi(this.root_,c,this.comparator_,!1,l)}getReverseIteratorFrom(c,l){return new Vi(this.root_,c,this.comparator_,!0,l)}getReverseIterator(c){return new Vi(this.root_,null,this.comparator_,!0,c)}}function Sr(h,c){return Rt(h.name,c.name)}function oo(h,c){return Rt(h,c)}Ai.EMPTY_NODE=new class Si{copy(c,l,y,x,V){return this}insert(c,l,y){return new Di(c,l,null)}remove(c,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Hs=function(h){return"number"==typeof h?"number:"+tn(h):"string:"+h},Ws=function(h){if(h.isLeafNode()){const c=h.val();(0,R.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,R.r3)(c,".sv"),"Priority must be a string or number.")}else(0,R.hu)(h===$s||h.isEmpty(),"priority of unexpected type.");(0,R.hu)(h===$s||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Go,Oo,Ci,xi=(()=>{class h{constructor(l,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=y,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ws(this.priorityNode_)}static set __childrenNodeConstructor(l){Go=l}static get __childrenNodeConstructor(){return Go}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new h(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Ln(l)?this:".priority"===kn(l)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,y){return null}updateImmediateChild(l,y){return".priority"===l?this.updatePriority(y):y.isEmpty()&&".priority"!==l?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,y).updatePriority(this.priorityNode_)}updateChild(l,y){const x=kn(l);return null===x?y:y.isEmpty()&&".priority"!==x?this:((0,R.hu)(".priority"!==x||1===qe(l),".priority must be the last token in a path"),this.updateImmediateChild(x,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(l),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,y){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Hs(this.priorityNode_.val())+":");const y=typeof this.value_;l+=y+":",l+="number"===y?tn(this.value_):this.value_,this.lazyHash_=it(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===h.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof h.__childrenNodeConstructor?-1:((0,R.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const y=typeof l.value_,x=typeof this.value_,V=h.VALUE_TYPE_ORDER.indexOf(y),H=h.VALUE_TYPE_ORDER.indexOf(x);return(0,R.hu)(V>=0,"Unknown leaf type: "+y),(0,R.hu)(H>=0,"Unknown leaf type: "+x),V===H?"object"===x?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:H-V}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const y=l;return this.value_===y.value_&&this.priorityNode_.equals(y.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const ei=new class ko extends is{compare(c,l){const y=c.node.getPriority(),x=l.node.getPriority(),V=y.compareTo(x);return 0===V?Rt(c.name,l.name):V}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,l){return!c.getPriority().equals(l.getPriority())}minPost(){return gr.MIN}maxPost(){return new gr(Ke,new xi("[PRIORITY-POST]",Ci))}makePost(c,l){const y=Oo(c);return new gr(l,new xi("[PRIORITY-POST]",y))}toString(){return".priority"}},Da=Math.log(2);class Hr{constructor(c){this.count=parseInt(Math.log(c+1)/Da,10),this.current_=this.count-1;const x=(V=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&x}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Se=function(h,c,l,y){h.sort(c);const x=function(xe,He){const At=He-xe;let xt,Ot;if(0===At)return null;if(1===At)return xt=h[xe],Ot=l?l(xt):xt,new Di(Ot,xt.node,Di.BLACK,null,null);{const Cn=parseInt(At/2,10)+xe,Wn=x(xe,Cn),Qr=x(Cn+1,He);return xt=h[Cn],Ot=l?l(xt):xt,new Di(Ot,xt.node,Di.BLACK,Wn,Qr)}},ne=function(xe){let He=null,At=null,xt=h.length;const Ot=function(Wn,Qr){const io=xt-Wn,pl=xt;xt-=Wn;const ec=x(io+1,pl),tc=h[io],wd=l?l(tc):tc;Cn(new Di(wd,tc.node,Qr,null,ec))},Cn=function(Wn){He?(He.left=Wn,He=Wn):(At=Wn,He=Wn)};for(let Wn=0;Wn<xe.count;++Wn){const Qr=xe.nextBitIsOne(),io=Math.pow(2,xe.count-(Wn+1));Qr?Ot(io,Di.BLACK):(Ot(io,Di.BLACK),Ot(io,Di.RED))}return At}(new Hr(h.length));return new Ai(y||c,ne)};let ge;const We={};class st{constructor(c,l){this.indexes_=c,this.indexSet_=l}static get Default(){return(0,R.hu)(We&&ei,"ChildrenNode.ts has not been loaded"),ge=ge||new st({".priority":We},{".priority":ei}),ge}get(c){const l=(0,R.DV)(this.indexes_,c);if(!l)throw new Error("No index defined for "+c);return l instanceof Ai?l:null}hasIndex(c){return(0,R.r3)(this.indexSet_,c.toString())}addIndex(c,l){(0,R.hu)(c!==Jr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let x=!1;const V=l.getIterator(gr.Wrap);let ne,H=V.getNext();for(;H;)x=x||c.isDefinedOn(H.node),y.push(H),H=V.getNext();ne=x?Se(y,c.getCompare()):We;const xe=c.toString(),He=Object.assign({},this.indexSet_);He[xe]=c;const At=Object.assign({},this.indexes_);return At[xe]=ne,new st(At,He)}addToIndexes(c,l){const y=(0,R.UI)(this.indexes_,(x,V)=>{const H=(0,R.DV)(this.indexSet_,V);if((0,R.hu)(H,"Missing index implementation for "+V),x===We){if(H.isDefinedOn(c.node)){const ne=[],xe=l.getIterator(gr.Wrap);let He=xe.getNext();for(;He;)He.name!==c.name&&ne.push(He),He=xe.getNext();return ne.push(c),Se(ne,H.getCompare())}return We}{const ne=l.get(c.name);let xe=x;return ne&&(xe=xe.remove(new gr(c.name,ne))),xe.insert(c,c.node)}});return new st(y,this.indexSet_)}removeFromIndexes(c,l){const y=(0,R.UI)(this.indexes_,x=>{if(x===We)return x;{const V=l.get(c.name);return V?x.remove(new gr(c.name,V)):x}});return new st(y,this.indexSet_)}}let St,Ct=(()=>{class h{constructor(l,y,x){this.children_=l,this.priorityNode_=y,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Ws(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return St||(St=new h(new Ai(oo),null,st.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||St}updatePriority(l){return this.children_.isEmpty()?this:new h(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const y=this.children_.get(l);return null===y?St:y}}getChild(l){const y=kn(l);return null===y?this:this.getImmediateChild(y).getChild(ke(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,y){if((0,R.hu)(y,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(y);{const x=new gr(l,y);let V,H;y.isEmpty()?(V=this.children_.remove(l),H=this.indexMap_.removeFromIndexes(x,this.children_)):(V=this.children_.insert(l,y),H=this.indexMap_.addToIndexes(x,this.children_));const ne=V.isEmpty()?St:this.priorityNode_;return new h(V,ne,H)}}updateChild(l,y){const x=kn(l);if(null===x)return y;{(0,R.hu)(".priority"!==kn(l)||1===qe(l),".priority must be the last token in a path");const V=this.getImmediateChild(x).updateChild(ke(l),y);return this.updateImmediateChild(x,V)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const y={};let x=0,V=0,H=!0;if(this.forEachChild(ei,(ne,xe)=>{y[ne]=xe.val(l),x++,H&&h.INTEGER_REGEXP_.test(ne)?V=Math.max(V,Number(ne)):H=!1}),!l&&H&&V<2*x){const ne=[];for(const xe in y)ne[xe]=y[xe];return ne}return l&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Hs(this.getPriority().val())+":"),this.forEachChild(ei,(y,x)=>{const V=x.hash();""!==V&&(l+=":"+y+":"+V)}),this.lazyHash_=""===l?"":it(l)}return this.lazyHash_}getPredecessorChildName(l,y,x){const V=this.resolveIndex_(x);if(V){const H=V.getPredecessorKey(new gr(l,y));return H?H.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const y=this.resolveIndex_(l);if(y){const x=y.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(l){const y=this.getFirstChildName(l);return y?new gr(y,this.children_.get(y)):null}getLastChildName(l){const y=this.resolveIndex_(l);if(y){const x=y.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(l){const y=this.getLastChildName(l);return y?new gr(y,this.children_.get(y)):null}forEachChild(l,y){const x=this.resolveIndex_(l);return x?x.inorderTraversal(V=>y(V.name,V.node)):this.children_.inorderTraversal(y)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,y){const x=this.resolveIndex_(y);if(x)return x.getIteratorFrom(l,V=>V);{const V=this.children_.getIteratorFrom(l.name,gr.Wrap);let H=V.peek();for(;null!=H&&y.compare(H,l)<0;)V.getNext(),H=V.peek();return V}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,y){const x=this.resolveIndex_(y);if(x)return x.getReverseIteratorFrom(l,V=>V);{const V=this.children_.getReverseIteratorFrom(l.name,gr.Wrap);let H=V.peek();for(;null!=H&&y.compare(H,l)>0;)V.getNext(),H=V.peek();return V}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===un?-1:0}withIndex(l){if(l===Jr||this.indexMap_.hasIndex(l))return this;{const y=this.indexMap_.addIndex(l,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(l){return l===Jr||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const y=l;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const x=this.getIterator(ei),V=y.getIterator(ei);let H=x.getNext(),ne=V.getNext();for(;H&&ne;){if(H.name!==ne.name||!H.node.equals(ne.node))return!1;H=x.getNext(),ne=V.getNext()}return null===H&&null===ne}return!1}return!1}}resolveIndex_(l){return l===Jr?null:this.indexMap_.get(l.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const un=new class sn extends Ct{constructor(){super(new Ai(oo),Ct.EMPTY_NODE,st.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return Ct.EMPTY_NODE}isEmpty(){return!1}};function Rn(h,c=null){if(null===h)return Ct.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(c=h[".priority"]),(0,R.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new xi(h,Rn(c));if(h instanceof Array){let l=Ct.EMPTY_NODE;return Mt(h,(y,x)=>{if((0,R.r3)(h,y)&&"."!==y.substring(0,1)){const V=Rn(x);(V.isLeafNode()||!V.isEmpty())&&(l=l.updateImmediateChild(y,V))}}),l.updatePriority(Rn(c))}{const l=[];let y=!1;if(Mt(h,(H,ne)=>{if("."!==H.substring(0,1)){const xe=Rn(ne);xe.isEmpty()||(y=y||!xe.getPriority().isEmpty(),l.push(new gr(H,xe)))}}),0===l.length)return Ct.EMPTY_NODE;const V=Se(l,Sr,H=>H.name,oo);if(y){const H=Se(l,ei.getCompare());return new Ct(V,Rn(c),new st({".priority":H},{".priority":ei}))}return new Ct(V,Rn(c),st.Default)}}Object.defineProperties(gr,{MIN:{value:new gr($e,Ct.EMPTY_NODE)},MAX:{value:new gr(Ke,un)}}),vo.__EMPTY_NODE=Ct.EMPTY_NODE,xi.__childrenNodeConstructor=Ct,function Yi(h){$s=h}(un),function Ii(h){Ci=h}(un),function vs(h){Oo=h}(Rn);class kr extends is{constructor(c){super(),this.indexPath_=c,(0,R.hu)(!Ln(c)&&".priority"!==kn(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,l){const y=this.extractChild(c.node),x=this.extractChild(l.node),V=y.compareTo(x);return 0===V?Rt(c.name,l.name):V}makePost(c,l){const y=Rn(c),x=Ct.EMPTY_NODE.updateChild(this.indexPath_,y);return new gr(l,x)}maxPost(){const c=Ct.EMPTY_NODE.updateChild(this.indexPath_,un);return new gr(Ke,c)}toString(){return Wt(this.indexPath_,0).join("/")}}const bi=new class Zr extends is{compare(c,l){const y=c.node.compareTo(l.node);return 0===y?Rt(c.name,l.name):y}isDefinedOn(c){return!0}indexedValueChanged(c,l){return!c.equals(l)}minPost(){return gr.MIN}maxPost(){return gr.MAX}makePost(c,l){const y=Rn(c);return new gr(l,y)}toString(){return".value"}};function jt(h,c,l){return{type:"child_changed",snapshotNode:c,childName:h,oldSnap:l}}class Js{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ei}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$e}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ke}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ei}copy(){const c=new Js;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Li(h){const c={};if(h.isDefault())return c;let l;return h.index_===ei?l="$priority":h.index_===bi?l="$value":h.index_===Jr?l="$key":((0,R.hu)(h.index_ instanceof kr,"Unrecognized index type!"),l=h.index_.toString()),c.orderBy=(0,R.Pz)(l),h.startSet_&&(c.startAt=(0,R.Pz)(h.indexStartValue_),h.startNameSet_&&(c.startAt+=","+(0,R.Pz)(h.indexStartName_))),h.endSet_&&(c.endAt=(0,R.Pz)(h.indexEndValue_),h.endNameSet_&&(c.endAt+=","+(0,R.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?c.limitToFirst=h.limit_:c.limitToLast=h.limit_),c}function Gs(h){const c={};if(h.startSet_&&(c.sp=h.indexStartValue_,h.startNameSet_&&(c.sn=h.indexStartName_)),h.endSet_&&(c.ep=h.indexEndValue_,h.endNameSet_&&(c.en=h.indexEndName_)),h.limitSet_){c.l=h.limit_;let l=h.viewFrom_;""===l&&(l=h.isViewFromLeft()?"l":"r"),c.vf=l}return h.index_!==ei&&(c.i=h.index_.toString()),c}class uo extends zr{constructor(c,l,y,x){super(),this.repoInfo_=c,this.onDataUpdate_=l,this.authTokenProvider_=y,this.appCheckTokenProvider_=x,this.log_=Ge("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,l){return void 0!==l?"tag$"+l:((0,R.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,l,y,x){const V=c._path.toString();this.log_("Listen called for "+V+" "+c._queryIdentifier);const H=uo.getListenId_(c,y),ne={};this.listens_[H]=ne;const xe=Li(c._queryParams);this.restRequest_(V+".json",xe,(He,At)=>{let xt=At;if(404===He&&(xt=null,He=null),null===He&&this.onDataUpdate_(V,xt,!1,y),(0,R.DV)(this.listens_,H)===ne){let Ot;Ot=He?401===He?"permission_denied":"rest_error:"+He:"ok",x(Ot,null)}})}unlisten(c,l){const y=uo.getListenId_(c,l);delete this.listens_[y]}get(c){const l=Li(c._queryParams),y=c._path.toString(),x=new R.BH;return this.restRequest_(y+".json",l,(V,H)=>{let ne=H;404===V&&(ne=null,V=null),null===V?(this.onDataUpdate_(y,ne,!1,null),x.resolve(ne)):x.reject(new Error(ne))}),x.promise}refreshAuthToken(c){}restRequest_(c,l={},y){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,V])=>{x&&x.accessToken&&(l.auth=x.accessToken),V&&V.token&&(l.ac=V.token);const H=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,R.xO)(l);this.log_("Sending REST request for "+H);const ne=new XMLHttpRequest;ne.onreadystatechange=()=>{if(y&&4===ne.readyState){this.log_("REST Response for "+H+" received. status:",ne.status,"response:",ne.responseText);let xe=null;if(ne.status>=200&&ne.status<300){try{xe=(0,R.cI)(ne.responseText)}catch{ie("Failed to parse JSON response for "+H+": "+ne.responseText)}y(null,xe)}else 401!==ne.status&&404!==ne.status&&ie("Got unsuccessful REST response for "+H+" Status: "+ne.status),y(ne.status);y=null}},ne.open("GET",H,!0),ne.send()})}}class Ma{constructor(){this.rootNode_=Ct.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,l){this.rootNode_=this.rootNode_.updateChild(c,l)}}function Cs(){return{value:null,children:new Map}}function wo(h,c,l){if(Ln(c))h.value=l,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(c,l);else{const y=kn(c);h.children.has(y)||h.children.set(y,Cs()),wo(h.children.get(y),c=ke(c),l)}}function As(h,c,l){null!==h.value?l(c,h.value):function Ku(h,c){h.children.forEach((l,y)=>{c(y,l)})}(h,(y,x)=>{As(x,new sr(c.toString()+"/"+y),l)})}class Ra{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),l=Object.assign({},c);return this.last_&&Mt(this.last_,(y,x)=>{l[y]=l[y]-x}),this.last_=c,l}}class ha{constructor(c,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Ra(c);const y=1e4+2e4*Math.random();ar(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const c=this.statsListener_.get(),l={};let y=!1;Mt(c,(x,V)=>{V>0&&(0,R.r3)(this.statsToReport_,x)&&(l[x]=V,y=!0)}),y&&this.server_.reportStats(l),ar(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xs=(()=>{return(h=xs||(xs={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",xs;var h})();function Yo(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Pa{constructor(c,l,y){this.path=c,this.affectedTree=l,this.revert=y,this.type=xs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Ln(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new sr(c));return new Pa(or(),l,this.revert)}}return(0,R.hu)(kn(this.path)===c,"operationForChild called for unrelated child."),new Pa(ke(this.path),this.affectedTree,this.revert)}}class z{constructor(c,l,y){this.source=c,this.path=l,this.snap=y,this.type=xs.OVERWRITE}operationForChild(c){return Ln(this.path)?new z(this.source,or(),this.snap.getImmediateChild(c)):new z(this.source,ke(this.path),this.snap)}}class U{constructor(c,l,y){this.source=c,this.path=l,this.children=y,this.type=xs.MERGE}operationForChild(c){if(Ln(this.path)){const l=this.children.subtree(new sr(c));return l.isEmpty()?null:l.value?new z(this.source,or(),l.value):new U(this.source,or(),l)}return(0,R.hu)(kn(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new U(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Q{constructor(c,l,y){this.node_=c,this.fullyInitialized_=l,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Ln(c))return this.isFullyInitialized()&&!this.filtered_;const l=kn(c);return this.isCompleteForChild(l)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}function Tt(h,c,l,y,x,V){const H=y.filter(ne=>ne.type===l);H.sort((ne,xe)=>function Xr(h,c,l){if(null==c.childName||null==l.childName)throw(0,R.g5)("Should only compare child_ events.");const y=new gr(c.childName,c.snapshotNode),x=new gr(l.childName,l.snapshotNode);return h.index_.compare(y,x)}(h,ne,xe)),H.forEach(ne=>{const xe=function Nn(h,c,l){return"value"===c.type||"child_removed"===c.type||(c.prevName=l.getPredecessorChildName(c.childName,c.snapshotNode,h.index_)),c}(h,ne,V);x.forEach(He=>{He.respondsTo(ne.type)&&c.push(He.createEvent(xe,h.query_))})})}function Br(h,c){return{eventCache:h,serverCache:c}}function Kr(h,c,l,y){return Br(new Q(c,l,y),h.serverCache)}function Fr(h,c,l,y){return Br(h.eventCache,new Q(c,l,y))}function hi(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function jr(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let ui;class Lr{constructor(c,l=(()=>(ui||(ui=new Ai(bt)),ui))()){this.value=c,this.children=l}static fromObject(c){let l=new Lr(null);return Mt(c,(y,x)=>{l=l.set(new sr(y),x)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,l){if(null!=this.value&&l(this.value))return{path:or(),value:this.value};if(Ln(c))return null;{const y=kn(c),x=this.children.get(y);if(null!==x){const V=x.findRootMostMatchingPathAndValue(ke(c),l);return null!=V?{path:Mn(new sr(y),V.path),value:V.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Ln(c))return this;{const l=kn(c),y=this.children.get(l);return null!==y?y.subtree(ke(c)):new Lr(null)}}set(c,l){if(Ln(c))return new Lr(l,this.children);{const y=kn(c),V=(this.children.get(y)||new Lr(null)).set(ke(c),l),H=this.children.insert(y,V);return new Lr(this.value,H)}}remove(c){if(Ln(c))return this.children.isEmpty()?new Lr(null):new Lr(null,this.children);{const l=kn(c),y=this.children.get(l);if(y){const x=y.remove(ke(c));let V;return V=x.isEmpty()?this.children.remove(l):this.children.insert(l,x),null===this.value&&V.isEmpty()?new Lr(null):new Lr(this.value,V)}return this}}get(c){if(Ln(c))return this.value;{const l=kn(c),y=this.children.get(l);return y?y.get(ke(c)):null}}setTree(c,l){if(Ln(c))return l;{const y=kn(c),V=(this.children.get(y)||new Lr(null)).setTree(ke(c),l);let H;return H=V.isEmpty()?this.children.remove(y):this.children.insert(y,V),new Lr(this.value,H)}}fold(c){return this.fold_(or(),c)}fold_(c,l){const y={};return this.children.inorderTraversal((x,V)=>{y[x]=V.fold_(Mn(c,x),l)}),l(c,this.value,y)}findOnPath(c,l){return this.findOnPath_(c,or(),l)}findOnPath_(c,l,y){const x=!!this.value&&y(l,this.value);if(x)return x;if(Ln(c))return null;{const V=kn(c),H=this.children.get(V);return H?H.findOnPath_(ke(c),Mn(l,V),y):null}}foreachOnPath(c,l){return this.foreachOnPath_(c,or(),l)}foreachOnPath_(c,l,y){if(Ln(c))return this;{this.value&&y(l,this.value);const x=kn(c),V=this.children.get(x);return V?V.foreachOnPath_(ke(c),Mn(l,x),y):new Lr(null)}}foreach(c){this.foreach_(or(),c)}foreach_(c,l){this.children.inorderTraversal((y,x)=>{x.foreach_(Mn(c,y),l)}),this.value&&l(c,this.value)}foreachChild(c){this.children.inorderTraversal((l,y)=>{y.value&&c(l,y.value)})}}class Wr{constructor(c){this.writeTree_=c}static empty(){return new Wr(new Lr(null))}}function ss(h,c,l){if(Ln(c))return new Wr(new Lr(l));{const y=h.writeTree_.findRootMostValueAndPath(c);if(null!=y){const x=y.path;let V=y.value;const H=Bn(x,c);return V=V.updateChild(H,l),new Wr(h.writeTree_.set(x,V))}{const x=new Lr(l),V=h.writeTree_.setTree(c,x);return new Wr(V)}}}function Mi(h,c,l){let y=h;return Mt(l,(x,V)=>{y=ss(y,Mn(c,x),V)}),y}function fi(h,c){if(Ln(c))return Wr.empty();{const l=h.writeTree_.setTree(c,new Lr(null));return new Wr(l)}}function Xs(h,c){return null!=qt(h,c)}function qt(h,c){const l=h.writeTree_.findRootMostValueAndPath(c);return null!=l?h.writeTree_.get(l.path).getChild(Bn(l.path,c)):null}function ur(h){const c=[],l=h.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ei,(y,x)=>{c.push(new gr(y,x))}):h.writeTree_.children.inorderTraversal((y,x)=>{null!=x.value&&c.push(new gr(y,x.value))}),c}function Qi(h,c){if(Ln(c))return h;{const l=qt(h,c);return new Wr(null!=l?new Lr(l):h.writeTree_.subtree(c))}}function Oa(h){return h.writeTree_.isEmpty()}function Dn(h,c){return Xn(or(),h.writeTree_,c)}function Xn(h,c,l){if(null!=c.value)return l.updateChild(h,c.value);{let y=null;return c.children.inorderTraversal((x,V)=>{".priority"===x?((0,R.hu)(null!==V.value,"Priority writes must always be leaf nodes"),y=V.value):l=Xn(Mn(h,x),V,l)}),!l.getChild(h).isEmpty()&&null!==y&&(l=l.updateChild(Mn(h,".priority"),y)),l}}function Ru(h,c){return Fa(c,h)}function Nu(h,c){if(h.snap)return wi(h.path,c);for(const l in h.children)if(h.children.hasOwnProperty(l)&&wi(Mn(h.path,l),c))return!0;return!1}function fa(h){return h.visible}function Vl(h,c,l){let y=Wr.empty();for(let x=0;x<h.length;++x){const V=h[x];if(c(V)){const H=V.path;let ne;if(V.snap)wi(l,H)?(ne=Bn(l,H),y=ss(y,ne,V.snap)):wi(H,l)&&(ne=Bn(H,l),y=ss(y,or(),V.snap.getChild(ne)));else{if(!V.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(wi(l,H))ne=Bn(l,H),y=Mi(y,ne,V.children);else if(wi(H,l))if(ne=Bn(H,l),Ln(ne))y=Mi(y,or(),V.children);else{const xe=(0,R.DV)(V.children,kn(ne));if(xe){const He=xe.getChild(ke(ne));y=ss(y,or(),He)}}}}}return y}function Qo(h,c,l,y,x){if(y||x){const V=Qi(h.visibleWrites,c);return!x&&Oa(V)?l:x||null!=l||Xs(V,or())?Dn(Vl(h.allWrites,function(He){return(He.visible||x)&&(!y||!~y.indexOf(He.writeId))&&(wi(He.path,c)||wi(c,He.path))},c),l||Ct.EMPTY_NODE):null}{const V=qt(h.visibleWrites,c);if(null!=V)return V;{const H=Qi(h.visibleWrites,c);return Oa(H)?l:null!=l||Xs(H,or())?Dn(H,l||Ct.EMPTY_NODE):null}}}function $n(h,c,l,y){return Qo(h.writeTree,h.treePath,c,l,y)}function pa(h,c){return function Cl(h,c,l){let y=Ct.EMPTY_NODE;const x=qt(h.visibleWrites,c);if(x)return x.isLeafNode()||x.forEachChild(ei,(V,H)=>{y=y.updateImmediateChild(V,H)}),y;if(l){const V=Qi(h.visibleWrites,c);return l.forEachChild(ei,(H,ne)=>{const xe=Dn(Qi(V,new sr(H)),ne);y=y.updateImmediateChild(H,xe)}),ur(V).forEach(H=>{y=y.updateImmediateChild(H.name,H.node)}),y}return ur(Qi(h.visibleWrites,c)).forEach(H=>{y=y.updateImmediateChild(H.name,H.node)}),y}(h.writeTree,h.treePath,c)}function ka(h,c,l,y){return function Pu(h,c,l,y,x){(0,R.hu)(y||x,"Either existingEventSnap or existingServerSnap must exist");const V=Mn(c,l);if(Xs(h.visibleWrites,V))return null;{const H=Qi(h.visibleWrites,V);return Oa(H)?x.getChild(l):Dn(H,x.getChild(l))}}(h.writeTree,h.treePath,c,l,y)}function ci(h,c){return function hc(h,c){return qt(h.visibleWrites,c)}(h.writeTree,Mn(h.treePath,c))}function Lo(h,c,l){return function Yu(h,c,l,y){const x=Mn(c,l),V=qt(h.visibleWrites,x);return null!=V?V:y.isCompleteForChild(l)?Dn(Qi(h.visibleWrites,x),y.getNode().getImmediateChild(l)):null}(h.writeTree,h.treePath,c,l)}function $r(h,c){return Fa(Mn(h.treePath,c),h.writeTree)}function Fa(h,c){return{treePath:h,writeTree:c}}class Ri{constructor(){this.changeMap=new Map}trackChildChange(c){const l=c.type,y=c.childName;(0,R.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(y);if(x){const V=x.type;if("child_added"===l&&"child_removed"===V)this.changeMap.set(y,jt(y,c.snapshotNode,x.snapshotNode));else if("child_removed"===l&&"child_added"===V)this.changeMap.delete(y);else if("child_removed"===l&&"child_changed"===V)this.changeMap.set(y,function ii(h,c){return{type:"child_removed",snapshotNode:c,childName:h}}(y,x.oldSnap));else if("child_changed"===l&&"child_added"===V)this.changeMap.set(y,function Fi(h,c){return{type:"child_added",snapshotNode:c,childName:h}}(y,c.snapshotNode));else{if("child_changed"!==l||"child_changed"!==V)throw(0,R.g5)("Illegal combination of changes: "+c+" occurred after "+x);this.changeMap.set(y,jt(y,c.snapshotNode,x.oldSnap))}}else this.changeMap.set(y,c)}getChanges(){return Array.from(this.changeMap.values())}}const Uo=new class on{getCompleteChild(c){return null}getChildAfterChild(c,l,y){return null}};class Qa{constructor(c,l,y=null){this.writes_=c,this.viewCache_=l,this.optCompleteServerCache_=y}getCompleteChild(c){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(c))return l.getNode().getImmediateChild(c);{const y=null!=this.optCompleteServerCache_?new Q(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lo(this.writes_,c,y)}}getChildAfterChild(c,l,y){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jr(this.viewCache_),V=function nr(h,c,l,y,x,V){return function Gi(h,c,l,y,x,V,H){let ne;const xe=Qi(h.visibleWrites,c),He=qt(xe,or());if(null!=He)ne=He;else{if(null==l)return[];ne=Dn(xe,l)}if(ne=ne.withIndex(H),ne.isEmpty()||ne.isLeafNode())return[];{const At=[],xt=H.getCompare(),Ot=V?ne.getReverseIteratorFrom(y,H):ne.getIteratorFrom(y,H);let Cn=Ot.getNext();for(;Cn&&At.length<x;)0!==xt(Cn,y)&&At.push(Cn),Cn=Ot.getNext();return At}}(h.writeTree,h.treePath,c,l,y,x,V)}(this.writes_,x,l,1,y,c);return 0===V.length?null:V[0]}}function ma(h,c,l,y,x,V){const H=c.eventCache;if(null!=ci(y,l))return c;{let ne,xe;if(Ln(l))if((0,R.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const He=jr(c),xt=pa(y,He instanceof Ct?He:Ct.EMPTY_NODE);ne=h.filter.updateFullNode(c.eventCache.getNode(),xt,V)}else{const He=$n(y,jr(c));ne=h.filter.updateFullNode(c.eventCache.getNode(),He,V)}else{const He=kn(l);if(".priority"===He){(0,R.hu)(1===qe(l),"Can't have a priority with additional path components");const At=H.getNode();xe=c.serverCache.getNode();const xt=ka(y,l,At,xe);ne=null!=xt?h.filter.updatePriority(At,xt):H.getNode()}else{const At=ke(l);let xt;if(H.isCompleteForChild(He)){xe=c.serverCache.getNode();const Ot=ka(y,l,H.getNode(),xe);xt=null!=Ot?H.getNode().getImmediateChild(He).updateChild(At,Ot):H.getNode().getImmediateChild(He)}else xt=Lo(y,He,c.serverCache);ne=null!=xt?h.filter.updateChild(H.getNode(),He,xt,At,x,V):H.getNode()}}return Kr(c,ne,H.isFullyInitialized()||Ln(l),h.filter.filtersNodes())}}function Ja(h,c,l,y,x,V,H,ne){const xe=c.serverCache;let He;const At=H?h.filter:h.filter.getIndexedFilter();if(Ln(l))He=At.updateFullNode(xe.getNode(),y,null);else if(At.filtersNodes()&&!xe.isFiltered()){const Cn=xe.getNode().updateChild(l,y);He=At.updateFullNode(xe.getNode(),Cn,null)}else{const Cn=kn(l);if(!xe.isCompleteForPath(l)&&qe(l)>1)return c;const Wn=ke(l),io=xe.getNode().getImmediateChild(Cn).updateChild(Wn,y);He=".priority"===Cn?At.updatePriority(xe.getNode(),io):At.updateChild(xe.getNode(),Cn,io,Wn,Uo,null)}const xt=Fr(c,He,xe.isFullyInitialized()||Ln(l),At.filtersNodes());return ma(h,xt,l,x,new Qa(x,xt,V),ne)}function _a(h,c,l,y,x,V,H){const ne=c.eventCache;let xe,He;const At=new Qa(x,c,V);if(Ln(l))He=h.filter.updateFullNode(c.eventCache.getNode(),y,H),xe=Kr(c,He,!0,h.filter.filtersNodes());else{const xt=kn(l);if(".priority"===xt)He=h.filter.updatePriority(c.eventCache.getNode(),y),xe=Kr(c,He,ne.isFullyInitialized(),ne.isFiltered());else{const Ot=ke(l),Cn=ne.getNode().getImmediateChild(xt);let Wn;if(Ln(Ot))Wn=y;else{const Qr=At.getCompleteChild(xt);Wn=null!=Qr?".priority"===nt(Ot)&&Qr.getChild(dn(Ot)).isEmpty()?Qr:Qr.updateChild(Ot,y):Ct.EMPTY_NODE}xe=Cn.equals(Wn)?c:Kr(c,h.filter.updateChild(ne.getNode(),xt,Wn,Ot,At,H),ne.isFullyInitialized(),h.filter.filtersNodes())}}return xe}function zs(h,c){return h.eventCache.isCompleteForChild(c)}function fu(h,c,l){return l.foreach((y,x)=>{c=c.updateChild(y,x)}),c}function Ou(h,c,l,y,x,V,H,ne){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let He,xe=c;He=Ln(l)?y:new Lr(null).setTree(l,y);const At=c.serverCache.getNode();return He.children.inorderTraversal((xt,Ot)=>{if(At.hasChild(xt)){const Wn=fu(0,c.serverCache.getNode().getImmediateChild(xt),Ot);xe=Ja(h,xe,new sr(xt),Wn,x,V,H,ne)}}),He.children.inorderTraversal((xt,Ot)=>{const Cn=!c.serverCache.isCompleteForChild(xt)&&null===Ot.value;if(!At.hasChild(xt)&&!Cn){const Qr=fu(0,c.serverCache.getNode().getImmediateChild(xt),Ot);xe=Ja(h,xe,new sr(xt),Qr,x,V,H,ne)}}),xe}function pu(h,c){const l=jr(h.viewCache_);return l&&(h.query._queryParams.loadsAllData()||!Ln(c)&&!l.getImmediateChild(kn(c)).isEmpty())?l.getChild(c):null}function ai(h,c,l,y){c.type===xs.MERGE&&null!==c.source.queryId&&((0,R.hu)(jr(h.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(hi(h.viewCache_),"Missing event cache, even though we have a server cache"));const x=h.viewCache_,V=function Jo(h,c,l,y,x){const V=new Ri;let H,ne;if(l.type===xs.OVERWRITE){const He=l;He.source.fromUser?H=_a(h,c,He.path,He.snap,y,x,V):((0,R.hu)(He.source.fromServer,"Unknown source."),ne=He.source.tagged||c.serverCache.isFiltered()&&!Ln(He.path),H=Ja(h,c,He.path,He.snap,y,x,ne,V))}else if(l.type===xs.MERGE){const He=l;He.source.fromUser?H=function Ji(h,c,l,y,x,V,H){let ne=c;return y.foreach((xe,He)=>{const At=Mn(l,xe);zs(c,kn(At))&&(ne=_a(h,ne,At,He,x,V,H))}),y.foreach((xe,He)=>{const At=Mn(l,xe);zs(c,kn(At))||(ne=_a(h,ne,At,He,x,V,H))}),ne}(h,c,He.path,He.children,y,x,V):((0,R.hu)(He.source.fromServer,"Unknown source."),ne=He.source.tagged||c.serverCache.isFiltered(),H=Ou(h,c,He.path,He.children,y,x,ne,V))}else if(l.type===xs.ACK_USER_WRITE){const He=l;H=He.revert?function _t(h,c,l,y,x,V){let H;if(null!=ci(y,l))return c;{const ne=new Qa(y,c,x),xe=c.eventCache.getNode();let He;if(Ln(l)||".priority"===kn(l)){let At;if(c.serverCache.isFullyInitialized())At=$n(y,jr(c));else{const xt=c.serverCache.getNode();(0,R.hu)(xt instanceof Ct,"serverChildren would be complete if leaf node"),At=pa(y,xt)}He=h.filter.updateFullNode(xe,At,V)}else{const At=kn(l);let xt=Lo(y,At,c.serverCache);null==xt&&c.serverCache.isCompleteForChild(At)&&(xt=xe.getImmediateChild(At)),He=null!=xt?h.filter.updateChild(xe,At,xt,ke(l),ne,V):c.eventCache.getNode().hasChild(At)?h.filter.updateChild(xe,At,Ct.EMPTY_NODE,ke(l),ne,V):xe,He.isEmpty()&&c.serverCache.isFullyInitialized()&&(H=$n(y,jr(c)),H.isLeafNode()&&(He=h.filter.updateFullNode(He,H,V)))}return H=c.serverCache.isFullyInitialized()||null!=ci(y,or()),Kr(c,He,H,h.filter.filtersNodes())}}(h,c,He.path,y,x,V):function Io(h,c,l,y,x,V,H){if(null!=ci(x,l))return c;const ne=c.serverCache.isFiltered(),xe=c.serverCache;if(null!=y.value){if(Ln(l)&&xe.isFullyInitialized()||xe.isCompleteForPath(l))return Ja(h,c,l,xe.getNode().getChild(l),x,V,ne,H);if(Ln(l)){let He=new Lr(null);return xe.getNode().forEachChild(Jr,(At,xt)=>{He=He.set(new sr(At),xt)}),Ou(h,c,l,He,x,V,ne,H)}return c}{let He=new Lr(null);return y.foreach((At,xt)=>{const Ot=Mn(l,At);xe.isCompleteForPath(Ot)&&(He=He.set(At,xe.getNode().getChild(Ot)))}),Ou(h,c,l,He,x,V,ne,H)}}(h,c,He.path,He.affectedTree,y,x,V)}else{if(l.type!==xs.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+l.type);H=function Ua(h,c,l,y,x){const V=c.serverCache;return ma(h,Fr(c,V.getNode(),V.isFullyInitialized()||Ln(l),V.isFiltered()),l,y,Uo,x)}(h,c,l.path,y,V)}const xe=V.getChanges();return function fc(h,c,l){const y=c.eventCache;if(y.isFullyInitialized()){const x=y.getNode().isLeafNode()||y.getNode().isEmpty(),V=hi(h);(l.length>0||!h.eventCache.isFullyInitialized()||x&&!y.getNode().equals(V)||!y.getNode().getPriority().equals(V.getPriority()))&&l.push(function Bi(h){return{type:"value",snapshotNode:h}}(hi(c)))}}(c,H,xe),{viewCache:H,changes:xe}}(h.processor_,x,c,l,y);return function La(h,c){(0,R.hu)(c.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(c.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,V.viewCache),(0,R.hu)(V.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=V.viewCache,function Ju(h,c,l,y){return function wt(h,c,l,y){const x=[],V=[];return c.forEach(H=>{"child_changed"===H.type&&h.index_.indexedValueChanged(H.oldSnap,H.snapshotNode)&&V.push(function Nr(h,c){return{type:"child_moved",snapshotNode:c,childName:h}}(H.childName,H.snapshotNode))}),Tt(h,x,"child_removed",c,y,l),Tt(h,x,"child_added",c,y,l),Tt(h,x,"child_moved",V,y,l),Tt(h,x,"child_changed",c,y,l),Tt(h,x,"value",c,y,l),x}(h.eventGenerator_,c,l,y?[y]:h.eventRegistrations_)}(h,V.changes,V.viewCache.eventCache.getNode(),null)}let Va,Ps;function si(h,c,l,y){const x=c.source.queryId;if(null!==x){const V=h.views.get(x);return(0,R.hu)(null!=V,"SyncTree gave us an op for an invalid query."),ai(V,c,l,y)}{let V=[];for(const H of h.views.values())V=V.concat(ai(H,c,l,y));return V}}function hs(h,c){let l=null;for(const y of h.views.values())l=l||pu(y,c);return l}class gu{constructor(c){this.listenProvider_=c,this.syncPointTree_=new Lr(null),this.pendingWriteTree_=function Qu(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xo(h,c,l,y,x){return function cn(h,c,l,y,x){(0,R.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),h.allWrites.push({path:c,snap:l,writeId:y,visible:x}),x&&(h.visibleWrites=ss(h.visibleWrites,c,l)),h.lastWriteId=y}(h.pendingWriteTree_,c,l,y,x),x?Re(h,new z({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,l)):[]}function Is(h,c,l=!1){const y=function Kt(h,c){for(let l=0;l<h.allWrites.length;l++){const y=h.allWrites[l];if(y.writeId===c)return y}return null}(h.pendingWriteTree_,c);if(function Ui(h,c){const l=h.allWrites.findIndex(ne=>ne.writeId===c);(0,R.hu)(l>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[l];h.allWrites.splice(l,1);let x=y.visible,V=!1,H=h.allWrites.length-1;for(;x&&H>=0;){const ne=h.allWrites[H];ne.visible&&(H>=l&&Nu(ne,y.path)?x=!1:wi(y.path,ne.path)&&(V=!0)),H--}return!!x&&(V?(function wl(h){h.visibleWrites=Vl(h.allWrites,fa,or()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=fi(h.visibleWrites,y.path):Mt(y.children,xe=>{h.visibleWrites=fi(h.visibleWrites,Mn(y.path,xe))}),!0))}(h.pendingWriteTree_,c)){let V=new Lr(null);return null!=y.snap?V=V.set(or(),!0):Mt(y.children,H=>{V=V.set(new sr(H),!0)}),Re(h,new Pa(y.path,V,l))}return[]}function bo(h,c,l){return Re(h,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,l))}function Y(h,c,l){const x=h.pendingWriteTree_,V=h.syncPointTree_.findOnPath(c,(H,ne)=>{const He=hs(ne,Bn(H,c));if(He)return He});return Qo(x,c,V,l,!0)}function Re(h,c){return It(c,h.syncPointTree_,null,Ru(h.pendingWriteTree_,or()))}function It(h,c,l,y){if(Ln(h.path))return en(h,c,l,y);{const x=c.get(or());null==l&&null!=x&&(l=hs(x,or()));let V=[];const H=kn(h.path),ne=h.operationForChild(H),xe=c.children.get(H);if(xe&&ne){const He=l?l.getImmediateChild(H):null,At=$r(y,H);V=V.concat(It(ne,xe,He,At))}return x&&(V=V.concat(si(x,h,y,l))),V}}function en(h,c,l,y){const x=c.get(or());null==l&&null!=x&&(l=hs(x,or()));let V=[];return c.children.inorderTraversal((H,ne)=>{const xe=l?l.getImmediateChild(H):null,He=$r(y,H),At=h.operationForChild(H);At&&(V=V.concat(en(At,ne,xe,He)))}),x&&(V=V.concat(si(x,h,y,l))),V}function as(h,c){return h.tagToQueryMap.get(c)}function us(h){const c=h.indexOf("$");return(0,R.hu)(-1!==c&&c<h.length-1,"Bad queryKey."),{queryId:h.substr(c+1),path:new sr(h.substr(0,c))}}function ps(h,c,l){const y=h.syncPointTree_.get(c);return(0,R.hu)(y,"Missing sync point for query tag that we're tracking"),si(y,l,Ru(h.pendingWriteTree_,c),null)}class gs{constructor(c){this.node_=c}getImmediateChild(c){const l=this.node_.getImmediateChild(c);return new gs(l)}node(){return this.node_}}class $i{constructor(c,l){this.syncTree_=c,this.path_=l}getImmediateChild(c){const l=Mn(this.path_,c);return new $i(this.syncTree_,l)}node(){return Y(this.syncTree_,this.path_)}}const $l=function(h,c,l){return h&&"object"==typeof h?((0,R.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Il(h[".sv"],c,l):"object"==typeof h[".sv"]?Vo(h[".sv"],c):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Il=function(h,c,l){if("timestamp"===h)return l.timestamp;(0,R.hu)(!1,"Unexpected server value: "+h)},Vo=function(h,c,l){h.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,R.hu)(!1,"Unexpected increment value: "+y);const x=c.node();if((0,R.hu)(null!==x&&typeof x<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return y;const H=x.getValue();return"number"!=typeof H?y:H+y},mu=function(h,c,l){return _u(h,new gs(c),l)};function _u(h,c,l){const y=h.getPriority().val(),x=$l(y,c.getImmediateChild(".priority"),l);let V;if(h.isLeafNode()){const H=h,ne=$l(H.getValue(),c,l);return ne!==H.getValue()||x!==H.getPriority().val()?new xi(ne,Rn(x)):h}{const H=h;return V=H,x!==H.getPriority().val()&&(V=V.updatePriority(new xi(x))),H.forEachChild(ei,(ne,xe)=>{const He=_u(xe,c.getImmediateChild(ne),l);He!==xe&&(V=V.updateImmediateChild(ne,He))}),V}}class yu{constructor(c="",l=null,y={children:{},childCount:0}){this.name=c,this.parent=l,this.node=y}}function ta(h,c){let l=c instanceof sr?c:new sr(c),y=h,x=kn(l);for(;null!==x;){const V=(0,R.DV)(y.node.children,x)||{children:{},childCount:0};y=new yu(x,y,V),l=ke(l),x=kn(l)}return y}function To(h){return h.node.value}function Ni(h,c){h.node.value=c,zl(h)}function Hl(h){return h.node.childCount>0}function wa(h,c){Mt(h.node.children,(l,y)=>{c(new yu(l,h,y))})}function vu(h,c,l,y){l&&!y&&c(h),wa(h,x=>{vu(x,c,!0,y)}),l&&y&&c(h)}function Lu(h){return new sr(null===h.parent?h.name:Lu(h.parent)+"/"+h.name)}function zl(h){null!==h.parent&&function Eu(h,c,l){const y=function Wl(h){return void 0===To(h)&&!Hl(h)}(l),x=(0,R.r3)(h.node.children,c);y&&x?(delete h.node.children[c],h.node.childCount--,zl(h)):!y&&!x&&(h.node.children[c]=l.node,h.node.childCount++,zl(h))}(h.parent,h.name,h)}const co=/[\[\].#$\/\u0000-\u001F\u007F]/,el=/[\[\].#$\u0000-\u001F\u007F]/,Bc=10485760,Uu=function(h){return"string"==typeof h&&0!==h.length&&!co.test(h)},Vu=function(h,c,l){const y=l instanceof sr?new _i(l,h):l;if(void 0===c)throw new Error(h+"contains undefined "+No(y));if("function"==typeof c)throw new Error(h+"contains a function "+No(y)+" with contents = "+c.toString());if(Ne(c))throw new Error(h+"contains "+c.toString()+" "+No(y));if("string"==typeof c&&c.length>Bc/3&&(0,R.ug)(c)>Bc)throw new Error(h+"contains a string greater than "+Bc+" utf8 bytes "+No(y)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let x=!1,V=!1;if(Mt(c,(H,ne)=>{if(".value"===H)x=!0;else if(".priority"!==H&&".sv"!==H&&(V=!0,!Uu(H)))throw new Error(h+" contains an invalid key ("+H+") "+No(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Zi(h,c){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(c),h.byteLength_+=(0,R.ug)(c),Ki(h)})(y,H),Vu(h,ne,y),function Qs(h){const c=h.parts_.pop();h.byteLength_-=(0,R.ug)(c),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),x&&V)throw new Error(h+' contains ".value" child '+No(y)+" in addition to actual children.")}},nl=function(h,c){const l=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!Uu(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==l.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),function(h){return"string"==typeof h&&0!==h.length&&!el.test(h)}(h)}(l))throw new Error((0,R.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ql{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Zs(h,c,l){(function $a(h,c){let l=null;for(let y=0;y<c.length;y++){const x=c[y],V=x.getPath();null!==l&&!rs(V,l.path)&&(h.eventLists_.push(l),l=null),null===l&&(l={events:[],path:V}),l.events.push(x)}l&&h.eventLists_.push(l)})(h,l),function Tu(h,c){h.recursionDepth_++;let l=!0;for(let y=0;y<h.eventLists_.length;y++){const x=h.eventLists_[y];x&&(c(x.path)?(gc(h.eventLists_[y]),h.eventLists_[y]=null):l=!1)}l&&(h.eventLists_=[]),h.recursionDepth_--}(h,y=>wi(y,c)||wi(c,y))}function gc(h){for(let c=0;c<h.events.length;c++){const l=h.events[c];if(null!==l){h.events[c]=null;const y=l.getEventRunner();Vt&&lt("event: "+l.toString()),Dr(y)}}}class Du{constructor(c,l,y,x){this.repoInfo_=c,this.forceRestClient_=l,this.authTokenProvider_=y,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ql,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cs(),this.transactionQueueTree_=new yu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Dl(h){const l=h.infoData_.getNode(new sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Su(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Dl(h)})}function ho(h,c,l,y,x){h.dataUpdateCount++;const V=new sr(c);l=h.interceptServerDataCallback_?h.interceptServerDataCallback_(c,l):l;let H=[];if(x)if(y){const xe=(0,R.UI)(l,He=>Rn(He));H=function k(h,c,l,y){const x=as(h,y);if(x){const V=us(x),H=V.path,ne=V.queryId,xe=Bn(H,c),He=Lr.fromObject(l);return ps(h,H,new U(Yo(ne),xe,He))}return[]}(h.serverSyncTree_,V,xe,x)}else{const xe=Rn(l);H=function T(h,c,l,y){const x=as(h,y);if(null!=x){const V=us(x),H=V.path,ne=V.queryId,xe=Bn(H,c);return ps(h,H,new z(Yo(ne),xe,l))}return[]}(h.serverSyncTree_,V,xe,x)}else if(y){const xe=(0,R.UI)(l,He=>Rn(He));H=function fs(h,c,l){const y=Lr.fromObject(l);return Re(h,new U({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,y))}(h.serverSyncTree_,V,xe)}else{const xe=Rn(l);H=bo(h.serverSyncTree_,V,xe)}let ne=V;H.length>0&&(ne=Fn(h,V)),Zs(h.eventQueue_,ne,H)}function Ao(h,c){Ha(h,"connected",c),!1===c&&function Ca(h){N(h,"onDisconnectEvents");const c=Su(h),l=Cs();As(h.onDisconnect_,or(),(x,V)=>{const H=function(h,c,l,y){return _u(c,new $i(l,h),y)}(x,V,h.serverSyncTree_,c);wo(l,x,H)});let y=[];As(l,or(),(x,V)=>{y=y.concat(bo(h.serverSyncTree_,x,V));const H=function ol(h,c){const l=Lu(vi(h,c)),y=ta(h.transactionQueueTree_,c);return function Gl(h,c,l){let y=l?h:h.parent;for(;null!==y;){if(c(y))return!0;y=y.parent}}(y,x=>{Ga(h,x)}),Ga(h,y),vu(y,x=>{Ga(h,x)}),l}(h,x);Fn(h,H)}),h.onDisconnect_=Cs(),Zs(h.eventQueue_,or(),y)}(h)}function Ha(h,c,l){const y=new sr("/.info/"+c),x=Rn(l);h.infoData_.updateSnapshot(y,x);const V=bo(h.infoSyncTree_,y,x);Zs(h.eventQueue_,y,V)}function Bu(h){return h.nextWriteId_++}function N(h,...c){let l="";h.persistentConnection_&&(l=h.persistentConnection_.id+":"),lt(l,...c)}function rt(h,c,l){return Y(h.serverSyncTree_,c,l)||Ct.EMPTY_NODE}function Lt(h,c=h.transactionQueueTree_){if(c||Ur(h,c),To(c)){const l=Bo(h,c);(0,R.hu)(l.length>0,"Sending zero length transaction queue"),l.every(x=>0===x.status)&&function gn(h,c,l){const y=l.map(He=>He.currentWriteId),x=rt(h,c,y);let V=x;const H=x.hash();for(let He=0;He<l.length;He++){const At=l[He];(0,R.hu)(0===At.status,"tryToSendTransactionQueue_: items in queue should all be run."),At.status=1,At.retryCount++;const xt=Bn(c,At.path);V=V.updateChild(xt,At.currentOutputSnapshotRaw)}const ne=V.val(!0),xe=c;h.server_.put(xe.toString(),ne,He=>{N(h,"transaction put response",{path:xe.toString(),status:He});let At=[];if("ok"===He){const xt=[];for(let Ot=0;Ot<l.length;Ot++)l[Ot].status=2,At=At.concat(Is(h.serverSyncTree_,l[Ot].currentWriteId)),l[Ot].onComplete&&xt.push(()=>l[Ot].onComplete(null,!0,l[Ot].currentOutputSnapshotResolved)),l[Ot].unwatcher();Ur(h,ta(h.transactionQueueTree_,c)),Lt(h,h.transactionQueueTree_),Zs(h.eventQueue_,c,At);for(let Ot=0;Ot<xt.length;Ot++)Dr(xt[Ot])}else{if("datastale"===He)for(let xt=0;xt<l.length;xt++)l[xt].status=3===l[xt].status?4:0;else{ie("transaction at "+xe.toString()+" failed: "+He);for(let xt=0;xt<l.length;xt++)l[xt].status=4,l[xt].abortReason=He}Fn(h,c)}},H)}(h,Lu(c),l)}else Hl(c)&&wa(c,l=>{Lt(h,l)})}function Fn(h,c){const l=vi(h,c),y=Lu(l);return function vr(h,c,l){if(0===c.length)return;const y=[];let x=[];const H=c.filter(ne=>0===ne.status).map(ne=>ne.currentWriteId);for(let ne=0;ne<c.length;ne++){const xe=c[ne],He=Bn(l,xe.path);let xt,At=!1;if((0,R.hu)(null!==He,"rerunTransactionsUnderNode_: relativePath should not be null."),4===xe.status)At=!0,xt=xe.abortReason,x=x.concat(Is(h.serverSyncTree_,xe.currentWriteId,!0));else if(0===xe.status)if(xe.retryCount>=25)At=!0,xt="maxretry",x=x.concat(Is(h.serverSyncTree_,xe.currentWriteId,!0));else{const Ot=rt(h,xe.path,H);xe.currentInputSnapshot=Ot;const Cn=c[ne].update(Ot.val());if(void 0!==Cn){Vu("transaction failed: Data returned ",Cn,xe.path);let Wn=Rn(Cn);"object"==typeof Cn&&null!=Cn&&(0,R.r3)(Cn,".priority")||(Wn=Wn.updatePriority(Ot.getPriority()));const io=xe.currentWriteId,pl=Su(h),ec=mu(Wn,Ot,pl);xe.currentOutputSnapshotRaw=Wn,xe.currentOutputSnapshotResolved=ec,xe.currentWriteId=Bu(h),H.splice(H.indexOf(io),1),x=x.concat(Xo(h.serverSyncTree_,xe.path,ec,xe.currentWriteId,xe.applyLocally)),x=x.concat(Is(h.serverSyncTree_,io,!0))}else At=!0,xt="nodata",x=x.concat(Is(h.serverSyncTree_,xe.currentWriteId,!0))}Zs(h.eventQueue_,l,x),x=[],At&&(c[ne].status=2,setTimeout(c[ne].unwatcher,Math.floor(0)),c[ne].onComplete&&y.push("nodata"===xt?()=>c[ne].onComplete(null,!1,c[ne].currentInputSnapshot):()=>c[ne].onComplete(new Error(xt),!1,null)))}Ur(h,h.transactionQueueTree_);for(let ne=0;ne<y.length;ne++)Dr(y[ne]);Lt(h,h.transactionQueueTree_)}(h,Bo(h,l),y),y}function vi(h,c){let l,y=h.transactionQueueTree_;for(l=kn(c);null!==l&&void 0===To(y);)y=ta(y,l),l=kn(c=ke(c));return y}function Bo(h,c){const l=[];return Yr(h,c,l),l.sort((y,x)=>y.order-x.order),l}function Yr(h,c,l){const y=To(c);if(y)for(let x=0;x<y.length;x++)l.push(y[x]);wa(c,x=>{Yr(h,x,l)})}function Ur(h,c){const l=To(c);if(l){let y=0;for(let x=0;x<l.length;x++)2!==l[x].status&&(l[y]=l[x],y++);l.length=y,Ni(c,l.length>0?l:void 0)}wa(c,y=>{Ur(h,y)})}function Ga(h,c){const l=To(c);if(l){const y=[];let x=[],V=-1;for(let H=0;H<l.length;H++)3===l[H].status||(1===l[H].status?((0,R.hu)(V===H-1,"All SENT items should be at beginning of queue."),V=H,l[H].status=3,l[H].abortReason="set"):((0,R.hu)(0===l[H].status,"Unexpected transaction status in abort"),l[H].unwatcher(),x=x.concat(Is(h.serverSyncTree_,l[H].currentWriteId,!0)),l[H].onComplete&&y.push(l[H].onComplete.bind(null,new Error("set"),!1,null))));-1===V?Ni(c,void 0):l.length=V+1,Zs(h.eventQueue_,Lu(c),x);for(let H=0;H<y.length;H++)Dr(y[H])}}const Ts=function(h,c){const l=yc(h),y=l.namespace;return"firebase.com"===l.domain&&ee(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==l.domain&&ee("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ie("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _e(l.host,l.secure,y,"ws"===l.scheme||"wss"===l.scheme,c,"",y!==l.subdomain),path:new sr(l.pathString)}},yc=function(h){let c="",l="",y="",x="",V="",H=!0,ne="https",xe=443;if("string"==typeof h){let He=h.indexOf("//");He>=0&&(ne=h.substring(0,He-1),h=h.substring(He+2));let At=h.indexOf("/");-1===At&&(At=h.length);let xt=h.indexOf("?");-1===xt&&(xt=h.length),c=h.substring(0,Math.min(At,xt)),At<xt&&(x=function ra(h){let c="";const l=h.split("/");for(let y=0;y<l.length;y++)if(l[y].length>0){let x=l[y];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch{}c+="/"+x}return c}(h.substring(At,xt)));const Ot=function al(h){const c={};"?"===h.charAt(0)&&(h=h.substring(1));for(const l of h.split("&")){if(0===l.length)continue;const y=l.split("=");2===y.length?c[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):ie(`Invalid query segment '${l}' in query '${h}'`)}return c}(h.substring(Math.min(h.length,xt)));He=c.indexOf(":"),He>=0?(H="https"===ne||"wss"===ne,xe=parseInt(c.substring(He+1),10)):He=c.length;const Cn=c.slice(0,He);if("localhost"===Cn.toLowerCase())l="localhost";else if(Cn.split(".").length<=2)l=Cn;else{const Wn=c.indexOf(".");y=c.substring(0,Wn).toLowerCase(),l=c.substring(Wn+1),V=y}"ns"in Ot&&(V=Ot.ns)}return{host:c,port:xe,domain:l,subdomain:y,secure:H,scheme:ne,pathString:x,namespace:V}};class ms{constructor(c,l,y,x){this._repo=c,this._path=l,this._queryParams=y,this._orderByCalled=x}get key(){return Ln(this._path)?null:nt(this._path)}get ref(){return new ki(this._repo,this._path)}get _queryIdentifier(){const c=Gs(this._queryParams),l=wn(c);return"{}"===l?"default":l}get _queryObject(){return Gs(this._queryParams)}isEqual(c){if(!((c=(0,R.m9)(c))instanceof ms))return!1;const l=this._repo===c._repo,y=rs(this._path,c._path);return l&&y&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Nt(h){let c="";for(let l=h.pieceNum_;l<h.pieces_.length;l++)""!==h.pieces_[l]&&(c+="/"+encodeURIComponent(String(h.pieces_[l])));return c||"/"}(this._path)}}class ki extends ms{constructor(c,l){super(c,l,new Js,!1)}get parent(){const c=dn(this._path);return null===c?null:new ki(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}(function Uc(h){(0,R.hu)(!Va,"__referenceConstructor has already been defined"),Va=h})(ki),function ti(h){(0,R.hu)(!Ps,"__referenceConstructor has already been defined"),Ps=h}(ki);const Hc={};class Zd{constructor(c,l){this._repoInternal=c,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rl(h,c,l){if(h.stats_=Ht(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new uo(h.repoInfo_,(y,x,V,H)=>{ho(h,y,x,V,H)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Ao(h,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Pz)(l)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new Bs(h.repoInfo_,c,(y,x,V,H)=>{ho(h,y,x,V,H)},y=>{Ao(h,y)},y=>{!function bs(h,c){Mt(c,(l,y)=>{Ha(h,l,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,l),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function tr(h,c){const l=h.toString();return Hn[l]||(Hn[l]=c()),Hn[l]}(h.repoInfo_,()=>new ha(h.stats_,h.server_)),h.infoData_=new Ma,h.infoSyncTree_=new gu({startListening:(y,x,V,H)=>{let ne=[];const xe=h.infoData_.getNode(y._path);return xe.isEmpty()||(ne=bo(h.infoSyncTree_,y._path,xe),setTimeout(()=>{H("ok")},0)),ne},stopListening:()=>{}}),Ha(h,"connected",!1),h.serverSyncTree_=new gu({startListening:(y,x,V,H)=>(h.server_.listen(y,V,x,(ne,xe)=>{const He=H(ne,xe);Zs(h.eventQueue_,y._path,He)}),[]),stopListening:(y,x)=>{h.server_.unlisten(y,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ki(this._repo,or())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Gc(h,c){const l=Hc[c];(!l||l[h.key]!==h)&&ee(`Database ${c}(${h.repoInfo_}) has already been deleted.`),function m(h){h.persistentConnection_&&h.persistentConnection_.interrupt("repo_interrupt")}(h),delete l[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&ee("Cannot call "+c+" on a deleted database.")}}function Kd(h=(0,p.getApp)(),c){return(0,p._getProvider)(h,"database").getImmediate({identifier:c})}Bs.prototype.simpleListen=function(h,c){this.sendRequest("q",{p:h},c)},Bs.prototype.echo=function(h,c){this.sendRequest("echo",{d:h},c)},function qc(h){(function Ye(h){we=h})(p.SDK_VERSION),(0,p._registerComponent)(new Z.wA("database",(c,{instanceIdentifier:l})=>function Wc(h,c,l,y,x){let V=y||h.options.databaseURL;void 0===V&&(h.options.projectId||ee("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lt("Using default host for project ",h.options.projectId),V=`${h.options.projectId}-default-rtdb.firebaseio.com`);let xe,He,H=Ts(V,x),ne=H.repoInfo;typeof process<"u"&&process.env&&(He=process.env.FIREBASE_DATABASE_EMULATOR_HOST),He?(xe=!0,V=`http://${He}?ns=${ne.namespace}`,H=Ts(V,x),ne=H.repoInfo):xe=!H.repoInfo.secure;const At=x&&xe?new qn(qn.OWNER):new ln(h.name,h.options,c);nl("Invalid Firebase Database URL",H),Ln(H.path)||ee("Database URL must point to the root of a Firebase Database (not including a child path).");const xt=function zc(h,c,l,y){let x=Hc[c.name];x||(x={},Hc[c.name]=x);let V=x[h.toURLString()];return V&&ee("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),V=new Du(h,!1,l,y),x[h.toURLString()]=V,V}(ne,h,At,new Mr(h.name,l));return new Zd(xt,h)}(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(Le,"0.13.6",h),(0,p.registerVersion)(Le,"0.13.6","esm2017")}()},2375:(an,ot,j)=>{j.d(ot,{KL:()=>pe,Gb:()=>vt});var C=j(5861),Z=(j(2833),j(4859)),R=j(8766),ve=j(2090),Le=j(9681);const je="/firebase-messaging-sw.js",we="/firebase-cloud-messaging-push-scope",Ye="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",he="google.c.a.c_id",Ce="google.c.a.c_l",dt="google.c.a.ts",ht="google.c.a.e";var Ft=(()=>{return(Pe=Ft||(Ft={})).PUSH_RECEIVED="push-received",Pe.NOTIFICATION_CLICKED="notification-clicked",Ft;var Pe})();function it(Pe){const se=new Uint8Array(Pe);return btoa(String.fromCharCode(...se)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function et(Pe){const G=(Pe+"=".repeat((4-Pe.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),te=atob(G),Te=new Uint8Array(te.length);for(let oe=0;oe<te.length;++oe)Te[oe]=te.charCodeAt(oe);return Te}const Vt="fcm_token_details_db",Me="fcm_token_object_Store";function lt(Pe){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,C.Z)(function*(Pe){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Vt))return null;let se=null;return(yield(0,R.X3)(Vt,5,{upgrade:(te=(0,C.Z)(function*(Te,oe,ze,ut){var Zt;if(oe<2||!Te.objectStoreNames.contains(Me))return;const Tn=ut.objectStore(Me),Un=yield Tn.index("fcmSenderId").get(Pe);if(yield Tn.clear(),Un)if(2===oe){const hn=Un;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;se={token:hn.fcmToken,createTime:null!==(Zt=hn.createTime)&&void 0!==Zt?Zt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:it(hn.vapidKey)}}}else if(3===oe){const hn=Un;se={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:it(hn.auth),p256dh:it(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:it(hn.vapidKey)}}}else if(4===oe){const hn=Un;se={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:it(hn.auth),p256dh:it(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:it(hn.vapidKey)}}}}),function(oe,ze,ut,Zt){return te.apply(this,arguments)})})).close(),yield(0,R.Lj)(Vt),yield(0,R.Lj)("fcm_vapid_details_db"),yield(0,R.Lj)("undefined"),ct(se)?se:null;var te}),Ge.apply(this,arguments)}function ct(Pe){if(!Pe||!Pe.subscriptionOptions)return!1;const{subscriptionOptions:se}=Pe;return"number"==typeof Pe.createTime&&Pe.createTime>0&&"string"==typeof Pe.token&&Pe.token.length>0&&"string"==typeof se.auth&&se.auth.length>0&&"string"==typeof se.p256dh&&se.p256dh.length>0&&"string"==typeof se.endpoint&&se.endpoint.length>0&&"string"==typeof se.swScope&&se.swScope.length>0&&"string"==typeof se.vapidKey&&se.vapidKey.length>0}const Ze="firebase-messaging-store";let Ne=null;function Ue(){return Ne||(Ne=(0,R.X3)("firebase-messaging-database",1,{upgrade:(Pe,se)=>{0===se&&Pe.createObjectStore(Ze)}})),Ne}function $e(Pe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,C.Z)(function*(Pe){const se=An(Pe),te=yield(yield Ue()).transaction(Ze).objectStore(Ze).get(se);if(te)return te;{const Te=yield lt(Pe.appConfig.senderId);if(Te)return yield Rt(Pe,Te),Te}})).apply(this,arguments)}function Rt(Pe,se){return bt.apply(this,arguments)}function bt(){return(bt=(0,C.Z)(function*(Pe,se){const G=An(Pe),Te=(yield Ue()).transaction(Ze,"readwrite");return yield Te.objectStore(Ze).put(se,G),yield Te.done,se})).apply(this,arguments)}function Yt(Pe){return wn.apply(this,arguments)}function wn(){return(wn=(0,C.Z)(function*(Pe){const se=An(Pe),te=(yield Ue()).transaction(Ze,"readwrite");yield te.objectStore(Ze).delete(se),yield te.done})).apply(this,arguments)}function An({appConfig:Pe}){return Pe.appId}const tn=new ve.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gn(Pe,se){return On.apply(this,arguments)}function On(){return(On=(0,C.Z)(function*(Pe,se){var G;const te=yield Dr(Pe),Te=ar(se),oe={method:"POST",headers:te,body:JSON.stringify(Te)};let ze;try{ze=yield(yield fetch(hr(Pe.appConfig),oe)).json()}catch(ut){throw tn.create("token-subscribe-failed",{errorInfo:null===(G=ut)||void 0===G?void 0:G.toString()})}if(ze.error)throw tn.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw tn.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function Kn(Pe,se){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,C.Z)(function*(Pe,se){var G;const te=yield Dr(Pe),Te=ar(se.subscriptionOptions),oe={method:"PATCH",headers:te,body:JSON.stringify(Te)};let ze;try{ze=yield(yield fetch(`${hr(Pe.appConfig)}/${se.token}`,oe)).json()}catch(ut){throw tn.create("token-update-failed",{errorInfo:null===(G=ut)||void 0===G?void 0:G.toString()})}if(ze.error)throw tn.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw tn.create("token-update-no-token");return ze.token})).apply(this,arguments)}function fn(Pe,se){return er.apply(this,arguments)}function er(){return(er=(0,C.Z)(function*(Pe,se){var G;const Te={method:"DELETE",headers:yield Dr(Pe)};try{const ze=yield(yield fetch(`${hr(Pe.appConfig)}/${se}`,Te)).json();if(ze.error)throw tn.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(oe){throw tn.create("token-unsubscribe-failed",{errorInfo:null===(G=oe)||void 0===G?void 0:G.toString()})}})).apply(this,arguments)}function hr({projectId:Pe}){return`https://fcmregistrations.googleapis.com/v1/projects/${Pe}/registrations`}function Dr(Pe){return cr.apply(this,arguments)}function cr(){return(cr=(0,C.Z)(function*({appConfig:Pe,installations:se}){const G=yield se.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Pe.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function ar({p256dh:Pe,auth:se,endpoint:G,vapidKey:te}){const Te={web:{endpoint:G,auth:se,p256dh:Pe}};return te!==Ye&&(Te.web.applicationPubKey=te),Te}const Mr=6048e5;function ln(Pe){return qn.apply(this,arguments)}function qn(){return(qn=(0,C.Z)(function*(Pe){const se=yield fr(Pe.swRegistration,Pe.vapidKey),G={vapidKey:Pe.vapidKey,swScope:Pe.swRegistration.scope,endpoint:se.endpoint,auth:it(se.getKey("auth")),p256dh:it(se.getKey("p256dh"))},te=yield $e(Pe.firebaseDependencies);if(te){if(Er(te.subscriptionOptions,G))return Date.now()>=te.createTime+Mr?Xt(Pe,{token:te.token,createTime:Date.now(),subscriptionOptions:G}):te.token;try{yield fn(Pe.firebaseDependencies,te.token)}catch(Te){console.warn(Te)}return Yn(Pe.firebaseDependencies,G)}return Yn(Pe.firebaseDependencies,G)})).apply(this,arguments)}function Pr(Pe){return mr.apply(this,arguments)}function mr(){return(mr=(0,C.Z)(function*(Pe){const se=yield $e(Pe.firebaseDependencies);se&&(yield fn(Pe.firebaseDependencies,se.token),yield Yt(Pe.firebaseDependencies));const G=yield Pe.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function Xt(Pe,se){return dr.apply(this,arguments)}function dr(){return(dr=(0,C.Z)(function*(Pe,se){try{const G=yield Kn(Pe.firebaseDependencies,se),te=Object.assign(Object.assign({},se),{token:G,createTime:Date.now()});return yield Rt(Pe.firebaseDependencies,te),G}catch(G){throw yield Pr(Pe),G}})).apply(this,arguments)}function Yn(Pe,se){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,C.Z)(function*(Pe,se){const te={token:yield Gn(Pe,se),createTime:Date.now(),subscriptionOptions:se};return yield Rt(Pe,te),te.token})).apply(this,arguments)}function fr(Pe,se){return oi.apply(this,arguments)}function oi(){return(oi=(0,C.Z)(function*(Pe,se){return(yield Pe.pushManager.getSubscription())||Pe.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:et(se)})})).apply(this,arguments)}function Er(Pe,se){return se.vapidKey===Pe.vapidKey&&se.endpoint===Pe.endpoint&&se.auth===Pe.auth&&se.p256dh===Pe.p256dh}function tt(Pe){const se={from:Pe.from,collapseKey:Pe.collapse_key,messageId:Pe.fcmMessageId};return function me(Pe,se){if(!se.notification)return;Pe.notification={};const G=se.notification.title;G&&(Pe.notification.title=G);const te=se.notification.body;te&&(Pe.notification.body=te);const Te=se.notification.image;Te&&(Pe.notification.image=Te)}(se,Pe),function _e(Pe,se){!se.data||(Pe.data=se.data)}(se,Pe),function ft(Pe,se){var G,te,Te,oe,ze;if(!(se.fcmOptions||null!==(G=se.notification)&&void 0!==G&&G.click_action))return;Pe.fcmOptions={};const ut=null!==(Te=null===(te=se.fcmOptions)||void 0===te?void 0:te.link)&&void 0!==Te?Te:null===(oe=se.notification)||void 0===oe?void 0:oe.click_action;ut&&(Pe.fcmOptions.link=ut);const Zt=null===(ze=se.fcmOptions)||void 0===ze?void 0:ze.analytics_label;Zt&&(Pe.fcmOptions.analyticsLabel=Zt)}(se,Pe),se}function gt(Pe){return"object"==typeof Pe&&!!Pe&&he in Pe}function nn(Pe,se){const G=[];for(let te=0;te<Pe.length;te++)G.push(Pe.charAt(te)),te<se.length&&G.push(se.charAt(te));return G.join("")}function Hn(Pe){return tn.create("missing-app-config-values",{valueName:Pe})}nn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ht{constructor(se,G,te){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Te=function vn(Pe){if(!Pe||!Pe.options)throw Hn("App Configuration Object");if(!Pe.name)throw Hn("App Name");const se=["projectId","apiKey","appId","messagingSenderId"],{options:G}=Pe;for(const te of se)if(!G[te])throw Hn(te);return{appName:Pe.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(se);this.firebaseDependencies={app:se,appConfig:Te,installations:G,analyticsProvider:te}}_delete(){return Promise.resolve()}}function tr(Pe){return En.apply(this,arguments)}function En(){return(En=(0,C.Z)(function*(Pe){var se;try{Pe.swRegistration=yield navigator.serviceWorker.register(je,{scope:we}),Pe.swRegistration.update().catch(()=>{})}catch(G){throw tn.create("failed-service-worker-registration",{browserErrorMessage:null===(se=G)||void 0===se?void 0:se.message})}})).apply(this,arguments)}function Rr(Pe,se){return xn.apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(Pe,se){if(!se&&!Pe.swRegistration&&(yield tr(Pe)),se||!Pe.swRegistration){if(!(se instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");Pe.swRegistration=se}})).apply(this,arguments)}function De(Pe,se){return le.apply(this,arguments)}function le(){return(le=(0,C.Z)(function*(Pe,se){se?Pe.vapidKey=se:Pe.vapidKey||(Pe.vapidKey=Ye)})).apply(this,arguments)}function be(){return(be=(0,C.Z)(function*(Pe,se){if(!navigator)throw tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tn.create("permission-blocked");return yield De(Pe,se?.vapidKey),yield Rr(Pe,se?.serviceWorkerRegistration),ln(Pe)})).apply(this,arguments)}function Ie(Pe,se,G){return yt.apply(this,arguments)}function yt(){return(yt=(0,C.Z)(function*(Pe,se,G){const te=kt(se);(yield Pe.firebaseDependencies.analyticsProvider.get()).logEvent(te,{message_id:G[he],message_name:G[Ce],message_time:G[dt],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kt(Pe){switch(Pe){case Ft.NOTIFICATION_CLICKED:return"notification_open";case Ft.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function rr(){return(rr=(0,C.Z)(function*(Pe,se){const G=se.data;if(!G.isFirebaseMessaging)return;Pe.onMessageHandler&&G.messageType===Ft.PUSH_RECEIVED&&("function"==typeof Pe.onMessageHandler?Pe.onMessageHandler(tt(G)):Pe.onMessageHandler.next(tt(G)));const te=G.data;gt(te)&&"1"===te[ht]&&(yield Ie(Pe,G.messageType,te))})).apply(this,arguments)}const Qn="@firebase/messaging",Je=Pe=>{const se=new Ht(Pe.getProvider("app").getImmediate(),Pe.getProvider("installations-internal").getImmediate(),Pe.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function yn(Pe,se){return rr.apply(this,arguments)}(se,G)),se},Ae=Pe=>{const se=Pe.getProvider("messaging").getImmediate();return{getToken:te=>function ce(Pe,se){return be.apply(this,arguments)}(se,te)}};function vt(){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,C.Z)(function*(){try{yield(0,ve.eu)()}catch{return!1}return typeof window<"u"&&(0,ve.hl)()&&(0,ve.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function pe(Pe=(0,Le.getApp)()){return vt().then(se=>{if(!se)throw tn.create("unsupported-browser")},se=>{throw tn.create("indexed-db-unsupported")}),(0,Le._getProvider)((0,ve.m9)(Pe),"messaging").getImmediate()}!function Fe(){(0,Le._registerComponent)(new Z.wA("messaging",Je,"PUBLIC")),(0,Le._registerComponent)(new Z.wA("messaging-internal",Ae,"PRIVATE")),(0,Le.registerVersion)(Qn,"0.9.16"),(0,Le.registerVersion)(Qn,"0.9.16","esm2017")}()},9751:(an,ot,j)=>{j.d(ot,{y:()=>we});var C=j(2961),p=j(727),Z=j(8822),R=j(9635),ve=j(2416),Le=j(576),je=j(2806);let we=(()=>{class Ce{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const at=new Ce;return at.source=this,at.operator=ht,at}subscribe(ht,at,Ft){const it=function he(Ce){return Ce&&Ce instanceof C.Lv||function re(Ce){return Ce&&(0,Le.m)(Ce.next)&&(0,Le.m)(Ce.error)&&(0,Le.m)(Ce.complete)}(Ce)&&(0,p.Nn)(Ce)}(ht)?ht:new C.Hp(ht,at,Ft);return(0,je.x)(()=>{const{operator:et,source:Vt}=this;it.add(et?et.call(it,Vt):Vt?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(ht){try{return this._subscribe(ht)}catch(at){ht.error(at)}}forEach(ht,at){return new(at=Ye(at))((Ft,it)=>{const et=new C.Hp({next:Vt=>{try{ht(Vt)}catch($t){it($t),et.unsubscribe()}},error:it,complete:Ft});this.subscribe(et)})}_subscribe(ht){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(ht)}[Z.L](){return this}pipe(...ht){return(0,R.U)(ht)(this)}toPromise(ht){return new(ht=Ye(ht))((at,Ft)=>{let it;this.subscribe(et=>it=et,et=>Ft(et),()=>at(it))})}}return Ce.create=dt=>new Ce(dt),Ce})();function Ye(Ce){var dt;return null!==(dt=Ce??ve.v.Promise)&&void 0!==dt?dt:Promise}},7579:(an,ot,j)=>{j.d(ot,{x:()=>je});var C=j(9751),p=j(727);const R=(0,j(3888).d)(Ye=>function(){Ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ve=j(8737),Le=j(2806);let je=(()=>{class Ye extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Ce=new we(this,this);return Ce.operator=he,Ce}_throwIfClosed(){if(this.closed)throw new R}next(he){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(he)}})}error(he){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(he)}})}complete(){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Ce,isStopped:dt,observers:ht}=this;return Ce||dt?p.Lc:(this.currentObservers=null,ht.push(he),new p.w0(()=>{this.currentObservers=null,(0,ve.P)(ht,he)}))}_checkFinalizedStatuses(he){const{hasError:Ce,thrownError:dt,isStopped:ht}=this;Ce?he.error(dt):ht&&he.complete()}asObservable(){const he=new C.y;return he.source=this,he}}return Ye.create=(re,he)=>new we(re,he),Ye})();class we extends je{constructor(re,he){super(),this.destination=re,this.source=he}next(re){var he,Ce;null===(Ce=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Ce||Ce.call(he,re)}error(re){var he,Ce;null===(Ce=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Ce||Ce.call(he,re)}complete(){var re,he;null===(he=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===he||he.call(re)}_subscribe(re){var he,Ce;return null!==(Ce=null===(he=this.source)||void 0===he?void 0:he.subscribe(re))&&void 0!==Ce?Ce:p.Lc}}},2961:(an,ot,j)=>{j.d(ot,{Hp:()=>Ft,Lv:()=>Ce});var C=j(576),p=j(727),Z=j(2416),R=j(7849);function ve(){}const Le=Ye("C",void 0,void 0);function Ye(Me,lt,Ge){return{kind:Me,value:lt,error:Ge}}var re=j(3410),he=j(2806);class Ce extends p.w0{constructor(lt){super(),this.isStopped=!1,lt?(this.destination=lt,(0,p.Nn)(lt)&&lt.add(this)):this.destination=$t}static create(lt,Ge,ct){return new Ft(lt,Ge,ct)}next(lt){this.isStopped?Vt(function we(Me){return Ye("N",Me,void 0)}(lt),this):this._next(lt)}error(lt){this.isStopped?Vt(function je(Me){return Ye("E",void 0,Me)}(lt),this):(this.isStopped=!0,this._error(lt))}complete(){this.isStopped?Vt(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(lt){this.destination.next(lt)}_error(lt){try{this.destination.error(lt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function ht(Me,lt){return dt.call(Me,lt)}class at{constructor(lt){this.partialObserver=lt}next(lt){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(lt)}catch(ct){it(ct)}}error(lt){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(lt)}catch(ct){it(ct)}else it(lt)}complete(){const{partialObserver:lt}=this;if(lt.complete)try{lt.complete()}catch(Ge){it(Ge)}}}class Ft extends Ce{constructor(lt,Ge,ct){let ee;if(super(),(0,C.m)(lt)||!lt)ee={next:lt??void 0,error:Ge??void 0,complete:ct??void 0};else{let ie;this&&Z.v.useDeprecatedNextContext?(ie=Object.create(lt),ie.unsubscribe=()=>this.unsubscribe(),ee={next:lt.next&&ht(lt.next,ie),error:lt.error&&ht(lt.error,ie),complete:lt.complete&&ht(lt.complete,ie)}):ee=lt}this.destination=new at(ee)}}function it(Me){Z.v.useDeprecatedSynchronousErrorHandling?(0,he.O)(Me):(0,R.h)(Me)}function Vt(Me,lt){const{onStoppedNotification:Ge}=Z.v;Ge&&re.z.setTimeout(()=>Ge(Me,lt))}const $t={closed:!0,next:ve,error:function et(Me){throw Me},complete:ve}},727:(an,ot,j)=>{j.d(ot,{Lc:()=>Le,w0:()=>ve,Nn:()=>je});var C=j(576);const Z=(0,j(3888).d)(Ye=>function(he){Ye(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Ce,dt)=>`${dt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var R=j(8737);class ve{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const ht of he)ht.remove(this);else he.remove(this);const{initialTeardown:Ce}=this;if((0,C.m)(Ce))try{Ce()}catch(ht){re=ht instanceof Z?ht.errors:[ht]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const ht of dt)try{we(ht)}catch(at){re=re??[],at instanceof Z?re=[...re,...at.errors]:re.push(at)}}if(re)throw new Z(re)}}add(re){var he;if(re&&re!==this)if(this.closed)we(re);else{if(re instanceof ve){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(re)}}_hasParent(re){const{_parentage:he}=this;return he===re||Array.isArray(he)&&he.includes(re)}_addParent(re){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(re),he):he?[he,re]:re}_removeParent(re){const{_parentage:he}=this;he===re?this._parentage=null:Array.isArray(he)&&(0,R.P)(he,re)}remove(re){const{_finalizers:he}=this;he&&(0,R.P)(he,re),re instanceof ve&&re._removeParent(this)}}ve.EMPTY=(()=>{const Ye=new ve;return Ye.closed=!0,Ye})();const Le=ve.EMPTY;function je(Ye){return Ye instanceof ve||Ye&&"closed"in Ye&&(0,C.m)(Ye.remove)&&(0,C.m)(Ye.add)&&(0,C.m)(Ye.unsubscribe)}function we(Ye){(0,C.m)(Ye)?Ye():Ye.unsubscribe()}},2416:(an,ot,j)=>{j.d(ot,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(an,ot,j)=>{j.d(ot,{z:()=>ve});var C=j(8189),Z=j(7669),R=j(8996);function ve(...Le){return function p(){return(0,C.J)(1)}()((0,R.D)(Le,(0,Z.yG)(Le)))}},515:(an,ot,j)=>{j.d(ot,{E:()=>p});const p=new(j(9751).y)(ve=>ve.complete())},8996:(an,ot,j)=>{j.d(ot,{D:()=>lt});var C=j(8421),p=j(5363),Z=j(9468),Le=j(9751),we=j(2202),Ye=j(576),re=j(9672);function Ce(Ge,ct){if(!Ge)throw new Error("Iterable cannot be null");return new Le.y(ee=>{(0,re.f)(ee,ct,()=>{const ie=Ge[Symbol.asyncIterator]();(0,re.f)(ee,ct,()=>{ie.next().then(Ze=>{Ze.done?ee.complete():ee.next(Ze.value)})},0,!0)})})}var dt=j(3670),ht=j(8239),at=j(1144),Ft=j(6495),it=j(2206),et=j(4532),Vt=j(3260);function lt(Ge,ct){return ct?function Me(Ge,ct){if(null!=Ge){if((0,dt.c)(Ge))return function R(Ge,ct){return(0,C.Xf)(Ge).pipe((0,Z.R)(ct),(0,p.Q)(ct))}(Ge,ct);if((0,at.z)(Ge))return function je(Ge,ct){return new Le.y(ee=>{let ie=0;return ct.schedule(function(){ie===Ge.length?ee.complete():(ee.next(Ge[ie++]),ee.closed||this.schedule())})})}(Ge,ct);if((0,ht.t)(Ge))return function ve(Ge,ct){return(0,C.Xf)(Ge).pipe((0,Z.R)(ct),(0,p.Q)(ct))}(Ge,ct);if((0,it.D)(Ge))return Ce(Ge,ct);if((0,Ft.T)(Ge))return function he(Ge,ct){return new Le.y(ee=>{let ie;return(0,re.f)(ee,ct,()=>{ie=Ge[we.h](),(0,re.f)(ee,ct,()=>{let Ze,Ne;try{({value:Ze,done:Ne}=ie.next())}catch(Ue){return void ee.error(Ue)}Ne?ee.complete():ee.next(Ze)},0,!0)}),()=>(0,Ye.m)(ie?.return)&&ie.return()})}(Ge,ct);if((0,Vt.L)(Ge))return function $t(Ge,ct){return Ce((0,Vt.Q)(Ge),ct)}(Ge,ct)}throw(0,et.z)(Ge)}(Ge,ct):(0,C.Xf)(Ge)}},8421:(an,ot,j)=>{j.d(ot,{Xf:()=>dt});var C=j(655),p=j(1144),Z=j(8239),R=j(9751),ve=j(3670),Le=j(2206),je=j(4532),we=j(6495),Ye=j(3260),re=j(576),he=j(7849),Ce=j(8822);function dt(Me){if(Me instanceof R.y)return Me;if(null!=Me){if((0,ve.c)(Me))return function ht(Me){return new R.y(lt=>{const Ge=Me[Ce.L]();if((0,re.m)(Ge.subscribe))return Ge.subscribe(lt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,p.z)(Me))return function at(Me){return new R.y(lt=>{for(let Ge=0;Ge<Me.length&&!lt.closed;Ge++)lt.next(Me[Ge]);lt.complete()})}(Me);if((0,Z.t)(Me))return function Ft(Me){return new R.y(lt=>{Me.then(Ge=>{lt.closed||(lt.next(Ge),lt.complete())},Ge=>lt.error(Ge)).then(null,he.h)})}(Me);if((0,Le.D)(Me))return et(Me);if((0,we.T)(Me))return function it(Me){return new R.y(lt=>{for(const Ge of Me)if(lt.next(Ge),lt.closed)return;lt.complete()})}(Me);if((0,Ye.L)(Me))return function Vt(Me){return et((0,Ye.Q)(Me))}(Me)}throw(0,je.z)(Me)}function et(Me){return new R.y(lt=>{(function $t(Me,lt){var Ge,ct,ee,ie;return(0,C.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,C.KL)(Me);!(ct=yield Ge.next()).done;)if(lt.next(ct.value),lt.closed)return}catch(Ze){ee={error:Ze}}finally{try{ct&&!ct.done&&(ie=Ge.return)&&(yield ie.call(Ge))}finally{if(ee)throw ee.error}}lt.complete()})})(Me,lt).catch(Ge=>lt.error(Ge))})}},6451:(an,ot,j)=>{j.d(ot,{T:()=>Le});var C=j(8189),p=j(8421),Z=j(515),R=j(7669),ve=j(8996);function Le(...je){const we=(0,R.yG)(je),Ye=(0,R._6)(je,1/0),re=je;return re.length?1===re.length?(0,p.Xf)(re[0]):(0,C.J)(Ye)((0,ve.D)(re,we)):Z.E}},9646:(an,ot,j)=>{j.d(ot,{of:()=>Z});var C=j(7669),p=j(8996);function Z(...R){const ve=(0,C.yG)(R);return(0,p.D)(R,ve)}},5403:(an,ot,j)=>{j.d(ot,{x:()=>p});var C=j(2961);function p(R,ve,Le,je,we){return new Z(R,ve,Le,je,we)}class Z extends C.Lv{constructor(ve,Le,je,we,Ye,re){super(ve),this.onFinalize=Ye,this.shouldUnsubscribe=re,this._next=Le?function(he){try{Le(he)}catch(Ce){ve.error(Ce)}}:super._next,this._error=we?function(he){try{we(he)}catch(Ce){ve.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=je?function(){try{je()}catch(he){ve.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ve;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Le}=this;super.unsubscribe(),!Le&&(null===(ve=this.onFinalize)||void 0===ve||ve.call(this))}}}},4351:(an,ot,j)=>{j.d(ot,{b:()=>Z});var C=j(5577),p=j(576);function Z(R,ve){return(0,p.m)(ve)?(0,C.z)(R,ve,1):(0,C.z)(R,1)}},6590:(an,ot,j)=>{j.d(ot,{d:()=>Z});var C=j(4482),p=j(5403);function Z(R){return(0,C.e)((ve,Le)=>{let je=!1;ve.subscribe((0,p.x)(Le,we=>{je=!0,Le.next(we)},()=>{je||Le.next(R),Le.complete()}))})}},9300:(an,ot,j)=>{j.d(ot,{h:()=>Z});var C=j(4482),p=j(5403);function Z(R,ve){return(0,C.e)((Le,je)=>{let we=0;Le.subscribe((0,p.x)(je,Ye=>R.call(ve,Ye,we++)&&je.next(Ye)))})}},590:(an,ot,j)=>{j.d(ot,{P:()=>je});var C=j(6805),p=j(9300),Z=j(5698),R=j(6590),ve=j(8068),Le=j(4671);function je(we,Ye){const re=arguments.length>=2;return he=>he.pipe(we?(0,p.h)((Ce,dt)=>we(Ce,dt,he)):Le.y,(0,Z.q)(1),re?(0,R.d)(Ye):(0,ve.T)(()=>new C.K))}},4004:(an,ot,j)=>{j.d(ot,{U:()=>Z});var C=j(4482),p=j(5403);function Z(R,ve){return(0,C.e)((Le,je)=>{let we=0;Le.subscribe((0,p.x)(je,Ye=>{je.next(R.call(ve,Ye,we++))}))})}},8189:(an,ot,j)=>{j.d(ot,{J:()=>Z});var C=j(5577),p=j(4671);function Z(R=1/0){return(0,C.z)(p.y,R)}},5577:(an,ot,j)=>{j.d(ot,{z:()=>we});var C=j(4004),p=j(8421),Z=j(4482),R=j(9672),ve=j(5403),je=j(576);function we(Ye,re,he=1/0){return(0,je.m)(re)?we((Ce,dt)=>(0,C.U)((ht,at)=>re(Ce,ht,dt,at))((0,p.Xf)(Ye(Ce,dt))),he):("number"==typeof re&&(he=re),(0,Z.e)((Ce,dt)=>function Le(Ye,re,he,Ce,dt,ht,at,Ft){const it=[];let et=0,Vt=0,$t=!1;const Me=()=>{$t&&!it.length&&!et&&re.complete()},lt=ct=>et<Ce?Ge(ct):it.push(ct),Ge=ct=>{ht&&re.next(ct),et++;let ee=!1;(0,p.Xf)(he(ct,Vt++)).subscribe((0,ve.x)(re,ie=>{dt?.(ie),ht?lt(ie):re.next(ie)},()=>{ee=!0},void 0,()=>{if(ee)try{for(et--;it.length&&et<Ce;){const ie=it.shift();at?(0,R.f)(re,at,()=>Ge(ie)):Ge(ie)}Me()}catch(ie){re.error(ie)}}))};return Ye.subscribe((0,ve.x)(re,lt,()=>{$t=!0,Me()})),()=>{Ft?.()}}(Ce,dt,Ye,he)))}},5363:(an,ot,j)=>{j.d(ot,{Q:()=>R});var C=j(9672),p=j(4482),Z=j(5403);function R(ve,Le=0){return(0,p.e)((je,we)=>{je.subscribe((0,Z.x)(we,Ye=>(0,C.f)(we,ve,()=>we.next(Ye),Le),()=>(0,C.f)(we,ve,()=>we.complete(),Le),Ye=>(0,C.f)(we,ve,()=>we.error(Ye),Le)))})}},5026:(an,ot,j)=>{j.d(ot,{R:()=>R});var C=j(4482),p=j(5403);function Z(ve,Le,je,we,Ye){return(re,he)=>{let Ce=je,dt=Le,ht=0;re.subscribe((0,p.x)(he,at=>{const Ft=ht++;dt=Ce?ve(dt,at,Ft):(Ce=!0,at),we&&he.next(dt)},Ye&&(()=>{Ce&&he.next(dt),he.complete()})))}}function R(ve,Le){return(0,C.e)(Z(ve,Le,arguments.length>=2,!0))}},3099:(an,ot,j)=>{j.d(ot,{B:()=>ve});var C=j(8421),p=j(7579),Z=j(2961),R=j(4482);function ve(je={}){const{connector:we=(()=>new p.x),resetOnError:Ye=!0,resetOnComplete:re=!0,resetOnRefCountZero:he=!0}=je;return Ce=>{let dt,ht,at,Ft=0,it=!1,et=!1;const Vt=()=>{ht?.unsubscribe(),ht=void 0},$t=()=>{Vt(),dt=at=void 0,it=et=!1},Me=()=>{const lt=dt;$t(),lt?.unsubscribe()};return(0,R.e)((lt,Ge)=>{Ft++,!et&&!it&&Vt();const ct=at=at??we();Ge.add(()=>{Ft--,0===Ft&&!et&&!it&&(ht=Le(Me,he))}),ct.subscribe(Ge),!dt&&Ft>0&&(dt=new Z.Hp({next:ee=>ct.next(ee),error:ee=>{et=!0,Vt(),ht=Le($t,Ye,ee),ct.error(ee)},complete:()=>{it=!0,Vt(),ht=Le($t,re),ct.complete()}}),(0,C.Xf)(lt).subscribe(dt))})(Ce)}}function Le(je,we,...Ye){if(!0===we)return void je();if(!1===we)return;const re=new Z.Hp({next:()=>{re.unsubscribe(),je()}});return we(...Ye).subscribe(re)}},8675:(an,ot,j)=>{j.d(ot,{O:()=>R});var C=j(7272),p=j(7669),Z=j(4482);function R(...ve){const Le=(0,p.yG)(ve);return(0,Z.e)((je,we)=>{(Le?(0,C.z)(ve,je,Le):(0,C.z)(ve,je)).subscribe(we)})}},9468:(an,ot,j)=>{j.d(ot,{R:()=>p});var C=j(4482);function p(Z,R=0){return(0,C.e)((ve,Le)=>{Le.add(Z.schedule(()=>ve.subscribe(Le),R))})}},3900:(an,ot,j)=>{j.d(ot,{w:()=>R});var C=j(8421),p=j(4482),Z=j(5403);function R(ve,Le){return(0,p.e)((je,we)=>{let Ye=null,re=0,he=!1;const Ce=()=>he&&!Ye&&we.complete();je.subscribe((0,Z.x)(we,dt=>{Ye?.unsubscribe();let ht=0;const at=re++;(0,C.Xf)(ve(dt,at)).subscribe(Ye=(0,Z.x)(we,Ft=>we.next(Le?Le(dt,Ft,at,ht++):Ft),()=>{Ye=null,Ce()}))},()=>{he=!0,Ce()}))})}},5698:(an,ot,j)=>{j.d(ot,{q:()=>R});var C=j(515),p=j(4482),Z=j(5403);function R(ve){return ve<=0?()=>C.E:(0,p.e)((Le,je)=>{let we=0;Le.subscribe((0,Z.x)(je,Ye=>{++we<=ve&&(je.next(Ye),ve<=we&&je.complete())}))})}},8505:(an,ot,j)=>{j.d(ot,{b:()=>ve});var C=j(576),p=j(4482),Z=j(5403),R=j(4671);function ve(Le,je,we){const Ye=(0,C.m)(Le)||je||we?{next:Le,error:je,complete:we}:Le;return Ye?(0,p.e)((re,he)=>{var Ce;null===(Ce=Ye.subscribe)||void 0===Ce||Ce.call(Ye);let dt=!0;re.subscribe((0,Z.x)(he,ht=>{var at;null===(at=Ye.next)||void 0===at||at.call(Ye,ht),he.next(ht)},()=>{var ht;dt=!1,null===(ht=Ye.complete)||void 0===ht||ht.call(Ye),he.complete()},ht=>{var at;dt=!1,null===(at=Ye.error)||void 0===at||at.call(Ye,ht),he.error(ht)},()=>{var ht,at;dt&&(null===(ht=Ye.unsubscribe)||void 0===ht||ht.call(Ye)),null===(at=Ye.finalize)||void 0===at||at.call(Ye)}))}):R.y}},8068:(an,ot,j)=>{j.d(ot,{T:()=>R});var C=j(6805),p=j(4482),Z=j(5403);function R(Le=ve){return(0,p.e)((je,we)=>{let Ye=!1;je.subscribe((0,Z.x)(we,re=>{Ye=!0,we.next(re)},()=>Ye?we.complete():we.error(Le())))})}function ve(){return new C.K}},4408:(an,ot,j)=>{j.d(ot,{o:()=>ve});var C=j(727);class p extends C.w0{constructor(je,we){super()}schedule(je,we=0){return this}}const Z={setInterval(Le,je,...we){const{delegate:Ye}=Z;return Ye?.setInterval?Ye.setInterval(Le,je,...we):setInterval(Le,je,...we)},clearInterval(Le){const{delegate:je}=Z;return(je?.clearInterval||clearInterval)(Le)},delegate:void 0};var R=j(8737);class ve extends p{constructor(je,we){super(je,we),this.scheduler=je,this.work=we,this.pending=!1}schedule(je,we=0){if(this.closed)return this;this.state=je;const Ye=this.id,re=this.scheduler;return null!=Ye&&(this.id=this.recycleAsyncId(re,Ye,we)),this.pending=!0,this.delay=we,this.id=this.id||this.requestAsyncId(re,this.id,we),this}requestAsyncId(je,we,Ye=0){return Z.setInterval(je.flush.bind(je,this),Ye)}recycleAsyncId(je,we,Ye=0){if(null!=Ye&&this.delay===Ye&&!1===this.pending)return we;Z.clearInterval(we)}execute(je,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ye=this._execute(je,we);if(Ye)return Ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(je,we){let re,Ye=!1;try{this.work(je)}catch(he){Ye=!0,re=he||new Error("Scheduled action threw falsy error")}if(Ye)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:je,scheduler:we}=this,{actions:Ye}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,R.P)(Ye,this),null!=je&&(this.id=this.recycleAsyncId(we,je,null)),this.delay=null,super.unsubscribe()}}}},7565:(an,ot,j)=>{j.d(ot,{v:()=>Z});var C=j(6063);class p{constructor(ve,Le=p.now){this.schedulerActionCtor=ve,this.now=Le}schedule(ve,Le=0,je){return new this.schedulerActionCtor(this,ve).schedule(je,Le)}}p.now=C.l.now;class Z extends p{constructor(ve,Le=p.now){super(ve,Le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ve){const{actions:Le}=this;if(this._active)return void Le.push(ve);let je;this._active=!0;do{if(je=ve.execute(ve.state,ve.delay))break}while(ve=Le.shift());if(this._active=!1,je){for(;ve=Le.shift();)ve.unsubscribe();throw je}}}},4986:(an,ot,j)=>{j.d(ot,{z:()=>Z});var C=j(4408);const Z=new(j(7565).v)(C.o)},6063:(an,ot,j)=>{j.d(ot,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},3410:(an,ot,j)=>{j.d(ot,{z:()=>C});const C={setTimeout(p,Z,...R){const{delegate:ve}=C;return ve?.setTimeout?ve.setTimeout(p,Z,...R):setTimeout(p,Z,...R)},clearTimeout(p){const{delegate:Z}=C;return(Z?.clearTimeout||clearTimeout)(p)},delegate:void 0}},2202:(an,ot,j)=>{j.d(ot,{h:()=>p});const p=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(an,ot,j)=>{j.d(ot,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(an,ot,j)=>{j.d(ot,{K:()=>p});const p=(0,j(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(an,ot,j)=>{j.d(ot,{_6:()=>Le,jO:()=>R,yG:()=>ve});var C=j(576);function Z(je){return je[je.length-1]}function R(je){return(0,C.m)(Z(je))?je.pop():void 0}function ve(je){return function p(je){return je&&(0,C.m)(je.schedule)}(Z(je))?je.pop():void 0}function Le(je,we){return"number"==typeof Z(je)?je.pop():we}},4742:(an,ot,j)=>{j.d(ot,{D:()=>ve});const{isArray:C}=Array,{getPrototypeOf:p,prototype:Z,keys:R}=Object;function ve(je){if(1===je.length){const we=je[0];if(C(we))return{args:we,keys:null};if(function Le(je){return je&&"object"==typeof je&&p(je)===Z}(we)){const Ye=R(we);return{args:Ye.map(re=>we[re]),keys:Ye}}}return{args:je,keys:null}}},8737:(an,ot,j)=>{function C(p,Z){if(p){const R=p.indexOf(Z);0<=R&&p.splice(R,1)}}j.d(ot,{P:()=>C})},3888:(an,ot,j)=>{function C(p){const R=p(ve=>{Error.call(ve),ve.stack=(new Error).stack});return R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R}j.d(ot,{d:()=>C})},1810:(an,ot,j)=>{function C(p,Z){return p.reduce((R,ve,Le)=>(R[ve]=Z[Le],R),{})}j.d(ot,{n:()=>C})},2806:(an,ot,j)=>{j.d(ot,{O:()=>R,x:()=>Z});var C=j(2416);let p=null;function Z(ve){if(C.v.useDeprecatedSynchronousErrorHandling){const Le=!p;if(Le&&(p={errorThrown:!1,error:null}),ve(),Le){const{errorThrown:je,error:we}=p;if(p=null,je)throw we}}else ve()}function R(ve){C.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=ve)}},9672:(an,ot,j)=>{function C(p,Z,R,ve=0,Le=!1){const je=Z.schedule(function(){R(),Le?p.add(this.schedule(null,ve)):this.unsubscribe()},ve);if(p.add(je),!Le)return je}j.d(ot,{f:()=>C})},4671:(an,ot,j)=>{function C(p){return p}j.d(ot,{y:()=>C})},1144:(an,ot,j)=>{j.d(ot,{z:()=>C});const C=p=>p&&"number"==typeof p.length&&"function"!=typeof p},2206:(an,ot,j)=>{j.d(ot,{D:()=>p});var C=j(576);function p(Z){return Symbol.asyncIterator&&(0,C.m)(Z?.[Symbol.asyncIterator])}},576:(an,ot,j)=>{function C(p){return"function"==typeof p}j.d(ot,{m:()=>C})},3670:(an,ot,j)=>{j.d(ot,{c:()=>Z});var C=j(8822),p=j(576);function Z(R){return(0,p.m)(R[C.L])}},6495:(an,ot,j)=>{j.d(ot,{T:()=>Z});var C=j(2202),p=j(576);function Z(R){return(0,p.m)(R?.[C.h])}},8239:(an,ot,j)=>{j.d(ot,{t:()=>p});var C=j(576);function p(Z){return(0,C.m)(Z?.then)}},3260:(an,ot,j)=>{j.d(ot,{L:()=>R,Q:()=>Z});var C=j(655),p=j(576);function Z(ve){return(0,C.FC)(this,arguments,function*(){const je=ve.getReader();try{for(;;){const{value:we,done:Ye}=yield(0,C.qq)(je.read());if(Ye)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(we)}}finally{je.releaseLock()}})}function R(ve){return(0,p.m)(ve?.getReader)}},4482:(an,ot,j)=>{j.d(ot,{A:()=>p,e:()=>Z});var C=j(576);function p(R){return(0,C.m)(R?.lift)}function Z(R){return ve=>{if(p(ve))return ve.lift(function(Le){try{return R(Le,this)}catch(je){this.error(je)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(an,ot,j)=>{j.d(ot,{Z:()=>R});var C=j(4004);const{isArray:p}=Array;function R(ve){return(0,C.U)(Le=>function Z(ve,Le){return p(Le)?ve(...Le):ve(Le)}(ve,Le))}},9635:(an,ot,j)=>{j.d(ot,{U:()=>Z,z:()=>p});var C=j(4671);function p(...R){return Z(R)}function Z(R){return 0===R.length?C.y:1===R.length?R[0]:function(Le){return R.reduce((je,we)=>we(je),Le)}}},7849:(an,ot,j)=>{j.d(ot,{h:()=>Z});var C=j(2416),p=j(3410);function Z(R){p.z.setTimeout(()=>{const{onUnhandledError:ve}=C.v;if(!ve)throw R;ve(R)})}},4532:(an,ot,j)=>{function C(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ot,{z:()=>C})},655:(an,ot,j)=>{function R(Ne,Ue){var $e={};for(var Ke in Ne)Object.prototype.hasOwnProperty.call(Ne,Ke)&&Ue.indexOf(Ke)<0&&($e[Ke]=Ne[Ke]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var Rt=0;for(Ke=Object.getOwnPropertySymbols(Ne);Rt<Ke.length;Rt++)Ue.indexOf(Ke[Rt])<0&&Object.prototype.propertyIsEnumerable.call(Ne,Ke[Rt])&&($e[Ke[Rt]]=Ne[Ke[Rt]])}return $e}function we(Ne,Ue,$e,Ke){return new($e||($e=Promise))(function(bt,Yt){function wn(tn){try{Mt(Ke.next(tn))}catch(Gn){Yt(Gn)}}function An(tn){try{Mt(Ke.throw(tn))}catch(Gn){Yt(Gn)}}function Mt(tn){tn.done?bt(tn.value):function Rt(bt){return bt instanceof $e?bt:new $e(function(Yt){Yt(bt)})}(tn.value).then(wn,An)}Mt((Ke=Ke.apply(Ne,Ue||[])).next())})}function it(Ne){return this instanceof it?(this.v=Ne,this):new it(Ne)}function et(Ne,Ue,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Rt,Ke=$e.apply(Ne,Ue||[]),bt=[];return Rt={},Yt("next"),Yt("throw"),Yt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function Yt(On){Ke[On]&&(Rt[On]=function(Kn){return new Promise(function(Vn,fn){bt.push([On,Kn,Vn,fn])>1||wn(On,Kn)})})}function wn(On,Kn){try{!function An(On){On.value instanceof it?Promise.resolve(On.value.v).then(Mt,tn):Gn(bt[0][2],On)}(Ke[On](Kn))}catch(Vn){Gn(bt[0][3],Vn)}}function Mt(On){wn("next",On)}function tn(On){wn("throw",On)}function Gn(On,Kn){On(Kn),bt.shift(),bt.length&&wn(bt[0][0],bt[0][1])}}function $t(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Ue=Ne[Symbol.asyncIterator];return Ue?Ue.call(Ne):(Ne=function Ce(Ne){var Ue="function"==typeof Symbol&&Symbol.iterator,$e=Ue&&Ne[Ue],Ke=0;if($e)return $e.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&Ke>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[Ke++],done:!Ne}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),$e={},Ke("next"),Ke("throw"),Ke("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function Ke(bt){$e[bt]=Ne[bt]&&function(Yt){return new Promise(function(wn,An){!function Rt(bt,Yt,wn,An){Promise.resolve(An).then(function(Mt){bt({value:Mt,done:wn})},Yt)}(wn,An,(Yt=Ne[bt](Yt)).done,Yt.value)})}}}j.d(ot,{FC:()=>et,KL:()=>$t,_T:()=>R,mG:()=>we,qq:()=>it})},6895:(an,ot,j)=>{j.d(ot,{Do:()=>$t,EM:()=>Se,HT:()=>ve,JF:()=>Ct,K0:()=>je,Mx:()=>ri,O5:()=>nt,Ov:()=>Ta,PC:()=>_i,PM:()=>ko,S$:()=>it,V_:()=>re,Ye:()=>Me,b0:()=>Vt,bD:()=>xi,ez:()=>Go,q:()=>Z,sg:()=>kn,uU:()=>gr,w_:()=>Le});var C=j(4650);let p=null;function Z(){return p}function ve(F){p||(p=F)}class Le{}const je=new C.OlP("DocumentToken");let we=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return function Ye(){return(0,C.LFG)(he)}()},providedIn:"platform"}),F})();const re=new C.OlP("Location Initialized");let he=(()=>{class F extends we{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(U){const Q=Z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",U,!1),()=>Q.removeEventListener("popstate",U)}onHashChange(U){const Q=Z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",U,!1),()=>Q.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,Q,Oe){Ce()?this._history.pushState(U,Q,Oe):this.location.hash=Oe}replaceState(U,Q,Oe){Ce()?this._history.replaceState(U,Q,Oe):this.location.hash=Oe}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(je))},F.\u0275prov=C.Yz7({token:F,factory:function(){return function dt(){return new he((0,C.LFG)(je))}()},providedIn:"platform"}),F})();function Ce(){return!!window.history.pushState}function ht(F,z){if(0==F.length)return z;if(0==z.length)return F;let U=0;return F.endsWith("/")&&U++,z.startsWith("/")&&U++,2==U?F+z.substring(1):1==U?F+z:F+"/"+z}function at(F){const z=F.match(/#|\?|$/),U=z&&z.index||F.length;return F.slice(0,U-("/"===F[U-1]?1:0))+F.slice(U)}function Ft(F){return F&&"?"!==F[0]?"?"+F:F}let it=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return(0,C.f3M)(Vt)},providedIn:"root"}),F})();const et=new C.OlP("appBaseHref");let Vt=(()=>{class F extends it{constructor(U,Q){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return ht(this._baseHref,U)}path(U=!1){const Q=this._platformLocation.pathname+Ft(this._platformLocation.search),Oe=this._platformLocation.hash;return Oe&&U?`${Q}${Oe}`:Q}pushState(U,Q,Oe,wt){const Tt=this.prepareExternalUrl(Oe+Ft(wt));this._platformLocation.pushState(U,Q,Tt)}replaceState(U,Q,Oe,wt){const Tt=this.prepareExternalUrl(Oe+Ft(wt));this._platformLocation.replaceState(U,Q,Tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(we),C.LFG(et,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),$t=(()=>{class F extends it{constructor(U,Q){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(U){const Q=ht(this._baseHref,U);return Q.length>0?"#"+Q:Q}pushState(U,Q,Oe,wt){let Tt=this.prepareExternalUrl(Oe+Ft(wt));0==Tt.length&&(Tt=this._platformLocation.pathname),this._platformLocation.pushState(U,Q,Tt)}replaceState(U,Q,Oe,wt){let Tt=this.prepareExternalUrl(Oe+Ft(wt));0==Tt.length&&(Tt=this._platformLocation.pathname),this._platformLocation.replaceState(U,Q,Tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return F.\u0275fac=function(U){return new(U||F)(C.LFG(we),C.LFG(et,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac}),F})(),Me=(()=>{class F{constructor(U){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const Q=this._locationStrategy.getBaseHref();this._baseHref=at(ct(Q)),this._locationStrategy.onPopState(Oe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Oe.state,type:Oe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,Q=""){return this.path()==this.normalize(U+Ft(Q))}normalize(U){return F.stripTrailingSlash(function Ge(F,z){return F&&z.startsWith(F)?z.substring(F.length):z}(this._baseHref,ct(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,Q="",Oe=null){this._locationStrategy.pushState(Oe,"",U,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ft(Q)),Oe)}replaceState(U,Q="",Oe=null){this._locationStrategy.replaceState(Oe,"",U,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ft(Q)),Oe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",Q){this._urlChangeListeners.forEach(Oe=>Oe(U,Q))}subscribe(U,Q,Oe){return this._subject.subscribe({next:U,error:Q,complete:Oe})}}return F.normalizeQueryParams=Ft,F.joinWithSlash=ht,F.stripTrailingSlash=at,F.\u0275fac=function(U){return new(U||F)(C.LFG(it))},F.\u0275prov=C.Yz7({token:F,factory:function(){return function lt(){return new Me((0,C.LFG)(it))}()},providedIn:"root"}),F})();function ct(F){return F.replace(/\/index.html$/,"")}var Ne=(()=>((Ne=Ne||{})[Ne.Format=0]="Format",Ne[Ne.Standalone=1]="Standalone",Ne))(),Ue=(()=>((Ue=Ue||{})[Ue.Narrow=0]="Narrow",Ue[Ue.Abbreviated=1]="Abbreviated",Ue[Ue.Wide=2]="Wide",Ue[Ue.Short=3]="Short",Ue))(),$e=(()=>(($e=$e||{})[$e.Short=0]="Short",$e[$e.Medium=1]="Medium",$e[$e.Long=2]="Long",$e[$e.Full=3]="Full",$e))(),Ke=(()=>((Ke=Ke||{})[Ke.Decimal=0]="Decimal",Ke[Ke.Group=1]="Group",Ke[Ke.List=2]="List",Ke[Ke.PercentSign=3]="PercentSign",Ke[Ke.PlusSign=4]="PlusSign",Ke[Ke.MinusSign=5]="MinusSign",Ke[Ke.Exponential=6]="Exponential",Ke[Ke.SuperscriptingExponent=7]="SuperscriptingExponent",Ke[Ke.PerMille=8]="PerMille",Ke[Ke.Infinity=9]="Infinity",Ke[Ke.NaN=10]="NaN",Ke[Ke.TimeSeparator=11]="TimeSeparator",Ke[Ke.CurrencyDecimal=12]="CurrencyDecimal",Ke[Ke.CurrencyGroup=13]="CurrencyGroup",Ke))();function On(F,z){return Xt((0,C.cg1)(F)[C.wAp.DateFormat],z)}function Kn(F,z){return Xt((0,C.cg1)(F)[C.wAp.TimeFormat],z)}function Vn(F,z){return Xt((0,C.cg1)(F)[C.wAp.DateTimeFormat],z)}function fn(F,z){const U=(0,C.cg1)(F),Q=U[C.wAp.NumberSymbols][z];if(typeof Q>"u"){if(z===Ke.CurrencyDecimal)return U[C.wAp.NumberSymbols][Ke.Decimal];if(z===Ke.CurrencyGroup)return U[C.wAp.NumberSymbols][Ke.Group]}return Q}function ln(F){if(!F[C.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[C.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xt(F,z){for(let U=z;U>-1;U--)if(typeof F[U]<"u")return F[U];throw new Error("Locale data API: locale data undefined")}function dr(F){const[z,U]=F.split(":");return{hours:+z,minutes:+U}}const oi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Er={},tt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var me=(()=>((me=me||{})[me.Short=0]="Short",me[me.ShortGMT=1]="ShortGMT",me[me.Long=2]="Long",me[me.Extended=3]="Extended",me))(),_e=(()=>((_e=_e||{})[_e.FullYear=0]="FullYear",_e[_e.Month=1]="Month",_e[_e.Date=2]="Date",_e[_e.Hours=3]="Hours",_e[_e.Minutes=4]="Minutes",_e[_e.Seconds=5]="Seconds",_e[_e.FractionalSeconds=6]="FractionalSeconds",_e[_e.Day=7]="Day",_e))(),ft=(()=>((ft=ft||{})[ft.DayPeriods=0]="DayPeriods",ft[ft.Days=1]="Days",ft[ft.Months=2]="Months",ft[ft.Eras=3]="Eras",ft))();function gt(F,z,U,Q){let Oe=function Fe(F){if(Bt(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[Oe,wt=1,Tt=1]=F.split("-").map(Nn=>+Nn);return nn(Oe,wt-1,Tt)}const U=parseFloat(F);if(!isNaN(F-U))return new Date(U);let Q;if(Q=F.match(oi))return function vt(F){const z=new Date(0);let U=0,Q=0;const Oe=F[8]?z.setUTCFullYear:z.setFullYear,wt=F[8]?z.setUTCHours:z.setHours;F[9]&&(U=Number(F[9]+F[10]),Q=Number(F[9]+F[11])),Oe.call(z,Number(F[1]),Number(F[2])-1,Number(F[3]));const Tt=Number(F[4]||0)-U,Nn=Number(F[5]||0)-Q,Xr=Number(F[6]||0),Br=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return wt.call(z,Tt,Nn,Xr,Br),z}(Q)}const z=new Date(F);if(!Bt(z))throw new Error(`Unable to convert "${F}" into a date`);return z}(F);z=vn(U,z)||z;let Nn,Tt=[];for(;z;){if(Nn=tt.exec(z),!Nn){Tt.push(z);break}{Tt=Tt.concat(Nn.slice(1));const Kr=Tt.pop();if(!Kr)break;z=Kr}}let Xr=Oe.getTimezoneOffset();Q&&(Xr=Ir(Q,Xr),Oe=function Ae(F,z,U){const Q=U?-1:1,Oe=F.getTimezoneOffset();return function Je(F,z){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+z),F}(F,Q*(Ir(z,Oe)-Oe))}(Oe,Q,!0));let Br="";return Tt.forEach(Kr=>{const Fr=function Qn(F){if(rr[F])return rr[F];let z;switch(F){case"G":case"GG":case"GGG":z=xn(ft.Eras,Ue.Abbreviated);break;case"GGGG":z=xn(ft.Eras,Ue.Wide);break;case"GGGGG":z=xn(ft.Eras,Ue.Narrow);break;case"y":z=En(_e.FullYear,1,0,!1,!0);break;case"yy":z=En(_e.FullYear,2,0,!0,!0);break;case"yyy":z=En(_e.FullYear,3,0,!1,!0);break;case"yyyy":z=En(_e.FullYear,4,0,!1,!0);break;case"Y":z=yn(1);break;case"YY":z=yn(2,!0);break;case"YYY":z=yn(3);break;case"YYYY":z=yn(4);break;case"M":case"L":z=En(_e.Month,1,1);break;case"MM":case"LL":z=En(_e.Month,2,1);break;case"MMM":z=xn(ft.Months,Ue.Abbreviated);break;case"MMMM":z=xn(ft.Months,Ue.Wide);break;case"MMMMM":z=xn(ft.Months,Ue.Narrow);break;case"LLL":z=xn(ft.Months,Ue.Abbreviated,Ne.Standalone);break;case"LLLL":z=xn(ft.Months,Ue.Wide,Ne.Standalone);break;case"LLLLL":z=xn(ft.Months,Ue.Narrow,Ne.Standalone);break;case"w":z=kt(1);break;case"ww":z=kt(2);break;case"W":z=kt(1,!0);break;case"d":z=En(_e.Date,1);break;case"dd":z=En(_e.Date,2);break;case"c":case"cc":z=En(_e.Day,1);break;case"ccc":z=xn(ft.Days,Ue.Abbreviated,Ne.Standalone);break;case"cccc":z=xn(ft.Days,Ue.Wide,Ne.Standalone);break;case"ccccc":z=xn(ft.Days,Ue.Narrow,Ne.Standalone);break;case"cccccc":z=xn(ft.Days,Ue.Short,Ne.Standalone);break;case"E":case"EE":case"EEE":z=xn(ft.Days,Ue.Abbreviated);break;case"EEEE":z=xn(ft.Days,Ue.Wide);break;case"EEEEE":z=xn(ft.Days,Ue.Narrow);break;case"EEEEEE":z=xn(ft.Days,Ue.Short);break;case"a":case"aa":case"aaa":z=xn(ft.DayPeriods,Ue.Abbreviated);break;case"aaaa":z=xn(ft.DayPeriods,Ue.Wide);break;case"aaaaa":z=xn(ft.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":z=xn(ft.DayPeriods,Ue.Abbreviated,Ne.Standalone,!0);break;case"bbbb":z=xn(ft.DayPeriods,Ue.Wide,Ne.Standalone,!0);break;case"bbbbb":z=xn(ft.DayPeriods,Ue.Narrow,Ne.Standalone,!0);break;case"B":case"BB":case"BBB":z=xn(ft.DayPeriods,Ue.Abbreviated,Ne.Format,!0);break;case"BBBB":z=xn(ft.DayPeriods,Ue.Wide,Ne.Format,!0);break;case"BBBBB":z=xn(ft.DayPeriods,Ue.Narrow,Ne.Format,!0);break;case"h":z=En(_e.Hours,1,-12);break;case"hh":z=En(_e.Hours,2,-12);break;case"H":z=En(_e.Hours,1);break;case"HH":z=En(_e.Hours,2);break;case"m":z=En(_e.Minutes,1);break;case"mm":z=En(_e.Minutes,2);break;case"s":z=En(_e.Seconds,1);break;case"ss":z=En(_e.Seconds,2);break;case"S":z=En(_e.FractionalSeconds,1);break;case"SS":z=En(_e.FractionalSeconds,2);break;case"SSS":z=En(_e.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":z=le(me.Short);break;case"ZZZZZ":z=le(me.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":z=le(me.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":z=le(me.Long);break;default:return null}return rr[F]=z,z}(Kr);Br+=Fr?Fr(Oe,U,Xr):"''"===Kr?"'":Kr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Br}function nn(F,z,U){const Q=new Date(0);return Q.setFullYear(F,z,U),Q.setHours(0,0,0),Q}function vn(F,z){const U=function bt(F){return(0,C.cg1)(F)[C.wAp.LocaleId]}(F);if(Er[U]=Er[U]||{},Er[U][z])return Er[U][z];let Q="";switch(z){case"shortDate":Q=On(F,$e.Short);break;case"mediumDate":Q=On(F,$e.Medium);break;case"longDate":Q=On(F,$e.Long);break;case"fullDate":Q=On(F,$e.Full);break;case"shortTime":Q=Kn(F,$e.Short);break;case"mediumTime":Q=Kn(F,$e.Medium);break;case"longTime":Q=Kn(F,$e.Long);break;case"fullTime":Q=Kn(F,$e.Full);break;case"short":const Oe=vn(F,"shortTime"),wt=vn(F,"shortDate");Q=Hn(Vn(F,$e.Short),[Oe,wt]);break;case"medium":const Tt=vn(F,"mediumTime"),Nn=vn(F,"mediumDate");Q=Hn(Vn(F,$e.Medium),[Tt,Nn]);break;case"long":const Xr=vn(F,"longTime"),Br=vn(F,"longDate");Q=Hn(Vn(F,$e.Long),[Xr,Br]);break;case"full":const Kr=vn(F,"fullTime"),Fr=vn(F,"fullDate");Q=Hn(Vn(F,$e.Full),[Kr,Fr])}return Q&&(Er[U][z]=Q),Q}function Hn(F,z){return z&&(F=F.replace(/\{([^}]+)}/g,function(U,Q){return null!=z&&Q in z?z[Q]:U})),F}function Ht(F,z,U="-",Q,Oe){let wt="";(F<0||Oe&&F<=0)&&(Oe?F=1-F:(F=-F,wt=U));let Tt=String(F);for(;Tt.length<z;)Tt="0"+Tt;return Q&&(Tt=Tt.slice(Tt.length-z)),wt+Tt}function En(F,z,U=0,Q=!1,Oe=!1){return function(wt,Tt){let Nn=function Rr(F,z){switch(F){case _e.FullYear:return z.getFullYear();case _e.Month:return z.getMonth();case _e.Date:return z.getDate();case _e.Hours:return z.getHours();case _e.Minutes:return z.getMinutes();case _e.Seconds:return z.getSeconds();case _e.FractionalSeconds:return z.getMilliseconds();case _e.Day:return z.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,wt);if((U>0||Nn>-U)&&(Nn+=U),F===_e.Hours)0===Nn&&-12===U&&(Nn=12);else if(F===_e.FractionalSeconds)return function tr(F,z){return Ht(F,3).substring(0,z)}(Nn,z);const Xr=fn(Tt,Ke.MinusSign);return Ht(Nn,z,Xr,Q,Oe)}}function xn(F,z,U=Ne.Format,Q=!1){return function(Oe,wt){return function De(F,z,U,Q,Oe,wt){switch(U){case ft.Months:return function An(F,z,U){const Q=(0,C.cg1)(F),wt=Xt([Q[C.wAp.MonthsFormat],Q[C.wAp.MonthsStandalone]],z);return Xt(wt,U)}(z,Oe,Q)[F.getMonth()];case ft.Days:return function wn(F,z,U){const Q=(0,C.cg1)(F),wt=Xt([Q[C.wAp.DaysFormat],Q[C.wAp.DaysStandalone]],z);return Xt(wt,U)}(z,Oe,Q)[F.getDay()];case ft.DayPeriods:const Tt=F.getHours(),Nn=F.getMinutes();if(wt){const Br=function qn(F){const z=(0,C.cg1)(F);return ln(z),(z[C.wAp.ExtraData][2]||[]).map(Q=>"string"==typeof Q?dr(Q):[dr(Q[0]),dr(Q[1])])}(z),Kr=function Pr(F,z,U){const Q=(0,C.cg1)(F);ln(Q);const wt=Xt([Q[C.wAp.ExtraData][0],Q[C.wAp.ExtraData][1]],z)||[];return Xt(wt,U)||[]}(z,Oe,Q),Fr=Br.findIndex(hi=>{if(Array.isArray(hi)){const[jr,ui]=hi,lo=Tt>=jr.hours&&Nn>=jr.minutes,Lr=Tt<ui.hours||Tt===ui.hours&&Nn<ui.minutes;if(jr.hours<ui.hours){if(lo&&Lr)return!0}else if(lo||Lr)return!0}else if(hi.hours===Tt&&hi.minutes===Nn)return!0;return!1});if(-1!==Fr)return Kr[Fr]}return function Yt(F,z,U){const Q=(0,C.cg1)(F),wt=Xt([Q[C.wAp.DayPeriodsFormat],Q[C.wAp.DayPeriodsStandalone]],z);return Xt(wt,U)}(z,Oe,Q)[Tt<12?0:1];case ft.Eras:return function Mt(F,z){return Xt((0,C.cg1)(F)[C.wAp.Eras],z)}(z,Q)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(Oe,wt,F,z,U,Q)}}function le(F){return function(z,U,Q){const Oe=-1*Q,wt=fn(U,Ke.MinusSign),Tt=Oe>0?Math.floor(Oe/60):Math.ceil(Oe/60);switch(F){case me.Short:return(Oe>=0?"+":"")+Ht(Tt,2,wt)+Ht(Math.abs(Oe%60),2,wt);case me.ShortGMT:return"GMT"+(Oe>=0?"+":"")+Ht(Tt,1,wt);case me.Long:return"GMT"+(Oe>=0?"+":"")+Ht(Tt,2,wt)+":"+Ht(Math.abs(Oe%60),2,wt);case me.Extended:return 0===Q?"Z":(Oe>=0?"+":"")+Ht(Tt,2,wt)+":"+Ht(Math.abs(Oe%60),2,wt);default:throw new Error(`Unknown zone width "${F}"`)}}}function yt(F){return nn(F.getFullYear(),F.getMonth(),F.getDate()+(4-F.getDay()))}function kt(F,z=!1){return function(U,Q){let Oe;if(z){const wt=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,Tt=U.getDate();Oe=1+Math.floor((Tt+wt)/7)}else{const wt=yt(U),Tt=function Ie(F){const z=nn(F,0,1).getDay();return nn(F,0,1+(z<=4?4:11)-z)}(wt.getFullYear()),Nn=wt.getTime()-Tt.getTime();Oe=1+Math.round(Nn/6048e5)}return Ht(Oe,F,fn(Q,Ke.MinusSign))}}function yn(F,z=!1){return function(U,Q){return Ht(yt(U).getFullYear(),F,fn(Q,Ke.MinusSign),z)}}const rr={};function Ir(F,z){F=F.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN(U)?z:U}function Bt(F){return F instanceof Date&&!isNaN(F.valueOf())}function ri(F,z){z=encodeURIComponent(z);for(const U of F.split(";")){const Q=U.indexOf("="),[Oe,wt]=-1==Q?[U,""]:[U.slice(0,Q),U.slice(Q+1)];if(Oe.trim()===z)return decodeURIComponent(wt)}return null}class or{constructor(z,U,Q,Oe){this.$implicit=z,this.ngForOf=U,this.index=Q,this.count=Oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kn=(()=>{class F{constructor(U,Q,Oe){this._viewContainer=U,this._template=Q,this._differs=Oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const Q=this._viewContainer;U.forEachOperation((Oe,wt,Tt)=>{if(null==Oe.previousIndex)Q.createEmbeddedView(this._template,new or(Oe.item,this._ngForOf,-1,-1),null===Tt?void 0:Tt);else if(null==Tt)Q.remove(null===wt?void 0:wt);else if(null!==wt){const Nn=Q.get(wt);Q.move(Nn,Tt),qe(Nn,Oe)}});for(let Oe=0,wt=Q.length;Oe<wt;Oe++){const Nn=Q.get(Oe).context;Nn.index=Oe,Nn.count=wt,Nn.ngForOf=this._ngForOf}U.forEachIdentityChange(Oe=>{qe(Q.get(Oe.currentIndex),Oe)})}static ngTemplateContextGuard(U,Q){return!0}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function qe(F,z){F.context.$implicit=z.item}let nt=(()=>{class F{constructor(U,Q){this._viewContainer=U,this._context=new Nt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){Wt("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){Wt("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,Q){return!0}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.s_b),C.Y36(C.Rgc))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Nt{constructor(){this.$implicit=null,this.ngIf=null}}function Wt(F,z){if(z&&!z.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,C.AaK)(z)}'.`)}let _i=(()=>{class F{constructor(U,Q,Oe){this._ngEl=U,this._differs=Q,this._renderer=Oe,this._ngStyle=null,this._differ=null}set ngStyle(U){this._ngStyle=U,!this._differ&&U&&(this._differ=this._differs.find(U).create())}ngDoCheck(){if(this._differ){const U=this._differ.diff(this._ngStyle);U&&this._applyChanges(U)}}_setStyle(U,Q){const[Oe,wt]=U.split("."),Tt=-1===Oe.indexOf("-")?void 0:C.JOm.DashCase;null!=Q?this._renderer.setStyle(this._ngEl.nativeElement,Oe,wt?`${Q}${wt}`:Q,Tt):this._renderer.removeStyle(this._ngEl.nativeElement,Oe,Tt)}_applyChanges(U){U.forEachRemovedItem(Q=>this._setStyle(Q.key,null)),U.forEachAddedItem(Q=>this._setStyle(Q.key,Q.currentValue)),U.forEachChangedItem(Q=>this._setStyle(Q.key,Q.currentValue))}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),F})();function Ki(F,z){return new C.vHH(2100,!1)}class No{createSubscription(z,U){return z.subscribe({next:U,error:Q=>{throw Q}})}dispose(z){z.unsubscribe()}}class Ss{createSubscription(z,U){return z.then(U,Q=>{throw Q})}dispose(z){}}const ba=new Ss,la=new No;let Ta=(()=>{class F{constructor(U){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=U}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(U){return this._obj?U!==this._obj?(this._dispose(),this.transform(U)):this._latestValue:(U&&this._subscribe(U),this._latestValue)}_subscribe(U){this._obj=U,this._strategy=this._selectStrategy(U),this._subscription=this._strategy.createSubscription(U,Q=>this._updateLatestValue(U,Q))}_selectStrategy(U){if((0,C.QGY)(U))return ba;if((0,C.F4k)(U))return la;throw Ki()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(U,Q){U===this._obj&&(this._latestValue=Q,this._ref.markForCheck())}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.sBO,16))},F.\u0275pipe=C.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})();const Bs=new C.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let gr=(()=>{class F{constructor(U,Q){this.locale=U,this.defaultTimezone=Q}transform(U,Q="mediumDate",Oe,wt){if(null==U||""===U||U!=U)return null;try{return gt(U,Q,wt||this.locale,Oe??this.defaultTimezone??void 0)}catch(Tt){throw Ki()}}}return F.\u0275fac=function(U){return new(U||F)(C.Y36(C.soG,16),C.Y36(Bs,24))},F.\u0275pipe=C.Yjl({name:"date",type:F,pure:!0,standalone:!0}),F})(),Go=(()=>{class F{}return F.\u0275fac=function(U){return new(U||F)},F.\u0275mod=C.oAB({type:F}),F.\u0275inj=C.cJS({}),F})();const xi="browser";function ko(F){return"server"===F}let Se=(()=>{class F{}return F.\u0275prov=(0,C.Yz7)({token:F,providedIn:"root",factory:()=>new ge((0,C.LFG)(je),window)}),F})();class ge{constructor(z,U){this.document=z,this.window=U,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const U=function st(F,z){const U=F.getElementById(z)||F.getElementsByName(z)[0];if(U)return U;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const Q=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Oe=Q.currentNode;for(;Oe;){const wt=Oe.shadowRoot;if(wt){const Tt=wt.getElementById(z)||wt.querySelector(`[name="${z}"]`);if(Tt)return Tt}Oe=Q.nextNode()}}return null}(this.document,z);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=z)}}scrollToElement(z){const U=z.getBoundingClientRect(),Q=U.left+this.window.pageXOffset,Oe=U.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(Q-wt[0],Oe-wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=We(this.window.history)||We(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function We(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Ct{}},529:(an,ot,j)=>{j.d(ot,{JF:()=>fr,eN:()=>bt});var C=j(6895),p=j(4650),Z=j(9646),R=j(9751),ve=j(4351),Le=j(9300),je=j(4004);class we{}class Ye{}class re{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?this.lazyInit="string"==typeof me?()=>{this.headers=new Map,me.split("\n").forEach(_e=>{const ft=_e.indexOf(":");if(ft>0){const gt=_e.slice(0,ft),nn=gt.toLowerCase(),vn=_e.slice(ft+1).trim();this.maybeSetNormalizedName(gt,nn),this.headers.has(nn)?this.headers.get(nn).push(vn):this.headers.set(nn,[vn])}})}:()=>{this.headers=new Map,Object.keys(me).forEach(_e=>{let ft=me[_e];const gt=_e.toLowerCase();"string"==typeof ft&&(ft=[ft]),ft.length>0&&(this.headers.set(gt,ft),this.maybeSetNormalizedName(_e,gt))})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const _e=this.headers.get(me.toLowerCase());return _e&&_e.length>0?_e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,_e){return this.clone({name:me,value:_e,op:"a"})}set(me,_e){return this.clone({name:me,value:_e,op:"s"})}delete(me,_e){return this.clone({name:me,value:_e,op:"d"})}maybeSetNormalizedName(me,_e){this.normalizedNames.has(_e)||this.normalizedNames.set(_e,me)}init(){this.lazyInit&&(this.lazyInit instanceof re?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(_e=>{this.headers.set(_e,me.headers.get(_e)),this.normalizedNames.set(_e,me.normalizedNames.get(_e))})}clone(me){const _e=new re;return _e.lazyInit=this.lazyInit&&this.lazyInit instanceof re?this.lazyInit:this,_e.lazyUpdate=(this.lazyUpdate||[]).concat([me]),_e}applyUpdate(me){const _e=me.name.toLowerCase();switch(me.op){case"a":case"s":let ft=me.value;if("string"==typeof ft&&(ft=[ft]),0===ft.length)return;this.maybeSetNormalizedName(me.name,_e);const gt=("a"===me.op?this.headers.get(_e):void 0)||[];gt.push(...ft),this.headers.set(_e,gt);break;case"d":const nn=me.value;if(nn){let vn=this.headers.get(_e);if(!vn)return;vn=vn.filter(Hn=>-1===nn.indexOf(Hn)),0===vn.length?(this.headers.delete(_e),this.normalizedNames.delete(_e)):this.headers.set(_e,vn)}else this.headers.delete(_e),this.normalizedNames.delete(_e)}}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(_e=>me(this.normalizedNames.get(_e),this.headers.get(_e)))}}class Ce{encodeKey(me){return Ft(me)}encodeValue(me){return Ft(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const ht=/%(\d[a-f0-9])/gi,at={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ft(tt){return encodeURIComponent(tt).replace(ht,(me,_e)=>at[_e]??me)}function it(tt){return`${tt}`}class et{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new Ce,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function dt(tt,me){const _e=new Map;return tt.length>0&&tt.replace(/^\?/,"").split("&").forEach(gt=>{const nn=gt.indexOf("="),[vn,Hn]=-1==nn?[me.decodeKey(gt),""]:[me.decodeKey(gt.slice(0,nn)),me.decodeValue(gt.slice(nn+1))],Ht=_e.get(vn)||[];Ht.push(Hn),_e.set(vn,Ht)}),_e}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(_e=>{const ft=me.fromObject[_e],gt=Array.isArray(ft)?ft.map(it):[it(ft)];this.map.set(_e,gt)})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const _e=this.map.get(me);return _e?_e[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,_e){return this.clone({param:me,value:_e,op:"a"})}appendAll(me){const _e=[];return Object.keys(me).forEach(ft=>{const gt=me[ft];Array.isArray(gt)?gt.forEach(nn=>{_e.push({param:ft,value:nn,op:"a"})}):_e.push({param:ft,value:gt,op:"a"})}),this.clone(_e)}set(me,_e){return this.clone({param:me,value:_e,op:"s"})}delete(me,_e){return this.clone({param:me,value:_e,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const _e=this.encoder.encodeKey(me);return this.map.get(me).map(ft=>_e+"="+this.encoder.encodeValue(ft)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const _e=new et({encoder:this.encoder});return _e.cloneFrom=this.cloneFrom||this,_e.updates=(this.updates||[]).concat(me),_e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const _e=("a"===me.op?this.map.get(me.param):void 0)||[];_e.push(it(me.value)),this.map.set(me.param,_e);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let ft=this.map.get(me.param)||[];const gt=ft.indexOf(it(me.value));-1!==gt&&ft.splice(gt,1),ft.length>0?this.map.set(me.param,ft):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class $t{constructor(){this.map=new Map}set(me,_e){return this.map.set(me,_e),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function lt(tt){return typeof ArrayBuffer<"u"&&tt instanceof ArrayBuffer}function Ge(tt){return typeof Blob<"u"&&tt instanceof Blob}function ct(tt){return typeof FormData<"u"&&tt instanceof FormData}class ie{constructor(me,_e,ft,gt){let nn;if(this.url=_e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function Me(tt){switch(tt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||gt?(this.body=void 0!==ft?ft:null,nn=gt):nn=ft,nn&&(this.reportProgress=!!nn.reportProgress,this.withCredentials=!!nn.withCredentials,nn.responseType&&(this.responseType=nn.responseType),nn.headers&&(this.headers=nn.headers),nn.context&&(this.context=nn.context),nn.params&&(this.params=nn.params)),this.headers||(this.headers=new re),this.context||(this.context=new $t),this.params){const vn=this.params.toString();if(0===vn.length)this.urlWithParams=_e;else{const Hn=_e.indexOf("?");this.urlWithParams=_e+(-1===Hn?"?":Hn<_e.length-1?"&":"")+vn}}else this.params=new et,this.urlWithParams=_e}serializeBody(){return null===this.body?null:lt(this.body)||Ge(this.body)||ct(this.body)||function ee(tt){return typeof URLSearchParams<"u"&&tt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof et?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ct(this.body)?null:Ge(this.body)?this.body.type||null:lt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof et?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){const _e=me.method||this.method,ft=me.url||this.url,gt=me.responseType||this.responseType,nn=void 0!==me.body?me.body:this.body,vn=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,Hn=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let Ht=me.headers||this.headers,tr=me.params||this.params;const En=me.context??this.context;return void 0!==me.setHeaders&&(Ht=Object.keys(me.setHeaders).reduce((Rr,xn)=>Rr.set(xn,me.setHeaders[xn]),Ht)),me.setParams&&(tr=Object.keys(me.setParams).reduce((Rr,xn)=>Rr.set(xn,me.setParams[xn]),tr)),new ie(_e,ft,nn,{params:tr,headers:Ht,context:En,reportProgress:Hn,responseType:gt,withCredentials:vn})}}var Ze=(()=>((Ze=Ze||{})[Ze.Sent=0]="Sent",Ze[Ze.UploadProgress=1]="UploadProgress",Ze[Ze.ResponseHeader=2]="ResponseHeader",Ze[Ze.DownloadProgress=3]="DownloadProgress",Ze[Ze.Response=4]="Response",Ze[Ze.User=5]="User",Ze))();class Ne{constructor(me,_e=200,ft="OK"){this.headers=me.headers||new re,this.status=void 0!==me.status?me.status:_e,this.statusText=me.statusText||ft,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}class Ue extends Ne{constructor(me={}){super(me),this.type=Ze.ResponseHeader}clone(me={}){return new Ue({headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class $e extends Ne{constructor(me={}){super(me),this.type=Ze.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new $e({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Ke extends Ne{constructor(me){super(me,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${me.url||"(unknown url)"}`:`Http failure response for ${me.url||"(unknown url)"}: ${me.status} ${me.statusText}`,this.error=me.error||null}}function Rt(tt,me){return{body:me,headers:tt.headers,context:tt.context,observe:tt.observe,params:tt.params,reportProgress:tt.reportProgress,responseType:tt.responseType,withCredentials:tt.withCredentials}}let bt=(()=>{class tt{constructor(_e){this.handler=_e}request(_e,ft,gt={}){let nn;if(_e instanceof ie)nn=_e;else{let Ht,tr;Ht=gt.headers instanceof re?gt.headers:new re(gt.headers),gt.params&&(tr=gt.params instanceof et?gt.params:new et({fromObject:gt.params})),nn=new ie(_e,ft,void 0!==gt.body?gt.body:null,{headers:Ht,context:gt.context,params:tr,reportProgress:gt.reportProgress,responseType:gt.responseType||"json",withCredentials:gt.withCredentials})}const vn=(0,Z.of)(nn).pipe((0,ve.b)(Ht=>this.handler.handle(Ht)));if(_e instanceof ie||"events"===gt.observe)return vn;const Hn=vn.pipe((0,Le.h)(Ht=>Ht instanceof $e));switch(gt.observe||"body"){case"body":switch(nn.responseType){case"arraybuffer":return Hn.pipe((0,je.U)(Ht=>{if(null!==Ht.body&&!(Ht.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ht.body}));case"blob":return Hn.pipe((0,je.U)(Ht=>{if(null!==Ht.body&&!(Ht.body instanceof Blob))throw new Error("Response is not a Blob.");return Ht.body}));case"text":return Hn.pipe((0,je.U)(Ht=>{if(null!==Ht.body&&"string"!=typeof Ht.body)throw new Error("Response is not a string.");return Ht.body}));default:return Hn.pipe((0,je.U)(Ht=>Ht.body))}case"response":return Hn;default:throw new Error(`Unreachable: unhandled observe type ${gt.observe}}`)}}delete(_e,ft={}){return this.request("DELETE",_e,ft)}get(_e,ft={}){return this.request("GET",_e,ft)}head(_e,ft={}){return this.request("HEAD",_e,ft)}jsonp(_e,ft){return this.request("JSONP",_e,{params:(new et).append(ft,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(_e,ft={}){return this.request("OPTIONS",_e,ft)}patch(_e,ft,gt={}){return this.request("PATCH",_e,Rt(gt,ft))}post(_e,ft,gt={}){return this.request("POST",_e,Rt(gt,ft))}put(_e,ft,gt={}){return this.request("PUT",_e,Rt(gt,ft))}}return tt.\u0275fac=function(_e){return new(_e||tt)(p.LFG(we))},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class Yt{constructor(me,_e){this.next=me,this.interceptor=_e}handle(me){return this.interceptor.intercept(me,this.next)}}const wn=new p.OlP("HTTP_INTERCEPTORS");let An=(()=>{class tt{intercept(_e,ft){return ft.handle(_e)}}return tt.\u0275fac=function(_e){return new(_e||tt)},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const Dr=/^\)\]\}',?\n/;let ar=(()=>{class tt{constructor(_e){this.xhrFactory=_e}handle(_e){if("JSONP"===_e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R.y(ft=>{const gt=this.xhrFactory.build();if(gt.open(_e.method,_e.urlWithParams),_e.withCredentials&&(gt.withCredentials=!0),_e.headers.forEach((De,le)=>gt.setRequestHeader(De,le.join(","))),_e.headers.has("Accept")||gt.setRequestHeader("Accept","application/json, text/plain, */*"),!_e.headers.has("Content-Type")){const De=_e.detectContentTypeHeader();null!==De&&gt.setRequestHeader("Content-Type",De)}if(_e.responseType){const De=_e.responseType.toLowerCase();gt.responseType="json"!==De?De:"text"}const nn=_e.serializeBody();let vn=null;const Hn=()=>{if(null!==vn)return vn;const De=gt.statusText||"OK",le=new re(gt.getAllResponseHeaders()),ce=function cr(tt){return"responseURL"in tt&&tt.responseURL?tt.responseURL:/^X-Request-URL:/m.test(tt.getAllResponseHeaders())?tt.getResponseHeader("X-Request-URL"):null}(gt)||_e.url;return vn=new Ue({headers:le,status:gt.status,statusText:De,url:ce}),vn},Ht=()=>{let{headers:De,status:le,statusText:ce,url:be}=Hn(),Ie=null;204!==le&&(Ie=typeof gt.response>"u"?gt.responseText:gt.response),0===le&&(le=Ie?200:0);let yt=le>=200&&le<300;if("json"===_e.responseType&&"string"==typeof Ie){const kt=Ie;Ie=Ie.replace(Dr,"");try{Ie=""!==Ie?JSON.parse(Ie):null}catch(yn){Ie=kt,yt&&(yt=!1,Ie={error:yn,text:Ie})}}yt?(ft.next(new $e({body:Ie,headers:De,status:le,statusText:ce,url:be||void 0})),ft.complete()):ft.error(new Ke({error:Ie,headers:De,status:le,statusText:ce,url:be||void 0}))},tr=De=>{const{url:le}=Hn(),ce=new Ke({error:De,status:gt.status||0,statusText:gt.statusText||"Unknown Error",url:le||void 0});ft.error(ce)};let En=!1;const Rr=De=>{En||(ft.next(Hn()),En=!0);let le={type:Ze.DownloadProgress,loaded:De.loaded};De.lengthComputable&&(le.total=De.total),"text"===_e.responseType&&!!gt.responseText&&(le.partialText=gt.responseText),ft.next(le)},xn=De=>{let le={type:Ze.UploadProgress,loaded:De.loaded};De.lengthComputable&&(le.total=De.total),ft.next(le)};return gt.addEventListener("load",Ht),gt.addEventListener("error",tr),gt.addEventListener("timeout",tr),gt.addEventListener("abort",tr),_e.reportProgress&&(gt.addEventListener("progress",Rr),null!==nn&&gt.upload&&gt.upload.addEventListener("progress",xn)),gt.send(nn),ft.next({type:Ze.Sent}),()=>{gt.removeEventListener("error",tr),gt.removeEventListener("abort",tr),gt.removeEventListener("load",Ht),gt.removeEventListener("timeout",tr),_e.reportProgress&&(gt.removeEventListener("progress",Rr),null!==nn&&gt.upload&&gt.upload.removeEventListener("progress",xn)),gt.readyState!==gt.DONE&&gt.abort()}})}}return tt.\u0275fac=function(_e){return new(_e||tt)(p.LFG(C.JF))},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const Mr=new p.OlP("XSRF_COOKIE_NAME"),ln=new p.OlP("XSRF_HEADER_NAME");class qn{}let Pr=(()=>{class tt{constructor(_e,ft,gt){this.doc=_e,this.platform=ft,this.cookieName=gt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const _e=this.doc.cookie||"";return _e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(_e,this.cookieName),this.lastCookieString=_e),this.lastToken}}return tt.\u0275fac=function(_e){return new(_e||tt)(p.LFG(C.K0),p.LFG(p.Lbi),p.LFG(Mr))},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),mr=(()=>{class tt{constructor(_e,ft){this.tokenService=_e,this.headerName=ft}intercept(_e,ft){const gt=_e.url.toLowerCase();if("GET"===_e.method||"HEAD"===_e.method||gt.startsWith("http://")||gt.startsWith("https://"))return ft.handle(_e);const nn=this.tokenService.getToken();return null!==nn&&!_e.headers.has(this.headerName)&&(_e=_e.clone({headers:_e.headers.set(this.headerName,nn)})),ft.handle(_e)}}return tt.\u0275fac=function(_e){return new(_e||tt)(p.LFG(qn),p.LFG(ln))},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Xt=(()=>{class tt{constructor(_e,ft){this.backend=_e,this.injector=ft,this.chain=null}handle(_e){if(null===this.chain){const ft=this.injector.get(wn,[]);this.chain=ft.reduceRight((gt,nn)=>new Yt(gt,nn),this.backend)}return this.chain.handle(_e)}}return tt.\u0275fac=function(_e){return new(_e||tt)(p.LFG(Ye),p.LFG(p.zs3))},tt.\u0275prov=p.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Zn=(()=>{class tt{static disable(){return{ngModule:tt,providers:[{provide:mr,useClass:An}]}}static withOptions(_e={}){return{ngModule:tt,providers:[_e.cookieName?{provide:Mr,useValue:_e.cookieName}:[],_e.headerName?{provide:ln,useValue:_e.headerName}:[]]}}}return tt.\u0275fac=function(_e){return new(_e||tt)},tt.\u0275mod=p.oAB({type:tt}),tt.\u0275inj=p.cJS({providers:[mr,{provide:wn,useExisting:mr,multi:!0},{provide:qn,useClass:Pr},{provide:Mr,useValue:"XSRF-TOKEN"},{provide:ln,useValue:"X-XSRF-TOKEN"}]}),tt})(),fr=(()=>{class tt{}return tt.\u0275fac=function(_e){return new(_e||tt)},tt.\u0275mod=p.oAB({type:tt}),tt.\u0275inj=p.cJS({providers:[bt,{provide:we,useClass:Xt},ar,{provide:Ye,useExisting:ar}],imports:[Zn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),tt})()},4650:(an,ot,j)=>{j.d(ot,{$8M:()=>Ua,$Z:()=>hf,AFp:()=>$0,ALo:()=>u0,AaK:()=>we,AsE:()=>q_,CHM:()=>zo,CRH:()=>y0,CZH:()=>Fm,CqO:()=>Xp,D6c:()=>RI,EJc:()=>zC,EpF:()=>Qp,F4k:()=>cm,FYo:()=>Yd,FiY:()=>ta,G48:()=>fI,GfV:()=>qc,Gpc:()=>he,Gre:()=>sv,JOm:()=>Ve,KtG:()=>qo,LFG:()=>$i,LSH:()=>jc,Lbi:()=>HC,Lck:()=>Uw,MAs:()=>Bd,MMx:()=>ny,NdJ:()=>eg,OlP:()=>ai,Oqu:()=>z_,PXZ:()=>aI,Q6J:()=>lc,QGY:()=>Jp,QP$:()=>Bt,Qsj:()=>Bh,R0b:()=>Ul,RDi:()=>ql,Rgc:()=>cg,SBq:()=>Xl,Sil:()=>ZC,Suo:()=>_0,TTD:()=>Sr,TgZ:()=>Mh,VKq:()=>t0,W1O:()=>C0,X6Q:()=>hI,XFs:()=>Xt,Xpm:()=>be,Xts:()=>za,Y36:()=>xc,YKP:()=>zv,YNc:()=>Oc,Yjl:()=>Je,Yz7:()=>Kn,Z0I:()=>hr,ZZ4:()=>Sy,_Bn:()=>Gv,_UZ:()=>Zp,_Vd:()=>Jl,_c5:()=>xI,_uU:()=>Wd,aQg:()=>Ay,c2e:()=>WC,cJS:()=>fn,cg1:()=>Z_,dDg:()=>rI,dqk:()=>gt,eFA:()=>tE,ekj:()=>e,eoX:()=>J0,f3M:()=>$l,g9A:()=>W0,h0i:()=>Bf,hGG:()=>MI,hij:()=>Sm,iGM:()=>m0,ifc:()=>ft,ip1:()=>j0,jDz:()=>Zv,kL8:()=>_v,lG2:()=>Ir,lcZ:()=>l0,lqb:()=>dl,lri:()=>Y0,n5z:()=>Ji,oAB:()=>yn,oxw:()=>ng,q4F:()=>yd,qLn:()=>Qr,qOj:()=>jp,qZA:()=>kc,rWj:()=>Q0,s9C:()=>Rh,sBO:()=>pI,sIi:()=>qu,s_b:()=>Pm,soG:()=>Lm,tb:()=>G0,tp0:()=>Ni,uIk:()=>ad,vHH:()=>at,vpe:()=>Lc,wAp:()=>Tr,xi3:()=>c0,xp6:()=>Sd,z2F:()=>Um,zSh:()=>Gu,zs3:()=>_l});var C=j(7579),p=j(727),Z=j(9751),R=j(6451),ve=j(3099);function Le(t){for(let r in t)if(t[r]===Le)return r;throw Error("Could not find renamed property on target object.")}function je(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function we(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(we).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ye(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const re=Le({__forward_ref__:Le});function he(t){return t.__forward_ref__=he,t.toString=function(){return we(this())},t}function Ce(t){return dt(t)?t():t}function dt(t){return"function"==typeof t&&t.hasOwnProperty(re)&&t.__forward_ref__===he}class at extends Error{constructor(r,s){super(function Ft(t,r){return`NG0${Math.abs(t)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function it(t){return"string"==typeof t?t:null==t?"":String(t)}function lt(t,r){throw new at(-201,!1)}function An(t,r){null==t&&function Mt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Kn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fn(t){return{providers:t.providers||[],imports:t.imports||[]}}function er(t){return Dr(t,ln)||Dr(t,Pr)}function hr(t){return null!==er(t)}function Dr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Mr(t){return t&&(t.hasOwnProperty(qn)||t.hasOwnProperty(mr))?t[qn]:null}const ln=Le({\u0275prov:Le}),qn=Le({\u0275inj:Le}),Pr=Le({ngInjectableDef:Le}),mr=Le({ngInjectorDef:Le});var Xt=(()=>((Xt=Xt||{})[Xt.Default=0]="Default",Xt[Xt.Host=1]="Host",Xt[Xt.Self=2]="Self",Xt[Xt.SkipSelf=4]="SkipSelf",Xt[Xt.Optional=8]="Optional",Xt))();let dr;function Zn(t){const r=dr;return dr=t,r}function fr(t,r,s){const a=er(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Xt.Optional?null:void 0!==r?r:void lt(we(t))}function Er(t){return{toString:t}.toString()}var tt=(()=>((tt=tt||{})[tt.OnPush=0]="OnPush",tt[tt.Default=1]="Default",tt))(),ft=(()=>{return(t=ft||(ft={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ft;var t})();const gt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hn={},Ht=[],tr=Le({\u0275cmp:Le}),En=Le({\u0275dir:Le}),Rr=Le({\u0275pipe:Le}),xn=Le({\u0275mod:Le}),De=Le({\u0275fac:Le}),le=Le({__NG_ELEMENT_ID__:Le});let ce=0;function be(t){return Er(()=>{const s=!0===t.standalone,a={},d={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===tt.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Ht,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ft.Emulated,id:"c"+ce++,styles:t.styles||Ht,_:null,setInput:null,schemas:t.schemas||null,tView:null},g=t.dependencies,b=t.features;return d.inputs=Qn(t.inputs,a),d.outputs=Qn(t.outputs),b&&b.forEach(M=>M(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(yt).filter(kt):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(vt).filter(kt):null,d})}function yt(t){return Ae(t)||Fe(t)}function kt(t){return null!==t}function yn(t){return Er(()=>({type:t.type,bootstrap:t.bootstrap||Ht,declarations:t.declarations||Ht,imports:t.imports||Ht,exports:t.exports||Ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Qn(t,r){if(null==t)return Hn;const s={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),s[d]=a,r&&(r[d]=g)}return s}const Ir=be;function Je(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ae(t){return t[tr]||null}function Fe(t){return t[En]||null}function vt(t){return t[Rr]||null}function Bt(t){const r=Ae(t)||Fe(t)||vt(t);return null!==r&&r.standalone}function _n(t,r){const s=t[xn]||null;if(!s&&!0===r)throw new Error(`Type ${we(t)} does not have '\u0275mod' property.`);return s}function Wt(t){return Array.isArray(t)&&"object"==typeof t[1]}function dn(t){return Array.isArray(t)&&!0===t[1]}function Mn(t){return 0!=(8&t.flags)}function Ln(t){return 2==(2&t.flags)}function Bn(t){return 1==(1&t.flags)}function Or(t){return null!==t.template}function rs(t){return 0!=(256&t[2])}function Si(t,r){return t.hasOwnProperty(De)?t[De]:null}class Ai{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Sr(){return oo}function oo(t){return t.type.prototype.ngOnChanges&&(t.setInput=Yi),$s}function $s(){const t=Ws(this),r=t?.current;if(r){const s=t.previous;if(s===Hn)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Yi(t,r,s,a){const d=Ws(t)||function Go(t,r){return t[Hs]=r}(t,{previous:Hn,current:null}),g=d.current||(d.current={}),b=d.previous,M=this.declaredInputs[s],L=b[M];g[M]=new Ai(L&&L.currentValue,r,b===Hn),t[a]=r}Sr.ngInherit=!0;const Hs="__ngSimpleChanges__";function Ws(t){return t[Hs]||null}function Hr(t){for(;Array.isArray(t);)t=t[0];return t}function We(t,r){return Hr(r[t])}function st(t,r){return Hr(r[t.index])}function Ct(t,r){return t.data[r]}function sn(t,r){return t[r]}function un(t,r){const s=r[t];return Wt(s)?s:s[0]}function yr(t){return 4==(4&t[2])}function Rn(t){return 64==(64&t[2])}function Zr(t,r){return null==r?null:t[r]}function bi(t){t[18]=0}function yi(t,r){t[5]+=r;let s=t,a=t[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const jn={lFrame:Yo(null),bindingsEnabled:!0};function Bi(){return jn.bindingsEnabled}function jt(){return jn.lFrame.lView}function Nr(){return jn.lFrame.tView}function zo(t){return jn.lFrame.contextLView=t,t[8]}function qo(t){return jn.lFrame.contextLView=null,t}function Wi(){let t=Js();for(;null!==t&&64===t.type;)t=t.parent;return t}function Js(){return jn.lFrame.currentTNode}function ls(t,r){const s=jn.lFrame;s.currentTNode=t,s.isParent=r}function Sa(){return jn.lFrame.isParent}function Li(){const t=jn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Ma(){return jn.lFrame.bindingIndex++}function Cs(t){const r=jn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function As(t,r){const s=jn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ra(r)}function Ra(t){jn.lFrame.currentDirectiveIndex=t}function Na(){return jn.lFrame.currentQueryIndex}function Ya(t){jn.lFrame.currentQueryIndex=t}function ha(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function xs(t,r,s){if(s&Xt.SkipSelf){let d=r,g=t;for(;!(d=d.parent,null!==d||s&Xt.Host||(d=ha(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;r=d,t=g}const a=jn.lFrame=Co();return a.currentTNode=r,a.lView=t,!0}function Ko(t){const r=Co(),s=t[1];jn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Co(){const t=jn.lFrame,r=null===t?null:t.child;return null===r?Yo(t):r}function Yo(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Pa(){const t=jn.lFrame;return jn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const F=Pa;function z(){const t=Pa();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Oe(){return jn.lFrame.selectedIndex}function wt(t){jn.lFrame.selectedIndex=t}function Tt(){const t=jn.lFrame;return Ct(t.tView,t.selectedIndex)}function jr(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:M,ngAfterViewInit:L,ngAfterViewChecked:W,ngOnDestroy:J}=g;b&&(t.contentHooks||(t.contentHooks=[])).push(-s,b),M&&((t.contentHooks||(t.contentHooks=[])).push(s,M),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,M)),L&&(t.viewHooks||(t.viewHooks=[])).push(-s,L),W&&((t.viewHooks||(t.viewHooks=[])).push(s,W),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,W)),null!=J&&(t.destroyHooks||(t.destroyHooks=[])).push(s,J)}}function ui(t,r,s){Wr(t,r,3,s)}function lo(t,r,s,a){(3&t[2])===s&&Wr(t,r,s,a)}function Lr(t,r){let s=t[2];(3&s)===r&&(s&=2047,s+=1,t[2]=s)}function Wr(t,r,s,a){const g=a??-1,b=r.length-1;let M=0;for(let L=void 0!==a?65535&t[18]:0;L<b;L++)if("number"==typeof r[L+1]){if(M=r[L],null!=a&&M>=a)break}else r[L]<0&&(t[18]+=65536),(M<g||-1==g)&&(ss(t,s,r,L),t[18]=(4294901760&t[18])+L+2),L++}function ss(t,r,s,a){const d=s[a]<0,g=s[a+1],M=t[d?-s[a]:s[a]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{g.call(M)}finally{}}}else try{g.call(M)}finally{}}class fi{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function cn(t,r,s){let a=0;for(;a<s.length;){const d=s[a];if("number"==typeof d){if(0!==d)break;a++;const g=s[a++],b=s[a++],M=s[a++];t.setAttribute(r,b,M,g)}else{const g=d,b=s[++a];Kt(g)?t.setProperty(r,g,b):t.setAttribute(r,g,b),a++}}return a}function Dt(t){return 3===t||4===t||6===t}function Kt(t){return 64===t.charCodeAt(0)}function Ui(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?s=d:0===s||Nu(t,s,d,null,-1===s||2===s?r[++a]:null)}}return t}function Nu(t,r,s,a,d){let g=0,b=t.length;if(-1===r)b=-1;else for(;g<t.length;){const M=t[g++];if("number"==typeof M){if(M===r){b=-1;break}if(M>r){b=g-1;break}}}for(;g<t.length;){const M=t[g];if("number"==typeof M)break;if(M===s){if(null===a)return void(null!==d&&(t[g+1]=d));if(a===t[g+1])return void(t[g+2]=d)}g++,null!==a&&g++,null!==d&&g++}-1!==b&&(t.splice(b,0,r),g=b+1),t.splice(g++,0,s),null!==a&&t.splice(g++,0,a),null!==d&&t.splice(g++,0,d)}function wl(t){return-1!==t}function fa(t){return 32767&t}function Qo(t,r){let s=function Vl(t){return t>>16}(t),a=r;for(;s>0;)a=a[15],s--;return a}let Cl=!0;function Pu(t){const r=Cl;return Cl=t,r}let Qu=0;const $n={};function ka(t,r){const s=nr(t,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(t.injectorIndex=r.length,ci(a.data,t),ci(r,null),ci(a.blueprint,null));const d=Lo(t,r),g=t.injectorIndex;if(wl(d)){const b=fa(d),M=Qo(d,r),L=M[1].data;for(let W=0;W<8;W++)r[g+W]=M[b+W]|L[b+W]}return r[g+8]=d,g}function ci(t,r){t.push(0,0,0,0,0,0,0,0,r)}function nr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Lo(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,d=r;for(;null!==d;){if(a=Io(d),null===a)return-1;if(s++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function $r(t,r,s){!function pa(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(le)&&(a=s[le]),null==a&&(a=s[le]=Qu++);const d=255&a;r.data[t+(d>>5)]|=1<<d}(t,r,s)}function Ri(t,r,s){if(s&Xt.Optional)return t;lt()}function on(t,r,s,a){if(s&Xt.Optional&&void 0===a&&(a=null),0==(s&(Xt.Self|Xt.Host))){const d=t[9],g=Zn(void 0);try{return d?d.get(r,a,s&Xt.Optional):fr(r,a,s&Xt.Optional)}finally{Zn(g)}}return Ri(a,0,s)}function Uo(t,r,s,a=Xt.Default,d){if(null!==t){if(1024&r[2]){const b=function Ou(t,r,s,a,d){let g=t,b=r;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const M=Qa(g,b,s,a|Xt.Self,$n);if(M!==$n)return M;let L=g.parent;if(!L){const W=b[21];if(W){const J=W.get(s,$n,a);if(J!==$n)return J}L=Io(b),b=b[15]}g=L}return d}(t,r,s,a,$n);if(b!==$n)return b}const g=Qa(t,r,s,a,$n);if(g!==$n)return g}return on(r,s,a,d)}function Qa(t,r,s,a,d){const g=function fc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(le)?t[le]:void 0;return"number"==typeof r?r>=0?255&r:zs:r}(s);if("function"==typeof g){if(!xs(r,t,a))return a&Xt.Host?Ri(d,0,a):on(r,s,a,d);try{const b=g(a);if(null!=b||a&Xt.Optional)return b;lt()}finally{F()}}else if("number"==typeof g){let b=null,M=nr(t,r),L=-1,W=a&Xt.Host?r[16][6]:null;for((-1===M||a&Xt.SkipSelf)&&(L=-1===M?Lo(t,r):r[M+8],-1!==L&&Ja(a,!1)?(b=r[1],M=fa(L),r=Qo(L,r)):M=-1);-1!==M;){const J=r[1];if(ma(g,M,J.data)){const fe=ga(M,r,s,b,a,W);if(fe!==$n)return fe}L=r[M+8],-1!==L&&Ja(a,r[1].data[M+8]===W)&&ma(g,M,r)?(b=J,M=fa(L),r=Qo(L,r)):M=-1}}return d}function ga(t,r,s,a,d,g){const b=r[1],M=b.data[t+8],J=La(M,b,s,null==a?Ln(M)&&Cl:a!=b&&0!=(3&M.type),d&Xt.Host&&g===M);return null!==J?Jo(r,b,J,M):$n}function La(t,r,s,a,d){const g=t.providerIndexes,b=r.data,M=1048575&g,L=t.directiveStart,J=g>>20,Qe=d?M+J:t.directiveEnd;for(let mt=a?M:M+J;mt<Qe;mt++){const zt=b[mt];if(mt<L&&s===zt||mt>=L&&zt.type===s)return mt}if(d){const mt=b[L];if(mt&&Or(mt)&&mt.type===s)return L}return null}function Jo(t,r,s,a){let d=t[s];const g=r.data;if(function Xs(t){return t instanceof fi}(d)){const b=d;b.resolving&&function Vt(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new at(-200,`Circular dependency in DI detected for ${t}${s}`)}(function et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():it(t)}(g[s]));const M=Pu(b.canSeeViewProviders);b.resolving=!0;const L=b.injectImpl?Zn(b.injectImpl):null;xs(t,a,Xt.Default);try{d=t[s]=b.factory(void 0,g,t,a),r.firstCreatePass&&s>=a.directiveStart&&function hi(t,r,s){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:g}=r.type.prototype;if(a){const b=oo(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,b)}d&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,d),g&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,g))}(s,g[s],r)}finally{null!==L&&Zn(L),Pu(M),b.resolving=!1,F()}}return d}function ma(t,r,s){return!!(s[r+(t>>5)]&1<<t)}function Ja(t,r){return!(t&Xt.Self||t&Xt.Host&&r)}class _a{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Uo(this._tNode,this._lView,r,a,s)}}function zs(){return new _a(Wi(),jt())}function Ji(t){return Er(()=>{const r=t.prototype.constructor,s=r[De]||fu(r),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const g=d[De]||fu(d);if(g&&g!==s)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function fu(t){return dt(t)?()=>{const r=fu(Ce(t));return r&&r()}:Si(t)}function Io(t){const r=t[1],s=r.type;return 2===s?r.declTNode:1===s?t[6]:null}function Ua(t){return function Fa(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let d=0;for(;d<a;){const g=s[d];if(Dt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<a&&"string"==typeof s[d];)d++;else{if(g===r)return s[d+1];d+=2}}}return null}(Wi(),t)}const ya="__parameters__";function eo(t,r,s){return Er(()=>{const a=function pu(t){return function(...s){if(t){const a=t(...s);for(const d in a)this[d]=a[d]}}}(r);function d(...g){if(this instanceof d)return a.apply(this,g),this;const b=new d(...g);return M.annotation=b,M;function M(L,W,J){const fe=L.hasOwnProperty(ya)?L[ya]:Object.defineProperty(L,ya,{value:[]})[ya];for(;fe.length<=J;)fe.push(null);return(fe[J]=fe[J]||[]).push(b),L}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class ai{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Kn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function br(t,r){void 0===r&&(r=t);for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?(r===t&&(r=t.slice(0,s)),br(a,r)):r!==t&&r.push(a)}return r}function Ns(t,r){t.forEach(s=>Array.isArray(s)?Ns(s,r):r(s))}function Ps(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function ti(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function fs(t,r,s){let a=D(t,r);return a>=0?t[1|a]=s:(a=~a,function Xo(t,r,s,a){let d=t.length;if(d==r)t.push(s,a);else if(1===d)t.push(a,t[0]),t[0]=s;else{for(d--,t.push(t[d-1],t[d]);d>r;)t[d]=t[d-2],d--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Xu(t,r){const s=D(t,r);if(s>=0)return t[1|s]}function D(t,r){return function T(t,r,s){let a=0,d=t.length>>s;for(;d!==a;){const g=a+(d-a>>1),b=t[g<<s];if(r===b)return g<<s;b>r?d=g:a=g+1}return~(d<<s)}(t,r,1)}const Gr={},as="__NG_DI_FLAG__",us="ngTempTokenPath",Os=/\n/gm,nu="__source";let ea;function ru(t){const r=ea;return ea=t,r}function gs(t,r=Xt.Default){if(void 0===ea)throw new at(-203,!1);return null===ea?fr(t,void 0,r):ea.get(t,r&Xt.Optional?null:void 0,r)}function $i(t,r=Xt.Default){return(function Yn(){return dr}()||gs)(Ce(t),r)}function $l(t,r=Xt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),$i(t,r)}function Il(t){const r=[];for(let s=0;s<t.length;s++){const a=Ce(t[s]);if(Array.isArray(a)){if(0===a.length)throw new at(900,!1);let d,g=Xt.Default;for(let b=0;b<a.length;b++){const M=a[b],L=Vc(M);"number"==typeof L?-1===L?d=M.token:g|=L:d=M}r.push($i(d,g))}else r.push($i(a))}return r}function Vo(t,r){return t[as]=r,t.prototype[as]=r,t}function Vc(t){return t[as]}const ta=Vo(eo("Optional"),8),Ni=Vo(eo("SkipSelf"),4);let nl;function ql(t){nl=t}class Ao{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Wa(t){return t instanceof Ao?t.changingThisBreaksApplicationSecurity:t}const ue=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var zi=(()=>((zi=zi||{})[zi.NONE=0]="NONE",zi[zi.HTML=1]="HTML",zi[zi.STYLE=2]="STYLE",zi[zi.SCRIPT=3]="SCRIPT",zi[zi.URL=4]="URL",zi[zi.RESOURCE_URL=5]="RESOURCE_URL",zi))();function jc(t){const r=function _s(){const t=jt();return t&&t[12]}();return r?r.sanitize(zi.URL,t)||"":function Ca(t,r){const s=function il(t){return t instanceof Ao&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(t,"URL")?Wa(t):function rt(t){return(t=String(t)).match(ue)?t:"unsafe:"+t}(it(t))}const za=new ai("ENVIRONMENT_INITIALIZER"),pd=new ai("INJECTOR",-1),Ks=new ai("INJECTOR_DEF_TYPES");class Wu{get(r,s=Gr){if(s===Gr){const a=new Error(`NullInjectorError: No provider for ${we(r)}!`);throw a.name="NullInjectorError",a}return s}}function Zl(...t){return{\u0275providers:Al(0,t)}}function Al(t,...r){const s=[],a=new Set;let d;return Ns(r,g=>{const b=g;Kl(b,s,[],a)&&(d||(d=[]),d.push(b))}),void 0!==d&&su(d,s),s}function su(t,r){for(let s=0;s<t.length;s++){const{providers:d}=t[s];Ns(d,g=>{r.push(g)})}}function Kl(t,r,s,a){if(!(t=Ce(t)))return!1;let d=null,g=Mr(t);const b=!g&&Ae(t);if(g||b){if(b&&!b.standalone)return!1;d=t}else{const L=t.ngModule;if(g=Mr(L),!g)return!1;d=L}const M=a.has(d);if(b){if(M)return!1;if(a.add(d),b.dependencies){const L="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const W of L)Kl(W,r,s,a)}}else{if(!g)return!1;{if(null!=g.imports&&!M){let W;a.add(d);try{Ns(g.imports,J=>{Kl(J,r,s,a)&&(W||(W=[]),W.push(J))})}finally{}void 0!==W&&su(W,r)}if(!M){const W=Si(d)||(()=>new d);r.push({provide:d,useFactory:W,deps:Ht},{provide:Ks,useValue:d,multi:!0},{provide:za,useValue:()=>$i(d),multi:!0})}const L=g.providers;null==L||M||Ns(L,J=>{r.push(J)})}}return d!==t&&void 0!==t.providers}const Ec=Le({provide:String,useValue:Le});function wc(t){return null!==t&&"object"==typeof t&&Ec in t}function cl(t){return"function"==typeof t}const Gu=new ai("Set Injector scope."),xl={},Fh={};let Ql;function Ic(){return void 0===Ql&&(Ql=new Wu),Ql}class dl{}class jo extends dl{constructor(r,s,a,d){super(),this.parent=s,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ro(r,b=>this.processProvider(b)),this.records.set(pd,ou(void 0,this)),d.has("environment")&&this.records.set(dl,ou(void 0,this));const g=this.records.get(Gu);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ks.multi,Ht,Xt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=ru(this),a=Zn(void 0);try{return r()}finally{ru(s),Zn(a)}}get(r,s=Gr,a=Xt.Default){this.assertNotDestroyed();const d=ru(this),g=Zn(void 0);try{if(!(a&Xt.SkipSelf)){let M=this.records.get(r);if(void 0===M){const L=function Vh(t){return"function"==typeof t||"object"==typeof t&&t instanceof ai}(r)&&er(r);M=L&&this.injectableDefInScope(L)?ou(Ml(r),xl):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(a&Xt.Self?Ic():this.parent).get(r,s=a&Xt.Optional&&s===Gr?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[us]=b[us]||[]).unshift(we(r)),d)throw b;return function mu(t,r,s,a){const d=t[us];throw r[nu]&&d.unshift(r[nu]),t.message=function _u(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=we(r);if(Array.isArray(r))d=r.map(we).join(" -> ");else if("object"==typeof r){let g=[];for(let b in r)if(r.hasOwnProperty(b)){let M=r[b];g.push(b+":"+("string"==typeof M?JSON.stringify(M):we(M)))}d=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${d}]: ${t.replace(Os,"\n  ")}`}("\n"+t.message,d,s,a),t.ngTokenPath=d,t[us]=null,t}(b,r,"R3InjectorError",this.source)}throw b}finally{Zn(g),ru(d)}}resolveInjectorInitializers(){const r=ru(this),s=Zn(void 0);try{const a=this.get(za.multi,Ht,Xt.Self);for(const d of a)d()}finally{ru(r),Zn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(we(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processProvider(r){let s=cl(r=Ce(r))?r:Ce(r&&r.provide);const a=function Rl(t){return wc(t)?ou(void 0,t.useValue):ou(hl(t),xl)}(r);if(cl(r)||!0!==r.multi)this.records.get(s);else{let d=this.records.get(s);d||(d=ou(void 0,xl,!0),d.factory=()=>Il(d.multi),this.records.set(s,d)),s=r,d.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===xl&&(s.value=Fh,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qa(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ce(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Ml(t){const r=er(t),s=null!==r?r.factory:Si(t);if(null!==s)return s;if(t instanceof ai)throw new at(204,!1);if(t instanceof Function)return function Lh(t){const r=t.length;if(r>0)throw function to(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(r,"?"),new at(204,!1);const s=function cr(t){const r=t&&(t[ln]||t[Pr]);if(r){const s=function ar(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new at(204,!1)}function hl(t,r,s){let a;if(cl(t)){const d=Ce(t);return Si(d)||Ml(d)}if(wc(t))a=()=>Ce(t.useValue);else if(function Yl(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Il(t.deps||[]));else if(function md(t){return!(!t||!t.useExisting)}(t))a=()=>$i(Ce(t.useExisting));else{const d=Ce(t&&(t.useClass||t.provide));if(!function Uh(t){return!!t.deps}(t))return Si(d)||Ml(d);a=()=>new d(...Il(t.deps))}return a}function ou(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function qd(t){return!!t.\u0275providers}function ro(t,r){for(const s of t)Array.isArray(s)?ro(s,r):qd(s)?ro(s.\u0275providers,r):r(s)}class bc{}class zc{resolveComponentFactory(r){throw function fo(t){const r=Error(`No component factory found for ${we(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let Jl=(()=>{class t{}return t.NULL=new zc,t})();function Zd(){return fl(Wi(),jt())}function fl(t,r){return new Xl(st(t,r))}let Xl=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=Zd,t})();function _d(t){return t instanceof Xl?t.nativeElement:t}class Yd{}let Bh=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function jh(){const t=jt(),s=un(Wi().index,t);return(Wt(s)?s:t)[11]}(),t})(),$h=(()=>{class t{}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:()=>null}),t})();class qc{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const yd=new qc("14.2.0"),vd={};function Wn(t){return t.ngOriginalError}class Qr{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Wn(r);for(;s&&Wn(s);)s=Wn(s);return s||null}}const Zc=new Map;let nc=0;const Nl="__ngContext__";function $o(t,r){Wt(r)?(t[Nl]=r[20],function Gf(t){Zc.set(t[20],t)}(r)):t[Nl]=r}function Cd(t){const r=t[Nl];return"number"==typeof r?function th(t){return Zc.get(t)||null}(r):r||null}function Wh(t){const r=Cd(t);return r?Wt(r)?r:r.lView:null}function zu(t){return t instanceof Function?t():t}var Ve=(()=>((Ve=Ve||{})[Ve.Important=1]="Important",Ve[Ve.DashCase=2]="DashCase",Ve))();function mn(t,r){return undefined(t,r)}function gi(t){const r=t[3];return dn(r)?r[3]:r}function po(t){return Fs(t[13])}function ua(t){return Fs(t[4])}function Fs(t){for(;null!==t&&!dn(t);)t=t[4];return t}function Ys(t,r,s,a,d){if(null!=a){let g,b=!1;dn(a)?g=a:Wt(a)&&(b=!0,a=a[0]);const M=Hr(a);0===t&&null!==s?null==d?Kh(r,s,M):oc(r,s,M,d||null,!0):1===t&&null!==s?oc(r,s,M,d||null,!0):2===t?function Jc(t,r,s){const a=Dd(t,r);a&&function Yh(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,M,b):3===t&&r.destroyNode(M),null!=g&&function vg(t,r,s,a,d){const g=s[7];g!==Hr(s)&&Ys(r,t,a,g,d);for(let M=10;M<s.length;M++){const L=s[M];Xc(L[1],L,t,r,a,g)}}(r,t,g,s,d)}}function Ol(t,r,s){return t.createElement(r,s)}function hg(t,r){const s=t[9],a=s.indexOf(r),d=r[3];512&r[2]&&(r[2]&=-513,yi(d,-1)),s.splice(a,1)}function Xf(t,r){if(t.length<=10)return;const s=10+r,a=t[s];if(a){const d=a[17];null!==d&&d!==t&&hg(d,a),r>0&&(t[s-1][4]=a[4]);const g=ti(t,10+r);!function bd(t,r){Xc(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const b=g[19];null!==b&&b.detachView(g[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function fg(t,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Xc(t,r,s,3,null,null),function Jf(t){let r=t[13];if(!r)return qh(t[1],t);for(;r;){let s=null;if(Wt(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==t;)Wt(r)&&qh(r[1],r),r=r[3];null===r&&(r=t),Wt(r)&&qh(r[1],r),s=r&&r[4]}r=s}}(r)}}function qh(t,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Zh(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const d=r[s[a]];if(!(d instanceof fi)){const g=s[a+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const M=d[g[b]],L=g[b+1];try{L.call(M)}finally{}}else try{g.call(d)}finally{}}}}(t,r),function Hm(t,r){const s=t.cleanup,a=r[7];let d=-1;if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const b=s[g+1],M="function"==typeof b?b(r):Hr(r[b]),L=a[d=s[g+2]],W=s[g+3];"boolean"==typeof W?M.removeEventListener(s[g],L,W):W>=0?a[d=W]():a[d=-W].unsubscribe(),g+=2}else{const b=a[d=s[g+1]];s[g].call(b)}if(null!==a){for(let g=d+1;g<a.length;g++)(0,a[g])();r[7]=null}}(t,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&dn(r[3])){s!==r[3]&&hg(s,r);const a=r[19];null!==a&&a.detachView(t)}!function zf(t){Zc.delete(t[20])}(r)}}function pg(t,r,s){return function ep(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const d=t.data[a.directiveStart].encapsulation;if(d===ft.None||d===ft.Emulated)return null}return st(a,s)}(t,r.parent,s)}function oc(t,r,s,a,d){t.insertBefore(r,s,a,d)}function Kh(t,r,s){t.appendChild(r,s)}function Td(t,r,s,a,d){null!==a?oc(t,r,s,a,d):Kh(t,r,s)}function Dd(t,r){return t.parentNode(r)}let np=function tp(t,r,s){return 40&t.type?st(t,s):null};function oh(t,r,s,a){const d=pg(t,a,r),g=r[11],M=function _g(t,r,s){return np(t,r,s)}(a.parent||r[6],a,r);if(null!=d)if(Array.isArray(s))for(let L=0;L<s.length;L++)Td(g,d,s[L],M,!1);else Td(g,d,s,M,!1)}function Qh(t,r){if(null!==r){const s=r.type;if(3&s)return st(r,t);if(4&s)return ip(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Qh(t,a);{const d=t[r.index];return dn(d)?ip(-1,d):Hr(d)}}if(32&s)return mn(r,t)()||Hr(t[r.index]);{const a=rp(t,r);return null!==a?Array.isArray(a)?a[0]:Qh(gi(t[16]),a):Qh(t,r.next)}}return null}function rp(t,r){return null!==r?t[16][6].projection[r.projection]:null}function ip(t,r){const s=10+t+1;if(s<r.length){const a=r[s],d=a[1].firstChild;if(null!==d)return Qh(a,d)}return r[7]}function Sc(t,r,s,a,d,g,b){for(;null!=s;){const M=a[s.index],L=s.type;if(b&&0===r&&(M&&$o(Hr(M),a),s.flags|=4),64!=(64&s.flags))if(8&L)Sc(t,r,s.child,a,d,g,!1),Ys(r,t,d,M,g);else if(32&L){const W=mn(s,a);let J;for(;J=W();)Ys(r,t,d,J,g);Ys(r,t,d,M,g)}else 16&L?sp(t,r,a,s,d,g):Ys(r,t,d,M,g);s=b?s.projectionNext:s.next}}function Xc(t,r,s,a,d,g){Sc(s,a,t.firstChild,r,d,g,!1)}function sp(t,r,s,a,d,g){const b=s[16],L=b[6].projection[a.projection];if(Array.isArray(L))for(let W=0;W<L.length;W++)Ys(r,t,d,L[W],g);else Sc(t,r,L,b[3],d,g,!0)}function wg(t,r,s){t.setAttribute(r,"style",s)}function ah(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Cg(t,r,s){let a=t.length;for(;;){const d=t.indexOf(r,s);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=r.length;if(d+g===a||t.charCodeAt(d+g)<=32)return d}s=d+1}}const op="ng-template";function bg(t,r,s){let a=0;for(;a<t.length;){let d=t[a++];if(s&&"class"===d){if(d=t[a],-1!==Cg(d.toLowerCase(),r,0))return!0}else if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}}return!1}function Xh(t){return 4===t.type&&t.value!==op}function ef(t,r,s){return r===(4!==t.type||s?t.value:op)}function uh(t,r,s){let a=4;const d=t.attrs||[],g=function Tg(t){for(let r=0;r<t.length;r++)if(Dt(t[r]))return r;return t.length}(d);let b=!1;for(let M=0;M<r.length;M++){const L=r[M];if("number"!=typeof L){if(!b)if(4&a){if(a=2|1&a,""!==L&&!ef(t,L,s)||""===L&&1===r.length){if(au(a))return!1;b=!0}}else{const W=8&a?L:r[++M];if(8&a&&null!==t.attrs){if(!bg(t.attrs,W,s)){if(au(a))return!1;b=!0}continue}const fe=ap(8&a?"class":L,d,Xh(t),s);if(-1===fe){if(au(a))return!1;b=!0;continue}if(""!==W){let Qe;Qe=fe>g?"":d[fe+1].toLowerCase();const mt=8&a?Qe:null;if(mt&&-1!==Cg(mt,W,0)||2&a&&W!==Qe){if(au(a))return!1;b=!0}}}}else{if(!b&&!au(a)&&!au(L))return!1;if(b&&au(L))continue;b=!1,a=L|1&a}}return au(a)||b}function au(t){return 0==(1&t)}function ap(t,r,s,a){if(null===r)return-1;let d=0;if(a||!s){let g=!1;for(;d<r.length;){const b=r[d];if(b===t)return d;if(3===b||6===b)g=!0;else{if(1===b||2===b){let M=r[++d];for(;"string"==typeof M;)M=r[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=g?1:2}return-1}return function Wm(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function tf(t,r,s=!1){for(let a=0;a<r.length;a++)if(uh(t,r[a],s))return!0;return!1}function Sg(t,r){return t?":not("+r.trim()+")":r}function Gm(t){let r=t[0],s=1,a=2,d="",g=!1;for(;s<t.length;){let b=t[s];if("string"==typeof b)if(2&a){const M=t[++s];d+="["+b+(M.length>0?'="'+M+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!au(b)&&(r+=Sg(g,d),d=""),a=b,g=g||!au(a);s++}return""!==d&&(r+=Sg(g,d)),r}const Vr={};function Sd(t){nf(Nr(),jt(),Oe()+t,!1)}function nf(t,r,s,a){if(!a)if(3==(3&r[2])){const g=t.preOrderCheckHooks;null!==g&&ui(r,g,s)}else{const g=t.preOrderHooks;null!==g&&lo(r,g,0,s)}wt(s)}function rf(t,r=null,s=null,a){const d=dh(t,r,s,a);return d.resolveInjectorInitializers(),d}function dh(t,r=null,s=null,a,d=new Set){const g=[s||Ht,Zl(t)];return a=a||("object"==typeof t?void 0:we(t)),new jo(g,r||Ic(),a||null,d)}let _l=(()=>{class t{static create(s,a){if(Array.isArray(s))return rf({name:""},a,s,"");{const d=s.name??"";return rf({name:d},s.parent,s.providers,d)}}}return t.THROW_IF_NOT_FOUND=Gr,t.NULL=new Wu,t.\u0275prov=Kn({token:t,providedIn:"any",factory:()=>$i(pd)}),t.__NG_ELEMENT_ID__=-1,t})();function xc(t,r=Xt.Default){const s=jt();return null===s?$i(t,r):Uo(Wi(),s,Ce(t),r)}function hf(){throw new Error("invalid")}function yl(t,r){return t<<17|r<<2}function xu(t){return t>>17&32767}function ff(t){return 2|t}function uu(t){return(131068&t)>>2}function pp(t,r){return-131069&t|r<<2}function mh(t){return 1|t}function Fl(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a],g=s[a+1];if(-1!==g){const b=t.data[g];Ya(d),b.contentQueries(2,r[g],g)}}}function Rd(t,r,s,a,d,g,b,M,L,W,J){const fe=r.blueprint.slice();return fe[0]=d,fe[2]=76|a,(null!==J||t&&1024&t[2])&&(fe[2]|=1024),bi(fe),fe[3]=fe[15]=t,fe[8]=s,fe[10]=b||t&&t[10],fe[11]=M||t&&t[11],fe[12]=L||t&&t[12]||null,fe[9]=W||t&&t[9]||null,fe[6]=g,fe[20]=function rc(){return nc++}(),fe[21]=J,fe[16]=2==r.type?t[16]:fe,fe}function Nd(t,r,s,a,d){let g=t.data[r];if(null===g)g=function Cp(t,r,s,a,d){const g=Js(),b=Sa(),L=t.data[r]=function bp(t,r,s,a,d,g){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,s,r,a,d);return null===t.firstChild&&(t.firstChild=L),null!==g&&(b?null==g.child&&null!==L.parent&&(g.child=L):null===g.next&&(g.next=L)),L}(t,r,s,a,d),function wo(){return jn.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=s,g.value=a,g.attrs=d;const b=function ao(){const t=jn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return ls(g,!0),g}function Mc(t,r,s,a){if(0===s)return-1;const d=r.length;for(let g=0;g<s;g++)r.push(a),t.blueprint.push(a),t.data.push(null);return d}function Ef(t,r,s){Ko(r);try{const a=t.viewQuery;null!==a&&Rf(1,a,s);const d=t.template;null!==d&&wf(t,r,d,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Fl(t,r),t.staticViewQueries&&Rf(2,t.viewQuery,s);const g=t.components;null!==g&&function u_(t,r){for(let s=0;s<r.length;s++)v_(t,r[s])}(r,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[2]&=-5,z()}}function rd(t,r,s,a){const d=r[2];if(128!=(128&d)){Ko(r);try{bi(r),function uo(t){return jn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&wf(t,r,s,2,a);const b=3==(3&d);if(b){const W=t.preOrderCheckHooks;null!==W&&ui(r,W,null)}else{const W=t.preOrderHooks;null!==W&&lo(r,W,0,null),Lr(r,0)}if(function __(t){for(let r=po(t);null!==r;r=ua(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const d=s[a],g=d[3];0==(512&d[2])&&yi(g,1),d[2]|=512}}}(r),function m_(t){for(let r=po(t);null!==r;r=ua(r))for(let s=10;s<r.length;s++){const a=r[s],d=a[1];Rn(a)&&rd(d,a,d.template,a[8])}}(r),null!==t.contentQueries&&Fl(t,r),b){const W=t.contentCheckHooks;null!==W&&ui(r,W)}else{const W=t.contentHooks;null!==W&&lo(r,W,1),Lr(r,1)}!function Ep(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const d=s[a];if(d<0)wt(~d);else{const g=d,b=s[++a],M=s[++a];As(b,g),M(2,r[g])}}}finally{wt(-1)}}(t,r);const M=t.components;null!==M&&function wp(t,r){for(let s=0;s<r.length;s++)y_(t,r[s])}(r,M);const L=t.viewQuery;if(null!==L&&Rf(2,L,a),b){const W=t.viewCheckHooks;null!==W&&ui(r,W)}else{const W=t.viewHooks;null!==W&&lo(r,W,2),Lr(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,yi(r[3],-1))}finally{z()}}}function l_(t,r,s,a){const d=r[10],b=yr(r);try{!b&&d.begin&&d.begin(),b&&Ef(t,r,a),rd(t,r,s,a)}finally{!b&&d.end&&d.end()}}function wf(t,r,s,a,d){const g=Oe(),b=2&a;try{wt(-1),b&&r.length>22&&nf(t,r,22,!1),s(a,d)}finally{wt(g)}}function Ch(t,r,s){!Bi()||(function p_(t,r,s,a){const d=s.directiveStart,g=s.directiveEnd;t.firstCreatePass||ka(s,r),$o(a,r);const b=s.initialInputs;for(let M=d;M<g;M++){const L=t.data[M],W=Or(L);W&&Rp(r,s,L);const J=Jo(r,t,M,s);$o(J,r),null!==b&&tm(0,M-d,J,L,0,b),W&&(un(s.index,r)[8]=J)}}(t,r,s,st(s,r)),128==(128&s.flags)&&function g_(t,r,s){const a=s.directiveStart,d=s.directiveEnd,g=s.index,b=function Ku(){return jn.lFrame.currentDirectiveIndex}();try{wt(g);for(let M=a;M<d;M++){const L=t.data[M],W=r[M];Ra(M),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Dp(L,W)}}finally{wt(-1),Ra(b)}}(t,r,s))}function Cf(t,r,s=st){const a=r.localNames;if(null!==a){let d=r.index+1;for(let g=0;g<a.length;g+=2){const b=a[g+1],M=-1===b?s(r,t):t[b];t[d++]=M}}}function If(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=bf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function bf(t,r,s,a,d,g,b,M,L,W){const J=22+a,fe=J+d,Qe=function c_(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Vr);return s}(J,fe),mt="function"==typeof W?W():W;return Qe[1]={type:t,blueprint:Qe,template:s,queries:null,viewQuery:M,declTNode:r,data:Qe.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:L,consts:mt,incompleteFirstPass:!1}}function Qg(t,r,s,a){const d=Th(r);null===s?d.push(a):(d.push(s),t.firstCreatePass&&di(t).push(a,d.length-1))}function Tf(t,r,s){for(let a in t)if(t.hasOwnProperty(a)){const d=t[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,d):s[a]=[r,d]}return s}function Df(t,r){const a=r.directiveEnd,d=t.data,g=r.attrs,b=[];let M=null,L=null;for(let W=r.directiveStart;W<a;W++){const J=d[W],fe=J.inputs,Qe=null===g||Xh(r)?null:Np(fe,g);b.push(Qe),M=Tf(fe,W,M),L=Tf(J.outputs,W,L)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=16),M.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=b,r.inputs=M,r.outputs=L}function lu(t,r,s,a,d,g,b,M){const L=st(r,s);let J,W=r.inputs;!M&&null!=W&&(J=W[a])?(id(t,s,J,a,d),Ln(r)&&Tp(s,r.index)):3&r.type&&(a=function d_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=b?b(d,r.value||"",a):d,g.setProperty(L,a,d))}function Tp(t,r){const s=un(r,t);16&s[2]||(s[2]|=32)}function Pd(t,r,s,a){let d=!1;if(Bi()){const g=function Sp(t,r,s){const a=t.directiveRegistry;let d=null;if(a)for(let g=0;g<a.length;g++){const b=a[g];tf(s,b.selectors,!1)&&(d||(d=[]),$r(ka(s,r),t,b.type),Or(b)?(Ap(t,s),d.unshift(b)):d.push(b))}return d}(t,r,s),b=null===a?null:{"":-1};if(null!==g){d=!0,Sf(s,t.data.length,g.length);for(let J=0;J<g.length;J++){const fe=g[J];fe.providersResolver&&fe.providersResolver(fe)}let M=!1,L=!1,W=Mc(t,r,g.length,null);for(let J=0;J<g.length;J++){const fe=g[J];s.mergedAttrs=Ui(s.mergedAttrs,fe.hostAttrs),Ih(t,s,r,W,fe),Mp(W,fe,b),null!==fe.contentQueries&&(s.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(s.flags|=128);const Qe=fe.type.prototype;!M&&(Qe.ngOnChanges||Qe.ngOnInit||Qe.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),M=!0),!L&&(Qe.ngOnChanges||Qe.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),L=!0),W++}Df(t,s)}b&&function xp(t,r,s){if(r){const a=t.localNames=[];for(let d=0;d<r.length;d+=2){const g=s[r[d+1]];if(null==g)throw new at(-301,!1);a.push(r[d],g)}}}(s,a,b)}return s.mergedAttrs=Ui(s.mergedAttrs,s.attrs),d}function em(t,r,s,a,d,g){const b=g.hostBindings;if(b){let M=t.hostBindingOpCodes;null===M&&(M=t.hostBindingOpCodes=[]);const L=~r.index;(function f_(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(M)!=L&&M.push(L),M.push(a,d,b)}}function Dp(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Ap(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function Mp(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Or(r)&&(s[""]=t)}}function Sf(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}function Ih(t,r,s,a,d){t.data[a]=d;const g=d.factory||(d.factory=Si(d.type)),b=new fi(g,Or(d),xc);t.blueprint[a]=b,s[a]=b,em(t,r,0,a,Mc(t,s,d.hostVars,Vr),d)}function Rp(t,r,s){const a=st(r,t),d=If(s),g=t[10],b=Mf(t,Rd(t,d,null,s.onPush?32:16,a,r,g,g.createRenderer(a,s),null,null,null));t[r.index]=b}function vl(t,r,s,a,d,g){const b=st(t,r);!function Od(t,r,s,a,d,g,b){if(null==g)t.removeAttribute(r,d,s);else{const M=null==b?it(g):b(g,a||"",d);t.setAttribute(r,d,M,s)}}(r[11],b,g,t.value,s,a,d)}function tm(t,r,s,a,d,g){const b=g[r];if(null!==b){const M=a.setInput;for(let L=0;L<b.length;){const W=b[L++],J=b[L++],fe=b[L++];null!==M?a.setInput(s,fe,W,J):s[J]=fe}}}function Np(t,r){let s=null,a=0;for(;a<r.length;){const d=r[a];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===s&&(s=[]),s.push(d,t[d],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Af(t,r,s,a){return new Array(t,!0,!1,r,null,0,a,s,null,null)}function y_(t,r){const s=un(r,t);if(Rn(s)){const a=s[1];48&s[2]?rd(a,s,a.template,s[8]):s[5]>0&&xf(s)}}function xf(t){for(let a=po(t);null!==a;a=ua(a))for(let d=10;d<a.length;d++){const g=a[d];if(Rn(g))if(512&g[2]){const b=g[1];rd(b,g,b.template,g[8])}else g[5]>0&&xf(g)}const s=t[1].components;if(null!==s)for(let a=0;a<s.length;a++){const d=un(s[a],t);Rn(d)&&d[5]>0&&xf(d)}}function v_(t,r){const s=un(r,t),a=s[1];(function nm(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])})(a,s),Ef(a,s,s[8])}function Mf(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function Pp(t){for(;t;){t[2]|=32;const r=gi(t);if(rs(t)&&!r)return t;t=r}return null}function Rf(t,r,s){Ya(0),r(t,s)}function Th(t){return t[7]||(t[7]=[])}function di(t){return t.cleanup||(t.cleanup=[])}function Lp(t,r){const s=t[9],a=s?s.get(Qr,null):null;a&&a.handleError(r)}function id(t,r,s,a,d){for(let g=0;g<s.length;){const b=s[g++],M=s[g++],L=r[b],W=t.data[b];null!==W.setInput?W.setInput(L,d,a,M):L[M]=d}}function uc(t,r,s){const a=We(r,t);!function so(t,r,s){t.setValue(r,s)}(t[11],a,s)}function ys(t,r,s){let a=s?t.styles:null,d=s?t.classes:null,g=0;if(null!==r)for(let b=0;b<r.length;b++){const M=r[b];"number"==typeof M?g=M:1==g?d=Ye(d,M):2==g&&(a=Ye(a,M+": "+r[++b]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=d:t.classesWithoutHost=d}function xo(t,r,s,a,d=!1){for(;null!==s;){const g=r[s.index];if(null!==g&&a.push(Hr(g)),dn(g))for(let M=10;M<g.length;M++){const L=g[M],W=L[1].firstChild;null!==W&&xo(L[1],L,W,a)}const b=s.type;if(8&b)xo(t,r,s.child,a);else if(32&b){const M=mn(s,r);let L;for(;L=M();)a.push(L)}else if(16&b){const M=rp(r,s);if(Array.isArray(M))a.push(...M);else{const L=gi(r[16]);xo(L[1],L,M,a,!0)}}s=d?s.projectionNext:s.next}return a}class cu{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return xo(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(dn(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Xf(r,a),ti(s,a))}this._attachedToViewContainer=!1}fg(this._lView[1],this._lView)}onDestroy(r){Qg(this._lView[1],this._lView,null,r)}markForCheck(){Pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Op(t,r,s){const a=r[10];a.begin&&a.begin();try{rd(t,r,t.template,s)}catch(d){throw Lp(r,d),d}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ih(t,r){Xc(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new at(902,!1);this._appRef=r}}class I_ extends cu{constructor(r){super(r),this._view=r}detectChanges(){!function kp(t){!function E_(t){for(let r=0;r<t.components.length;r++){const s=t.components[r],a=Wh(s);if(null!==a){const d=a[1];l_(d,a,d.template,s)}}}(t[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Up extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Ae(r);return new Dh(s,this.ngModule)}}function Vp(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class im{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const d=this.injector.get(r,vd,a);return d!==vd||s===vd?d:this.parentInjector.get(r,s,a)}}class Dh extends bc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function zm(t){return t.map(Gm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Vp(this.componentDef.inputs)}get outputs(){return Vp(this.componentDef.outputs)}create(r,s,a,d){let g=(d=d||this.ngModule)instanceof dl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new im(r,g):r,M=b.get(Yd,null);if(null===M)throw new at(407,!1);const L=b.get($h,null),W=M.createRenderer(null,this.componentDef),J=this.componentDef.selectors[0][0]||"div",fe=a?function Ip(t,r,s){return t.selectRootElement(r,s===ft.ShadowDom)}(W,a,this.componentDef.encapsulation):Ol(M.createRenderer(null,this.componentDef),J,function b_(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(J)),Qe=this.componentDef.onPush?288:272,mt={components:[]},zt=bf(0,null,null,1,0,null,null,null,null,null),rn=Rd(null,zt,mt,Qe,null,null,M,W,L,b,null);let Pn,zn;Ko(rn);try{const xr=function Zy(t,r,s,a,d,g){const b=s[1];s[22]=t;const L=Nd(b,22,2,"#host",null),W=L.mergedAttrs=r.hostAttrs;null!==W&&(ys(L,W,!0),null!==t&&(cn(d,t,W),null!==L.classes&&ah(d,t,L.classes),null!==L.styles&&wg(d,t,L.styles)));const J=a.createRenderer(t,r),fe=Rd(s,If(r),null,r.onPush?32:16,s[22],L,a,J,g||null,null,null);return b.firstCreatePass&&($r(ka(L,s),b,r.type),Ap(b,L),Sf(L,s.length,1)),Mf(s,fe),s[22]=fe}(fe,this.componentDef,rn,M,W);if(fe)if(a)cn(W,fe,["ng-version",yd.full]);else{const{attrs:Qt,classes:_r}=function Ag(t){const r=[],s=[];let a=1,d=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===d?""!==g&&r.push(g,t[++a]):8===d&&s.push(g);else{if(!au(d))break;d=g}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Qt&&cn(W,fe,Qt),_r&&_r.length>0&&ah(W,fe,_r.join(" "))}if(zn=Ct(zt,22),void 0!==s){const Qt=zn.projection=[];for(let _r=0;_r<this.ngContentSelectors.length;_r++){const Ei=s[_r];Qt.push(null!=Ei?Array.from(Ei):null)}}Pn=function D_(t,r,s,a,d){const g=s[1],b=function Xg(t,r,s){const a=Wi();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Ih(t,a,r,Mc(t,r,1,null),s),Df(t,a));const d=Jo(r,t,a.directiveStart,a);$o(d,r);const g=st(a,r);return g&&$o(g,r),d}(g,s,r);if(a.components.push(b),t[8]=b,null!==d)for(const L of d)L(b,r);if(r.contentQueries){const L=Wi();r.contentQueries(1,b,L.directiveStart)}const M=Wi();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(wt(M.index),em(s[1],M,0,M.directiveStart,M.directiveEnd,r),Dp(r,b)),b}(xr,this.componentDef,rn,mt,[sm]),Ef(zt,rn,null)}finally{z()}return new T_(this.componentType,Pn,fl(zn,rn),rn,zn)}}class T_ extends class Hc{}{constructor(r,s,a,d,g){super(),this.location=a,this._rootLView=d,this._tNode=g,this.instance=s,this.hostView=this.changeDetectorRef=new I_(d),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[r])){const g=this._rootLView;id(g[1],g,d,r,s),Tp(g,this._tNode.index)}}get injector(){return new _a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function sm(){const t=Wi();jr(jt()[1],t)}function jp(t){let r=function om(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let d;if(Or(t))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new at(903,!1);d=r.\u0275dir}if(d){if(s){a.push(d);const b=t;b.inputs=$p(t.inputs),b.declaredInputs=$p(t.declaredInputs),b.outputs=$p(t.outputs);const M=d.hostBindings;M&&x_(t,M);const L=d.viewQuery,W=d.contentQueries;if(L&&S_(t,L),W&&A_(t,W),je(t.inputs,d.inputs),je(t.declaredInputs,d.declaredInputs),je(t.outputs,d.outputs),Or(d)&&d.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let b=0;b<g.length;b++){const M=g[b];M&&M.ngInherit&&M(t),M===jp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function am(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=r+=d.hostVars,d.hostAttrs=Ui(d.hostAttrs,s=Ui(s,d.hostAttrs))}}(a)}function $p(t){return t===Hn?{}:t===Ht?[]:t}function S_(t,r){const s=t.viewQuery;t.viewQuery=s?(a,d)=>{r(a,d),s(a,d)}:r}function A_(t,r){const s=t.contentQueries;t.contentQueries=s?(a,d,g)=>{r(a,d,g),s(a,d,g)}:r}function x_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,d)=>{r(a,d),s(a,d)}:r}let Sh=null;function du(){if(!Sh){const t=gt.Symbol;if(t&&t.iterator)Sh=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Sh=a)}}}return Sh}function qu(t){return!!Hp(t)&&(Array.isArray(t)||!(t instanceof Map)&&du()in t)}function Hp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function El(t,r,s){return t[r]=s}function Mo(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function od(t,r,s,a){const d=Mo(t,r,s);return Mo(t,r+1,a)||d}function ad(t,r,s,a){const d=jt();return Mo(d,Ma(),r)&&(Nr(),vl(Tt(),d,t,r,s,a)),ad}function Rc(t,r,s,a){return Mo(t,Ma(),s)?r+it(s)+a:Vr}function Fd(t,r,s,a,d,g){const M=od(t,function Gs(){return jn.lFrame.bindingIndex}(),s,d);return Cs(2),M?r+it(s)+a+it(d)+g:Vr}function Oc(t,r,s,a,d,g,b,M){const L=jt(),W=Nr(),J=t+22,fe=W.firstCreatePass?function kf(t,r,s,a,d,g,b,M,L){const W=r.consts,J=Nd(r,t,4,b||null,Zr(W,M));Pd(r,s,J,Zr(W,L)),jr(r,J);const fe=J.tViews=bf(2,J,a,d,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,W);return null!==r.queries&&(r.queries.template(r,J),fe.queries=r.queries.embeddedTView(J)),J}(J,W,L,r,s,a,d,g,b):W.data[J];ls(fe,!1);const Qe=L[11].createComment("");oh(W,L,Qe,fe),$o(Qe,L),Mf(L,L[J]=Af(Qe,L,Qe,fe)),Bn(fe)&&Ch(W,L,fe),null!=b&&Cf(L,fe,M)}function Bd(t){return sn(function xa(){return jn.lFrame.contextLView}(),22+t)}function lc(t,r,s){const a=jt();return Mo(a,Ma(),r)&&lu(Nr(),Tt(),a,t,r,a[11],s,!1),lc}function qp(t,r,s,a,d){const b=d?"class":"style";id(t,s,r.inputs[b],b,a)}function Mh(t,r,s,a){const d=jt(),g=Nr(),b=22+t,M=d[11],L=d[b]=Ol(M,r,function Fr(){return jn.lFrame.currentNamespace}()),W=g.firstCreatePass?function O_(t,r,s,a,d,g,b){const M=r.consts,W=Nd(r,t,2,d,Zr(M,g));return Pd(r,s,W,Zr(M,b)),null!==W.attrs&&ys(W,W.attrs,!1),null!==W.mergedAttrs&&ys(W,W.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,W),W}(b,g,d,0,r,s,a):g.data[b];ls(W,!0);const J=W.mergedAttrs;null!==J&&cn(M,L,J);const fe=W.classes;null!==fe&&ah(M,L,fe);const Qe=W.styles;return null!==Qe&&wg(M,L,Qe),64!=(64&W.flags)&&oh(g,d,L,W),0===function Fo(){return jn.lFrame.elementDepthCount}()&&$o(L,d),function Eo(){jn.lFrame.elementDepthCount++}(),Bn(W)&&(Ch(g,d,W),function Yg(t,r,s){if(Mn(r)){const d=r.directiveEnd;for(let g=r.directiveStart;g<d;g++){const b=t.data[g];b.contentQueries&&b.contentQueries(1,s[g],g)}}}(g,W,d)),null!==a&&Cf(d,W),Mh}function kc(){let t=Wi();Sa()?function ji(){jn.lFrame.isParent=!1}():(t=t.parent,ls(t,!1));const r=t;!function li(){jn.lFrame.elementDepthCount--}();const s=Nr();return s.firstCreatePass&&(jr(s,t),Mn(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Oa(t){return 0!=(16&t.flags)}(r)&&qp(s,r,jt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Dn(t){return 0!=(32&t.flags)}(r)&&qp(s,r,jt(),r.stylesWithoutHost,!1),kc}function Zp(t,r,s,a){return Mh(t,r,s,a),kc(),Zp}function Qp(){return jt()}function Jp(t){return!!t&&"function"==typeof t.then}function cm(t){return!!t&&"function"==typeof t.subscribe}const Xp=cm;function eg(t,r,s,a){const d=jt(),g=Nr(),b=Wi();return function fm(t,r,s,a,d,g,b,M){const L=Bn(a),J=t.firstCreatePass&&di(t),fe=r[8],Qe=Th(r);let mt=!0;if(3&a.type||M){const Pn=st(a,r),zn=M?M(Pn):Pn,xr=Qe.length,Qt=M?Ei=>M(Hr(Ei[a.index])):a.index;let _r=null;if(!M&&L&&(_r=function hm(t,r,s,a){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const b=d[g];if(b===s&&d[g+1]===a){const M=r[7],L=d[g+2];return M.length>L?M[L]:null}"string"==typeof b&&(g+=2)}return null}(t,r,d,a.index)),null!==_r)(_r.__ngLastListenerFn__||_r).__ngNextListenerFn__=g,_r.__ngLastListenerFn__=g,mt=!1;else{g=tg(a,r,fe,g,!1);const Ei=s.listen(zn,d,g);Qe.push(g,Ei),J&&J.push(d,Qt,xr,xr+1)}}else g=tg(a,r,fe,g,!1);const zt=a.outputs;let rn;if(mt&&null!==zt&&(rn=zt[d])){const Pn=rn.length;if(Pn)for(let zn=0;zn<Pn;zn+=2){const Us=r[rn[zn]][rn[zn+1]].subscribe(g),Oh=Qe.length;Qe.push(g,Us),J&&J.push(d,a.index,Oh,-(Oh+1))}}}(g,d,d[11],b,t,r,0,a),eg}function pm(t,r,s,a){try{return!1!==s(a)}catch(d){return Lp(t,d),!1}}function tg(t,r,s,a,d){return function g(b){if(b===Function)return a;Pp(2&t.flags?un(t.index,r):r);let L=pm(r,0,a,b),W=g.__ngNextListenerFn__;for(;W;)L=pm(r,0,W,b)&&L,W=W.__ngNextListenerFn__;return d&&!1===L&&(b.preventDefault(),b.returnValue=!1),L}}function ng(t=1){return function U(t){return(jn.lFrame.contextLView=function Q(t,r){for(;t>0;)r=r[15],t--;return r}(t,jn.lFrame.contextLView))[8]}(t)}function Rh(t,r,s){return jd(t,"",r,"",s),Rh}function jd(t,r,s,a,d){const g=jt(),b=Rc(g,r,s,a);return b!==Vr&&lu(Nr(),Tt(),g,t,b,g[11],d,!1),jd}function Cm(t,r,s,a,d){const g=t[s+1],b=null===r;let M=a?xu(g):uu(g),L=!1;for(;0!==M&&(!1===L||b);){const J=t[M+1];V_(t[M],r)&&(L=!0,t[M+1]=a?mh(J):ff(J)),M=a?xu(J):uu(J)}L&&(t[s+1]=a?ff(g):mh(g))}function V_(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&D(t,r)>=0}const Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Im(t){return t.substring(Ro.key,Ro.keyEnd)}function Ff(t,r){const s=Ro.textEnd;return s===r?-1:(r=Ro.keyEnd=function $_(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,Ro.key=r,s),Hd(t,r,s))}function Hd(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function e(t,r){return function I(t,r,s,a){const d=jt(),g=Nr(),b=Cs(2);g.firstUpdatePass&&q(g,t,b,a),r!==Vr&&Mo(d,b,r)&&ns(g,g.data[Oe()],d,d[11],t,d[b+1]=function qi(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=we(Wa(t)))),t}(r,s),a,b)}(t,r,null,!0),e}function f(t,r){for(let s=function $d(t){return function Tm(t){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=t.length}(t),Ff(t,Hd(t,0,Ro.textEnd))}(r);s>=0;s=Ff(r,s))fs(t,Im(r),!0)}function $(t,r){return r>=t.expandoStartIndex}function q(t,r,s,a){const d=t.data;if(null===d[s+1]){const g=d[Oe()],b=$(t,s);Wo(g,a)&&null===r&&!b&&(r=!1),r=function ae(t,r,s,a){const d=function da(t){const r=jn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(s=In(s=Gt(null,t,r,s,a),r.attrs,a),g=null);else{const b=r.directiveStylingLast;if(-1===b||t[b]!==d)if(s=Gt(d,t,r,s,a),null===g){let L=function Be(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==uu(a))return t[xu(a)]}(t,r,a);void 0!==L&&Array.isArray(L)&&(L=Gt(null,t,r,L[1],a),L=In(L,r.attrs,a),function Et(t,r,s,a){t[xu(s?r.classBindings:r.styleBindings)]=a}(t,r,a,L))}else g=function Ut(t,r,s){let a;const d=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<d;g++)a=In(a,t[g].hostAttrs,s);return In(a,r.attrs,s)}(t,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(d,g,r,a),function L_(t,r,s,a,d,g){let b=g?r.classBindings:r.styleBindings,M=xu(b),L=uu(b);t[a]=s;let J,W=!1;if(Array.isArray(s)){const fe=s;J=fe[1],(null===J||D(fe,J)>0)&&(W=!0)}else J=s;if(d)if(0!==L){const Qe=xu(t[M+1]);t[a+1]=yl(Qe,M),0!==Qe&&(t[Qe+1]=pp(t[Qe+1],a)),t[M+1]=function xd(t,r){return 131071&t|r<<17}(t[M+1],a)}else t[a+1]=yl(M,0),0!==M&&(t[M+1]=pp(t[M+1],a)),M=a;else t[a+1]=yl(L,0),0===M?M=a:t[L+1]=pp(t[L+1],a),L=a;W&&(t[a+1]=ff(t[a+1])),Cm(t,J,a,!0),Cm(t,J,a,!1),function U_(t,r,s,a,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&D(g,r)>=0&&(s[a+1]=mh(s[a+1]))}(r,J,t,a,g),b=yl(M,L),g?r.classBindings=b:r.styleBindings=b}(d,g,r,s,b,a)}}function Gt(t,r,s,a,d){let g=null;const b=s.directiveEnd;let M=s.directiveStylingLast;for(-1===M?M=s.directiveStart:M++;M<b&&(g=r[M],a=In(a,g.hostAttrs,d),g!==t);)M++;return null!==t&&(s.directiveStylingLast=M),a}function In(t,r,s){const a=s?1:2;let d=-1;if(null!==r)for(let g=0;g<r.length;g++){const b=r[g];"number"==typeof b?d=b:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fs(t,b,!!s||r[++g]))}return void 0===t?null:t}function ns(t,r,s,a,d,g,b,M){if(!(3&r.type))return;const L=t.data,W=L[M+1];Hi(function Ug(t){return 1==(1&t)}(W)?mo(L,r,s,d,uu(W),b):void 0)||(Hi(g)||function nd(t){return 2==(2&t)}(W)&&(g=mo(L,null,s,d,M,b)),function Eg(t,r,s,a,d){if(r)d?t.addClass(s,a):t.removeClass(s,a);else{let g=-1===a.indexOf("-")?void 0:Ve.DashCase;null==d?t.removeStyle(s,a,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Ve.Important),t.setStyle(s,a,d,g))}}(a,b,We(Oe(),s),d,g))}function mo(t,r,s,a,d,g){const b=null===r;let M;for(;d>0;){const L=t[d],W=Array.isArray(L),J=W?L[1]:L,fe=null===J;let Qe=s[d+1];Qe===Vr&&(Qe=fe?Ht:void 0);let mt=fe?Xu(Qe,a):J===a?Qe:void 0;if(W&&!Hi(mt)&&(mt=Xu(L,a)),Hi(mt)&&(M=mt,b))return M;const zt=t[d+1];d=b?xu(zt):uu(zt)}if(null!==r){let L=g?r.residualClasses:r.residualStyles;null!=L&&(M=Xu(L,a))}return M}function Hi(t){return void 0!==t}function Wo(t,r){return 0!=(t.flags&(r?16:32))}function Wd(t,r=""){const s=jt(),a=Nr(),d=t+22,g=a.firstCreatePass?Nd(a,d,1,r,null):a.data[d],b=s[d]=function Ds(t,r){return t.createText(r)}(s[11],r);oh(a,s,b,g),ls(g,!1)}function z_(t){return Sm("",t,""),z_}function Sm(t,r,s){const a=jt(),d=Rc(a,t,r,s);return d!==Vr&&uc(a,Oe(),d),Sm}function q_(t,r,s,a,d){const g=jt(),b=Fd(g,t,r,s,a,d);return b!==Vr&&uc(g,Oe(),b),q_}function sv(t,r,s){!function P(t,r,s,a){const d=Nr(),g=Cs(2);d.firstUpdatePass&&q(d,null,g,a);const b=jt();if(s!==Vr&&Mo(b,g,s)){const M=d.data[Oe()];if(Wo(M,a)&&!$(d,g)){let L=a?M.classesWithoutHost:M.stylesWithoutHost;null!==L&&(s=Ye(L,s||"")),qp(d,M,b,s,a)}else!function ts(t,r,s,a,d,g,b,M){d===Vr&&(d=Ht);let L=0,W=0,J=0<d.length?d[0]:null,fe=0<g.length?g[0]:null;for(;null!==J||null!==fe;){const Qe=L<d.length?d[L+1]:void 0,mt=W<g.length?g[W+1]:void 0;let rn,zt=null;J===fe?(L+=2,W+=2,Qe!==mt&&(zt=fe,rn=mt)):null===fe||null!==J&&J<fe?(L+=2,zt=J):(W+=2,zt=fe,rn=mt),null!==zt&&ns(t,r,s,a,zt,rn,b,M),J=L<d.length?d[L]:null,fe=W<g.length?g[W]:null}}(d,M,b,b[11],b[g+1],b[g+1]=function Jn(t,r,s){if(null==s||""===s)return Ht;const a=[],d=Wa(s);if(Array.isArray(d))for(let g=0;g<d.length;g++)t(a,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&t(a,g,d[g]);else"string"==typeof d&&r(a,d);return a}(t,r,s),a,g)}}(fs,f,Rc(jt(),t,r,s),!0)}const Nh=void 0;var VE=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UE(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Lf={};function Z_(t){const r=function BE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=yv(r);if(s)return s;const a=r.split("-")[0];if(s=yv(a),s)return s;if("en"===a)return VE;throw new at(701,!1)}function _v(t){return Z_(t)[Tr.PluralCase]}function yv(t){return t in Lf||(Lf[t]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[t]),Lf[t]}var Tr=(()=>((Tr=Tr||{})[Tr.LocaleId=0]="LocaleId",Tr[Tr.DayPeriodsFormat=1]="DayPeriodsFormat",Tr[Tr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tr[Tr.DaysFormat=3]="DaysFormat",Tr[Tr.DaysStandalone=4]="DaysStandalone",Tr[Tr.MonthsFormat=5]="MonthsFormat",Tr[Tr.MonthsStandalone=6]="MonthsStandalone",Tr[Tr.Eras=7]="Eras",Tr[Tr.FirstDayOfWeek=8]="FirstDayOfWeek",Tr[Tr.WeekendRange=9]="WeekendRange",Tr[Tr.DateFormat=10]="DateFormat",Tr[Tr.TimeFormat=11]="TimeFormat",Tr[Tr.DateTimeFormat=12]="DateTimeFormat",Tr[Tr.NumberSymbols=13]="NumberSymbols",Tr[Tr.NumberFormats=14]="NumberFormats",Tr[Tr.CurrencyCode=15]="CurrencyCode",Tr[Tr.CurrencySymbol=16]="CurrencySymbol",Tr[Tr.CurrencyName=17]="CurrencyName",Tr[Tr.Currencies=18]="Currencies",Tr[Tr.Directionality=19]="Directionality",Tr[Tr.PluralCase=20]="PluralCase",Tr[Tr.ExtraData=21]="ExtraData",Tr))();const Uf="en-US";let vv=Uf;function Q_(t,r,s,a,d){if(t=Ce(t),Array.isArray(t))for(let g=0;g<t.length;g++)Q_(t[g],r,s,a,d);else{const g=Nr(),b=jt();let M=cl(t)?t:Ce(t.provide),L=hl(t);const W=Wi(),J=1048575&W.providerIndexes,fe=W.directiveStart,Qe=W.providerIndexes>>20;if(cl(t)||!t.multi){const mt=new fi(L,d,xc),zt=X_(M,r,d?J:J+Qe,fe);-1===zt?($r(ka(W,b),g,M),J_(g,t,r.length),r.push(M),W.directiveStart++,W.directiveEnd++,d&&(W.providerIndexes+=1048576),s.push(mt),b.push(mt)):(s[zt]=mt,b[zt]=mt)}else{const mt=X_(M,r,J+Qe,fe),zt=X_(M,r,J,J+Qe),rn=mt>=0&&s[mt],Pn=zt>=0&&s[zt];if(d&&!Pn||!d&&!rn){$r(ka(W,b),g,M);const zn=function Lw(t,r,s,a,d){const g=new fi(t,s,xc);return g.multi=[],g.index=r,g.componentProviders=0,Wv(g,d,a&&!s),g}(d?Fw:kw,s.length,d,a,L);!d&&Pn&&(s[zt].providerFactory=zn),J_(g,t,r.length,0),r.push(M),W.directiveStart++,W.directiveEnd++,d&&(W.providerIndexes+=1048576),s.push(zn),b.push(zn)}else J_(g,t,mt>-1?mt:zt,Wv(s[d?zt:mt],L,!d&&a));!d&&a&&Pn&&s[zt].componentProviders++}}}function J_(t,r,s,a){const d=cl(r),g=function Cc(t){return!!t.useClass}(r);if(d||g){const L=(g?Ce(r.useClass):r).prototype.ngOnDestroy;if(L){const W=t.destroyHooks||(t.destroyHooks=[]);if(!d&&r.multi){const J=W.indexOf(s);-1===J?W.push(s,[a,L]):W[J+1].push(a,L)}else W.push(s,L)}}}function Wv(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function X_(t,r,s,a){for(let d=s;d<a;d++)if(r[d]===t)return d;return-1}function kw(t,r,s,a){return ey(this.multi,[])}function Fw(t,r,s,a){const d=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,M=Jo(s,s[1],this.providerFactory.index,a);g=M.slice(0,b),ey(d,g);for(let L=b;L<M.length;L++)g.push(M[L])}else g=[],ey(d,g);return g}function ey(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Gv(t,r=[]){return s=>{s.providersResolver=(a,d)=>function Ow(t,r,s){const a=Nr();if(a.firstCreatePass){const d=Or(t);Q_(s,a.data,a.blueprint,d,!0),Q_(r,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,r)}}class Bf{}class zv{}function Uw(t,r){return new qv(t,r??null)}class qv extends Bf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Up(this);const a=_n(r);this._bootstrapComponents=zu(a.bootstrap),this._r3Injector=dh(r,s,[{provide:Bf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],we(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class ty extends zv{constructor(r){super(),this.moduleType=r}create(r){return new qv(this.moduleType,r)}}class Vw extends Bf{constructor(r,s,a){super(),this.componentFactoryResolver=new Up(this),this.instance=null;const d=new jo([...r,{provide:Bf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],s||Ic(),a,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function ny(t,r,s=null){return new Vw(t,r,s).injector}let Bw=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=Al(0,s.type),d=a.length>0?ny([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,d)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Kn({token:t,providedIn:"environment",factory:()=>new t($i(dl))}),t})();function Zv(t){t.getStandaloneInjector=r=>r.get(Bw).getOrCreateStandaloneInjector(t)}function t0(t,r,s,a){return n0(jt(),Li(),t,r,s,a)}function ug(t,r){const s=t[r];return s===Vr?void 0:s}function n0(t,r,s,a,d,g){const b=r+s;return Mo(t,b,d)?El(t,b+1,g?a.call(g,d):a(d)):ug(t,b+1)}function u0(t,r){const s=Nr();let a;const d=t+22;s.firstCreatePass?(a=function iC(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[d]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(d,a.onDestroy)):a=s.data[d];const g=a.factory||(a.factory=Si(a.type)),b=Zn(xc);try{const M=Pu(!1),L=g();return Pu(M),function cd(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,jt(),d,L),L}finally{Zn(b)}}function l0(t,r,s){const a=t+22,d=jt(),g=sn(d,a);return lg(d,a)?n0(d,Li(),r,g.transform,s,g):g.transform(s)}function c0(t,r,s,a){const d=t+22,g=jt(),b=sn(g,d);return lg(g,d)?function r0(t,r,s,a,d,g,b){const M=r+s;return od(t,M,d,g)?El(t,M+2,b?a.call(b,d,g):a(d,g)):ug(t,M+2)}(g,Li(),r,b.transform,s,a,b):b.transform(s,a)}function lg(t,r){return t[1].data[r].pure}function iy(t){return r=>{setTimeout(t,void 0,r)}}const Lc=class uC extends C.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let d=r,g=s||(()=>null),b=a;if(r&&"object"==typeof r){const L=r;d=L.next?.bind(L),g=L.error?.bind(L),b=L.complete?.bind(L)}this.__isAsync&&(g=iy(g),d&&(d=iy(d)),b&&(b=iy(b)));const M=super.subscribe({next:d,error:g,complete:b});return r instanceof p.w0&&r.add(M),M}};function lC(){return this._results[du()]()}class sy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=du(),a=sy.prototype;a[s]||(a[s]=lC)}get changes(){return this._changes||(this._changes=new Lc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const d=br(r);(this._changesDetected=!function Ba(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],g=r[a];if(s&&(d=s(d),g=s(g)),g!==d)return!1}return!0}(a._results,d,s))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let cg=(()=>{class t{}return t.__NG_ELEMENT_ID__=hC,t})();const cC=cg,dC=class extends cC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,d=Rd(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(a)),Ef(a,d,r),new cu(d)}};function hC(){return Nm(Wi(),jt())}function Nm(t,r){return 4&t.type?new dC(r,t,fl(t,r)):null}let Pm=(()=>{class t{}return t.__NG_ELEMENT_ID__=fC,t})();function fC(){return f0(Wi(),jt())}const pC=Pm,d0=class extends pC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return fl(this._hostTNode,this._hostLView)}get injector(){return new _a(this._hostTNode,this._hostLView)}get parentInjector(){const r=Lo(this._hostTNode,this._hostLView);if(wl(r)){const s=Qo(r,this._hostLView),a=fa(r);return new _a(s[1].data[a+8],s)}return new _a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=h0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let d,g;"number"==typeof a?d=a:null!=a&&(d=a.index,g=a.injector);const b=r.createEmbeddedView(s||{},g);return this.insert(b,d),b}createComponent(r,s,a,d,g){const b=r&&!function hs(t){return"function"==typeof t}(r);let M;if(b)M=s;else{const fe=s||{};M=fe.index,a=fe.injector,d=fe.projectableNodes,g=fe.environmentInjector||fe.ngModuleRef}const L=b?r:new Dh(Ae(r)),W=a||this.parentInjector;if(!g&&null==L.ngModule){const Qe=(b?W:this.parentInjector).get(dl,null);Qe&&(g=Qe)}const J=L.create(W,d,void 0,g);return this.insert(J.hostView,M),J}insert(r,s){const a=r._lView,d=a[1];if(function kr(t){return dn(t[3])}(a)){const J=this.indexOf(r);if(-1!==J)this.detach(J);else{const fe=a[3],Qe=new d0(fe,fe[6],fe[3]);Qe.detach(Qe.indexOf(r))}}const g=this._adjustIndex(s),b=this._lContainer;!function Ho(t,r,s,a){const d=10+a,g=s.length;a>0&&(s[d-1][4]=r),a<g-10?(r[4]=s[d],Ps(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function $m(t,r){const s=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===s?t[9]=[r]:s.push(r)}(b,r);const M=r[19];null!==M&&M.insertView(t),r[2]|=64}(d,a,b,g);const M=ip(g,b),L=a[11],W=Dd(L,b[7]);return null!==W&&function Qc(t,r,s,a,d,g){a[0]=d,a[6]=r,Xc(t,a,s,1,d,g)}(d,b[6],L,a,W,M),r.attachToViewContainerRef(),Ps(oy(b),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=h0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Xf(this._lContainer,s);a&&(ti(oy(this._lContainer),s),fg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Xf(this._lContainer,s);return a&&null!=ti(oy(this._lContainer),s)?new cu(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function h0(t){return t[8]}function oy(t){return t[8]||(t[8]=[])}function f0(t,r){let s;const a=r[t.index];if(dn(a))s=a;else{let d;if(8&t.type)d=Hr(a);else{const g=r[11];d=g.createComment("");const b=st(t,r);oc(g,Dd(g,b),d,function mg(t,r){return t.nextSibling(r)}(g,b),!1)}r[t.index]=s=Af(a,r,d,t),Mf(r,s)}return new d0(s,t,r)}class ay{constructor(r){this.queryList=r,this.matches=null}clone(){return new ay(this.queryList)}setDirty(){this.queryList.setDirty()}}class uy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let g=0;g<a;g++){const b=s.getByIndex(g);d.push(this.queries[b.indexInDeclarationView].clone())}return new uy(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==w0(r,s).matches&&this.queries[s].setDirty()}}class p0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class ly{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const d=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,d);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new ly(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cy{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cy(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const g=a[d];this.matchTNodeWithReadOption(r,s,_C(s,g)),this.matchTNodeWithReadOption(r,s,La(s,r,g,!1,!1))}else a===cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,La(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Xl||d===Pm||d===cg&&4&s.type)this.addMatch(s.index,-2);else{const g=La(s,r,d,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function _C(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function vC(t,r,s,a){return-1===s?function yC(t,r){return 11&t.type?fl(t,r):4&t.type?Nm(t,r):null}(r,t):-2===s?function EC(t,r,s){return s===Xl?fl(r,t):s===cg?Nm(r,t):s===Pm?f0(r,t):void 0}(t,r,a):Jo(t,t[1],s,r)}function g0(t,r,s,a){const d=r[19].queries[a];if(null===d.matches){const g=t.data,b=s.matches,M=[];for(let L=0;L<b.length;L+=2){const W=b[L];M.push(W<0?null:vC(r,g[W],b[L+1],s.metadata.read))}d.matches=M}return d.matches}function dy(t,r,s,a){const d=t.queries.getByIndex(s),g=d.matches;if(null!==g){const b=g0(t,r,d,s);for(let M=0;M<g.length;M+=2){const L=g[M];if(L>0)a.push(b[M/2]);else{const W=g[M+1],J=r[-L];for(let fe=10;fe<J.length;fe++){const Qe=J[fe];Qe[17]===Qe[3]&&dy(Qe[1],Qe,W,a)}if(null!==J[9]){const fe=J[9];for(let Qe=0;Qe<fe.length;Qe++){const mt=fe[Qe];dy(mt[1],mt,W,a)}}}}}return a}function m0(t){const r=jt(),s=Nr(),a=Na();Ya(a+1);const d=w0(s,a);if(t.dirty&&yr(r)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const g=d.crossesNgTemplate?dy(s,r,a,[]):g0(s,r,d,a);t.reset(g,_d),t.notifyOnChanges()}return!0}return!1}function _0(t,r,s,a){const d=Nr();if(d.firstCreatePass){const g=Wi();(function E0(t,r,s){null===t.queries&&(t.queries=new ly),t.queries.track(new cy(r,s))})(d,new p0(r,s,a),g.index),function IC(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(d,t),2==(2&s)&&(d.staticContentQueries=!0)}!function v0(t,r,s){const a=new sy(4==(4&s));Qg(t,r,a,a.destroy),null===r[19]&&(r[19]=new uy),r[19].queries.push(new ay(a))}(d,jt(),s)}function y0(){return function CC(t,r){return t[19].queries[r].queryList}(jt(),Na())}function w0(t,r){return t.queries.getByIndex(r)}function C0(t,r){return Nm(t,r)}function km(...t){}const j0=new ai("Application Initializer");let Fm=(()=>{class t{constructor(s){this.appInits=s,this.resolve=km,this.reject=km,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Jp(g))s.push(g);else if(Xp(g)){const b=new Promise((M,L)=>{g.subscribe({complete:M,error:L})});s.push(b)}}Promise.all(s).then(()=>{a()}).catch(d=>{this.reject(d)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)($i(j0,8))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const $0=new ai("AppId",{providedIn:"root",factory:function H0(){return`${my()}${my()}${my()}`}});function my(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const W0=new ai("Platform Initializer"),HC=new ai("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),G0=new ai("appBootstrapListener");let WC=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Lm=new ai("LocaleId",{providedIn:"root",factory:()=>$l(Lm,Xt.Optional|Xt.SkipSelf)||function GC(){return typeof $localize<"u"&&$localize.locale||Uf}()}),zC=new ai("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let ZC=(()=>{class t{compileModuleSync(s){return new ty(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=zu(_n(s).declarations).reduce((b,M)=>{const L=Ae(M);return L&&b.push(new Dh(L)),b},[]);return new qC(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const QC=(()=>Promise.resolve(0))();function _y(t){typeof Zone>"u"?QC.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ul{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lc(!1),this.onMicrotaskEmpty=new Lc(!1),this.onStable=new Lc(!1),this.onError=new Lc(!1),typeof Zone>"u")throw new at(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&s,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function JC(){let t=gt.requestAnimationFrame,r=gt.cancelAnimationFrame;if(typeof Zone<"u"&&t&&r){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function tI(t){const r=()=>{!function eI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(gt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vy(t),t.isCheckStableRunning=!0,yy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vy(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,d,g,b,M)=>{try{return Z0(t),s.invokeTask(d,g,b,M)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),K0(t)}},onInvoke:(s,a,d,g,b,M,L)=>{try{return Z0(t),s.invoke(d,g,b,M,L)}finally{t.shouldCoalesceRunChangeDetection&&r(),K0(t)}},onHasTask:(s,a,d,g)=>{s.hasTask(d,g),a===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,vy(t),yy(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,d,g)=>(s.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ul.isInAngularZone())throw new at(909,!1)}static assertNotInAngularZone(){if(Ul.isInAngularZone())throw new at(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,d){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+d,r,XC,km,km);try{return g.runTask(b,s,a)}finally{g.cancelTask(b)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const XC={};function yy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vy(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Z0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function K0(t){t._nesting--,yy(t)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lc,this.onMicrotaskEmpty=new Lc,this.onStable=new Lc,this.onError=new Lc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,d){return r.apply(s,a)}}const Y0=new ai(""),Q0=new ai("");let Ey,rI=(()=>{class t{constructor(s,a,d){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ey||(function iI(t){Ey=t}(d),d.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ul.assertNotInAngularZone(),_y(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_y(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,d){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:d})}whenStable(s,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,d){return[]}}return t.\u0275fac=function(s){return new(s||t)($i(Ul),$i(J0),$i(Q0))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac}),t})(),J0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Ey?.findTestabilityInTree(this,s,a)??null}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Gd=null;const X0=new ai("AllowMultipleToken"),wy=new ai("PlatformDestroyListeners");class aI{constructor(r,s){this.name=r,this.token=s}}function tE(t,r,s=[]){const a=`Platform: ${r}`,d=new ai(a);return(g=[])=>{let b=Cy();if(!b||b.injector.get(X0,!1)){const M=[...s,...g,{provide:d,useValue:!0}];t?t(M):function uI(t){if(Gd&&!Gd.get(X0,!1))throw new at(400,!1);Gd=t;const r=t.get(rE);(function eE(t){const r=t.get(W0,null);r&&r.forEach(s=>s())})(t)}(function nE(t=[],r){return _l.create({name:r,providers:[{provide:Gu,useValue:"platform"},{provide:wy,useValue:new Set([()=>Gd=null])},...t]})}(M,a))}return function cI(t){const r=Cy();if(!r)throw new at(401,!1);return r}()}}function Cy(){return Gd?.get(rE)??null}let rE=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const d=function sE(t,r){let s;return s="noop"===t?new nI:("zone.js"===t?void 0:t)||new Ul(r),s}(a?.ngZone,function iE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(a)),g=[{provide:Ul,useValue:d}];return d.run(()=>{const b=_l.create({providers:g,parent:this.injector,name:s.moduleType.name}),M=s.create(b),L=M.injector.get(Qr,null);if(!L)throw new at(402,!1);return d.runOutsideAngular(()=>{const W=d.onError.subscribe({next:J=>{L.handleError(J)}});M.onDestroy(()=>{Vm(this._modules,M),W.unsubscribe()})}),function oE(t,r,s){try{const a=s();return Jp(a)?a.catch(d=>{throw r.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(L,d,()=>{const W=M.injector.get(Fm);return W.runInitializers(),W.donePromise.then(()=>(function Ev(t){An(t,"Expected localeId to be defined"),"string"==typeof t&&(vv=t.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Lm,Uf)||Uf),this._moduleDoBootstrap(M),M))})})}bootstrapModule(s,a=[]){const d=aE({},a);return function sI(t,r,s){const a=new ty(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(s){const a=s.injector.get(Um);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new at(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(wy,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)($i(_l))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function aE(t,r){return Array.isArray(r)?r.reduce(aE,t):{...t,...r}}let Um=(()=>{class t{constructor(s,a,d){this._zone=s,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new Z.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),b=new Z.y(M=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Ul.assertNotInAngularZone(),_y(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{Ul.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{L.unsubscribe(),W.unsubscribe()}});this.isStable=(0,R.T)(g,b.pipe((0,ve.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const d=s instanceof bc;if(!this._injector.get(Fm).done)throw!d&&Bt(s),new at(405,false);let b;b=d?s:this._injector.get(Jl).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const M=function oI(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Bf),W=b.create(_l.NULL,[],a||b.selector,M),J=W.location.nativeElement,fe=W.injector.get(Y0,null);return fe?.registerApplication(J),W.onDestroy(()=>{this.detachView(W.hostView),Vm(this.components,W),fe?.unregisterApplication(J)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new at(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Vm(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(G0,[]).concat(this._bootstrapListeners).forEach(d=>d(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Vm(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new at(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(s){return new(s||t)($i(Ul),$i(dl),$i(Qr))},t.\u0275prov=Kn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Vm(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let lE=!0,cE=!1;function hI(){return cE=!0,lE}function fI(){if(cE)throw new Error("Cannot enable prod mode after platform setup.");lE=!1}let pI=(()=>{class t{}return t.__NG_ELEMENT_ID__=gI,t})();function gI(t){return function mI(t,r,s){if(Ln(t)&&!s){const a=un(t.index,r);return new cu(a,a)}return 47&t.type?new cu(r[16],r):null}(Wi(),jt(),16==(16&t))}class pE{constructor(){}supports(r){return qu(r)}create(r){return new CI(r)}}const wI=(t,r)=>r;class CI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,d=0,g=null;for(;s||a;){const b=!a||s&&s.currentIndex<mE(a,d,g)?s:a,M=mE(b,d,g),L=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(s=s._next,null==b.previousIndex)d++;else{g||(g=[]);const W=M-d,J=L-d;if(W!=J){for(let Qe=0;Qe<W;Qe++){const mt=Qe<g.length?g[Qe]:g[Qe]=0,zt=mt+Qe;J<=zt&&zt<W&&(g[Qe]=mt+1)}g[b.previousIndex]=J-W}}M!==L&&r(b,M,L)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!qu(r))throw new at(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,g,b,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)g=r[M],b=this._trackByFn(M,g),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,g,b,M)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,b,M),a=!0),s=s._next}else d=0,function Nf(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[du()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,M=>{b=this._trackByFn(d,M),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,M,b,d)),Object.is(s.item,M)||this._addIdentityChange(s,M)):(s=this._mismatch(s,M,b,d),a=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,d){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,d)):r=this._addAfter(new II(s,a),g,d),r}_verifyReinsertion(r,s,a,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,g=r._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new gE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class II{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class gE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bI,this.map.set(s,a)),a.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mE(t,r,s){const a=t.previousIndex;if(null===a)return a;let d=0;return s&&a<s.length&&(d=s[a]),a+r+d}class _E{constructor(){}supports(r){return r instanceof Map||Hp(r)}create(){return new TI}}class TI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Hp(r)))throw new at(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(d,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const g=d._prev,b=d._next;return g&&(g._next=b),b&&(b._prev=g),d._next=null,d._prev=null,d}const a=new DI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class DI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yE(){return new Sy([new pE])}let Sy=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||yE()),deps:[[t,new Ni,new ta]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(null!=a)return a;throw new at(901,!1)}}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:yE}),t})();function vE(){return new Ay([new _E])}let Ay=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||vE()),deps:[[t,new Ni,new ta]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(a)return a;throw new at(901,!1)}}return t.\u0275prov=Kn({token:t,providedIn:"root",factory:vE}),t})();const xI=tE(null,"core",[]);let MI=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)($i(Um))},t.\u0275mod=yn({type:t}),t.\u0275inj=fn({}),t})();function RI(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}},1481:(an,ot,j)=>{j.d(ot,{Dx:()=>tt,b2:()=>Yn,q6:()=>Pr});var C=j(6895),p=j(4650);class Z extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class R extends Z{static makeCurrent(){(0,C.HT)(new R)}onAndCancel(pe,de,Xe){return pe.addEventListener(de,Xe,!1),()=>{pe.removeEventListener(de,Xe,!1)}}dispatchEvent(pe,de){pe.dispatchEvent(de)}remove(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}createElement(pe,de){return(de=de||this.getDefaultDocument()).createElement(pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pe){return pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(pe){return pe instanceof DocumentFragment}getGlobalEventTarget(pe,de){return"window"===de?window:"document"===de?pe:"body"===de?pe.body:null}getBaseHref(pe){const de=function Le(){return ve=ve||document.querySelector("base"),ve?ve.getAttribute("href"):null}();return null==de?null:function we(Ee){je=je||document.createElement("a"),je.setAttribute("href",Ee);const pe=je.pathname;return"/"===pe.charAt(0)?pe:`/${pe}`}(de)}resetBaseElement(){ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(pe){return(0,C.Mx)(document.cookie,pe)}}let je,ve=null;const Ye=new p.OlP("TRANSITION_ID"),he=[{provide:p.ip1,useFactory:function re(Ee,pe,de){return()=>{de.get(p.CZH).donePromise.then(()=>{const Xe=(0,C.q)(),pt=pe.querySelectorAll(`style[ng-transition="${Ee}"]`);for(let Jt=0;Jt<pt.length;Jt++)Xe.remove(pt[Jt])})}},deps:[Ye,C.K0,p.zs3],multi:!0}];let dt=(()=>{class Ee{build(){return new XMLHttpRequest}}return Ee.\u0275fac=function(de){return new(de||Ee)},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const ht=new p.OlP("EventManagerPlugins");let at=(()=>{class Ee{constructor(de,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,de.forEach(pt=>pt.manager=this),this._plugins=de.slice().reverse()}addEventListener(de,Xe,pt){return this._findPluginFor(Xe).addEventListener(de,Xe,pt)}addGlobalEventListener(de,Xe,pt){return this._findPluginFor(Xe).addGlobalEventListener(de,Xe,pt)}getZone(){return this._zone}_findPluginFor(de){const Xe=this._eventNameToPlugin.get(de);if(Xe)return Xe;const pt=this._plugins;for(let Jt=0;Jt<pt.length;Jt++){const Pe=pt[Jt];if(Pe.supports(de))return this._eventNameToPlugin.set(de,Pe),Pe}throw new Error(`No event manager plugin found for event ${de}`)}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(ht),p.LFG(p.R0b))},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class Ft{constructor(pe){this._doc=pe}addGlobalEventListener(pe,de,Xe){const pt=(0,C.q)().getGlobalEventTarget(this._doc,pe);if(!pt)throw new Error(`Unsupported event target ${pt} for event ${de}`);return this.addEventListener(pt,de,Xe)}}let it=(()=>{class Ee{constructor(){this._stylesSet=new Set}addStyles(de){const Xe=new Set;de.forEach(pt=>{this._stylesSet.has(pt)||(this._stylesSet.add(pt),Xe.add(pt))}),this.onStylesAdded(Xe)}onStylesAdded(de){}getAllStyles(){return Array.from(this._stylesSet)}}return Ee.\u0275fac=function(de){return new(de||Ee)},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})(),et=(()=>{class Ee extends it{constructor(de){super(),this._doc=de,this._hostNodes=new Map,this._hostNodes.set(de.head,[])}_addStylesToHost(de,Xe,pt){de.forEach(Jt=>{const Pe=this._doc.createElement("style");Pe.textContent=Jt,pt.push(Xe.appendChild(Pe))})}addHost(de){const Xe=[];this._addStylesToHost(this._stylesSet,de,Xe),this._hostNodes.set(de,Xe)}removeHost(de){const Xe=this._hostNodes.get(de);Xe&&Xe.forEach(Vt),this._hostNodes.delete(de)}onStylesAdded(de){this._hostNodes.forEach((Xe,pt)=>{this._addStylesToHost(de,pt,Xe)})}ngOnDestroy(){this._hostNodes.forEach(de=>de.forEach(Vt))}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(C.K0))},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();function Vt(Ee){(0,C.q)().remove(Ee)}const $t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Me=/%COMP%/g;function Ne(Ee,pe,de){for(let Xe=0;Xe<pe.length;Xe++){let pt=pe[Xe];Array.isArray(pt)?Ne(Ee,pt,de):(pt=pt.replace(Me,Ee),de.push(pt))}return de}function Ue(Ee){return pe=>{if("__ngUnwrap__"===pe)return Ee;!1===Ee(pe)&&(pe.preventDefault(),pe.returnValue=!1)}}let Ke=(()=>{class Ee{constructor(de,Xe,pt){this.eventManager=de,this.sharedStylesHost=Xe,this.appId=pt,this.rendererByCompId=new Map,this.defaultRenderer=new Rt(de)}createRenderer(de,Xe){if(!de||!Xe)return this.defaultRenderer;switch(Xe.encapsulation){case p.ifc.Emulated:{let pt=this.rendererByCompId.get(Xe.id);return pt||(pt=new An(this.eventManager,this.sharedStylesHost,Xe,this.appId),this.rendererByCompId.set(Xe.id,pt)),pt.applyToHost(de),pt}case 1:case p.ifc.ShadowDom:return new Mt(this.eventManager,this.sharedStylesHost,de,Xe);default:if(!this.rendererByCompId.has(Xe.id)){const pt=Ne(Xe.id,Xe.styles,[]);this.sharedStylesHost.addStyles(pt),this.rendererByCompId.set(Xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(at),p.LFG(et),p.LFG(p.AFp))},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class Rt{constructor(pe){this.eventManager=pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pe,de){return de?document.createElementNS($t[de]||de,pe):document.createElement(pe)}createComment(pe){return document.createComment(pe)}createText(pe){return document.createTextNode(pe)}appendChild(pe,de){(wn(pe)?pe.content:pe).appendChild(de)}insertBefore(pe,de,Xe){pe&&(wn(pe)?pe.content:pe).insertBefore(de,Xe)}removeChild(pe,de){pe&&pe.removeChild(de)}selectRootElement(pe,de){let Xe="string"==typeof pe?document.querySelector(pe):pe;if(!Xe)throw new Error(`The selector "${pe}" did not match any elements`);return de||(Xe.textContent=""),Xe}parentNode(pe){return pe.parentNode}nextSibling(pe){return pe.nextSibling}setAttribute(pe,de,Xe,pt){if(pt){de=pt+":"+de;const Jt=$t[pt];Jt?pe.setAttributeNS(Jt,de,Xe):pe.setAttribute(de,Xe)}else pe.setAttribute(de,Xe)}removeAttribute(pe,de,Xe){if(Xe){const pt=$t[Xe];pt?pe.removeAttributeNS(pt,de):pe.removeAttribute(`${Xe}:${de}`)}else pe.removeAttribute(de)}addClass(pe,de){pe.classList.add(de)}removeClass(pe,de){pe.classList.remove(de)}setStyle(pe,de,Xe,pt){pt&(p.JOm.DashCase|p.JOm.Important)?pe.style.setProperty(de,Xe,pt&p.JOm.Important?"important":""):pe.style[de]=Xe}removeStyle(pe,de,Xe){Xe&p.JOm.DashCase?pe.style.removeProperty(de):pe.style[de]=""}setProperty(pe,de,Xe){pe[de]=Xe}setValue(pe,de){pe.nodeValue=de}listen(pe,de,Xe){return"string"==typeof pe?this.eventManager.addGlobalEventListener(pe,de,Ue(Xe)):this.eventManager.addEventListener(pe,de,Ue(Xe))}}function wn(Ee){return"TEMPLATE"===Ee.tagName&&void 0!==Ee.content}class An extends Rt{constructor(pe,de,Xe,pt){super(pe),this.component=Xe;const Jt=Ne(pt+"-"+Xe.id,Xe.styles,[]);de.addStyles(Jt),this.contentAttr=function ie(Ee){return"_ngcontent-%COMP%".replace(Me,Ee)}(pt+"-"+Xe.id),this.hostAttr=function Ze(Ee){return"_nghost-%COMP%".replace(Me,Ee)}(pt+"-"+Xe.id)}applyToHost(pe){super.setAttribute(pe,this.hostAttr,"")}createElement(pe,de){const Xe=super.createElement(pe,de);return super.setAttribute(Xe,this.contentAttr,""),Xe}}class Mt extends Rt{constructor(pe,de,Xe,pt){super(pe),this.sharedStylesHost=de,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Jt=Ne(pt.id,pt.styles,[]);for(let Pe=0;Pe<Jt.length;Pe++){const se=document.createElement("style");se.textContent=Jt[Pe],this.shadowRoot.appendChild(se)}}nodeOrShadowRoot(pe){return pe===this.hostEl?this.shadowRoot:pe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pe,de){return super.appendChild(this.nodeOrShadowRoot(pe),de)}insertBefore(pe,de,Xe){return super.insertBefore(this.nodeOrShadowRoot(pe),de,Xe)}removeChild(pe,de){return super.removeChild(this.nodeOrShadowRoot(pe),de)}parentNode(pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pe)))}}let tn=(()=>{class Ee extends Ft{constructor(de){super(de)}supports(de){return!0}addEventListener(de,Xe,pt){return de.addEventListener(Xe,pt,!1),()=>this.removeEventListener(de,Xe,pt)}removeEventListener(de,Xe,pt){return de.removeEventListener(Xe,pt)}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(C.K0))},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Gn=["alt","control","meta","shift"],On={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={alt:Ee=>Ee.altKey,control:Ee=>Ee.ctrlKey,meta:Ee=>Ee.metaKey,shift:Ee=>Ee.shiftKey};let Vn=(()=>{class Ee extends Ft{constructor(de){super(de)}supports(de){return null!=Ee.parseEventName(de)}addEventListener(de,Xe,pt){const Jt=Ee.parseEventName(Xe),Pe=Ee.eventCallback(Jt.fullKey,pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(de,Jt.domEventName,Pe))}static parseEventName(de){const Xe=de.toLowerCase().split("."),pt=Xe.shift();if(0===Xe.length||"keydown"!==pt&&"keyup"!==pt)return null;const Jt=Ee._normalizeKey(Xe.pop());let Pe="",se=Xe.indexOf("code");if(se>-1&&(Xe.splice(se,1),Pe="code."),Gn.forEach(te=>{const Te=Xe.indexOf(te);Te>-1&&(Xe.splice(Te,1),Pe+=te+".")}),Pe+=Jt,0!=Xe.length||0===Jt.length)return null;const G={};return G.domEventName=pt,G.fullKey=Pe,G}static matchEventFullKeyCode(de,Xe){let pt=On[de.key]||de.key,Jt="";return Xe.indexOf("code.")>-1&&(pt=de.code,Jt="code."),!(null==pt||!pt)&&(pt=pt.toLowerCase()," "===pt?pt="space":"."===pt&&(pt="dot"),Gn.forEach(Pe=>{Pe!==pt&&(0,Kn[Pe])(de)&&(Jt+=Pe+".")}),Jt+=pt,Jt===Xe)}static eventCallback(de,Xe,pt){return Jt=>{Ee.matchEventFullKeyCode(Jt,de)&&pt.runGuarded(()=>Xe(Jt))}}static _normalizeKey(de){return"esc"===de?"escape":de}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(C.K0))},Ee.\u0275prov=p.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Pr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:C.bD},{provide:p.g9A,useValue:function ar(){R.makeCurrent()},multi:!0},{provide:C.K0,useFactory:function ln(){return(0,p.RDi)(document),document},deps:[]}]),mr=new p.OlP(""),Xt=[{provide:p.rWj,useClass:class Ce{addToWindow(pe){p.dqk.getAngularTestability=(Xe,pt=!0)=>{const Jt=pe.findTestabilityInTree(Xe,pt);if(null==Jt)throw new Error("Could not find testability for element.");return Jt},p.dqk.getAllAngularTestabilities=()=>pe.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>pe.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(Xe=>{const pt=p.dqk.getAllAngularTestabilities();let Jt=pt.length,Pe=!1;const se=function(G){Pe=Pe||G,Jt--,0==Jt&&Xe(Pe)};pt.forEach(function(G){G.whenStable(se)})})}findTestabilityInTree(pe,de,Xe){return null==de?null:pe.getTestability(de)??(Xe?(0,C.q)().isShadowRoot(de)?this.findTestabilityInTree(pe,de.host,!0):this.findTestabilityInTree(pe,de.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],dr=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Mr(){return new p.qLn},deps:[]},{provide:ht,useClass:tn,multi:!0,deps:[C.K0,p.R0b,p.Lbi]},{provide:ht,useClass:Vn,multi:!0,deps:[C.K0]},{provide:Ke,useClass:Ke,deps:[at,et,p.AFp]},{provide:p.FYo,useExisting:Ke},{provide:it,useExisting:et},{provide:et,useClass:et,deps:[C.K0]},{provide:at,useClass:at,deps:[ht,p.R0b]},{provide:C.JF,useClass:dt,deps:[]},[]];let Yn=(()=>{class Ee{constructor(de){}static withServerTransition(de){return{ngModule:Ee,providers:[{provide:p.AFp,useValue:de.appId},{provide:Ye,useExisting:p.AFp},he]}}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(mr,12))},Ee.\u0275mod=p.oAB({type:Ee}),Ee.\u0275inj=p.cJS({providers:[...dr,...Xt],imports:[C.ez,p.hGG]}),Ee})(),tt=(()=>{class Ee{constructor(de){this._doc=de}getTitle(){return this._doc.title}setTitle(de){this._doc.title=de||""}}return Ee.\u0275fac=function(de){return new(de||Ee)(p.LFG(C.K0))},Ee.\u0275prov=p.Yz7({token:Ee,factory:function(de){let Xe=null;return Xe=de?new de:function Er(){return new tt((0,p.LFG)(C.K0))}(),Xe},providedIn:"root"}),Ee})();typeof window<"u"&&window},7001:(an,ot,j)=>{j.d(ot,{F0:()=>Ji,rH:()=>Io,yS:()=>Ua,Bz:()=>to,lC:()=>Ct});var C=j(4650),p=j(8996),Z=j(9646),R=j(7579);class ve extends R.x{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const T=super._subscribe(S);return!T.closed&&S.next(this._value),T}getValue(){const{hasError:S,thrownError:T,_value:k}=this;if(S)throw T;return this._throwIfClosed(),k}next(S){super.next(this._value=S)}}var Le=j(6805),je=j(9751),we=j(4742),Ye=j(4671),re=j(3268),he=j(7669),Ce=j(1810),dt=j(5403),ht=j(9672);function at(...D){const S=(0,he.yG)(D),T=(0,he.jO)(D),{args:k,keys:B}=(0,we.D)(D);if(0===k.length)return(0,p.D)([],S);const Y=new je.y(function Ft(D,S,T=Ye.y){return k=>{it(S,()=>{const{length:B}=D,Y=new Array(B);let ye=B,Re=B;for(let It=0;It<B;It++)it(S,()=>{const en=(0,p.D)(D[It],S);let lr=!1;en.subscribe((0,dt.x)(k,pn=>{Y[It]=pn,lr||(lr=!0,Re--),Re||k.next(T(Y.slice()))},()=>{--ye||k.complete()}))},k)},k)}}(k,S,B?ye=>(0,Ce.n)(B,ye):Ye.y));return T?Y.pipe((0,re.Z)(T)):Y}function it(D,S,T){D?(0,ht.f)(T,D,S):S()}var et=j(7272),Vt=j(8421);function $t(D){return new je.y(S=>{(0,Vt.Xf)(D()).subscribe(S)})}var Me=j(9635),lt=j(576);function Ge(D,S){const T=(0,lt.m)(D)?D:()=>D,k=B=>B.error(T());return new je.y(S?B=>S.schedule(k,0,B):k)}var ct=j(515),ee=j(727),ie=j(4482);function Ze(){return(0,ie.e)((D,S)=>{let T=null;D._refCount++;const k=(0,dt.x)(S,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(T=null);const B=D._connection,Y=T;T=null,B&&(!Y||B===Y)&&B.unsubscribe(),S.unsubscribe()});D.subscribe(k),k.closed||(T=D.connect())})}class Ne extends je.y{constructor(S,T){super(),this.source=S,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,ie.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new ee.w0;const T=this.getSubject();S.add(this.source.subscribe((0,dt.x)(T,void 0,()=>{this._teardown(),T.complete()},k=>{this._teardown(),T.error(k)},()=>this._teardown()))),S.closed&&(this._connection=null,S=ee.w0.EMPTY)}return S}refCount(){return Ze()(this)}}var Ue=j(6895),$e=j(4004),Ke=j(3900),Rt=j(5698),bt=j(8675),Yt=j(9300),wn=j(5577),An=j(590),Mt=j(4351),tn=j(8505);function Gn(D){return(0,ie.e)((S,T)=>{let Y,k=null,B=!1;k=S.subscribe((0,dt.x)(T,void 0,void 0,ye=>{Y=(0,Vt.Xf)(D(ye,Gn(D)(S))),k?(k.unsubscribe(),k=null,Y.subscribe(T)):B=!0})),B&&(k.unsubscribe(),k=null,Y.subscribe(T))})}var On=j(5026);function Kn(D){return D<=0?()=>ct.E:(0,ie.e)((S,T)=>{let k=[];S.subscribe((0,dt.x)(T,B=>{k.push(B),D<k.length&&k.shift()},()=>{for(const B of k)T.next(B);T.complete()},void 0,()=>{k=null}))})}var Vn=j(8068),fn=j(6590);function er(D,S){const T=arguments.length>=2;return k=>k.pipe(D?(0,Yt.h)((B,Y)=>D(B,Y,k)):Ye.y,Kn(1),T?(0,fn.d)(S):(0,Vn.T)(()=>new Le.K))}function cr(D){return(0,ie.e)((S,T)=>{try{S.subscribe(T)}finally{T.add(D)}})}var ar=j(8189),Mr=j(1481);const ln="primary",qn=Symbol("RouteTitle");class Pr{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T[0]:T}return null}getAll(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function mr(D){return new Pr(D)}function Xt(D,S,T){const k=T.path.split("/");if(k.length>D.length||"full"===T.pathMatch&&(S.hasChildren()||k.length<D.length))return null;const B={};for(let Y=0;Y<k.length;Y++){const ye=k[Y],Re=D[Y];if(ye.startsWith(":"))B[ye.substring(1)]=Re;else if(ye!==Re.path)return null}return{consumed:D.slice(0,k.length),posParams:B}}function Yn(D,S){const T=D?Object.keys(D):void 0,k=S?Object.keys(S):void 0;if(!T||!k||T.length!=k.length)return!1;let B;for(let Y=0;Y<T.length;Y++)if(B=T[Y],!Zn(D[B],S[B]))return!1;return!0}function Zn(D,S){if(Array.isArray(D)&&Array.isArray(S)){if(D.length!==S.length)return!1;const T=[...D].sort(),k=[...S].sort();return T.every((B,Y)=>k[Y]===B)}return D===S}function fr(D){return Array.prototype.concat.apply([],D)}function oi(D){return D.length>0?D[D.length-1]:null}function tt(D,S){for(const T in D)D.hasOwnProperty(T)&&S(D[T],T)}function me(D){return(0,C.CqO)(D)?D:(0,C.QGY)(D)?(0,p.D)(Promise.resolve(D)):(0,Z.of)(D)}const gt={exact:function Ht(D,S,T){if(!Ie(D.segments,S.segments)||!xn(D.segments,S.segments,T)||D.numberOfChildren!==S.numberOfChildren)return!1;for(const k in S.children)if(!D.children[k]||!Ht(D.children[k],S.children[k],T))return!1;return!0},subset:En},nn={exact:function Hn(D,S){return Yn(D,S)},subset:function tr(D,S){return Object.keys(S).length<=Object.keys(D).length&&Object.keys(S).every(T=>Zn(D[T],S[T]))},ignored:()=>!0};function vn(D,S,T){return gt[T.paths](D.root,S.root,T.matrixParams)&&nn[T.queryParams](D.queryParams,S.queryParams)&&!("exact"===T.fragment&&D.fragment!==S.fragment)}function En(D,S,T){return Rr(D,S,S.segments,T)}function Rr(D,S,T,k){if(D.segments.length>T.length){const B=D.segments.slice(0,T.length);return!(!Ie(B,T)||S.hasChildren()||!xn(B,T,k))}if(D.segments.length===T.length){if(!Ie(D.segments,T)||!xn(D.segments,T,k))return!1;for(const B in S.children)if(!D.children[B]||!En(D.children[B],S.children[B],k))return!1;return!0}{const B=T.slice(0,D.segments.length),Y=T.slice(D.segments.length);return!!(Ie(D.segments,B)&&xn(D.segments,B,k)&&D.children[ln])&&Rr(D.children[ln],S,Y,k)}}function xn(D,S,T){return S.every((k,B)=>nn[T](D[B].parameters,k.parameters))}class De{constructor(S,T,k){this.root=S,this.queryParams=T,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return rr.serialize(this)}}class le{constructor(S,T){this.segments=S,this.children=T,this.parent=null,tt(T,(k,B)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qn(this)}}class ce{constructor(S,T){this.path=S,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=mr(this.parameters)),this._parameterMap}toString(){return bn(this)}}function Ie(D,S){return D.length===S.length&&D.every((T,k)=>T.path===S[k].path)}let kt=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return new yn},providedIn:"root"}),D})();class yn{parse(S){const T=new G(S);return new De(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(S){const T=`/${Ir(S.root,!0)}`,k=function pe(D){const S=Object.keys(D).map(T=>{const k=D[T];return Array.isArray(k)?k.map(B=>`${Ae(T)}=${Ae(B)}`).join("&"):`${Ae(T)}=${Ae(k)}`}).filter(T=>!!T);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${T}${k}${"string"==typeof S.fragment?`#${function Fe(D){return encodeURI(D)}(S.fragment)}`:""}`}}const rr=new yn;function Qn(D){return D.segments.map(S=>bn(S)).join("/")}function Ir(D,S){if(!D.hasChildren())return Qn(D);if(S){const T=D.children[ln]?Ir(D.children[ln],!1):"",k=[];return tt(D.children,(B,Y)=>{Y!==ln&&k.push(`${Y}:${Ir(B,!1)}`)}),k.length>0?`${T}(${k.join("//")})`:T}{const T=function yt(D,S){let T=[];return tt(D.children,(k,B)=>{B===ln&&(T=T.concat(S(k,B)))}),tt(D.children,(k,B)=>{B!==ln&&(T=T.concat(S(k,B)))}),T}(D,(k,B)=>B===ln?[Ir(D.children[ln],!1)]:[`${B}:${Ir(k,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[ln]?`${Qn(D)}/${T[0]}`:`${Qn(D)}/(${T.join("//")})`}}function Je(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ae(D){return Je(D).replace(/%3B/gi,";")}function vt(D){return Je(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bt(D){return decodeURIComponent(D)}function _n(D){return Bt(D.replace(/\+/g,"%20"))}function bn(D){return`${vt(D.path)}${function Ee(D){return Object.keys(D).map(S=>`;${vt(S)}=${vt(D[S])}`).join("")}(D.parameters)}`}const de=/^[^\/()?;=#]+/;function Xe(D){const S=D.match(de);return S?S[0]:""}const pt=/^[^=?&#]+/,Pe=/^[^&#]+/;class G{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(S.length>0||Object.keys(T).length>0)&&(k[ln]=new le(S,T)),k}parseSegment(){const S=Xe(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(S),new ce(Bt(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const T=Xe(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const B=Xe(this.remaining);B&&(k=B,this.capture(k))}S[Bt(T)]=Bt(k)}parseQueryParam(S){const T=function Jt(D){const S=D.match(pt);return S?S[0]:""}(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const ye=function se(D){const S=D.match(Pe);return S?S[0]:""}(this.remaining);ye&&(k=ye,this.capture(k))}const B=_n(T),Y=_n(k);if(S.hasOwnProperty(B)){let ye=S[B];Array.isArray(ye)||(ye=[ye],S[B]=ye),ye.push(Y)}else S[B]=Y}parseParens(S){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Xe(this.remaining),B=this.remaining[k.length];if("/"!==B&&")"!==B&&";"!==B)throw new C.vHH(4010,!1);let Y;k.indexOf(":")>-1?(Y=k.slice(0,k.indexOf(":")),this.capture(Y),this.capture(":")):S&&(Y=ln);const ye=this.parseChildren();T[Y]=1===Object.keys(ye).length?ye[ln]:new le([],ye),this.consumeOptional("//")}return T}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new C.vHH(4011,!1)}}function te(D){return D.segments.length>0?new le([],{[ln]:D}):D}function Te(D){const S={};for(const k of Object.keys(D.children)){const Y=Te(D.children[k]);(Y.segments.length>0||Y.hasChildren())&&(S[k]=Y)}return function oe(D){if(1===D.numberOfChildren&&D.children[ln]){const S=D.children[ln];return new le(D.segments.concat(S.segments),S.children)}return D}(new le(D.segments,S))}function ze(D){return D instanceof De}function hn(D,S,T,k,B){if(0===T.length)return ri(S.root,S.root,S.root,k,B);const Y=function qr(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new mi(!0,0,D);let S=0,T=!1;const k=D.reduce((B,Y,ye)=>{if("object"==typeof Y&&null!=Y){if(Y.outlets){const Re={};return tt(Y.outlets,(It,en)=>{Re[en]="string"==typeof It?It.split("/"):It}),[...B,{outlets:Re}]}if(Y.segmentPath)return[...B,Y.segmentPath]}return"string"!=typeof Y?[...B,Y]:0===ye?(Y.split("/").forEach((Re,It)=>{0==It&&"."===Re||(0==It&&""===Re?T=!0:".."===Re?S++:""!=Re&&B.push(Re))}),B):[...B,Y]},[]);return new mi(T,S,k)}(T);return Y.toRoot()?ri(S.root,S.root,new le([],{}),k,B):function ye(It){const en=function kn(D,S,T,k){if(D.isAbsolute)return new sr(S.root,!0,0);if(-1===k)return new sr(T,T===S.root,0);return function qe(D,S,T){let k=D,B=S,Y=T;for(;Y>B;){if(Y-=B,k=k.parent,!k)throw new C.vHH(4005,!1);B=k.segments.length}return new sr(k,!1,B-Y)}(T,k+(wr(D.commands[0])?0:1),D.numberOfDoubleDots)}(Y,S,D.snapshot?._urlSegment,It),lr=en.processChildren?Nt(en.segmentGroup,en.index,Y.commands):nt(en.segmentGroup,en.index,Y.commands);return ri(S.root,en.segmentGroup,lr,k,B)}(D.snapshot?._lastPathIndex)}function wr(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function zr(D){return"object"==typeof D&&null!=D&&D.outlets}function ri(D,S,T,k,B){let ye,Y={};k&&tt(k,(It,en)=>{Y[en]=Array.isArray(It)?It.map(lr=>`${lr}`):`${It}`}),ye=D===S?T:ir(D,S,T);const Re=te(Te(ye));return new De(Re,Y,B)}function ir(D,S,T){const k={};return tt(D.children,(B,Y)=>{k[Y]=B===S?T:ir(B,S,T)}),new le(D.segments,k)}class mi{constructor(S,T,k){if(this.isAbsolute=S,this.numberOfDoubleDots=T,this.commands=k,S&&k.length>0&&wr(k[0]))throw new C.vHH(4003,!1);const B=k.find(zr);if(B&&B!==oi(k))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sr{constructor(S,T,k){this.segmentGroup=S,this.processChildren=T,this.index=k}}function nt(D,S,T){if(D||(D=new le([],{})),0===D.segments.length&&D.hasChildren())return Nt(D,S,T);const k=function Wt(D,S,T){let k=0,B=S;const Y={match:!1,pathIndex:0,commandIndex:0};for(;B<D.segments.length;){if(k>=T.length)return Y;const ye=D.segments[B],Re=T[k];if(zr(Re))break;const It=`${Re}`,en=k<T.length-1?T[k+1]:null;if(B>0&&void 0===It)break;if(It&&en&&"object"==typeof en&&void 0===en.outlets){if(!Bn(It,en,ye))return Y;k+=2}else{if(!Bn(It,{},ye))return Y;k++}B++}return{match:!0,pathIndex:B,commandIndex:k}}(D,S,T),B=T.slice(k.commandIndex);if(k.match&&k.pathIndex<D.segments.length){const Y=new le(D.segments.slice(0,k.pathIndex),{});return Y.children[ln]=new le(D.segments.slice(k.pathIndex),D.children),Nt(Y,0,B)}return k.match&&0===B.length?new le(D.segments,{}):k.match&&!D.hasChildren()?dn(D,S,T):k.match?Nt(D,0,B):dn(D,S,T)}function Nt(D,S,T){if(0===T.length)return new le(D.segments,{});{const k=function ke(D){return zr(D[0])?D[0].outlets:{[ln]:D}}(T),B={};return tt(k,(Y,ye)=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(B[ye]=nt(D.children[ye],S,Y))}),tt(D.children,(Y,ye)=>{void 0===k[ye]&&(B[ye]=Y)}),new le(D.segments,B)}}function dn(D,S,T){const k=D.segments.slice(0,S);let B=0;for(;B<T.length;){const Y=T[B];if(zr(Y)){const It=Mn(Y.outlets);return new le(k,It)}if(0===B&&wr(T[0])){k.push(new ce(D.segments[S].path,Ln(T[0]))),B++;continue}const ye=zr(Y)?Y.outlets[ln]:`${Y}`,Re=B<T.length-1?T[B+1]:null;ye&&Re&&wr(Re)?(k.push(new ce(ye,Ln(Re))),B+=2):(k.push(new ce(ye,{})),B++)}return new le(k,{})}function Mn(D){const S={};return tt(D,(T,k)=>{"string"==typeof T&&(T=[T]),null!==T&&(S[k]=dn(new le([],{}),0,T))}),S}function Ln(D){const S={};return tt(D,(T,k)=>S[k]=`${T}`),S}function Bn(D,S,T){return D==T.path&&Yn(S,T.parameters)}class Or{constructor(S,T){this.id=S,this.url=T}}class rs extends Or{constructor(S,T,k="imperative",B=null){super(S,T),this.type=0,this.navigationTrigger=k,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wi extends Or{constructor(S,T,k){super(S,T),this.urlAfterRedirects=k,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _i extends Or{constructor(S,T,k,B){super(S,T),this.reason=k,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zi extends Or{constructor(S,T,k,B){super(S,T),this.error=k,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qs extends Or{constructor(S,T,k,B){super(S,T),this.urlAfterRedirects=k,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends Or{constructor(S,T,k,B){super(S,T),this.urlAfterRedirects=k,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class No extends Or{constructor(S,T,k,B,Y){super(S,T),this.urlAfterRedirects=k,this.state=B,this.shouldActivate=Y,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ss extends Or{constructor(S,T,k,B){super(S,T),this.urlAfterRedirects=k,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ba extends Or{constructor(S,T,k,B){super(S,T),this.urlAfterRedirects=k,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ta{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yo{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ca{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vs{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Po{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(S,T,k){this.routerEvent=S,this.position=T,this.anchor=k,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class is{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const T=this.pathFromRoot(S);return T.length>1?T[T.length-2]:null}children(S){const T=js(S,this._root);return T?T.children.map(k=>k.value):[]}firstChild(S){const T=js(S,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(S){const T=vo(S,this._root);return T.length<2?[]:T[T.length-2].children.map(B=>B.value).filter(B=>B!==S)}pathFromRoot(S){return vo(S,this._root).map(T=>T.value)}}function js(D,S){if(D===S.value)return S;for(const T of S.children){const k=js(D,T);if(k)return k}return null}function vo(D,S){if(D===S.value)return[S];for(const T of S.children){const k=vo(D,T);if(k.length)return k.unshift(S),k}return[]}class Jr{constructor(S,T){this.value=S,this.children=T}toString(){return`TreeNode(${this.value})`}}function Vi(D){const S={};return D&&D.children.forEach(T=>S[T.value.outlet]=T),S}class Di extends is{constructor(S,T){super(S),this.snapshot=T,Ws(this,S)}toString(){return this.snapshot.toString()}}function Si(D,S){const T=function Ai(D,S){const ye=new Yi([],{},{},"",{},ln,S,null,D.root,-1,{});return new Hs("",new Jr(ye,[]))}(D,S),k=new ve([new ce("",{})]),B=new ve({}),Y=new ve({}),ye=new ve({}),Re=new ve(""),It=new Sr(k,B,ye,Re,Y,ln,S,T.root);return It.snapshot=T.root,new Di(new Jr(It,[]),T)}class Sr{constructor(S,T,k,B,Y,ye,Re,It){this.url=S,this.params=T,this.queryParams=k,this.fragment=B,this.data=Y,this.outlet=ye,this.component=Re,this.title=this.data?.pipe((0,$e.U)(en=>en[qn]))??(0,Z.of)(void 0),this._futureSnapshot=It}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$e.U)(S=>mr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$e.U)(S=>mr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oo(D,S="emptyOnly"){const T=D.pathFromRoot;let k=0;if("always"!==S)for(k=T.length-1;k>=1;){const B=T[k],Y=T[k-1];if(B.routeConfig&&""===B.routeConfig.path)k--;else{if(Y.component)break;k--}}return function $s(D){return D.reduce((S,T)=>({params:{...S.params,...T.params},data:{...S.data,...T.data},resolve:{...T.data,...S.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(k))}class Yi{constructor(S,T,k,B,Y,ye,Re,It,en,lr,pn,Gr){this.url=S,this.params=T,this.queryParams=k,this.fragment=B,this.data=Y,this.outlet=ye,this.component=Re,this.title=this.data?.[qn],this.routeConfig=It,this._urlSegment=en,this._lastPathIndex=lr,this._correctedLastPathIndex=Gr??lr,this._resolve=pn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hs extends is{constructor(S,T){super(T),this.url=S,Ws(this,T)}toString(){return Go(this._root)}}function Ws(D,S){S.value._routerState=D,S.children.forEach(T=>Ws(D,T))}function Go(D){const S=D.children.length>0?` { ${D.children.map(Go).join(", ")} } `:"";return`${D.value}${S}`}function xi(D){if(D.snapshot){const S=D.snapshot,T=D._futureSnapshot;D.snapshot=T,Yn(S.queryParams,T.queryParams)||D.queryParams.next(T.queryParams),S.fragment!==T.fragment&&D.fragment.next(T.fragment),Yn(S.params,T.params)||D.params.next(T.params),function dr(D,S){if(D.length!==S.length)return!1;for(let T=0;T<D.length;++T)if(!Yn(D[T],S[T]))return!1;return!0}(S.url,T.url)||D.url.next(T.url),Yn(S.data,T.data)||D.data.next(T.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function Oo(D,S){const T=Yn(D.params,S.params)&&function be(D,S){return Ie(D,S)&&D.every((T,k)=>Yn(T.parameters,S[k].parameters))}(D.url,S.url);return T&&!(!D.parent!=!S.parent)&&(!D.parent||Oo(D.parent,S.parent))}function vs(D,S,T){if(T&&D.shouldReuseRoute(S.value,T.value.snapshot)){const k=T.value;k._futureSnapshot=S.value;const B=function Ii(D,S,T){return S.children.map(k=>{for(const B of T.children)if(D.shouldReuseRoute(k.value,B.value.snapshot))return vs(D,k,B);return vs(D,k)})}(D,S,T);return new Jr(k,B)}{if(D.shouldAttach(S.value)){const Y=D.retrieve(S.value);if(null!==Y){const ye=Y.route;return ye.value._futureSnapshot=S.value,ye.children=S.children.map(Re=>vs(D,Re)),ye}}const k=function ko(D){return new Sr(new ve(D.url),new ve(D.params),new ve(D.queryParams),new ve(D.fragment),new ve(D.data),D.outlet,D.component,D)}(S.value),B=S.children.map(Y=>vs(D,Y));return new Jr(k,B)}}const ei="ngNavigationCancelingError";function Da(D,S){const{redirectTo:T,navigationBehaviorOptions:k}=ze(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,B=Hr(!1,0,S);return B.url=T,B.navigationBehaviorOptions=k,B}function Hr(D,S,T){const k=new Error("NavigationCancelingError: "+(D||""));return k[ei]=!0,k.cancellationCode=S,T&&(k.url=T),k}function Se(D){return ge(D)&&ze(D.url)}function ge(D){return D&&D[ei]}class We{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new st,this.attachRef=null}}let st=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(T,k){const B=this.getOrCreateContext(T);B.outlet=k,this.contexts.set(T,B)}onChildOutletDestroyed(T){const k=this.getContext(T);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let k=this.getContext(T);return k||(k=new We,this.contexts.set(T,k)),k}getContext(T){return this.contexts.get(T)||null}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const St=!1;let Ct=(()=>{class D{constructor(T,k,B,Y,ye){this.parentContexts=T,this.location=k,this.changeDetector=Y,this.environmentInjector=ye,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=B||ln,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,St);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,St);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,St);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,k){this.activated=T,this._activatedRoute=k,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,k){if(this.isActivated)throw new C.vHH(4013,St);this._activatedRoute=T;const B=this.location,ye=T._futureSnapshot.component,Re=this.parentContexts.getOrCreateContext(this.name).children,It=new sn(T,Re,B.injector);if(k&&function un(D){return!!D.resolveComponentFactory}(k)){const en=k.resolveComponentFactory(ye);this.activated=B.createComponent(en,B.length,It)}else this.activated=B.createComponent(ye,{index:B.length,injector:It,environmentInjector:k??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(st),C.Y36(C.s_b),C.$8M("name"),C.Y36(C.sBO),C.Y36(C.lqb))},D.\u0275dir=C.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class sn{constructor(S,T,k){this.route=S,this.childContexts=T,this.parent=k}get(S,T){return S===Sr?this.route:S===st?this.childContexts:this.parent.get(S,T)}}let yr=(()=>{class D{}return D.\u0275fac=function(T){return new(T||D)},D.\u0275cmp=C.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(T,k){1&T&&C._UZ(0,"router-outlet")},dependencies:[Ct],encapsulation:2}),D})();function Rn(D,S){return D.providers&&!D._injector&&(D._injector=(0,C.MMx)(D.providers,S,`Route: ${D.path}`)),D._injector??S}function Eo(D){const S=D.children&&D.children.map(Eo),T=S?{...D,children:S}:{...D};return!T.component&&!T.loadComponent&&(S||T.loadChildren)&&T.outlet&&T.outlet!==ln&&(T.component=yr),T}function li(D){return D.outlet||ln}function Bi(D,S){const T=D.filter(k=>li(k)===S);return T.push(...D.filter(k=>li(k)!==S)),T}function Fi(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let S=D.parent;S;S=S.parent){const T=S.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class jt{constructor(S,T,k,B){this.routeReuseStrategy=S,this.futureState=T,this.currState=k,this.forwardEvent=B}activate(S){const T=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,k,S),xi(this.futureState.root),this.activateChildRoutes(T,k,S)}deactivateChildRoutes(S,T,k){const B=Vi(T);S.children.forEach(Y=>{const ye=Y.value.outlet;this.deactivateRoutes(Y,B[ye],k),delete B[ye]}),tt(B,(Y,ye)=>{this.deactivateRouteAndItsChildren(Y,k)})}deactivateRoutes(S,T,k){const B=S.value,Y=T?T.value:null;if(B===Y)if(B.component){const ye=k.getContext(B.outlet);ye&&this.deactivateChildRoutes(S,T,ye.children)}else this.deactivateChildRoutes(S,T,k);else Y&&this.deactivateRouteAndItsChildren(T,k)}deactivateRouteAndItsChildren(S,T){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,T):this.deactivateRouteAndOutlet(S,T)}detachAndStoreRouteSubtree(S,T){const k=T.getContext(S.value.outlet),B=k&&S.value.component?k.children:T,Y=Vi(S);for(const ye of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ye],B);if(k&&k.outlet){const ye=k.outlet.detach(),Re=k.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ye,route:S,contexts:Re})}}deactivateRouteAndOutlet(S,T){const k=T.getContext(S.value.outlet),B=k&&S.value.component?k.children:T,Y=Vi(S);for(const ye of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ye],B);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(S,T,k){const B=Vi(T);S.children.forEach(Y=>{this.activateRoutes(Y,B[Y.value.outlet],k),this.forwardEvent(new Po(Y.value.snapshot))}),S.children.length&&this.forwardEvent(new ca(S.value.snapshot))}activateRoutes(S,T,k){const B=S.value,Y=T?T.value:null;if(xi(B),B===Y)if(B.component){const ye=k.getOrCreateContext(B.outlet);this.activateChildRoutes(S,T,ye.children)}else this.activateChildRoutes(S,T,k);else if(B.component){const ye=k.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const Re=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),ye.children.onOutletReAttached(Re.contexts),ye.attachRef=Re.componentRef,ye.route=Re.route.value,ye.outlet&&ye.outlet.attach(Re.componentRef,Re.route.value),xi(Re.route.value),this.activateChildRoutes(S,null,ye.children)}else{const Re=Fi(B.snapshot),It=Re?.get(C._Vd)??null;ye.attachRef=null,ye.route=B,ye.resolver=It,ye.injector=Re,ye.outlet&&ye.outlet.activateWith(B,ye.injector),this.activateChildRoutes(S,null,ye.children)}}else this.activateChildRoutes(S,null,k)}}class Nr{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class zo{constructor(S,T){this.component=S,this.route=T}}function qo(D,S,T){const k=D._root;return ao(k,S?S._root:null,T,[k.value])}function Js(D,S){const T=Symbol(),k=S.get(D,T);return k===T?"function"!=typeof D||(0,C.Z0I)(D)?S.get(D):D:k}function ao(D,S,T,k,B={canDeactivateChecks:[],canActivateChecks:[]}){const Y=Vi(S);return D.children.forEach(ye=>{(function ls(D,S,T,k,B={canDeactivateChecks:[],canActivateChecks:[]}){const Y=D.value,ye=S?S.value:null,Re=T?T.getContext(D.value.outlet):null;if(ye&&Y.routeConfig===ye.routeConfig){const It=function Sa(D,S,T){if("function"==typeof T)return T(D,S);switch(T){case"pathParamsChange":return!Ie(D.url,S.url);case"pathParamsOrQueryParamsChange":return!Ie(D.url,S.url)||!Yn(D.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oo(D,S)||!Yn(D.queryParams,S.queryParams);default:return!Oo(D,S)}}(ye,Y,Y.routeConfig.runGuardsAndResolvers);It?B.canActivateChecks.push(new Nr(k)):(Y.data=ye.data,Y._resolvedData=ye._resolvedData),ao(D,S,Y.component?Re?Re.children:null:T,k,B),It&&Re&&Re.outlet&&Re.outlet.isActivated&&B.canDeactivateChecks.push(new zo(Re.outlet.component,ye))}else ye&&ji(S,Re,B),B.canActivateChecks.push(new Nr(k)),ao(D,null,Y.component?Re?Re.children:null:T,k,B)})(ye,Y[ye.value.outlet],T,k.concat([ye.value]),B),delete Y[ye.value.outlet]}),tt(Y,(ye,Re)=>ji(ye,T.getContext(Re),B)),B}function ji(D,S,T){const k=Vi(D),B=D.value;tt(k,(Y,ye)=>{ji(Y,B.component?S?S.children.getContext(ye):null:S,T)}),T.canDeactivateChecks.push(new zo(B.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,B))}function Aa(D){return"function"==typeof D}function wo(D){return D instanceof Le.K||"EmptyError"===D?.name}const Zo=Symbol("INITIAL_VALUE");function As(){return(0,Ke.w)(D=>at(D.map(S=>S.pipe((0,Rt.q)(1),(0,bt.O)(Zo)))).pipe((0,$e.U)(S=>{for(const T of S)if(!0!==T){if(T===Zo)return Zo;if(!1===T||T instanceof De)return T}return!0}),(0,Yt.h)(S=>S!==Zo),(0,Rt.q)(1)))}function Yo(D){return(0,Me.z)((0,tn.b)(S=>{if(ze(S))throw Da(0,S)}),(0,$e.U)(S=>!0===S))}const F={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z(D,S,T,k,B){const Y=U(D,S,T);return Y.matched?function Pa(D,S,T,k){const B=S.canMatch;if(!B||0===B.length)return(0,Z.of)(!0);const Y=B.map(ye=>{const Re=Js(ye,D);return me(function uo(D){return D&&Aa(D.canMatch)}(Re)?Re.canMatch(S,T):D.runInContext(()=>Re(S,T)))});return(0,Z.of)(Y).pipe(As(),Yo())}(k=Rn(S,k),S,T).pipe((0,$e.U)(ye=>!0===ye?Y:{...F})):(0,Z.of)(Y)}function U(D,S,T){if(""===S.path)return"full"===S.pathMatch&&(D.hasChildren()||T.length>0)?{...F}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const B=(S.matcher||Xt)(T,D,S);if(!B)return{...F};const Y={};tt(B.posParams,(Re,It)=>{Y[It]=Re.path});const ye=B.consumed.length>0?{...Y,...B.consumed[B.consumed.length-1].parameters}:Y;return{matched:!0,consumedSegments:B.consumed,remainingSegments:T.slice(B.consumed.length),parameters:ye,positionalParamSegments:B.posParams??{}}}function Q(D,S,T,k,B="corrected"){if(T.length>0&&function Tt(D,S,T){return T.some(k=>Xr(D,S,k)&&li(k)!==ln)}(D,T,k)){const ye=new le(S,function wt(D,S,T,k){const B={};B[ln]=k,k._sourceSegment=D,k._segmentIndexShift=S.length;for(const Y of T)if(""===Y.path&&li(Y)!==ln){const ye=new le([],{});ye._sourceSegment=D,ye._segmentIndexShift=S.length,B[li(Y)]=ye}return B}(D,S,k,new le(T,D.children)));return ye._sourceSegment=D,ye._segmentIndexShift=S.length,{segmentGroup:ye,slicedSegments:[]}}if(0===T.length&&function Nn(D,S,T){return T.some(k=>Xr(D,S,k))}(D,T,k)){const ye=new le(D.segments,function Oe(D,S,T,k,B,Y){const ye={};for(const Re of k)if(Xr(D,T,Re)&&!B[li(Re)]){const It=new le([],{});It._sourceSegment=D,It._segmentIndexShift="legacy"===Y?D.segments.length:S.length,ye[li(Re)]=It}return{...B,...ye}}(D,S,T,k,D.children,B));return ye._sourceSegment=D,ye._segmentIndexShift=S.length,{segmentGroup:ye,slicedSegments:T}}const Y=new le(D.segments,D.children);return Y._sourceSegment=D,Y._segmentIndexShift=S.length,{segmentGroup:Y,slicedSegments:T}}function Xr(D,S,T){return(!(D.hasChildren()||S.length>0)||"full"!==T.pathMatch)&&""===T.path}function Br(D,S,T,k){return!!(li(D)===k||k!==ln&&Xr(S,T,D))&&("**"===D.path||U(S,D,T).matched)}function Kr(D,S,T){return 0===S.length&&!D.children[T]}const Fr=!1;class hi{constructor(S){this.segmentGroup=S||null}}class jr{constructor(S){this.urlTree=S}}function ui(D){return Ge(new hi(D))}function lo(D){return Ge(new jr(D))}class Mi{constructor(S,T,k,B,Y){this.injector=S,this.configLoader=T,this.urlSerializer=k,this.urlTree=B,this.config=Y,this.allowRedirects=!0}apply(){const S=Q(this.urlTree.root,[],[],this.config).segmentGroup,T=new le(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,T,ln).pipe((0,$e.U)(Y=>this.createUrlTree(Te(Y),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gn(Y=>{if(Y instanceof jr)return this.allowRedirects=!1,this.match(Y.urlTree);throw Y instanceof hi?this.noMatchError(Y):Y}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,ln).pipe((0,$e.U)(B=>this.createUrlTree(Te(B),S.queryParams,S.fragment))).pipe(Gn(B=>{throw B instanceof hi?this.noMatchError(B):B}))}noMatchError(S){return new C.vHH(4002,Fr)}createUrlTree(S,T,k){const B=te(S);return new De(B,T,k)}expandSegmentGroup(S,T,k,B){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(S,T,k).pipe((0,$e.U)(Y=>new le([],Y))):this.expandSegment(S,k,T,k.segments,B,!0)}expandChildren(S,T,k){const B=[];for(const Y of Object.keys(k.children))"primary"===Y?B.unshift(Y):B.push(Y);return(0,p.D)(B).pipe((0,Mt.b)(Y=>{const ye=k.children[Y],Re=Bi(T,Y);return this.expandSegmentGroup(S,Re,ye,Y).pipe((0,$e.U)(It=>({segment:It,outlet:Y})))}),(0,On.R)((Y,ye)=>(Y[ye.outlet]=ye.segment,Y),{}),er())}expandSegment(S,T,k,B,Y,ye){return(0,p.D)(k).pipe((0,Mt.b)(Re=>this.expandSegmentAgainstRoute(S,T,k,Re,B,Y,ye).pipe(Gn(en=>{if(en instanceof hi)return(0,Z.of)(null);throw en}))),(0,An.P)(Re=>!!Re),Gn((Re,It)=>{if(wo(Re))return Kr(T,B,Y)?(0,Z.of)(new le([],{})):ui(T);throw Re}))}expandSegmentAgainstRoute(S,T,k,B,Y,ye,Re){return Br(B,T,Y,ye)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(S,T,B,Y,ye):Re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,T,k,B,Y,ye):ui(T):ui(T)}expandSegmentAgainstRouteUsingRedirect(S,T,k,B,Y,ye){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,k,B,ye):this.expandRegularSegmentAgainstRouteUsingRedirect(S,T,k,B,Y,ye)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,T,k,B){const Y=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?lo(Y):this.lineralizeSegments(k,Y).pipe((0,wn.z)(ye=>{const Re=new le(ye,{});return this.expandSegment(S,Re,T,ye,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,T,k,B,Y,ye){const{matched:Re,consumedSegments:It,remainingSegments:en,positionalParamSegments:lr}=U(T,B,Y);if(!Re)return ui(T);const pn=this.applyRedirectCommands(It,B.redirectTo,lr);return B.redirectTo.startsWith("/")?lo(pn):this.lineralizeSegments(B,pn).pipe((0,wn.z)(Gr=>this.expandSegment(S,T,k,Gr.concat(en),ye,!1)))}matchSegmentAgainstRoute(S,T,k,B,Y){return"**"===k.path?(S=Rn(k,S),k.loadChildren?(k._loadedRoutes?(0,Z.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):this.configLoader.loadChildren(S,k)).pipe((0,$e.U)(Re=>(k._loadedRoutes=Re.routes,k._loadedInjector=Re.injector,new le(B,{})))):(0,Z.of)(new le(B,{}))):z(T,k,B,S).pipe((0,Ke.w)(({matched:ye,consumedSegments:Re,remainingSegments:It})=>ye?this.getChildConfig(S=k._injector??S,k,B).pipe((0,wn.z)(lr=>{const pn=lr.injector??S,Gr=lr.routes,{segmentGroup:as,slicedSegments:us}=Q(T,Re,It,Gr),ps=new le(as.segments,as.children);if(0===us.length&&ps.hasChildren())return this.expandChildren(pn,Gr,ps).pipe((0,$e.U)(ea=>new le(Re,ea)));if(0===Gr.length&&0===us.length)return(0,Z.of)(new le(Re,{}));const Os=li(k)===Y;return this.expandSegment(pn,ps,Gr,us,Os?ln:Y,!0).pipe((0,$e.U)(nu=>new le(Re.concat(nu.segments),nu.children)))})):ui(T)))}getChildConfig(S,T,k){return T.children?(0,Z.of)({routes:T.children,injector:S}):T.loadChildren?void 0!==T._loadedRoutes?(0,Z.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Co(D,S,T,k){const B=S.canLoad;if(void 0===B||0===B.length)return(0,Z.of)(!0);const Y=B.map(ye=>{const Re=Js(ye,D);return me(function hu(D){return D&&Aa(D.canLoad)}(Re)?Re.canLoad(S,T):D.runInContext(()=>Re(S,T)))});return(0,Z.of)(Y).pipe(As(),Yo())}(S,T,k).pipe((0,wn.z)(B=>B?this.configLoader.loadChildren(S,T).pipe((0,tn.b)(Y=>{T._loadedRoutes=Y.routes,T._loadedInjector=Y.injector})):function Wr(D){return Ge(Hr(Fr,3))}())):(0,Z.of)({routes:[],injector:S})}lineralizeSegments(S,T){let k=[],B=T.root;for(;;){if(k=k.concat(B.segments),0===B.numberOfChildren)return(0,Z.of)(k);if(B.numberOfChildren>1||!B.children[ln])return Ge(new C.vHH(4e3,Fr));B=B.children[ln]}}applyRedirectCommands(S,T,k){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),S,k)}applyRedirectCreateUrlTree(S,T,k,B){const Y=this.createSegmentGroup(S,T.root,k,B);return new De(Y,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(S,T){const k={};return tt(S,(B,Y)=>{if("string"==typeof B&&B.startsWith(":")){const Re=B.substring(1);k[Y]=T[Re]}else k[Y]=B}),k}createSegmentGroup(S,T,k,B){const Y=this.createSegments(S,T.segments,k,B);let ye={};return tt(T.children,(Re,It)=>{ye[It]=this.createSegmentGroup(S,Re,k,B)}),new le(Y,ye)}createSegments(S,T,k,B){return T.map(Y=>Y.path.startsWith(":")?this.findPosParam(S,Y,B):this.findOrReturn(Y,k))}findPosParam(S,T,k){const B=k[T.path.substring(1)];if(!B)throw new C.vHH(4001,Fr);return B}findOrReturn(S,T){let k=0;for(const B of T){if(B.path===S.path)return T.splice(k),B;k++}return S}}class qt{}class Oa{constructor(S,T,k,B,Y,ye,Re,It){this.injector=S,this.rootComponentType=T,this.config=k,this.urlTree=B,this.url=Y,this.paramsInheritanceStrategy=ye,this.relativeLinkResolution=Re,this.urlSerializer=It}recognize(){const S=Q(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,ln).pipe((0,$e.U)(T=>{if(null===T)return null;const k=new Yi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),B=new Jr(k,T),Y=new Hs(this.url,B);return this.inheritParamsAndData(Y._root),Y}))}inheritParamsAndData(S){const T=S.value,k=oo(T,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data),S.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(S,T,k,B){return 0===k.segments.length&&k.hasChildren()?this.processChildren(S,T,k):this.processSegment(S,T,k,k.segments,B)}processChildren(S,T,k){return(0,p.D)(Object.keys(k.children)).pipe((0,Mt.b)(B=>{const Y=k.children[B],ye=Bi(T,B);return this.processSegmentGroup(S,ye,Y,B)}),(0,On.R)((B,Y)=>B&&Y?(B.push(...Y),B):null),function hr(D,S=!1){return(0,ie.e)((T,k)=>{let B=0;T.subscribe((0,dt.x)(k,Y=>{const ye=D(Y,B++);(ye||S)&&k.next(Y),!ye&&k.complete()}))})}(B=>null!==B),(0,fn.d)(null),er(),(0,$e.U)(B=>{if(null===B)return null;const Y=cn(B);return function Dn(D){D.sort((S,T)=>S.value.outlet===ln?-1:T.value.outlet===ln?1:S.value.outlet.localeCompare(T.value.outlet))}(Y),Y}))}processSegment(S,T,k,B,Y){return(0,p.D)(T).pipe((0,Mt.b)(ye=>this.processSegmentAgainstRoute(ye._injector??S,ye,k,B,Y)),(0,An.P)(ye=>!!ye),Gn(ye=>{if(wo(ye))return Kr(k,B,Y)?(0,Z.of)([]):(0,Z.of)(null);throw ye}))}processSegmentAgainstRoute(S,T,k,B,Y){if(T.redirectTo||!Br(T,k,B,Y))return(0,Z.of)(null);let ye;if("**"===T.path){const Re=B.length>0?oi(B).parameters:{},It=Ui(k)+B.length,en=new Yi(B,Re,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wl(T),li(T),T.component??T._loadedComponent??null,T,Kt(k),It,fa(T),It);ye=(0,Z.of)({snapshot:en,consumedSegments:[],remainingSegments:[]})}else ye=z(k,T,B,S).pipe((0,$e.U)(({matched:Re,consumedSegments:It,remainingSegments:en,parameters:lr})=>{if(!Re)return null;const pn=Ui(k)+It.length;return{snapshot:new Yi(It,lr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wl(T),li(T),T.component??T._loadedComponent??null,T,Kt(k),pn,fa(T),pn),consumedSegments:It,remainingSegments:en}}));return ye.pipe((0,Ke.w)(Re=>{if(null===Re)return(0,Z.of)(null);const{snapshot:It,consumedSegments:en,remainingSegments:lr}=Re;S=T._injector??S;const pn=T._loadedInjector??S,Gr=function Xn(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(T),{segmentGroup:as,slicedSegments:us}=Q(k,en,lr,Gr.filter(Os=>void 0===Os.redirectTo),this.relativeLinkResolution);if(0===us.length&&as.hasChildren())return this.processChildren(pn,Gr,as).pipe((0,$e.U)(Os=>null===Os?null:[new Jr(It,Os)]));if(0===Gr.length&&0===us.length)return(0,Z.of)([new Jr(It,[])]);const ps=li(T)===Y;return this.processSegment(pn,Gr,as,us,ps?ln:Y).pipe((0,$e.U)(Os=>null===Os?null:[new Jr(It,Os)]))}))}}function Ru(D){const S=D.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function cn(D){const S=[],T=new Set;for(const k of D){if(!Ru(k)){S.push(k);continue}const B=S.find(Y=>k.value.routeConfig===Y.value.routeConfig);void 0!==B?(B.children.push(...k.children),T.add(B)):S.push(k)}for(const k of T){const B=cn(k.children);S.push(new Jr(k.value,B))}return S.filter(k=>!T.has(k))}function Kt(D){let S=D;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Ui(D){let S=D,T=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,T+=S._segmentIndexShift??0;return T-1}function wl(D){return D.data||{}}function fa(D){return D.resolve||{}}function Gi(D){return"string"==typeof D.title||null===D.title}function Qu(D){return(0,Ke.w)(S=>{const T=D(S);return T?(0,p.D)(T).pipe((0,$e.U)(()=>S)):(0,Z.of)(S)})}let $n=(()=>{class D{buildTitle(T){let k,B=T.root;for(;void 0!==B;)k=this.getResolvedTitleForRoute(B)??k,B=B.children.find(Y=>Y.outlet===ln);return k}getResolvedTitleForRoute(T){return T.data[qn]}}return D.\u0275fac=function(T){return new(T||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(pa)},providedIn:"root"}),D})(),pa=(()=>{class D extends $n{constructor(T){super(),this.title=T}updateTitle(T){const k=this.buildTitle(T);void 0!==k&&this.title.setTitle(k)}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(Mr.Dx))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class ci{}class Lo extends class nr{shouldDetach(S){return!1}store(S,T){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,T){return S.routeConfig===T.routeConfig}}{}const Fa=new C.OlP("",{providedIn:"root",factory:()=>({})}),on=new C.OlP("ROUTES");let Uo=(()=>{class D{constructor(T,k){this.injector=T,this.compiler=k,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,Z.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const k=me(T.loadComponent()).pipe((0,tn.b)(Y=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=Y}),cr(()=>{this.componentLoaders.delete(T)})),B=new Ne(k,()=>new R.x).pipe(Ze());return this.componentLoaders.set(T,B),B}loadChildren(T,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,Z.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const Y=this.loadModuleFactoryOrRoutes(k.loadChildren).pipe((0,$e.U)(Re=>{this.onLoadEndListener&&this.onLoadEndListener(k);let It,en,lr=!1;Array.isArray(Re)?en=Re:(It=Re.create(T).injector,en=fr(It.get(on,[],C.XFs.Self|C.XFs.Optional)));return{routes:en.map(Eo),injector:It}}),cr(()=>{this.childrenLoaders.delete(k)})),ye=new Ne(Y,()=>new R.x).pipe(Ze());return this.childrenLoaders.set(k,ye),ye}loadModuleFactoryOrRoutes(T){return me(T()).pipe((0,wn.z)(k=>k instanceof C.YKP||Array.isArray(k)?(0,Z.of)(k):(0,p.D)(this.compiler.compileModuleAsync(k))))}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(C.zs3),C.LFG(C.Sil))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class Qa{}class ga{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,T){return S}}function Jo(D){throw D}function fc(D,S,T){return S.parse("/")}const ma={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ja={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function zs(){const D=(0,C.f3M)(kt),S=(0,C.f3M)(st),T=(0,C.f3M)(Ue.Ye),k=(0,C.f3M)(C.zs3),B=(0,C.f3M)(C.Sil),Y=(0,C.f3M)(on,{optional:!0})??[],ye=(0,C.f3M)(Fa,{optional:!0})??{},Re=(0,C.f3M)(pa),It=(0,C.f3M)($n,{optional:!0}),en=(0,C.f3M)(Qa,{optional:!0}),lr=(0,C.f3M)(ci,{optional:!0}),pn=new Ji(null,D,S,T,k,B,fr(Y));return en&&(pn.urlHandlingStrategy=en),lr&&(pn.routeReuseStrategy=lr),pn.titleStrategy=It??Re,function _a(D,S){D.errorHandler&&(S.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(S.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(S.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(S.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(S.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(S.canceledNavigationResolution=D.canceledNavigationResolution)}(ye,pn),pn}let Ji=(()=>{class D{constructor(T,k,B,Y,ye,Re,It){this.rootComponentType=T,this.urlSerializer=k,this.rootContexts=B,this.location=Y,this.config=It,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new R.x,this.errorHandler=Jo,this.malformedUriErrorHandler=fc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Z.of)(void 0),this.urlHandlingStrategy=new ga,this.routeReuseStrategy=new Lo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ye.get(Uo),this.configLoader.onLoadEndListener=Gr=>this.triggerEvent(new Ta(Gr)),this.configLoader.onLoadStartListener=Gr=>this.triggerEvent(new la(Gr)),this.ngModule=ye.get(C.h0i),this.console=ye.get(C.c2e);const pn=ye.get(C.R0b);this.isNgZoneEnabled=pn instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(It),this.currentUrlTree=function ft(){return new De(new le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Si(this.currentUrlTree,this.rootComponentType),this.transitions=new ve({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(T){const k=this.events;return T.pipe((0,Yt.h)(B=>0!==B.id),(0,$e.U)(B=>({...B,extractedUrl:this.urlHandlingStrategy.extract(B.rawUrl)})),(0,Ke.w)(B=>{let Y=!1,ye=!1;return(0,Z.of)(B).pipe((0,tn.b)(Re=>{this.currentNavigation={id:Re.id,initialUrl:Re.rawUrl,extractedUrl:Re.extractedUrl,trigger:Re.source,extras:Re.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ke.w)(Re=>{const It=this.browserUrlTree.toString(),en=!this.navigated||Re.extractedUrl.toString()!==It||It!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||en)&&this.urlHandlingStrategy.shouldProcessUrl(Re.rawUrl))return Ou(Re.source)&&(this.browserUrlTree=Re.extractedUrl),(0,Z.of)(Re).pipe((0,Ke.w)(pn=>{const Gr=this.transitions.getValue();return k.next(new rs(pn.id,this.serializeUrl(pn.extractedUrl),pn.source,pn.restoredState)),Gr!==this.transitions.getValue()?ct.E:Promise.resolve(pn)}),function fi(D,S,T,k){return(0,Ke.w)(B=>function ss(D,S,T,k,B){return new Mi(D,S,T,k,B).apply()}(D,S,T,B.extractedUrl,k).pipe((0,$e.U)(Y=>({...B,urlAfterRedirects:Y}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(pn=>{this.currentNavigation={...this.currentNavigation,finalUrl:pn.urlAfterRedirects},B.urlAfterRedirects=pn.urlAfterRedirects}),function Vl(D,S,T,k,B,Y){return(0,wn.z)(ye=>function Qi(D,S,T,k,B,Y,ye="emptyOnly",Re="legacy"){return new Oa(D,S,T,k,B,ye,Re,Y).recognize().pipe((0,Ke.w)(It=>null===It?function ur(D){return new je.y(S=>S.error(D))}(new qt):(0,Z.of)(It)))}(D,S,T,ye.urlAfterRedirects,k.serialize(ye.urlAfterRedirects),k,B,Y).pipe((0,$e.U)(Re=>({...ye,targetSnapshot:Re}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(pn=>{if(B.targetSnapshot=pn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!pn.extras.skipLocationChange){const as=this.urlHandlingStrategy.merge(pn.urlAfterRedirects,pn.rawUrl);this.setBrowserUrl(as,pn)}this.browserUrlTree=pn.urlAfterRedirects}const Gr=new Qs(pn.id,this.serializeUrl(pn.extractedUrl),this.serializeUrl(pn.urlAfterRedirects),pn.targetSnapshot);k.next(Gr)}));if(en&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Gr,extractedUrl:as,source:us,restoredState:ps,extras:Os}=Re,tu=new rs(Gr,this.serializeUrl(as),us,ps);k.next(tu);const nu=Si(as,this.rootComponentType).snapshot;return B={...Re,targetSnapshot:nu,urlAfterRedirects:as,extras:{...Os,skipLocationChange:!1,replaceUrl:!1}},(0,Z.of)(B)}return this.rawUrlTree=Re.rawUrl,Re.resolve(null),ct.E}),(0,tn.b)(Re=>{const It=new Ki(Re.id,this.serializeUrl(Re.extractedUrl),this.serializeUrl(Re.urlAfterRedirects),Re.targetSnapshot);this.triggerEvent(It)}),(0,$e.U)(Re=>B={...Re,guards:qo(Re.targetSnapshot,Re.currentSnapshot,this.rootContexts)}),function Ku(D,S){return(0,wn.z)(T=>{const{targetSnapshot:k,currentSnapshot:B,guards:{canActivateChecks:Y,canDeactivateChecks:ye}}=T;return 0===ye.length&&0===Y.length?(0,Z.of)({...T,guardsResult:!0}):function Ra(D,S,T,k){return(0,p.D)(D).pipe((0,wn.z)(B=>function Ko(D,S,T,k,B){const Y=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!Y||0===Y.length)return(0,Z.of)(!0);const ye=Y.map(Re=>{const It=Fi(S)??B,en=Js(Re,It);return me(function Gs(D){return D&&Aa(D.canDeactivate)}(en)?en.canDeactivate(D,S,T,k):It.runInContext(()=>en(D,S,T,k))).pipe((0,An.P)())});return(0,Z.of)(ye).pipe(As())}(B.component,B.route,T,S,k)),(0,An.P)(B=>!0!==B,!0))}(ye,k,B,D).pipe((0,wn.z)(Re=>Re&&function xa(D){return"boolean"==typeof D}(Re)?function da(D,S,T,k){return(0,p.D)(S).pipe((0,Mt.b)(B=>(0,et.z)(function Ya(D,S){return null!==D&&S&&S(new yo(D)),(0,Z.of)(!0)}(B.route.parent,k),function Na(D,S){return null!==D&&S&&S(new Vs(D)),(0,Z.of)(!0)}(B.route,k),function xs(D,S,T){const k=S[S.length-1],Y=S.slice(0,S.length-1).reverse().map(ye=>function Wi(D){const S=D.routeConfig?D.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:D,guards:S}:null}(ye)).filter(ye=>null!==ye).map(ye=>$t(()=>{const Re=ye.guards.map(It=>{const en=Fi(ye.node)??T,lr=Js(It,en);return me(function Li(D){return D&&Aa(D.canActivateChild)}(lr)?lr.canActivateChild(k,D):en.runInContext(()=>lr(k,D))).pipe((0,An.P)())});return(0,Z.of)(Re).pipe(As())}));return(0,Z.of)(Y).pipe(As())}(D,B.path,T),function ha(D,S,T){const k=S.routeConfig?S.routeConfig.canActivate:null;if(!k||0===k.length)return(0,Z.of)(!0);const B=k.map(Y=>$t(()=>{const ye=Fi(S)??T,Re=Js(Y,ye);return me(function cs(D){return D&&Aa(D.canActivate)}(Re)?Re.canActivate(S,D):ye.runInContext(()=>Re(S,D))).pipe((0,An.P)())}));return(0,Z.of)(B).pipe(As())}(D,B.route,T))),(0,An.P)(B=>!0!==B,!0))}(k,Y,D,S):(0,Z.of)(Re)),(0,$e.U)(Re=>({...T,guardsResult:Re})))})}(this.ngModule.injector,Re=>this.triggerEvent(Re)),(0,tn.b)(Re=>{if(B.guardsResult=Re.guardsResult,ze(Re.guardsResult))throw Da(0,Re.guardsResult);const It=new No(Re.id,this.serializeUrl(Re.extractedUrl),this.serializeUrl(Re.urlAfterRedirects),Re.targetSnapshot,!!Re.guardsResult);this.triggerEvent(It)}),(0,Yt.h)(Re=>!!Re.guardsResult||(this.restoreHistory(Re),this.cancelNavigationTransition(Re,"",3),!1)),Qu(Re=>{if(Re.guards.canActivateChecks.length)return(0,Z.of)(Re).pipe((0,tn.b)(It=>{const en=new Ss(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(en)}),(0,Ke.w)(It=>{let en=!1;return(0,Z.of)(It).pipe(function Qo(D,S){return(0,wn.z)(T=>{const{targetSnapshot:k,guards:{canActivateChecks:B}}=T;if(!B.length)return(0,Z.of)(T);let Y=0;return(0,p.D)(B).pipe((0,Mt.b)(ye=>function Cl(D,S,T,k){const B=D.routeConfig,Y=D._resolve;return void 0!==B?.title&&!Gi(B)&&(Y[qn]=B.title),function Pu(D,S,T,k){const B=function Yu(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===B.length)return(0,Z.of)({});const Y={};return(0,p.D)(B).pipe((0,wn.z)(ye=>function hc(D,S,T,k){const B=Fi(S)??k,Y=Js(D,B);return me(Y.resolve?Y.resolve(S,T):B.runInContext(()=>Y(S,T)))}(D[ye],S,T,k).pipe((0,An.P)(),(0,tn.b)(Re=>{Y[ye]=Re}))),Kn(1),function Dr(D){return(0,$e.U)(()=>D)}(Y),Gn(ye=>wo(ye)?ct.E:Ge(ye)))}(Y,D,S,k).pipe((0,$e.U)(ye=>(D._resolvedData=ye,D.data=oo(D,T).resolve,B&&Gi(B)&&(D.data[qn]=B.title),null)))}(ye.route,k,D,S)),(0,tn.b)(()=>Y++),Kn(1),(0,wn.z)(ye=>Y===B.length?(0,Z.of)(T):ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>en=!0,complete:()=>{en||(this.restoreHistory(It),this.cancelNavigationTransition(It,"",2))}}))}),(0,tn.b)(It=>{const en=new ba(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(en)}))}),Qu(Re=>{const It=en=>{const lr=[];en.routeConfig?.loadComponent&&!en.routeConfig._loadedComponent&&lr.push(this.configLoader.loadComponent(en.routeConfig).pipe((0,tn.b)(pn=>{en.component=pn}),(0,$e.U)(()=>{})));for(const pn of en.children)lr.push(...It(pn));return lr};return at(It(Re.targetSnapshot.root)).pipe((0,fn.d)(),(0,Rt.q)(1))}),Qu(()=>this.afterPreactivation()),(0,$e.U)(Re=>{const It=function Ci(D,S,T){const k=vs(D,S._root,T?T._root:void 0);return new Di(k,S)}(this.routeReuseStrategy,Re.targetSnapshot,Re.currentRouterState);return B={...Re,targetRouterState:It}}),(0,tn.b)(Re=>{this.currentUrlTree=Re.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Re.urlAfterRedirects,Re.rawUrl),this.routerState=Re.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Re.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Re),this.browserUrlTree=Re.urlAfterRedirects)}),((D,S,T)=>(0,$e.U)(k=>(new jt(S,k.targetRouterState,k.currentRouterState,T).activate(D),k)))(this.rootContexts,this.routeReuseStrategy,Re=>this.triggerEvent(Re)),(0,tn.b)({next(){Y=!0},complete(){Y=!0}}),cr(()=>{Y||ye||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),Gn(Re=>{if(ye=!0,ge(Re)){Se(Re)||(this.navigated=!0,this.restoreHistory(B,!0));const It=new _i(B.id,this.serializeUrl(B.extractedUrl),Re.message,Re.cancellationCode);if(k.next(It),Se(Re)){const en=this.urlHandlingStrategy.merge(Re.url,this.rawUrlTree),lr={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ou(B.source)};this.scheduleNavigation(en,"imperative",null,lr,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{this.restoreHistory(B,!0);const It=new Zi(B.id,this.serializeUrl(B.extractedUrl),Re,B.targetSnapshot??void 0);k.next(It);try{B.resolve(this.errorHandler(Re))}catch(en){B.reject(en)}}return ct.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next({...this.transitions.value,...T})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const k="popstate"===T.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{const B={replaceUrl:!0},Y=T.state?.navigationId?T.state:null;if(Y){const Re={...Y};delete Re.navigationId,delete Re.\u0275routerPageId,0!==Object.keys(Re).length&&(B.state=Re)}const ye=this.parseUrl(T.url);this.scheduleNavigation(ye,k,Y,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){this.config=T.map(Eo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,k={}){const{relativeTo:B,queryParams:Y,fragment:ye,queryParamsHandling:Re,preserveFragment:It}=k,en=B||this.routerState.root,lr=It?this.currentUrlTree.fragment:ye;let pn=null;switch(Re){case"merge":pn={...this.currentUrlTree.queryParams,...Y};break;case"preserve":pn=this.currentUrlTree.queryParams;break;default:pn=Y||null}return null!==pn&&(pn=this.removeEmptyProps(pn)),hn(en,this.currentUrlTree,T,pn,lr??null)}navigateByUrl(T,k={skipLocationChange:!1}){const B=ze(T)?T:this.parseUrl(T),Y=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(Y,"imperative",null,k)}navigate(T,k={skipLocationChange:!1}){return function fu(D){for(let S=0;S<D.length;S++){if(null==D[S])throw new C.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,k),k)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let k;try{k=this.urlSerializer.parse(T)}catch(B){k=this.malformedUriErrorHandler(B,this.urlSerializer,T)}return k}isActive(T,k){let B;if(B=!0===k?{...ma}:!1===k?{...Ja}:k,ze(T))return vn(this.currentUrlTree,T,B);const Y=this.parseUrl(T);return vn(this.currentUrlTree,Y,B)}removeEmptyProps(T){return Object.keys(T).reduce((k,B)=>{const Y=T[B];return null!=Y&&(k[B]=Y),k},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new wi(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,k,B,Y,ye){if(this.disposed)return Promise.resolve(!1);let Re,It,en;ye?(Re=ye.resolve,It=ye.reject,en=ye.promise):en=new Promise((Gr,as)=>{Re=Gr,It=as});const lr=++this.navigationId;let pn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(B=this.location.getState()),pn=B&&B.\u0275routerPageId?B.\u0275routerPageId:Y.replaceUrl||Y.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):pn=0,this.setTransition({id:lr,targetPageId:pn,source:k,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:Y,resolve:Re,reject:It,promise:en,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),en.catch(Gr=>Promise.reject(Gr))}setBrowserUrl(T,k){const B=this.urlSerializer.serialize(T),Y={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.isCurrentPathEqualTo(B)||k.extras.replaceUrl?this.location.replaceState(B,"",Y):this.location.go(B,"",Y)}restoreHistory(T,k=!1){if("computed"===this.canceledNavigationResolution){const B=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===B?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===B&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(B)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,k,B){const Y=new _i(T.id,this.serializeUrl(T.extractedUrl),k,B);this.triggerEvent(Y),T.resolve(!1)}generateNgRouterState(T,k){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:k}:{navigationId:T}}}return D.\u0275fac=function(T){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:function(){return zs()},providedIn:"root"}),D})();function Ou(D){return"imperative"!==D}let Io=(()=>{class D{constructor(T,k,B,Y,ye){this.router=T,this.route=k,this.tabIndexAttribute=B,this.renderer=Y,this.el=ye,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new R.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(T){this._preserveFragment=(0,C.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,C.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,C.D6c)(T)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const k=this.renderer,B=this.el.nativeElement;null!==T?k.setAttribute(B,"tabindex",T):k.removeAttribute(B,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(Ji),C.Y36(Sr),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq))},D.\u0275dir=C.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,k){1&T&&C.NdJ("click",function(){return k.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[C.TTD]}),D})(),Ua=(()=>{class D{constructor(T,k,B){this.router=T,this.route=k,this.locationStrategy=B,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new R.x,this.subscription=T.events.subscribe(Y=>{Y instanceof wi&&this.updateTargetUrlAndHref()})}set preserveFragment(T){this._preserveFragment=(0,C.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,C.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,C.D6c)(T)}get replaceUrl(){return this._replaceUrl}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,k,B,Y,ye){return!!(0!==T||k||B||Y||ye||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(T){return new(T||D)(C.Y36(Ji),C.Y36(Sr),C.Y36(Ue.S$))},D.\u0275dir=C.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,k){1&T&&C.NdJ("click",function(Y){return k.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&T&&C.uIk("target",k.target)("href",k.href,C.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[C.TTD]}),D})();class ds{}let eo=(()=>{class D{constructor(T,k,B,Y,ye){this.router=T,this.injector=B,this.preloadingStrategy=Y,this.loader=ye}setUpPreloading(){this.subscription=this.router.events.pipe((0,Yt.h)(T=>T instanceof wi),(0,Mt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,k){const B=[];for(const Y of k){Y.providers&&!Y._injector&&(Y._injector=(0,C.MMx)(Y.providers,T,`Route: ${Y.path}`));const ye=Y._injector??T,Re=Y._loadedInjector??ye;Y.loadChildren&&!Y._loadedRoutes&&void 0===Y.canLoad||Y.loadComponent&&!Y._loadedComponent?B.push(this.preloadConfig(ye,Y)):(Y.children||Y._loadedRoutes)&&B.push(this.processRoutes(Re,Y.children??Y._loadedRoutes))}return(0,p.D)(B).pipe((0,ar.J)())}preloadConfig(T,k){return this.preloadingStrategy.preload(k,()=>{let B;B=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(T,k):(0,Z.of)(null);const Y=B.pipe((0,wn.z)(ye=>null===ye?(0,Z.of)(void 0):(k._loadedRoutes=ye.routes,k._loadedInjector=ye.injector,this.processRoutes(ye.injector??T,ye.routes))));if(k.loadComponent&&!k._loadedComponent){const ye=this.loader.loadComponent(k);return(0,p.D)([Y,ye]).pipe((0,ar.J)())}return Y})}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(Ji),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(ds),C.LFG(Uo))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const ku=new C.OlP("");let va=(()=>{class D{constructor(T,k,B={}){this.router=T,this.viewportScroller=k,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof wi&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Bs&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,k){this.router.triggerEvent(new Bs(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(T){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();function Va(D,S){return{\u0275kind:D,\u0275providers:S}}function Ms(D){return[{provide:on,multi:!0,useValue:D}]}function Xa(){const D=(0,C.f3M)(C.zs3);return S=>{const T=D.get(C.z2F);if(S!==T.components[0])return;const k=D.get(Ji),B=D.get(jl);1===D.get(si)&&k.initialNavigation(),D.get(Ea,null,C.XFs.Optional)?.setUpPreloading(),D.get(ku,null,C.XFs.Optional)?.init(),k.resetRootComponentType(T.componentTypes[0]),B.next(),B.complete()}}const jl=new C.OlP("",{factory:()=>new R.x}),si=new C.OlP("",{providedIn:"root",factory:()=>1});const Ea=new C.OlP("");function hs(D){return Va(0,[{provide:Ea,useExisting:eo},{provide:ds,useExisting:D}])}const Ns=new C.OlP("ROUTER_FORROOT_GUARD"),Ps=[Ue.Ye,{provide:kt,useClass:yn},{provide:Ji,useFactory:zs},st,{provide:Sr,useFactory:function Ju(D){return D.routerState.root},deps:[Ji]},Uo];function ti(){return new C.PXZ("Router",Ji)}let to=(()=>{class D{constructor(T){}static forRoot(T,k){return{ngModule:D,providers:[Ps,[],Ms(T),{provide:Ns,useFactory:eu,deps:[[Ji,new C.FiY,new C.tp0]]},{provide:Fa,useValue:k||{}},k?.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:ku,useFactory:()=>{const D=(0,C.f3M)(Ji),S=(0,C.f3M)(Ue.EM),T=(0,C.f3M)(Fa);return T.scrollOffset&&S.setOffset(T.scrollOffset),new va(D,S,T)}},k?.preloadingStrategy?hs(k.preloadingStrategy).\u0275providers:[],{provide:C.PXZ,multi:!0,useFactory:ti},k?.initialNavigation?Is(k):[],[{provide:bo,useFactory:Xa},{provide:C.tb,multi:!0,useExisting:bo}]]}}static forChild(T){return{ngModule:D,providers:[Ms(T)]}}}return D.\u0275fac=function(T){return new(T||D)(C.LFG(Ns,8))},D.\u0275mod=C.oAB({type:D}),D.\u0275inj=C.cJS({imports:[yr]}),D})();function eu(D){return"guarded"}function Is(D){return["disabled"===D.initialNavigation?Va(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const S=(0,C.f3M)(Ji);return()=>{S.setUpLocationChangeListener()}}},{provide:si,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Va(2,[{provide:si,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:S=>{const T=S.get(Ue.V_,Promise.resolve(null));let k=!1;return()=>T.then(()=>new Promise(Y=>{const ye=S.get(Ji),Re=S.get(jl);(function B(Y){S.get(Ji).events.pipe((0,Yt.h)(Re=>Re instanceof wi||Re instanceof _i||Re instanceof Zi),(0,$e.U)(Re=>Re instanceof wi||Re instanceof _i&&(0===Re.code||1===Re.code)&&null),(0,Yt.h)(Re=>null!==Re),(0,Rt.q)(1)).subscribe(()=>{Y()})})(()=>{Y(!0),k=!0}),ye.afterPreactivation=()=>(Y(!0),k||Re.closed?(0,Z.of)(void 0):Re),ye.initialNavigation()}))}}]).\u0275providers:[]]}const bo=new C.OlP("")},3942:(an,ot,j)=>{j.d(ot,{Z:()=>at});var C=j(2090),p=j(4859),Z=j(9681),R=j(1877);class ve{constructor(it,et){this._delegate=it,this.firebase=et,(0,Z._addComponent)(it,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(it,et=Z._DEFAULT_ENTRY_NAME){var Vt;this._delegate.checkDestroyed();const $t=this._delegate.container.getProvider(it);return!$t.isInitialized()&&"EXPLICIT"===(null===(Vt=$t.getComponent())||void 0===Vt?void 0:Vt.instantiationMode)&&$t.initialize(),$t.getImmediate({identifier:et})}_removeServiceInstance(it,et=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(et)}_addComponent(it){(0,Z._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,Z._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const je=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Ye(){const Ft=function we(Ft){const it={},et={__esModule:!0,initializeApp:function Me(ee,ie={}){const Ze=Z.initializeApp(ee,ie);if((0,C.r3)(it,Ze.name))return it[Ze.name];const Ne=new Ft(Ze,et);return it[Ze.name]=Ne,Ne},app:$t,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function Ge(ee){const ie=ee.name,Ze=ie.replace("-compat","");if(Z._registerComponent(ee)&&"PUBLIC"===ee.type){const Ne=(Ue=$t())=>{if("function"!=typeof Ue[Ze])throw je.create("invalid-app-argument",{appName:ie});return Ue[Ze]()};void 0!==ee.serviceProps&&(0,C.ZB)(Ne,ee.serviceProps),et[Ze]=Ne,Ft.prototype[Ze]=function(...Ue){return this._getService.bind(this,ie).apply(this,ee.multipleInstances?Ue:[])}}return"PUBLIC"===ee.type?et[Ze]:null},removeApp:function Vt(ee){delete it[ee]},useAsService:function ct(ee,ie){return"serverAuth"===ie?null:ie},modularAPIs:Z}};function $t(ee){if(!(0,C.r3)(it,ee=ee||Z._DEFAULT_ENTRY_NAME))throw je.create("no-app",{appName:ee});return it[ee]}return et.default=et,Object.defineProperty(et,"apps",{get:function lt(){return Object.keys(it).map(ee=>it[ee])}}),$t.App=Ft,et}(ve);return Ft.INTERNAL=Object.assign(Object.assign({},Ft.INTERNAL),{createFirebaseNamespace:Ye,extendNamespace:function it(et){(0,C.ZB)(Ft,et)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Ft}(),he=new R.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ft=self.firebase.SDK_VERSION;Ft&&Ft.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=re;!function ht(Ft){(0,Z.registerVersion)("@firebase/app-compat","0.1.34",Ft)}()},9681:(an,ot,j)=>{j.r(ot),j.d(ot,{FirebaseError:()=>R.ZR,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>An,_addComponent:()=>On,_addOrOverwriteComponent:()=>Kn,_apps:()=>tn,_clearComponents:()=>hr,_components:()=>Gn,_getProvider:()=>fn,_registerComponent:()=>Vn,_removeServiceInstance:()=>er,deleteApp:()=>mr,getApp:()=>qn,getApps:()=>Pr,initializeApp:()=>ln,onLog:()=>Yn,registerVersion:()=>dr,setLogLevel:()=>Zn});var C=j(5861),p=j(4859),Z=j(1877),R=j(2090),ve=j(8766);class Le{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function je(ce){return"VERSION"===ce.getComponent()?.type}(Ie)){const yt=Ie.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Ie=>Ie).join(" ")}}const we="@firebase/app",re=new Z.Yd("@firebase/app"),An="[DEFAULT]",Mt={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Gn=new Map;function On(ce,be){try{ce.container.addComponent(be)}catch(Ie){re.debug(`Component ${be.name} failed to register with FirebaseApp ${ce.name}`,Ie)}}function Kn(ce,be){ce.container.addOrOverwriteComponent(be)}function Vn(ce){const be=ce.name;if(Gn.has(be))return re.debug(`There were multiple attempts to register component ${be}.`),!1;Gn.set(be,ce);for(const Ie of tn.values())On(Ie,ce);return!0}function fn(ce,be){const Ie=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),ce.container.getProvider(be)}function er(ce,be,Ie=An){fn(ce,be).clearInstance(Ie)}function hr(){Gn.clear()}const cr=new R.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ar{constructor(be,Ie,yt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const Mr="9.10.0";function ln(ce,be={}){"object"!=typeof be&&(be={name:be});const Ie=Object.assign({name:An,automaticDataCollectionEnabled:!1},be),yt=Ie.name;if("string"!=typeof yt||!yt)throw cr.create("bad-app-name",{appName:String(yt)});const kt=tn.get(yt);if(kt){if((0,R.vZ)(ce,kt.options)&&(0,R.vZ)(Ie,kt.config))return kt;throw cr.create("duplicate-app",{appName:yt})}const yn=new p.H0(yt);for(const Qn of Gn.values())yn.addComponent(Qn);const rr=new ar(ce,Ie,yn);return tn.set(yt,rr),rr}function qn(ce=An){const be=tn.get(ce);if(!be)throw cr.create("no-app",{appName:ce});return be}function Pr(){return Array.from(tn.values())}function mr(ce){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(ce){const be=ce.name;tn.has(be)&&(tn.delete(be),yield Promise.all(ce.container.getProviders().map(Ie=>Ie.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function dr(ce,be,Ie){var yt;let kt=null!==(yt=Mt[ce])&&void 0!==yt?yt:ce;Ie&&(kt+=`-${Ie}`);const yn=kt.match(/\s|\//),rr=be.match(/\s|\//);if(yn||rr){const Qn=[`Unable to register library "${kt}" with version "${be}":`];return yn&&Qn.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),yn&&rr&&Qn.push("and"),rr&&Qn.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void re.warn(Qn.join(" "))}Vn(new p.wA(`${kt}-version`,()=>({library:kt,version:be}),"VERSION"))}function Yn(ce,be){if(null!==ce&&"function"!=typeof ce)throw cr.create("invalid-log-argument");(0,Z.Am)(ce,be)}function Zn(ce){(0,Z.Ub)(ce)}const Er="firebase-heartbeat-store";let tt=null;function me(){return tt||(tt=(0,ve.X3)("firebase-heartbeat-database",1,{upgrade:(ce,be)=>{0===be&&ce.createObjectStore(Er)}}).catch(ce=>{throw cr.create("idb-open",{originalErrorMessage:ce.message})})),tt}function ft(){return(ft=(0,C.Z)(function*(ce){var be;try{return(yield me()).transaction(Er).objectStore(Er).get(vn(ce))}catch(Ie){if(Ie instanceof R.ZR)re.warn(Ie.message);else{const yt=cr.create("idb-get",{originalErrorMessage:null===(be=Ie)||void 0===be?void 0:be.message});re.warn(yt.message)}}})).apply(this,arguments)}function gt(ce,be){return nn.apply(this,arguments)}function nn(){return(nn=(0,C.Z)(function*(ce,be){var Ie;try{const kt=(yield me()).transaction(Er,"readwrite");return yield kt.objectStore(Er).put(be,vn(ce)),kt.done}catch(yt){if(yt instanceof R.ZR)re.warn(yt.message);else{const kt=cr.create("idb-set",{originalErrorMessage:null===(Ie=yt)||void 0===Ie?void 0:Ie.message});re.warn(kt.message)}}})).apply(this,arguments)}function vn(ce){return`${ce.name}!${ce.options.appId}`}class tr{constructor(be){this.container=be,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new xn(Ie),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var be=this;return(0,C.Z)(function*(){const yt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=En();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==kt&&!be._heartbeatsCache.heartbeats.some(yn=>yn.date===kt))return be._heartbeatsCache.heartbeats.push({date:kt,agent:yt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(yn=>{const rr=new Date(yn.date).valueOf();return Date.now()-rr<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,C.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ie=En(),{heartbeatsToSend:yt,unsentEntries:kt}=function Rr(ce,be=1024){const Ie=[];let yt=ce.slice();for(const kt of ce){const yn=Ie.find(rr=>rr.agent===kt.agent);if(yn){if(yn.dates.push(kt.date),De(Ie)>be){yn.dates.pop();break}}else if(Ie.push({agent:kt.agent,dates:[kt.date]}),De(Ie)>be){Ie.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:yt}}(be._heartbeatsCache.heartbeats),yn=(0,R.L)(JSON.stringify({version:2,heartbeats:yt}));return be._heartbeatsCache.lastSentHeartbeatDate=Ie,kt.length>0?(be._heartbeatsCache.heartbeats=kt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),yn})()}}function En(){return(new Date).toISOString().substring(0,10)}class xn{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,R.hl)()&&(0,R.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,C.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function _e(ce){return ft.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ie=this;return(0,C.Z)(function*(){var yt;if(yield Ie._canUseIndexedDBPromise){const yn=yield Ie.read();return gt(Ie.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:yn.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ie=this;return(0,C.Z)(function*(){var yt;if(yield Ie._canUseIndexedDBPromise){const yn=yield Ie.read();return gt(Ie.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:yn.lastSentHeartbeatDate,heartbeats:[...yn.heartbeats,...be.heartbeats]})}})()}}function De(ce){return(0,R.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function le(ce){Vn(new p.wA("platform-logger",be=>new Le(be),"PRIVATE")),Vn(new p.wA("heartbeat",be=>new tr(be),"PRIVATE")),dr(we,"0.7.33",ce),dr(we,"0.7.33","esm2017"),dr("fire-js","")}("")},4859:(an,ot,j)=>{j.d(ot,{H0:()=>we,wA:()=>Z});var C=j(5861),p=j(2090);class Z{constructor(re,he,Ce){this.name=re,this.instanceFactory=he,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const R="[DEFAULT]";class ve{constructor(re,he){this.name=re,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const he=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(he)){const Ce=new p.BH;if(this.instancesDeferred.set(he,Ce),this.isInitialized(he)||this.shouldAutoInitialize())try{const dt=this.getOrInitializeService({instanceIdentifier:he});dt&&Ce.resolve(dt)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(re){var he;const Ce=this.normalizeInstanceIdentifier(re?.identifier),dt=null!==(he=re?.optional)&&void 0!==he&&he;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(ht){if(dt)return null;throw ht}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function je(Ye){return"EAGER"===Ye.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:R})}catch{}for(const[he,Ce]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(he);try{const ht=this.getOrInitializeService({instanceIdentifier:dt});Ce.resolve(ht)}catch{}}}}clearInstance(re=R){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,C.Z)(function*(){const he=Array.from(re.instances.values());yield Promise.all([...he.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...he.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=R){return this.instances.has(re)}getOptions(re=R){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:he={}}=re,Ce=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const dt=this.getOrInitializeService({instanceIdentifier:Ce,options:he});for(const[ht,at]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(ht)&&at.resolve(dt);return dt}onInit(re,he){var Ce;const dt=this.normalizeInstanceIdentifier(he),ht=null!==(Ce=this.onInitCallbacks.get(dt))&&void 0!==Ce?Ce:new Set;ht.add(re),this.onInitCallbacks.set(dt,ht);const at=this.instances.get(dt);return at&&re(at,dt),()=>{ht.delete(re)}}invokeOnInitCallbacks(re,he){const Ce=this.onInitCallbacks.get(he);if(Ce)for(const dt of Ce)try{dt(re,he)}catch{}}getOrInitializeService({instanceIdentifier:re,options:he={}}){let Ce=this.instances.get(re);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Ye=re,Ye===R?void 0:Ye),options:he}),this.instances.set(re,Ce),this.instancesOptions.set(re,he),this.invokeOnInitCallbacks(Ce,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,Ce)}catch{}var Ye;return Ce||null}normalizeInstanceIdentifier(re=R){return this.component?this.component.multipleInstances?re:R:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const he=this.getProvider(re.name);if(he.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);he.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const he=new ve(re,this);return this.providers.set(re,he),he}getProviders(){return Array.from(this.providers.values())}}},2833:(an,ot,j)=>{var C=j(5861),p=j(9681),Z=j(4859),R=j(2090),ve=j(8766);const Le="@firebase/installations",je="0.5.12",Ye=`w:${je}`,re="FIS_v2",Ft=new R.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(oe){return oe instanceof R.ZR&&oe.code.includes("request-failed")}function et({projectId:oe}){return`https://firebaseinstallations.googleapis.com/v1/projects/${oe}/installations`}function Vt(oe){return{token:oe.token,requestStatus:2,expiresIn:ie(oe.expiresIn),creationTime:Date.now()}}function $t(oe,ze){return Me.apply(this,arguments)}function Me(){return(Me=(0,C.Z)(function*(oe,ze){const Zt=(yield ze.json()).error;return Ft.create("request-failed",{requestName:oe,serverCode:Zt.code,serverMessage:Zt.message,serverStatus:Zt.status})})).apply(this,arguments)}function lt({apiKey:oe}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":oe})}function Ge(oe,{refreshToken:ze}){const ut=lt(oe);return ut.append("Authorization",function Ze(oe){return`${re} ${oe}`}(ze)),ut}function ct(oe){return ee.apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(oe){const ze=yield oe();return ze.status>=500&&ze.status<600?oe():ze})).apply(this,arguments)}function ie(oe){return Number(oe.replace("s","000"))}function Ne(oe,ze){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,C.Z)(function*({appConfig:oe,heartbeatServiceProvider:ze},{fid:ut}){const Zt=et(oe),Tn=lt(oe),Un=ze.getImmediate({optional:!0});if(Un){const ri=yield Un.getHeartbeatsHeader();ri&&Tn.append("x-firebase-client",ri)}const wr={method:"POST",headers:Tn,body:JSON.stringify({fid:ut,authVersion:re,appId:oe.appId,sdkVersion:Ye})},zr=yield ct(()=>fetch(Zt,wr));if(zr.ok){const ri=yield zr.json();return{fid:ri.fid||ut,registrationStatus:2,refreshToken:ri.refreshToken,authToken:Vt(ri.authToken)}}throw yield $t("Create Installation",zr)})).apply(this,arguments)}function $e(oe){return new Promise(ze=>{setTimeout(ze,oe)})}const Rt=/^[cdef][\w-]{21}$/;function Yt(){try{const oe=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(oe),oe[0]=112+oe[0]%16;const ut=function wn(oe){return function Ke(oe){return btoa(String.fromCharCode(...oe)).replace(/\+/g,"-").replace(/\//g,"_")}(oe).substr(0,22)}(oe);return Rt.test(ut)?ut:""}catch{return""}}function An(oe){return`${oe.appName}!${oe.appId}`}const Mt=new Map;function tn(oe,ze){const ut=An(oe);Kn(ut,ze),function Vn(oe,ze){const ut=function er(){return!fn&&"BroadcastChannel"in self&&(fn=new BroadcastChannel("[Firebase] FID Change"),fn.onmessage=oe=>{Kn(oe.data.key,oe.data.fid)}),fn}();ut&&ut.postMessage({key:oe,fid:ze}),function hr(){0===Mt.size&&fn&&(fn.close(),fn=null)}()}(ut,ze)}function Kn(oe,ze){const ut=Mt.get(oe);if(ut)for(const Zt of ut)Zt(ze)}let fn=null;const ar="firebase-installations-store";let Mr=null;function ln(){return Mr||(Mr=(0,ve.X3)("firebase-installations-database",1,{upgrade:(oe,ze)=>{0===ze&&oe.createObjectStore(ar)}})),Mr}function qn(oe,ze){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,C.Z)(function*(oe,ze){const ut=An(oe),Tn=(yield ln()).transaction(ar,"readwrite"),Un=Tn.objectStore(ar),hn=yield Un.get(ut);return yield Un.put(ze,ut),yield Tn.done,(!hn||hn.fid!==ze.fid)&&tn(oe,ze.fid),ze})).apply(this,arguments)}function mr(oe){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(oe){const ze=An(oe),Zt=(yield ln()).transaction(ar,"readwrite");yield Zt.objectStore(ar).delete(ze),yield Zt.done})).apply(this,arguments)}function dr(oe,ze){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,C.Z)(function*(oe,ze){const ut=An(oe),Tn=(yield ln()).transaction(ar,"readwrite"),Un=Tn.objectStore(ar),hn=yield Un.get(ut),wr=ze(hn);return void 0===wr?yield Un.delete(ut):yield Un.put(wr,ut),yield Tn.done,wr&&(!hn||hn.fid!==wr.fid)&&tn(oe,wr.fid),wr})).apply(this,arguments)}function Zn(oe){return fr.apply(this,arguments)}function fr(){return(fr=(0,C.Z)(function*(oe){let ze;const ut=yield dr(oe.appConfig,Zt=>{const Tn=oi(Zt),Un=Er(oe,Tn);return ze=Un.registrationPromise,Un.installationEntry});return""===ut.fid?{installationEntry:yield ze}:{installationEntry:ut,registrationPromise:ze}})).apply(this,arguments)}function oi(oe){return nn(oe||{fid:Yt(),registrationStatus:0})}function Er(oe,ze){if(0===ze.registrationStatus){if(!navigator.onLine)return{installationEntry:ze,registrationPromise:Promise.reject(Ft.create("app-offline"))};const ut={fid:ze.fid,registrationStatus:1,registrationTime:Date.now()},Zt=function tt(oe,ze){return me.apply(this,arguments)}(oe,ut);return{installationEntry:ut,registrationPromise:Zt}}return 1===ze.registrationStatus?{installationEntry:ze,registrationPromise:_e(oe)}:{installationEntry:ze}}function me(){return(me=(0,C.Z)(function*(oe,ze){try{const ut=yield Ne(oe,ze);return qn(oe.appConfig,ut)}catch(ut){throw it(ut)&&409===ut.customData.serverCode?yield mr(oe.appConfig):yield qn(oe.appConfig,{fid:ze.fid,registrationStatus:0}),ut}})).apply(this,arguments)}function _e(oe){return ft.apply(this,arguments)}function ft(){return(ft=(0,C.Z)(function*(oe){let ze=yield gt(oe.appConfig);for(;1===ze.registrationStatus;)yield $e(100),ze=yield gt(oe.appConfig);if(0===ze.registrationStatus){const{installationEntry:ut,registrationPromise:Zt}=yield Zn(oe);return Zt||ut}return ze})).apply(this,arguments)}function gt(oe){return dr(oe,ze=>{if(!ze)throw Ft.create("installation-not-found");return nn(ze)})}function nn(oe){return function vn(oe){return 1===oe.registrationStatus&&oe.registrationTime+1e4<Date.now()}(oe)?{fid:oe.fid,registrationStatus:0}:oe}function Hn(oe,ze){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,C.Z)(function*({appConfig:oe,heartbeatServiceProvider:ze},ut){const Zt=tr(oe,ut),Tn=Ge(oe,ut),Un=ze.getImmediate({optional:!0});if(Un){const ri=yield Un.getHeartbeatsHeader();ri&&Tn.append("x-firebase-client",ri)}const wr={method:"POST",headers:Tn,body:JSON.stringify({installation:{sdkVersion:Ye,appId:oe.appId}})},zr=yield ct(()=>fetch(Zt,wr));if(zr.ok)return Vt(yield zr.json());throw yield $t("Generate Auth Token",zr)})).apply(this,arguments)}function tr(oe,{fid:ze}){return`${et(oe)}/${ze}/authTokens:generate`}function En(oe){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,C.Z)(function*(oe,ze=!1){let ut;const Zt=yield dr(oe.appConfig,Un=>{if(!Ie(Un))throw Ft.create("not-registered");const hn=Un.authToken;if(!ze&&yt(hn))return Un;if(1===hn.requestStatus)return ut=xn(oe,ze),Un;{if(!navigator.onLine)throw Ft.create("app-offline");const wr=yn(Un);return ut=ce(oe,wr),wr}});return ut?yield ut:Zt.authToken})).apply(this,arguments)}function xn(oe,ze){return De.apply(this,arguments)}function De(){return(De=(0,C.Z)(function*(oe,ze){let ut=yield le(oe.appConfig);for(;1===ut.authToken.requestStatus;)yield $e(100),ut=yield le(oe.appConfig);const Zt=ut.authToken;return 0===Zt.requestStatus?En(oe,ze):Zt})).apply(this,arguments)}function le(oe){return dr(oe,ze=>{if(!Ie(ze))throw Ft.create("not-registered");return function rr(oe){return 1===oe.requestStatus&&oe.requestTime+1e4<Date.now()}(ze.authToken)?Object.assign(Object.assign({},ze),{authToken:{requestStatus:0}}):ze})}function ce(oe,ze){return be.apply(this,arguments)}function be(){return(be=(0,C.Z)(function*(oe,ze){try{const ut=yield Hn(oe,ze),Zt=Object.assign(Object.assign({},ze),{authToken:ut});return yield qn(oe.appConfig,Zt),ut}catch(ut){if(!it(ut)||401!==ut.customData.serverCode&&404!==ut.customData.serverCode){const Zt=Object.assign(Object.assign({},ze),{authToken:{requestStatus:0}});yield qn(oe.appConfig,Zt)}else yield mr(oe.appConfig);throw ut}})).apply(this,arguments)}function Ie(oe){return void 0!==oe&&2===oe.registrationStatus}function yt(oe){return 2===oe.requestStatus&&!function kt(oe){const ze=Date.now();return ze<oe.creationTime||oe.creationTime+oe.expiresIn<ze+36e5}(oe)}function yn(oe){const ze={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},oe),{authToken:ze})}function Ir(){return(Ir=(0,C.Z)(function*(oe){const ze=oe,{installationEntry:ut,registrationPromise:Zt}=yield Zn(ze);return Zt?Zt.catch(console.error):En(ze).catch(console.error),ut.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,C.Z)(function*(oe,ze=!1){const ut=oe;return yield Fe(ut),(yield En(ut,ze)).token})).apply(this,arguments)}function Fe(oe){return vt.apply(this,arguments)}function vt(){return(vt=(0,C.Z)(function*(oe){const{registrationPromise:ze}=yield Zn(oe);ze&&(yield ze)})).apply(this,arguments)}function Jt(oe){return Ft.create("missing-app-config-values",{valueName:oe})}const Pe="installations",G=oe=>{const ze=oe.getProvider("app").getImmediate(),ut=function pt(oe){if(!oe||!oe.options)throw Jt("App Configuration");if(!oe.name)throw Jt("App Name");const ze=["projectId","apiKey","appId"];for(const ut of ze)if(!oe.options[ut])throw Jt(ut);return{appName:oe.name,projectId:oe.options.projectId,apiKey:oe.options.apiKey,appId:oe.options.appId}}(ze);return{app:ze,appConfig:ut,heartbeatServiceProvider:(0,p._getProvider)(ze,"heartbeat"),_delete:()=>Promise.resolve()}},te=oe=>{const ze=oe.getProvider("app").getImmediate(),ut=(0,p._getProvider)(ze,Pe).getImmediate();return{getId:()=>function Qn(oe){return Ir.apply(this,arguments)}(ut),getToken:Tn=>function Je(oe){return Ae.apply(this,arguments)}(ut,Tn)}};(function Te(){(0,p._registerComponent)(new Z.wA(Pe,G,"PUBLIC")),(0,p._registerComponent)(new Z.wA("installations-internal",te,"PRIVATE"))})(),(0,p.registerVersion)(Le,je),(0,p.registerVersion)(Le,je,"esm2017")},1877:(an,ot,j)=>{j.d(ot,{Am:()=>Ye,Ub:()=>we,Yd:()=>je,in:()=>p});const C=[];var p=(()=>{return(re=p||(p={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",p;var re})();const Z={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},R=p.INFO,ve={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},Le=(re,he,...Ce)=>{if(he<re.logLevel)return;const dt=(new Date).toISOString(),ht=ve[he];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[ht](`[${dt}]  ${re.name}:`,...Ce)};class je{constructor(he){this.name=he,this._logLevel=R,this._logHandler=Le,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in p))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?Z[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...he),this._logHandler(this,p.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...he),this._logHandler(this,p.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,p.INFO,...he),this._logHandler(this,p.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,p.WARN,...he),this._logHandler(this,p.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...he),this._logHandler(this,p.ERROR,...he)}}function we(re){C.forEach(he=>{he.setLogLevel(re)})}function Ye(re,he){for(const Ce of C){let dt=null;he&&he.level&&(dt=Z[he.level]),Ce.userLogHandler=null===re?null:(ht,at,...Ft)=>{const it=Ft.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");at>=(dt??ht.logLevel)&&re({level:p[at].toLowerCase(),message:it,args:Ft,type:ht.name})}}}},8766:(an,ot,j)=>{j.d(ot,{Lj:()=>Me,X3:()=>$t});var C=j(5861);let Z,R;const je=new WeakMap,we=new WeakMap,Ye=new WeakMap,re=new WeakMap,he=new WeakMap;let ht={get(ie,Ze,Ne){if(ie instanceof IDBTransaction){if("done"===Ze)return we.get(ie);if("objectStoreNames"===Ze)return ie.objectStoreNames||Ye.get(ie);if("store"===Ze)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return et(ie[Ze])},set:(ie,Ze,Ne)=>(ie[Ze]=Ne,!0),has:(ie,Ze)=>ie instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in ie};function it(ie){return"function"==typeof ie?function Ft(ie){return ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return R||(R=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ie)?function(...Ze){return ie.apply(Vt(this),Ze),et(je.get(this))}:function(...Ze){return et(ie.apply(Vt(this),Ze))}:function(Ze,...Ne){const Ue=ie.call(Vt(this),Ze,...Ne);return Ye.set(Ue,Ze.sort?Ze.sort():[Ze]),et(Ue)}}(ie):(ie instanceof IDBTransaction&&function dt(ie){if(we.has(ie))return;const Ze=new Promise((Ne,Ue)=>{const $e=()=>{ie.removeEventListener("complete",Ke),ie.removeEventListener("error",Rt),ie.removeEventListener("abort",Rt)},Ke=()=>{Ne(),$e()},Rt=()=>{Ue(ie.error||new DOMException("AbortError","AbortError")),$e()};ie.addEventListener("complete",Ke),ie.addEventListener("error",Rt),ie.addEventListener("abort",Rt)});we.set(ie,Ze)}(ie),((ie,Ze)=>Ze.some(Ne=>ie instanceof Ne))(ie,function ve(){return Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ie,ht):ie)}function et(ie){if(ie instanceof IDBRequest)return function Ce(ie){const Ze=new Promise((Ne,Ue)=>{const $e=()=>{ie.removeEventListener("success",Ke),ie.removeEventListener("error",Rt)},Ke=()=>{Ne(et(ie.result)),$e()},Rt=()=>{Ue(ie.error),$e()};ie.addEventListener("success",Ke),ie.addEventListener("error",Rt)});return Ze.then(Ne=>{Ne instanceof IDBCursor&&je.set(Ne,ie)}).catch(()=>{}),he.set(Ze,ie),Ze}(ie);if(re.has(ie))return re.get(ie);const Ze=it(ie);return Ze!==ie&&(re.set(ie,Ze),he.set(Ze,ie)),Ze}const Vt=ie=>he.get(ie);function $t(ie,Ze,{blocked:Ne,upgrade:Ue,blocking:$e,terminated:Ke}={}){const Rt=indexedDB.open(ie,Ze),bt=et(Rt);return Ue&&Rt.addEventListener("upgradeneeded",Yt=>{Ue(et(Rt.result),Yt.oldVersion,Yt.newVersion,et(Rt.transaction))}),Ne&&Rt.addEventListener("blocked",()=>Ne()),bt.then(Yt=>{Ke&&Yt.addEventListener("close",()=>Ke()),$e&&Yt.addEventListener("versionchange",()=>$e())}).catch(()=>{}),bt}function Me(ie,{blocked:Ze}={}){const Ne=indexedDB.deleteDatabase(ie);return Ze&&Ne.addEventListener("blocked",()=>Ze()),et(Ne).then(()=>{})}const lt=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],ct=new Map;function ee(ie,Ze){if(!(ie instanceof IDBDatabase)||Ze in ie||"string"!=typeof Ze)return;if(ct.get(Ze))return ct.get(Ze);const Ne=Ze.replace(/FromIndex$/,""),Ue=Ze!==Ne,$e=Ge.includes(Ne);if(!(Ne in(Ue?IDBIndex:IDBObjectStore).prototype)||!$e&&!lt.includes(Ne))return;const Ke=function(){var Rt=(0,C.Z)(function*(bt,...Yt){const wn=this.transaction(bt,$e?"readwrite":"readonly");let An=wn.store;return Ue&&(An=An.index(Yt.shift())),(yield Promise.all([An[Ne](...Yt),$e&&wn.done]))[0]});return function(Yt){return Rt.apply(this,arguments)}}();return ct.set(Ze,Ke),Ke}!function at(ie){ht=ie(ht)}(ie=>({...ie,get:(Ze,Ne,Ue)=>ee(Ze,Ne)||ie.get(Ze,Ne,Ue),has:(Ze,Ne)=>!!ee(Ze,Ne)||ie.has(Ze,Ne)}))},5861:(an,ot,j)=>{function C(Z,R,ve,Le,je,we,Ye){try{var re=Z[we](Ye),he=re.value}catch(Ce){return void ve(Ce)}re.done?R(he):Promise.resolve(he).then(Le,je)}function p(Z){return function(){var R=this,ve=arguments;return new Promise(function(Le,je){var we=Z.apply(R,ve);function Ye(he){C(we,Le,je,Ye,re,"next",he)}function re(he){C(we,Le,je,Ye,re,"throw",he)}Ye(void 0)})}}j.d(ot,{Z:()=>p})}},an=>{an(an.s=9190)}]);